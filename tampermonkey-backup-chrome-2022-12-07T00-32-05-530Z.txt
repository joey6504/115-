{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"115转存助手ui优化版3.5改","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_prototypes":false,"compat_powerful_this":null,"noframes":null,"unwrap":null,"run_at":null,"tab_types":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["https://115.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":["https://115.com/s/*"],"merge_excludes":true,"use_connects":[],"orig_connects":["proapi.115.com","webapi.115.com","115.com"],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-idle","orig_noframes":null}},"storage":{"ts":1670372041774,"data":{"setTaskCancel":"bfalse","Cfg4ne":"s{\"createRootFolderDefaultValue\":false,\"createChildFolderVisible\":true,\"createItemSha1\":true,\"createItemSha1InThumb\":true,\"advancedRename\":false,\"autoUseSeparator\":true,\"autoUseSeparatorToRename\":true,\"separator\":\"變\",\"uploadNumber\":\"4\",\"uploadSleepTime\":\"500\",\"downloadNumber\":\"4\",\"downloadSleepTime\":\"1300\",\"createFolderSleepTime\":\"300\"}"}},"enabled":true,"position":1,"uuid":"85fbea62-a8cd-4e6f-ac14-ea1d539ec14f","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAxMTXovazlrZjliqnmiYt1aeS8mOWMlueJiDMuNeaUuQovLyBAbmFtZTp6aCAgICAgIDExNei9rOWtmOWKqeaJi3Vp5LyY5YyW54mIMy415pS5Ci8vIEBkZXNjcmlwdGlvbiAgMjAyMi4wNC4wMiDmm7TmlrDvvIwxMTXovazlrZjliqnmiYt1aeS8mOWMlueJiCB2My415pS5ICgxNDMuMjAyMi4wNDAyLjEpKGJhc2VkIG9uIEZha2UxMTVVcGxvYWQgMS40LjMgQFQzcnJ5KQovLyBAYXV0aG9yICAgICAgIE5ldmVyNEV2ZXIKLy8gQG5hbWVzcGFjZSAgICBGYWtlMTE1VXBsb2FkQE5ldmVyNEV2ZXIKLy8gQHZlcnNpb24gICAgICAxNDMuMjAyMi4wNDAyLjEKLy8gQG1hdGNoICAgICAgICBodHRwczovLzExNS5jb20vKgovLyBAZXhjbHVkZSAgICAgIGh0dHBzOi8vMTE1LmNvbS9zLyoKCi8vIEBncmFudCAgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gQGdyYW50ICAgICAgICBHTV9sb2cKLy8gQGdyYW50ICAgICAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICAgR01fc2V0Q2xpcGJvYXJkCi8vIEBncmFudCAgICAgICAgdW5zYWZlV2luZG93Ci8vIEBncmFudCAgICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZAovLyBAZ3JhbnQgICAgICAgIEdNX2FkZFN0eWxlCi8vIEBncmFudCAgICAgICAgR01faW5mbwoKLy8gQGNvbm5lY3QgICAgICBwcm9hcGkuMTE1LmNvbQovLyBAY29ubmVjdCAgICAgIHdlYmFwaS4xMTUuY29tCi8vIEBjb25uZWN0ICAgICAgMTE1LmNvbQoKLy8gQHJlcXVpcmUgICAgICBodHRwczovL3VucGtnLmNvbS91bmRlcnNjb3JlQDEuMTIuMC91bmRlcnNjb3JlLW1pbi5qcwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vdW5wa2cuY29tL3N3ZWV0YWxlcnQyQDExLjMuMAovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vdW5wa2cuY29tL25vZGUtZm9yZ2VAMC4xMC4wL2Rpc3QvZm9yZ2UubWluLmpzCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly91bnBrZy5jb20vZW1vdXRpbHNAMi4wLjAvZGlzdC91bWQvZW1vdXRpbHMubWluLmpzCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9jZG4uYm9vdGNzcy5jb20vYmx1ZWltcC1tZDUvMi4xMC4wL2pzL21kNS5taW4uanMKLy8gQHJlcXVpcmUgICAgICBodHRwczovL3BldGVyb2xzb24uZ2l0aHViLmlvL0JpZ0ludGVnZXIuanMvQmlnSW50ZWdlci5taW4uanMKLy8gPT0vVXNlclNjcmlwdD09CgoKLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgror7fku47ku6XkuIvojrflj5bmnIDmlrDniYjvvIzmiJbogIXpgYfliLDpl67popjljrvmraTlj43ppojvvIzmhJ/osKIKaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vTmVydmVyNEV2ZXIvOTUzNDQ3YzllY2QzMzBmZmMwODYxZDRjYmI4MzkzNjkKKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi8KCi8q6ZKI5a+5572R57uc6Zeu6aKY77yM5Y+q6IO95bCG5LiN56iz5a6a55qE5L6d6LWW5bqT5pS+572u5LqO5q2kKi8KCi8qanNzaGFAMi4zLjEvc3JjL3NoYS5qcyovCi8qCiBBIEphdmFTY3JpcHQgaW1wbGVtZW50YXRpb24gb2YgdGhlIFNIQSBmYW1pbHkgb2YgaGFzaGVzLCBhcwogZGVmaW5lZCBpbiBGSVBTIFBVQiAxODAtNCBhbmQgRklQUyBQVUIgMjAyLCBhcyB3ZWxsIGFzIHRoZSBjb3JyZXNwb25kaW5nCiBITUFDIGltcGxlbWVudGF0aW9uIGFzIGRlZmluZWQgaW4gRklQUyBQVUIgMTk4YQoKIENvcHlyaWdodCBCcmlhbiBUdXJlayAyMDA4LTIwMTcKIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSBCU0QgTGljZW5zZQogU2VlIGh0dHA6Ly9jYWxpZ2F0aW8uZ2l0aHViLmNvbS9qc1NIQS8gZm9yIG1vcmUgaW5mb3JtYXRpb24KCiBTZXZlcmFsIGZ1bmN0aW9ucyB0YWtlbiBmcm9tIFBhdWwgSm9obnN0b24KKi8KJ3VzZSBzdHJpY3QnOwooZnVuY3Rpb24gKFkpIHsKICAgIGZ1bmN0aW9uIEMoYywgYSwgYikgewogICAgICAgIHZhciBlID0gMCwKICAgICAgICAgICAgaCA9IFtdLAogICAgICAgICAgICBuID0gMCwKICAgICAgICAgICAgZywgbCwgZCwgZiwgbSwgcSwgdSwgciwgSSA9ICExLAogICAgICAgICAgICB2ID0gW10sCiAgICAgICAgICAgIHcgPSBbXSwKICAgICAgICAgICAgdCwgeSA9ICExLAogICAgICAgICAgICB6ID0gITEsCiAgICAgICAgICAgIHggPSAtMTsKICAgICAgICBiID0gYiB8fCB7fTsKICAgICAgICBnID0gYi5lbmNvZGluZyB8fCAiVVRGOCI7CiAgICAgICAgdCA9IGIubnVtUm91bmRzIHx8IDE7CiAgICAgICAgaWYgKHQgIT09IHBhcnNlSW50KHQsIDEwKSB8fCAxID4gdCkgdGhyb3cgRXJyb3IoIm51bVJvdW5kcyBtdXN0IGEgaW50ZWdlciA+PSAxIik7CiAgICAgICAgaWYgKCJTSEEtMSIgPT09IGMpIG0gPSA1MTIsIHEgPSBLLCB1ID0gWiwgZiA9IDE2MCwgciA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgIHJldHVybiBhLnNsaWNlKCkKICAgICAgICB9OwogICAgICAgIGVsc2UgaWYgKDAgPT09IGMubGFzdEluZGV4T2YoIlNIQS0iLCAwKSkKICAgICAgICAgICAgaWYgKHEgPSBmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBMKGEsIGIsIGMpCiAgICAgICAgICAgICAgICB9LCB1ID0gZnVuY3Rpb24gKGEsIGIsIGgsIGUpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgaywgZjsKICAgICAgICAgICAgICAgICAgICBpZiAoIlNIQS0yMjQiID09PSBjIHx8ICJTSEEtMjU2IiA9PT0gYykgayA9IChiICsgNjUgPj4+IDkgPDwgNCkgKyAxNSwgZiA9IDE2OwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCJTSEEtMzg0IiA9PT0gYyB8fCAiU0hBLTUxMiIgPT09IGMpIGsgPSAoYiArIDEyOSA+Pj4gMTAgPDwKICAgICAgICAgICAgICAgICAgICAgICAgNSkgKyAzMSwgZiA9IDMyOwogICAgICAgICAgICAgICAgICAgIGVsc2UgdGhyb3cgRXJyb3IoIlVuZXhwZWN0ZWQgZXJyb3IgaW4gU0hBLTIgaW1wbGVtZW50YXRpb24iKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKDsgYS5sZW5ndGggPD0gazspIGEucHVzaCgwKTsKICAgICAgICAgICAgICAgICAgICBhW2IgPj4+IDVdIHw9IDEyOCA8PCAyNCAtIGIgJSAzMjsKICAgICAgICAgICAgICAgICAgICBiID0gYiArIGg7CiAgICAgICAgICAgICAgICAgICAgYVtrXSA9IGIgJiA0Mjk0OTY3Mjk1OwogICAgICAgICAgICAgICAgICAgIGFbayAtIDFdID0gYiAvIDQyOTQ5NjcyOTYgfCAwOwogICAgICAgICAgICAgICAgICAgIGggPSBhLmxlbmd0aDsKICAgICAgICAgICAgICAgICAgICBmb3IgKGIgPSAwOyBiIDwgaDsgYiArPSBmKSBlID0gTChhLnNsaWNlKGIsIGIgKyBmKSwgZSwgYyk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJTSEEtMjI0IiA9PT0gYykgYSA9IFtlWzBdLCBlWzFdLCBlWzJdLCBlWzNdLCBlWzRdLCBlWzVdLCBlWzZdXTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgiU0hBLTI1NiIgPT09IGMpIGEgPSBlOwogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKCJTSEEtMzg0IiA9PT0gYykgYSA9IFtlWzBdLmEsIGVbMF0uYiwgZVsxXS5hLCBlWzFdLmIsIGVbMl0uYSwgZVsyXS5iLCBlWzNdLmEsIGVbM10uYiwgZVs0XS5hLCBlWzRdLmIsIGVbNV0uYSwgZVs1XS5iXTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgiU0hBLTUxMiIgPT09IGMpIGEgPSBbZVswXS5hLCBlWzBdLmIsIGVbMV0uYSwgZVsxXS5iLCBlWzJdLmEsIGVbMl0uYiwgZVszXS5hLCBlWzNdLmIsIGVbNF0uYSwKICAgICAgICAgICAgICAgICAgICAgICAgZVs0XS5iLCBlWzVdLmEsIGVbNV0uYiwgZVs2XS5hLCBlWzZdLmIsIGVbN10uYSwgZVs3XS5iCiAgICAgICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgICAgICAgICBlbHNlIHRocm93IEVycm9yKCJVbmV4cGVjdGVkIGVycm9yIGluIFNIQS0yIGltcGxlbWVudGF0aW9uIik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGEKICAgICAgICAgICAgICAgIH0sIHIgPSBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBhLnNsaWNlKCkKICAgICAgICAgICAgICAgIH0sICJTSEEtMjI0IiA9PT0gYykgbSA9IDUxMiwgZiA9IDIyNDsKICAgICAgICAgICAgZWxzZSBpZiAoIlNIQS0yNTYiID09PSBjKSBtID0gNTEyLCBmID0gMjU2OwogICAgICAgIGVsc2UgaWYgKCJTSEEtMzg0IiA9PT0gYykgbSA9IDEwMjQsIGYgPSAzODQ7CiAgICAgICAgZWxzZSBpZiAoIlNIQS01MTIiID09PSBjKSBtID0gMTAyNCwgZiA9IDUxMjsKICAgICAgICBlbHNlIHRocm93IEVycm9yKCJDaG9zZW4gU0hBIHZhcmlhbnQgaXMgbm90IHN1cHBvcnRlZCIpOwogICAgICAgIGVsc2UgaWYgKDAgPT09IGMubGFzdEluZGV4T2YoIlNIQTMtIiwgMCkgfHwgMCA9PT0gYy5sYXN0SW5kZXhPZigiU0hBS0UiLCAwKSkgewogICAgICAgICAgICB2YXIgRiA9IDY7CiAgICAgICAgICAgIHEgPSBEOwogICAgICAgICAgICByID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgIHZhciBjID0gW10sCiAgICAgICAgICAgICAgICAgICAgZTsKICAgICAgICAgICAgICAgIGZvciAoZSA9IDA7IDUgPiBlOyBlICs9IDEpIGNbZV0gPSBhW2VdLnNsaWNlKCk7CiAgICAgICAgICAgICAgICByZXR1cm4gYwogICAgICAgICAgICB9OwogICAgICAgICAgICB4ID0gMTsKICAgICAgICAgICAgaWYgKCJTSEEzLTIyNCIgPT09CiAgICAgICAgICAgICAgICBjKSBtID0gMTE1MiwgZiA9IDIyNDsKICAgICAgICAgICAgZWxzZSBpZiAoIlNIQTMtMjU2IiA9PT0gYykgbSA9IDEwODgsIGYgPSAyNTY7CiAgICAgICAgICAgIGVsc2UgaWYgKCJTSEEzLTM4NCIgPT09IGMpIG0gPSA4MzIsIGYgPSAzODQ7CiAgICAgICAgICAgIGVsc2UgaWYgKCJTSEEzLTUxMiIgPT09IGMpIG0gPSA1NzYsIGYgPSA1MTI7CiAgICAgICAgICAgIGVsc2UgaWYgKCJTSEFLRTEyOCIgPT09IGMpIG0gPSAxMzQ0LCBmID0gLTEsIEYgPSAzMSwgeiA9ICEwOwogICAgICAgICAgICBlbHNlIGlmICgiU0hBS0UyNTYiID09PSBjKSBtID0gMTA4OCwgZiA9IC0xLCBGID0gMzEsIHogPSAhMDsKICAgICAgICAgICAgZWxzZSB0aHJvdyBFcnJvcigiQ2hvc2VuIFNIQSB2YXJpYW50IGlzIG5vdCBzdXBwb3J0ZWQiKTsKICAgICAgICAgICAgdSA9IGZ1bmN0aW9uIChhLCBjLCBlLCBiLCBoKSB7CiAgICAgICAgICAgICAgICBlID0gbTsKICAgICAgICAgICAgICAgIHZhciBrID0gRiwKICAgICAgICAgICAgICAgICAgICBmLCBnID0gW10sCiAgICAgICAgICAgICAgICAgICAgbiA9IGUgPj4+IDUsCiAgICAgICAgICAgICAgICAgICAgbCA9IDAsCiAgICAgICAgICAgICAgICAgICAgZCA9IGMgPj4+IDU7CiAgICAgICAgICAgICAgICBmb3IgKGYgPSAwOyBmIDwgZCAmJiBjID49IGU7IGYgKz0gbikgYiA9IEQoYS5zbGljZShmLCBmICsgbiksIGIpLCBjIC09IGU7CiAgICAgICAgICAgICAgICBhID0gYS5zbGljZShmKTsKICAgICAgICAgICAgICAgIGZvciAoYyAlPSBlOyBhLmxlbmd0aCA8IG47KSBhLnB1c2goMCk7CiAgICAgICAgICAgICAgICBmID0gYyA+Pj4gMzsKICAgICAgICAgICAgICAgIGFbZiA+PiAyXSBePSBrIDw8IGYgJSA0ICogODsKICAgICAgICAgICAgICAgIGFbbiAtIDFdIF49IDIxNDc0ODM2NDg7CiAgICAgICAgICAgICAgICBmb3IgKGIgPSBEKGEsIGIpOyAzMiAqIGcubGVuZ3RoIDwgaDspIHsKICAgICAgICAgICAgICAgICAgICBhID0gYltsICUKICAgICAgICAgICAgICAgICAgICAgICAgNV1bbCAvIDUgfCAwXTsKICAgICAgICAgICAgICAgICAgICBnLnB1c2goYS5iKTsKICAgICAgICAgICAgICAgICAgICBpZiAoMzIgKiBnLmxlbmd0aCA+PSBoKSBicmVhazsKICAgICAgICAgICAgICAgICAgICBnLnB1c2goYS5hKTsKICAgICAgICAgICAgICAgICAgICBsICs9IDE7CiAgICAgICAgICAgICAgICAgICAgMCA9PT0gNjQgKiBsICUgZSAmJiBEKG51bGwsIGIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICByZXR1cm4gZwogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHRocm93IEVycm9yKCJDaG9zZW4gU0hBIHZhcmlhbnQgaXMgbm90IHN1cHBvcnRlZCIpOwogICAgICAgIGQgPSBNKGEsIGcsIHgpOwogICAgICAgIGwgPSBBKGMpOwogICAgICAgIHRoaXMuc2V0SE1BQ0tleSA9IGZ1bmN0aW9uIChhLCBiLCBoKSB7CiAgICAgICAgICAgIHZhciBrOwogICAgICAgICAgICBpZiAoITAgPT09IEkpIHRocm93IEVycm9yKCJITUFDIGtleSBhbHJlYWR5IHNldCIpOwogICAgICAgICAgICBpZiAoITAgPT09IHkpIHRocm93IEVycm9yKCJDYW5ub3Qgc2V0IEhNQUMga2V5IGFmdGVyIGNhbGxpbmcgdXBkYXRlIik7CiAgICAgICAgICAgIGlmICghMCA9PT0geikgdGhyb3cgRXJyb3IoIlNIQUtFIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIEhNQUMiKTsKICAgICAgICAgICAgZyA9IChoIHx8IHt9KS5lbmNvZGluZyB8fCAiVVRGOCI7CiAgICAgICAgICAgIGIgPSBNKGIsIGcsIHgpKGEpOwogICAgICAgICAgICBhID0gYi5iaW5MZW47CiAgICAgICAgICAgIGIgPSBiLnZhbHVlOwogICAgICAgICAgICBrID0gbSA+Pj4gMzsKICAgICAgICAgICAgaCA9IGsgLyA0IC0gMTsKICAgICAgICAgICAgaWYgKGsgPCBhIC8gOCkgewogICAgICAgICAgICAgICAgZm9yIChiID0gdShiLCBhLCAwLCBBKGMpLCBmKTsgYi5sZW5ndGggPD0gaDspIGIucHVzaCgwKTsKICAgICAgICAgICAgICAgIGJbaF0gJj0gNDI5NDk2NzA0MAogICAgICAgICAgICB9IGVsc2UgaWYgKGsgPiBhIC8gOCkgewogICAgICAgICAgICAgICAgZm9yICg7IGIubGVuZ3RoIDw9IGg7KSBiLnB1c2goMCk7CiAgICAgICAgICAgICAgICBiW2hdICY9IDQyOTQ5NjcwNDAKICAgICAgICAgICAgfQogICAgICAgICAgICBmb3IgKGEgPSAwOyBhIDw9IGg7IGEgKz0gMSkgdlthXSA9IGJbYV0gXiA5MDk1MjI0ODYsIHdbYV0gPSBiW2FdIF4gMTU0OTU1NjgyODsKICAgICAgICAgICAgbCA9IHEodiwgbCk7CiAgICAgICAgICAgIGUgPSBtOwogICAgICAgICAgICBJID0gITAKICAgICAgICB9OwogICAgICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgdmFyIGMsIGIsIGssIGYgPSAwLAogICAgICAgICAgICAgICAgZyA9IG0gPj4+IDU7CiAgICAgICAgICAgIGMgPSBkKGEsIGgsIG4pOwogICAgICAgICAgICBhID0gYy5iaW5MZW47CiAgICAgICAgICAgIGIgPSBjLnZhbHVlOwogICAgICAgICAgICBjID0gYSA+Pj4gNTsKICAgICAgICAgICAgZm9yIChrID0gMDsgayA8IGM7IGsgKz0gZykgZiArIG0gPD0gYSAmJiAobCA9IHEoYi5zbGljZShrLCBrICsgZyksIGwpLCBmICs9IG0pOwogICAgICAgICAgICBlICs9IGY7CiAgICAgICAgICAgIGggPSBiLnNsaWNlKGYgPj4+IDUpOwogICAgICAgICAgICBuID0gYSAlIG07CiAgICAgICAgICAgIHkgPSAhMAogICAgICAgIH07CiAgICAgICAgdGhpcy5nZXRIYXNoID0gZnVuY3Rpb24gKGEsIGIpIHsKICAgICAgICAgICAgdmFyIGssIGcsIGQsIG07CiAgICAgICAgICAgIGlmICghMCA9PT0gSSkgdGhyb3cgRXJyb3IoIkNhbm5vdCBjYWxsIGdldEhhc2ggYWZ0ZXIgc2V0dGluZyBITUFDIGtleSIpOwogICAgICAgICAgICBkID0gTihiKTsKICAgICAgICAgICAgaWYgKCEwID09PSB6KSB7CiAgICAgICAgICAgICAgICBpZiAoLTEgPT09IGQuc2hha2VMZW4pIHRocm93IEVycm9yKCJzaGFrZUxlbiBtdXN0IGJlIHNwZWNpZmllZCBpbiBvcHRpb25zIik7CiAgICAgICAgICAgICAgICBmID0gZC5zaGFrZUxlbgogICAgICAgICAgICB9CiAgICAgICAgICAgIHN3aXRjaCAoYSkgewogICAgICAgICAgICAgICAgY2FzZSAiSEVYIjoKICAgICAgICAgICAgICAgICAgICBrID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE8oYSwgZiwgeCwgZCkKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAiQjY0IjoKICAgICAgICAgICAgICAgICAgICBrID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFAoYSwgZiwgeCwgZCkKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAiQllURVMiOgogICAgICAgICAgICAgICAgICAgIGsgPSBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUShhLCBmLCB4KQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICJBUlJBWUJVRkZFUiI6CiAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgZyA9IG5ldyBBcnJheUJ1ZmZlcigwKQogICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoIkFSUkFZQlVGRkVSIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBlbnZpcm9ubWVudCIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBrID0gZnVuY3Rpb24gKGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFIoYSwgZiwgeCkKICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigiZm9ybWF0IG11c3QgYmUgSEVYLCBCNjQsIEJZVEVTLCBvciBBUlJBWUJVRkZFUiIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG0gPSB1KGguc2xpY2UoKSwgbiwgZSwgcihsKSwgZik7CiAgICAgICAgICAgIGZvciAoZyA9IDE7IGcgPCB0OyBnICs9IDEpICEwID09PSB6ICYmIDAgIT09IGYgJSAzMiAmJiAobVttLmxlbmd0aCAtIDFdICY9IDE2Nzc3MjE1ID4+PiAyNCAtIGYgJSAzMiksIG0gPSB1KG0sIGYsCiAgICAgICAgICAgICAgICAwLCBBKGMpLCBmKTsKICAgICAgICAgICAgcmV0dXJuIGsobSkKICAgICAgICB9OwogICAgICAgIHRoaXMuZ2V0SE1BQyA9IGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgICAgIHZhciBrLCBnLCBkLCBwOwogICAgICAgICAgICBpZiAoITEgPT09IEkpIHRocm93IEVycm9yKCJDYW5ub3QgY2FsbCBnZXRITUFDIHdpdGhvdXQgZmlyc3Qgc2V0dGluZyBITUFDIGtleSIpOwogICAgICAgICAgICBkID0gTihiKTsKICAgICAgICAgICAgc3dpdGNoIChhKSB7CiAgICAgICAgICAgICAgICBjYXNlICJIRVgiOgogICAgICAgICAgICAgICAgICAgIGsgPSBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gTyhhLCBmLCB4LCBkKQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICJCNjQiOgogICAgICAgICAgICAgICAgICAgIGsgPSBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUChhLCBmLCB4LCBkKQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICJCWVRFUyI6CiAgICAgICAgICAgICAgICAgICAgayA9IGZ1bmN0aW9uIChhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBRKGEsIGYsIHgpCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgIkFSUkFZQlVGRkVSIjoKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBrID0gbmV3IEFycmF5QnVmZmVyKDApCiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAodikgewogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigiQVJSQVlCVUZGRVIgbm90IHN1cHBvcnRlZCBieSB0aGlzIGVudmlyb25tZW50Iik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGsgPSBmdW5jdGlvbiAoYSkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUihhLCBmLCB4KQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCJvdXRwdXRGb3JtYXQgbXVzdCBiZSBIRVgsIEI2NCwgQllURVMsIG9yIEFSUkFZQlVGRkVSIik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZyA9IHUoaC5zbGljZSgpLCBuLCBlLCByKGwpLCBmKTsKICAgICAgICAgICAgcCA9IHEodywgQShjKSk7CiAgICAgICAgICAgIHAgPSB1KGcsIGYsIG0sIHAsIGYpOwogICAgICAgICAgICByZXR1cm4gayhwKQogICAgICAgIH0KICAgIH0KCiAgICBmdW5jdGlvbiBiKGMsIGEpIHsKICAgICAgICB0aGlzLmEgPSBjOwogICAgICAgIHRoaXMuYiA9IGEKICAgIH0KCiAgICBmdW5jdGlvbiBPKGMsIGEsIGIsIGUpIHsKICAgICAgICB2YXIgaCA9ICIiOwogICAgICAgIGEgLz0gODsKICAgICAgICB2YXIgbiwgZywgZDsKICAgICAgICBkID0gLTEgPT09IGIgPyAzIDogMDsKICAgICAgICBmb3IgKG4gPSAwOyBuIDwgYTsgbiArPSAxKSBnID0gY1tuID4+PiAyXSA+Pj4gOCAqIChkICsgbiAlIDQgKiBiKSwgaCArPSAiMDEyMzQ1Njc4OWFiY2RlZiIuY2hhckF0KGcgPj4+IDQgJiAxNSkgKyAiMDEyMzQ1Njc4OWFiY2RlZiIuY2hhckF0KGcgJiAxNSk7CiAgICAgICAgcmV0dXJuIGUub3V0cHV0VXBwZXIgPyBoLnRvVXBwZXJDYXNlKCkgOiBoCiAgICB9CgogICAgZnVuY3Rpb24gUChjLCBhLCBiLCBlKSB7CiAgICAgICAgdmFyIGggPSAiIiwKICAgICAgICAgICAgbiA9IGEgLyA4LAogICAgICAgICAgICBnLCBkLCBwLCBmOwogICAgICAgIGYgPSAtMSA9PT0gYiA/IDMgOiAwOwogICAgICAgIGZvciAoZyA9IDA7IGcgPCBuOyBnICs9IDMpCiAgICAgICAgICAgIGZvciAoZCA9IGcgKyAxIDwgbiA/IGNbZyArIDEgPj4+IDJdIDogMCwgcCA9IGcgKyAyIDwgbiA/IGNbZyArIDIgPj4+IDJdIDogMCwgcCA9IChjW2cgPj4+IDJdID4+PiA4ICogKGYgKyBnICUgNCAqIGIpICYgMjU1KSA8PCAxNiB8IChkID4+PiA4ICogKGYgKyAoZyArIDEpICUgNCAqIGIpICYgMjU1KSA8PCA4IHwgcCA+Pj4gOCAqIChmICsKICAgICAgICAgICAgICAgICAgICAoZyArIDIpICUgNCAqIGIpICYgMjU1LCBkID0gMDsgNCA+IGQ7IGQgKz0gMSkgOCAqIGcgKyA2ICogZCA8PSBhID8gaCArPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyIuY2hhckF0KHAgPj4+IDYgKiAoMyAtIGQpICYgNjMpIDogaCArPSBlLmI2NFBhZDsKICAgICAgICByZXR1cm4gaAogICAgfQoKICAgIGZ1bmN0aW9uIFEoYywgYSwgYikgewogICAgICAgIHZhciBlID0gIiI7CiAgICAgICAgYSAvPSA4OwogICAgICAgIHZhciBoLCBkLCBnOwogICAgICAgIGcgPSAtMSA9PT0gYiA/IDMgOiAwOwogICAgICAgIGZvciAoaCA9IDA7IGggPCBhOyBoICs9IDEpIGQgPSBjW2ggPj4+IDJdID4+PiA4ICogKGcgKyBoICUgNCAqIGIpICYgMjU1LCBlICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoZCk7CiAgICAgICAgcmV0dXJuIGUKICAgIH0KCiAgICBmdW5jdGlvbiBSKGMsIGEsIGIpIHsKICAgICAgICBhIC89IDg7CiAgICAgICAgdmFyIGUsIGggPSBuZXcgQXJyYXlCdWZmZXIoYSksCiAgICAgICAgICAgIGQsIGc7CiAgICAgICAgZyA9IG5ldyBVaW50OEFycmF5KGgpOwogICAgICAgIGQgPSAtMSA9PT0gYiA/IDMgOiAwOwogICAgICAgIGZvciAoZSA9IDA7IGUgPCBhOyBlICs9IDEpIGdbZV0gPSBjW2UgPj4+IDJdID4+PiA4ICogKGQgKyBlICUgNCAqIGIpICYgMjU1OwogICAgICAgIHJldHVybiBoCiAgICB9CgogICAgZnVuY3Rpb24gTihjKSB7CiAgICAgICAgdmFyIGEgPSB7CiAgICAgICAgICAgIG91dHB1dFVwcGVyOiAhMSwKICAgICAgICAgICAgYjY0UGFkOiAiPSIsCiAgICAgICAgICAgIHNoYWtlTGVuOiAtMQogICAgICAgIH07CiAgICAgICAgYyA9IGMgfHwge307CiAgICAgICAgYS5vdXRwdXRVcHBlciA9IGMub3V0cHV0VXBwZXIgfHwgITE7CiAgICAgICAgITAgPT09IGMuaGFzT3duUHJvcGVydHkoImI2NFBhZCIpICYmIChhLmI2NFBhZCA9IGMuYjY0UGFkKTsKICAgICAgICBpZiAoITAgPT09IGMuaGFzT3duUHJvcGVydHkoInNoYWtlTGVuIikpIHsKICAgICAgICAgICAgaWYgKDAgIT09IGMuc2hha2VMZW4gJSA4KSB0aHJvdyBFcnJvcigic2hha2VMZW4gbXVzdCBiZSBhIG11bHRpcGxlIG9mIDgiKTsKICAgICAgICAgICAgYS5zaGFrZUxlbiA9IGMuc2hha2VMZW4KICAgICAgICB9CiAgICAgICAgaWYgKCJib29sZWFuIiAhPT0gdHlwZW9mIGEub3V0cHV0VXBwZXIpIHRocm93IEVycm9yKCJJbnZhbGlkIG91dHB1dFVwcGVyIGZvcm1hdHRpbmcgb3B0aW9uIik7CiAgICAgICAgaWYgKCJzdHJpbmciICE9PSB0eXBlb2YgYS5iNjRQYWQpIHRocm93IEVycm9yKCJJbnZhbGlkIGI2NFBhZCBmb3JtYXR0aW5nIG9wdGlvbiIpOwogICAgICAgIHJldHVybiBhCiAgICB9CgogICAgZnVuY3Rpb24gTShjLCBhLCBiKSB7CiAgICAgICAgc3dpdGNoIChhKSB7CiAgICAgICAgICAgIGNhc2UgIlVURjgiOgogICAgICAgICAgICBjYXNlICJVVEYxNkJFIjoKICAgICAgICAgICAgY2FzZSAiVVRGMTZMRSI6CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCJlbmNvZGluZyBtdXN0IGJlIFVURjgsIFVURjE2QkUsIG9yIFVURjE2TEUiKTsKICAgICAgICB9CiAgICAgICAgc3dpdGNoIChjKSB7CiAgICAgICAgICAgIGNhc2UgIkhFWCI6CiAgICAgICAgICAgICAgICBjID0gZnVuY3Rpb24gKGEsIGMsIGQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZyA9IGEubGVuZ3RoLAogICAgICAgICAgICAgICAgICAgICAgICBsLCBwLCBmLCBtLCBxLCB1OwogICAgICAgICAgICAgICAgICAgIGlmICgwICE9PSBnICUgMikgdGhyb3cgRXJyb3IoIlN0cmluZyBvZiBIRVggdHlwZSBtdXN0IGJlIGluIGJ5dGUgaW5jcmVtZW50cyIpOwogICAgICAgICAgICAgICAgICAgIGMgPSBjIHx8IFswXTsKICAgICAgICAgICAgICAgICAgICBkID0gZCB8fCAwOwogICAgICAgICAgICAgICAgICAgIHEgPSBkID4+PiAzOwogICAgICAgICAgICAgICAgICAgIHUgPSAtMSA9PT0gYiA/IDMgOiAwOwogICAgICAgICAgICAgICAgICAgIGZvciAobCA9IDA7IGwgPCBnOyBsICs9IDIpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcCA9IHBhcnNlSW50KGEuc3Vic3RyKGwsIDIpLCAxNik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc05hTihwKSkgdGhyb3cgRXJyb3IoIlN0cmluZyBvZiBIRVggdHlwZSBjb250YWlucyBpbnZhbGlkIGNoYXJhY3RlcnMiKTsKICAgICAgICAgICAgICAgICAgICAgICAgbSA9IChsID4+PiAxKSArIHE7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZiA9IG0gPj4+IDI7IGMubGVuZ3RoIDw9IGY7KSBjLnB1c2goMCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNbZl0gfD0gcCA8PCA4ICogKHUgKyBtICUgNCAqIGIpCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBjLAogICAgICAgICAgICAgICAgICAgICAgICBiaW5MZW46IDQgKiBnICsgZAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAiVEVYVCI6CiAgICAgICAgICAgICAgICBjID0gZnVuY3Rpb24gKGMsIGgsIGQpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZywgbCwgcCA9IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIGYsIG0sIHEsIHUsIHIsIHQ7CiAgICAgICAgICAgICAgICAgICAgaCA9IGggfHwgWzBdOwogICAgICAgICAgICAgICAgICAgIGQgPSBkIHx8IDA7CiAgICAgICAgICAgICAgICAgICAgcSA9IGQgPj4+IDM7CiAgICAgICAgICAgICAgICAgICAgaWYgKCJVVEY4IiA9PT0gYSkKICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh0ID0gLTEgPT09CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiID8gMyA6IDAsIGYgPSAwOyBmIDwgYy5sZW5ndGg7IGYgKz0gMSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZyA9IGMuY2hhckNvZGVBdChmKSwgbCA9IFtdLCAxMjggPiBnID8gbC5wdXNoKGcpIDogMjA0OCA+IGcgPyAobC5wdXNoKDE5MiB8IGcgPj4+IDYpLCBsLnB1c2goMTI4IHwgZyAmIDYzKSkgOiA1NTI5NiA+IGcgfHwgNTczNDQgPD0gZyA/IGwucHVzaCgyMjQgfCBnID4+PiAxMiwgMTI4IHwgZyA+Pj4gNiAmIDYzLCAxMjggfCBnICYgNjMpIDogKGYgKz0gMSwgZyA9IDY1NTM2ICsgKChnICYgMTAyMykgPDwgMTAgfCBjLmNoYXJDb2RlQXQoZikgJiAxMDIzKSwgbC5wdXNoKDI0MCB8IGcgPj4+IDE4LCAxMjggfCBnID4+PiAxMiAmIDYzLCAxMjggfCBnID4+PiA2ICYgNjMsIDEyOCB8IGcgJiA2MykpLCBtID0gMDsgbSA8IGwubGVuZ3RoOyBtICs9IDEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByID0gcCArIHE7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh1ID0gciA+Pj4gMjsgaC5sZW5ndGggPD0gdTspIGgucHVzaCgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoW3VdIHw9IGxbbV0gPDwgOCAqICh0ICsgciAlIDQgKiBiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoIlVURjE2QkUiID09PSBhIHx8ICJVVEYxNkxFIiA9PT0gYSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHQgPSAtMSA9PT0gYiA/IDIgOiAwLCBsID0gIlVURjE2TEUiID09PSBhICYmIDEgIT09IGIgfHwgIlVURjE2TEUiICE9PSBhICYmIDEgPT09IGIsIGYgPSAwOyBmIDwgYy5sZW5ndGg7IGYgKz0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBnID0gYy5jaGFyQ29kZUF0KGYpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAhMCA9PT0gbCAmJiAobSA9IGcgJiAyNTUsIGcgPSBtIDw8IDggfCBnID4+PiA4KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IHAgKyBxOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHUgPSByID4+PiAyOyBoLmxlbmd0aCA8PSB1OykgaC5wdXNoKDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoW3VdIHw9IGcgPDwgOCAqICh0ICsgciAlIDQgKiBiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcCArPSAyCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBoLAogICAgICAgICAgICAgICAgICAgICAgICBiaW5MZW46IDggKiBwICsgZAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAiQjY0IjoKICAgICAgICAgICAgICAgIGMgPSBmdW5jdGlvbiAoYSwgYywgZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBnID0gMCwKICAgICAgICAgICAgICAgICAgICAgICAgbCwgcCwgZiwgbSwgcSwgdSwgciwgdDsKICAgICAgICAgICAgICAgICAgICBpZiAoLTEgPT09IGEuc2VhcmNoKC9eW2EtekEtWjAtOT0rXC9dKyQvKSkgdGhyb3cgRXJyb3IoIkludmFsaWQgY2hhcmFjdGVyIGluIGJhc2UtNjQgc3RyaW5nIik7CiAgICAgICAgICAgICAgICAgICAgcCA9IGEuaW5kZXhPZigiPSIpOwogICAgICAgICAgICAgICAgICAgIGEgPSBhLnJlcGxhY2UoL1w9L2csICIiKTsKICAgICAgICAgICAgICAgICAgICBpZiAoLTEgIT09IHAgJiYgcCA8IGEubGVuZ3RoKSB0aHJvdyBFcnJvcigiSW52YWxpZCAnPScgZm91bmQgaW4gYmFzZS02NCBzdHJpbmciKTsKICAgICAgICAgICAgICAgICAgICBjID0gYyB8fCBbMF07CiAgICAgICAgICAgICAgICAgICAgZCA9IGQgfHwgMDsKICAgICAgICAgICAgICAgICAgICB1ID0gZCA+Pj4gMzsKICAgICAgICAgICAgICAgICAgICB0ID0gLTEgPT09IGIgPyAzIDogMDsKICAgICAgICAgICAgICAgICAgICBmb3IgKHAgPSAwOyBwIDwgYS5sZW5ndGg7IHAgKz0gNCkgewogICAgICAgICAgICAgICAgICAgICAgICBxID0gYS5zdWJzdHIocCwgNCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZiA9IG0gPSAwOyBmIDwgcS5sZW5ndGg7IGYgKz0gMSkgbCA9ICJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvIi5pbmRleE9mKHFbZl0pLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbSB8PSBsIDw8IDE4IC0gNiAqIGY7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZiA9IDA7IGYgPCBxLmxlbmd0aCAtIDE7IGYgKz0gMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgciA9IGcgKyB1OwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsID0gciA+Pj4gMjsgYy5sZW5ndGggPD0gbDspIGMucHVzaCgwKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNbbF0gfD0gKG0gPj4+IDE2IC0gOCAqIGYgJiAyNTUpIDw8IDggKiAodCArIHIgJSA0ICogYik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnICs9IDEKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYywKICAgICAgICAgICAgICAgICAgICAgICAgYmluTGVuOiA4ICogZyArIGQKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgIkJZVEVTIjoKICAgICAgICAgICAgICAgIGMgPSBmdW5jdGlvbiAoYSwgYywgZCkgewogICAgICAgICAgICAgICAgICAgIHZhciBnLCBsLCBwLCBmLCBtLCBxOwogICAgICAgICAgICAgICAgICAgIGMgPSBjIHx8IFswXTsKICAgICAgICAgICAgICAgICAgICBkID0gZCB8fCAwOwogICAgICAgICAgICAgICAgICAgIHAgPSBkID4+PiAzOwogICAgICAgICAgICAgICAgICAgIHEgPSAtMSA9PT0gYiA/IDMgOiAwOwogICAgICAgICAgICAgICAgICAgIGZvciAobCA9IDA7IGwgPCBhLmxlbmd0aDsgbCArPSAxKSBnID0gYS5jaGFyQ29kZUF0KGwpLCBtID0gbCArIHAsIGYgPSBtID4+PiAyLCBjLmxlbmd0aCA8PSBmICYmIGMucHVzaCgwKSwgY1tmXSB8PSBnIDw8IDggKiAocSArIG0gJSA0ICogYik7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGMsCiAgICAgICAgICAgICAgICAgICAgICAgIGJpbkxlbjogOCAqIGEubGVuZ3RoICsgZAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAiQVJSQVlCVUZGRVIiOgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjID0gbmV3IEFycmF5QnVmZmVyKDApCiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoIkFSUkFZQlVGRkVSIG5vdCBzdXBwb3J0ZWQgYnkgdGhpcyBlbnZpcm9ubWVudCIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYyA9CiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGEsIGMsIGQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGcsIGwsIHAsIGYsIG0sIHE7CiAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBjIHx8IFswXTsKICAgICAgICAgICAgICAgICAgICAgICAgZCA9IGQgfHwgMDsKICAgICAgICAgICAgICAgICAgICAgICAgbCA9IGQgPj4+IDM7CiAgICAgICAgICAgICAgICAgICAgICAgIG0gPSAtMSA9PT0gYiA/IDMgOiAwOwogICAgICAgICAgICAgICAgICAgICAgICBxID0gbmV3IFVpbnQ4QXJyYXkoYSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoZyA9IDA7IGcgPCBhLmJ5dGVMZW5ndGg7IGcgKz0gMSkgZiA9IGcgKyBsLCBwID0gZiA+Pj4gMiwgYy5sZW5ndGggPD0gcCAmJiBjLnB1c2goMCksIGNbcF0gfD0gcVtnXSA8PCA4ICogKG0gKyBmICUgNCAqIGIpOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5MZW46IDggKiBhLmJ5dGVMZW5ndGggKyBkCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcigiZm9ybWF0IG11c3QgYmUgSEVYLCBURVhULCBCNjQsIEJZVEVTLCBvciBBUlJBWUJVRkZFUiIpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYwogICAgfQoKICAgIGZ1bmN0aW9uIHkoYywgYSkgewogICAgICAgIHJldHVybiBjIDw8IGEgfCBjID4+PiAzMiAtIGEKICAgIH0KCiAgICBmdW5jdGlvbiBTKGMsIGEpIHsKICAgICAgICByZXR1cm4gMzIgPCBhID8gKGEgLT0gMzIsIG5ldyBiKGMuYiA8PCBhIHwgYy5hID4+PiAzMiAtIGEsIGMuYSA8PCBhIHwgYy5iID4+PiAzMiAtIGEpKSA6IDAgIT09IGEgPyBuZXcgYihjLmEgPDwgYSB8IGMuYiA+Pj4gMzIgLSBhLCBjLmIgPDwgYSB8IGMuYSA+Pj4gMzIgLSBhKSA6IGMKICAgIH0KCiAgICBmdW5jdGlvbiB3KGMsIGEpIHsKICAgICAgICByZXR1cm4gYyA+Pj4KICAgICAgICAgICAgYSB8IGMgPDwgMzIgLSBhCiAgICB9CgogICAgZnVuY3Rpb24gdChjLCBhKSB7CiAgICAgICAgdmFyIGsgPSBudWxsLAogICAgICAgICAgICBrID0gbmV3IGIoYy5hLCBjLmIpOwogICAgICAgIHJldHVybiBrID0gMzIgPj0gYSA/IG5ldyBiKGsuYSA+Pj4gYSB8IGsuYiA8PCAzMiAtIGEgJiA0Mjk0OTY3Mjk1LCBrLmIgPj4+IGEgfCBrLmEgPDwgMzIgLSBhICYgNDI5NDk2NzI5NSkgOiBuZXcgYihrLmIgPj4+IGEgLSAzMiB8IGsuYSA8PCA2NCAtIGEgJiA0Mjk0OTY3Mjk1LCBrLmEgPj4+IGEgLSAzMiB8IGsuYiA8PCA2NCAtIGEgJiA0Mjk0OTY3Mjk1KQogICAgfQoKICAgIGZ1bmN0aW9uIFQoYywgYSkgewogICAgICAgIHZhciBrID0gbnVsbDsKICAgICAgICByZXR1cm4gayA9IDMyID49IGEgPyBuZXcgYihjLmEgPj4+IGEsIGMuYiA+Pj4gYSB8IGMuYSA8PCAzMiAtIGEgJiA0Mjk0OTY3Mjk1KSA6IG5ldyBiKDAsIGMuYSA+Pj4gYSAtIDMyKQogICAgfQoKICAgIGZ1bmN0aW9uIGFhKGMsIGEsIGIpIHsKICAgICAgICByZXR1cm4gYyAmIGEgXiB+YyAmIGIKICAgIH0KCiAgICBmdW5jdGlvbiBiYShjLCBhLCBrKSB7CiAgICAgICAgcmV0dXJuIG5ldyBiKGMuYSAmIGEuYSBeIH5jLmEgJiBrLmEsIGMuYiAmIGEuYiBeIH5jLmIgJiBrLmIpCiAgICB9CgogICAgZnVuY3Rpb24gVShjLCBhLCBiKSB7CiAgICAgICAgcmV0dXJuIGMgJiBhIF4gYyAmIGIgXiBhICYgYgogICAgfQoKICAgIGZ1bmN0aW9uIGNhKGMsIGEsIGspIHsKICAgICAgICByZXR1cm4gbmV3IGIoYy5hICYgYS5hIF4gYy5hICYgay5hIF4gYS5hICYKICAgICAgICAgICAgay5hLCBjLmIgJiBhLmIgXiBjLmIgJiBrLmIgXiBhLmIgJiBrLmIpCiAgICB9CgogICAgZnVuY3Rpb24gZGEoYykgewogICAgICAgIHJldHVybiB3KGMsIDIpIF4gdyhjLCAxMykgXiB3KGMsIDIyKQogICAgfQoKICAgIGZ1bmN0aW9uIGVhKGMpIHsKICAgICAgICB2YXIgYSA9IHQoYywgMjgpLAogICAgICAgICAgICBrID0gdChjLCAzNCk7CiAgICAgICAgYyA9IHQoYywgMzkpOwogICAgICAgIHJldHVybiBuZXcgYihhLmEgXiBrLmEgXiBjLmEsIGEuYiBeIGsuYiBeIGMuYikKICAgIH0KCiAgICBmdW5jdGlvbiBmYShjKSB7CiAgICAgICAgcmV0dXJuIHcoYywgNikgXiB3KGMsIDExKSBeIHcoYywgMjUpCiAgICB9CgogICAgZnVuY3Rpb24gZ2EoYykgewogICAgICAgIHZhciBhID0gdChjLCAxNCksCiAgICAgICAgICAgIGsgPSB0KGMsIDE4KTsKICAgICAgICBjID0gdChjLCA0MSk7CiAgICAgICAgcmV0dXJuIG5ldyBiKGEuYSBeIGsuYSBeIGMuYSwgYS5iIF4gay5iIF4gYy5iKQogICAgfQoKICAgIGZ1bmN0aW9uIGhhKGMpIHsKICAgICAgICByZXR1cm4gdyhjLCA3KSBeIHcoYywgMTgpIF4gYyA+Pj4gMwogICAgfQoKICAgIGZ1bmN0aW9uIGlhKGMpIHsKICAgICAgICB2YXIgYSA9IHQoYywgMSksCiAgICAgICAgICAgIGsgPSB0KGMsIDgpOwogICAgICAgIGMgPSBUKGMsIDcpOwogICAgICAgIHJldHVybiBuZXcgYihhLmEgXiBrLmEgXiBjLmEsIGEuYiBeIGsuYiBeIGMuYikKICAgIH0KCiAgICBmdW5jdGlvbiBqYShjKSB7CiAgICAgICAgcmV0dXJuIHcoYywgMTcpIF4gdyhjLCAxOSkgXiBjID4+PiAxMAogICAgfQoKICAgIGZ1bmN0aW9uIGthKGMpIHsKICAgICAgICB2YXIgYSA9IHQoYywgMTkpLAogICAgICAgICAgICBrID0gdChjLCA2MSk7CiAgICAgICAgYyA9IFQoYywgNik7CiAgICAgICAgcmV0dXJuIG5ldyBiKGEuYSBeIGsuYSBeIGMuYSwgYS5iIF4gay5iIF4gYy5iKQogICAgfQoKICAgIGZ1bmN0aW9uIEcoYywgYSkgewogICAgICAgIHZhciBiID0gKGMgJiA2NTUzNSkgKyAoYSAmIDY1NTM1KTsKICAgICAgICByZXR1cm4gKChjID4+PiAxNikgKyAoYSA+Pj4gMTYpICsgKGIgPj4+IDE2KSAmIDY1NTM1KSA8PCAxNiB8IGIgJiA2NTUzNQogICAgfQoKICAgIGZ1bmN0aW9uIGxhKGMsIGEsIGIsIGUpIHsKICAgICAgICB2YXIgaCA9IChjICYgNjU1MzUpICsgKGEgJiA2NTUzNSkgKyAoYiAmIDY1NTM1KSArIChlICYgNjU1MzUpOwogICAgICAgIHJldHVybiAoKGMgPj4+IDE2KSArIChhID4+PiAxNikgKyAoYiA+Pj4gMTYpICsgKGUgPj4+IDE2KSArIChoID4+PiAxNikgJiA2NTUzNSkgPDwgMTYgfCBoICYgNjU1MzUKICAgIH0KCiAgICBmdW5jdGlvbiBIKGMsIGEsIGIsIGUsIGgpIHsKICAgICAgICB2YXIgZCA9IChjICYgNjU1MzUpICsgKGEgJiA2NTUzNSkgKyAoYiAmIDY1NTM1KSArIChlICYgNjU1MzUpICsgKGggJiA2NTUzNSk7CiAgICAgICAgcmV0dXJuICgoYyA+Pj4gMTYpICsgKGEgPj4+IDE2KSArIChiID4+PiAxNikgKyAoZSA+Pj4gMTYpICsgKGggPj4+IDE2KSArIChkID4+PiAxNikgJiA2NTUzNSkgPDwgMTYgfCBkICYgNjU1MzUKICAgIH0KCiAgICBmdW5jdGlvbiBtYShjLCBhKSB7CiAgICAgICAgdmFyIGQsIGUsIGg7CiAgICAgICAgZCA9IChjLmIgJiA2NTUzNSkgKyAoYS5iICYgNjU1MzUpOwogICAgICAgIGUgPSAoYy5iID4+PiAxNikgKwogICAgICAgICAgICAoYS5iID4+PiAxNikgKyAoZCA+Pj4gMTYpOwogICAgICAgIGggPSAoZSAmIDY1NTM1KSA8PCAxNiB8IGQgJiA2NTUzNTsKICAgICAgICBkID0gKGMuYSAmIDY1NTM1KSArIChhLmEgJiA2NTUzNSkgKyAoZSA+Pj4gMTYpOwogICAgICAgIGUgPSAoYy5hID4+PiAxNikgKyAoYS5hID4+PiAxNikgKyAoZCA+Pj4gMTYpOwogICAgICAgIHJldHVybiBuZXcgYigoZSAmIDY1NTM1KSA8PCAxNiB8IGQgJiA2NTUzNSwgaCkKICAgIH0KCiAgICBmdW5jdGlvbiBuYShjLCBhLCBkLCBlKSB7CiAgICAgICAgdmFyIGgsIG4sIGc7CiAgICAgICAgaCA9IChjLmIgJiA2NTUzNSkgKyAoYS5iICYgNjU1MzUpICsgKGQuYiAmIDY1NTM1KSArIChlLmIgJiA2NTUzNSk7CiAgICAgICAgbiA9IChjLmIgPj4+IDE2KSArIChhLmIgPj4+IDE2KSArIChkLmIgPj4+IDE2KSArIChlLmIgPj4+IDE2KSArIChoID4+PiAxNik7CiAgICAgICAgZyA9IChuICYgNjU1MzUpIDw8IDE2IHwgaCAmIDY1NTM1OwogICAgICAgIGggPSAoYy5hICYgNjU1MzUpICsgKGEuYSAmIDY1NTM1KSArIChkLmEgJiA2NTUzNSkgKyAoZS5hICYgNjU1MzUpICsgKG4gPj4+IDE2KTsKICAgICAgICBuID0gKGMuYSA+Pj4gMTYpICsgKGEuYSA+Pj4gMTYpICsgKGQuYSA+Pj4gMTYpICsgKGUuYSA+Pj4gMTYpICsgKGggPj4+IDE2KTsKICAgICAgICByZXR1cm4gbmV3IGIoKG4gJiA2NTUzNSkgPDwgMTYgfCBoICYgNjU1MzUsIGcpCiAgICB9CgogICAgZnVuY3Rpb24gb2EoYywgYSwgZCwgZSwgaCkgewogICAgICAgIHZhciBuLCBnLCBsOwogICAgICAgIG4gPSAoYy5iICYKICAgICAgICAgICAgNjU1MzUpICsgKGEuYiAmIDY1NTM1KSArIChkLmIgJiA2NTUzNSkgKyAoZS5iICYgNjU1MzUpICsgKGguYiAmIDY1NTM1KTsKICAgICAgICBnID0gKGMuYiA+Pj4gMTYpICsgKGEuYiA+Pj4gMTYpICsgKGQuYiA+Pj4gMTYpICsgKGUuYiA+Pj4gMTYpICsgKGguYiA+Pj4gMTYpICsgKG4gPj4+IDE2KTsKICAgICAgICBsID0gKGcgJiA2NTUzNSkgPDwgMTYgfCBuICYgNjU1MzU7CiAgICAgICAgbiA9IChjLmEgJiA2NTUzNSkgKyAoYS5hICYgNjU1MzUpICsgKGQuYSAmIDY1NTM1KSArIChlLmEgJiA2NTUzNSkgKyAoaC5hICYgNjU1MzUpICsgKGcgPj4+IDE2KTsKICAgICAgICBnID0gKGMuYSA+Pj4gMTYpICsgKGEuYSA+Pj4gMTYpICsgKGQuYSA+Pj4gMTYpICsgKGUuYSA+Pj4gMTYpICsgKGguYSA+Pj4gMTYpICsgKG4gPj4+IDE2KTsKICAgICAgICByZXR1cm4gbmV3IGIoKGcgJiA2NTUzNSkgPDwgMTYgfCBuICYgNjU1MzUsIGwpCiAgICB9CgogICAgZnVuY3Rpb24gQihjLCBhKSB7CiAgICAgICAgcmV0dXJuIG5ldyBiKGMuYSBeIGEuYSwgYy5iIF4gYS5iKQogICAgfQoKICAgIGZ1bmN0aW9uIEEoYykgewogICAgICAgIHZhciBhID0gW10sCiAgICAgICAgICAgIGQ7CiAgICAgICAgaWYgKCJTSEEtMSIgPT09IGMpIGEgPSBbMTczMjU4NDE5MywgNDAyMzIzMzQxNywgMjU2MjM4MzEwMiwgMjcxNzMzODc4LCAzMjg1Mzc3NTIwXTsKICAgICAgICBlbHNlIGlmICgwID09PSBjLmxhc3RJbmRleE9mKCJTSEEtIiwgMCkpIHN3aXRjaCAoYSA9IFszMjM4MzcxMDMyLCA5MTQxNTA2NjMsIDgxMjcwMjk5OSwgNDE0NDkxMjY5NywgNDI5MDc3NTg1NywgMTc1MDYwMzAyNSwgMTY5NDA3NjgzOSwgMzIwNDA3NTQyOF0sIGQgPSBbMTc3OTAzMzcwMywgMzE0NDEzNDI3NywgMTAxMzkwNDI0MiwgMjc3MzQ4MDc2MiwgMTM1OTg5MzExOSwgMjYwMDgyMjkyNCwgNTI4NzM0NjM1LCAxNTQxNDU5MjI1XSwgYykgewogICAgICAgICAgICAgICAgY2FzZSAiU0hBLTIyNCI6CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICJTSEEtMjU2IjoKICAgICAgICAgICAgICAgICAgICBhID0gZDsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgIlNIQS0zODQiOgogICAgICAgICAgICAgICAgICAgIGEgPSBbbmV3IGIoMzQxODA3MDM2NSwgYVswXSksIG5ldyBiKDE2NTQyNzAyNTAsIGFbMV0pLCBuZXcgYigyNDM4NTI5MzcwLCBhWzJdKSwgbmV3IGIoMzU1NDYyMzYwLCBhWzNdKSwgbmV3IGIoMTczMTQwNTQxNSwgYVs0XSksIG5ldyBiKDQxMDQ4ODg1ODk1LCBhWzVdKSwgbmV3IGIoMzY3NTAwODUyNSwgYVs2XSksIG5ldyBiKDEyMDMwNjI4MTMsIGFbN10pXTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgIlNIQS01MTIiOgogICAgICAgICAgICAgICAgICAgIGEgPSBbbmV3IGIoZFswXSwgNDA4OTIzNTcyMCksIG5ldyBiKGRbMV0sIDIyMjc4NzM1OTUpLAogICAgICAgICAgICAgICAgICAgICAgICBuZXcgYihkWzJdLCA0MjcxMTc1NzIzKSwgbmV3IGIoZFszXSwgMTU5NTc1MDEyOSksIG5ldyBiKGRbNF0sIDI5MTc1NjUxMzcpLCBuZXcgYihkWzVdLCA3MjU1MTExOTkpLCBuZXcgYihkWzZdLCA0MjE1Mzg5NTQ3KSwgbmV3IGIoZFs3XSwgMzI3MDMzMjA5KQogICAgICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHRocm93IEVycm9yKCJVbmtub3duIFNIQSB2YXJpYW50Iik7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoMCA9PT0gYy5sYXN0SW5kZXhPZigiU0hBMy0iLCAwKSB8fCAwID09PSBjLmxhc3RJbmRleE9mKCJTSEFLRSIsIDApKQogICAgICAgICAgICAgICAgZm9yIChjID0gMDsgNSA+IGM7IGMgKz0gMSkgYVtjXSA9IFtuZXcgYigwLCAwKSwgbmV3IGIoMCwgMCksIG5ldyBiKDAsIDApLCBuZXcgYigwLCAwKSwgbmV3IGIoMCwgMCldOwogICAgICAgICAgICBlbHNlIHRocm93IEVycm9yKCJObyBTSEEgdmFyaWFudHMgc3VwcG9ydGVkIik7CiAgICAgICAgcmV0dXJuIGEKICAgIH0KCiAgICBmdW5jdGlvbiBLKGMsIGEpIHsKICAgICAgICB2YXIgYiA9IFtdLAogICAgICAgICAgICBlLCBkLCBuLCBnLCBsLCBwLCBmOwogICAgICAgIGUgPSBhWzBdOwogICAgICAgIGQgPSBhWzFdOwogICAgICAgIG4gPSBhWzJdOwogICAgICAgIGcgPSBhWzNdOwogICAgICAgIGwgPSBhWzRdOwogICAgICAgIGZvciAoZiA9IDA7IDgwID4gZjsgZiArPSAxKSBiW2ZdID0gMTYgPiBmID8gY1tmXSA6IHkoYltmIC0KICAgICAgICAgICAgM10gXiBiW2YgLSA4XSBeIGJbZiAtIDE0XSBeIGJbZiAtIDE2XSwgMSksIHAgPSAyMCA+IGYgPyBIKHkoZSwgNSksIGQgJiBuIF4gfmQgJiBnLCBsLCAxNTE4NTAwMjQ5LCBiW2ZdKSA6IDQwID4gZiA/IEgoeShlLCA1KSwgZCBeIG4gXiBnLCBsLCAxODU5Nzc1MzkzLCBiW2ZdKSA6IDYwID4gZiA/IEgoeShlLCA1KSwgVShkLCBuLCBnKSwgbCwgMjQwMDk1OTcwOCwgYltmXSkgOiBIKHkoZSwgNSksIGQgXiBuIF4gZywgbCwgMzM5NTQ2OTc4MiwgYltmXSksIGwgPSBnLCBnID0gbiwgbiA9IHkoZCwgMzApLCBkID0gZSwgZSA9IHA7CiAgICAgICAgYVswXSA9IEcoZSwgYVswXSk7CiAgICAgICAgYVsxXSA9IEcoZCwgYVsxXSk7CiAgICAgICAgYVsyXSA9IEcobiwgYVsyXSk7CiAgICAgICAgYVszXSA9IEcoZywgYVszXSk7CiAgICAgICAgYVs0XSA9IEcobCwgYVs0XSk7CiAgICAgICAgcmV0dXJuIGEKICAgIH0KCiAgICBmdW5jdGlvbiBaKGMsIGEsIGIsIGUpIHsKICAgICAgICB2YXIgZDsKICAgICAgICBmb3IgKGQgPSAoYSArIDY1ID4+PiA5IDw8IDQpICsgMTU7IGMubGVuZ3RoIDw9IGQ7KSBjLnB1c2goMCk7CiAgICAgICAgY1thID4+PiA1XSB8PSAxMjggPDwgMjQgLSBhICUgMzI7CiAgICAgICAgYSArPSBiOwogICAgICAgIGNbZF0gPSBhICYgNDI5NDk2NzI5NTsKICAgICAgICBjW2QgLSAxXSA9IGEgLyA0Mjk0OTY3Mjk2IHwgMDsKICAgICAgICBhID0gYy5sZW5ndGg7CiAgICAgICAgZm9yIChkID0gMDsgZCA8IGE7IGQgKz0gMTYpIGUgPSBLKGMuc2xpY2UoZCwgZCArIDE2KSwgZSk7CiAgICAgICAgcmV0dXJuIGUKICAgIH0KCiAgICBmdW5jdGlvbiBMKGMsCiAgICAgICAgYSwgaykgewogICAgICAgIHZhciBlLCBoLCBuLCBnLCBsLCBwLCBmLCBtLCBxLCB1LCByLCB0LCB2LCB3LCB5LCBBLCB6LCB4LCBGLCBCLCBDLCBELCBFID0gW10sCiAgICAgICAgICAgIEo7CiAgICAgICAgaWYgKCJTSEEtMjI0IiA9PT0gayB8fCAiU0hBLTI1NiIgPT09IGspIHUgPSA2NCwgdCA9IDEsIEQgPSBOdW1iZXIsIHYgPSBHLCB3ID0gbGEsIHkgPSBILCBBID0gaGEsIHogPSBqYSwgeCA9IGRhLCBGID0gZmEsIEMgPSBVLCBCID0gYWEsIEogPSBkOwogICAgICAgIGVsc2UgaWYgKCJTSEEtMzg0IiA9PT0gayB8fCAiU0hBLTUxMiIgPT09IGspIHUgPSA4MCwgdCA9IDIsIEQgPSBiLCB2ID0gbWEsIHcgPSBuYSwgeSA9IG9hLCBBID0gaWEsIHogPSBrYSwgeCA9IGVhLCBGID0gZ2EsIEMgPSBjYSwgQiA9IGJhLCBKID0gVjsKICAgICAgICBlbHNlIHRocm93IEVycm9yKCJVbmV4cGVjdGVkIGVycm9yIGluIFNIQS0yIGltcGxlbWVudGF0aW9uIik7CiAgICAgICAgayA9IGFbMF07CiAgICAgICAgZSA9IGFbMV07CiAgICAgICAgaCA9IGFbMl07CiAgICAgICAgbiA9IGFbM107CiAgICAgICAgZyA9IGFbNF07CiAgICAgICAgbCA9IGFbNV07CiAgICAgICAgcCA9IGFbNl07CiAgICAgICAgZiA9IGFbN107CiAgICAgICAgZm9yIChyID0gMDsgciA8IHU7IHIgKz0gMSkgMTYgPiByID8gKHEgPSByICogdCwgbSA9IGMubGVuZ3RoIDw9IHEgPyAwIDogY1txXSwgcSA9IGMubGVuZ3RoIDw9IHEgKyAxID8gMCA6IGNbcSArIDFdLCBFW3JdID0gbmV3IEQobSwgcSkpIDogRVtyXSA9IHcoeihFW3IgLSAyXSksIEVbciAtIDddLCBBKEVbciAtIDE1XSksIEVbciAtCiAgICAgICAgICAgIDE2XSksIG0gPSB5KGYsIEYoZyksIEIoZywgbCwgcCksIEpbcl0sIEVbcl0pLCBxID0gdih4KGspLCBDKGssIGUsIGgpKSwgZiA9IHAsIHAgPSBsLCBsID0gZywgZyA9IHYobiwgbSksIG4gPSBoLCBoID0gZSwgZSA9IGssIGsgPSB2KG0sIHEpOwogICAgICAgIGFbMF0gPSB2KGssIGFbMF0pOwogICAgICAgIGFbMV0gPSB2KGUsIGFbMV0pOwogICAgICAgIGFbMl0gPSB2KGgsIGFbMl0pOwogICAgICAgIGFbM10gPSB2KG4sIGFbM10pOwogICAgICAgIGFbNF0gPSB2KGcsIGFbNF0pOwogICAgICAgIGFbNV0gPSB2KGwsIGFbNV0pOwogICAgICAgIGFbNl0gPSB2KHAsIGFbNl0pOwogICAgICAgIGFbN10gPSB2KGYsIGFbN10pOwogICAgICAgIHJldHVybiBhCiAgICB9CgogICAgZnVuY3Rpb24gRChjLCBhKSB7CiAgICAgICAgdmFyIGQsIGUsIGgsIG4sIGcgPSBbXSwKICAgICAgICAgICAgbCA9IFtdOwogICAgICAgIGlmIChudWxsICE9PSBjKQogICAgICAgICAgICBmb3IgKGUgPSAwOyBlIDwgYy5sZW5ndGg7IGUgKz0gMikgYVsoZSA+Pj4gMSkgJSA1XVsoZSA+Pj4gMSkgLyA1IHwgMF0gPSBCKGFbKGUgPj4+IDEpICUgNV1bKGUgPj4+IDEpIC8gNSB8IDBdLCBuZXcgYihjW2UgKyAxXSwgY1tlXSkpOwogICAgICAgIGZvciAoZCA9IDA7IDI0ID4gZDsgZCArPSAxKSB7CiAgICAgICAgICAgIG4gPSBBKCJTSEEzLSIpOwogICAgICAgICAgICBmb3IgKGUgPSAwOyA1ID4gZTsgZSArPSAxKSB7CiAgICAgICAgICAgICAgICBoID0gYVtlXVswXTsKICAgICAgICAgICAgICAgIHZhciBwID0gYVtlXVsxXSwKICAgICAgICAgICAgICAgICAgICBmID0gYVtlXVsyXSwKICAgICAgICAgICAgICAgICAgICBtID0gYVtlXVszXSwKICAgICAgICAgICAgICAgICAgICBxID0gYVtlXVs0XTsKICAgICAgICAgICAgICAgIGdbZV0gPSBuZXcgYihoLmEgXiBwLmEgXiBmLmEgXgogICAgICAgICAgICAgICAgICAgIG0uYSBeIHEuYSwgaC5iIF4gcC5iIF4gZi5iIF4gbS5iIF4gcS5iKQogICAgICAgICAgICB9CiAgICAgICAgICAgIGZvciAoZSA9IDA7IDUgPiBlOyBlICs9IDEpIGxbZV0gPSBCKGdbKGUgKyA0KSAlIDVdLCBTKGdbKGUgKyAxKSAlIDVdLCAxKSk7CiAgICAgICAgICAgIGZvciAoZSA9IDA7IDUgPiBlOyBlICs9IDEpCiAgICAgICAgICAgICAgICBmb3IgKGggPSAwOyA1ID4gaDsgaCArPSAxKSBhW2VdW2hdID0gQihhW2VdW2hdLCBsW2VdKTsKICAgICAgICAgICAgZm9yIChlID0gMDsgNSA+IGU7IGUgKz0gMSkKICAgICAgICAgICAgICAgIGZvciAoaCA9IDA7IDUgPiBoOyBoICs9IDEpIG5baF1bKDIgKiBlICsgMyAqIGgpICUgNV0gPSBTKGFbZV1baF0sIFdbZV1baF0pOwogICAgICAgICAgICBmb3IgKGUgPSAwOyA1ID4gZTsgZSArPSAxKQogICAgICAgICAgICAgICAgZm9yIChoID0gMDsgNSA+IGg7IGggKz0gMSkgYVtlXVtoXSA9IEIobltlXVtoXSwgbmV3IGIofm5bKGUgKyAxKSAlIDVdW2hdLmEgJiBuWyhlICsgMikgJSA1XVtoXS5hLCB+blsoZSArIDEpICUgNV1baF0uYiAmIG5bKGUgKyAyKSAlIDVdW2hdLmIpKTsKICAgICAgICAgICAgYVswXVswXSA9IEIoYVswXVswXSwgWFtkXSkKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGEKICAgIH0KICAgIHZhciBkLCBWLCBXLCBYOwogICAgZCA9IFsxMTE2MzUyNDA4LCAxODk5NDQ3NDQxLCAzMDQ5MzIzNDcxLCAzOTIxMDA5NTczLCA5NjE5ODcxNjMsIDE1MDg5NzA5OTMsIDI0NTM2MzU3NDgsIDI4NzA3NjMyMjEsIDM2MjQzODEwODAsIDMxMDU5ODQwMSwgNjA3MjI1Mjc4LAogICAgICAgIDE0MjY4ODE5ODcsIDE5MjUwNzgzODgsIDIxNjIwNzgyMDYsIDI2MTQ4ODgxMDMsIDMyNDgyMjI1ODAsIDM4MzUzOTA0MDEsIDQwMjIyMjQ3NzQsIDI2NDM0NzA3OCwgNjA0ODA3NjI4LCA3NzAyNTU5ODMsIDEyNDkxNTAxMjIsIDE1NTUwODE2OTIsIDE5OTYwNjQ5ODYsIDI1NTQyMjA4ODIsIDI4MjE4MzQzNDksIDI5NTI5OTY4MDgsIDMyMTAzMTM2NzEsIDMzMzY1NzE4OTEsIDM1ODQ1Mjg3MTEsIDExMzkyNjk5MywgMzM4MjQxODk1LCA2NjYzMDcyMDUsIDc3MzUyOTkxMiwgMTI5NDc1NzM3MiwgMTM5NjE4MjI5MSwgMTY5NTE4MzcwMCwgMTk4NjY2MTA1MSwgMjE3NzAyNjM1MCwgMjQ1Njk1NjAzNywgMjczMDQ4NTkyMSwgMjgyMDMwMjQxMSwgMzI1OTczMDgwMCwgMzM0NTc2NDc3MSwgMzUxNjA2NTgxNywgMzYwMDM1MjgwNCwgNDA5NDU3MTkwOSwgMjc1NDIzMzQ0LCA0MzAyMjc3MzQsIDUwNjk0ODYxNiwgNjU5MDYwNTU2LCA4ODM5OTc4NzcsIDk1ODEzOTU3MSwgMTMyMjgyMjIxOCwgMTUzNzAwMjA2MywgMTc0Nzg3Mzc3OSwgMTk1NTU2MjIyMiwgMjAyNDEwNDgxNSwKICAgICAgICAyMjI3NzMwNDUyLCAyMzYxODUyNDI0LCAyNDI4NDM2NDc0LCAyNzU2NzM0MTg3LCAzMjA0MDMxNDc5LCAzMzI5MzI1Mjk4CiAgICBdOwogICAgViA9IFtuZXcgYihkWzBdLCAzNjA5NzY3NDU4KSwgbmV3IGIoZFsxXSwgNjAyODkxNzI1KSwgbmV3IGIoZFsyXSwgMzk2NDQ4NDM5OSksIG5ldyBiKGRbM10sIDIxNzMyOTU1NDgpLCBuZXcgYihkWzRdLCA0MDgxNjI4NDcyKSwgbmV3IGIoZFs1XSwgMzA1MzgzNDI2NSksIG5ldyBiKGRbNl0sIDI5Mzc2NzE1NzkpLCBuZXcgYihkWzddLCAzNjY0NjA5NTYwKSwgbmV3IGIoZFs4XSwgMjczNDg4MzM5NCksIG5ldyBiKGRbOV0sIDExNjQ5OTY1NDIpLCBuZXcgYihkWzEwXSwgMTMyMzYxMDc2NCksIG5ldyBiKGRbMTFdLCAzNTkwMzA0OTk0KSwgbmV3IGIoZFsxMl0sIDQwNjgxODIzODMpLCBuZXcgYihkWzEzXSwgOTkxMzM2MTEzKSwgbmV3IGIoZFsxNF0sIDYzMzgwMzMxNyksIG5ldyBiKGRbMTVdLCAzNDc5Nzc0ODY4KSwgbmV3IGIoZFsxNl0sIDI2NjY2MTM0NTgpLCBuZXcgYihkWzE3XSwgOTQ0NzExMTM5KSwgbmV3IGIoZFsxOF0sIDIzNDEyNjI3NzMpLAogICAgICAgIG5ldyBiKGRbMTldLCAyMDA3ODAwOTMzKSwgbmV3IGIoZFsyMF0sIDE0OTU5OTA5MDEpLCBuZXcgYihkWzIxXSwgMTg1NjQzMTIzNSksIG5ldyBiKGRbMjJdLCAzMTc1MjE4MTMyKSwgbmV3IGIoZFsyM10sIDIxOTg5NTA4MzcpLCBuZXcgYihkWzI0XSwgMzk5OTcxOTMzOSksIG5ldyBiKGRbMjVdLCA3NjY3ODQwMTYpLCBuZXcgYihkWzI2XSwgMjU2NjU5NDg3OSksIG5ldyBiKGRbMjddLCAzMjAzMzM3OTU2KSwgbmV3IGIoZFsyOF0sIDEwMzQ0NTcwMjYpLCBuZXcgYihkWzI5XSwgMjQ2Njk0ODkwMSksIG5ldyBiKGRbMzBdLCAzNzU4MzI2MzgzKSwgbmV3IGIoZFszMV0sIDE2ODcxNzkzNiksIG5ldyBiKGRbMzJdLCAxMTg4MTc5OTY0KSwgbmV3IGIoZFszM10sIDE1NDYwNDU3MzQpLCBuZXcgYihkWzM0XSwgMTUyMjgwNTQ4NSksIG5ldyBiKGRbMzVdLCAyNjQzODMzODIzKSwgbmV3IGIoZFszNl0sIDIzNDM1MjczOTApLCBuZXcgYihkWzM3XSwgMTAxNDQ3NzQ4MCksIG5ldyBiKGRbMzhdLCAxMjA2NzU5MTQyKSwgbmV3IGIoZFszOV0sIDM0NDA3NzYyNyksCiAgICAgICAgbmV3IGIoZFs0MF0sIDEyOTA4NjM0NjApLCBuZXcgYihkWzQxXSwgMzE1ODQ1NDI3MyksIG5ldyBiKGRbNDJdLCAzNTA1OTUyNjU3KSwgbmV3IGIoZFs0M10sIDEwNjIxNzAwOCksIG5ldyBiKGRbNDRdLCAzNjA2MDA4MzQ0KSwgbmV3IGIoZFs0NV0sIDE0MzI3MjU3NzYpLCBuZXcgYihkWzQ2XSwgMTQ2NzAzMTU5NCksIG5ldyBiKGRbNDddLCA4NTExNjk3MjApLCBuZXcgYihkWzQ4XSwgMzEwMDgyMzc1MiksIG5ldyBiKGRbNDldLCAxMzYzMjU4MTk1KSwgbmV3IGIoZFs1MF0sIDM3NTA2ODU1OTMpLCBuZXcgYihkWzUxXSwgMzc4NTA1MDI4MCksIG5ldyBiKGRbNTJdLCAzMzE4MzA3NDI3KSwgbmV3IGIoZFs1M10sIDM4MTI3MjM0MDMpLCBuZXcgYihkWzU0XSwgMjAwMzAzNDk5NSksIG5ldyBiKGRbNTVdLCAzNjAyMDM2ODk5KSwgbmV3IGIoZFs1Nl0sIDE1NzU5OTAwMTIpLCBuZXcgYihkWzU3XSwgMTEyNTU5MjkyOCksIG5ldyBiKGRbNThdLCAyNzE2OTA0MzA2KSwgbmV3IGIoZFs1OV0sIDQ0Mjc3NjA0NCksIG5ldyBiKGRbNjBdLCA1OTM2OTgzNDQpLCBuZXcgYihkWzYxXSwKICAgICAgICAgICAgMzczMzExMDI0OSksIG5ldyBiKGRbNjJdLCAyOTk5MzUxNTczKSwgbmV3IGIoZFs2M10sIDM4MTU5MjA0MjcpLCBuZXcgYigzMzkxNTY5NjE0LCAzOTI4MzgzOTAwKSwgbmV3IGIoMzUxNTI2NzI3MSwgNTY2MjgwNzExKSwgbmV3IGIoMzk0MDE4NzYwNiwgMzQ1NDA2OTUzNCksIG5ldyBiKDQxMTg2MzAyNzEsIDQwMDAyMzk5OTIpLCBuZXcgYigxMTY0MTg0NzQsIDE5MTQxMzg1NTQpLCBuZXcgYigxNzQyOTI0MjEsIDI3MzEwNTUyNzApLCBuZXcgYigyODkzODAzNTYsIDMyMDM5OTMwMDYpLCBuZXcgYig0NjAzOTMyNjksIDMyMDYyMDMxNSksIG5ldyBiKDY4NTQ3MTczMywgNTg3NDk2ODM2KSwgbmV3IGIoODUyMTQyOTcxLCAxMDg2NzkyODUxKSwgbmV3IGIoMTAxNzAzNjI5OCwgMzY1NTQzMTAwKSwgbmV3IGIoMTEyNjAwMDU4MCwgMjYxODI5NzY3NiksIG5ldyBiKDEyODgwMzM0NzAsIDM0MDk4NTUxNTgpLCBuZXcgYigxNTAxNTA1OTQ4LCA0MjM0NTA5ODY2KSwgbmV3IGIoMTYwNzE2NzkxNSwgOTg3MTY3NDY4KSwgbmV3IGIoMTgxNjQwMjMxNiwKICAgICAgICAgICAgMTI0NjE4OTU5MSkKICAgIF07CiAgICBYID0gW25ldyBiKDAsIDEpLCBuZXcgYigwLCAzMjg5OCksIG5ldyBiKDIxNDc0ODM2NDgsIDMyOTA2KSwgbmV3IGIoMjE0NzQ4MzY0OCwgMjE0NzUxNjQxNiksIG5ldyBiKDAsIDMyOTA3KSwgbmV3IGIoMCwgMjE0NzQ4MzY0OSksIG5ldyBiKDIxNDc0ODM2NDgsIDIxNDc1MTY1NDUpLCBuZXcgYigyMTQ3NDgzNjQ4LCAzMjc3NyksIG5ldyBiKDAsIDEzOCksIG5ldyBiKDAsIDEzNiksIG5ldyBiKDAsIDIxNDc1MTY0MjUpLCBuZXcgYigwLCAyMTQ3NDgzNjU4KSwgbmV3IGIoMCwgMjE0NzUxNjU1NSksIG5ldyBiKDIxNDc0ODM2NDgsIDEzOSksIG5ldyBiKDIxNDc0ODM2NDgsIDMyOTA1KSwgbmV3IGIoMjE0NzQ4MzY0OCwgMzI3NzEpLCBuZXcgYigyMTQ3NDgzNjQ4LCAzMjc3MCksIG5ldyBiKDIxNDc0ODM2NDgsIDEyOCksIG5ldyBiKDAsIDMyNzc4KSwgbmV3IGIoMjE0NzQ4MzY0OCwgMjE0NzQ4MzY1OCksIG5ldyBiKDIxNDc0ODM2NDgsIDIxNDc1MTY1NDUpLCBuZXcgYigyMTQ3NDgzNjQ4LCAzMjg5NiksIG5ldyBiKDAsIDIxNDc0ODM2NDkpLAogICAgICAgIG5ldyBiKDIxNDc0ODM2NDgsIDIxNDc1MTY0MjQpCiAgICBdOwogICAgVyA9IFsKICAgICAgICBbMCwgMzYsIDMsIDQxLCAxOF0sCiAgICAgICAgWzEsIDQ0LCAxMCwgNDUsIDJdLAogICAgICAgIFs2MiwgNiwgNDMsIDE1LCA2MV0sCiAgICAgICAgWzI4LCA1NSwgMjUsIDIxLCA1Nl0sCiAgICAgICAgWzI3LCAyMCwgMzksIDgsIDE0XQogICAgXTsKICAgICJmdW5jdGlvbiIgPT09IHR5cGVvZiBkZWZpbmUgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIEMKICAgIH0pIDogInVuZGVmaW5lZCIgIT09IHR5cGVvZiBleHBvcnRzID8gKCJ1bmRlZmluZWQiICE9PSB0eXBlb2YgbW9kdWxlICYmIG1vZHVsZS5leHBvcnRzICYmIChtb2R1bGUuZXhwb3J0cyA9IEMpLCBleHBvcnRzID0gQykgOiBZLmpzU0hBID0gQwp9KSh0aGlzKTsKCnZhciBDcmVhdGVEb3dubG9hZFRhc2ssIENyZWF0ZURvd25sb2FkVGFza18sIGJyb3dzZXJJbnRlcmZhY2UsIGJ5dGVzVG9TdHJpbmcsIGNsb25lSW50bywgZ19rZXlfbCwgZ19rZXlfcywgZ19rdHMsIG0xMTVfYXN5bV9kZWNvZGUsIG0xMTVfYXN5bV9lbmNvZGUsIG0xMTVfZGVjb2RlLCBtMTE1X2VuY29kZSwgbTExNV9nZXRrZXksIG0xMTVfc3ltX2RlY29kZSwgbTExNV9zeW1fZW5jb2RlLCByZWYsIHN0cmluZ1RvQnl0ZXMsIHhvcjExNV9lbmM7CmNsYXNzIE15UnNhIHsKICBjb25zdHJ1Y3RvciAoKSB7CiAgICAvLyB0aGlzLm4gPSBCaWdJbnQoJzB4ODY4Njk4MGMwZjVhMjRjNGI5ZDQzMDIwY2QyYzIyNzAzZmYzZjQ1MDc1NjUyOTA1OGIxY2Y4OGYwOWI4NjAyMTM2NDc3MTk4YTZlMjY4MzE0OTY1OWJkMTIyYzMzNTkyZmRiNWFkNDc5NDRhZDFlYTRkMzZjNmIxNzJhYWQ2MzM4YzNiYjZhYzYyMjc1MDJkMDEwOTkzYWM5NjdkMWFlZjAwZjBjOGUwMzhkZTJlNGQzYmMyZWMzNjhhZjJlOWYxMGE2ZjFlZGE0ZjcyNjJmMTM2NDIwYzA3YzMzMWI4NzFiZjEzOWY3NGYzMDEwZTNjNGZlNTdkZjNhZmI3MTY4MycpCiAgICAvLyB0aGlzLmUgPSBCaWdJbnQoJzB4MTAwMDEnKQogICAgdGhpcy5uID0gYmlnSW50KCc4Njg2OTgwYzBmNWEyNGM0YjlkNDMwMjBjZDJjMjI3MDNmZjNmNDUwNzU2NTI5MDU4YjFjZjg4ZjA5Yjg2MDIxMzY0NzcxOThhNmUyNjgzMTQ5NjU5YmQxMjJjMzM1OTJmZGI1YWQ0Nzk0NGFkMWVhNGQzNmM2YjE3MmFhZDYzMzhjM2JiNmFjNjIyNzUwMmQwMTA5OTNhYzk2N2QxYWVmMDBmMGM4ZTAzOGRlMmU0ZDNiYzJlYzM2OGFmMmU5ZjEwYTZmMWVkYTRmNzI2MmYxMzY0MjBjMDdjMzMxYjg3MWJmMTM5Zjc0ZjMwMTBlM2M0ZmU1N2RmM2FmYjcxNjgzJywgMTYpCiAgICB0aGlzLmUgPSBiaWdJbnQoJzEwMDAxJywgMTYpCiAgfTsKCiAgYTJoZXggKGJ5dGVBcnJheSkgewogICAgdmFyIGhleFN0cmluZyA9ICcnCiAgICB2YXIgbmV4dEhleEJ5dGUKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZUFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgIG5leHRIZXhCeXRlID0gYnl0ZUFycmF5W2ldLnRvU3RyaW5nKDE2KQogICAgICBpZiAobmV4dEhleEJ5dGUubGVuZ3RoIDwgMikgewogICAgICAgIG5leHRIZXhCeXRlID0gJzAnICsgbmV4dEhleEJ5dGUKICAgICAgfQogICAgICBoZXhTdHJpbmcgKz0gbmV4dEhleEJ5dGUKICAgIH0KICAgIHJldHVybiBoZXhTdHJpbmcKICB9CgogIGhleDJhIChoZXgpIHsKICAgIHZhciBzdHIgPSAnJwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZXgubGVuZ3RoOyBpICs9IDIpIHsKICAgICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoaGV4LnN1YnN0cihpLCAyKSwgMTYpKQogICAgfQogICAgcmV0dXJuIHN0cgogIH0KCiAgcGtjczFwYWQyIChzLCBuKSB7CiAgICBpZiAobiA8IHMubGVuZ3RoICsgMTEpIHsKICAgICAgcmV0dXJuIG51bGwKICAgIH0KICAgIHZhciBiYSA9IFtdCiAgICB2YXIgaSA9IHMubGVuZ3RoIC0gMQogICAgd2hpbGUgKGkgPj0gMCAmJiBuID4gMCkgewogICAgICBiYVstLW5dID0gcy5jaGFyQ29kZUF0KGktLSkKICAgIH0KICAgIGJhWy0tbl0gPSAwCiAgICB3aGlsZSAobiA+IDIpIHsgLy8gcmFuZG9tIG5vbi16ZXJvIHBhZAogICAgICBiYVstLW5dID0gMHhmZgogICAgfQogICAgYmFbLS1uXSA9IDIKICAgIGJhWy0tbl0gPSAwCiAgICB2YXIgYyA9IHRoaXMuYTJoZXgoYmEpCiAgICByZXR1cm4gYmlnSW50KGMsIDE2KQogIH0KCiAgcGtjczF1bnBhZDIgKGEpIHsKICAgIHZhciBiID0gYS50b1N0cmluZygxNikKICAgIGlmIChiLmxlbmd0aCAlIDIgIT09IDApIHsKICAgICAgYiA9ICcwJyArIGIKICAgIH0KICAgIHZhciBjID0gdGhpcy5oZXgyYShiKQogICAgdmFyIGkgPSAxCiAgICB3aGlsZSAoYy5jaGFyQ29kZUF0KGkpICE9PSAwKSB7CiAgICAgIGkrKwogICAgfQogICAgcmV0dXJuIGMuc2xpY2UoaSArIDEpCiAgfQoKICBlbmNyeXB0ICh0ZXh0KSB7CiAgICB2YXIgbSA9IHRoaXMucGtjczFwYWQyKHRleHQsIDB4ODApCiAgICB2YXIgYyA9IG0ubW9kUG93KHRoaXMuZSwgdGhpcy5uKQogICAgdmFyIGggPSBjLnRvU3RyaW5nKDE2KQogICAgd2hpbGUgKGgubGVuZ3RoIDwgMHg4MCAqIDIpIHsKICAgICAgaCA9ICcwJyArIGgKICAgIH0KICAgIHJldHVybiBoCiAgfTsKCiAgZGVjcnlwdCAodGV4dCkgewogICAgdmFyIGJhID0gW10KICAgIHZhciBpID0gMAogICAgd2hpbGUgKGkgPCB0ZXh0Lmxlbmd0aCkgewogICAgICBiYVtpXSA9IHRleHQuY2hhckNvZGVBdChpKQogICAgICBpICs9IDEKICAgIH0KICAgIHZhciBhID0gYmlnSW50KHRoaXMuYTJoZXgoYmEpLCAxNikKICAgIHZhciBjID0gYS5tb2RQb3codGhpcy5lLCB0aGlzLm4pCiAgICB2YXIgZCA9IHRoaXMucGtjczF1bnBhZDIoYykKICAgIHJldHVybiBkCiAgfTsKfQoKdmFyIG5ld19yc2EgPSBuZXcgTXlSc2EoKQoKZ19rdHMgPSBbMjQwLCAyMjksIDEwNSwgMTc0LCAxOTEsIDIyMCwgMTkxLCAxMzgsIDI2LCA2OSwgMjMyLCAxOTAsIDEyNSwgMTY2LCAxMTUsIDE4NCwgMjIyLCAxNDMsIDIzMSwgMTk2LCA2OSwgMjE4LCAxMzQsIDE5NiwgMTU1LCAxMDAsIDEzOSwgMjAsIDEwNiwgMTgwLCAyNDEsIDE3MCwgNTYsIDEsIDUzLCAxNTgsIDM4LCAxMDUsIDQ0LCAxMzQsIDAsIDEwNywgNzksIDE2NSwgNTQsIDUyLCA5OCwgMTY2LCA0MiwgMTUwLCAxMDQsIDI0LCAyNDIsIDc0LCAyNTMsIDE4OSwgMTA3LCAxNTEsIDE0MywgNzcsIDE0MywgMTM3LCAxOSwgMTgzLCAxMDgsIDE0MiwgMTQ3LCAyMzcsIDE0LCAxMywgNzIsIDYyLCAyMTUsIDQ3LCAxMzYsIDIxNiwgMjU0LCAyNTQsIDEyNiwgMTM0LCA4MCwgMTQ5LCA3OSwgMjA5LCAyMzUsIDEzMSwgMzgsIDUyLCAyMTksIDEwMiwgMTIzLCAxNTYsIDEyNiwgMTU3LCAxMjIsIDEyOSwgNTAsIDIzNCwgMTgyLCA1MSwgMjIyLCA1OCwgMTY5LCA4OSwgNTIsIDEwMiwgNTksIDE3MCwgMTg2LCAxMjksIDk2LCA3MiwgMTg1LCAyMTMsIDEyOSwgMTU2LCAyNDgsIDEwOCwgMTMyLCAxMTksIDI1NSwgODQsIDEyMCwgMzgsIDk1LCAxOTAsIDIzMiwgMzAsIDU0LCAxNTksIDUyLCAxMjgsIDkyLCA2OSwgNDQsIDE1NSwgMTE4LCAyMTMsIDI3LCAxNDMsIDIwNCwgMTk1LCAxODQsIDI0NV07CgpnX2tleV9zID0gWzB4MjksIDB4MjMsIDB4MjEsIDB4NUVdOwoKZ19rZXlfbCA9IFsxMjAsIDYsIDE3MywgNzYsIDUxLCAxMzQsIDkzLCAyNCwgNzYsIDEsIDYzLCA3MF07CgptMTE1X2dldGtleSA9IGZ1bmN0aW9uKGxlbmd0aCwga2V5KSB7CiAgdmFyIGk7CiAgaWYgKGtleSAhPSBudWxsKSB7CiAgICByZXR1cm4gKGZ1bmN0aW9uKCkgewogICAgICB2YXIgaiwgcmVmLCByZXN1bHRzOwogICAgICByZXN1bHRzID0gW107CiAgICAgIGZvciAoaSA9IGogPSAwLCByZWYgPSBsZW5ndGg7ICgwIDw9IHJlZiA/IGogPCByZWYgOiBqID4gcmVmKTsgaSA9IDAgPD0gcmVmID8gKytqIDogLS1qKSB7CiAgICAgICAgcmVzdWx0cy5wdXNoKCgoa2V5W2ldICsgZ19rdHNbbGVuZ3RoICogaV0pICYgMHhmZikgXiBnX2t0c1tsZW5ndGggKiAobGVuZ3RoIC0gMSAtIGkpXSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdHM7CiAgICB9KSgpOwogIH0KICBpZiAobGVuZ3RoID09PSAxMikgewogICAgcmV0dXJuIGdfa2V5X2wuc2xpY2UoMCk7CiAgfQogIHJldHVybiBnX2tleV9zLnNsaWNlKDApOwp9OwoKeG9yMTE1X2VuYyA9IGZ1bmN0aW9uKHNyYywgc3JjbGVuLCBrZXksIGtleWxlbikgewogIHZhciBpLCBqLCBrLCBtb2Q0LCByZWYsIHJlZjEsIHJlZjIsIHJldDsKICBtb2Q0ID0gc3JjbGVuICUgNDsKICByZXQgPSBbXTsKICBpZiAobW9kNCAhPT0gMCkgewogICAgZm9yIChpID0gaiA9IDAsIHJlZiA9IG1vZDQ7ICgwIDw9IHJlZiA/IGogPCByZWYgOiBqID4gcmVmKTsgaSA9IDAgPD0gcmVmID8gKytqIDogLS1qKSB7CiAgICAgIHJldC5wdXNoKHNyY1tpXSBeIGtleVtpICUga2V5bGVuXSk7CiAgICB9CiAgfQogIGZvciAoaSA9IGsgPSByZWYxID0gbW9kNCwgcmVmMiA9IHNyY2xlbjsgKHJlZjEgPD0gcmVmMiA/IGsgPCByZWYyIDogayA+IHJlZjIpOyBpID0gcmVmMSA8PSByZWYyID8gKytrIDogLS1rKSB7CiAgICByZXQucHVzaChzcmNbaV0gXiBrZXlbKGkgLSBtb2Q0KSAlIGtleWxlbl0pOwogIH0KICByZXR1cm4gcmV0Owp9OwoKbTExNV9zeW1fZW5jb2RlID0gZnVuY3Rpb24oc3JjLCBzcmNsZW4sIGtleTEsIGtleTIpIHsKICB2YXIgazEsIGsyLCByZXQ7CiAgazEgPSBtMTE1X2dldGtleSg0LCBrZXkxKTsKICBrMiA9IG0xMTVfZ2V0a2V5KDEyLCBrZXkyKTsKICByZXQgPSB4b3IxMTVfZW5jKHNyYywgc3JjbGVuLCBrMSwgNCk7CiAgcmV0LnJldmVyc2UoKTsKICByZXQgPSB4b3IxMTVfZW5jKHJldCwgc3JjbGVuLCBrMiwgMTIpOwogIHJldHVybiByZXQ7Cn07CgptMTE1X3N5bV9kZWNvZGUgPSBmdW5jdGlvbihzcmMsIHNyY2xlbiwga2V5MSwga2V5MikgewogIHZhciBrMSwgazIsIHJldDsKICBrMSA9IG0xMTVfZ2V0a2V5KDQsIGtleTEpOwogIGsyID0gbTExNV9nZXRrZXkoMTIsIGtleTIpOwogIHJldCA9IHhvcjExNV9lbmMoc3JjLCBzcmNsZW4sIGsyLCAxMik7CiAgcmV0LnJldmVyc2UoKTsKICByZXQgPSB4b3IxMTVfZW5jKHJldCwgc3JjbGVuLCBrMSwgNCk7CiAgcmV0dXJuIHJldDsKfTsKCnN0cmluZ1RvQnl0ZXMgPSBmdW5jdGlvbihzKSB7CiAgdmFyIGksIGosIHJlZiwgcmV0OwogIHJldCA9IFtdOwogIGZvciAoaSA9IGogPSAwLCByZWYgPSBzLmxlbmd0aDsgKDAgPD0gcmVmID8gaiA8IHJlZiA6IGogPiByZWYpOyBpID0gMCA8PSByZWYgPyArK2ogOiAtLWopIHsKICAgIHJldC5wdXNoKHMuY2hhckNvZGVBdChpKSk7CiAgfQogIHJldHVybiByZXQ7Cn07CgpieXRlc1RvU3RyaW5nID0gZnVuY3Rpb24oYikgewogIHZhciBpLCBqLCBsZW4sIHJldDsKICByZXQgPSAnJzsKICBmb3IgKGogPSAwLCBsZW4gPSBiLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7CiAgICBpID0gYltqXTsKICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpOwogIH0KICByZXR1cm4gcmV0Owp9OwoKCm0xMTVfYXN5bV9lbmNvZGUgPSBmdW5jdGlvbihzcmMsIHNyY2xlbikgewogIHZhciBpLCBqLCBtLCByZWYsIHJldAogIG0gPSAxMjggLSAxMTsKICByZXQgPSAnJzsKICBmb3IgKGkgPSBqID0gMCwgcmVmID0gTWF0aC5mbG9vcigoc3JjbGVuICsgbSAtIDEpIC8gbSk7ICgwIDw9IHJlZiA/IGogPCByZWYgOiBqID4gcmVmKTsgaSA9IDAgPD0gcmVmID8gKytqIDogLS1qKSB7CiAgICByZXQgKz0gbmV3X3JzYS5lbmNyeXB0KGJ5dGVzVG9TdHJpbmcoc3JjLnNsaWNlKGkgKiBtLCBNYXRoLm1pbigoaSArIDEpICogbSwgc3JjbGVuKSkpKTsKICB9CiAgcmV0dXJuIHdpbmRvdy5idG9hKG5ld19yc2EuaGV4MmEocmV0KSk7Cn07CgptMTE1X2FzeW1fZGVjb2RlID0gZnVuY3Rpb24oc3JjLCBzcmNsZW4pIHsKICB2YXIgaSwgaiwgbSwgcmVmLCByZXQ7CiAgbSA9IDEyODsKICByZXQgPSAnJzsKICBmb3IgKGkgPSBqID0gMCwgcmVmID0gTWF0aC5mbG9vcigoc3JjbGVuICsgbSAtIDEpIC8gbSk7ICgwIDw9IHJlZiA/IGogPCByZWYgOiBqID4gcmVmKTsgaSA9IDAgPD0gcmVmID8gKytqIDogLS1qKSB7CiAgICByZXQgKz0gbmV3X3JzYS5kZWNyeXB0KGJ5dGVzVG9TdHJpbmcoc3JjLnNsaWNlKGkgKiBtLCBNYXRoLm1pbigoaSArIDEpICogbSwgc3JjbGVuKSkpKTsKICB9CiAgcmV0dXJuIHN0cmluZ1RvQnl0ZXMocmV0KTsKfTsKCm0xMTVfZW5jb2RlID0gZnVuY3Rpb24oc3JjLCB0bSkgewogIHZhciBrZXksIHRtcCwgeno7CiAga2V5ID0gc3RyaW5nVG9CeXRlcyhtZDUoYCFAIyMjQCMke3RtfURGRFJAI0AjYCkpOwogIHRtcCA9IHN0cmluZ1RvQnl0ZXMoc3JjKTsKICB0bXAgPSBtMTE1X3N5bV9lbmNvZGUodG1wLCB0bXAubGVuZ3RoLCBrZXksIG51bGwpOwogIHRtcCA9IGtleS5zbGljZSgwLCAxNikuY29uY2F0KHRtcCk7CiAgcmV0dXJuIHsKICAgIGRhdGE6IG0xMTVfYXN5bV9lbmNvZGUodG1wLCB0bXAubGVuZ3RoKSwKICAgIGtleQogIH07Cn07CgptMTE1X2RlY29kZSA9IGZ1bmN0aW9uKHNyYywga2V5KSB7CiAgdmFyIHRtcDsKICB0bXAgPSBzdHJpbmdUb0J5dGVzKHdpbmRvdy5hdG9iKHNyYykpOwogIHRtcCA9IG0xMTVfYXN5bV9kZWNvZGUodG1wLCB0bXAubGVuZ3RoKTsKICByZXR1cm4gYnl0ZXNUb1N0cmluZyhtMTE1X3N5bV9kZWNvZGUodG1wLnNsaWNlKDE2KSwgdG1wLmxlbmd0aCAtIDE2LCBrZXksIHRtcC5zbGljZSgwLCAxNikpKTsKfTsKCgovKkdNX2NvbmZpZ196aC1DTi5qcyovCgovLyA9PVVzZXJTY3JpcHQ9PQovLyBAbmFtZSAgICAgICAgICBHTV9jb25maWdfemgtQ04KLy8gQGF1dGhvciAgICAgICAgTWlrZSBNZWRsZXkgJiB6eGYxMDYwOAovLyBAdmVyc2lvbiAgICAgICAxLjMuNwovLyBAZGVzY3JpcHRpb24gICBHTV9jb25maWdf5Lit5paH54mICi8vIEBncmFudCAgICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICAgIEdNX3NldFZhbHVlCi8vIEBncmFudCAgICAgICAgIEdNX2RlbGV0ZVZhbHVlCi8vIEBleGNsdWRlICAgICAgICoKLy8gQGxpY2Vuc2UgICAgICAgTEdQTCAzCi8vID09L1VzZXJTY3JpcHQ9PQoKLyoK5LyY5YyW6K+05piOCiAgICAx44CB5pS55oiQ5Lit5paHICLnoa7lrpoi44CBIuWPlua2iCIg5oyJ6ZKu44CCCiAgICAy44CBc2VsZWN0IOaWsOWinuS6hiB0ZXh0Q29udGVudHMg5pWw57uE44CCCgkz44CB5paw5aKe5LqGc2tpbjogJ3RhYifmjaLpobXliIfmjaLoj5zljZXmoLflvI8KCTTjgIHmm7TmlrDpg6jliIbnv7vor5EKCTXjgIHkvJjljJblrZfkvZPmmL7npLrmlYjmnpwKCTbjgIHkvJjljJblkIzkuIDooYzlhoVDU1PmoLflvI8KKi8KCgovLyBUaGUgR01fY29uZmlnIGNvbnN0cnVjdG9yCmZ1bmN0aW9uIEdNX2NvbmZpZ1N0cnVjdCgpIHsKICAgIC8vIGNhbGwgaW5pdCgpIGlmIHNldHRpbmdzIHdlcmUgcGFzc2VkIHRvIGNvbnN0cnVjdG9yCiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCkgewogICAgICAgIEdNX2NvbmZpZ0luaXQodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB0aGlzLm9uSW5pdCgpOwogICAgfQp9CgovLyBUaGlzIGlzIHRoZSBpbml0aWFsaXplciBmdW5jdGlvbgpmdW5jdGlvbiBHTV9jb25maWdJbml0KGNvbmZpZywgYXJncykgewogICAgLy8gSW5pdGlhbGl6ZSBpbnN0YW5jZSB2YXJpYWJsZXMKICAgIGlmICh0eXBlb2YgY29uZmlnLmZpZWxkcyA9PSAidW5kZWZpbmVkIikgewogICAgICAgIGNvbmZpZy5maWVsZHMgPSB7fTsKICAgICAgICBjb25maWcub25Jbml0ID0gY29uZmlnLm9uSW5pdCB8fCBmdW5jdGlvbiAoKSB7fTsKICAgICAgICBjb25maWcub25PcGVuID0gY29uZmlnLm9uT3BlbiB8fCBmdW5jdGlvbiAoKSB7fTsKICAgICAgICBjb25maWcub25TYXZlID0gY29uZmlnLm9uU2F2ZSB8fCBmdW5jdGlvbiAoKSB7fTsKICAgICAgICBjb25maWcub25DbG9zZSA9IGNvbmZpZy5vbkNsb3NlIHx8IGZ1bmN0aW9uICgpIHt9OwogICAgICAgIGNvbmZpZy5vblJlc2V0ID0gY29uZmlnLm9uUmVzZXQgfHwgZnVuY3Rpb24gKCkge307CiAgICAgICAgY29uZmlnLmlzT3BlbiA9IGZhbHNlOwogICAgICAgIGNvbmZpZy50aXRsZSA9ICfnlKjmiLfohJrmnKzorr7nva4nOwogICAgICAgIGNvbmZpZy5jc3MgPSB7CiAgICAgICAgICAgIGJhc2ljOiBbCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAqIHsgZm9udC1mYW1pbHk6IGFyaWFsLHRhaG9tYSxteXJpYWQgcHJvLHNhbnMtc2VyaWY7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgeyBiYWNrZ3JvdW5kOiAjRkZGOyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIGlucHV0W3R5cGU9J3JhZGlvJ10geyBtYXJnaW4tcmlnaHQ6IDhweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuaW5kZW50NDAgeyBtYXJnaW4tbGVmdDogNDAlOyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIC5maWVsZF9sYWJlbCB7IGZvbnQtc2l6ZTogMTRweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1yaWdodDogNnB4OyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIC5yYWRpb19sYWJlbCB7IGZvbnQtc2l6ZTogMTRweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuYmxvY2sgeyBkaXNwbGF5OiBibG9jazsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuc2F2ZWNsb3NlX2J1dHRvbnMgeyBtYXJnaW46IDE2cHggMTBweCAxMHB4OyBwYWRkaW5nOiAycHggMTJweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAucmVzZXQsICNHTV9jb25maWcgLnJlc2V0IGEsIiArCiAgICAgICAgICAgICAgICAiICNHTV9jb25maWdfYnV0dG9uc19ob2xkZXIgeyBjb2xvcjogIzAwMDsgdGV4dC1hbGlnbjogcmlnaHQ7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLmNvbmZpZ19oZWFkZXIgeyBmb250LXNpemU6IDIwcHQ7IG1hcmdpbjogMDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuY29uZmlnX2Rlc2MsICNHTV9jb25maWcgLnNlY3Rpb25fZGVzYywgI0dNX2NvbmZpZyAucmVzZXQgeyBmb250LXNpemU6IDlwdDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuY2VudGVyIHsgdGV4dC1hbGlnbjogY2VudGVyOyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIC5zZWN0aW9uX2hlYWRlcl9ob2xkZXIgeyBtYXJnaW4tdG9wOiA4cHg7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLmNvbmZpZ192YXIgeyBtYXJnaW46IDAgMCA0cHg7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLnNlY3Rpb25faGVhZGVyIHsgYmFja2dyb3VuZDogIzQxNDE0MTsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgY29sb3I6ICNGRkY7IiArCiAgICAgICAgICAgICAgICAiIGZvbnQtc2l6ZTogMTJwdDsgbWFyZ2luOiAwOyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIC5zZWN0aW9uX2Rlc2MgeyBiYWNrZ3JvdW5kOiAjRUZFRkVGOyBib3JkZXI6IDFweCBzb2xpZCAjQ0NDOyBjb2xvcjogIzU3NTc1NzsiICsKICAgICAgICAgICAgICAgICIgZm9udC1zaXplOiAxMHB0OyBtYXJnaW46IDAgMCA2cHg7IH0iLAogICAgICAgICAgICAgICAgLy8gbmV3ZXIKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIGlucHV0W3R5cGU9J251bWJlciddIHsgd2lkdGg6IDYwcHg7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLm5hdi10YWJzIHsgbWFyZ2luOiAxMCAwfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAubmF2LXRhYnMgPiBkaXYgeyBkaXNwbGF5OiBpbmxpbmU7IHBhZGRpbmc6IDNweCAxMHB4OyB9IiwKICAgICAgICAgICAgICAgICIjcHYtcHJlZnMgLnNlY3Rpb25faGVhZGVyX2hvbGRlciB7IHBhZGRpbmctbGVmdDogMTBweDsgfSIsCiAgICAgICAgICAgIF0uam9pbignXG4nKSArICdcbicsCiAgICAgICAgICAgIHNraW5fdGFiOiBbCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyB7IGJhY2tncm91bmQ6ICNFRUU7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgdGV4dGFyZWEgeyB3aWR0aDogOTglOyBoZWlnaHQ6IDQ1cHg7IG1hcmdpbi10b3A6IDVweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuZmllbGRfbGFiZWwgeyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IGZvbnQtd2VpZ2h0OiBub3JtYWw7IH0iLAogICAgICAgICAgICAgICAgLy8g5Zyo5ZCM5LiA6KGM5YaF55qE6K6+572uCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuaW5saW5lIGlucHV0W3R5cGU9J2NoZWNrYm94J10ge21hcmdpbjogM3B4IDNweCAzcHggMHB4O30iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLmlubGluZSAuY29uZmlnX3ZhciB7IG1hcmdpbi1sZWZ0OiAxNXB4OyB9IiwKICAgICAgICAgICAgICAgIC8vIOWGheWuueagt+W8jwogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLmNvbmZpZ192YXIgeyBmb250LXNpemU6IDE0cHg7IHBhZGRpbmc6IDVweDsgbWFyZ2luOiAwOyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIC5jb25maWdfaGVhZGVyIGEgeyB0ZXh0LWRlY29yYXRpb246IG5vbmU7IGNvbG9yOiAjMDAwOyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIC5uYXYtdGFicyB7IG1hcmdpbjogMjAgMH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLm5hdi10YWJzID4gZGl2IHsgZm9udC1zaXplOiAxNXB4OyBjb2xvcjogIzk5OTsgY3Vyc29yOiBwb2ludGVyOyBwYWRkaW5nOiAxMHB4IDIwcHg7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLm5hdi10YWJzID4gLmFjdGl2ZSB7IGN1cnNvcjogZGVmYXVsdDsgY29sb3I6ICNGRkY7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLm5hdi10YWJzID4gZGl2OmhvdmVyIHsgY29sb3I6ICNGRkY7IH0iLAogICAgICAgICAgICBdLmpvaW4oJ1xuJykgKyAnXG4nLAogICAgICAgICAgICBza2luXzE6IFsgLy8g5Lu/IE1vdXNlb3ZlciBQb3B1cCBJbWFnZSBWaWV3ZXIg5qC35byPCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyB7IGJhY2tncm91bmQ6ICNFRUU7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgdGV4dGFyZWEgeyB3aWR0aDogOTglOyBoZWlnaHQ6IDQ1cHg7IG1hcmdpbi10b3A6IDVweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuY29uZmlnX3ZhciB7IGZvbnQtc2l6ZTogMTJweDsgfSIsCiAgICAgICAgICAgICAgICAiI0dNX2NvbmZpZyAuaW5saW5lIC5jb25maWdfdmFyIHsgbWFyZ2luLWxlZnQ6IDE1cHg7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLmZpZWxkX2xhYmVsIHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyBmb250LXdlaWdodDogbm9ybWFsOyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIHsgcGFkZGluZzogMjBweCAzMHB4OyBtYXJnaW46IDA7IH0iLAogICAgICAgICAgICAgICAgIiNHTV9jb25maWcgLmNvbmZpZ19oZWFkZXIgeyBtYXJnaW4tYm90dG9tOiAxMHB4OyB9IiwKICAgICAgICAgICAgICAgICIjR01fY29uZmlnIGRpdi5jb25maWdfdmFyIHsgcGFkZGluZzogN3B4IDA7IH0iLAogICAgICAgICAgICBdLmpvaW4oJ1xuJykgKyAnXG4nLAogICAgICAgICAgICBiYXNpY1ByZWZpeDogIkdNX2NvbmZpZyIsCiAgICAgICAgICAgIHN0eWxpc2g6ICIiCiAgICAgICAgfTsKICAgIH0KCiAgICBpZiAoYXJncy5sZW5ndGggPT0gMSAmJgogICAgICAgIHR5cGVvZiBhcmdzWzBdLmlkID09ICJzdHJpbmciICYmCiAgICAgICAgdHlwZW9mIGFyZ3NbMF0uYXBwZW5kQ2hpbGQgIT0gImZ1bmN0aW9uIikgdmFyIHNldHRpbmdzID0gYXJnc1swXTsKICAgIGVsc2UgewogICAgICAgIC8vIFByb3ZpZGUgYmFja3dhcmRzLWNvbXBhdGliaWxpdHkgd2l0aCBhcmd1bWVudCBzdHlsZSBpbnRpYWxpemF0aW9uCiAgICAgICAgdmFyIHNldHRpbmdzID0ge307CgogICAgICAgIC8vIGxvb3AgdGhyb3VnaCBHTV9jb25maWcuaW5pdCgpIGFyZ3VtZW50cwogICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXJncy5sZW5ndGgsIGFyZzsgaSA8IGw7ICsraSkgewogICAgICAgICAgICBhcmcgPSBhcmdzW2ldOwoKICAgICAgICAgICAgLy8gQW4gZWxlbWVudCB0byB1c2UgYXMgdGhlIGNvbmZpZyB3aW5kb3cKICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmcuYXBwZW5kQ2hpbGQgPT0gImZ1bmN0aW9uIikgewogICAgICAgICAgICAgICAgc2V0dGluZ3MuZnJhbWUgPSBhcmc7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc3dpdGNoICh0eXBlb2YgYXJnKSB7CiAgICAgICAgICAgICAgICBjYXNlICdvYmplY3QnOgogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGogaW4gYXJnKSB7IC8vIGNvdWxkIGJlIGEgY2FsbGJhY2sgZnVuY3Rpb25zIG9yIHNldHRpbmdzIG9iamVjdAogICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ1tqXSAhPSAiZnVuY3Rpb24iKSB7IC8vIHdlIGFyZSBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFyZ1tqXSA9PSAnc3RyaW5nJykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmZyYW1lU3R5bGUgPSBhcmc7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmZpZWxkcyA9IGFyZzsgLy8gc3RvcmUgc2V0dGluZ3Mgb2JqZWN0CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gbGVhdmUgdGhlIGxvb3AKICAgICAgICAgICAgICAgICAgICAgICAgfSAvLyBvdGhlcndpc2UgaXQgbXVzdCBiZSBhIGNhbGxiYWNrIGZ1bmN0aW9uCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2V0dGluZ3MuZXZlbnRzKSBzZXR0aW5ncy5ldmVudHMgPSB7fTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuZXZlbnRzW2pdID0gYXJnW2pdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzogLy8gcGFzc2luZyBhIGJhcmUgZnVuY3Rpb24gaXMgc2V0IHRvIG9wZW4gY2FsbGJhY2sKICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5ldmVudHMgPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG9wZW46IGFyZwogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdzdHJpbmcnOiAvLyBjb3VsZCBiZSBjdXN0b20gQ1NTIG9yIHRoZSB0aXRsZSBzdHJpbmcKICAgICAgICAgICAgICAgICAgICAvLyBpZiAoL1tcd1wuXStccypce1xzKltcdy1dK1xzKjpccypcdytbXHN8XFNdKlx9Ly50ZXN0KGFyZykpCiAgICAgICAgICAgICAgICAgICAgaWYgKC9bXHdcLl0rXHMqXHtccypbXHctXStccyo6W1xzfFxTXSpcfS8udGVzdChhcmcpKQogICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5jc3MgPSBhcmc7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoYXJnKQogICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy50aXRsZSA9IGFyZzsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKiBJbml0aWFsaXplIGV2ZXJ5dGhpbmcgdXNpbmcgdGhlIG5ldyBzZXR0aW5ncyBvYmplY3QgKi8KICAgIC8vIFNldCB0aGUgaWQKICAgIGlmIChzZXR0aW5ncy5pZCkgY29uZmlnLmlkID0gc2V0dGluZ3MuaWQ7CiAgICBlbHNlIGlmICh0eXBlb2YgY29uZmlnLmlkID09ICJ1bmRlZmluZWQiKSBjb25maWcuaWQgPSAnR01fY29uZmlnJzsKCiAgICAvLyBTZXQgdGhlIHRpdGxlCiAgICBpZiAoc2V0dGluZ3MudGl0bGUpIGNvbmZpZy50aXRsZSA9IHNldHRpbmdzLnRpdGxlOwoKICAgIC8vIFNldCB0aGUgY3VzdG9tIGNzcwogICAgaWYgKHNldHRpbmdzLmNzcykgY29uZmlnLmNzcy5zdHlsaXNoID0gc2V0dGluZ3MuY3NzOwoKICAgIGlmIChzZXR0aW5ncy5za2luKSB7CiAgICAgICAgdmFyIHNraW4gPSBjb25maWcuY3NzWydza2luXycgKyBzZXR0aW5ncy5za2luXTsKICAgICAgICBpZiAoc2tpbikgewogICAgICAgICAgICBjb25maWcuY3NzLmJhc2ljICs9IHNraW47CiAgICAgICAgfQogICAgfQoKICAgIC8vIFNldCB0aGUgZnJhbWUKICAgIGlmIChzZXR0aW5ncy5mcmFtZSkgY29uZmlnLmZyYW1lID0gc2V0dGluZ3MuZnJhbWU7CiAgICBpZiAoc2V0dGluZ3MuZnJhbWVTdHlsZSkgY29uZmlnLmZyYW1lU3R5bGUgPSBzZXR0aW5ncy5mcmFtZVN0eWxlOwoKICAgIGNvbmZpZy5pc1RhYnMgPSBzZXR0aW5ncy5pc1RhYnM7CgogICAgLy8gU2V0IHRoZSBldmVudCBjYWxsYmFja3MKICAgIGlmIChzZXR0aW5ncy5ldmVudHMpIHsKICAgICAgICB2YXIgZXZlbnRzID0gc2V0dGluZ3MuZXZlbnRzOwogICAgICAgIGZvciAodmFyIGUgaW4gZXZlbnRzKQogICAgICAgICAgICBjb25maWdbIm9uIiArIGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBlLnNsaWNlKDEpXSA9IGV2ZW50c1tlXTsKICAgIH0KCiAgICAvLyBDcmVhdGUgdGhlIGZpZWxkcwogICAgaWYgKHNldHRpbmdzLmZpZWxkcykgewogICAgICAgIHZhciBzdG9yZWQgPSBjb25maWcucmVhZCgpLCAvLyByZWFkIHRoZSBzdG9yZWQgc2V0dGluZ3MKICAgICAgICAgICAgZmllbGRzID0gc2V0dGluZ3MuZmllbGRzLAogICAgICAgICAgICBjdXN0b21UeXBlcyA9IHNldHRpbmdzLnR5cGVzIHx8IHt9OwoKICAgICAgICBmb3IgKHZhciBpZCBpbiBmaWVsZHMpIHsKICAgICAgICAgICAgdmFyIGZpZWxkID0gZmllbGRzW2lkXTsKCiAgICAgICAgICAgIC8vIGZvciBlYWNoIGZpZWxkIGRlZmluaXRpb24gY3JlYXRlIGEgZmllbGQgb2JqZWN0CiAgICAgICAgICAgIGlmIChmaWVsZCkKICAgICAgICAgICAgICAgIGNvbmZpZy5maWVsZHNbaWRdID0gbmV3IEdNX2NvbmZpZ0ZpZWxkKGZpZWxkLCBzdG9yZWRbaWRdLCBpZCwKICAgICAgICAgICAgICAgICAgICBjdXN0b21UeXBlc1tmaWVsZC50eXBlXSk7CiAgICAgICAgICAgIGVsc2UgaWYgKGNvbmZpZy5maWVsZHNbaWRdKSBkZWxldGUgY29uZmlnLmZpZWxkc1tpZF07CiAgICAgICAgfQogICAgfQoKICAgIC8vIElmIHRoZSBpZCBoYXMgY2hhbmdlZCB3ZSBtdXN0IG1vZGlmeSB0aGUgZGVmYXVsdCBzdHlsZQogICAgaWYgKGNvbmZpZy5pZCAhPSBjb25maWcuY3NzLmJhc2ljUHJlZml4KSB7CiAgICAgICAgY29uZmlnLmNzcy5iYXNpYyA9IGNvbmZpZy5jc3MuYmFzaWMucmVwbGFjZSgKICAgICAgICAgICAgbmV3IFJlZ0V4cCgnIycgKyBjb25maWcuY3NzLmJhc2ljUHJlZml4LCAnZ20nKSwgJyMnICsgY29uZmlnLmlkKTsKICAgICAgICBjb25maWcuY3NzLmJhc2ljUHJlZml4ID0gY29uZmlnLmlkOwogICAgfQp9CgpHTV9jb25maWdTdHJ1Y3QucHJvdG90eXBlID0gewogICAgLy8gU3VwcG9ydCBvbGQgbWV0aG9kIG9mIGluaXRhbGl6aW5nCiAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgR01fY29uZmlnSW5pdCh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIHRoaXMub25Jbml0KCk7CiAgICB9LAoKICAgIC8vIGNhbGwgR01fY29uZmlnLm9wZW4oKSBmcm9tIHlvdXIgc2NyaXB0IHRvIG9wZW4gdGhlIG1lbnUKICAgIG9wZW46IGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBEaWUgaWYgdGhlIG1lbnUgaXMgYWxyZWFkeSBvcGVuIG9uIHRoaXMgcGFnZQogICAgICAgIC8vIFlvdSBjYW4gaGF2ZSBtdWx0aXBsZSBpbnN0YW5jZXMgYnV0IHlvdSBjYW4ndCBvcGVuIHRoZSBzYW1lIGluc3RhbmNlIHR3aWNlCiAgICAgICAgdmFyIG1hdGNoID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5pZCk7CiAgICAgICAgaWYgKG1hdGNoICYmIChtYXRjaC50YWdOYW1lID09ICJJRlJBTUUiIHx8IG1hdGNoLmNoaWxkTm9kZXMubGVuZ3RoID4gMCkpIHJldHVybjsKCiAgICAgICAgLy8gU29tZXRpbWVzICJ0aGlzIiBnZXRzIG92ZXJ3cml0dGVuIHNvIGNyZWF0ZSBhbiBhbGlhcwogICAgICAgIHZhciBjb25maWcgPSB0aGlzOwoKICAgICAgICAvLyBGdW5jdGlvbiB0byBidWlsZCB0aGUgbWlnaHR5IGNvbmZpZyB3aW5kb3cgOikKICAgICAgICBmdW5jdGlvbiBidWlsZENvbmZpZ1dpbihib2R5LCBoZWFkKSB7CiAgICAgICAgICAgIHZhciBjcmVhdGUgPSBjb25maWcuY3JlYXRlLAogICAgICAgICAgICAgICAgZmllbGRzID0gY29uZmlnLmZpZWxkcywKICAgICAgICAgICAgICAgIGNvbmZpZ0lkID0gY29uZmlnLmlkLAogICAgICAgICAgICAgICAgYm9keVdyYXBwZXIgPSBjcmVhdGUoJ2RpdicsIHsKICAgICAgICAgICAgICAgICAgICBpZDogY29uZmlnSWQgKyAnX3dyYXBwZXInCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIEFwcGVuZCB0aGUgc3R5bGUgd2hpY2ggaXMgb3VyIGRlZmF1bHQgc3R5bGUgcGx1cyB0aGUgdXNlciBzdHlsZQogICAgICAgICAgICBoZWFkLmFwcGVuZENoaWxkKAogICAgICAgICAgICAgICAgY3JlYXRlKCdzdHlsZScsIHsKICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dC9jc3MnLAogICAgICAgICAgICAgICAgICAgIHRleHRDb250ZW50OiBjb25maWcuY3NzLmJhc2ljICsgY29uZmlnLmNzcy5zdHlsaXNoCiAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAvLyBBZGQgaGVhZGVyIGFuZCB0aXRsZQogICAgICAgICAgICBib2R5V3JhcHBlci5hcHBlbmRDaGlsZChjcmVhdGUoJ2RpdicsIHsKICAgICAgICAgICAgICAgIGlkOiBjb25maWdJZCArICdfaGVhZGVyJywKICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2NvbmZpZ19oZWFkZXIgYmxvY2sgY2VudGVyJwogICAgICAgICAgICB9LCBjb25maWcudGl0bGUpKTsKCiAgICAgICAgICAgIC8vIEFwcGVuZCBlbGVtZW50cwogICAgICAgICAgICB2YXIgc2VjdGlvbiA9IGJvZHlXcmFwcGVyLAogICAgICAgICAgICAgICAgc2VjTnVtID0gMDsgLy8gU2VjdGlvbiBjb3VudAogICAgICAgICAgICB2YXIgbGFzdFBhcmVudE5vZGUgPSBudWxsOwoKICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGZpZWxkcwogICAgICAgICAgICBmb3IgKHZhciBpZCBpbiBmaWVsZHMpIHsKICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IGZpZWxkc1tpZF0sCiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MgPSBmaWVsZC5zZXR0aW5nczsKCiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3Muc2VjdGlvbikgeyAvLyB0aGUgc3RhcnQgb2YgYSBuZXcgc2VjdGlvbgogICAgICAgICAgICAgICAgICAgIHNlY3Rpb24gPSBib2R5V3JhcHBlci5hcHBlbmRDaGlsZChjcmVhdGUoJ2RpdicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2VjdGlvbl9oZWFkZXJfaG9sZGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ19zZWN0aW9uXycgKyBzZWNOdW0KICAgICAgICAgICAgICAgICAgICB9KSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoc2V0dGluZ3Muc2VjdGlvbikgIT09ICdbb2JqZWN0IEFycmF5XScpCiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLnNlY3Rpb24gPSBbc2V0dGluZ3Muc2VjdGlvbl07CgogICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zZWN0aW9uWzBdKQogICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmFwcGVuZENoaWxkKGNyZWF0ZSgnZGl2JywgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2VjdGlvbl9oZWFkZXIgY2VudGVyJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjb25maWdJZCArICdfc2VjdGlvbl9oZWFkZXJfJyArIHNlY051bQogICAgICAgICAgICAgICAgICAgICAgICB9LCBzZXR0aW5ncy5zZWN0aW9uWzBdKSk7CgogICAgICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5zZWN0aW9uWzFdKQogICAgICAgICAgICAgICAgICAgICAgICBzZWN0aW9uLmFwcGVuZENoaWxkKGNyZWF0ZSgncCcsIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NlY3Rpb25fZGVzYyBjZW50ZXInLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ19zZWN0aW9uX2Rlc2NfJyArIHNlY051bQogICAgICAgICAgICAgICAgICAgICAgICB9LCBzZXR0aW5ncy5zZWN0aW9uWzFdKSk7CiAgICAgICAgICAgICAgICAgICAgKytzZWNOdW07CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmxpbmUgPT0gJ3N0YXJ0JyAmJiBsYXN0UGFyZW50Tm9kZSkgeyAvLyDliIfmjaLliLDkuIvkuIDooYwKICAgICAgICAgICAgICAgICAgICBsYXN0UGFyZW50Tm9kZSA9IG51bGw7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGZpZWxkIGVsZW1lbnRzIGFuZCBhcHBlbmQgdG8gY3VycmVudCBzZWN0aW9uCiAgICAgICAgICAgICAgICAobGFzdFBhcmVudE5vZGUgfHwgc2VjdGlvbikuYXBwZW5kQ2hpbGQoKGZpZWxkLndyYXBwZXIgPSBmaWVsZC50b05vZGUoY29uZmlnSWQsIGxhc3RQYXJlbnROb2RlKSkpOwoKICAgICAgICAgICAgICAgIGlmIChzZXR0aW5ncy5saW5lID09ICdzdGFydCcpIHsKICAgICAgICAgICAgICAgICAgICBsYXN0UGFyZW50Tm9kZSA9IGZpZWxkLndyYXBwZXI7CiAgICAgICAgICAgICAgICAgICAgbGFzdFBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnaW5saW5lJykKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2V0dGluZ3MubGluZSA9PSAnZW5kJykgewogICAgICAgICAgICAgICAgICAgIGxhc3RQYXJlbnROb2RlID0gbnVsbDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gQWRkIHNhdmUgYW5kIGNsb3NlIGJ1dHRvbnMKICAgICAgICAgICAgYm9keVdyYXBwZXIuYXBwZW5kQ2hpbGQoY3JlYXRlKCdkaXYnLCB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ19idXR0b25zX2hvbGRlcicKICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgY3JlYXRlKCdidXR0b24nLCB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ19zYXZlQnRuJywKICAgICAgICAgICAgICAgICAgICB0ZXh0Q29udGVudDogJ+ehruWumicsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfpg6jliIbpgInpobnpnIDopoHliLfmlrDpobXpnaLmiY3og73nlJ/mlYgnLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ3NhdmVjbG9zZV9idXR0b25zJywKICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5zYXZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0pLAoKICAgICAgICAgICAgICAgIGNyZWF0ZSgnYnV0dG9uJywgewogICAgICAgICAgICAgICAgICAgIGlkOiBjb25maWdJZCArICdfY2xvc2VCdG4nLAogICAgICAgICAgICAgICAgICAgIHRleHRDb250ZW50OiAn5Y+W5raIJywKICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+WPlua2iOacrOasoeiuvue9ru+8jOaJgOaciemAiemhuei/mOWOnycsCiAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnc2F2ZWNsb3NlX2J1dHRvbnMnLAogICAgICAgICAgICAgICAgICAgIG9uY2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLmNsb3NlKCkKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KSwKCiAgICAgICAgICAgICAgICBjcmVhdGUoJ2RpdicsIHsKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmVzZXRfaG9sZGVyIGJsb2NrJwogICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgICAgIC8vIFJlc2V0IGxpbmsKICAgICAgICAgICAgICAgICAgICBjcmVhdGUoJ2EnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBjb25maWdJZCArICdfcmVzZXRMaW5rJywKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dENvbnRlbnQ6ICfmgaLlpI3pu5jorqTorr7nva4nLAogICAgICAgICAgICAgICAgICAgICAgICBocmVmOiAnIycsCiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5oGi5aSN5omA5pyJ6K6+572u55qE5YaF5a655Li66buY6K6k5YC8JywKICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAncmVzZXQnLAogICAgICAgICAgICAgICAgICAgICAgICBvbmNsaWNrOiBmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlnLnJlc2V0KCkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICApKSk7CgogICAgICAgICAgICBib2R5LmFwcGVuZENoaWxkKGJvZHlXcmFwcGVyKTsgLy8gUGFpbnQgZXZlcnl0aGluZyB0byB3aW5kb3cgYXQgb25jZQogICAgICAgICAgICBjb25maWcuY2VudGVyKCk7IC8vIFNob3cgYW5kIGNlbnRlciBpZnJhbWUKICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGNvbmZpZy5jZW50ZXIsIGZhbHNlKTsgLy8gQ2VudGVyIGZyYW1lIG9uIHJlc2l6ZQoKICAgICAgICAgICAgLy8gQ2FsbCB0aGUgb3BlbigpIGNhbGxiYWNrIGZ1bmN0aW9uCiAgICAgICAgICAgIGNvbmZpZy5vbk9wZW4oY29uZmlnLmZyYW1lLmNvbnRlbnREb2N1bWVudCB8fCBjb25maWcuZnJhbWUub3duZXJEb2N1bWVudCwKICAgICAgICAgICAgICAgIGNvbmZpZy5mcmFtZS5jb250ZW50V2luZG93IHx8IHdpbmRvdywKICAgICAgICAgICAgICAgIGNvbmZpZy5mcmFtZSk7CgogICAgICAgICAgICBpZiAoY29uZmlnLmlzVGFicykgewogICAgICAgICAgICAgICAgY29uZmlnLnRvVGFicygpOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBDbG9zZSBmcmFtZSBvbiB3aW5kb3cgY2xvc2UKICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JlZm9yZXVubG9hZCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIGNvbmZpZy5jbG9zZSgpOwogICAgICAgICAgICB9LCBmYWxzZSk7CgogICAgICAgICAgICAvLyBOb3cgdGhhdCBldmVyeXRoaW5nIGlzIGxvYWRlZCwgbWFrZSBpdCB2aXNpYmxlCiAgICAgICAgICAgIGNvbmZpZy5mcmFtZS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgICAgY29uZmlnLmlzT3BlbiA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICAvLyBDaGFuZ2UgdGhpcyBpbiB0aGUgb25PcGVuIGNhbGxiYWNrIHVzaW5nIHRoaXMuZnJhbWUuc2V0QXR0cmlidXRlKCdzdHlsZScsICcnKQogICAgICAgIHZhciBkZWZhdWx0U3R5bGUgPSAnYm90dG9tOiBhdXRvOyBib3JkZXI6IDFweCBzb2xpZCAjMDAwOyBkaXNwbGF5OiBub25lOyBoZWlnaHQ6IDc1JTsnICsKICAgICAgICAgICAgJyBsZWZ0OiAwOyBtYXJnaW46IDA7IG1heC1oZWlnaHQ6IDk1JTsgbWF4LXdpZHRoOiA5NSU7IG9wYWNpdHk6IDA7JyArCiAgICAgICAgICAgICcgb3ZlcmZsb3c6IGF1dG87IHBhZGRpbmc6IDA7IHBvc2l0aW9uOiBmaXhlZDsgcmlnaHQ6IGF1dG87IHRvcDogMDsnICsKICAgICAgICAgICAgJyB3aWR0aDogNzUlOyB6LWluZGV4OiA5OTk5OTk5OTk7JzsKCiAgICAgICAgLy8gRWl0aGVyIHVzZSB0aGUgZWxlbWVudCBwYXNzZWQgdG8gaW5pdCgpIG9yIGNyZWF0ZSBhbiBpZnJhbWUKICAgICAgICBpZiAodGhpcy5mcmFtZSkgewogICAgICAgICAgICB0aGlzLmZyYW1lLmlkID0gdGhpcy5pZDsgLy8gQWxsb3dzIGZvciBwcmVmaXhpbmcgc3R5bGVzIHdpdGggdGhlIGNvbmZpZyBpZAogICAgICAgICAgICB0aGlzLmZyYW1lLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBkZWZhdWx0U3R5bGUpOwogICAgICAgICAgICBidWlsZENvbmZpZ1dpbih0aGlzLmZyYW1lLCB0aGlzLmZyYW1lLm93bmVyRG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gQ3JlYXRlIGZyYW1lCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoKHRoaXMuZnJhbWUgPSB0aGlzLmNyZWF0ZSgnaWZyYW1lJywgewogICAgICAgICAgICAgICAgaWQ6IHRoaXMuaWQsCiAgICAgICAgICAgICAgICBzdHlsZTogZGVmYXVsdFN0eWxlCiAgICAgICAgICAgIH0pKSk7CgogICAgICAgICAgICBpZiAodGhpcy5mcmFtZVN0eWxlKSB7CiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLmZyYW1lU3R5bGUpLmZvckVhY2goZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5mcmFtZS5zdHlsZVtrZXldID0gY29uZmlnLmZyYW1lU3R5bGVba2V5XTsKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIEluIFdlYktpdCBzcmMgY2FuJ3QgYmUgc2V0IHVudGlsIGl0IGlzIGFkZGVkIHRvIHRoZSBwYWdlCiAgICAgICAgICAgIHRoaXMuZnJhbWUuc3JjID0gJ2Fib3V0OmJsYW5rJzsKICAgICAgICAgICAgLy8gd2Ugd2FpdCBmb3IgdGhlIGlmcmFtZSB0byBsb2FkIGJlZm9yZSB3ZSBjYW4gbW9kaWZ5IGl0CiAgICAgICAgICAgIHRoaXMuZnJhbWUuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICB2YXIgZnJhbWUgPSBjb25maWcuZnJhbWU7CiAgICAgICAgICAgICAgICB2YXIgYm9keSA9IGZyYW1lLmNvbnRlbnREb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYm9keScpWzBdOwogICAgICAgICAgICAgICAgYm9keS5pZCA9IGNvbmZpZy5pZDsgLy8gQWxsb3dzIGZvciBwcmVmaXhpbmcgc3R5bGVzIHdpdGggdGhlIGNvbmZpZyBpZAogICAgICAgICAgICAgICAgYnVpbGRDb25maWdXaW4oYm9keSwgZnJhbWUuY29udGVudERvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0pOwogICAgICAgICAgICB9LCBmYWxzZSk7CiAgICAgICAgfQogICAgfSwKCiAgICBzYXZlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGZvcmdvdHRlbiA9IHRoaXMud3JpdGUoKTsKICAgICAgICB0aGlzLm9uU2F2ZShmb3Jnb3R0ZW4pOyAvLyBDYWxsIHRoZSBzYXZlKCkgY2FsbGJhY2sgZnVuY3Rpb24KICAgIH0sCgogICAgY2xvc2U6IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoIXRoaXMuZnJhbWUpIHJldHVybjsKICAgICAgICAvLyBJZiBmcmFtZSBpcyBhbiBpZnJhbWUgdGhlbiByZW1vdmUgaXQKICAgICAgICBpZiAodGhpcy5mcmFtZS5jb250ZW50RG9jdW1lbnQpIHsKICAgICAgICAgICAgdGhpcy5yZW1vdmUodGhpcy5mcmFtZSk7CiAgICAgICAgICAgIHRoaXMuZnJhbWUgPSBudWxsOwogICAgICAgIH0gZWxzZSB7IC8vIGVsc2Ugd2lwZSBpdHMgY29udGVudAogICAgICAgICAgICB0aGlzLmZyYW1lLmlubmVySFRNTCA9ICIiOwogICAgICAgICAgICB0aGlzLmZyYW1lLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgfQoKICAgICAgICAvLyBOdWxsIG91dCBhbGwgdGhlIGZpZWxkcyBzbyB3ZSBkb24ndCBsZWFrIG1lbW9yeQogICAgICAgIHZhciBmaWVsZHMgPSB0aGlzLmZpZWxkczsKICAgICAgICBmb3IgKHZhciBpZCBpbiBmaWVsZHMpIHsKICAgICAgICAgICAgdmFyIGZpZWxkID0gZmllbGRzW2lkXTsKICAgICAgICAgICAgZmllbGQud3JhcHBlciA9IG51bGw7CiAgICAgICAgICAgIGZpZWxkLm5vZGUgPSBudWxsOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5vbkNsb3NlKCk7IC8vICBDYWxsIHRoZSBjbG9zZSgpIGNhbGxiYWNrIGZ1bmN0aW9uCiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTsKICAgIH0sCgogICAgc2V0OiBmdW5jdGlvbiAobmFtZSwgdmFsKSB7CiAgICAgICAgdGhpcy5maWVsZHNbbmFtZV0udmFsdWUgPSB2YWw7CgogICAgICAgIGlmICh0aGlzLmZpZWxkc1tuYW1lXS5ub2RlKSB7CiAgICAgICAgICAgIHRoaXMuZmllbGRzW25hbWVdLnJlbG9hZCgpOwogICAgICAgIH0KICAgIH0sCgogICAgZ2V0OiBmdW5jdGlvbiAobmFtZSwgZ2V0TGl2ZSkgewogICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGRzW25hbWVdLAogICAgICAgICAgICBmaWVsZFZhbCA9IG51bGw7CgogICAgICAgIGlmIChnZXRMaXZlICYmIGZpZWxkLm5vZGUpIHsKICAgICAgICAgICAgZmllbGRWYWwgPSBmaWVsZC50b1ZhbHVlKCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmllbGRWYWwgIT0gbnVsbCA/IGZpZWxkVmFsIDogZmllbGQudmFsdWU7CiAgICB9LAoKICAgIHdyaXRlOiBmdW5jdGlvbiAoc3RvcmUsIG9iaikgewogICAgICAgIGlmICghb2JqKSB7CiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSB7fSwKICAgICAgICAgICAgICAgIGZvcmdvdHRlbiA9IHt9LAogICAgICAgICAgICAgICAgZmllbGRzID0gdGhpcy5maWVsZHM7CgogICAgICAgICAgICBmb3IgKHZhciBpZCBpbiBmaWVsZHMpIHsKICAgICAgICAgICAgICAgIHZhciBmaWVsZCA9IGZpZWxkc1tpZF07CiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSBmaWVsZC50b1ZhbHVlKCk7CgogICAgICAgICAgICAgICAgaWYgKGZpZWxkLnNhdmUpIHsKICAgICAgICAgICAgICAgICAgICBpZiAodmFsdWUgIT0gbnVsbCkgewogICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXNbaWRdID0gdmFsdWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkLnZhbHVlID0gdmFsdWU7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlc1tpZF0gPSBmaWVsZC52YWx1ZTsKICAgICAgICAgICAgICAgIH0gZWxzZQogICAgICAgICAgICAgICAgICAgIGZvcmdvdHRlbltpZF0gPSB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICB0cnkgewogICAgICAgICAgICB0aGlzLnNldFZhbHVlKHN0b3JlIHx8IHRoaXMuaWQsIHRoaXMuc3RyaW5naWZ5KG9iaiB8fCB2YWx1ZXMpKTsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgIHRoaXMubG9nKCJHTV9jb25maWcgZmFpbGVkIHRvIHNhdmUgc2V0dGluZ3MhIik7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZm9yZ290dGVuOwogICAgfSwKCiAgICByZWFkOiBmdW5jdGlvbiAoc3RvcmUpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgcnZhbCA9IHRoaXMucGFyc2VyKHRoaXMuZ2V0VmFsdWUoc3RvcmUgfHwgdGhpcy5pZCwgJ3t9JykpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgdGhpcy5sb2coIkdNX2NvbmZpZyBmYWlsZWQgdG8gcmVhZCBzYXZlZCBzZXR0aW5ncyEiKTsKICAgICAgICAgICAgdmFyIHJ2YWwgPSB7fTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJ2YWw7CiAgICB9LAoKICAgIHJlc2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGZpZWxkcyA9IHRoaXMuZmllbGRzOwoKICAgICAgICAvLyBSZXNldCBhbGwgdGhlIGZpZWxkcwogICAgICAgIGZvciAodmFyIGlkIGluIGZpZWxkcykgZmllbGRzW2lkXS5yZXNldCgpOwoKICAgICAgICB0aGlzLm9uUmVzZXQoKTsgLy8gQ2FsbCB0aGUgcmVzZXQoKSBjYWxsYmFjayBmdW5jdGlvbgogICAgfSwKCiAgICBjcmVhdGU6IGZ1bmN0aW9uICgpIHsKICAgICAgICBzd2l0Y2ggKGFyZ3VtZW50cy5sZW5ndGgpIHsKICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgdmFyIEEgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShhcmd1bWVudHNbMF0pOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICB2YXIgQSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoYXJndW1lbnRzWzBdKSwKICAgICAgICAgICAgICAgICAgICBCID0gYXJndW1lbnRzWzFdOwogICAgICAgICAgICAgICAgZm9yICh2YXIgYiBpbiBCKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGIuaW5kZXhPZigib24iKSA9PSAwKQogICAgICAgICAgICAgICAgICAgICAgICBBLmFkZEV2ZW50TGlzdGVuZXIoYi5zdWJzdHJpbmcoMiksIEJbYl0sIGZhbHNlKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICgiLHN0eWxlLGFjY2Vzc2tleSxpZCxuYW1lLHNyYyxocmVmLHdoaWNoLGZvciIuaW5kZXhPZigiLCIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYi50b0xvd2VyQ2FzZSgpKSAhPSAtMSkKICAgICAgICAgICAgICAgICAgICAgICAgQS5zZXRBdHRyaWJ1dGUoYiwgQltiXSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIEJbYl0gIT0gJ3VuZGVmaW5lZCcpCiAgICAgICAgICAgICAgICAgICAgICAgIEFbYl0gPSBCW2JdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMl0gPT0gInN0cmluZyIpCiAgICAgICAgICAgICAgICAgICAgQS5pbm5lckhUTUwgPSBhcmd1bWVudHNbMl07CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDIsIGxlbiA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBsZW47ICsraSkKICAgICAgICAgICAgICAgICAgICAgICAgQS5hcHBlbmRDaGlsZChhcmd1bWVudHNbaV0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gQTsKICAgIH0sCgogICAgY2VudGVyOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLmZyYW1lOwogICAgICAgIGlmICghbm9kZSkgcmV0dXJuOwogICAgICAgIHZhciBzdHlsZSA9IG5vZGUuc3R5bGUsCiAgICAgICAgICAgIGJlZm9yZU9wYWNpdHkgPSBzdHlsZS5vcGFjaXR5OwogICAgICAgIGlmIChzdHlsZS5kaXNwbGF5ID09ICdub25lJykgc3R5bGUub3BhY2l0eSA9ICcwJzsKICAgICAgICBzdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgc3R5bGUudG9wID0gTWF0aC5mbG9vcigod2luZG93LmlubmVySGVpZ2h0IC8gMikgLSAobm9kZS5vZmZzZXRIZWlnaHQgLyAyKSkgKyAncHgnOwogICAgICAgIHN0eWxlLmxlZnQgPSBNYXRoLmZsb29yKCh3aW5kb3cuaW5uZXJXaWR0aCAvIDIpIC0gKG5vZGUub2Zmc2V0V2lkdGggLyAyKSkgKyAncHgnOwogICAgICAgIHN0eWxlLm9wYWNpdHkgPSAnMSc7CiAgICB9LAoKICAgIHJlbW92ZTogZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgaWYgKGVsICYmIGVsLnBhcmVudE5vZGUpIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpOwogICAgfSwKCiAgICB0b1RhYnM6IGZ1bmN0aW9uICgpIHsgLy8g6L2s5Li6IHRhYiDnmoTlvaLlvI8KICAgICAgICB2YXIgYm9keSA9IHRoaXMuZnJhbWUudGFnTmFtZSA9PSAnSUZSQU1FJyA/IHRoaXMuZnJhbWUuY29udGVudFdpbmRvdy5kb2N1bWVudCA6IHRoaXMuZnJhbWUsCiAgICAgICAgICAgIGNvbmZpZ0lkID0gdGhpcy5pZDsKICAgICAgICB2YXIgJCA9IGZ1bmN0aW9uIChpZCkgewogICAgICAgICAgICByZXR1cm4gYm9keS5nZXRFbGVtZW50QnlJZChjb25maWdJZCArICdfJyArIGlkKTsKICAgICAgICB9OwoKICAgICAgICB2YXIgaGVhZGVycyA9IGJvZHkucXVlcnlTZWxlY3RvckFsbCgnLnNlY3Rpb25faGVhZGVyJyk7CiAgICAgICAgaWYgKCFoZWFkZXJzLmxlbmd0aCkgcmV0dXJuOwoKICAgICAgICB2YXIgYW5jaCA9IHRoaXMuY3JlYXRlKCdkaXYnLCB7CiAgICAgICAgICAgIC8vIGlkOiBjb25maWdJZCArICdfdGFiX2hvbGRlcicsCiAgICAgICAgICAgIGNsYXNzTmFtZTogJ25hdi10YWJzJywKICAgICAgICB9KTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDAsIGhlYWRlcjsgaSA8IGhlYWRlcnMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaGVhZGVyID0gaGVhZGVyc1tpXTsKICAgICAgICAgICAgaWYgKGkgPT0gMCkgewogICAgICAgICAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGFuY2guYXBwZW5kQ2hpbGQoaGVhZGVyKTsKICAgICAgICB9CgogICAgICAgIGFuY2guYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLnRvZ2dsZVRhYi5iaW5kKHRoaXMpLCBmYWxzZSk7CgogICAgICAgICQoJ3NlY3Rpb25fMCcpLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGFuY2gsICQoJ3NlY3Rpb25fMCcpKTsKCiAgICAgICAgdmFyIGN1clRhYiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdwaWN2aWV3ZXJDRS5jb25maWcuY3VyVGFiJykgfHwgMDsKICAgICAgICB0aGlzLnRvZ2dsZVRhYihwYXJzZUludChjdXJUYWIsIDEwKSk7CiAgICB9LAogICAgdG9nZ2xlVGFiOiBmdW5jdGlvbiAoZSkgewogICAgICAgIHZhciBib2R5ID0gdGhpcy5mcmFtZS50YWdOYW1lID09ICdJRlJBTUUnID8gdGhpcy5mcmFtZS5jb250ZW50V2luZG93LmRvY3VtZW50IDogdGhpcy5mcmFtZSwKICAgICAgICAgICAgY29uZmlnSWQgPSB0aGlzLmlkOwoKICAgICAgICB2YXIgY3VyVGFiID0gdHlwZW9mIGUgPT0gJ251bWJlcicgPyBlIDogL1xfKFxkKykvLmV4ZWMoZS50YXJnZXQuaWQpWzFdOwoKICAgICAgICBbXS5mb3JFYWNoLmNhbGwoYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbl9oZWFkZXInKSwgZnVuY3Rpb24gKGhlYWRlciwgaSkgewogICAgICAgICAgICBpZiAoaSA9PSBjdXJUYWIpIHsKICAgICAgICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBbXS5mb3JFYWNoLmNhbGwoYm9keS5xdWVyeVNlbGVjdG9yQWxsKCcuc2VjdGlvbl9oZWFkZXJfaG9sZGVyJyksIGZ1bmN0aW9uIChob2xkZXIsIGkpIHsKICAgICAgICAgICAgaG9sZGVyLnN0eWxlLmRpc3BsYXkgPSAoaSA9PSBjdXJUYWIpID8gJ2Jsb2NrJyA6ICdub25lJzsKICAgICAgICB9KTsKCiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3BpY3ZpZXdlckNFLmNvbmZpZy5jdXJUYWInLCBjdXJUYWIpCiAgICB9Cn07CgovLyBEZWZpbmUgYSBidW5jaCBvZiBBUEkgc3R1ZmYKKGZ1bmN0aW9uICgpIHsKICAgIHZhciBpc0dNID0gdHlwZW9mIEdNX2dldFZhbHVlICE9ICd1bmRlZmluZWQnICYmCiAgICAgICAgdHlwZW9mIEdNX2dldFZhbHVlKCdhJywgJ2InKSAhPSAndW5kZWZpbmVkJywKICAgICAgICBzZXRWYWx1ZSwgZ2V0VmFsdWUsIHN0cmluZ2lmeSwgcGFyc2VyOwoKICAgIC8vIERlZmluZSB2YWx1ZSBzdG9yaW5nIGFuZCByZWFkaW5nIEFQSQogICAgaWYgKCFpc0dNKSB7CiAgICAgICAgc2V0VmFsdWUgPSBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5zZXRJdGVtKG5hbWUsIHZhbHVlKTsKICAgICAgICB9OwogICAgICAgIGdldFZhbHVlID0gZnVuY3Rpb24gKG5hbWUsIGRlZikgewogICAgICAgICAgICB2YXIgcyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKG5hbWUpOwogICAgICAgICAgICByZXR1cm4gcyA9PSBudWxsID8gZGVmIDogcwogICAgICAgIH07CgogICAgICAgIC8vIFdlIG9ubHkgc3VwcG9ydCBKU09OIHBhcnNlciBvdXRzaWRlIEdNCiAgICAgICAgc3RyaW5naWZ5ID0gSlNPTi5zdHJpbmdpZnk7CiAgICAgICAgcGFyc2VyID0gSlNPTi5wYXJzZTsKICAgIH0gZWxzZSB7CiAgICAgICAgc2V0VmFsdWUgPSBHTV9zZXRWYWx1ZTsKICAgICAgICBnZXRWYWx1ZSA9IEdNX2dldFZhbHVlOwogICAgICAgIHN0cmluZ2lmeSA9IHR5cGVvZiBKU09OID09ICJ1bmRlZmluZWQiID8KICAgICAgICAgICAgZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgICAgICAgcmV0dXJuIG9iai50b1NvdXJjZSgpOwogICAgICAgICAgICB9IDogSlNPTi5zdHJpbmdpZnk7CiAgICAgICAgcGFyc2VyID0gdHlwZW9mIEpTT04gPT0gInVuZGVmaW5lZCIgPwogICAgICAgICAgICBmdW5jdGlvbiAoanNvbkRhdGEpIHsKICAgICAgICAgICAgICAgIHJldHVybiAobmV3IEZ1bmN0aW9uKCdyZXR1cm4gJyArIGpzb25EYXRhICsgJzsnKSkoKTsKICAgICAgICAgICAgfSA6IEpTT04ucGFyc2U7CiAgICB9CgogICAgR01fY29uZmlnU3RydWN0LnByb3RvdHlwZS5pc0dNID0gaXNHTTsKICAgIEdNX2NvbmZpZ1N0cnVjdC5wcm90b3R5cGUuc2V0VmFsdWUgPSBzZXRWYWx1ZTsKICAgIEdNX2NvbmZpZ1N0cnVjdC5wcm90b3R5cGUuZ2V0VmFsdWUgPSBnZXRWYWx1ZTsKICAgIEdNX2NvbmZpZ1N0cnVjdC5wcm90b3R5cGUuc3RyaW5naWZ5ID0gc3RyaW5naWZ5OwogICAgR01fY29uZmlnU3RydWN0LnByb3RvdHlwZS5wYXJzZXIgPSBwYXJzZXI7CiAgICBHTV9jb25maWdTdHJ1Y3QucHJvdG90eXBlLmxvZyA9IHdpbmRvdy5jb25zb2xlID8KICAgICAgICBjb25zb2xlLmxvZyA6IChpc0dNICYmIHR5cGVvZiBHTV9sb2cgIT0gJ3VuZGVmaW5lZCcgPwogICAgICAgICAgICBHTV9sb2cgOiAod2luZG93Lm9wZXJhID8KICAgICAgICAgICAgICAgIG9wZXJhLnBvc3RFcnJvciA6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAvKiBubyBsb2dnaW5nICovCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICkpOwp9KSgpOwoKZnVuY3Rpb24gR01fY29uZmlnRGVmYXVsdFZhbHVlKHR5cGUsIG9wdGlvbnMpIHsKICAgIHZhciB2YWx1ZTsKCiAgICBpZiAodHlwZSAmJiB0eXBlLmluZGV4T2YoJ3Vuc2lnbmVkICcpID09IDApCiAgICAgICAgdHlwZSA9IHR5cGUuc3Vic3RyaW5nKDkpOwoKICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgIGNhc2UgJ3JhZGlvJzoKICAgICAgICBjYXNlICdzZWxlY3QnOgogICAgICAgICAgICB2YWx1ZSA9IG9wdGlvbnNbMF07CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgJ2NoZWNrYm94JzoKICAgICAgICAgICAgdmFsdWUgPSBmYWxzZTsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnaW50JzoKICAgICAgICBjYXNlICdpbnRlZ2VyJzoKICAgICAgICBjYXNlICdmbG9hdCc6CiAgICAgICAgY2FzZSAnbnVtYmVyJzoKICAgICAgICAgICAgdmFsdWUgPSAwOwogICAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICB2YWx1ZSA9ICcnOwogICAgfQoKICAgIHJldHVybiB2YWx1ZTsKfQoKZnVuY3Rpb24gR01fY29uZmlnRmllbGQoc2V0dGluZ3MsIHN0b3JlZCwgaWQsIGN1c3RvbVR5cGUpIHsKICAgIC8vIFN0b3JlIHRoZSBmaWVsZCdzIHNldHRpbmdzCiAgICB0aGlzLnNldHRpbmdzID0gc2V0dGluZ3M7CiAgICB0aGlzLmlkID0gaWQ7CiAgICB0aGlzLm5vZGUgPSBudWxsOwogICAgdGhpcy53cmFwcGVyID0gbnVsbDsKICAgIHRoaXMuc2F2ZSA9IHR5cGVvZiBzZXR0aW5ncy5zYXZlID09ICJ1bmRlZmluZWQiID8gdHJ1ZSA6IHNldHRpbmdzLnNhdmU7CgogICAgLy8gQnV0dG9ucyBhcmUgc3RhdGljIGFuZCBkb24ndCBoYXZlIGEgc3RvcmVkIHZhbHVlCiAgICBpZiAoc2V0dGluZ3MudHlwZSA9PSAiYnV0dG9uIikgdGhpcy5zYXZlID0gZmFsc2U7CiAgICBpZiAoc2V0dGluZ3MudHlwZSA9PSAic3BhbiIpIHRoaXMuc2F2ZSA9IGZhbHNlOwoKICAgIC8vIGlmIGEgZGVmYXVsdCB2YWx1ZSB3YXNuJ3QgcGFzc2VkIHRocm91Z2ggaW5pdCgpIHRoZW4KICAgIC8vICAgaWYgdGhlIHR5cGUgaXMgY3VzdG9tIHVzZSBpdHMgZGVmYXVsdCB2YWx1ZQogICAgLy8gICBlbHNlIHVzZSBkZWZhdWx0IHZhbHVlIGZvciB0eXBlCiAgICAvLyBlbHNlIHVzZSB0aGUgZGVmYXVsdCB2YWx1ZSBwYXNzZWQgdGhyb3VnaCBpbml0KCkKICAgIHRoaXNbJ2RlZmF1bHQnXSA9IHR5cGVvZiBzZXR0aW5nc1snZGVmYXVsdCddID09ICJ1bmRlZmluZWQiID8KICAgICAgICBjdXN0b21UeXBlID8KICAgICAgICBjdXN0b21UeXBlWydkZWZhdWx0J10gOgogICAgICAgIEdNX2NvbmZpZ0RlZmF1bHRWYWx1ZShzZXR0aW5ncy50eXBlLCBzZXR0aW5ncy5vcHRpb25zKSA6CiAgICAgICAgc2V0dGluZ3NbJ2RlZmF1bHQnXTsKCiAgICAvLyBTdG9yZSB0aGUgZmllbGQncyB2YWx1ZQogICAgdGhpcy52YWx1ZSA9IHR5cGVvZiBzdG9yZWQgPT0gInVuZGVmaW5lZCIgPyB0aGlzWydkZWZhdWx0J10gOiBzdG9yZWQ7CgogICAgLy8gU2V0dXAgbWV0aG9kcyBmb3IgYSBjdXN0b20gdHlwZQogICAgaWYgKGN1c3RvbVR5cGUpIHsKICAgICAgICB0aGlzLnRvTm9kZSA9IGN1c3RvbVR5cGUudG9Ob2RlOwogICAgICAgIHRoaXMudG9WYWx1ZSA9IGN1c3RvbVR5cGUudG9WYWx1ZTsKICAgICAgICB0aGlzLnJlc2V0ID0gY3VzdG9tVHlwZS5yZXNldDsKICAgIH0KfQoKR01fY29uZmlnRmllbGQucHJvdG90eXBlID0gewogICAgY3JlYXRlOiBHTV9jb25maWdTdHJ1Y3QucHJvdG90eXBlLmNyZWF0ZSwKCiAgICB0b05vZGU6IGZ1bmN0aW9uIChjb25maWdJZCwgbGFzdFBhcmVudE5vZGUpIHsKICAgICAgICB2YXIgZmllbGQgPSB0aGlzLnNldHRpbmdzLAogICAgICAgICAgICB2YWx1ZSA9IHRoaXMudmFsdWUsCiAgICAgICAgICAgIG9wdGlvbnMgPSBmaWVsZC5vcHRpb25zLAogICAgICAgICAgICB0eXBlID0gZmllbGQudHlwZSwKICAgICAgICAgICAgaWQgPSB0aGlzLmlkLAogICAgICAgICAgICBsYWJlbFBvcyA9IGZpZWxkLmxhYmVsUG9zLAogICAgICAgICAgICBjcmVhdGUgPSB0aGlzLmNyZWF0ZTsKCiAgICAgICAgZnVuY3Rpb24gYWRkTGFiZWwocG9zLCBsYWJlbEVsLCBwYXJlbnROb2RlLCBiZWZvcmVFbCkgewogICAgICAgICAgICBpZiAoIWJlZm9yZUVsKSB7CiAgICAgICAgICAgICAgICBiZWZvcmVFbCA9IGxhc3RQYXJlbnROb2RlID8gcGFyZW50Tm9kZS5sYXN0Q2hpbGQgOiBwYXJlbnROb2RlLmZpcnN0Q2hpbGQ7IC8vIG9uZUxpbmUg55qE5L+u5q2jCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHN3aXRjaCAocG9zKSB7CiAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6CiAgICAgICAgICAgICAgICBjYXNlICdiZWxvdyc6CiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyA9PSAnYmVsb3cnKQogICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnROb2RlLmFwcGVuZENoaWxkKGNyZWF0ZSgnYnInLCB7fSkpOwogICAgICAgICAgICAgICAgICAgIHBhcmVudE5vZGUuYXBwZW5kQ2hpbGQobGFiZWxFbCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIGlmIChwb3MgPT0gJ2Fib3ZlJykKICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoY3JlYXRlKCdicicsIHt9KSwgYmVmb3JlRWwpOwogICAgICAgICAgICAgICAgICAgIHBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGxhYmVsRWwsIGJlZm9yZUVsKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIHJldE5vZGUgPSBjcmVhdGUoJ2RpdicsIHsKICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogJ2NvbmZpZ192YXInLAogICAgICAgICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ18nICsgaWQgKyAnX3ZhcicsCiAgICAgICAgICAgICAgICB0aXRsZTogZmllbGQudGl0bGUgfHwgJycKICAgICAgICAgICAgfSksCiAgICAgICAgICAgIGZpcnN0UHJvcDsKCiAgICAgICAgLy8gUmV0cmlldmUgdGhlIGZpcnN0IHByb3AKICAgICAgICBmb3IgKHZhciBpIGluIGZpZWxkKSB7CiAgICAgICAgICAgIGZpcnN0UHJvcCA9IGk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgdmFyIGxhYmVsID0gZmllbGQubGFiZWwgJiYgdHlwZSAhPSAiYnV0dG9uIiA/CiAgICAgICAgICAgIGNyZWF0ZSgnbGFiZWwnLCB7CiAgICAgICAgICAgICAgICBpZDogY29uZmlnSWQgKyAnXycgKyBpZCArICdfZmllbGRfbGFiZWwnLAogICAgICAgICAgICAgICAgZm9yOiBjb25maWdJZCArICdfZmllbGRfJyArIGlkLAogICAgICAgICAgICAgICAgY2xhc3NOYW1lOiAnZmllbGRfbGFiZWwnCiAgICAgICAgICAgIH0sIGZpZWxkLmxhYmVsKSA6IG51bGw7CgogICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICBjYXNlICdzcGFuJzoKICAgICAgICAgICAgICAgIGxhYmVsID0gbnVsbDsKCiAgICAgICAgICAgICAgICB0aGlzLm5vZGUgPSBjcmVhdGUoJ3NwYW4nLCB7CiAgICAgICAgICAgICAgICAgICAgaW5uZXJIVE1MOiBmaWVsZC5sYWJlbCwKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdmaWVsZF9sYWJlbCcsCiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IGZpZWxkLnRpdGxlLAogICAgICAgICAgICAgICAgICAgIHN0eWxlOiBmaWVsZC5zdHlsZQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICByZXROb2RlID0gdGhpcy5ub2RlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3RleHRhcmVhJzoKICAgICAgICAgICAgICAgIHJldE5vZGUuYXBwZW5kQ2hpbGQoKHRoaXMubm9kZSA9IGNyZWF0ZSgndGV4dGFyZWEnLCB7CiAgICAgICAgICAgICAgICAgICAgaW5uZXJIVE1MOiB2YWx1ZSwKICAgICAgICAgICAgICAgICAgICBpZDogY29uZmlnSWQgKyAnX2ZpZWxkXycgKyBpZCwKICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdibG9jaycgKyAoZmllbGQuY2xhc3NOYW1lID8gKCIgIiArIGZpZWxkLmNsYXNzTmFtZSkgOiAnJyksCiAgICAgICAgICAgICAgICAgICAgY29sczogKGZpZWxkLmNvbHMgPyBmaWVsZC5jb2xzIDogMjApLAogICAgICAgICAgICAgICAgICAgIHJvd3M6IChmaWVsZC5yb3dzID8gZmllbGQucm93cyA6IDIpLAogICAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBmaWVsZC5wbGFjZWhvbGRlcgogICAgICAgICAgICAgICAgfSkpKTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdyYWRpbyc6CiAgICAgICAgICAgICAgICB2YXIgd3JhcCA9IGNyZWF0ZSgnZGl2JywgewogICAgICAgICAgICAgICAgICAgIGlkOiBjb25maWdJZCArICdfZmllbGRfJyArIGlkLAogICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZTogZmllbGQuY2xhc3NOYW1lCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMubm9kZSA9IHdyYXA7CgogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IG9wdGlvbnMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcmFkTGFiZWwgPSBjcmVhdGUoJ2xhYmVsJywgewogICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdyYWRpb19sYWJlbCcKICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb25zW2ldKTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHJhZCA9IHdyYXAuYXBwZW5kQ2hpbGQoY3JlYXRlKCdpbnB1dCcsIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IG9wdGlvbnNbaV0sCiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdyYWRpbycsCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGlkLAogICAgICAgICAgICAgICAgICAgICAgICBjaGVja2VkOiBvcHRpb25zW2ldID09IHZhbHVlCiAgICAgICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgICAgICB2YXIgcmFkTGFiZWxQb3MgPSBsYWJlbFBvcyAmJgogICAgICAgICAgICAgICAgICAgICAgICAobGFiZWxQb3MgPT0gJ2xlZnQnIHx8IGxhYmVsUG9zID09ICdyaWdodCcpID8KICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxQb3MgOiBmaXJzdFByb3AgPT0gJ29wdGlvbnMnID8gJ2xlZnQnIDogJ3JpZ2h0JzsKCiAgICAgICAgICAgICAgICAgICAgYWRkTGFiZWwocmFkTGFiZWxQb3MsIHJhZExhYmVsLCB3cmFwLCByYWQpOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJldE5vZGUuYXBwZW5kQ2hpbGQod3JhcCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnc2VsZWN0JzoKICAgICAgICAgICAgICAgIHZhciB3cmFwID0gY3JlYXRlKCdzZWxlY3QnLCB7CiAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbmZpZ0lkICsgJ19maWVsZF8nICsgaWQKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5ub2RlID0gd3JhcDsKCiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gb3B0aW9ucy5sZW5ndGg7IGkgPCBsZW47ICsraSkgewogICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb24gPSBvcHRpb25zW2ldOwogICAgICAgICAgICAgICAgICAgIHdyYXAuYXBwZW5kQ2hpbGQoY3JlYXRlKCdvcHRpb24nLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBvcHRpb24sCiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkOiBvcHRpb24gPT0gdmFsdWUKICAgICAgICAgICAgICAgICAgICB9LCBvcHRpb24pKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXROb2RlLmFwcGVuZENoaWxkKHdyYXApOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6IC8vIGZpZWxkcyB1c2luZyBpbnB1dCBlbGVtZW50cwogICAgICAgICAgICAgICAgdmFyIHByb3BzID0gewogICAgICAgICAgICAgICAgICAgIGlkOiBjb25maWdJZCArICdfZmllbGRfJyArIGlkLAogICAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHR5cGUgPT0gJ2J1dHRvbicgPyBmaWVsZC5sYWJlbCA6IHZhbHVlCiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzoKICAgICAgICAgICAgICAgICAgICAgICAgcHJvcHMuY2hlY2tlZCA9IHZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdidXR0b24nOgogICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5zaXplID0gZmllbGQuc2l6ZSA/IGZpZWxkLnNpemUgOiAyNTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpZWxkLnNjcmlwdCkgZmllbGQuY2xpY2sgPSBmaWVsZC5zY3JpcHQ7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaWVsZC5jbGljaykgcHJvcHMub25jbGljayA9IGZpZWxkLmNsaWNrOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdoaWRkZW4nOgogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgICAgICAvLyB0eXBlID0gdGV4dCwgaW50LCBvciBmbG9hdAogICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy50eXBlID0gJ3RleHQnOwogICAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5zaXplID0gZmllbGQuc2l6ZSA/IGZpZWxkLnNpemUgOiAyNTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXROb2RlLmFwcGVuZENoaWxkKCh0aGlzLm5vZGUgPSBjcmVhdGUoJ2lucHV0JywgcHJvcHMpKSk7CiAgICAgICAgfQoKICAgICAgICBpZiAobGFiZWwpIHsKICAgICAgICAgICAgLy8gSWYgdGhlIGxhYmVsIGlzIHBhc3NlZCBmaXJzdCwgaW5zZXJ0IGl0IGJlZm9yZSB0aGUgZmllbGQKICAgICAgICAgICAgLy8gZWxzZSBpbnNlcnQgaXQgYWZ0ZXIKICAgICAgICAgICAgaWYgKCFsYWJlbFBvcykKICAgICAgICAgICAgICAgIGxhYmVsUG9zID0gZmlyc3RQcm9wID09ICJsYWJlbCIgfHwgdHlwZSA9PSAicmFkaW8iID8KICAgICAgICAgICAgICAgICJsZWZ0IiA6ICJyaWdodCI7CgogICAgICAgICAgICBhZGRMYWJlbChsYWJlbFBvcywgbGFiZWwsIHJldE5vZGUpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJldE5vZGU7CiAgICB9LAoKICAgIHRvVmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgICB2YXIgbm9kZSA9IHRoaXMubm9kZSwKICAgICAgICAgICAgZmllbGQgPSB0aGlzLnNldHRpbmdzLAogICAgICAgICAgICB0eXBlID0gZmllbGQudHlwZSwKICAgICAgICAgICAgdW5zaWduZWQgPSBmYWxzZSwKICAgICAgICAgICAgcnZhbCA9IG51bGw7CgogICAgICAgIGlmICghbm9kZSkgcmV0dXJuIHJ2YWw7CgogICAgICAgIGlmICh0eXBlLmluZGV4T2YoJ3Vuc2lnbmVkICcpID09IDApIHsKICAgICAgICAgICAgdHlwZSA9IHR5cGUuc3Vic3RyaW5nKDkpOwogICAgICAgICAgICB1bnNpZ25lZCA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgY2FzZSAnY2hlY2tib3gnOgogICAgICAgICAgICAgICAgcnZhbCA9IG5vZGUuY2hlY2tlZDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdzZWxlY3QnOgogICAgICAgICAgICAgICAgcnZhbCA9IG5vZGVbbm9kZS5zZWxlY3RlZEluZGV4XS52YWx1ZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlICdyYWRpbyc6CiAgICAgICAgICAgICAgICB2YXIgcmFkaW9zID0gbm9kZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaW5wdXQnKTsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSByYWRpb3MubGVuZ3RoOyBpIDwgbGVuOyArK2kpCiAgICAgICAgICAgICAgICAgICAgaWYgKHJhZGlvc1tpXS5jaGVja2VkKQogICAgICAgICAgICAgICAgICAgICAgICBydmFsID0gcmFkaW9zW2ldLnZhbHVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2J1dHRvbic6CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAnaW50JzoKICAgICAgICAgICAgY2FzZSAnaW50ZWdlcic6CiAgICAgICAgICAgIGNhc2UgJ2Zsb2F0JzoKICAgICAgICAgICAgY2FzZSAnbnVtYmVyJzoKICAgICAgICAgICAgICAgIHZhciBudW0gPSBOdW1iZXIobm9kZS52YWx1ZSk7CiAgICAgICAgICAgICAgICB2YXIgd2FybiA9ICfovpPlhaXlrZfnrKYgIicgKyBmaWVsZC5sYWJlbCArICciIOimgeaxguW/hemhu+S4uicgKwogICAgICAgICAgICAgICAgICAgICh1bnNpZ25lZCA/ICcg5q2jICcgOiAnbiAnKSArICfmlbTmlbDlgLwnOwoKICAgICAgICAgICAgICAgIGlmIChpc05hTihudW0pIHx8ICh0eXBlLnN1YnN0cigwLCAzKSA9PSAnaW50JyAmJgogICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmNlaWwobnVtKSAhPSBNYXRoLmZsb29yKG51bSkpIHx8CiAgICAgICAgICAgICAgICAgICAgKHVuc2lnbmVkICYmIG51bSA8IDApKSB7CiAgICAgICAgICAgICAgICAgICAgYWxlcnQod2FybiArICcuJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9jaGVja051bWJlclJhbmdlKG51bSwgd2FybikpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICBydmFsID0gbnVtOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICBydmFsID0gbm9kZS52YWx1ZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHJ2YWw7IC8vIHZhbHVlIHJlYWQgc3VjY2Vzc2Z1bGx5CiAgICB9LAoKICAgIHJlc2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG5vZGUgPSB0aGlzLm5vZGUsCiAgICAgICAgICAgIGZpZWxkID0gdGhpcy5zZXR0aW5ncywKICAgICAgICAgICAgdHlwZSA9IGZpZWxkLnR5cGU7CgogICAgICAgIGlmICghbm9kZSkgcmV0dXJuOwoKICAgICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgICAgICAgY2FzZSAnY2hlY2tib3gnOgogICAgICAgICAgICAgICAgbm9kZS5jaGVja2VkID0gdGhpc1snZGVmYXVsdCddOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3NlbGVjdCc6CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbm9kZS5vcHRpb25zLmxlbmd0aDsgaSA8IGxlbjsgKytpKQogICAgICAgICAgICAgICAgICAgIGlmIChub2RlLm9wdGlvbnNbaV0udmFsdWUgPT0gdGhpc1snZGVmYXVsdCddKQogICAgICAgICAgICAgICAgICAgICAgICBub2RlLnNlbGVjdGVkSW5kZXggPSBpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ3JhZGlvJzoKICAgICAgICAgICAgICAgIHZhciByYWRpb3MgPSBub2RlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdpbnB1dCcpOwogICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IHJhZGlvcy5sZW5ndGg7IGkgPCBsZW47ICsraSkKICAgICAgICAgICAgICAgICAgICBpZiAocmFkaW9zW2ldLnZhbHVlID09IHRoaXNbJ2RlZmF1bHQnXSkKICAgICAgICAgICAgICAgICAgICAgICAgcmFkaW9zW2ldLmNoZWNrZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgJ2J1dHRvbic6CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgIG5vZGUudmFsdWUgPSB0aGlzWydkZWZhdWx0J107CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICB9LAoKICAgIHJlbW92ZTogZnVuY3Rpb24gKGVsKSB7CiAgICAgICAgR01fY29uZmlnU3RydWN0LnByb3RvdHlwZS5yZW1vdmUoZWwgfHwgdGhpcy53cmFwcGVyKTsKICAgICAgICB0aGlzLndyYXBwZXIgPSBudWxsOwogICAgICAgIHRoaXMubm9kZSA9IG51bGw7CiAgICB9LAoKICAgIHJlbG9hZDogZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB3cmFwcGVyID0gdGhpcy53cmFwcGVyOwogICAgICAgIGlmICh3cmFwcGVyKSB7CiAgICAgICAgICAgIHZhciBmaWVsZFBhcmVudCA9IHdyYXBwZXIucGFyZW50Tm9kZTsKICAgICAgICAgICAgZmllbGRQYXJlbnQuaW5zZXJ0QmVmb3JlKCh0aGlzLndyYXBwZXIgPSB0aGlzLnRvTm9kZSgpKSwgd3JhcHBlcik7CiAgICAgICAgICAgIHRoaXMucmVtb3ZlKHdyYXBwZXIpOwogICAgICAgIH0KICAgIH0sCgogICAgX2NoZWNrTnVtYmVyUmFuZ2U6IGZ1bmN0aW9uIChudW0sIHdhcm4pIHsKICAgICAgICB2YXIgZmllbGQgPSB0aGlzLnNldHRpbmdzOwogICAgICAgIGlmICh0eXBlb2YgZmllbGQubWluID09ICJudW1iZXIiICYmIG51bSA8IGZpZWxkLm1pbikgewogICAgICAgICAgICBhbGVydCh3YXJuICsgJyBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gJyArIGZpZWxkLm1pbiArICcuJyk7CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KCiAgICAgICAgaWYgKHR5cGVvZiBmaWVsZC5tYXggPT0gIm51bWJlciIgJiYgbnVtID4gZmllbGQubWF4KSB7CiAgICAgICAgICAgIGFsZXJ0KHdhcm4gKyAnIGxlc3MgdGhhbiBvciBlcXVhbCB0byAnICsgZmllbGQubWF4ICsgJy4nKTsKICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgfQp9OwoKLy8gQ3JlYXRlIGRlZmF1bHQgaW5zdGFuY2Ugb2YgR01fY29uZmlnCnZhciBHTV9jb25maWcgPSBuZXcgR01fY29uZmlnU3RydWN0KCk7CgovKndhaXRGb3JLZXlFbGVtZW50cyovCi8qLS0tIHdhaXRGb3JLZXlFbGVtZW50cygpOiBBIHV0aWxpdHkgZnVuY3Rpb24sIGZvciBHcmVhc2Vtb25rZXkgc2NyaXB0cywKIHRoYXQgZGV0ZWN0cyBhbmQgaGFuZGxlcyBBSkFYZWQgY29udGVudC4KCiBVc2FnZSBleGFtcGxlOgogd2FpdEZvcktleUVsZW1lbnRzICgiZGl2LmNvbW1lbnRzIiwgY29tbWVudENhbGxiYWNrRnVuY3Rpb24pOwoKIC8vLS0tIFBhZ2Utc3BlY2lmaWMgZnVuY3Rpb24gdG8gZG8gd2hhdCB3ZSB3YW50IHdoZW4gdGhlIG5vZGUgaXMgZm91bmQuCiBmdW5jdGlvbiBjb21tZW50Q2FsbGJhY2tGdW5jdGlvbiAoak5vZGUpIHsKICAgICBqTm9kZS50ZXh0ICgiVGhpcyBjb21tZW50IGNoYW5nZWQgYnkgd2FpdEZvcktleUVsZW1lbnRzKCkuIik7CiB9CgogSU1QT1JUQU5UOiBUaGlzIGZ1bmN0aW9uIHJlcXVpcmVzIHlvdXIgc2NyaXB0IHRvIGhhdmUgbG9hZGVkIGpRdWVyeS4KICovCgpmdW5jdGlvbiB3YWl0Rm9yS2V5RWxlbWVudHMoCiAgICBzZWxlY3RvclR4dCwKICAgIC8qIFJlcXVpcmVkOiBUaGUgalF1ZXJ5IHNlbGVjdG9yIHN0cmluZyB0aGF0CiAgICAgICBzcGVjaWZpZXMgdGhlIGRlc2lyZWQgZWxlbWVudChzKS4KICAgICAgICovCiAgICBhY3Rpb25GdW5jdGlvbiwKICAgIC8qIFJlcXVpcmVkOiBUaGUgY29kZSB0byBydW4gd2hlbiBlbGVtZW50cyBhcmUKICAgICAgIGZvdW5kLiBJdCBpcyBwYXNzZWQgYSBqTm9kZSB0byB0aGUgbWF0Y2hlZAogICAgICAgZWxlbWVudC4KICAgICAgICovCiAgICBiV2FpdE9uY2UsCiAgICAvKiBPcHRpb25hbDogSWYgZmFsc2UsIHdpbGwgY29udGludWUgdG8gc2NhbiBmb3IKICAgICAgIG5ldyBlbGVtZW50cyBldmVuIGFmdGVyIHRoZSBmaXJzdCBtYXRjaCBpcwogICAgICAgZm91bmQuCiAgICAgICAqLwogICAgaWZyYW1lU2VsZWN0b3IKICAgIC8qIE9wdGlvbmFsOiBJZiBzZXQsIGlkZW50aWZpZXMgdGhlIGlmcmFtZSB0bwogICAgICAgc2VhcmNoLgogICAgICAgKi8KKSB7CiAgICB2YXIgdGFyZ2V0Tm9kZXMsIGJ0YXJnZXRzRm91bmQ7CgogICAgaWYgKHR5cGVvZiBpZnJhbWVTZWxlY3RvciA9PSAidW5kZWZpbmVkIikKICAgICAgICB0YXJnZXROb2RlcyA9ICQoc2VsZWN0b3JUeHQpOwogICAgZWxzZQogICAgICAgIHRhcmdldE5vZGVzID0gJChpZnJhbWVTZWxlY3RvcikuY29udGVudHMoKQogICAgICAgIC5maW5kKHNlbGVjdG9yVHh0KTsKCiAgICBpZiAodGFyZ2V0Tm9kZXMgJiYgdGFyZ2V0Tm9kZXMubGVuZ3RoID4gMCkgewogICAgICAgIGJ0YXJnZXRzRm91bmQgPSB0cnVlOwogICAgICAgIC8qLS0tIEZvdW5kIHRhcmdldCBub2RlKHMpLiBHbyB0aHJvdWdoIGVhY2ggYW5kIGFjdCBpZiB0aGV5CiAgICAgICAgYXJlIG5ldy4KICAgICAgICAqLwogICAgICAgIHRhcmdldE5vZGVzLmVhY2goZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgalRoaXMgPSAkKHRoaXMpOwogICAgICAgICAgICB2YXIgYWxyZWFkeUZvdW5kID0galRoaXMuZGF0YSgnYWxyZWFkeUZvdW5kJykgfHwgZmFsc2U7CgogICAgICAgICAgICBpZiAoIWFscmVhZHlGb3VuZCkgewogICAgICAgICAgICAgICAgLy8tLS0gQ2FsbCB0aGUgcGF5bG9hZCBmdW5jdGlvbi4KICAgICAgICAgICAgICAgIHZhciBjYW5jZWxGb3VuZCA9IGFjdGlvbkZ1bmN0aW9uKGpUaGlzKTsKICAgICAgICAgICAgICAgIGlmIChjYW5jZWxGb3VuZCkKICAgICAgICAgICAgICAgICAgICBidGFyZ2V0c0ZvdW5kID0gZmFsc2U7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgalRoaXMuZGF0YSgnYWxyZWFkeUZvdW5kJywgdHJ1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgICAgYnRhcmdldHNGb3VuZCA9IGZhbHNlOwogICAgfQoKICAgIC8vLS0tIEdldCB0aGUgdGltZXItY29udHJvbCB2YXJpYWJsZSBmb3IgdGhpcyBzZWxlY3Rvci4KICAgIHZhciBjb250cm9sT2JqID0gd2FpdEZvcktleUVsZW1lbnRzLmNvbnRyb2xPYmogfHwge307CiAgICB2YXIgY29udHJvbEtleSA9IHNlbGVjdG9yVHh0LnJlcGxhY2UoL1teXHddL2csICJfIik7CiAgICB2YXIgdGltZUNvbnRyb2wgPSBjb250cm9sT2JqW2NvbnRyb2xLZXldOwoKICAgIC8vLS0tIE5vdyBzZXQgb3IgY2xlYXIgdGhlIHRpbWVyIGFzIGFwcHJvcHJpYXRlLgogICAgaWYgKGJ0YXJnZXRzRm91bmQgJiYgYldhaXRPbmNlICYmIHRpbWVDb250cm9sKSB7CiAgICAgICAgLy8tLS0gVGhlIG9ubHkgY29uZGl0aW9uIHdoZXJlIHdlIG5lZWQgdG8gY2xlYXIgdGhlIHRpbWVyLgogICAgICAgIGNsZWFySW50ZXJ2YWwodGltZUNvbnRyb2wpOwogICAgICAgIGRlbGV0ZSBjb250cm9sT2JqW2NvbnRyb2xLZXldOwogICAgfSBlbHNlIHsKICAgICAgICAvLy0tLSBTZXQgYSB0aW1lciwgaWYgbmVlZGVkLgogICAgICAgIGlmICghdGltZUNvbnRyb2wpIHsKICAgICAgICAgICAgdGltZUNvbnRyb2wgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgd2FpdEZvcktleUVsZW1lbnRzKHNlbGVjdG9yVHh0LAogICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25GdW5jdGlvbiwKICAgICAgICAgICAgICAgICAgICAgICAgYldhaXRPbmNlLAogICAgICAgICAgICAgICAgICAgICAgICBpZnJhbWVTZWxlY3RvcgogICAgICAgICAgICAgICAgICAgICk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgMzAwCiAgICAgICAgICAgICk7CiAgICAgICAgICAgIGNvbnRyb2xPYmpbY29udHJvbEtleV0gPSB0aW1lQ29udHJvbDsKICAgICAgICB9CiAgICB9CiAgICB3YWl0Rm9yS2V5RWxlbWVudHMuY29udHJvbE9iaiA9IGNvbnRyb2xPYmo7Cn0KCgoKKGZ1bmN0aW9uICgpIHsKICAgICd1c2Ugc3RyaWN0JzsKCiAgICAvL+eJiOacrOS/oeaBrwogICAgY29uc3QgVElQUyA9IHsKICAgICAgICBDdXJyZW50VmVyc2lvbjogIjE0My4yMDIyLjA0MDIuMSIsCiAgICAgICAgTGFzdFVwZGF0ZURhdGU6ICIyMDIyLjA0LjAyIiwKICAgICAgICBWZXJzaW9uVGlwczogIjExNei9rOWtmOWKqeaJi3Vp5LyY5YyW54mIIHYzLjUiLAogICAgICAgIFVwZGF0ZVVybDogImh0dHBzOi8vZ2lzdC5naXRodWIuY29tL05lcnZlcjRFdmVyLzk1MzQ0N2M5ZWNkMzMwZmZjMDg2MWQ0Y2JiODM5MzY5IiwKICAgICAgICBTaGExRmlsZUlucHV0RGV0YWlsczogIiIsCiAgICB9OwoKICAgIGNvbnN0IFdPUktTRVRUSU5HUyA9IHsKICAgICAgICBXb3JraW5nSXRlbXNOdW1iZXI6IDQsIC8v5ZCM5pe25omn6KGM5Lu75Yqh5pWwCiAgICAgICAgU2xlZXBMaXR0bGVUaW1lOiA1MDAsIC8v55+t5pqC5LyR55ygLOavq+enkizmmoLml7blnKjovazlrZjkuK3kvb/nlKgKICAgICAgICBTbGVlcE1vcmVUaW1lOiAxMDAwLCAvL+mVv+aXtuS8keecoCzmr6vnp5Is5pqC5pe25Zyo5o+Q5Y+W5Lit5L2/55SoCiAgICAgICAgU2xlZXBNdWNoTW9yZVRpbWU6IDgwMDAsIC8v6LaF6ZW/5LyR55ygLOaaguaXtuacquS9v+eUqAogICAgICAgIEFOdW1iZXI6IDI3LCAvL+maj+acuuaVsCzmmoLml7bmnKrkvb/nlKgKICAgIH07CgogICAgR01fYWRkU3R5bGUoYAogICAgQGtleWZyYW1lcyBodWUgewogICAgICAgIGZyb20gewogICAgICAgICAgICBmaWx0ZXI6IGh1ZS1yb3RhdGUoMCk7CiAgICAgICAgfQoKICAgICAgICB0byB7CiAgICAgICAgICAgIGZpbHRlcjogaHVlLXJvdGF0ZSgzNjBkZWcpOwogICAgICAgIH0KICAgIH0KCiAgICAucmFpbmJvdy10ZXh0IHsKICAgICAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICAgICAgY29sb3I6IHJlZDsKICAgICAgICBhbmltYXRpb246IGh1ZSA2cyBsaW5lYXIgaW5maW5pdGU7CiAgICAgICAgYmFja2dyb3VuZC1pbWFnZTogbGluZWFyLWdyYWRpZW50KHRvIHJpZ2h0IGJvdHRvbSwgcmdiKDI1NSwwLDApLCByZ2IoMjU1LDI1NSwwKSxyZ2IoMjU1LDAsMjU1KSk7CiAgICAgICAgLXdlYmtpdC1iYWNrZ3JvdW5kLWNsaXA6IHRleHQ7CiAgICB9CgogICAgICAgIC5teTExNUluZm97CiAgICAgICAgICAgIGNvbG9yOnJlZAogICAgICAgIH0KICAgICAgICAuYnRuSW5HcmlkewogICAgICAgICAgICBoZWlnaHQ6MjBweDsKICAgICAgICAgICAgd2lkdGg6MjBweDsKICAgICAgICAgICAgbWFyZ2luLWxlZnQ6LTIycHg7CiAgICAgICAgICAgIG1hcmdpbi10b3A6MzZweDsKICAgICAgICAgICAgYm9yZGVyOjBweDsKICAgICAgICAgICAgYm9yZGVyLWNvbG9yOnRyYW5zcGFyZW50OwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOnRyYW5zcGFyZW50OwogICAgICAgIH0KCiAgICAgICAgLmJ0bkluR3JpZCBpewogICAgICAgICAgICBtYXJnaW46M3B4IC0zcHgKICAgICAgICB9CgogICAgICAgIGxpOmhvdmVyIC5idG5JbkdyaWR7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IzI3NzdGOCAhaW1wb3J0YW50CiAgICAgICAgfQoKCgogICAgICAgIC8qIFN0eWxlIFRoZSBEcm9wZG93biBCdXR0b24gKi8KICAgICAgICAubXkxMTVEcm9wYnRuIHsKICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyNzc3Rjg7CiAgICAgICAgICBjb2xvcjogd2hpdGU7CiAgICAgICAgICBmb250LXNpemU6IDE2cHg7CiAgICAgICAgICBib3JkZXI6IG5vbmU7CiAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7CiAgICAgICAgfQoKICAgICAgICAvKiBUaGUgY29udGFpbmVyIDxkaXY+IC0gbmVlZGVkIHRvIHBvc2l0aW9uIHRoZSBkcm9wZG93biBjb250ZW50ICovCiAgICAgICAgLm15MTE1RHJvcGRvd24gewogICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgIH0KCiAgICAgICAgLyogRHJvcGRvd24gQ29udGVudCAoSGlkZGVuIGJ5IERlZmF1bHQpICovCiAgICAgICAgLm15MTE1RHJvcGRvd24tY29udGVudCB7CiAgICAgICAgICBkaXNwbGF5OiBub25lOwogICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsKICAgICAgICAgIG1pbi13aWR0aDogMjMwcHg7CiAgICAgICAgICBib3gtc2hhZG93OiAwcHggOHB4IDE2cHggMHB4IHJnYmEoMCwwLDAsMC4yKTsKICAgICAgICAgIHotaW5kZXg6IDE7CiAgICAgICAgICBtYXJnaW4tdG9wOiAzMnB4OwogICAgICAgIH0KCiAgICAgICAgLyogTGlua3MgaW5zaWRlIHRoZSBkcm9wZG93biAqLwogICAgICAgIC5teTExNURyb3Bkb3duLWNvbnRlbnQgYSB7CiAgICAgICAgICBjb2xvcjogYmxhY2s7CiAgICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7CiAgICAgICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgICAgICAgICBkaXNwbGF5OiBibG9jazsKICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgICAgIG1hcmdpbjo0cHg7CiAgICAgICAgfQoKICAgICAgICAvKiBDaGFuZ2UgY29sb3Igb2YgZHJvcGRvd24gbGlua3Mgb24gaG92ZXIgKi8KICAgICAgICAubXkxMTVEcm9wZG93bi1jb250ZW50IGE6aG92ZXJ7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMyNzc3Rjg7CiAgICAgICAgICAgIGNvbG9yOndoaXRlOwogICAgICAgIH0KCiAgICAgICAgLyogU2hvdyB0aGUgZHJvcGRvd24gbWVudSBvbiBob3ZlciAqLwogICAgICAgIC5teTExNURyb3Bkb3duOmhvdmVyIC5teTExNURyb3Bkb3duLWNvbnRlbnQgewogICAgICAgICAgZGlzcGxheTogYmxvY2s7CiAgICAgICAgfQoKICAgICAgICAvKiBDaGFuZ2UgdGhlIGJhY2tncm91bmQgY29sb3Igb2YgdGhlIGRyb3Bkb3duIGJ1dHRvbiB3aGVuIHRoZSBkcm9wZG93biBjb250ZW50IGlzIHNob3duICovCiAgICAgICAgLm15MTE1RHJvcGRvd246aG92ZXIgLm15MTE1RHJvcGJ0biB7CiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjM2U4ZTQxOwogICAgICAgIH0KCiAgICBgKTsKCiAgICBmdW5jdGlvbiBnZXRFbnZpcm9tZW50SW5mbygpIHsKICAgICAgICByZXR1cm4gYAogICAgICAgW2dtXToke0dNX2luZm8uc2NyaXB0SGFuZGxlcn0KICAgICAgIFtnbVZlcnNpb25dOiR7R01faW5mby52ZXJzaW9ufQogICAgICAgW3VhXToke25hdmlnYXRvci51c2VyQWdlbnR9CiAgICAgICBbdmVyc2lvbl06JHtUSVBTLkN1cnJlbnRWZXJzaW9ufQogICAgICAgYDsKICAgIH0KCiAgICBmdW5jdGlvbiBjb25maWcoKSB7CiAgICAgICAgY29uc29sZS5sb2coIuiEmuacrOS4jueOr+Wig+S/oeaBr++8mu+8iOWmguaenOaKpWJ1Z++8jOivt+mZhOW4puS4iuWmguS4i+S/oeaBr++8iSIpCiAgICAgICAgbGV0IGVudiA9IGdldEVudmlyb21lbnRJbmZvKCk7CiAgICAgICAgY29uc29sZS5sb2coZW52KTsKCgoKICAgICAgICB2YXIgd2luZG93Q3NzID0gJyNDZmc0bmUgLm5hdi10YWJzIHttYXJnaW46IDIwIDJ9ICNDZmc0bmUgLmNvbmZpZ192YXIgdGV4dGFyZWF7d2lkdGg6IDMxMHB4OyBoZWlnaHQ6IDUwcHg7fSAjQ2ZnNG5lIC5pbmxpbmUge3BhZGRpbmctYm90dG9tOjBweDt9ICNDZmc0bmUgLmNvbmZpZ19oZWFkZXIgYTpob3ZlciB7Y29sb3I6IzFlOTBmZjt9ICNDZmc0bmUgLmNvbmZpZ192YXIge21hcmdpbi1sZWZ0OiA2JTttYXJnaW4tcmlnaHQ6IDYlO30gI0NmZzRuZSBpbnB1dFt0eXBlPSJjaGVja2JveCJdIHttYXJnaW46IDNweCAzcHggM3B4IDBweDt9ICNDZmc0bmUgaW5wdXRbdHlwZT0idGV4dCJdIHt3aWR0aDogNjBweDt9ICNDZmc0bmUge2JhY2tncm91bmQtY29sb3I6IGxpZ2h0Z3JheTt9ICNDZmc0bmUgLnJlc2V0X2hvbGRlciB7ZmxvYXQ6IGxlZnQ7IHBvc2l0aW9uOiByZWxhdGl2ZTsgYm90dG9tOiAtMWVtO30gI0NmZzRuZSAuc2F2ZWNsb3NlX2J1dHRvbnMge21hcmdpbjogLjdlbTt9ICNDZmc0bmUgLnNlY3Rpb25fZGVzYyB7Zm9udC1zaXplOiAxMHB0O30nOwoKICAgICAgICBHTV9yZWdpc3Rlck1lbnVDb21tYW5kKCforr7nva4nLCBvcGVuY2ZnKTsKCiAgICAgICAgZnVuY3Rpb24gb3BlbmNmZygpIHsKICAgICAgICAgICAgR01fY29uZmlnLm9wZW4oKTsKICAgICAgICB9OwoKICAgICAgICBHTV9jb25maWcuaW5pdCh7CiAgICAgICAgICAgIGlkOiAnQ2ZnNG5lJywKICAgICAgICAgICAgdGl0bGU6IEdNX2NvbmZpZy5jcmVhdGUoJ2EnLCB7CiAgICAgICAgICAgICAgICBocmVmOiBUSVBTLlVwZGF0ZVVybCwKICAgICAgICAgICAgICAgIHRhcmdldDogJ19ibGFuaycsCiAgICAgICAgICAgICAgICBjbGFzc05hbWU6ICdzZXRUaXRsZScsCiAgICAgICAgICAgICAgICB0ZXh0Q29udGVudDogYCR7VElQUy5WZXJzaW9uVGlwc33orr7nva5gLAogICAgICAgICAgICAgICAgdGl0bGU6IGDkvZzogIXvvJpOZXZlcjRFdmVyIOeJiOacrO+8miR7VElQUy5DdXJyZW50VmVyc2lvbn3ngrnlh7vorr/pl67kuLvpobVgCiAgICAgICAgICAgIH0pLAogICAgICAgICAgICBpc1RhYnM6IHRydWUsCiAgICAgICAgICAgIHNraW46ICd0YWInLAogICAgICAgICAgICBjc3M6IHdpbmRvd0NzcywKICAgICAgICAgICAgZnJhbWVTdHlsZTogewogICAgICAgICAgICAgICAgaGVpZ2h0OiAnNDkwcHgnLAogICAgICAgICAgICAgICAgd2lkdGg6ICc3NTBweCcsCiAgICAgICAgICAgICAgICB6SW5kZXg6ICcyMTQ3NDgzNjQ4JywKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmllbGRzOiB7CiAgICAgICAgICAgICAgICBjcmVhdGVSb290Rm9sZGVyRGVmYXVsdFZhbHVlOiB7CiAgICAgICAgICAgICAgICAgICAgc2VjdGlvbjogWycnLCAn6L2s5a2Y5Yqp5omL5LiA5Lqb5Yqf6IO96K6+572uLOWPkeWMheWPguaVsOaaguacquW8gOaUvu+8jOaVrOivt+acn+W+he+8gSddLAogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAn4oCcc2hhMei9rOWtmOaXtu+8jOW8uuWItuWcqOS/neWtmOWkhOaWsOW7uuagueebruW9leKAnei/memhuem7mOiupOmAieS4rScsCiAgICAgICAgICAgICAgICAgICAgbGFiZWxQb3M6ICdyaWdodCcsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB0cnVlLAogICAgICAgICAgICAgICAgfSwKCiAgICAgICAgICAgICAgICBjcmVhdGVDaGlsZEZvbGRlclZpc2libGU6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ+aYvuekuuKAnHNoYTHovazlrZjml7bvvIzkuI3liJvlu7rku7vkvZXlrZDnm67lvZXigJ3pgInpobnvvJvkuI3mmL7npLrliJnlvLrliLbliJvlu7rlrZDnm67lvZUnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsUG9zOiAncmlnaHQnLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgY3JlYXRlSXRlbVNoYTE6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ+WIl+ihqOaooeW8j+S4i++8muaCrOa1ruadoeaYvuekuuKAneiOt+WPlnNoYTHpk77mjqXigJwnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsUG9zOiAncmlnaHQnLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjcmVhdGVJdGVtU2hhMUluVGh1bWI6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ+e8qeeVpeWbvuaooeW8j+S4i++8muaYvuekuuKAneiOt+WPlnNoYTHpk77mjqXigJwnLAogICAgICAgICAgICAgICAgICAgIGxhYmVsUG9zOiAncmlnaHQnLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdjaGVja2JveCcsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogdHJ1ZSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBhZHZhbmNlZFJlbmFtZTogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAn5Zyo55uu5b2V55qE5oKs5rWu5bel5YW35p2h5aSE5pi+56S64oCc5Y676Zmk5YiG6ZqU56ym4oCd6YCJ6aG5JywKICAgICAgICAgICAgICAgICAgICBsYWJlbFBvczogJ3JpZ2h0JywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnY2hlY2tib3gnLAogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGF1dG9Vc2VTZXBhcmF0b3I6IHsKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ+iHquWKqOe7meaWh+S7tuWQjea3u+WKoOWIhumalOespui/m+ihjOS4iuS8oO+8jOS7pemYsuaWh+S7tuWQjei/neinhCcsCiAgICAgICAgICAgICAgICAgICAgbGFiZWxQb3M6ICdyaWdodCcsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB0cnVlLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIGF1dG9Vc2VTZXBhcmF0b3JUb1JlbmFtZTogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAn5LiK5Lyg57uT5p2fLOiHquWKqOe7meaWh+S7tuWQjeWOu+mZpOWIhumalOespu+8jOi/mOWOn+WOn+aWh+S7tuWQjScsCiAgICAgICAgICAgICAgICAgICAgbGFiZWxQb3M6ICdyaWdodCcsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2NoZWNrYm94JywKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiB0cnVlLAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHNlcGFyYXRvcjogewogICAgICAgICAgICAgICAgICAgIGxhYmVsOiAn5YiG6ZqU56ym5pa55qGIKOaOqOiNkOeUn+WDu+Wtl++8m+WmguaenOWIhumalOespuWkseaViCzor7foh6rooYzkv67mlLkp77yaJywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAndGV4dCcsCiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDogJ+iuiicKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB1cGxvYWROdW1iZXI6IHsKICAgICAgICAgICAgICAgICAgICAvL3NlY3Rpb246IFsn5pe26Ze05Y+C5pWw6K6+572uJywgJ+azqOaEj++8muWPguaVsOiuvue9rui/h+W/q++8jOS8muW8lei1tzExNeacjeWKoeWZqOaXoOWTjeW6lO+8jOS4uueos+Wumui/kOihjOWPguaVsOacquWQr+eUqO+8gSddLAogICAgICAgICAgICAgICAgICAgIC8vbGFiZWw6ICfovazlrZjlkIzml7blt6XkvZzku7vliqHmlbA6JywKICAgICAgICAgICAgICAgICAgICBsYWJlbFBvczogJ2xlZnQnLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdoaWRkZW4nLAogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICc0JywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICB1cGxvYWRTbGVlcFRpbWU6IHsKICAgICAgICAgICAgICAgICAgICAvL2xhYmVsOiAn6L2s5a2Y6Ze06ZqU5pe26Ze077yI5q+r56eS77yJOicsCiAgICAgICAgICAgICAgICAgICAgbGFiZWxQb3M6ICdsZWZ0JywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaGlkZGVuJywKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAnNTAwJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkb3dubG9hZE51bWJlcjogewogICAgICAgICAgICAgICAgICAgIC8vbGFiZWw6ICfmj5Dlj5blkIzml7blt6XkvZzku7vliqHmlbA6JywKICAgICAgICAgICAgICAgICAgICBsYWJlbFBvczogJ2xlZnQnLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdoaWRkZW4nLAogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICc0JywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBkb3dubG9hZFNsZWVwVGltZTogewogICAgICAgICAgICAgICAgICAgIC8vbGFiZWw6ICfmj5Dlj5bpl7TpmpTml7bpl7TvvIjmr6vnp5LvvIk6JywKICAgICAgICAgICAgICAgICAgICBsYWJlbFBvczogJ2xlZnQnLAogICAgICAgICAgICAgICAgICAgIHR5cGU6ICdoaWRkZW4nLAogICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6ICcxMzAwJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjcmVhdGVGb2xkZXJTbGVlcFRpbWU6IHsKICAgICAgICAgICAgICAgICAgICAvL2xhYmVsOiAn55uu5b2V5Yib5bu66Ze06ZqU5pe26Ze077yI5q+r56eS77yJOicsCiAgICAgICAgICAgICAgICAgICAgbGFiZWxQb3M6ICdsZWZ0JywKICAgICAgICAgICAgICAgICAgICB0eXBlOiAnaGlkZGVuJywKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OiAnMzAwJywKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBjaGVja1VwZGF0ZTogewogICAgICAgICAgICAgICAgICAgIC8vc2VjdGlvbjogWyfluK7liqkm5pu05pawJuWPjemmiCcsICfluLjop4HplJnor6/ku6Xlj4rlr7nmnKzohJrmnKzov5vooYzmm7TmlrDmo4Dmn6XkuI5idWflj43ppognXSwKICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ+WJjeW+gGdpdGh1YuS4u+mhtScsCiAgICAgICAgICAgICAgICAgICAgbGFiZWxQb3M6ICdyaWdodCcsCiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2J1dHRvbicsCiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oVElQUy5VcGRhdGVVcmwsICJfYmxhbmsiKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9LAoKCiAgICAgICAgICAgIH0sCgogICAgICAgICAgICBldmVudHM6IHsKICAgICAgICAgICAgICAgIHNhdmU6IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICBHTV9jb25maWcuY2xvc2UoKTsKICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwKICAgICAgICB9KTsKCiAgICAgICAgR01fcmVnaXN0ZXJNZW51Q29tbWFuZCgn6ISa5pys5LiO546v5aKD5L+h5oGvJywganNJbmZvKTsKCiAgICAgICAgZnVuY3Rpb24ganNJbmZvKCkgewogICAgICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5KU0lORk8sIGVudikpCiAgICAgICAgfQogICAgfTsKICAgIGNvbmZpZygpOwoKICAgIHZhciBjdXJyZW50Q29uZmlnID0gewogICAgICAgIGNyZWF0ZVJvb3RGb2xkZXJEZWZhdWx0VmFsdWU6ICdjcmVhdGVSb290Rm9sZGVyRGVmYXVsdFZhbHVlJywKICAgICAgICBjcmVhdGVDaGlsZEZvbGRlclZpc2libGU6ICdjcmVhdGVDaGlsZEZvbGRlclZpc2libGUnLAogICAgICAgIGFkdmFuY2VkUmVuYW1lOiAnYWR2YW5jZWRSZW5hbWUnLAogICAgICAgIGF1dG9Vc2VTZXBhcmF0b3I6ICdhdXRvVXNlU2VwYXJhdG9yJywKICAgICAgICBhdXRvVXNlU2VwYXJhdG9yVG9SZW5hbWU6ICdhdXRvVXNlU2VwYXJhdG9yVG9SZW5hbWUnLAogICAgICAgIHNlcGFyYXRvcjogJ3NlcGFyYXRvcicsCiAgICAgICAgdXBsb2FkTnVtYmVyOiAndXBsb2FkTnVtYmVyJywKICAgICAgICB1cGxvYWRTbGVlcFRpbWU6ICd1cGxvYWRTbGVlcFRpbWUnLAogICAgICAgIGRvd25sb2FkTnVtYmVyOiAnZG93bmxvYWROdW1iZXInLAogICAgICAgIGRvd25sb2FkU2xlZXBUaW1lOiAnZG93bmxvYWRTbGVlcFRpbWUnLAogICAgICAgIGNyZWF0ZUZvbGRlclNsZWVwVGltZTogJ2NyZWF0ZUZvbGRlclNsZWVwVGltZScsCiAgICAgICAgY3JlYXRlSXRlbVNoYTE6ICdjcmVhdGVJdGVtU2hhMScsCiAgICAgICAgY3JlYXRlSXRlbVNoYTFJblRodW1iOiAnY3JlYXRlSXRlbVNoYTFJblRodW1iJwoKICAgIH0KCgogICAgdmFyIG9mZmxpbmVUYXNrQnV0dG9uID0gYAogICAgPGRpdiBjbGFzcz0ibXkxMTVEcm9wZG93biIgaWQ9Im15MTE1RHJvcGRvd24iPgogICAgPGRpdiBjbGFzcz0ibXkxMTVEcm9wYnRuIj4KICAgIDxhIGhyZWY9ImphdmFzY3JpcHQ6OyIgIGNsYXNzPSJidXR0b24gYnRuLWxpbmUgYnRuLXVwbG9hZCIgbWVudT0ib2ZmbGluZV90YXNrIj48aSBjbGFzcz0iaWNvbi1vcGVyYXRlIGlmby1saW5rdGFzayI+PC9pPjxzcGFuPumTvuaOpeS4jnNoYTHovazlrZjku7vliqE8L3NwYW4+PGVtIHN0eWxlPSJkaXNwbGF5Om5vbmU7IiBjbGFzcz0ibnVtLWRvdCI+PC9lbT48L2E+CiAgICA8L2Rpdj4KICAgIDxkaXYgY2xhc3M9Im15MTE1RHJvcGRvd24tY29udGVudCIgc3R5bGU9ImRpc3BsYXk6bm9uZTsiPgogICAgICA8YSBpZD0ibXkxMTVDb250aW51ZWREb3dubG9hZCI+IOe7p+e7reOAkOaPkOWPluOAkeaIluiAheOAkOi9rOWtmOOAkTwvYT4KICAgIDwvZGl2PgogIDwvZGl2PgogICAgYDsKCiAgICBpZiAoISQoIiNteTExNURyb3Bkb3duIikubGVuZ3RoID4gMCkgewoKICAgICAgICAkKCIubGVmdC10dmYiKS5lcSgwKS5hcHBlbmQob2ZmbGluZVRhc2tCdXR0b24pOwogICAgICAgICQoIiNteTExNUNvbnRpbnVlZERvd25sb2FkIikuY2xpY2soZSA9PiB7CiAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLkJFR0lONENPTlRJTlVFVEFTSywgIiIpKTsKICAgICAgICB9KTsKICAgIH0KCgogICAgd2luZG93LmNvb2tpZSA9IGRvY3VtZW50LmNvb2tpZQoKCiAgICAvL3RvZG865re75Yqg55qE5Yqf6IO95YWl5Y+jCiAgICAvL+WIl+ihqOaooeW8j+S4i++8jOmhueebruaCrOW3peWFt+adoQogICAgd2FpdEZvcktleUVsZW1lbnRzKCJkaXYuZmlsZS1vcHIiLCBBZGRTaGFyZVNIQTFCdG4pOwogICAgLy/mt7vliqDku7vliqHnmoTlvLnnqpcKICAgIHdhaXRGb3JLZXlFbGVtZW50cygiZGl2LmRpYWxvZy1ib3R0b20iLCBBZGREb3dubG9hZFNoYTFCdG4pOwogICAgLy/mkJzntKLkuIvnmoTnirbmgIEKICAgIHdhaXRGb3JLZXlFbGVtZW50cygiZGl2LmxzdGMtc2VhcmNoIiwgQWRkU2hhcmVCdXR0b25Gb3JTZWFyY2hJdGVtKTsKICAgIC8v57yp55Wl5Zu+5qih5byP5LiLCiAgICB3YWl0Rm9yS2V5RWxlbWVudHMoYCNqc19jYW50YWluX2JveCAubGlzdC10aHVtYiBsaVtyZWw9Iml0ZW0iXWAsIEFkZENlYXRlU2hhMUJ1dHRvbkluR3JpZCkKICAgIC8v5paH5Lu26Lev5b6E5peB6L6555qE4oCd6YCJ5Lit6I635Y+W6aG5c2hhMeKAnAogICAgd2FpdEZvcktleUVsZW1lbnRzKCdkaXYjanNfdG9wX2hlYWRlcl9maWxlX3BhdGhfYm94JywgQ3JlYXRlU2hhMUJ1dHRvbkZvclNlbGVjdGVkSXRlbXMpOwogICAgLy/pmpDol4/miKrlm77kuK3nmoR1aWQKICAgIHdhaXRGb3JLZXlFbGVtZW50cygnZGl2W2NsYXNzXj0iZnAtIl0nLCBIYW5kbGVVaWREaXYpOwoKICAgIGZ1bmN0aW9uIEhhbmRsZVVpZERpdihub2RlKSB7CiAgICAgICAgbm9kZS5oaWRlKCk7CiAgICAgICAgY29uc29sZS5sb2coInNldCB1aWRkaXYiKTsKICAgIH0KCiAgICAvLyNyZWdpb24gMjAyMDEyMzDmlrDnmoTmj5Dlj5ZhcGnnm7jlhbMKCgoKCgogICAgZnVuY3Rpb24gUG9zdERhdGEoZGljdCkgewogICAgICAgIHZhciBrLCB0bXAsIHY7CiAgICAgICAgdG1wID0gW107CiAgICAgICAgZm9yIChrIGluIGRpY3QpIHsKICAgICAgICAgICAgdiA9IGRpY3Rba107CiAgICAgICAgICAgIHRtcC5wdXNoKGsgKyAiPSIgKyB2KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRtcC5qb2luKCcmJyk7CiAgICB9OwoKICAgIGZ1bmN0aW9uIFVybERhdGEoZGljdCkgewogICAgICAgIHZhciBrLCB0bXAsIHY7CiAgICAgICAgdG1wID0gW107CiAgICAgICAgZm9yIChrIGluIGRpY3QpIHsKICAgICAgICAgICAgdiA9IGRpY3Rba107CiAgICAgICAgICAgIHRtcC5wdXNoKChlbmNvZGVVUklDb21wb25lbnQoaykpICsgIj0iICsgKGVuY29kZVVSSUNvbXBvbmVudCh2KSkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdG1wLmpvaW4oJyYnKTsKICAgIH07CgogICAgZnVuY3Rpb24gR2V0U2lnKHVzZXJpZCwgZmlsZWlkLCB0YXJnZXQsIHVzZXJrZXkpIHsKICAgICAgICB2YXIgc2hhMSwgdG1wOwogICAgICAgIHNoYTEgPSBuZXcganNTSEEoJ1NIQS0xJywgJ1RFWFQnKTsKICAgICAgICBzaGExLnVwZGF0ZSgiIiArIHVzZXJpZCArIGZpbGVpZCArIGZpbGVpZCArIHRhcmdldCArICIwIik7CiAgICAgICAgdG1wID0gc2hhMS5nZXRIYXNoKCdIRVgnKTsKICAgICAgICBzaGExID0gbmV3IGpzU0hBKCdTSEEtMScsICdURVhUJyk7CiAgICAgICAgc2hhMS51cGRhdGUoIiIgKyB1c2Vya2V5ICsgdG1wICsgIjAwMDAwMCIpOwogICAgICAgIHJldHVybiBzaGExLmdldEhhc2goJ0hFWCcsIHsKICAgICAgICAgICAgb3V0cHV0VXBwZXI6IHRydWUKICAgICAgICB9KTsKICAgIH0KCgoKICAgIGZ1bmN0aW9uIGRvd25sb2FkKGZpbGVuYW1lLCBjb250ZW50LCBjb250ZW50VHlwZSkgewogICAgICAgIGlmICghY29udGVudFR5cGUpIGNvbnRlbnRUeXBlID0gJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSc7CiAgICAgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7CiAgICAgICAgdmFyIGJsb2IgPSBuZXcgQmxvYihbY29udGVudF0sIHsKICAgICAgICAgICAgJ3R5cGUnOiBjb250ZW50VHlwZQogICAgICAgIH0pOwogICAgICAgIGEuaHJlZiA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGJsb2IpOwogICAgICAgIGEuZG93bmxvYWQgPSBmaWxlbmFtZTsKICAgICAgICBhLmNsaWNrKCk7CiAgICB9CgogICAgZnVuY3Rpb24gUmVuZXdDb29raWUoKSB7CiAgICAgICAgdmFyIGFycnlDb29raWUgPSB3aW5kb3cuY29va2llLnNwbGl0KCc7Jyk7CiAgICAgICAgYXJyeUNvb2tpZS5mb3JFYWNoKGZ1bmN0aW9uIChrdikgewogICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBrdiArICI7ZXhwaXJlcz1UaHUsIDAxIEphbiAyMTAwIDAwOjAwOjAwIFVUQzs7ZG9tYWluPS4xMTUuY29tIgogICAgICAgIH0pCiAgICB9CgogICAgZnVuY3Rpb24gRGVsZXRlQ29va2llKHJlc3ApIHsKICAgICAgICB0cnkgewogICAgICAgICAgICB2YXIgcmVnID0gL3NldC1jb29raWU6IC4rOy9nOwogICAgICAgICAgICB2YXIgc2V0Y29va2llID0gcmVnLmV4ZWMocmVzcClbMF0uc3BsaXQoJzsnKTsKICAgICAgICAgICAgdmFyIGZpbGVjb29raWUgPSBzZXRjb29raWVbMF0uc2xpY2UoMTEpICsgIjsgZXhwaXJlcz1UaHUsIDAxIEphbiAxOTcwIDAwOjAwOjAwIFVUQzsiICsgc2V0Y29va2llWzNdICsgIjtkb21haW49LjExNS5jb20iOwogICAgICAgICAgICBkb2N1bWVudC5jb29raWUgPSBmaWxlY29va2llOwogICAgICAgICAgICBSZW5ld0Nvb2tpZSgpCiAgICAgICAgICAgIHJldHVybiBmaWxlY29va2llOwogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICB9CiAgICB9CgoKCgogICAgLy8jZW5kcmVnaW9uCgogICAgZnVuY3Rpb24gaGVyZURvYyhmKSB7CiAgICAgICAgcmV0dXJuIGYudG9TdHJpbmcoKS5yZXBsYWNlKC9eW15cL10rXC9cKiE/XHM/LywgJycpLnJlcGxhY2UoL1wqXC9bXlwvXSskLywgJycpOwogICAgfQoKICAgIGNvbnN0IFRhc2tUeXBlID0gewogICAgICAgIERPV05MT0FEOiAnRG93bmxvYWQnLCAvL+aPkOWPlgogICAgICAgIFVQTE9BRDogJ1VwbG9hZCcsIC8v6L2s5a2YCiAgICB9OwoKICAgIGNvbnN0IE1lc3NhZ2VUeXBlID0gewogICAgICAgIEJFR0lOOiAwLAogICAgICAgIFBST0NFU1NJTkc6IDEsCiAgICAgICAgRU5EOiAyLAogICAgICAgIEVSUk9SOiAzLAogICAgICAgIENMT1NFOiA0LAogICAgICAgIENBTkNFTDogNSwKICAgICAgICBCRUdJTjRVUExPQUQ6IDYsCiAgICAgICAgRU5ENFVQTE9BRDogNywKICAgICAgICBOT1RJRllJTkZPOiA4LAogICAgICAgIEJFR0lONENPTlRJTlVFVEFTSzogOSwKICAgICAgICBTSE9XQ0FOQ0VsOiAxMCwKICAgICAgICBISURFQ0FOQ0VMOiAxMSwKICAgICAgICBGSUxFRE9XTkxPQUQ6IDEyLAogICAgICAgIE1TR0VSUk9SOiAxMywKICAgICAgICBKU0lORk86IDE0LAogICAgfTsKCiAgICBmdW5jdGlvbiBjcmVhdGVNZXNzYWdlKG1lc3NhZ2VUeXBlLCBtc2csIGlkKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgbWVzc2FnZVR5cGU6IG1lc3NhZ2VUeXBlLAogICAgICAgICAgICBtc2c6IG1zZywKICAgICAgICAgICAgdGFyZ2V0SUQ6IGlkCiAgICAgICAgfQogICAgfQoKICAgIFN0cmluZy5wcm90b3R5cGUuZm9ybWF0ID0gZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQogICAgICAgIGZvciAodmFyIHMgPSB0aGlzLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBzID0gcy5yZXBsYWNlKG5ldyBSZWdFeHAoIlxceyIgKyBpICsgIlxcfSIsICJnIiksIGFyZ3VtZW50c1tpXSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBzOwogICAgfTsKCiAgICB2YXIgZ2V0VGFtcGxhdGVMaW5lcyA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAvKgogICAgICAgICAgICA8ZGl2ID4KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9Iml0ZW1Db250ZW50IiBzdHlsZT0iY29sb3I6IHJlZDt0ZXh0LWFsaWduOiBsZWZ0O21hcmdpbjogMTBweCAwOyI+CiAgICAgICAgICAgICAgICA8L2Rpdj4KICAgICAgICAgICAgICAgIDxociAvPgogICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iaGVpZ2h0OjE0MHB4O292ZXJmbG93LXg6IGhpZGRlbjtvdmVyZmxvdy15OiBhdXRvOyI+CiAgICAgICAgICAgICAgICAgICAgPHVsIGNsYXNzPSJlcnJvckxpc3QiICBzdHlsZT0iZm9udC1zaXplOiBzbWFsbDt0ZXh0LWFsaWduOiBsZWZ0O2ZvbnQtc3R5bGU6IGl0YWxpYzsgIj48L3VsPgogICAgICAgICAgICAgICAgPC9kaXY+CiAgICAgICAgICAgIDwvZGl2PgogICAgICAgICovCiAgICB9OwoKCiAgICAvL3Bvc3QgZnJvbSBpZnJhbWUKICAgIGZ1bmN0aW9uIHBvc3RTaGExTWVzc2dhZShtZXNzYWdlKSB7CiAgICAgICAgdmFyIHBvc3REYXRhID0gewogICAgICAgICAgICBldmVudElEOiAiMTE1c2hhMSIsCiAgICAgICAgICAgIGRhdGE6IG1lc3NhZ2UKICAgICAgICB9OwoKICAgICAgICB2YXIgdGV4dCA9IEpTT04uc3RyaW5naWZ5KHBvc3REYXRhKTsKICAgICAgICB3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHRleHQsICJodHRwczovLzExNS5jb20vIik7CgogICAgfQoKICAgIGZ1bmN0aW9uIHNldFRhc2tDYW5jZWwoKSB7CiAgICAgICAgR01fc2V0VmFsdWUoInNldFRhc2tDYW5jZWwiLCB0cnVlKQogICAgfQoKICAgIGZ1bmN0aW9uIHJlc2V0VGFza0NhbmNlbEZsYWcoKSB7CiAgICAgICAgR01fc2V0VmFsdWUoInNldFRhc2tDYW5jZWwiLCBmYWxzZSkKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRUYXNrQ2FuY2VsRmxhZygpIHsKICAgICAgICByZXR1cm4gR01fZ2V0VmFsdWUoInNldFRhc2tDYW5jZWwiKTsKICAgIH0KCiAgICBjb25zdCBmb290ZXJTdHJpbmcgPSBgPHAgY2xhc3M9InJhaW5ib3ctdGV4dCI+PHNwYW4gc3R5bGU9ImNvbG9yOiMyNzc3RjgiPlske1RJUFMuQ3VycmVudFZlcnNpb259XTwvc3Bhbj46IOaTjeS9nOaXtu+8jDxzcGFuIGNsYXNzPSJteTExNUluZm8iPuehruS/neacrOmhtemdoue9rumhtjwvc3Bhbj7vvIzpmLLmraLohJrmnKzkvJHnnKDvvIHvvIEKICAgIDxicj48c3BhbiBjbGFzcz0ibXkxMTVJbmZvIj7ml6A8L3NwYW4+MTE15Lya5ZGY77yMPHNwYW4gY2xhc3M9Im15MTE1SW5mbyI+5o+Q5Y+W6YCf5bqmPC9zcGFuPuWPl+mZkO+8jDxzcGFuIGNsYXNzPSJteTExNUluZm8iPui9rOWtmOaWh+S7tuWkp+Wwjzwvc3Bhbj7kuI3otoXov4c1R0LvvIHvvIE8L3A+YDsKICAgIC8v6Kej5Yaz5o+Q5Y+W5pe255qEYWxlcnTkuI3og73lhajlsY/nmoTpl67popgKICAgIGlmICh3aW5kb3cudG9wID09PSB3aW5kb3cuc2VsZikgewogICAgICAgICQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICB2YXIgJGl0ZW1Db250ZW50ID0gbnVsbDsKICAgICAgICAgICAgdmFyICRlcnJvckxpc3QgPSBudWxsOwogICAgICAgICAgICB2YXIgZ2V0VGFtcGxhdGUgPSBoZXJlRG9jKGdldFRhbXBsYXRlTGluZXMpOwoKICAgICAgICAgICAgJCh3aW5kb3cpLm9uKCJtZXNzYWdlIiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgIHZhciBkYXRhSW5mbyA9IHR5cGVvZiBlLm9yaWdpbmFsRXZlbnQuZGF0YSA9PSAic3RyaW5nIiA/IEpTT04ucGFyc2UoZS5vcmlnaW5hbEV2ZW50LmRhdGEpIDogZS5vcmlnaW5hbEV2ZW50LmRhdGE7CiAgICAgICAgICAgICAgICBpZiAoZGF0YUluZm8uZXZlbnRJRCAhPSAiMTE1c2hhMSIgfHwgZS5vcmlnaW5hbEV2ZW50Lm9yaWdpbiAhPSAiaHR0cHM6Ly8xMTUuY29tIikgcmV0dXJuOwogICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB0eXBlb2YgZGF0YUluZm8uZGF0YSA9PSAic3RyaW5nIiA/IEpTT04ucGFyc2UoZGF0YUluZm8uZGF0YSkgOiBkYXRhSW5mby5kYXRhOwoKICAgICAgICAgICAgICAgIC8vdWk6CiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZS5tZXNzYWdlVHlwZSA9PSBNZXNzYWdlVHlwZS5CRUdJTikgewogICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn5q2j5Zyo5pON5L2c5LitLi4uJywKICAgICAgICAgICAgICAgICAgICAgICAgaHRtbDogZ2V0VGFtcGxhdGUsCiAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dFc2NhcGVLZXk6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogYOWujOaIkGAsCiAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6IGDlj5bmtojmk43kvZxgLAogICAgICAgICAgICAgICAgICAgICAgICBmb290ZXI6IGZvb3RlclN0cmluZywKICAgICAgICAgICAgICAgICAgICAgICAgd2lsbE9wZW46IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZ2V0Q2FuY2VsQnV0dG9uKCkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuc2hvd0xvYWRpbmcoU3dhbC5nZXRDb25maXJtQnV0dG9uKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyICRzd2FsQ29udGVudDEgPSAkKFN3YWwuZ2V0SHRtbENvbnRhaW5lcigpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlcnJvckxpc3QgPSAkc3dhbENvbnRlbnQxLmZpbmQoIi5lcnJvckxpc3QiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtQ29udGVudCA9ICRzd2FsQ29udGVudDEuZmluZCgiLml0ZW1Db250ZW50Iik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5kaXNtaXNzID09PSBTd2FsLkRpc21pc3NSZWFzb24uY2FuY2VsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUYXNrQ2FuY2VsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiRG93bmxvYWQgQ2FuY2VsIFRhc2siKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICflt7Llj5bmtojvvIznrYnlvoXov5vooYzkuK3nmoTku7vliqHnu5PmnZ8uLi4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6IGdldFRhbXBsYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd0VzY2FwZUtleTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IGDlrozmiJBgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvb3RlcjogZm9vdGVyU3RyaW5nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbGxPcGVuOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuc2hvd0xvYWRpbmcoU3dhbC5nZXRDb25maXJtQnV0dG9uKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHN3YWxDb250ZW50MSA9ICQoU3dhbC5nZXRIdG1sQ29udGFpbmVyKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsZXQgaHRtbCA9ICRlcnJvckxpc3QuZXFbMF07CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlcnJvckxpc3QgPSAkc3dhbENvbnRlbnQxLmZpbmQoIi5lcnJvckxpc3QiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVycm9yTGlzdC5hcHBlbmQoaHRtbCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpdGVtQ29udGVudCA9ICRzd2FsQ29udGVudDEuZmluZCgiLml0ZW1Db250ZW50Iik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5tZXNzYWdlVHlwZSA9PSBNZXNzYWdlVHlwZS5QUk9DRVNTSU5HKSB7CiAgICAgICAgICAgICAgICAgICAgJGl0ZW1Db250ZW50Lmh0bWwobWVzc2FnZS5tc2cpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09IE1lc3NhZ2VUeXBlLkVSUk9SKSB7CiAgICAgICAgICAgICAgICAgICAgJGVycm9yTGlzdC5hcHBlbmQoJzxsaT48ZGl2IGRpc3BsYXk6IGZsZXg7Ij48cD4nICsgbWVzc2FnZS5tc2cgKyAnPC9wPjxwIHN0eWxlPSJmb250LXN0eWxlOiBpdGFsaWM7Ij48XHA+PFxkaXY+PFxsaT48bGk+PGhyLz48L2xpPicpOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09IE1lc3NhZ2VUeXBlLkVORCkgewogICAgICAgICAgICAgICAgICAgICRpdGVtQ29udGVudC5odG1sKG1lc3NhZ2UubXNnKTsKICAgICAgICAgICAgICAgICAgICBTd2FsLmdldFRpdGxlKCkudGV4dENvbnRlbnQgPSAi5pON5L2c5a6M5oiQ77yBIjsKICAgICAgICAgICAgICAgICAgICBTd2FsLmdldENhbmNlbEJ1dHRvbigpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgICAgICAgICAgU3dhbC5nZXRGb290ZXIoKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICAgICAgICAgIFN3YWwuaGlkZUxvYWRpbmcoKTsKCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgPT0gTWVzc2FnZVR5cGUuQ0xPU0UpIHsKICAgICAgICAgICAgICAgICAgICBTd2FsLmNsb3NlKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgPT0gTWVzc2FnZVR5cGUuQkVHSU40VVBMT0FEKSB7CiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICfmraPlnKjmk43kvZzkuK0uLi4nLAogICAgICAgICAgICAgICAgICAgICAgICBodG1sOiBnZXRUYW1wbGF0ZSwKICAgICAgICAgICAgICAgICAgICAgICAgYWxsb3dPdXRzaWRlQ2xpY2s6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICBhbGxvd0VzY2FwZUtleTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBg5a6M5oiQYCwKICAgICAgICAgICAgICAgICAgICAgICAgZGVueUJ1dHRvblRleHQ6IGDmiZPlvIDnm67lvZVgLAogICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raI5pON5L2cIiwKICAgICAgICAgICAgICAgICAgICAgICAgZm9vdGVyOiBmb290ZXJTdHJpbmcsCiAgICAgICAgICAgICAgICAgICAgICAgIHdpbGxPcGVuOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTd2FsLmdldENhbmNlbEJ1dHRvbigpLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTd2FsLmdldERlbnlCdXR0b24oKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgU3dhbC5zaG93TG9hZGluZyhTd2FsLmdldENvbmZpcm1CdXR0b24oKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJHN3YWxDb250ZW50MSA9ICQoU3dhbC5nZXRIdG1sQ29udGFpbmVyKCkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGVycm9yTGlzdCA9ICRzd2FsQ29udGVudDEuZmluZCgiLmVycm9yTGlzdCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW1Db250ZW50ID0gJHN3YWxDb250ZW50MS5maW5kKCIuaXRlbUNvbnRlbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pLnRoZW4ocmVzdWx0ID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5kaXNtaXNzID09PSBTd2FsLkRpc21pc3NSZWFzb24uY2FuY2VsKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUYXNrQ2FuY2VsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiVXBsb2FkIENhbmNlbCBUYXNrIik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh3aW5kb3cucGFyZW50LmRvY3VtZW50Lm15RGF0YSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICflt7Llj5bmtojvvIznrYnlvoXov5vooYzkuK3nmoTku7vliqHlrozmiJAuLi4nLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWw6IGdldFRhbXBsYXRlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGxvd0VzY2FwZUtleTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6IGDlrozmiJBgLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbnlCdXR0b25UZXh0OiBg5omT5byA55uu5b2VYCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q2FuY2VsQnV0dG9uOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAi5Y+W5raI5pON5L2cIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWxsT3BlbjogZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3dhbC5nZXREZW55QnV0dG9uKCkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgU3dhbC5zaG93TG9hZGluZyhTd2FsLmdldENvbmZpcm1CdXR0b24oKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciAkc3dhbENvbnRlbnQxID0gJChTd2FsLmdldEh0bWxDb250YWluZXIoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRlcnJvckxpc3QgPSAkc3dhbENvbnRlbnQxLmZpbmQoIi5lcnJvckxpc3QiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGl0ZW1Db250ZW50ID0gJHN3YWxDb250ZW50MS5maW5kKCIuaXRlbUNvbnRlbnQiKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCgoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09IE1lc3NhZ2VUeXBlLkVORDRVUExPQUQpIHsKICAgICAgICAgICAgICAgICAgICAkaXRlbUNvbnRlbnQuaHRtbChtZXNzYWdlLm1zZyk7CiAgICAgICAgICAgICAgICAgICAgU3dhbC5nZXRUaXRsZSgpLnRleHRDb250ZW50ID0gIuaTjeS9nOWujOaIkO+8gSI7CiAgICAgICAgICAgICAgICAgICAgU3dhbC5nZXRDYW5jZWxCdXR0b24oKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICAgICAgICAgIFN3YWwuZ2V0RGVueUJ1dHRvbigpLnN0eWxlLmRpc3BsYXkgPSAiYmxvY2siOwogICAgICAgICAgICAgICAgICAgIFN3YWwuZ2V0RGVueUJ1dHRvbigpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCJEZW55QnV0dG9uIGNsaWNrIik7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UpOwogICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICJodHRwczovLzExNS5jb20vP2NpZD0iICsgbWVzc2FnZS50YXJnZXRJRCArICImb2Zmc2V0PTAmdGFiPSZtb2RlPXdhbmdwYW4iOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIFN3YWwuZ2V0Rm9vdGVyKCkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgICAgICAgICBTd2FsLmhpZGVMb2FkaW5nKCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgPT0gTWVzc2FnZVR5cGUuQkVHSU40Q09OVElOVUVUQVNLKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHRhc2tGaWxlID0gJyc7CiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICflr7zlhaXku7vliqHmlofku7bvvIznu6fnu63ku7vliqEnLAogICAgICAgICAgICAgICAgICAgICAgICBodG1sOiBgPGRpdiBzdHlsZT0idGV4dC1hbGlnbjogbGVmdDsiPgogICAgICAgICAgICAgICAgICAgICAgICDpgInmi6nku7vliqHmlofku7YoLjd0YXNrKe+8mjxpbnB1dCBpZD0iY29udGludWVkVGFza0ZpbGUiIHR5cGU9ImZpbGUiIGFjY2VwdD0iLjd0YXNrIiA+PC9pbnB1dD4KICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT0iZm9udC1zaXplOjE0cHg7Y29sb3I6cmVkO21hcmdpbjoxMHB4O3RleHQtYWxpZ246IGxlZnQ7Ij4q5Zyo5rKh5pyJ56e75Yqo55u45YWz55qE5paH5Lu25Lul5Y+K5paH5Lu25aS577yM5YyF5ous55uu5qCH55qE5omA5pyJ55uu5b2V5bGC57qn77yM5a+85YWl5Lu75Yqh5Y+v57un57utPC9kaXY+CiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5gLAogICAgICAgICAgICAgICAgICAgICAgICBmb2N1c0NvbmZpcm06IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogYOW8gOWni+e7p+e7reS7u+WKoWAsCiAgICAgICAgICAgICAgICAgICAgfSkudGhlbih0ID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQuaXNDb25maXJtZWQgJiYgdGFza0ZpbGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIENvbnRpbnVlZFRhc2sodGFza0ZpbGUpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRpbnVlZFRhc2tGaWxlJykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgZSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRhc2tGaWxlID0gZS50YXJnZXQuZmlsZXNbMF07CiAgICAgICAgICAgICAgICAgICAgfSkKCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgPT0gTWVzc2FnZVR5cGUuU0hPV0NBTkNFbCkgewogICAgICAgICAgICAgICAgICAgIGlmIChTd2FsLmdldENhbmNlbEJ1dHRvbigpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vU3dhbC5nZXRDYW5jZWxCdXR0b24oKS5zdHlsZS5kaXNwbGF5ID0gImJsb2NrIjsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1lc3NhZ2UubWVzc2FnZVR5cGUgPT0gTWVzc2FnZVR5cGUuSElERUNBTkNFTCkgewogICAgICAgICAgICAgICAgICAgIGlmIChTd2FsLmdldENhbmNlbEJ1dHRvbigpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZ2V0Q2FuY2VsQnV0dG9uKCkuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09IE1lc3NhZ2VUeXBlLkZJTEVET1dOTE9BRCkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UubXNnKQogICAgICAgICAgICAgICAgICAgIGxldCBzaXplID0gcGFyc2VJbnQobWVzc2FnZS5tc2cub25saW5lRmlsZS5zaXplKTsKICAgICAgICAgICAgICAgICAgICBpZiAoc2l6ZSA+IDIgKiAxMDI0ICogMTAyNCkgewogICAgICAgICAgICAgICAgICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5NU0dFUlJPUiwgIuaaguS4jeaUr+aMgeWkp+S6jjJNQueahCB0ZXh0fGpzb24g5paH5Lu277yBIikpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIFN3YWwuZmlyZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+ato+WcqOS4i+i9veaWh+S7ti4uLicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sOiBgPHA+JHttZXNzYWdlLm1zZy5vbmxpbmVGaWxlLm5hbWV9PC9wPjxwIGlkPSJwcm9jZXNzSW5Td2FsIj48L3A+YCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93T3V0c2lkZUNsaWNrOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsbG93RXNjYXBlS2V5OiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiBg5a6M5oiQYCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lsbE9wZW46IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTd2FsLnNob3dMb2FkaW5nKFN3YWwuZ2V0Q29uZmlybUJ1dHRvbigpKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb3dubG9hZEFGaWxlKG1lc3NhZ2UubXNnLm9ubGluZUZpbGUsIHRleHQgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFN3YWwuZ2V0SHRtbENvbnRhaW5lcigpKS5maW5kKCIjcHJvY2Vzc0luU3dhbCIpLmh0bWwodGV4dCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkudGhlbihyID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHIuc3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHIudGV4dCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UubXNnLmNvbmZpZy50ZXh0ID0gci50ZXh0OwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFVwbG9hZEZpbGVzQnlTaGExTGlua3MobWVzc2FnZS5tc2cuY29uZmlnKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtZXNzYWdlLm1lc3NhZ2VUeXBlID09IE1lc3NhZ2VUeXBlLk1TR0VSUk9SKSB7CiAgICAgICAgICAgICAgICAgICAgU3dhbC5maXJlKHsKICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2Vycm9yJywKICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogbWVzc2FnZS5tc2csCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobWVzc2FnZS5tZXNzYWdlVHlwZSA9PSBNZXNzYWdlVHlwZS5KU0lORk8pIHsKICAgICAgICAgICAgICAgICAgICBTd2FsLmZpcmUoewogICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnaW5mbycsCiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICfohJrmnKzkuI7njq/looPkv6Hmga/vvJrvvIjlpoLmnpzmiqVidWfvvIzor7fpmYTluKbkuIrlpoLkuIvkv6Hmga/vvIlcclxuJyArIG1lc3NhZ2UubXNnLAogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgfSkKICAgICAgICB9KTsKICAgIH0KCgoKCgoKICAgIGZ1bmN0aW9uIGRlbGF5KG1zKSB7CgogICAgICAgIGlmIChtcyA9PSAwKSB7CiAgICAgICAgICAgIG1zID0gMTAwMCAqIChNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoMTEgLSA0KSkgKyA0KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpCiAgICB9CgoKICAgIC8vI3JlZ2lvbiAxMTUgYXBpCiAgICAvL2dldCAgIFVwbG9hZEluZm8KICAgIC8vcmV0dXJuIHtzdGF0ZTpmYWxzZSx1c2VyX2lkOjAsdXNlcmtleTonMCcsZXJyb3I6Jyd9CiAgICBhc3luYyBmdW5jdGlvbiBnZXRVcGxvYWRJbmZvKCkgewogICAgICAgIGNvbnN0IHIgPSBhd2FpdCAkLmFqYXgoewogICAgICAgICAgICB1cmw6ICdodHRwczovL3Byb2FwaS4xMTUuY29tL2FwcC91cGxvYWRpbmZvJywKICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJywKICAgICAgICAgICAgeGhyRmllbGRzOiB7CiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiByOwogICAgfQoKICAgIC8vYWRkIGEgZm9sZGVyCiAgICAvL3JldHVybiB7c3RhdGU6IGZhbHNlLCBlcnJvcjogIuivpeebruW9leWQjeensOW3suWtmOWcqOOAgiIsIGVycm5vOiAyMDAwNCwgZXJydHlwZTogIndhciJ9CiAgICAvL3JldHVybiB7c3RhdGU6IHRydWUsIGVycm9yOiAiIiwgZXJybm86ICIiLCBhaWQ6IDEsIGNpZDogIjIwMjA0NTUwNzgwMTA1MTE5NzUiLCDigKZ9CiAgICBhc3luYyBmdW5jdGlvbiBhZGRGb2xkZXIocGlkLCBmb2xkZXJOYW1lKSB7CiAgICAgICAgY29uc3QgcG9zdERhdGEgPSBQb3N0RGF0YSh7CiAgICAgICAgICAgIHBpZDogcGlkLAogICAgICAgICAgICBjbmFtZTogZW5jb2RlVVJJQ29tcG9uZW50KGZvbGRlck5hbWUpCiAgICAgICAgfSk7CgogICAgICAgIGNvbnN0IHIgPSBhd2FpdCAkLmFqYXgoewogICAgICAgICAgICB0eXBlOiAnUE9TVCcsCiAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vd2ViYXBpLjExNS5jb20vZmlsZXMvYWRkJywKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLAogICAgICAgICAgICAgICAgLy8nT3JpZ2luJzogJ2h0dHBzOi8vMTE1LmNvbScKICAgICAgICAgICAgfSwKICAgICAgICAgICAgeGhyRmllbGRzOiB7CiAgICAgICAgICAgICAgICB3aXRoQ3JlZGVudGlhbHM6IHRydWUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJywKICAgICAgICAgICAgZGF0YTogcG9zdERhdGEKICAgICAgICB9KTsKCiAgICAgICAgcmV0dXJuIHI7CiAgICB9CgoKICAgIC8vcmV0dXJuIHtkYXRhOiBBcnJheSgzMCksIGNvdW50OiA1MywgZGF0YV9zb3VyY2U6ICJEQiIsIHN5c19jb3VudDogMCwgb2Zmc2V0OiAwLCBwYWdlX3NpemU6MTE1LCDigKZ9CiAgICAvL3JldHVybiBBcnJheSB0eXBlOgogICAgLy8gICAgICBbZm9sZGVyXTp7Y2lkOiAiIiwgYWlkOiAiMSIsIHBpZDogIiIsIG46ICIiLCBtOiAwLCDigKZ9CiAgICAvLyAgICAgIFtmaWxlXTogIHtmaWQ6ICIiLCB1aWQ6IDE0NDc4MTIsIGFpZDogMSwgY2lkOiAiIiwgbjogIiIscGM6IiIsc2hhOiIiLHM6MCx0OiIiIOKApn0KICAgIGFzeW5jIGZ1bmN0aW9uIGdldERpcmVjdENoaWxkSXRlbXNCeU9mZnNldChjaWQsIG9mZnNldCkgewogICAgICAgIHZhciB0VXJsID0gJ2h0dHBzOi8vd2ViYXBpLjExNS5jb20vZmlsZXM/YWlkPTEmY2lkPScgKyBjaWQgKyAnJm89ZmlsZV9uYW1lJmFzYz0xJm9mZnNldD0nICsgb2Zmc2V0ICsgJyZzaG93X2Rpcj0xJmxpbWl0PTExNTAmY29kZT0mc2NpZD0mc25hcD0wJm5hdHNvcnQ9MSZyZWNvcmRfb3Blbl90aW1lPTEmc291cmNlPSZmb3JtYXQ9anNvbiZmY19taXg9JnR5cGU9JnN0YXI9JmlzX3NoYXJlPSZzdWZmaXg9JmN1c3RvbV9vcmRlcj0nOwogICAgICAgIC8vIHZhciB0VXJsID0gImh0dHBzOi8vYXBzLjExNS5jb20vbmF0c29ydC9maWxlcy5waHA/YWlkPTEmY2lkPSIgKyBjaWQgKyAiJm89ZmlsZV9uYW1lJmFzYz0xJm9mZnNldD0iICsgb2Zmc2V0ICsgIiZzaG93X2Rpcj0xJmxpbWl0PTExNTAmY29kZT0mc2NpZD0mc25hcD0wJm5hdHNvcnQ9MSZyZWNvcmRfb3Blbl90aW1lPTEmc291cmNlPSZmb3JtYXQ9anNvbiZmY19taXg9MCZ0eXBlPSZzdGFyPSZpc19zaGFyZT0mc3VmZml4PSZjdXN0b21fb3JkZXI9IjsKICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCAkLmFqYXgoewogICAgICAgICAgICB0eXBlOiAnR0VUJywKICAgICAgICAgICAgdXJsOiB0VXJsLAogICAgICAgICAgICBkYXRhVHlwZTogImpzb24iLAogICAgICAgICAgICB4aHJGaWVsZHM6IHsKICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvL+ebtOaOpeWtkOmhueebruWwkeS6jjEyMDAKICAgIGFzeW5jIGZ1bmN0aW9uIGdldERpcmVjdENoaWxkSXRlbXNCeU9mZnNldGx0MTIwMChjaWQsIG9mZnNldCkgewogICAgICAgIC8vdmFyIHRVcmwgPSAnaHR0cHM6Ly93ZWJhcGkuMTE1LmNvbS9maWxlcz9haWQ9MSZjaWQ9JytjaWQrJyZvPWZpbGVfbmFtZSZhc2M9MSZvZmZzZXQ9JytvZmZzZXQrJyZzaG93X2Rpcj0xJmxpbWl0PTExNTAmY29kZT0mc2NpZD0mc25hcD0wJm5hdHNvcnQ9MSZyZWNvcmRfb3Blbl90aW1lPTEmc291cmNlPSZmb3JtYXQ9anNvbiZmY19taXg9JnR5cGU9JnN0YXI9JmlzX3NoYXJlPSZzdWZmaXg9JmN1c3RvbV9vcmRlcj0nOwogICAgICAgIHZhciB0VXJsID0gImh0dHBzOi8vYXBzLjExNS5jb20vbmF0c29ydC9maWxlcy5waHA/YWlkPTEmY2lkPSIgKyBjaWQgKyAiJm89ZmlsZV9uYW1lJmFzYz0xJm9mZnNldD0iICsgb2Zmc2V0ICsgIiZzaG93X2Rpcj0xJmxpbWl0PTExNTAmY29kZT0mc2NpZD0mc25hcD0wJm5hdHNvcnQ9MSZyZWNvcmRfb3Blbl90aW1lPTEmc291cmNlPSZmb3JtYXQ9anNvbiZmY19taXg9MCZ0eXBlPSZzdGFyPSZpc19zaGFyZT0mc3VmZml4PSZjdXN0b21fb3JkZXI9IjsKICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCAkLmFqYXgoewogICAgICAgICAgICB0eXBlOiAnR0VUJywKICAgICAgICAgICAgdXJsOiB0VXJsLAogICAgICAgICAgICBkYXRhVHlwZTogImpzb24iLAogICAgICAgICAgICB4aHJGaWVsZHM6IHsKICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0KCiAgICAvL3JldHVybiBBbGxEaXJlY3QgaXRlbXMgOntpZDoiIixwYXJlbnRJRDpjaWQsaXNGb2xkZXI6ZmFsc2UsbmFtZToiIixzaXplOjAscGM6IiIsc2hhOiIiLHBhdGhzW10gfTsKICAgIGFzeW5jIGZ1bmN0aW9uIGdldEFsbERpcmVjdEl0ZW1zKGNpZCwgZm9sZGVyUHJvY2Vzc0NhbGxiYWNrKSB7CiAgICAgICAgdmFyIGl0ZW1zID0gbmV3IEFycmF5KCk7CiAgICAgICAgdmFyIGluZGV4ID0gMDsKICAgICAgICB2YXIgZmxhZyA9IHRydWU7CiAgICAgICAgdmFyIHBhZ2VJbmRleCA9IDE7CiAgICAgICAgdmFyIGZpcnN0ID0gdHJ1ZTsKICAgICAgICB2YXIgaXNMVDEyMDAgPSBmYWxzZTsKCiAgICAgICAgd2hpbGUgKGZsYWcpIHsKICAgICAgICAgICAgaWYgKGdldFRhc2tDYW5jZWxGbGFnKCkpIGJyZWFrOwoKICAgICAgICAgICAgZm9sZGVyUHJvY2Vzc0NhbGxiYWNrKHBhZ2VJbmRleCk7CiAgICAgICAgICAgIHZhciByZXN1bHQgPSBudWxsOwogICAgICAgICAgICAvLzEyMDDmlbDph4/vvIzkuI3lkIznmoRhcGnvvJvov5nkuYjlhpnlh4/lsJHlj5HljIUKICAgICAgICAgICAgaWYgKGZpcnN0KSB7CiAgICAgICAgICAgICAgICByZXN1bHQgPSBhd2FpdCBnZXREaXJlY3RDaGlsZEl0ZW1zQnlPZmZzZXQoY2lkLCBpbmRleCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgZmlyc3QgPjEyMDAgOiR7cmVzdWx0LnN0YXRlfSwke3Jlc3VsdC5jb3VudH1gKTsKICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LnN0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgZ2V0RGlyZWN0Q2hpbGRJdGVtc0J5T2Zmc2V0bHQxMjAwKGNpZCwgaW5kZXgpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBmaXJzdCA8MTIwMCA6JHtyZXN1bHQuc3RhdGV9LCR7cmVzdWx0LmNvdW50fWApOwogICAgICAgICAgICAgICAgICAgIGlzTFQxMjAwID0gdHJ1ZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZpcnN0ID0gZmFsc2U7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBpZiAoaXNMVDEyMDApIHJlc3VsdCA9IGF3YWl0IGdldERpcmVjdENoaWxkSXRlbXNCeU9mZnNldGx0MTIwMChjaWQsIGluZGV4KTsKICAgICAgICAgICAgICAgIGVsc2UgcmVzdWx0ID0gYXdhaXQgZ2V0RGlyZWN0Q2hpbGRJdGVtc0J5T2Zmc2V0KGNpZCwgaW5kZXgpOwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgdG90YWxDb3VudCA9IHBhcnNlSW50KHJlc3VsdC5jb3VudCk7CiAgICAgICAgICAgIGlmICh0b3RhbENvdW50ID49IDEpIHsKICAgICAgICAgICAgICAgIHJlc3VsdC5kYXRhLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcEl0ZW0gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50SUQ6IGNpZCwKICAgICAgICAgICAgICAgICAgICAgICAgaXNGb2xkZXI6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBpY2tDb2RlOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgc2hhMTogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhzOiBuZXcgQXJyYXkoKSwKICAgICAgICAgICAgICAgICAgICAgICAgcHJlaWQ6ICIiLAogICAgICAgICAgICAgICAgICAgICAgICBuZWVkVG9SZW1vdmVkOiBmYWxzZQogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIGlmIChpdGVtLmZpZCkgLy/mlofku7YgZmlkLGNpZAogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgcEl0ZW0uaXNGb2xkZXIgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgcEl0ZW0uaWQgPSBpdGVtLmZpZDsKICAgICAgICAgICAgICAgICAgICAgICAgcEl0ZW0ubmFtZSA9IGl0ZW0ubjsKICAgICAgICAgICAgICAgICAgICAgICAgcEl0ZW0ucGlja0NvZGUgPSBpdGVtLnBjOwogICAgICAgICAgICAgICAgICAgICAgICBwSXRlbS5zaGExID0gaXRlbS5zaGE7CiAgICAgICAgICAgICAgICAgICAgICAgIHBJdGVtLnNpemUgPSBpdGVtLnM7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIC8v55uu5b2VIGNpZCxwaWQKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBJdGVtLmlzRm9sZGVyID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgcEl0ZW0uaWQgPSBpdGVtLmNpZDsKICAgICAgICAgICAgICAgICAgICAgICAgcEl0ZW0ubmFtZSA9IGl0ZW0ubjsKICAgICAgICAgICAgICAgICAgICAgICAgcEl0ZW0ucGlja0NvZGUgPSBpdGVtLnBjOwogICAgICAgICAgICAgICAgICAgIH0KCgogICAgICAgICAgICAgICAgICAgIHZhciBpdGVtSW5kZXggPSBpdGVtcy5maW5kSW5kZXgocSA9PiBxLm5hbWUgPT0gcEl0ZW0ubmFtZSAmJiBxLnBpY2tDb2RlID09IHBJdGVtLnBpY2tDb2RlICYmIHEuc2hhMSA9PSBwSXRlbS5zaGExICYmIChfLmlzRXF1YWwocS5wYXRocywgcEl0ZW0ucGF0aHMpKSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW1JbmRleCA9PSAtMSkgaXRlbXMucHVzaChwSXRlbSk7CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8v5Y+v6IO95a2Y5Zyo5ZCM5LiA5Liq55uu5b2V5LiL77yM5Lik5Liq5paH5Lu25LiA5qih5LiA5qC3LAogICAgICAgICAgICAgICAgICAgICAgICAvL+ebuOWQjOaWh+S7tuWkhOeQhu+8muS4jeeEtuW+queOr+adoeS7tumAgOS4jeWHugogICAgICAgICAgICAgICAgICAgICAgICAvL2ZpeDpwaWNrY29kZeS4jeS4gOagtyzlhYjkv53lrZjnnYDlkKcKICAgICAgICAgICAgICAgICAgICAgICAgcEl0ZW0ubmVlZFRvUmVtb3ZlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgICAgICAgIGl0ZW1zLnB1c2gocEl0ZW0pCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc29sZS5sb2coIl9fX19fX19fX19fX19fX3RvdGFsQ291bnQgIiArIHRvdGFsQ291bnQpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhpdGVtcy5sZW5ndGgpCiAgICAgICAgICAgIC8v5b2T6I635Y+W5Yiw5q+UcGFnZXNpemXlsI/ml7bvvIzojrflj5bnu5PmnZ8sMTIwMOaXtuacieS4quWdkeOAguOAguOAggogICAgICAgICAgICBpZiAodG90YWxDb3VudCA8PSBpdGVtcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgYXdhaXQgZGVsYXkoNTAwKTsKICAgICAgICAgICAgICAgIGluZGV4ID0gaXRlbXMubGVuZ3RoOwogICAgICAgICAgICAgICAgcGFnZUluZGV4ID0gcGFnZUluZGV4ICsgMTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgY29uc29sZS5sb2coImNpZDogezB9LCBjb3VudDogezF9Ii5mb3JtYXQoY2lkLCBpdGVtcy5sZW5ndGgpKTsKCiAgICAgICAgdmFyIG5vTnVsbEl0ZW1zID0gaXRlbXMuZmlsdGVyKHEgPT4gIXEubmVlZFRvUmVtb3ZlZCk7CiAgICAgICAgY29uc29sZS5sb2coImNpZDogezB9LCDpmaTljrvlrozlhajph43lpI1jb3VudDogezF9Ii5mb3JtYXQoY2lkLCBub051bGxJdGVtcy5sZW5ndGgpKTsKCiAgICAgICAgcmV0dXJuIG5vTnVsbEl0ZW1zOwogICAgfQoKICAgIC8vcmV0dXJuIHtmaWxlX25hbWU6IiIscGlja19jb2RlOiIiLHNoYTE6IiIsY291bnQ6IiIsc2l6ZToiIixmb2xkZXJfY291bnQ6IiIscGF0aHM6W119CiAgICAvL3JldHVybiBwYXRoczpbXeWxgue6p+ebruW9lQogICAgYXN5bmMgZnVuY3Rpb24gZ2V0Rm9sZGVySW5mbyhjaWQpIHsKICAgICAgICB2YXIgcFVybCA9ICJodHRwczovL3dlYmFwaS4xMTUuY29tL2NhdGVnb3J5L2dldD9haWQ9MSZjaWQ9IiArIGNpZDsKICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCAkLmFqYXgoewogICAgICAgICAgICB0eXBlOiAnR0VUJywKICAgICAgICAgICAgdXJsOiBwVXJsLAogICAgICAgICAgICBkYXRhVHlwZTogImpzb24iLAogICAgICAgICAgICB4aHJGaWVsZHM6IHsKICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTsKICAgICAgICB2YXIgcEl0ZW0gPSB7CiAgICAgICAgICAgIGZpbGVDb3VudDogcGFyc2VJbnQocmVzdWx0LmNvdW50KSwKICAgICAgICAgICAgZm9sZGVyQ291bnQ6IHBhcnNlSW50KHJlc3VsdC5mb2xkZXJfY291bnQpLAogICAgICAgICAgICBpZDogY2lkLAogICAgICAgICAgICBwYXJlbnRJRDogIiIsCiAgICAgICAgICAgIGlzRm9sZGVyOiB0cnVlLAogICAgICAgICAgICBuYW1lOiByZXN1bHQuZmlsZV9uYW1lLAogICAgICAgICAgICBzaXplOiByZXN1bHQuc2l6ZSwKICAgICAgICAgICAgcGlja0NvZGU6IHJlc3VsdC5waWNrX2NvZGUsCiAgICAgICAgICAgIHNoYTE6ICIiLAogICAgICAgICAgICBwYXRoczogcmVzdWx0LnBhdGhzLAogICAgICAgICAgICBwcmVpZDogIiIKICAgICAgICB9OwoKICAgICAgICByZXR1cm4gcEl0ZW07CiAgICB9CgogICAgLy8gZ2V0IGZpbGVBcnJheTp7aWQ6IiIscGFyZW50SUQ6Y2lkLGlzRm9sZGVyOmZhbHNlLG5hbWU6IiIsc2l6ZTowLHBjOiIiLHNoYToiIixwYXRoc1tdIH07CiAgICBhc3luYyBmdW5jdGlvbiBnZXRBbGxGaWxlcyhjaWQsIGZpbGVBcnJheSwgdG9wQ2lkLCBmb2xkZXJQcm9jZXNzQ2FsbGJhY2spIHsKICAgICAgICB2YXIgdGhpc0ZvbGRlciA9IGF3YWl0IGdldEZvbGRlckluZm8oY2lkKTsKICAgICAgICBmb2xkZXJQcm9jZXNzQ2FsbGJhY2sodGhpc0ZvbGRlci5uYW1lLCAwKTsKICAgICAgICAvL+epuuebruW9le+8jOi3s+i/h+mBjeWOhgoKICAgICAgICBpZiAoZ2V0VGFza0NhbmNlbEZsYWcoKSkgcmV0dXJuOwogICAgICAgIGlmICh0aGlzRm9sZGVyLmZpbGVDb3VudCA9PSAwKSByZXR1cm47CiAgICAgICAgZm9sZGVyUHJvY2Vzc0NhbGxiYWNrKHRoaXNGb2xkZXIubmFtZSkKICAgICAgICB2YXIgZGlyZWN0SXRlbXMgPSBhd2FpdCBnZXRBbGxEaXJlY3RJdGVtcyh0aGlzRm9sZGVyLmlkLCBwYWdlSW5kZXggPT4gewogICAgICAgICAgICBmb2xkZXJQcm9jZXNzQ2FsbGJhY2sodGhpc0ZvbGRlci5uYW1lLCBwYWdlSW5kZXgpOwogICAgICAgIH0pOwogICAgICAgIC8v56m655uu5b2V77yM6Lez6L+H6YGN5Y6GCiAgICAgICAgaWYgKGRpcmVjdEl0ZW1zLmxlbmd0aCA9PSAwKSByZXR1cm47CiAgICAgICAgdmFyIGZpbGVzID0gZGlyZWN0SXRlbXMuZmlsdGVyKHQgPT4gIXQuaXNGb2xkZXIpOwogICAgICAgIGZpbGVzLmZvckVhY2goZiA9PiB7CiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXNGb2xkZXIucGF0aHMuZmluZEluZGV4KHEgPT4gcS5maWxlX2lkLnRvU3RyaW5nKCkgPT0gdG9wQ2lkKTsKICAgICAgICAgICAgdmFyIHBhdGhzID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgIGlmIChpbmRleCAhPSAtMSkgewogICAgICAgICAgICAgICAgcGF0aHMgPSB0aGlzRm9sZGVyLnBhdGhzLnNsaWNlKGluZGV4KS5tYXAocSA9PiBxLmZpbGVfbmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcGF0aHMucHVzaCh0aGlzRm9sZGVyLm5hbWUpOwogICAgICAgICAgICBmLnBhdGhzID0gcGF0aHMuc2xpY2UoMSk7CgogICAgICAgICAgICBmaWxlQXJyYXkucHVzaChmKTsKICAgICAgICB9KTsKCiAgICAgICAgdmFyIGZvbGRlcnMgPSBkaXJlY3RJdGVtcy5maWx0ZXIodCA9PiB0LmlzRm9sZGVyKTsKICAgICAgICBmb3IgKHZhciBmb2xkZXIgb2YgZm9sZGVycykgewogICAgICAgICAgICBpZiAoZ2V0VGFza0NhbmNlbEZsYWcoKSkgYnJlYWs7CiAgICAgICAgICAgIGF3YWl0IGdldEFsbEZpbGVzKGZvbGRlci5pZCwgZmlsZUFycmF5LCB0b3BDaWQsIGZvbGRlclByb2Nlc3NDYWxsYmFjayk7CiAgICAgICAgICAgIGF3YWl0IGRlbGF5KDIwMCk7CiAgICAgICAgfQoKICAgIH0KCiAgICAvL+aJuemHj+mHjeWRveWQjSBmaWxlQXJyYXkgIFt7aWQ6aWQsbmFtZTpkZGR9XQogICAgLy97InN0YXRlIjp0cnVlLCJlcnJvciI6IiIsImVycm5vIjowLCJkYXRhIjp7IjIxODczNjU3MTc1Mjc5OTcxMDgiOiIxNDIxNC5tcDQifX0KICAgIGFzeW5jIGZ1bmN0aW9uIHJlbmFtZUZpbGVzKGZpbGVBcnJheSkgewogICAgICAgIGNvbnNvbGUubG9nKCJyZW5hbWVGaWxlcyBmaWxlQXJyYXkiKTsKICAgICAgICBjb25zb2xlLmxvZyhmaWxlQXJyYXkpOwogICAgICAgIGxldCBkYXRhcyA9IGZpbGVBcnJheS5tYXAoKHZhbHVlLCBpbmRleCwgYXJyYXkpID0+IHsKICAgICAgICAgICAgbGV0IGRhdGFLZXkgPSBgZmlsZXNfbmV3X25hbWVbJHt2YWx1ZS5pZH1dYDsKICAgICAgICAgICAgbGV0IGRhdGFWYWx1ZSA9IHZhbHVlLm5hbWU7CiAgICAgICAgICAgIHJldHVybiBgJHtlbmNvZGVVUklDb21wb25lbnQoZGF0YUtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KGRhdGFWYWx1ZSl9YDsKICAgICAgICB9KS5qb2luKCImIik7CgogICAgICAgIGxldCByZW5hbWVVcmwgPSAiaHR0cHM6Ly93ZWJhcGkuMTE1LmNvbS9maWxlcy9iYXRjaF9yZW5hbWUiOwogICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0ICQuYWpheCh7CiAgICAgICAgICAgIHR5cGU6ICdQT1NUJywKICAgICAgICAgICAgdXJsOiByZW5hbWVVcmwsCiAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywKICAgICAgICAgICAgICAgIC8vJ09yaWdpbic6ICdodHRwczovLzExNS5jb20nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRhdGFUeXBlOiAianNvbiIsCiAgICAgICAgICAgIHhockZpZWxkczogewogICAgICAgICAgICAgICAgd2l0aENyZWRlbnRpYWxzOiB0cnVlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRhdGE6IGRhdGFzCiAgICAgICAgfSk7CgogICAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9CgogICAgYXN5bmMgZnVuY3Rpb24gZ2V0VXBsb2FkSGlzdG9yeShvZmZzZXQsIGxpbWl0KSB7CiAgICAgICAgbGV0IGhpc3RvcnlGaWxlcyA9IFtdOwogICAgICAgIGxldCBwVXJsID0gYGh0dHBzOi8vd2ViYXBpLjExNS5jb20vaGlzdG9yeS9saXN0P3R5cGU9NCZvZmZzZXQ9JHtvZmZzZXR9JmxpbWl0PSR7bGltaXR9YDsKICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCAkLmFqYXgoewogICAgICAgICAgICB0eXBlOiAnR0VUJywKICAgICAgICAgICAgdXJsOiBwVXJsLAogICAgICAgICAgICBkYXRhVHlwZTogImpzb24iLAogICAgICAgICAgICB4aHJGaWVsZHM6IHsKICAgICAgICAgICAgICAgIHdpdGhDcmVkZW50aWFsczogdHJ1ZQogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIGxldCBmaWxlcyA9IHJlc3VsdC5kYXRhLmxpc3Q7CiAgICAgICAgZm9yIChjb25zdCBhRmlsZSBvZiBmaWxlcykgewogICAgICAgICAgICBoaXN0b3J5RmlsZXMucHVzaCh7CiAgICAgICAgICAgICAgICBzaGExOiBhRmlsZS5zaGExLAogICAgICAgICAgICAgICAgaWQ6IGFGaWxlLmZpbGVfaWQsCiAgICAgICAgICAgICAgICBjcmVhdGVUaW1lOiBhRmlsZS5jcmVhdGVfdGltZSwKICAgICAgICAgICAgICAgIHBpY2tDb2RlOiBhRmlsZS5waWNrX2NvZGUsIC8v5Y+v6IO95LiN5LiA5qC3CiAgICAgICAgICAgICAgICBuYW1lOiBhRmlsZS5maWxlX25hbWUsCiAgICAgICAgICAgICAgICBwYXJlbnRJRDogYUZpbGUucGFyZW50X2lkCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGhpc3RvcnlGaWxlczsKICAgIH0KCiAgICBhc3luYyBmdW5jdGlvbiBnZXRMYXN0VXBsb2FkRmlsZXMoY291bnQsIGRlbGF5VGltZSA9IDIwMCwgcHJvY2Vzc0NhbGxiYWNrKSB7CiAgICAgICAgbGV0IGZpbGVzID0gW107CiAgICAgICAgbGV0IG9mZnNldCA9IDA7CiAgICAgICAgbGV0IGxpbWl0ID0gMTE1OwogICAgICAgIGxldCBsZWZ0Q291bnQgPSBjb3VudDsKICAgICAgICB3aGlsZSAobGVmdENvdW50ID49IGxpbWl0KSB7CiAgICAgICAgICAgIHByb2Nlc3NDYWxsYmFjayhg5q2j5Zyo6I635Y+W56ysJHtvZmZzZXQrMX0tJHtvZmZzZXQrbGltaXQrMX3kuKrmlofku7bmlbDmja4uLi5gKQogICAgICAgICAgICBsZXQgcmVzdWx0ID0gYXdhaXQgZ2V0VXBsb2FkSGlzdG9yeShvZmZzZXQsIGxpbWl0KTsKICAgICAgICAgICAgcmVzdWx0LmZvckVhY2goZiA9PiBmaWxlcy5wdXNoKGYpKTsKICAgICAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgbGltaXQ7CiAgICAgICAgICAgIGxlZnRDb3VudCA9IGxlZnRDb3VudCAtIGxpbWl0OwogICAgICAgICAgICBhd2FpdCBkZWxheShkZWxheVRpbWUpOwogICAgICAgIH0KICAgICAgICBpZiAobGVmdENvdW50ID4gMCkgewogICAgICAgICAgICBwcm9jZXNzQ2FsbGJhY2soYOato+WcqOiOt+WPluesrCR7b2Zmc2V0KzF9LSR7b2Zmc2V0K2xlZnRDb3VudCsxfeS4quaWh+S7tuaVsOaNri4uLmApCiAgICAgICAgICAgIGxldCByZXN1bHQgPSBhd2FpdCBnZXRVcGxvYWRIaXN0b3J5KG9mZnNldCwgbGVmdENvdW50KTsKICAgICAgICAgICAgcmVzdWx0LmZvckVhY2goZiA9PiBmaWxlcy5wdXNoKGYpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmaWxlczsKICAgIH0KCgogICAgLy/ojrflj5bnlJ/miJBzaGEx6ZyA6KaBcHJlaWQKICAgIC8vcmV0dXJuOiB7c3RhdGU6LGVycm9yOixmaWxlSXRlbTp9CiAgICBmdW5jdGlvbiBnZXRGaWxlSXRlbVByZWlkKGZpbGVJdGVtKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2dldEZpbGVJdGVtUHJlaWQnKQogICAgICAgIGNvbnNvbGUubG9nKGZpbGVJdGVtKTsKICAgICAgICBjb25zdCBmID0gZmlsZUl0ZW07CiAgICAgICAgbGV0IGZpbGVTaXplID0gcGFyc2VJbnQoZmlsZUl0ZW0uc2l6ZSk7CiAgICAgICAgaWYgKGZpbGVTaXplID09IDApIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGVycm9yTXNnID0gInswfSDmlofku7blpKflsI/kuLow77yM5bey57uP6Lez6L+H77yBIi5mb3JtYXQoZi5maWxlbmFtZSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJlcnJvck1zZyIpOwogICAgICAgICAgICAgICAgcmVzb2x2ZSh7CiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIGVycm9yOiAi5paH5Lu25aSn5bCP5Li6MO+8jOW3sue7j+i3s+i/h++8gSIsCiAgICAgICAgICAgICAgICAgICAgZmlsZUl0ZW06IGZpbGVJdGVtCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewoJCQkgIHZhciBkYXRhLCBrZXksIHRtLCB0bXVzOwoJCQkgIHRtdXMgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpOwoJCQkgIHRtID0gTWF0aC5mbG9vcih0bXVzIC8gMTAwMCk7CgkJCSAgdmFyIHRlc3Q9SlNPTi5zdHJpbmdpZnkoewoJCQkJcGlja2NvZGU6IGZpbGVJdGVtLnBpY2tDb2RlCgkJCSAgfSk7CgkJCSAgY29uc29sZS5sb2coZmlsZUl0ZW0ucGlja0NvZGUsdGVzdCx0bSk7CgkJCSAgKHtkYXRhLCBrZXl9ID0gbTExNV9lbmNvZGUodGVzdCwgdG0pKTsKICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgbWV0aG9kOiAiUE9TVCIsCiAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL3Byb2FwaS4xMTUuY29tL2FwcC9jaHJvbWUvZG93bnVybD90PScrdG0sCiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnLAogICAgICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvODMuMC40MTAzLjYxIFNhZmFyaS81MzcuMzYgMTE1QnJvd3Nlci8yMy45LjMuNicKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZXNwb25zZVR5cGU6ICdqc29uJywKICAgICAgICAgICAgICAgIGRhdGE6IFBvc3REYXRhKHsKICAgICAgICAgICAgICAgICAgICBkYXRhOiBlbmNvZGVVUklDb21wb25lbnQoZGF0YSkKICAgICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICAgb25sb2FkOiBmdW5jdGlvbiAocikgewogICAgICAgICAgICAgICAgICAgIGlmIChyLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRvd25sb2FkX2luZm8gPSByLnJlc3BvbnNlOwoKCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkb3dubG9hZF9pbmZvLnN0YXRlICYmIGRvd25sb2FkX2luZm8uZGF0YSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIganNvbiA9IG0xMTVfZGVjb2RlKGRvd25sb2FkX2luZm8uZGF0YSxrZXkpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coanNvbikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXJsID0gSlNPTi5wYXJzZShqc29uKVtmaWxlSXRlbS5pZF1bJ3VybCddWyd1cmwnXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL3RvZG865LiN6IO95LiL6L2955qE5paH5Lu25aSE55CGCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF1cmwuc3RhcnRzV2l0aCgiaHR0cDovL2NkbmZobmZkZnMuMTE1LmNvbSIpICYmIHVybC5zdGFydHNXaXRoKCdodHRwOi8vLycpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYGVycm9yIHVybDoke3VybH1gKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoImh0dHA6Ly8vIiwgImh0dHA6Ly9jZG5maG5mZGZzLjExNS5jb20vIikKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHVybCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3AgPSByLnJlc3BvbnNlSGVhZGVycwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzZXRDb29raWUgPSBEZWxldGVDb29raWUocmVzcCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlsZUNvb2tpZSA9IG51bGw7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldENvb2tpZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlQ29va2llID0gc2V0Q29va2llOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICJHRVQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogMTIwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJSYW5nZSI6ICJieXRlcz0wLTEzMTA3MiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29va2llIjogZmlsZUNvb2tpZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvODMuMC40MTAzLjYxIFNhZmFyaS81MzcuMzYgMTE1QnJvd3Nlci8yMy45LjMuNicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXJyYXlidWZmZXInLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjA2KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZV9idWZmID0gcmVzcG9uc2UucmVzcG9uc2U7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBuZXcgVWludDhBcnJheShwcmVfYnVmZik7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNoYTEgPSBuZXcganNTSEEoJ1NIQS0xJywgJ0FSUkFZQlVGRkVSJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhMS51cGRhdGUoZGF0YS5zbGljZSgwLCAxMjggKiAxMDI0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZWlkID0gc2hhMS5nZXRIYXNoKCdIRVgnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dFVwcGVyOiB0cnVlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUl0ZW0ucHJlaWQgPSBwcmVpZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUl0ZW06IGZpbGVJdGVtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiRm9yYmlkZGVuLCDlt7Lnu4/nlKg0MOS4qjDku6Pmm78iKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlSXRlbS5wcmVpZCA9ICIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwIjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUl0ZW06IGZpbGVJdGVtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZml4IHYzLjM6ICDkv67lpI00MDTmlofku7bml6Dms5XkuIvovb3lr7zoh7TljaF1aemXrumimCAgQOaMh+eOr+eOiwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuWPr+iDveaWh+S7tuaXoOazleS4i+i9veaIluiAhee9kee7nOmXrumimCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogIuS4i+i9veWHuumUme+8jOWPr+iDveaWh+S7tuaXoOazleS4i+i9veaIluiAhee9kee7nOmXrumimCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVJdGVtOiBmaWxlSXRlbQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbnRpbWVvdXQ6IGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIuS4i+i9vei2heaXtu+8jOWPr+iDveaWh+S7tuaXoOazleS4i+i9veaIluiAhee9kee7nOmXrumimCIpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogIuS4i+i9vei2heaXtu+8jOWPr+iDveaWh+S7tuaXoOazleS4i+i9veaIluiAhee9kee7nOmXrumimCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUl0ZW06IGZpbGVJdGVtCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogIuWcqOaPkOWPluS4reWPkeeUn+mUmeivry4uLiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVJdGVtOiBmaWxlSXRlbQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZG93bmxvYWRfaW5mbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGRvd25sb2FkX2luZm8ubXNnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVJdGVtOiBmaWxlSXRlbQogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihyZXNwb25zZS5yZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6ICLlnKjmj5Dlj5bkuK3lj5HnlJ/plJnor68uLi4iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUl0ZW06IGZpbGVJdGVtCiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHI7CiAgICB9CgoKICAgIHZhciB1dGY4QXJyYXlUb1N0ciA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGNoYXJDYWNoZSA9IG5ldyBBcnJheSgxMjgpOyAvLyBQcmVhbGxvY2F0ZSB0aGUgY2FjaGUgZm9yIHRoZSBjb21tb24gc2luZ2xlIGJ5dGUgY2hhcnMKICAgICAgICB2YXIgY2hhckZyb21Db2RlUHQgPSBTdHJpbmcuZnJvbUNvZGVQb2ludCB8fCBTdHJpbmcuZnJvbUNoYXJDb2RlOwogICAgICAgIHZhciByZXN1bHQgPSBbXTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhcnJheSkgewogICAgICAgICAgICB2YXIgY29kZVB0LCBieXRlMTsKICAgICAgICAgICAgdmFyIGJ1ZmZMZW4gPSBhcnJheS5sZW5ndGg7CgogICAgICAgICAgICByZXN1bHQubGVuZ3RoID0gMDsKCiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnVmZkxlbjspIHsKICAgICAgICAgICAgICAgIGJ5dGUxID0gYXJyYXlbaSsrXTsKCiAgICAgICAgICAgICAgICBpZiAoYnl0ZTEgPD0gMHg3RikgewogICAgICAgICAgICAgICAgICAgIGNvZGVQdCA9IGJ5dGUxOwogICAgICAgICAgICAgICAgfSBlbHNlIGlmIChieXRlMSA8PSAweERGKSB7CiAgICAgICAgICAgICAgICAgICAgY29kZVB0ID0gKChieXRlMSAmIDB4MUYpIDw8IDYpIHwgKGFycmF5W2krK10gJiAweDNGKTsKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYnl0ZTEgPD0gMHhFRikgewogICAgICAgICAgICAgICAgICAgIGNvZGVQdCA9ICgoYnl0ZTEgJiAweDBGKSA8PCAxMikgfCAoKGFycmF5W2krK10gJiAweDNGKSA8PCA2KSB8IChhcnJheVtpKytdICYgMHgzRik7CiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFN0cmluZy5mcm9tQ29kZVBvaW50KSB7CiAgICAgICAgICAgICAgICAgICAgY29kZVB0ID0gKChieXRlMSAmIDB4MDcpIDw8IDE4KSB8ICgoYXJyYXlbaSsrXSAmIDB4M0YpIDw8IDEyKSB8ICgoYXJyYXlbaSsrXSAmIDB4M0YpIDw8IDYpIHwgKGFycmF5W2krK10gJiAweDNGKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29kZVB0ID0gNjM7IC8vIENhbm5vdCBjb252ZXJ0IGZvdXIgYnl0ZSBjb2RlIHBvaW50cywgc28gdXNlICI/IiBpbnN0ZWFkCiAgICAgICAgICAgICAgICAgICAgaSArPSAzOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNoYXJDYWNoZVtjb2RlUHRdIHx8IChjaGFyQ2FjaGVbY29kZVB0XSA9IGNoYXJGcm9tQ29kZVB0KGNvZGVQdCkpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5qb2luKCcnKTsKICAgICAgICB9OwogICAgfSkoKTsKCiAgICBmdW5jdGlvbiBkb3dubG9hZEFGaWxlKGZpbGVJdGVtLCBwcm9ncmVzc0NhbGxiYWNrID0gZnVuY3Rpb24gKHRleHQpIHt9KSB7CiAgICAgICAgY29uc29sZS5sb2coImRvd25sb2FkQUZpbGUiKQogICAgICAgIGNvbnNvbGUubG9nKGZpbGVJdGVtKQogICAgICAgIGNvbnN0IHIgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CgkJCSB2YXIgZGF0YSwga2V5LCB0bSwgdG11czsKCQkJICB0bXVzID0gKG5ldyBEYXRlKCkpLmdldFRpbWUoKTsKCQkJICB0bSA9IE1hdGguZmxvb3IodG11cyAvIDEwMDApOwoJCQkgIHZhciB0ZXN0PUpTT04uc3RyaW5naWZ5KHsKCQkJCXBpY2tjb2RlOiBmaWxlSXRlbS5waWNrQ29kZQoJCQkgIH0pOwoJCQkgIGNvbnNvbGUubG9nKGZpbGVJdGVtLnBpY2tDb2RlLHRlc3QsdG0pOwoJCQkgICh7ZGF0YSwga2V5fSA9IG0xMTVfZW5jb2RlKHRlc3QsIHRtKSk7CiAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICAgICAgdXJsOiAnaHR0cHM6Ly9wcm9hcGkuMTE1LmNvbS9hcHAvY2hyb21lL2Rvd251cmw/dD0nK3RtLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJywKICAgICAgICAgICAgICAgICAgICAnVXNlci1BZ2VudCc6ICdNb3ppbGxhLzUuMCAoV2luZG93cyBOVCAxMC4wOyBXT1c2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzgzLjAuNDEwMy42MSBTYWZhcmkvNTM3LjM2IDExNUJyb3dzZXIvMjMuOS4zLjYnCiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnanNvbicsCiAgICAgICAgICAgICAgICBkYXRhOiBQb3N0RGF0YSh7CiAgICAgICAgICAgICAgICAgICAgZGF0YTogZW5jb2RlVVJJQ29tcG9uZW50KGRhdGEpCiAgICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoci5zdGF0dXMgPT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBkb3dubG9hZF9pbmZvID0gci5yZXNwb25zZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRvd25sb2FkX2luZm8uc3RhdGUgJiYgZG93bmxvYWRfaW5mby5kYXRhKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqc29uID0gbTExNV9kZWNvZGUoZG93bmxvYWRfaW5mby5kYXRhLGtleSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhqc29uKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cmwgPSBKU09OLnBhcnNlKGpzb24pW2ZpbGVJdGVtLmlkXVsndXJsJ11bJ3VybCddOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vdG9kbzrkuI3og73kuIvovb3nmoTmlofku7blpITnkIYKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXVybC5zdGFydHNXaXRoKCJodHRwOi8vY2RuZmhuZmRmcy4xMTUuY29tIikgJiYgdXJsLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8vJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgZXJyb3IgdXJsOiR7dXJsfWApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZSgiaHR0cDovLy8iLCAiaHR0cDovL2NkbmZobmZkZnMuMTE1LmNvbS8iKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codXJsKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzcCA9IHIucmVzcG9uc2VIZWFkZXJzCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNldENvb2tpZSA9IERlbGV0ZUNvb2tpZShyZXNwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaWxlQ29va2llID0gbnVsbDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0Q29va2llKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVDb29raWUgPSBzZXRDb29raWU7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogIkdFVCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogdXJsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29udGVudC1UeXBlIjogImFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiQ29va2llIjogZmlsZUNvb2tpZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvODMuMC40MTAzLjYxIFNhZmFyaS81MzcuMzYgMTE1QnJvd3Nlci8yMy45LjMuNicKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnYXJyYXlidWZmZXInLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHN0ciA9IHV0ZjhBcnJheVRvU3RyKG5ldyBVaW50OEFycmF5KHJlc3BvbnNlLnJlc3BvbnNlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogIiIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6IHN0cgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGByZXNwb25zZS5zdGF0dXM6JHtyZXNwb25zZS5zdGF0dXN9YCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbnByb2dyZXNzOiBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZXh0TXNnID0gYCR7ZXZlbnQubG9hZGVkfSBvZiAke2V2ZW50LnRvdGFsfSBieXRlcywgJHsoZXZlbnQubG9hZGVkL2V2ZW50LnRvdGFsKS50b0ZpeGVkKDQpKjEwMH0lYDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRleHRNc2cpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3NDYWxsYmFjayh0ZXh0TXNnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYCR7ZXJyb3J9YCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkb3dubG9hZF9pbmZvKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZG93bmxvYWRfaW5mby5tc2csCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogIiIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLkuIvovb3nrKzkuIDpmLbmrrUiKQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHJlc3BvbnNlLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogYOWcqOS4i+i9veS4reWPkeeUn+mUmeivry4uLiR7cmVzcG9uc2Uuc3RhdHVzfWAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OiAiIgogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICAgIHJldHVybiByOwogICAgfQoKICAgIC8vd2luZG93c+W5s+WPsOS4iumZkOWItueahOWtl+espu+8mi9cfCI6Kj88PiDlhbbku5blubPlj7Dmr5R3aW5kb3dz5a695rOb5LiA5LqbCiAgICBmdW5jdGlvbiByZXBhbGNlVmFsaWRhdGVkTmFtZShuYW1lKSB7CiAgICAgICAgcmV0dXJuIG5hbWUucmVwbGFjZSgvPC9nLCAnWycpCiAgICAgICAgICAgIC5yZXBsYWNlKC8+L2csICddJykKICAgICAgICAgICAgLnJlcGxhY2UoL1x8L2csICdfJykKICAgICAgICAgICAgLnJlcGxhY2UoLzovZywgJ18nKQogICAgICAgICAgICAucmVwbGFjZSgvXC8vZywgJ18nKQogICAgICAgICAgICAucmVwbGFjZSgvXFwvZywgJ18nKQogICAgICAgICAgICAucmVwbGFjZSgvXCovZywgJ18nKQogICAgICAgICAgICAucmVwbGFjZSgvIi9nLCAnXCcnKQogICAgICAgICAgICAucmVwbGFjZSgvXD8vZywgJ18nKTsKICAgIH0KICAgIC8v5qC85byP5YyWc2hhMSDpk77mjqUKICAgIC8vcmV0dXJuIHR5cGU6IHtzdGF0ZTpzdWNjZWVkLG1zZzoiIn0KICAgIC8vIGZhbHNlOm1zZy0+5Ye66ZSZ5L+h5oGvCiAgICAvL3RydWU6IG1zZy0+c2hhMemTvuaOpQogICAgZnVuY3Rpb24gY29udmVydFRvU2hhMUxpbmsoZmlsZUl0ZW0sIGlzU2ltcGxlRm9ybWF0KSB7CiAgICAgICAgdmFyIHN1Y2NlZWQgPSBmYWxzZTsKICAgICAgICB2YXIgbXNnID0gIuagvOW8j+eUn+aIkOWksei0pSEiOwogICAgICAgIGlmIChmaWxlSXRlbS5uYW1lICYmIGZpbGVJdGVtLnNpemUgJiYgZmlsZUl0ZW0uc2hhMSAmJiBmaWxlSXRlbS5wcmVpZCkgewogICAgICAgICAgICB2YXIgc2hhMUxpbmsgPSAiMTE1Oi8vIiArIHJlcGFsY2VWYWxpZGF0ZWROYW1lKGZpbGVJdGVtLm5hbWUpICsgInwiICsgZmlsZUl0ZW0uc2l6ZSArICJ8IiArIGZpbGVJdGVtLnNoYTEgKyAifCIgKyBmaWxlSXRlbS5wcmVpZDsKICAgICAgICAgICAgaWYgKCFpc1NpbXBsZUZvcm1hdCkgewogICAgICAgICAgICAgICAgaWYgKGZpbGVJdGVtLnBhdGhzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGZpbGVJdGVtLnBhdGhzKTsKICAgICAgICAgICAgICAgICAgICAvL2ZpeDogdjMuMyDnm67lvZXkuK3nmoTigJh84oCZ5oiW6ICF4oCYI+KAmeabv+aNouS4uuKAmC/igJks6Ziy5q2i6ISa5pys5a+85Ye65YaN5a+85YWl5pe256C05Z2P55uu5b2V57uT5p6ECiAgICAgICAgICAgICAgICAgICAgLy9maXg6IHYzLjQgd2luZG93c+W5s+WPsOS4iuS4jeiDvemZkOWItueahOWtl+espu+8mi9cfCI6Kj88PiAg5pu/5o2i77yb5Y675o6J5LqG6ICB54mI5pys55qEI+WIhumalOespgogICAgICAgICAgICAgICAgICAgIHZhciBwYXRocyA9IGZpbGVJdGVtLnBhdGhzLm1hcCh0ID0+IHJlcGFsY2VWYWxpZGF0ZWROYW1lKHQpKS5qb2luKCd8Jyk7CiAgICAgICAgICAgICAgICAgICAgbXNnID0gc2hhMUxpbmsgKyAnfCcgKyBwYXRoczsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbXNnID0gc2hhMUxpbms7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBtc2cgPSBzaGExTGluazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc3VjY2VlZCA9IHRydWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzdGF0ZTogc3VjY2VlZCwKICAgICAgICAgICAgbXNnOiBtc2cKICAgICAgICB9OwogICAgfQoKICAgIC8vIOS7jnNoYTFsaW5rIOi9rOaNouS4uiBGaWxlSXRlbQogICAgLy9yZXR1cm4gdHlwZTp7c3RhdGU6c3VjY2VlZCxmaWxlSXRlbTp7fX0KICAgIC8vdHJ1ZTogZmlsZUl0ZW0sIGZhbHNlOm51bGwKICAgIGZ1bmN0aW9uIGNvbnZlcnRGcm9tU2hhMUxpbmsoc2hhMUxpbmspIHsKICAgICAgICB2YXIgc3VjY2VlZCA9IGZhbHNlOwogICAgICAgIHZhciBpdGVtID0ge307CiAgICAgICAgaWYgKHNoYTFMaW5rKSB7CiAgICAgICAgICAgIGlmIChzaGExTGluay5zdGFydHNXaXRoKCIxMTU6Ly8iKSkgewogICAgICAgICAgICAgICAgc2hhMUxpbmsgPSBzaGExTGluay5zdWJzdHJpbmcoNik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy92My40IGFkZCDovazlrZjml7bvvIzmlofku7blkI3jgIHmlofku7blpLnlkI3mm7/mjaLpnZ7ms5XlrZfnrKYKICAgICAgICAgICAgdmFyIGluZm9zID0gc2hhMUxpbmsuc3BsaXQoJ3wnKTsKICAgICAgICAgICAgaWYgKGluZm9zLmxlbmd0aCA+PSA0KSB7CiAgICAgICAgICAgICAgICBpdGVtLmlkID0gIiI7CiAgICAgICAgICAgICAgICBpdGVtLnBpY2tDb2RlID0gIiI7CiAgICAgICAgICAgICAgICBpdGVtLm5hbWUgPSByZXBhbGNlVmFsaWRhdGVkTmFtZShpbmZvc1swXSk7CiAgICAgICAgICAgICAgICBpdGVtLnNpemUgPSBpbmZvc1sxXTsKICAgICAgICAgICAgICAgIGl0ZW0uc2hhMSA9IGluZm9zWzJdOwogICAgICAgICAgICAgICAgaXRlbS5wcmVpZCA9IGluZm9zWzNdOwogICAgICAgICAgICAgICAgaXRlbS5wYXJlbnRJRCA9ICIiOwogICAgICAgICAgICAgICAgaXRlbS5wYXRocyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAgICAgaWYgKGluZm9zLmxlbmd0aCA+IDQpIHsKICAgICAgICAgICAgICAgICAgICAvL2ZpeDogdjMuNCDnp7vpmaTkuobmraTlhbzlrrnvvIzlm6DkuLrlvIDmlL7kuoYj5L2c5Li655uu5b2V5ZCNCiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKGluZm9zLmxlbmd0aCA9PSA1ICYmIGluZm9zWzRdLmluY2x1ZGVzKCcjJykpIHsKICAgICAgICAgICAgICAgICAgICAvL+WFvOWuuSAj5a2X56ym5YiG5YmyCgogICAgICAgICAgICAgICAgICAgIC8vICAgIGl0ZW0ucGF0aHMgPSBpbmZvc1s0XS5zcGxpdCgnIycpOwogICAgICAgICAgICAgICAgICAgIC8vfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBpdGVtLnBhdGhzID0gaW5mb3Muc2xpY2UoNCkubWFwKHQgPT4gcmVwYWxjZVZhbGlkYXRlZE5hbWUodCkpOwogICAgICAgICAgICAgICAgICAgIC8vfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaXRlbS5leHRlbnNpb24gPSAiIjsKICAgICAgICAgICAgICAgIGl0ZW0uZm9ybWF0ZWROYW1lID0gIiI7CiAgICAgICAgICAgICAgICBzdWNjZWVkID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgc3RhdGU6IHN1Y2NlZWQsCiAgICAgICAgICAgIGZpbGVJdGVtOiBpdGVtCiAgICAgICAgfTsKICAgIH0KCgogICAgZnVuY3Rpb24gY3JlYXRlVXBsb2FkRmlsZSh1cmxEYXRhLCBwb3N0RGF0YSkgewogICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHsKICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovL3VwbGIuMTE1LmNvbS8zLjAvaW5pdHVwbG9hZC5waHA/JyArIHVybERhdGEsCiAgICAgICAgICAgICAgICBkYXRhOiBwb3N0RGF0YSwKICAgICAgICAgICAgICAgIHJlc3BvbnNlVHlwZTogJ2pzb24nLAogICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnLAogICAgICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvODMuMC40MTAzLjYxIFNhZmFyaS81MzcuMzYgMTE1QnJvd3Nlci8yNS4wLjAuMycsCiAgICAgICAgICAgICAgICAgICAgLy8nT3JpZ2luJzogJ2h0dHBzOi8vMTE1LmNvbScKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gewogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiAiIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGlja0NvZGU6ICIiCiAgICAgICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDAgJiYgcmVzcG9uc2UucmVzcG9uc2Uuc3RhdHVzID09PSAyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEuc3RhdGUgPSB0cnVlOwogICAgICAgICAgICAgICAgICAgICAgICBkYXRhLnBpY2tDb2RlID0gcmVzcG9uc2UucmVzcG9uc2UucGlja2NvZGU7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihyZXNwb25zZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlcnJvciA9ICLmiJborrhzaGEx6ZO+5o6l5LiN5Yy56YWNKD8pIjsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA1KSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9ICLpopHnuYHor7fmsYLvvIzooqsxMTXpmZDliLYgKFshXeeri+WNs+WBnOatou+8jOWwneivleWBnOatouaTjeS9nOWNiuWwj+aXtuaIluiAhemHjeaWsOeZu+W9lSnvvJoiICsgcmVzcG9uc2Uuc3RhdHVzVGV4dDsKICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5yZXNwb25zZSAmJiByZXNwb25zZS5yZXNwb25zZS5tZXNzYWdlKSBlcnJvciA9IHJlc3BvbnNlLnJlc3BvbnNlLm1lc3NhZ2U7CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHJlc3BvbnNlLnJlc3BvbnNlICYmIHJlc3BvbnNlLnJlc3BvbnNlLnN0YXR1c21zZykgZXJyb3IgPSAi5Y+v6IO95Y+C5pWw5LiN5q2j56GuKD8p77yaIiArIHJlc3BvbnNlLnJlc3BvbnNlLnN0YXR1c21zZzsKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS5lcnJvciA9IGVycm9yOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KQoKICAgICAgICB9KTsKICAgIH0KCiAgICAvL3JldHVybjp7c3RhdGU6ZmFsc2UsZXJyb3I6IiIsZmlsZUl0ZW06fTsKICAgIGZ1bmN0aW9uIHVwbG9hZEZpbGUodGFyZ2V0Rm9sZGVyLCBmaWxlSXRlbSwgdXBsb2FkSW5mbykgewoKICAgICAgICBsZXQgZkNpZCA9IGBVXzFfJHt0YXJnZXRGb2xkZXJ9YDsKICAgICAgICBsZXQgYXBwVmVyc2lvbiA9ICIyNS4wLjAuMyI7CiAgICAgICAgY29uc3Qgc2VjcmV0ID0gIlFjbG04TUdXVXY1OVRuclIwWFBnIgoKICAgICAgICBsZXQgdGltZSA9IChuZXcgRGF0ZSgpKS5nZXRUaW1lKCk7CiAgICAgICAgbGV0IHRzID0gTWF0aC5mbG9vcih0aW1lIC8gMTAwMCk7CgogICAgICAgIGxldCB1cGxvYWRUb2tlbiA9IG1kNShgJHtzZWNyZXR9JHtmaWxlSXRlbS5zaGExfSR7ZmlsZUl0ZW0uc2l6ZX0ke2ZpbGVJdGVtLnByZWlkfSR7dXBsb2FkSW5mby51c2VyX2lkfSR7dHN9JHttZDUodXBsb2FkSW5mby51c2VyX2lkKX0ke2FwcFZlcnNpb259YCkKCiAgICAgICAgbGV0IHVybERhdGEgPSBVcmxEYXRhKHsKICAgICAgICAgICAgaXNwOiAwLAogICAgICAgICAgICBhcHBpZDogMCwKICAgICAgICAgICAgdG9wdXBsb2FkOiAwLAogICAgICAgICAgICBydDogMCwKICAgICAgICAgICAgYXBwdmVyc2lvbjogYXBwVmVyc2lvbiwKICAgICAgICAgICAgZm9ybWF0OiAnanNvbicsCiAgICAgICAgICAgIHNpZzogR2V0U2lnKHVwbG9hZEluZm8udXNlcl9pZCwgZmlsZUl0ZW0uc2hhMSwgZkNpZCwgdXBsb2FkSW5mby51c2Vya2V5KSwKICAgICAgICAgICAgdDogdHMsCiAgICAgICAgICAgIHRva2VuOiB1cGxvYWRUb2tlbgogICAgICAgIH0pOwoKCiAgICAgICAgbGV0IHBvc3REYXRhID0gUG9zdERhdGEoewogICAgICAgICAgICBwcmVpZDogZmlsZUl0ZW0ucHJlaWQsCiAgICAgICAgICAgIGZpbGVpZDogZmlsZUl0ZW0uc2hhMSwKICAgICAgICAgICAgcXVpY2tpZDogZmlsZUl0ZW0uc2hhMSwKICAgICAgICAgICAgYXBwX3ZlcjogYXBwVmVyc2lvbiwKICAgICAgICAgICAgZmlsZW5hbWU6IGVuY29kZVVSSUNvbXBvbmVudChmaWxlSXRlbS5mb3JtYXRlZE5hbWUpLAogICAgICAgICAgICBmaWxlc2l6ZTogZmlsZUl0ZW0uc2l6ZSwKICAgICAgICAgICAgZXhpZjogJycsCiAgICAgICAgICAgIHRhcmdldDogZkNpZCwKICAgICAgICAgICAgdXNlcmlkOiB1cGxvYWRJbmZvLnVzZXJfaWQKCiAgICAgICAgfSk7CgogICAgICAgIGNvbnN0IHIgPSBjcmVhdGVVcGxvYWRGaWxlKHVybERhdGEsIHBvc3REYXRhKTsKCiAgICAgICAgY29uc3QgeCA9IHIudGhlbih0ID0+IHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbGUsIHJlamVjdCkgPT4gewogICAgICAgICAgICAgICAgZmlsZUl0ZW0uc3RhdGUgPSB0LnN0YXRlOwogICAgICAgICAgICAgICAgZmlsZUl0ZW0ucGlja0NvZGUgPSB0LnBpY2tDb2RlOwogICAgICAgICAgICAgICAgcmVzb2xlKHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZTogdC5zdGF0ZSwKICAgICAgICAgICAgICAgICAgICBlcnJvcjogdC5lcnJvciwKICAgICAgICAgICAgICAgICAgICBmaWxlSXRlbTogZmlsZUl0ZW0KICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9KQogICAgICAgIH0pOwoKICAgICAgICByZXR1cm4geDsKICAgIH0KCiAgICBmdW5jdGlvbiBzZXRMaXN0VmlldygpIHsKICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgIG1ldGhvZDogIlBPU1QiLAogICAgICAgICAgICB1cmw6ICdodHRwczovLzExNS5jb20vP2N0PXVzZXJfc2V0dGluZyZhYz1zZXQnLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YTogUG9zdERhdGEoewogICAgICAgICAgICAgICAgc2V0dGluZzogJ3sidmlld19maWxlIjoibGlzdCJ9JwogICAgICAgICAgICB9KSwKICAgICAgICAgICAgcmVzcG9uc2VUeXBlOiAnanNvbicsCiAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDApIHt9CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KCiAgICAvLyNlbmRyZWdpb24KCgoKICAgIGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVBhcmVudElEKGNpZCwgY25hbWUsIHRoaXNMZXZlbCwgbWF4TGV2ZWwsIGl0ZW1zLCBzbGVlcFRpbWUsIGNyZWF0ZUZvbGRlckNhbGxiYWNrKSB7CiAgICAgICAgaWYgKHRoaXNMZXZlbCA9PSBtYXhMZXZlbCkgcmV0dXJuOwogICAgICAgIGxldCBmaWxlcyA9IG5ldyBBcnJheSgpOwogICAgICAgIGlmICh0aGlzTGV2ZWwgPT0gMCkgewogICAgICAgICAgICBmaWxlcyA9IGl0ZW1zOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGZpbGVzID0gaXRlbXMuZmlsdGVyKGYgPT4gZi5wYXRoc1t0aGlzTGV2ZWwgLSAxXSA9PSBjbmFtZSk7CiAgICAgICAgfQoKICAgICAgICBsZXQgY2hpbGRGaWxlcyA9IGZpbGVzLmZpbHRlcihxID0+IHEucGF0aHMubGVuZ3RoID09IHRoaXNMZXZlbCk7CiAgICAgICAgbGV0IGNoaWxkRm9sZGVyTmFtZXMgPSBmaWxlcy5tYXAocSA9PiBxLnBhdGhzW3RoaXNMZXZlbF0pLmZpbHRlcihxID0+IHEpLmZpbHRlcigoeCwgaSwgYSkgPT4gYS5pbmRleE9mKHgpID09IGkpCgogICAgICAgIGNvbnNvbGUubG9nKGBjaGlsZEZpbGVzIO+8miR7Y2hpbGRGaWxlcy5sZW5ndGh9YCkKICAgICAgICAvL3VwbG9hZCBmaWxlOgogICAgICAgIGZvciAobGV0IGZpbGUgb2YgY2hpbGRGaWxlcykgewogICAgICAgICAgICBmaWxlLnBhcmVudElEID0gY2lkOwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKGZpbGUucGFyZW50SUQpOwogICAgICAgIH0KCiAgICAgICAgLy9jcmVhdGUgZm9sZGVyOgogICAgICAgIGZvciAobGV0IGZvbGRlck5hbWUgb2YgY2hpbGRGb2xkZXJOYW1lcykgewoKICAgICAgICAgICAgbGV0IHIgPSBhd2FpdCBjcmVhdGVSb290Rm9sZGVyKGNpZCwgZm9sZGVyTmFtZSwgMTAsIHNsZWVwVGltZSwgY2FsbGJhY2tNc2cgPT4gewogICAgICAgICAgICAgICAgY3JlYXRlRm9sZGVyQ2FsbGJhY2sgJiYgY3JlYXRlRm9sZGVyQ2FsbGJhY2soewogICAgICAgICAgICAgICAgICAgIHN0YXRlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIGZvbGRlck5hbWU6IGZvbGRlck5hbWUsCiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGNhbGxiYWNrTXNnCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSkKCiAgICAgICAgICAgIC8vZml4OiB2My40IOacieWQjOWQjeaWh+S7tuWkue+8jOWkhOeQhui3n+agueebruW9leebuOWQjOWkhOeQhuOAguWmguaenOi2hei/h+mHjeivleasoeaVsOeahOmAu+i+keacquWkhOeQhgogICAgICAgICAgICAvL2xldCByID0gYXdhaXQgYWRkRm9sZGVyKGNpZCwgZm9sZGVyTmFtZSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHIpOwoKICAgICAgICAgICAgaWYgKHIuc3RhdGUpIHsKICAgICAgICAgICAgICAgIGF3YWl0IHVwZGF0ZVBhcmVudElEKHIuY2lkLCBmb2xkZXJOYW1lLCB0aGlzTGV2ZWwgKyAxLCBtYXhMZXZlbCwgZmlsZXMsIGNyZWF0ZUZvbGRlckNhbGxiYWNrKTsKICAgICAgICAgICAgfSBlbHNlIHsgLy91aSDnm67lvZXliJvlu7rlpLHotKUKICAgICAgICAgICAgICAgIC8vdG9kbzog77yB77yB77yB5bCa5pyq6Kej5Yaz6L+Z5LiqCiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGB1cGRhdGVQYXJlbnRJRCAg5aaC5p6c5Ye6546w6L+Z5Liq77yM6K+05piO6YeN5aSN5ZCN5a2X55qE5paH5Lu25aS55Lmf5aSq5aSq5aSq5aSa5LqGYCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGF3YWl0IGRlbGF5KHNsZWVwVGltZSk7CiAgICAgICAgfQoKICAgIH0KCiAgICBmdW5jdGlvbiBpbnRlcm5lbEZvcm1hdChmb2xkZXIsIGZpbGVzLCBmb2xkZXJQYXJlbnRzKSB7CiAgICAgICAgdmFyIHBhdGhzID0gZm9sZGVyUGFyZW50cy5zbGljZSgwKTsKICAgICAgICBwYXRocy5wdXNoKGZvbGRlci5kaXJfbmFtZSk7CgogICAgICAgIGZvciAodmFyIGZpbGUgb2YgZm9sZGVyLmZpbGVzKSB7CgogICAgICAgICAgICB2YXIgbGluayA9IGZpbGUgKyAnfCcgKyBwYXRocy5zbGljZSgxKS5qb2luKCd8Jyk7CiAgICAgICAgICAgIGZpbGVzLnB1c2gobGluayk7CiAgICAgICAgfQoKICAgICAgICBmb3IgKHZhciBjaGlsZEZvbGRlciBvZiBmb2xkZXIuZGlycykgewoKICAgICAgICAgICAgaW50ZXJuZWxGb3JtYXQoY2hpbGRGb2xkZXIsIGZpbGVzLCBwYXRocykKICAgICAgICB9CiAgICB9CgogICAgLy97c3RhdGU6dHJ1ZSxlcnJvcjoiIix0ZXh0OiIifQogICAgZnVuY3Rpb24gZm9ybWF0SnNvblRvQ29tbW9uKHRleHQpIHsKCiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdmFyIHJvb3QgPSBKU09OLnBhcnNlKHRleHQpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhyb290KTsKICAgICAgICAgICAgdmFyIGZpbGVzID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgIHZhciBwYXRocyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICBpbnRlcm5lbEZvcm1hdChyb290LCBmaWxlcywgcGF0aHMpOwoKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHN0YXRlOiB0cnVlLAogICAgICAgICAgICAgICAgZXJyb3I6ICIiLAogICAgICAgICAgICAgICAgdGV4dDogZmlsZXMuam9pbignXHJcbicpLAogICAgICAgICAgICAgICAgcm9vdEZvbGRlcjogcm9vdC5kaXJfbmFtZQogICAgICAgICAgICB9OwogICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBzdGF0ZTogZmFsc2UsCiAgICAgICAgICAgICAgICBlcnJvcjogZXJyb3IsCiAgICAgICAgICAgICAgICB0ZXh0OiAiIgogICAgICAgICAgICB9OwogICAgICAgIH0KCiAgICB9CgogICAgLy/op6PmnpBpbmxpbmUgdGV4dCBzaGExIGxpbmtzLOW5tuagueaNrumFjee9ruiuvue9ruWIhumalOespjvov5Tlm55GaWxlQXJyYXkKICAgIGZ1bmN0aW9uIHBhcnNlU2hhMUxpbmtzVG9GaWxlQXJyYXkodGV4dCwgbmFtZVNlcGFyYXRvciwgZXJyb3JDYWxsYmFjaykgewogICAgICAgIGxldCB0ZXh0TGluZXMgPSB0ZXh0LnNwbGl0KC9ccj9cbi8pOwoKICAgICAgICBsZXQgZmlsZXMgPSBuZXcgQXJyYXkoKTsKICAgICAgICBmb3IgKGxldCBsaW5lIG9mIHRleHRMaW5lcykgewogICAgICAgICAgICBsZXQgZkxpbmUgPSBsaW5lLnRyaW0oKTsKICAgICAgICAgICAgaWYgKCFmTGluZSkgY29udGludWU7CiAgICAgICAgICAgIGxldCByID0gY29udmVydEZyb21TaGExTGluayhmTGluZSk7CiAgICAgICAgICAgIGlmIChyLnN0YXRlKSB7CiAgICAgICAgICAgICAgICBsZXQgbmFtZVN0cmluZ3MgPSByLmZpbGVJdGVtLm5hbWUuc3BsaXQoIi4iKTsKICAgICAgICAgICAgICAgIGxldCBleHRlbnNpb24gPSBuYW1lU3RyaW5ncy5wb3AoKTsKICAgICAgICAgICAgICAgIHIuZmlsZUl0ZW0uZXh0ZW5zaW9uID0gZXh0ZW5zaW9uOwogICAgICAgICAgICAgICAgLy/moLnmja7phY3nva7ph43mlrDorr7nva7mlofku7blkI0KICAgICAgICAgICAgICAgIGlmIChuYW1lU2VwYXJhdG9yKSB7CiAgICAgICAgICAgICAgICAgICAgLy/kvb/nlKhlbW91dGlscy5qc+W6k+adpeWIhuWJsu+8jOW4puaciWVtb2pp55qE5paH5Lu25ZCNCiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbGVOYW1lID0gZW1vamlVdGlscy50b0FycmF5KG5hbWVTdHJpbmdzLmpvaW4oJy4nKSkubWFwKGMgPT4gYyArIG5hbWVTZXBhcmF0b3IpLmpvaW4oIiIpLnNsaWNlKDAsIC0xKTsKICAgICAgICAgICAgICAgICAgICByLmZpbGVJdGVtLmZvcm1hdGVkTmFtZSA9IGZpbGVOYW1lICsgIi4iICsgZXh0ZW5zaW9uOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICByLmZpbGVJdGVtLmZvcm1hdGVkTmFtZSA9IHIuZmlsZUl0ZW0ubmFtZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGZpbGVzLnB1c2goci5maWxlSXRlbSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBlcnJvckNhbGxiYWNrICYmIGVycm9yQ2FsbGJhY2soYCR7ZkxpbmV9IOagvOW8j+mUmeivrz9gKTsKICAgICAgICAgICAgfQoKICAgICAgICB9CgogICAgICAgIHJldHVybiBmaWxlczsKICAgIH0KCiAgICAvL2ZpeDogdjMuNCDml7bpl7Tml6XmnJ/kuK3lkKvmnIkiLyIsIjoi5a+86Ie055uu5b2V5oiW6ICF5paH5Lu25LiL6L295aSx6LSlCiAgICBmdW5jdGlvbiBnZXRDdXJyZW50VGltZVN0cmluZygpIHsKICAgICAgICBsZXQgdGltZSA9IG5ldyBEYXRlKCk7CiAgICAgICAgbGV0IHRpbWVTdHJpbmcgPSBgJHt0aW1lLnRvTG9jYWxlU3RyaW5nKCl9ICgke3RpbWUuZ2V0TWlsbGlzZWNvbmRzKCl9KWA7CiAgICAgICAgcmV0dXJuIHRpbWVTdHJpbmcucmVwbGFjZSgvXC8vZywgIi4iKS5yZXBsYWNlKC86L2csICIuIikKICAgIH0KCiAgICAvL+WcqHRhcmdldENpZOS4i+WIm+W7uuebruW9le+8jOaIkOWKn+WImei/lOWbnuaWsOebruW9lWNpZO+8jOWQpuWImei/lOWbnuWOn2NpZDvov5Tlm57igJktMeKAmO+8jHRhcmdldOW3sue7j+iiq+enu+mZpOaIluiAheWIoOmZpAogICAgYXN5bmMgZnVuY3Rpb24gY3JlYXRlUm9vdEZvbGRlcih0YXJnZXRDaWQsIGZvbGRlck5hbWUsIHJldHJ5VGltZXMsIHNsZWVwVGltZSwgcHJvY2Vzc0NhbGxiYWNrKSB7CiAgICAgICAgbGV0IGNpZCA9IHRhcmdldENpZDsKICAgICAgICBsZXQgbmV3Rm9sZGVyTmFtZSA9IGZvbGRlck5hbWU7CgogICAgICAgIGlmIChmb2xkZXJOYW1lID09ICIiKSB7CgogICAgICAgICAgICBuZXdGb2xkZXJOYW1lID0gYGF1dG9fY3JlYXRlQCR7Z2V0Q3VycmVudFRpbWVTdHJpbmcoKX1gOwogICAgICAgIH0KCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXRyeVRpbWVzOyBpKyspIHsKCiAgICAgICAgICAgIGlmIChpICE9IDApIHsKCiAgICAgICAgICAgICAgICBuZXdGb2xkZXJOYW1lID0gYCR7Zm9sZGVyTmFtZT09IiI/ImF1dG9fY3JlYXRlIjpmb2xkZXJOYW1lfUAke2dldEN1cnJlbnRUaW1lU3RyaW5nKCl9YDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgcHJvY2Vzc0NhbGxiYWNrICYmIHByb2Nlc3NDYWxsYmFjayhg5q2j5Zyo6Ieq5Yqo5Yib5bu655uu5b2VJHtuZXdGb2xkZXJOYW1lfS4uLmApOwogICAgICAgICAgICBsZXQgdHIgPSBhd2FpdCBhZGRGb2xkZXIodGFyZ2V0Q2lkLCBuZXdGb2xkZXJOYW1lKTsKICAgICAgICAgICAgaWYgKHRyLnN0YXRlKSB7CiAgICAgICAgICAgICAgICBjaWQgPSB0ci5jaWQ7CiAgICAgICAgICAgICAgICBwcm9jZXNzQ2FsbGJhY2sgJiYgcHJvY2Vzc0NhbGxiYWNrKGDoh6rliqjliJvlu7rnm67lvZUke25ld0ZvbGRlck5hbWV95oiQ5Yqf77yBYCk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfSBlbHNlIHsKCiAgICAgICAgICAgICAgICBwcm9jZXNzQ2FsbGJhY2sgJiYgcHJvY2Vzc0NhbGxiYWNrKGDoh6rliqjliJvlu7rnm67lvZUke25ld0ZvbGRlck5hbWV95aSx6LSl77yB5Y6f5Zug77yaJHt0ci5lcnJvcn3vvIzlsIboh6rliqjlsJ3or5XmlrDnmoTlkI3lrZcuLi5gKTsKICAgICAgICAgICAgICAgIGlmICh0ci5lcnJvci5pbmNsdWRlcygn5LqR56uv55uu5b2V5LiN5a2Y5ZyoJykgfHwgdHIuZXJyb3IuaW5jbHVkZXMoJ+aWh+S7tuS4jeWtmOWcqOaIluW3suWIoOmZpCcpKSB7CiAgICAgICAgICAgICAgICAgICAgY2lkID0gJy0xJzsgLy/niLbnm67lvZXkuI3lrZjlnKjml7bnmoTmj5DnpLoKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGF3YWl0IGRlbGF5KHNsZWVwVGltZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGxldCBzdGF0ZSA9IGNpZCAhPSAnLTEnOwogICAgICAgIGxldCBlcnJvciA9IHN0YXRlID8gIiIgOiAi5LqR56uv55uu5b2V5LmL5YmN5bey57uP5Yig6Zmk77yM6K+36YeN5paw6YCJ5oup5L+d5a2Y5L2N572u77yBIgogICAgICAgIC8vdG9kbzrniLbnm67lvZXkuI3lrZjlnKjml7bnmoTmj5DnpLoKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBjaWQ6IGNpZCwKICAgICAgICAgICAgZm9sZGVyTmFtZTogbmV3Rm9sZGVyTmFtZSwKICAgICAgICAgICAgc3RhdGU6IHN0YXRlLAogICAgICAgICAgICBlcnJvcjogZXJyb3IKICAgICAgICB9OwogICAgfQoKICAgIGZ1bmN0aW9uIHVwbG9hZEZpbGVXaXRoVGltZU91dCh0aW1lT3V0LCBmaWxlUGFyZW50SUQsIGZpbGUsIHVwbG9hZEluZm8pIHsKICAgICAgICBjb25zb2xlLmxvZygndXBsb2FkRmlsZVdpdGhUaW1lT3V0JykKICAgICAgICBsZXQgdG8gPSBkZWxheSh0aW1lT3V0KS50aGVuKHQgPT4gewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgc3RhdGU6IGZhbHNlLAogICAgICAgICAgICAgICAgZXJyb3I6IGDnrYnlvoXkuIrkvKDnu5PmnpzotoXml7bvvIzmraTkuYPorablkYrvvIHmiJDlip/kuI7lkKbvvIznnIvmnIDlkI7nu5/orqHnu5PmnpzvvIFgLAogICAgICAgICAgICAgICAgZmlsZUl0ZW06IGZpbGUKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGxldCB1cCA9IHVwbG9hZEZpbGUoZmlsZVBhcmVudElELCBmaWxlLCB1cGxvYWRJbmZvKTsKCiAgICAgICAgcmV0dXJuIFByb21pc2UucmFjZShbdG8sIHVwXSk7CiAgICB9CgoKCiAgICBhc3luYyBmdW5jdGlvbiBwcm9jZXNzVXBsb2FkKGFsbEZpbGVzLCB3b3JraW5nTnVtYmVyLCBzbGVlcFRpbWUsIHJlc3VsdENhbGxiYWNrKSB7CiAgICAgICAgbGV0IGZpbGVBcnJheSA9IGFsbEZpbGVzLmZpbHRlcihxID0+ICFxLnN0YXRlKTsKICAgICAgICBsZXQgaW5kZXggPSAxOwogICAgICAgIGxldCBmaWxlTGVuZ3RoID0gYWxsRmlsZXMubGVuZ3RoOwogICAgICAgIGxldCBjb21wbGV0ZWQgPSBmaWxlTGVuZ3RoIC0gZmlsZUFycmF5Lmxlbmd0aDsKICAgICAgICBsZXQgcHJvbWlzQXJyYXkgPSBuZXcgQXJyYXkoKTsKICAgICAgICBsZXQgdXBsb2FkSW5mbyA9IGF3YWl0IGdldFVwbG9hZEluZm8oKTsKICAgICAgICBsZXQgbXNnOwogICAgICAgIGZvciAobGV0IGZpbGUgb2YgZmlsZUFycmF5KSB7CiAgICAgICAgICAgIGlmIChnZXRUYXNrQ2FuY2VsRmxhZygpKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygi6L2s5a2Y5Y+W5raIIik7CiAgICAgICAgICAgICAgICAvL3Bvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlBST0NFU1NJTkcsICLlt7Llj5bmtojvvIzmraPlnKjnrYnlvoXov5vooYzkuK3nmoTku7vliqHnu5PmnZ8uLi4iKSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlKTsKCiAgICAgICAgICAgIC8vbGV0IHIgPSB1cGxvYWRGaWxlKGZpbGUucGFyZW50SUQsIGZpbGUsIHVwbG9hZEluZm8pLnRoZW4odCA9PiB7CiAgICAgICAgICAgIGxldCByID0gdXBsb2FkRmlsZVdpdGhUaW1lT3V0KDgwMDAsIGZpbGUucGFyZW50SUQsIGZpbGUsIHVwbG9hZEluZm8pLnRoZW4odCA9PiB7CiAgICAgICAgICAgICAgICBjb21wbGV0ZWQgPSBjb21wbGV0ZWQgKyAxOwogICAgICAgICAgICAgICAgaWYgKHQuc3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICBtc2cgPSBgPGRpdiBhbGlnbj0icmlnaHQiPjxiPiR7Y29tcGxldGVkfTwvYj4gfCA8Yj4ke2ZpbGVMZW5ndGh9PC9iPjwvZGl2Pjxocj7jgJAgPGI+JHt0LmZpbGVJdGVtLm5hbWV9PC9iPiDjgJHkuIrkvKDmiJDlip8uYDsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHVwbG9hZEVycm9yID0gYOOAkCA8Yj4ke3QuZmlsZUl0ZW0ubmFtZX08L2I+IOOAke+8miAke3QuZXJyb3J9YDsKICAgICAgICAgICAgICAgICAgICByZXN1bHRDYWxsYmFjayAmJiByZXN1bHRDYWxsYmFjayh7CiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlOiBmYWxzZSwKICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiB1cGxvYWRFcnJvcgogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIG1zZyA9IGA8ZGl2IGFsaWduPSJyaWdodCI+PGI+JHtjb21wbGV0ZWR9PC9iPiB8IDxiPiR7ZmlsZUxlbmd0aH08L2I+PC9kaXY+PGhyPiR7dXBsb2FkRXJyb3J9YDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJlc3VsdENhbGxiYWNrICYmIHJlc3VsdENhbGxiYWNrKHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBtc2c6IG1zZwogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcHJvbWlzQXJyYXkucHVzaChyKTsKCiAgICAgICAgICAgIGlmIChpbmRleCAlIHdvcmtpbmdOdW1iZXIgPT0gMCkgewogICAgICAgICAgICAgICAgYXdhaXQgZGVsYXkoc2xlZXBUaW1lKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGluZGV4ICUgMTI4ID09IDApIHsKICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc0FycmF5KTsKICAgICAgICAgICAgICAgIGxldCBzZWNvbmRzID0gMzsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2Vjb25kczsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0Q2FsbGJhY2sgJiYgcmVzdWx0Q2FsbGJhY2soewogICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgbXNnOiBg6Ziy5q2iMTE15pyN5Yqh5Zmo6ZmQ5Yi277yM5pqC5YGc5Y+R5YyF44CCPGJyPjxicj4ke3NlY29uZHMgLSBpfeenkuWQjue7p+e7rS4uLi5gCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgZGVsYXkoMTAwMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBwcm9taXNBcnJheSA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGluZGV4ID0gaW5kZXggKyAxOwogICAgICAgIH0KCiAgICAgICAgYXdhaXQgZGVsYXkoNTAwKTsKICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNBcnJheSk7CgogICAgICAgIHJldHVybiBmaWxlQXJyYXk7CiAgICB9CgoKICAgIC8vIHYzLjMg6L2s5a2Y5pe26I635Y+W5paH5Lu25LuO5Y6G5Y+y5LiK5Lyg5Lit6I635Y+W77yM5aaC5p6c5paH5Lu25aS55LyX5aSa77yM5q2k5pa55qGI6YCf5bqm5LyY5Yq/5piO5pi+77yM5L2G5LiN5YWB6K645aSa6aG16Z2i5pON5L2cCiAgICBhc3luYyBmdW5jdGlvbiBwcm9jZXNzUmVuYW1lQnlVc2luZ0hpc3RvcnkoZmlsZXMsIHNlcGFyYXRvciwgc2xlZXBUaW1lLCByZXN1bHRDYWxsYmFjaykgewoKICAgICAgICBsZXQgaGlzdG9yeSA9IGF3YWl0IGdldExhc3RVcGxvYWRGaWxlcyhmaWxlcy5sZW5ndGgsIHNsZWVwVGltZSwgdCA9PiB7CiAgICAgICAgICAgIHJlc3VsdENhbGxiYWNrKHsKICAgICAgICAgICAgICAgIHN0YXRlOiB0cnVlLAogICAgICAgICAgICAgICAgbXNnOiB0CiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICByZXN1bHRDYWxsYmFjayh7CiAgICAgICAgICAgIHN0YXRlOiB0cnVlLAogICAgICAgICAgICBtc2c6ICLmraPlnKjnrYnlvoXph43lkb3lkI0uLi7lpoLmnpzmlofku7bovoPlpJrvvIzor7fnrYnlvoXvvJvmiJbogIXlgZzmraLvvIznrYnku6XlkI7miYvliqjmk43kvZzljrvpmaTliIbpmpTnrKbjgIIiCiAgICAgICAgfSk7CiAgICAgICAgLy9maXg6IHYzLjMuMSDkv67lpI3lkKvmnInph43lpI3mlofku7bnmoTml7blgJnvvIzmnKrmiYDmnInlrozmiJDph43lkb3lkI3nmoRidWcKICAgICAgICBoaXN0b3J5LmZvckVhY2gocSA9PiBxLmlzTWFya2VkID0gZmFsc2UpOwogICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykgewogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCJmaWxlIikKICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhmaWxlKQogICAgICAgICAgICBsZXQgdGhpc0ZpbGUgPSBoaXN0b3J5LmZpbmQocSA9PiBxLnNoYTEgPT0gZmlsZS5zaGExICYmIHEucGFyZW50SUQgPT0gZmlsZS5wYXJlbnRJRCAmJiBxLm5hbWUgPT0gZmlsZS5mb3JtYXRlZE5hbWUgJiYgIXEuaXNNYXJrZWQpOwogICAgICAgICAgICAvL2NvbnNvbGUubG9nKCJ0aGlzRmlsZSIpCiAgICAgICAgICAgIC8vY29uc29sZS5sb2codGhpc0ZpbGUpCiAgICAgICAgICAgIGlmICh0aGlzRmlsZSkgewogICAgICAgICAgICAgICAgZmlsZS5pZCA9IHRoaXNGaWxlLmlkOwogICAgICAgICAgICAgICAgdGhpc0ZpbGUuaXNNYXJrZWQgPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihg5Y6G5Y+y6K6w5b2V6YeM5pyq5om+5YiwICR7ZmlsZS5uYW1lfWApOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBsZXQgc2VsZWN0ZWRGaWxlcyA9IGZpbGVzLmZpbHRlcihmID0+IGYuZm9ybWF0ZWROYW1lLnNlYXJjaChzZXBhcmF0b3IpICE9IC0xICYmIGYuaWQpLm1hcChmID0+IHsKICAgICAgICAgICAgbGV0IGZvID0gewogICAgICAgICAgICAgICAgaWQ6IGYuaWQsCiAgICAgICAgICAgICAgICBuYW1lOiBmLmZvcm1hdGVkTmFtZS5zcGxpdChzZXBhcmF0b3IpLmpvaW4oIiIpCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybiBmbzsKICAgICAgICB9KTsKICAgICAgICBjb25zb2xlLmxvZyhzZWxlY3RlZEZpbGVzKQogICAgICAgIGxldCBpLCBqLCB0ZW1wb3JhcnksIGNodW5rID0gMTE1OwogICAgICAgIGZvciAoaSA9IDAsIGogPSBzZWxlY3RlZEZpbGVzLmxlbmd0aDsgaSA8IGo7IGkgKz0gY2h1bmspIHsKICAgICAgICAgICAgdGVtcG9yYXJ5ID0gc2VsZWN0ZWRGaWxlcy5zbGljZShpLCBpICsgY2h1bmspOwogICAgICAgICAgICByZXN1bHRDYWxsYmFjayAmJiByZXN1bHRDYWxsYmFjayh7CiAgICAgICAgICAgICAgICBzdGF0ZTogdHJ1ZSwKICAgICAgICAgICAgICAgIG1zZzogYOato+WcqOmHjeWRveWQjeesrCR7aSArIDF95YiwJHtpICsgdGVtcG9yYXJ5Lmxlbmd0aH3kuKrmlofku7YuLi5gCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBsZXQgcmVuYW1lUmVzdWx0ID0gYXdhaXQgcmVuYW1lRmlsZXModGVtcG9yYXJ5KTsKICAgICAgICAgICAgaWYgKHJlbmFtZVJlc3VsdC5zdGF0ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgcmVzdWx0Q2FsbGJhY2sgJiYgcmVzdWx0Q2FsbGJhY2soewogICAgICAgICAgICAgICAgICAgIHN0YXRlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIG1zZzogYOmHjeWRveWQjeesrCR7aSArIDF95YiwJHtpICsgdGVtcG9yYXJ5Lmxlbmd0aH3kuKrmlofku7bmiJDlip8hYAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXN1bHRDYWxsYmFjayAmJiByZXN1bHRDYWxsYmFjayh7CiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIG1zZzogcmVuYW1lUmVzdWx0LmVycm9yCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJlc3VsdENhbGxiYWNrICYmIHJlc3VsdENhbGxiYWNrKHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBtc2c6IGDph43lkb3lkI3nrKwke2kgKyAxfeWIsCR7aSArIDEgKyB0ZW1wb3JhcnkubGVuZ3RofeS4quaWh+S7tuS4reacieWksei0pe+8ge+8gSFgCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBhd2FpdCBkZWxheShzbGVlcFRpbWUpOwogICAgICAgIH0KCiAgICB9CgoKCiAgICBhc3luYyBmdW5jdGlvbiBwcm9jZXNzUmVuYW1lKHRhcmdldEZvbGRlckNpZCwgc2VwYXJhdG9yLCBzbGVlcFRpbWUsIHJlc3VsdENhbGxiYWNrKSB7CiAgICAgICAgbGV0IG9ubGluZUZpbGVzID0gbmV3IEFycmF5KCk7CiAgICAgICAgYXdhaXQgZ2V0QWxsRmlsZXModGFyZ2V0Rm9sZGVyQ2lkLCBvbmxpbmVGaWxlcywgdGFyZ2V0Rm9sZGVyQ2lkLCAoZm5hbWUsIHBJbmRleCkgPT4gewogICAgICAgICAgICBpZiAocEluZGV4ID4gMSkgewogICAgICAgICAgICAgICAgcmVzdWx0Q2FsbGJhY2sgJiYgcmVzdWx0Q2FsbGJhY2soewogICAgICAgICAgICAgICAgICAgIHN0YXRlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIG1zZzogYOato+WcqOiOt+WPliDjgJAke2ZuYW1lfeOAkSDkuIvnrKwgJHtwSW5kZXh9IOmhteeahOWGheWuuS4uLmAKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcmVzdWx0Q2FsbGJhY2sgJiYgcmVzdWx0Q2FsbGJhY2soewogICAgICAgICAgICAgICAgICAgIHN0YXRlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIG1zZzogYOato+WcqOiOt+WPliDjgJAke2ZuYW1lfeOAkSDkuIvnmoTlhoXlrrkuLi5gCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwoKCiAgICAgICAgbGV0IHNlbGVjdGVkRmlsZXMgPSBvbmxpbmVGaWxlcy5maWx0ZXIoZiA9PiBmLm5hbWUuc2VhcmNoKHNlcGFyYXRvcikgIT0gLTEpLm1hcChmID0+IHsKICAgICAgICAgICAgbGV0IGZvID0gewogICAgICAgICAgICAgICAgaWQ6IGYuaWQsCiAgICAgICAgICAgICAgICBuYW1lOiBmLm5hbWUuc3BsaXQoc2VwYXJhdG9yKS5qb2luKCIiKQogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gZm87CiAgICAgICAgfSk7CgogICAgICAgIGxldCBpLCBqLCB0ZW1wb3JhcnksIGNodW5rID0gMTE1OwogICAgICAgIGZvciAoaSA9IDAsIGogPSBzZWxlY3RlZEZpbGVzLmxlbmd0aDsgaSA8IGo7IGkgKz0gY2h1bmspIHsKICAgICAgICAgICAgdGVtcG9yYXJ5ID0gc2VsZWN0ZWRGaWxlcy5zbGljZShpLCBpICsgY2h1bmspOwogICAgICAgICAgICByZXN1bHRDYWxsYmFjayAmJiByZXN1bHRDYWxsYmFjayh7CiAgICAgICAgICAgICAgICBzdGF0ZTogdHJ1ZSwKICAgICAgICAgICAgICAgIG1zZzogYOato+WcqOmHjeWRveWQjeesrCR7aSArIDF95YiwJHtpICsgdGVtcG9yYXJ5Lmxlbmd0aH3kuKrmlofku7YuLi5gCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBsZXQgcmVuYW1lUmVzdWx0ID0gYXdhaXQgcmVuYW1lRmlsZXModGVtcG9yYXJ5KTsKICAgICAgICAgICAgaWYgKHJlbmFtZVJlc3VsdC5zdGF0ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgcmVzdWx0Q2FsbGJhY2sgJiYgcmVzdWx0Q2FsbGJhY2soewogICAgICAgICAgICAgICAgICAgIHN0YXRlOiB0cnVlLAogICAgICAgICAgICAgICAgICAgIG1zZzogYOmHjeWRveWQjeesrCR7aSArIDF95YiwJHtpICsgdGVtcG9yYXJ5Lmxlbmd0aH3kuKrmlofku7bmiJDlip8hYAogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICByZXN1bHRDYWxsYmFjayAmJiByZXN1bHRDYWxsYmFjayh7CiAgICAgICAgICAgICAgICAgICAgc3RhdGU6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgIG1zZzogcmVuYW1lUmVzdWx0LmVycm9yCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJlc3VsdENhbGxiYWNrICYmIHJlc3VsdENhbGxiYWNrKHsKICAgICAgICAgICAgICAgICAgICBzdGF0ZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBtc2c6IGDph43lkb3lkI3nrKwke2kgKyAxfeWIsCR7aSArIDEgKyB0ZW1wb3JhcnkubGVuZ3RofeS4quaWh+S7tuS4reacieWksei0pe+8ge+8gSFgCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBhd2FpdCBkZWxheShzbGVlcFRpbWUpOwogICAgICAgIH0KCiAgICB9CgogICAgLy/pgJrov4dzaGEx6ZO+5o6l6L2s5a2Y5paH5Lu2CiAgICAvL3VwbG9hZFNldHRpbmc6e3RhcmdldENpZCx0ZXh0LHJvb3RGb2xkZXI6e25lZWRUb0NyZWF0ZTp0cnVlLGZvbGRlck5hbWU6IiJ9LGl0ZW1OYW1lU2VwYXJhdG9yOntuZWVkVG9TZXBhcmF0ZTp0cnVlLHNlcGFyYXRvcjoiIn19CiAgICBhc3luYyBmdW5jdGlvbiBVcGxvYWRGaWxlc0J5U2hhMUxpbmtzKGNvbmZpZywgY29udGludWVkVGFza1NldHRpbmcgPSBudWxsKSB7CgogICAgICAgIGxldCB1cGxvYWRDb25maWcgPSBjb250aW51ZWRUYXNrU2V0dGluZyA9PSBudWxsID8gY29uZmlnIDogY29udGludWVkVGFza1NldHRpbmcudXBsb2FkQ29uZmlnOwogICAgICAgIGxldCBmb2xkZXJTbGVlcFRpbWUgPSB1cGxvYWRDb25maWcuZm9sZGVyU2V0dGluZy5zbGVlcFRpbWU7CiAgICAgICAgbGV0IG5hbWVTZXBhcmF0b3IgPSAiIjsKICAgICAgICBsZXQgbmV3VGFyZ2V0Q2lkID0gJy0xJzsKICAgICAgICBsZXQgZmlsZXM7CiAgICAgICAgbGV0IGZpbGVOYW1lID0gJyc7CgogICAgICAgIGlmIChjb250aW51ZWRUYXNrU2V0dGluZyA9PSBudWxsKSB7CiAgICAgICAgICAgIC8vZml4OiB2My40IOWcqOe6v+iOt+WPluWGheWuueWPr+iDveacieepuuagvCzkv67lpI3op6PmnpDlh7rplJkKICAgICAgICAgICAgbGV0IGZvcm1hdGVkVGV4dCA9IHVwbG9hZENvbmZpZy50ZXh0LnRyaW0oKTsKICAgICAgICAgICAgaWYgKCFmb3JtYXRlZFRleHQpIHJldHVybjsKICAgICAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuQkVHSU40VVBMT0FELCAi5q2j5Zyo6Kej5p6Qc2hhMemTvuaOpS4uLiIpKTsKCiAgICAgICAgICAgIC8v6Kej5p6QanNvbu+8jOi9rOS4umlubGluZSB0ZXh0O+W5tuS4lOS7jmpzb27kuK3ojrflj5Zyb290IGZvbGRlciBuYW1lCiAgICAgICAgICAgIGlmIChmb3JtYXRlZFRleHQuc3RhcnRzV2l0aCgneycpICYmIGZvcm1hdGVkVGV4dC5lbmRzV2l0aCgnfScpKSB7CiAgICAgICAgICAgICAgICBsZXQgciA9IGZvcm1hdEpzb25Ub0NvbW1vbihmb3JtYXRlZFRleHQpOwogICAgICAgICAgICAgICAgaWYgKHIuc3RhdGUpIHsKICAgICAgICAgICAgICAgICAgICB1cGxvYWRDb25maWcuZm9sZGVyU2V0dGluZy5yb290Rm9sZGVyLmZvbGRlck5hbWUgPSByLnJvb3RGb2xkZXI7CiAgICAgICAgICAgICAgICAgICAgZm9ybWF0ZWRUZXh0ID0gci50ZXh0OwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCJqc29uIOino+aekOWksei0pSIpOwogICAgICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLkVORDRVUExPQUQsICJqc29u6Kej5p6Q5aSx6LSl77yB5piv5LiN5piv5qC85byP5LiN5Yy56YWN77yBIikpOwogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAvL2pzb24g6Kej5p6Q5aSx6LSl77yM5o+Q56S677yM77yMCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8v6Kej5p6QaW5saW5lIHRleHQgc2hhMSBsaW5rcyzlubbmoLnmja7phY3nva7orr7nva7liIbpmpTnrKYKCiAgICAgICAgICAgIGlmICh1cGxvYWRDb25maWcuaXRlbU5hbWVTZXBhcmF0b3IubmVlZFRvU2VwYXJhdGUgJiYgdXBsb2FkQ29uZmlnLml0ZW1OYW1lU2VwYXJhdG9yLnNlcGFyYXRvcikgewogICAgICAgICAgICAgICAgbmFtZVNlcGFyYXRvciA9IHVwbG9hZENvbmZpZy5pdGVtTmFtZVNlcGFyYXRvci5zZXBhcmF0b3I7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZpbGVzID0gcGFyc2VTaGExTGlua3NUb0ZpbGVBcnJheShmb3JtYXRlZFRleHQsIG5hbWVTZXBhcmF0b3IsIGVycm9yTXNnID0+IHsKICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLkVSUk9SLCBlcnJvck1zZykpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmIChmaWxlcy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuRU5ELCBg5pyq6I635Y+W5Yiw5pyJ5pWI55qE6ZO+5o6l77yBYCkpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5QUk9DRVNTSU5HLCBg6I635Y+W5Yiw6ZO+5o6l5Liq5pWw77yaJHtmaWxlcy5sZW5ndGh9YCkpOwogICAgICAgICAgICBhd2FpdCBkZWxheSg1MDApOwoKICAgICAgICAgICAgLy/moLnnm67lvZXorr7nva4KICAgICAgICAgICAgLy/moLnmja7phY3nva7ph43mlrDorr7nva50YXJnZXRDaWQKICAgICAgICAgICAgbmV3VGFyZ2V0Q2lkID0gdXBsb2FkQ29uZmlnLnRhcmdldENpZDsKCiAgICAgICAgICAgIGlmICh1cGxvYWRDb25maWcuZm9sZGVyU2V0dGluZy5yb290Rm9sZGVyLm5lZWRUb0NyZWF0ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgbGV0IHJvb3RGb2xkZXJOYW1lID0gdXBsb2FkQ29uZmlnLmZvbGRlclNldHRpbmcucm9vdEZvbGRlci5mb2xkZXJOYW1lOwogICAgICAgICAgICAgICAgbGV0IHJvb3QgPSBhd2FpdCBjcmVhdGVSb290Rm9sZGVyKG5ld1RhcmdldENpZCwgcm9vdEZvbGRlck5hbWUsIDExLCBmb2xkZXJTbGVlcFRpbWUgKiAyLCBtc2cgPT4gewogICAgICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlBST0NFU1NJTkcsIG1zZykpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgZmlsZU5hbWUgPSByb290LmZvbGRlck5hbWU7CiAgICAgICAgICAgICAgICBuZXdUYXJnZXRDaWQgPSByb290LmNpZDsKICAgICAgICAgICAgICAgIGF3YWl0IGRlbGF5KDUwMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc29sZS5sb2coYG5ld1RhcmdldENpZDogJHtuZXdUYXJnZXRDaWR9YCk7CgogICAgICAgICAgICBpZiAobmV3VGFyZ2V0Q2lkID09ICItMSIpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLpgInmi6nnmoTkv53lrZjlpITmlofku7blpLnlt7Lnu4/ooqvliKDpmaTmiJbogIXnp7vliqgiKTsKICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLkVORCwgIuiHquWKqOWIm+W7uuagueebruW9leWHuumUme+8miAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxici8+6YCJ5oup55qE5L+d5a2Y5aSE5paH5Lu25aS5LOW3sue7j+iiq+WIoOmZpOaIluiAheenu+WKqO+8jOivt+mHjeaWsOmAieaLqeS/neWtmOS9jee9ru+8gSIpKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy/lrZDnm67lvZXorr7nva4KICAgICAgICAgICAgZmlsZXMuZm9yRWFjaChmID0+IHsKICAgICAgICAgICAgICAgIGYucGFyZW50SUQgPSBuZXdUYXJnZXRDaWQ7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgaWYgKHVwbG9hZENvbmZpZy5mb2xkZXJTZXR0aW5nLm5vdENyZWF0ZUFueUNoaWxkRm9sZGVyID09PSBmYWxzZSkgLy/lj6/ku6XliJvlu7rnm67lvZUKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coIumcgOimgeWIm+W7uuWtkOebruW9lSIpOwogICAgICAgICAgICAgICAgLy/moLnmja7phY3nva7orr7nva7mr4/kuKrmlofku7bnmoRwYXJlbnQgaWQKICAgICAgICAgICAgICAgIC8v5pyA5aSn55qE5bGC5qyhCiAgICAgICAgICAgICAgICBsZXQgbWF4TGV2ZWwgPSBNYXRoLm1heC5hcHBseShNYXRoLCBmaWxlcy5tYXAoZSA9PiBlLmxlbmd0aCkpOwogICAgICAgICAgICAgICAgbGV0IGxldmVsID0gMDsKICAgICAgICAgICAgICAgIC8vY2lk5pu05pawCiAgICAgICAgICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5QUk9DRVNTSU5HLCBg5q2j5Zyo6YWN572u5a2Q55uu5b2V55qE55Sf5oiQLi4uYCkpOwogICAgICAgICAgICAgICAgYXdhaXQgdXBkYXRlUGFyZW50SUQobmV3VGFyZ2V0Q2lkLCAnJywKICAgICAgICAgICAgICAgICAgICBsZXZlbCwgbWF4TGV2ZWwsIGZpbGVzLCBmb2xkZXJTbGVlcFRpbWUgKiAxLjUsIHQgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgc3QgPSB0LnN0YXRlID8gIuaIkOWKny4iIDogIuWksei0pe+8ge+8ge+8gSAiICsgdC5lcnJvcjsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG1zZyA9IGDliJvlu7rlrZDnm67lvZUgPGI+JHt0LmZvbGRlck5hbWV9PC9iPiAke3N0fWA7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlBST0NFU1NJTkcsIG1zZykpOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXQuc3RhdGUpIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLkVSUk9SLCBtc2cpKTsKICAgICAgICAgICAgICAgICAgICB9KTsKCgogICAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbmV3VGFyZ2V0Q2lkID0gY29udGludWVkVGFza1NldHRpbmcudGFyZ2V0Q2lkOwogICAgICAgICAgICBmaWxlcyA9IGNvbnRpbnVlZFRhc2tTZXR0aW5nLmRhdGE7CiAgICAgICAgICAgIGZpbGVOYW1lID0gY29udGludWVkVGFza1NldHRpbmcuZmlsZU5hbWU7CiAgICAgICAgfQoKICAgICAgICB3aW5kb3cucGFyZW50LmRvY3VtZW50Lm15RGF0YSA9IGZpbGVzOwogICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlNIT1dDQU5DRWwpKTsKICAgICAgICBjb25zb2xlLmxvZyhmaWxlcy5sZW5ndGgpOwogICAgICAgIC8v5paH5Lu25LiK5LygCiAgICAgICAgYXdhaXQgcHJvY2Vzc1VwbG9hZChmaWxlcywgdXBsb2FkQ29uZmlnLnVwbG9hZC53b3JraW5nTnVtYmVyLCB1cGxvYWRDb25maWcudXBsb2FkLnNsZWVwVGltZSwgcmVzdWx0ID0+IHsKICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuUFJPQ0VTU0lORywgcmVzdWx0Lm1zZykpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuRVJST1IsIHJlc3VsdC5tc2cpKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGxldCBpc1Rhc2tDYW5jZWxlZCA9IGdldFRhc2tDYW5jZWxGbGFnKCk7CgogICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLkhJREVDQU5DRUwpKTsKCiAgICAgICAgLy/moLnmja7phY3nva7vvIzph43lkb3lkI3mlofku7YKICAgICAgICBpZiAodXBsb2FkQ29uZmlnLml0ZW1OYW1lU2VwYXJhdG9yLm5lZWRUb1NlcGFyYXRlICYmCiAgICAgICAgICAgIHVwbG9hZENvbmZpZy5pdGVtTmFtZVNlcGFyYXRvci5uZWVkVG9SZW1vdmVTZXBhcmF0b3IgJiYKICAgICAgICAgICAgdXBsb2FkQ29uZmlnLml0ZW1OYW1lU2VwYXJhdG9yLnNlcGFyYXRvciAmJgogICAgICAgICAgICAhaXNUYXNrQ2FuY2VsZWQpIHsKICAgICAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuUFJPQ0VTU0lORywgIuW8gOWni+iOt+WPluaWh+S7tu+8jOW5tuiHquWKqOmHjeWRveWQjS4uLiIpKTsKICAgICAgICAgICAgYXdhaXQgZGVsYXkoZm9sZGVyU2xlZXBUaW1lKTsKICAgICAgICAgICAgY29uc29sZS5sb2coZmlsZXMpCiAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NSZW5hbWVCeVVzaW5nSGlzdG9yeShmaWxlcywgdXBsb2FkQ29uZmlnLml0ZW1OYW1lU2VwYXJhdG9yLnNlcGFyYXRvciwgZm9sZGVyU2xlZXBUaW1lLCByZXN1bHQgPT4gewogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0ZSA9PT0gdHJ1ZSkgewogICAgICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlBST0NFU1NJTkcsIHJlc3VsdC5tc2cpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuRVJST1IsIHJlc3VsdC5tc2cpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vIGF3YWl0IHByb2Nlc3NSZW5hbWUobmV3VGFyZ2V0Q2lkLCB1cGxvYWRDb25maWcuaXRlbU5hbWVTZXBhcmF0b3Iuc2VwYXJhdG9yLCBmb2xkZXJTbGVlcFRpbWUsIHJlc3VsdCA9PiB7CiAgICAgICAgICAgIC8vICAgICBpZiAocmVzdWx0LnN0YXRlID09PSB0cnVlKSB7CiAgICAgICAgICAgIC8vICAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuUFJPQ0VTU0lORywgcmVzdWx0Lm1zZykpOwogICAgICAgICAgICAvLyAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5FUlJPUiwgcmVzdWx0Lm1zZykpOwogICAgICAgICAgICAvLyAgICAgfQogICAgICAgICAgICAvLyB9KTsKCiAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlBST0NFU1NJTkcsICLmlofku7bmibnph4/ljrvpmaTliIbpmpTnrKbvvIjph43lkb3lkI3vvInlrozmiJDvvIEiKSk7CiAgICAgICAgICAgIGF3YWl0IGRlbGF5KGZvbGRlclNsZWVwVGltZSAqIDIpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGZhaWxzID0gZmlsZXMuZmlsdGVyKHEgPT4gIXEuc3RhdGUpOwogICAgICAgIHZhciBmYWlsVGV4dCA9IGZhaWxzLm1hcChmdW5jdGlvbiAocCkgewogICAgICAgICAgICB2YXIgciA9IGNvbnZlcnRUb1NoYTFMaW5rKHAsIGZhbHNlKTsKICAgICAgICAgICAgcmV0dXJuIHIubXNnOwogICAgICAgIH0pLmpvaW4oIlxyXG4iKTsKCiAgICAgICAgaWYgKGZhaWxUZXh0KSBHTV9zZXRDbGlwYm9hcmQoZmFpbFRleHQpOwogICAgICAgIGlmIChpc1Rhc2tDYW5jZWxlZCkgewogICAgICAgICAgICAvL3RvZG865Y+W5raI6L2s5a2YCiAgICAgICAgICAgIGxldCBmaWxlX25hbWUgPSBmaWxlTmFtZSArICJf6L2s5a2YX+acquWujOaIkC43dGFzayI7CiAgICAgICAgICAgIGxldCBkYXRhID0gZmlsZXMubWFwKGYgPT4gewogICAgICAgICAgICAgICAgYGxldCB0ZW1wRmlsZT17CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJRDpmLnBhcmVudElELAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTpmLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplOmYuc2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYTE6Zi5zaGExLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlaWQ6Zi5wcmVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgfTtgCiAgICAgICAgICAgICAgICBsZXQgdGVtcEZpbGUgPSBbCiAgICAgICAgICAgICAgICAgICAgZi5wYXJlbnRJRCwgZi5uYW1lLCBmLmZvcm1hdGVkTmFtZSwgZi5zaXplLCBmLnNoYTEsIGYucHJlaWQsIGYuc3RhdGUKICAgICAgICAgICAgICAgIF07CiAgICAgICAgICAgICAgICByZXR1cm4gdGVtcEZpbGU7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB1cGxvYWRDb25maWcudGV4dCA9ICcnOwogICAgICAgICAgICBsZXQgdGFza0pzb24gPSB7CiAgICAgICAgICAgICAgICB0YXNrVHlwZTogVGFza1R5cGUuVVBMT0FELAogICAgICAgICAgICAgICAgdGFyZ2V0Q2lkOiBuZXdUYXJnZXRDaWQsCiAgICAgICAgICAgICAgICBmaWxlTmFtZTogZmlsZU5hbWUsCiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhLAogICAgICAgICAgICAgICAgdXBsb2FkQ29uZmlnOiB1cGxvYWRDb25maWcKICAgICAgICAgICAgfTsKICAgICAgICAgICAgbGV0IHRleHQgPSBKU09OLnN0cmluZ2lmeSh0YXNrSnNvbikKICAgICAgICAgICAgZG93bmxvYWQoZmlsZV9uYW1lLCB0ZXh0KTsKCiAgICAgICAgfQoKICAgICAgICBsZXQgbXNnID0gYOWujOaIkOS4iuS8oO+8geaIkOWKnyA8Yj4keyhmaWxlcy5sZW5ndGggLSBmYWlscy5sZW5ndGgpfTwvYj4g77yM5aSx6LSl5oiW6ICF5Y+W5raIIDxiPiR7ZmFpbHMubGVuZ3RofTwvYj5cCiAgICAgICAgICAgICAgICA8YnI+PGJyPuWmguaenOacieWksei0pe+8jOW3suWwhuWksei0pXNoYTHpk77mjqXlpI3liLbliLDliarotLTmnb/vvIHlpoLmnpzovazlrZjlpLHotKXvvIzor7fmo4Dmn6VzaGEx6ZO+5o6l5qC85byP5oiW6ICF5ZyoIGNocm9tZSDkuIrlsJ3or5XovazlrZjjgIJcCiAgICAgICAgICAgICAgICDojrflj5bmnIDmlrDniYjvvIzmiJbogIXpgYfliLDpl67popjljrvmraTlj43ppojvvIzmhJ/osKIgIeeCueWHuy0+IDxhIGhyZWY9IiR7VElQUy5VcGRhdGVVcmx9IiB0YXJnZXQ9Il9ibGFuayI+JHtUSVBTLlZlcnNpb25UaXBzfTwvYT5gOwogICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLkVORDRVUExPQUQsIG1zZywgbmV3VGFyZ2V0Q2lkKSk7CgogICAgfQoKCgogICAgZnVuY3Rpb24gZ2V0RmlsZUl0ZW1QcmVpZFdpdGhUaW1lT3V0KHRpbWVPdXQsIGZpbGUpIHsKICAgICAgICBjb25zb2xlLmxvZygnZ2V0RmlsZUl0ZW1QcmVpZFdpdGhUaW1lT3V0JykKICAgICAgICBsZXQgdG8gPSBkZWxheSh0aW1lT3V0KS50aGVuKHQgPT4gewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgc3RhdGU6IGZhbHNlLAogICAgICAgICAgICAgICAgZXJyb3I6IGDnrYnlvoXmj5Dlj5bnu5PmnpzotoXml7bvvIzmraTkuYPorablkYrvvIzmiJDlip/kuI7lkKbnnIvmnIDlkI7nu5PmnpzvvIFgLAogICAgICAgICAgICAgICAgZmlsZUl0ZW06IGZpbGUKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGxldCB1cCA9IGdldEZpbGVJdGVtUHJlaWQoZmlsZSk7CgogICAgICAgIHJldHVybiBQcm9taXNlLnJhY2UoW3RvLCB1cF0pOwogICAgfQoKCiAgICBmdW5jdGlvbiBHZXRGaWxlSXRlbUJ5bGlOb2RlKGxpTm9kZSkgewoKICAgICAgICB2YXIgcEl0ZW0gPSB7CiAgICAgICAgICAgIGlkOiAiIiwKICAgICAgICAgICAgcGFyZW50SUQ6ICIiLAogICAgICAgICAgICBpc0ZvbGRlcjogZmFsc2UsCiAgICAgICAgICAgIG5hbWU6ICIiLAogICAgICAgICAgICBzaXplOiAwLAogICAgICAgICAgICBwaWNrQ29kZTogIiIsCiAgICAgICAgICAgIHNoYTE6ICIiLAogICAgICAgICAgICBwYXRoczogW10sCiAgICAgICAgICAgIHByZWlkOiAiIiwKICAgICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlCgogICAgICAgIH07CgogICAgICAgIHZhciB0eXBlID0gbGlOb2RlLmdldEF0dHJpYnV0ZSgiZmlsZV90eXBlIik7CiAgICAgICAgcEl0ZW0ubmFtZSA9IGxpTm9kZS5nZXRBdHRyaWJ1dGUoJ3RpdGxlJyk7CiAgICAgICAgcEl0ZW0ucGFyZW50SUQgPSBsaU5vZGUuZ2V0QXR0cmlidXRlKCdwX2lkJyk7CgogICAgICAgIHZhciBpc1NlbGVjdGVkID0gbGlOb2RlLmdldEF0dHJpYnV0ZSgnY2xhc3MnKTsKICAgICAgICBpZiAoaXNTZWxlY3RlZCA9PSAic2VsZWN0ZWQiKSBwSXRlbS5zZWxlY3RlZCA9IHRydWU7CgogICAgICAgIGlmICh0eXBlID09ICIwIikgewogICAgICAgICAgICBwSXRlbS5pZCA9IGxpTm9kZS5nZXRBdHRyaWJ1dGUoJ2NhdGVfaWQnKTsKICAgICAgICAgICAgcEl0ZW0uaXNGb2xkZXIgPSB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHBJdGVtLnNpemUgPSBsaU5vZGUuZ2V0QXR0cmlidXRlKCdmaWxlX3NpemUnKTsKICAgICAgICAgICAgcEl0ZW0uc2hhMSA9IGxpTm9kZS5nZXRBdHRyaWJ1dGUoJ3NoYTEnKTsKICAgICAgICAgICAgcEl0ZW0ucGlja0NvZGUgPSBsaU5vZGUuZ2V0QXR0cmlidXRlKCdwaWNrX2NvZGUnKTsKICAgICAgICAgICAgcEl0ZW0uaWQgPSBsaU5vZGUuZ2V0QXR0cmlidXRlKCdmaWxlX2lkJyk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcEl0ZW07CiAgICB9CgogICAgY29uc3QgRklMRVNJWkUgPSAxMjggKiAxMDI0OwogICAgYXN5bmMgZnVuY3Rpb24gSW5uZXJDcmVhdGVTaGExTGlua3MoYWxsRmlsZXMsIHR4dE5hbWUpIHsKICAgICAgICB2YXIgbXNnID0gIiI7CiAgICAgICAgdmFyIGluZGV4ID0gMTsKICAgICAgICB2YXIgY29tcGxldGVkSW5kZXggPSAxOwogICAgICAgIHZhciBwcm9taXNBcnJheSA9IG5ldyBBcnJheSgpOwoKICAgICAgICBmb3IgKGxldCBmaWxlIG9mIGFsbEZpbGVzKSB7CiAgICAgICAgICAgIGxldCBmaWxlU2l6ZSA9IHBhcnNlSW50KGZpbGUuc2l6ZSk7CiAgICAgICAgICAgIGZpbGUuc2l6ZSA9IGZpbGVTaXplOwogICAgICAgICAgICBpZiAoIWZpbGUucHJlaWQgJiYgZmlsZS5zaXplIDw9IEZJTEVTSVpFKSB7CiAgICAgICAgICAgICAgICBmaWxlLnByZWlkID0gZmlsZS5zaGExOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBsZXQgZmlsZXMgPSBhbGxGaWxlcy5maWx0ZXIoZiA9PiAhZi5wcmVpZCk7CiAgICAgICAgY29tcGxldGVkSW5kZXggPSBhbGxGaWxlcy5sZW5ndGggLSBmaWxlcy5sZW5ndGg7CiAgICAgICAgdmFyIGd0MTIwMGZpbGVzID0gZmlsZXMubGVuZ3RoID49IDEyMDA7CiAgICAgICAgY29uc29sZS5sb2coYD49MTIwMDogJHtndDEyMDBmaWxlc31gKTsKICAgICAgICAvL3Bvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlBST0NFU1NJTkcsIGDmgLvorqEke2FsbEZpbGVzLmxlbmd0aH0s5bey5a6M5oiQJHtjb21wbGV0ZWRJbmRleH1gKSk7CiAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuU0hPV0NBTkNFbCkpCiAgICAgICAgZm9yICh2YXIgZmlsZSBvZiBmaWxlcykgewoKCiAgICAgICAgICAgIGxldCB0YXNrQ2FuY2VsRmxhZyA9IGdldFRhc2tDYW5jZWxGbGFnKCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhc2tDYW5jZWxGbGFnKTsKICAgICAgICAgICAgaWYgKHRhc2tDYW5jZWxGbGFnID09PSB0cnVlKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygiSW5uZXJDcmVhdGVTaGExTGlua3MgaGFzIENhbmNlbGVkIik7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgY29uc3QgZiA9IGZpbGU7CgogICAgICAgICAgICAvLyBnZXRGaWxlSXRlbVByZWlkCiAgICAgICAgICAgIGNvbnN0IHIgPSBnZXRGaWxlSXRlbVByZWlkV2l0aFRpbWVPdXQoMjAwMDAsIGYpLnRoZW4oKHQpID0+IHsKICAgICAgICAgICAgICAgIGlmICh0LnN0YXRlKSB7CiAgICAgICAgICAgICAgICAgICAgbXNnID0gJzxkaXYgYWxpZ249InJpZ2h0Ij48Yj57MH08L2I+IHwgPGI+ezF9PC9iPjwvZGl2Pjxocj7ojrflj5bjgJAgPGI+ezJ9PC9iPiDjgJHnmoRzaGEx6ZO+5o6l5oiQ5YqfJy5mb3JtYXQoY29tcGxldGVkSW5kZXgsIGFsbEZpbGVzLmxlbmd0aCwgdC5maWxlSXRlbS5uYW1lKTsKICAgICAgICAgICAgICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5QUk9DRVNTSU5HLCBtc2cpKQogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBtc2cgPSAnPGRpdiBhbGlnbj0icmlnaHQiPjxiPnswfTwvYj4gfCA8Yj57MX08L2I+PC9kaXY+PGhyPuiOt+WPluOAkCA8Yj57Mn08L2I+IOOAkeeahHNoYTHpk77mjqXvvJp7M30nLmZvcm1hdChjb21wbGV0ZWRJbmRleCwgYWxsRmlsZXMubGVuZ3RoLCB0LmZpbGVJdGVtLm5hbWUsIHQuZXJyb3IpOwogICAgICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlBST0NFU1NJTkcsIG1zZykpCiAgICAgICAgICAgICAgICAgICAgdmFyIGZpbGVQYXRoID0gdC5maWxlSXRlbS5wYXRocy5qb2luKCIgPiAiKTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlUGF0aCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGVQYXRoKSBtc2cgPSAiezB9LOWOn+WboO+8mnsxfSzot6/lvoTvvJp7Mn0iLmZvcm1hdCh0LmZpbGVJdGVtLm5hbWUsIHQuZXJyb3IsIGZpbGVQYXRoKTsKICAgICAgICAgICAgICAgICAgICBlbHNlIG1zZyA9ICJ7MH0s5Y6f5Zug77yaezF9Ii5mb3JtYXQodC5maWxlSXRlbS5uYW1lLCB0LmVycm9yKTsKCiAgICAgICAgICAgICAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuRVJST1IsIG1zZykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29tcGxldGVkSW5kZXggPSBjb21wbGV0ZWRJbmRleCArIDE7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcHJvbWlzQXJyYXkucHVzaChyKTsKCiAgICAgICAgICAgIC8v6Ieq5bex5pS55Luj56CB5ZCn77yM5oCO5LmI5byE5o+Q5Y+W6YC76L6R44CC44CC5aSq5oWi77yM6ICX5pe26ZW/77yb5aSq5b+r77yMMTE15a655piT5rKh5Y+N5bqUCiAgICAgICAgICAgIGlmIChpbmRleCAlIFdPUktTRVRUSU5HUy5Xb3JraW5nSXRlbXNOdW1iZXIgPT0gMCkgewogICAgICAgICAgICAgICAgYXdhaXQgZGVsYXkoV09SS1NFVFRJTkdTLlNsZWVwTW9yZVRpbWUgKiAxLjUpOwogICAgICAgICAgICAgICAgaWYgKGluZGV4ICUgKFdPUktTRVRUSU5HUy5Xb3JraW5nSXRlbXNOdW1iZXIgKiA5KSA9PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwocHJvbWlzQXJyYXkpOwogICAgICAgICAgICAgICAgICAgIGxldCBzZWNvbmRzID0gMjsKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlY29uZHM7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5QUk9DRVNTSU5HLCBg6Ziy5q2iMTE15pyN5Yqh5Zmo6ZmQ5Yi277yM5pqC5YGc5Y+R5YyF5Lit44CCPGJyPjxicj4ke3NlY29uZHMgLSBpfeenkuWQjue7p+e7rS4uLmApKTsKICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgZGVsYXkoMTAwMCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHByb21pc0FycmF5ID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vCiAgICAgICAgICAgIGluZGV4ID0gaW5kZXggKyAxOwogICAgICAgIH0KCgogICAgICAgIGF3YWl0IFByb21pc2UuYWxsKHByb21pc0FycmF5KTsKCiAgICAgICAgdmFyIHN1Y2NlZWRBcnJheSA9IGFsbEZpbGVzLmZpbHRlcihxID0+IHEucHJlaWQpOwogICAgICAgIGlmIChzdWNjZWVkQXJyYXkubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGNvbnZlcnRUb1NoYTFMaW5rKHN1Y2NlZWRBcnJheVswXSwgZmFsc2UpOwogICAgICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5DTE9TRSwgIiIpKTsKCiAgICAgICAgICAgIHNldFRpbWVvdXQocyA9PiB7CiAgICAgICAgICAgICAgICBwcm9tcHQoIuWkjeWItuWIhuS6q+mTvuaOpeWIsOWJqui0tOadvyIsIHMpOwogICAgICAgICAgICB9LCAxMDAsIHJlc3VsdC5tc2cpOwoKICAgICAgICB9IGVsc2UgewoKCiAgICAgICAgICAgIGlmIChzdWNjZWVkQXJyYXkubGVuZ3RoID4gMSkgewoKICAgICAgICAgICAgICAgIGxldCBmaWxlX25hbWUgPSB0eHROYW1lICsgIl9zaGExLnR4dCI7CiAgICAgICAgICAgICAgICBsZXQgdGV4dCA9ICIiOwoKCiAgICAgICAgICAgICAgICBpZiAoZ2V0VGFza0NhbmNlbEZsYWcoKSkgewogICAgICAgICAgICAgICAgICAgIGZpbGVfbmFtZSA9IHR4dE5hbWUgKyAiX+aPkOWPll/mnKrlrozmiJAuN3Rhc2siOwogICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gYWxsRmlsZXMubWFwKGYgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBgbGV0IHRlbXBGaWxlPXsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOmYuaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJRDpmLnBhcmVudElELAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTpmLm5hbWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplOmYuc2l6ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhdGhzOmYucGF0aHMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaWNrQ29kZTpmLnBpY2tDb2RlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhMTpmLnNoYTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVpZDpmLnByZWlkLAogICAgICAgICAgICAgICAgICAgICAgICB9O2AKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXBGaWxlID0gWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5pZCwgZi5wYXJlbnRJRCwgZi5uYW1lLCBmLnNpemUsIGYucGF0aHMsIGYucGlja0NvZGUsIGYuc2hhMSwgZi5wcmVpZCwKICAgICAgICAgICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRlbXBGaWxlOwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGxldCB0YXNrSnNvbiA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgdGFza1R5cGU6IFRhc2tUeXBlLkRPV05MT0FELAogICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZTogdHh0TmFtZSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IEpTT04uc3RyaW5naWZ5KHRhc2tKc29uKQogICAgICAgICAgICAgICAgICAgIC8vdG9kbzrlj5bmtojku7vliqEKCiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRleHQgPSBhbGxGaWxlcy5maWx0ZXIocSA9PiBxLnByZWlkKS5tYXAoZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHIgPSBjb252ZXJ0VG9TaGExTGluayhwLCBmYWxzZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByLm1zZzsKICAgICAgICAgICAgICAgICAgICB9KS5qb2luKCJcclxuIik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBkb3dubG9hZChmaWxlX25hbWUsIHRleHQpOwogICAgICAgICAgICB9CgoKCiAgICAgICAgICAgIG1zZyA9IGAKICAgICAgICAgICAg5a6M5oiQ44CQIDxiPiR7dHh0TmFtZX08L2I+IOOAkeaPkOWPlu+8gTxocj48YnI+CiAgICAgICAgICAgIOaAu+WFsTxiPiR7YWxsRmlsZXMubGVuZ3RofTwvYj4g77yM5Y+W5raI5oiW6ICF5aSx6LSlIDxiPiR7YWxsRmlsZXMubGVuZ3RoLXN1Y2NlZWRBcnJheS5sZW5ndGh9PC9iPuOAgjxicj4KICAgICAgICAgICAg5Y+W5raI5ZCO77yM6Iul5pyq56e75Yqo5paH5Lu25aS577yM5Y+v5a+85YWl57un57ut5o+Q5Y+W44CCPGJyPgogICAgICAgICAgICDngrnlh7stPiA8YSBocmVmPSIke1RJUFMuVXBkYXRlVXJsfSIgdGFyZ2V0PSJfYmxhbmsiPiR7VElQUy5WZXJzaW9uVGlwc308L2E+77yM6I635Y+W5pyA5paw54mI5LiO5Y+N6aaI77yBCiAgICAgICAgICAgIGA7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKG1zZyk7CiAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLkVORCwgbXNnKSk7CiAgICAgICAgfQogICAgfQoKICAgIGFzeW5jIGZ1bmN0aW9uIENyZWF0ZVNoYTFMaW5rc0FsbChpdGVtcywgdGFza05hbWUpIHsKICAgICAgICAvL3VpOiDojrflj5bmlofku7bkuK0uLi4KICAgICAgICB2YXIgbXNnID0gIuato+WcqOiOt+WPluaWh+S7ti4uLiI7CiAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuQkVHSU4sIG1zZykpOwogICAgICAgIHZhciBmaWxlcyA9IG5ldyBBcnJheSgpOwogICAgICAgIGZvciAobGV0IGl0ZW0gb2YgaXRlbXMpIHsKICAgICAgICAgICAgaWYgKGdldFRhc2tDYW5jZWxGbGFnKCkpIGJyZWFrOwoKICAgICAgICAgICAgaWYgKCFpdGVtLmlzRm9sZGVyKSB7CiAgICAgICAgICAgICAgICBmaWxlcy5wdXNoKGl0ZW0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgbXNnID0gYOato+WcqOiOt+WPliAke2l0ZW0ubmFtZX0g5LiL55qE5YaF5a65Li4uYDsKICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlBST0NFU1NJTkcsIG1zZykpOwogICAgICAgICAgICAgICAgbGV0IGNoaWxkcmVuID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICAgICBhd2FpdCBnZXRBbGxGaWxlcyhpdGVtLmlkLCBjaGlsZHJlbiwgaXRlbS5pZCwgKGZuYW1lLCBwSW5kZXgpID0+IHsKICAgICAgICAgICAgICAgICAgICBpZiAocEluZGV4ID4gMSkgewogICAgICAgICAgICAgICAgICAgICAgICBtc2cgPSBg5q2j5Zyo6I635Y+WIOOAkCR7Zm5hbWV944CRIOS4i+esrCAke3BJbmRleH0g6aG155qE5YaF5a65Li4uYDsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBtc2cgPSBg5q2j5Zyo6I635Y+WIOOAkCR7Zm5hbWV944CRIOS4i+eahOWGheWuuS4uLmA7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlBST0NFU1NJTkcsIG1zZykpOwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgZm9yIChsZXQgZiBvZiBjaGlsZHJlbikgewogICAgICAgICAgICAgICAgICAgIGYucGF0aHMudW5zaGlmdChpdGVtLm5hbWUpOwogICAgICAgICAgICAgICAgICAgIGZpbGVzLnB1c2goZik7CiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgaWYgKCFmaWxlcyB8fCBmaWxlcy5sZW5ndGggPT0gMCkgewogICAgICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5FTkQsIGDmnKrpgInkuK3ku7vkvZXlhoXlrrk/Pz9gKSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlBST0NFU1NJTkcsIGDojrflj5bliLAg44CQPGI+JHt0YXNrTmFtZX08L2I+44CRIOeahOWGheWuuSAke2ZpbGVzLmxlbmd0aH0g6aG5YCkpOwogICAgICAgIGF3YWl0IGRlbGF5KDEwMCk7CiAgICAgICAgaWYgKGdldFRhc2tDYW5jZWxGbGFnKCkpIHsKICAgICAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuRU5ELCAi5bey57uP5Y+W5raI5Lu75Yqh77yBIikpOwogICAgICAgIH0gZWxzZSBJbm5lckNyZWF0ZVNoYTFMaW5rcyhmaWxlcywgdGFza05hbWUpOwogICAgfQoKCiAgICBhc3luYyBmdW5jdGlvbiBDcmVhdGVTaGExTGlua3MoaXRlbSkgewogICAgICAgIC8vdWk6IOiOt+WPluaWh+S7tuS4rS4uLgogICAgICAgIHZhciBtc2cgPSAi5q2j5Zyo6I635Y+W5paH5Lu2Li4uIjsKICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5CRUdJTiwgbXNnKSk7CiAgICAgICAgdmFyIGZpbGVzID0gbmV3IEFycmF5KCk7CgogICAgICAgIGlmICghaXRlbS5pc0ZvbGRlcikgewogICAgICAgICAgICBmaWxlcy5wdXNoKGl0ZW0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG1zZyA9IGDmraPlnKjojrflj5YgJHtpdGVtLm5hbWV9IOS4i+eahOWGheWuuS4uLmA7CiAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlBST0NFU1NJTkcsIG1zZykpOwoKICAgICAgICAgICAgYXdhaXQgZ2V0QWxsRmlsZXMoaXRlbS5pZCwgZmlsZXMsIGl0ZW0uaWQsIChmbmFtZSwgcEluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICBpZiAocEluZGV4ID4gMSkgewogICAgICAgICAgICAgICAgICAgIG1zZyA9ICLmraPlnKjojrflj5Yg44CQezB944CRIOS4i+esrCB7MX0g6aG155qE5YaF5a65Li4uIi5mb3JtYXQoZm5hbWUsIHBJbmRleCk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIG1zZyA9ICLmraPlnKjojrflj5Yg44CQezB944CRIOS4i+eahOWGheWuuS4uLiIuZm9ybWF0KGZuYW1lKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlBST0NFU1NJTkcsIG1zZykpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIGlmICghZmlsZXMgfHwgZmlsZXMubGVuZ3RoID09IDApIHsKICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLkVORCwgIuOAkDxiPnswfTwvYj4g44CR56m655uu5b2VPz8/Ii5mb3JtYXQoaXRlbS5uYW1lKSkpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5QUk9DRVNTSU5HLCAi6I635Y+W5YiwIOOAkDxiPnswfTwvYj7jgJEg55qE5YaF5a65IHsxfSDpobkiLmZvcm1hdChpdGVtLm5hbWUsIGZpbGVzLmxlbmd0aCkpKTsKICAgICAgICBhd2FpdCBkZWxheSgxMDApOwogICAgICAgIGlmIChnZXRUYXNrQ2FuY2VsRmxhZygpKSB7CiAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLkVORCwgIuW3sue7j+WPlua2iOS7u+WKoe+8gSIpKTsKICAgICAgICB9IGVsc2UgSW5uZXJDcmVhdGVTaGExTGlua3MoZmlsZXMsIGl0ZW0ubmFtZSk7CiAgICB9CgogICAgY29uc3QgYXV0b0NyZWF0ZVJvb3RGb2xkZXJUaXBzID0gewogICAgICAgIG1zZzogYHNoYTHovazlrZjml7bvvIzlvLrliLblnKjkv53lrZjlpITmlrDlu7rmoLnnm67lvZVgLAogICAgICAgIGRldGFpbHM6IGDpgInmi6nml7Y6JiMwMTM7JiMwMTA7MS7mlrDlu7rmoLnnm67lvZXlkI3mnaXoh6pzaGEx6L2s5a2Y5paH5Lu25ZCN5oiW6ICFanNvbuS4reeahOagueWFg+e0oOOAglwKICAgICAgICAmIzAxMzsmIzAxMDsyLuWmguaenOayoeaciSzliJnlvZPliY3ml7bpl7TkuLrmlofku7blkI3nlJ/miJDjgIJgCiAgICB9OwoKICAgIGNvbnN0IGF1dG9DcmVhdGVSb290Rm9sZGVyU3RyaW5nID0KICAgICAgICBgPGRpdiBjbGFzcz0ibGlua3Rhc2stcXVvdGEiIHN0eWxlPSJoZWlnaHQ6IDQwcHg7ZGlzcGxheTogYmxvY2siPlwKICAgICAgICA8YT4ke2F1dG9DcmVhdGVSb290Rm9sZGVyVGlwcy5tc2d9PC9hPlwKICAgICAgICA8ZGl2IGNsYXNzPSJoZWxwIiB0aXRsZT0iICR7YXV0b0NyZWF0ZVJvb3RGb2xkZXJUaXBzLmRldGFpbHN9Ij48YT48L2E+PC9kaXY+XAogICAgICAgIDxzcGFuPiZuYnNwOyZuYnNwOzwvc3Bhbj48ZGl2IGNsYXNzPSJvcHRpb24tc3dpdGNoIiBzdHlsZT0idG9wOjEwcHg7bGVmdDoxMHB4Ij5cCiAgICAgICAgPGlucHV0IHR5cGU9ImNoZWNrYm94IiBjaGVja2VkPSJ0cnVlIiBpZD0ibmVBdXRvQ3JlYXRlUm9vdGZvbGRlciIgb25jbGljaz0iZnVuY3Rpb24gZigpIHtyZXR1cm4gZmFsc2V9Ij5cCiAgICAgICAgPGxhYmVsIGZvcj48aT7lvIDlkK88L2k+PHM+5YWz6ZetPC9zPjxiPuWIh+aNojwvYj48L2xhYmVsPjwvZGl2PmA7CgogICAgY29uc3Qgbm90Q3JlYXRlQW55Q2hpbGRGb2xkZXJUaXBzID0gewogICAgICAgIG1zZzogYHNoYTHovazlrZjml7bvvIzkuI3liJvlu7rku7vkvZXlrZDnm67lvZVgLAogICAgICAgIGRldGFpbHM6IGDpgInkuK3ml7bvvIzkuI3kvJroh6rliqjliJvlu7rku7vkvZXlrZDnm67lvZXjgILmraTpobnkuI7moLnnm67lvZXkuI3kvJrlvbHlk43vvIFgCiAgICB9OwoKICAgIGNvbnN0IG5vdENyZWF0ZUFueUNoaWxkRm9sZGVyU3RyaW5nID0KICAgICAgICBgPGRpdiBpZD0ibmVOb3RDcmVhdGVBbnlDaGlsZEZvbGRlclBhcmVudCIgY2xhc3M9Imxpbmt0YXNrLXF1b3RhIiBzdHlsZT0iaGVpZ2h0OiA0MHB4O2Rpc3BsYXk6IGJsb2NrIj5cCiAgICAgICAgPGE+JHtub3RDcmVhdGVBbnlDaGlsZEZvbGRlclRpcHMubXNnfTwvYT5cCiAgICAgICAgPGRpdiBjbGFzcz0iaGVscCIgdGl0bGU9IiAke25vdENyZWF0ZUFueUNoaWxkRm9sZGVyVGlwcy5kZXRhaWxzfSI+PGE+PC9hPjwvZGl2PlwKICAgICAgICA8c3Bhbj4mbmJzcDsmbmJzcDs8L3NwYW4+PGRpdiBjbGFzcz0ib3B0aW9uLXN3aXRjaCIgc3R5bGU9InRvcDoxMHB4O2xlZnQ6MTBweCI+XAogICAgICAgIDxpbnB1dCB0eXBlPSJjaGVja2JveCIgY2hlY2tlZD0idHJ1ZSIgaWQ9Im5lTm90Q3JlYXRlQW55Q2hpbGRGb2xkZXIiIG9uY2xpY2s9ImZ1bmN0aW9uIGYoKSB7cmV0dXJuIGZhbHNlfSI+XAogICAgICAgIDxsYWJlbCBmb3I+PGk+5byA5ZCvPC9pPjxzPuWFs+mXrTwvcz48Yj7liIfmjaI8L2I+PC9sYWJlbD48L2Rpdj5gOwoKICAgIGNvbnN0IHNlbGVjdEZpbGVUaXBzID0gewogICAgICAgIG1zZzogYOaIluiAheWvvOWFpXNoYTHpk77mjqXmlofku7bvvIh0eHQvanNvbu+8iWAsCiAgICAgICAgZGV0YWlsczogYOWmguaenOS4jeiDveato+ehruaYvuekuumAieaLqeaWh+S7tuaMiemSru+8jOWPr+iDveaYr+S4juWFtuS7luiEmuacrOaIluiAheaPkuS7tuWGsueqge+8ge+8gWAKICAgIH07CiAgICBjb25zdCBzZWxlY3RGaWxlU3RyaW5nID0gYDxkaXYgaWQ9Im5lRmlsZSI+CiAgICA8ZGl2IGlkPSJuZUZpbGVPbmxpbmUiPgogICAgPHNwYW4gc3R5bGU9ImRpc3BsYXk6ZmxleDttYXJnaW4tdG9wOiAxMHB4OyI+5bey57uP6YCJ5oup5Zyo57q/5paH5Lu2OjxwIHN0eWxlPSJjb2xvcjpyZWQiIGlkPSJuZU9ubGluZUZpbGVOYW1lIj48L3A+PC9zcGFuPgogICAgPC9kaXY+CiAgICA8ZGl2IGlkPSJuZUZpbGVVcGxvYWQiID4KICAgIDxkaXYgY2xhc3M9Imxpbmt0YXNrLXF1b3RhIiBzdHlsZT0ibWFyZ2luLXRvcDogMTBweDsiPlwKICAgICAgICA8YT4ke3NlbGVjdEZpbGVUaXBzLm1zZ308L2E+XAogICAgICAgIDxkaXYgY2xhc3M9ImhlbHAiIHRpdGxlPSIke3NlbGVjdEZpbGVUaXBzLmRldGFpbHN9Ij48YT48L2E+PC9kaXY+XAogICAgICAgIDxzcGFuPiZuYnNwOyZuYnNwOzwvc3Bhbj48aW5wdXQgdHlwZT0iZmlsZSIgaWQ9Im5lU2VsZWN0RmlsZSIgYWNjZXB0PSIudHh0LC5qc29uIiBzdHlsZT0iZGlzcGxheTpibG9jaztjb2xvcjojMjc3N0Y4O3Zpc2liaWxpdHk6IHZpc2libGU7Ij48L2lucHV0PjwvZGl2PgogICAgPC9kaXY+CiAgICA8L2Rpdj5gOwoKICAgIGNvbnN0IG90aGVyU2V0dGluZ1N0cmluZyA9IGA8ZGl2IGNsYXNzPSJsaW5rdGFzay1xdW90YSIgc3R5bGU9Im1hcmdpbi10b3A6IDEwcHg7ZGlzcGxheTpub25lOyI+XAogICAgICAgIOWIhumalOespuaIluiAheWFtuS7lumAiemhue+8mjxhIGlkPSJuZVNldHRpbmcxIiBocmVmPSJqYXZhc2NyaXB0OjsiIHN0eWxlPSJjb2xvcjojMjc3N0Y4Ij7ngrnmraTorr7nva48L2E+44CCXAogICAgICAgIDwvZGl2PmAKCgogICAgY29uc3QgaGVhZGVyU3RyaW5nID0gYDxkaXYgaWQ9Im5lMTE1dGlwc2ZvcmhlYWRlciI+JHtUSVBTLlZlcnNpb25UaXBzfSgke1RJUFMuTGFzdFVwZGF0ZURhdGV9KSxcCiAgICA8YSBzdHlsZT0iY29sb3I6cmVkOyIgdGFyZ2V0PSJfYmxhbmsiIGhyZWY9JHtUSVBTLlVwZGF0ZVVybH0+5pu05pawJuWPjemmiOeCueatpCE8L2E+XAogICAgPGEgaHJlZj0iamF2YXNjcmlwdDo7IiBzdHlsZT0iY29sb3I6IzI3NzdGOCIgaWQ9Im5lU2V0dGluZzIiPuWIhumalOespuetieiuvue9rueCueatpO+8gTwvYT48L2Rpdj5gOwoKICAgIGNvbnN0IGJlZ2luVXBsb2FkQnlTaGExU3RyaW5nID0gYDxkaXYgY2xhc3M9ImNvbiIgaWQ9ImRvd25zaGExIj48YSBjbGFzcz0iYnV0dG9uIiBocmVmPSJqYXZhc2NyaXB0OjsiPuW8gOWni3NoYTHovazlrZg8L2E+PC9kaXY+YDsKCiAgICAvL+W9k+WJjemhtemdouaJgOWcqOeahOebruW9leS/oeaBrwogICAgZnVuY3Rpb24gZ2V0Q3VycmVudEZvbGRlckRpc3BsYXllZCgpIHsKICAgICAgICBsZXQgZGVmYXVsdEZvbGRlciA9IHsKICAgICAgICAgICAgaWQ6ICIwIiwKICAgICAgICAgICAgbmFtZTogIuagueebruW9lSIKICAgICAgICB9OwogICAgICAgIGxldCBpZnJhbWVzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaWZyYW1lJykKICAgICAgICBmb3IgKGxldCBpdGVtIG9mIGlmcmFtZXMpIHsKICAgICAgICAgICAgbGV0IGZpbGVQYXRoID0gaXRlbS5jb250ZW50V2luZG93LmRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignW3JlbD1oZWFkZXJfcGFnZV9sb2NhbF0nKTsKICAgICAgICAgICAgaWYgKGZpbGVQYXRoKSB7CiAgICAgICAgICAgICAgICBsZXQgZm9sZGVycyA9IGZpbGVQYXRoLnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb2xkZXInKTsKICAgICAgICAgICAgICAgIGxldCBsYXN0Rm9sZGVyID0gZm9sZGVyc1tmb2xkZXJzLmxlbmd0aCAtIDFdOwogICAgICAgICAgICAgICAgZGVmYXVsdEZvbGRlci5uYW1lID0gbGFzdEZvbGRlci5nZXRBdHRyaWJ1dGUoJ3RpdGxldGV4dCcpOwogICAgICAgICAgICAgICAgbGV0IHNlYXJjaCA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7CiAgICAgICAgICAgICAgICBkZWZhdWx0Rm9sZGVyLmlkID0gc2VhcmNoLmdldCgnY2lkJyk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGRlZmF1bHRGb2xkZXI7CiAgICB9CgogICAgLy9maXg6IHYzLjMg5L+u5aSN4oCc5re75Yqg5Lu75Yqh5by556qX5Y+v6IO95peg5rOV5YWz6Zet4oCdCiAgICBmdW5jdGlvbiBBZGREb3dubG9hZFNoYTFCdG4oak5vZGUpIHsKCiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYVtidG49ImNsb3NlIl1gKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gewogICAgICAgICAgICB3aW5kb3cucGFyZW50LmRvY3VtZW50LnRyeVVwbG9hZEl0ZW0gPSBudWxsOwogICAgICAgIH0pOwoKCgogICAgICAgIGxldCBvbmxpbmVGaWxlID0gbnVsbDsKCiAgICAgICAgdmFyIGZpbGUgPSAiIjsKCiAgICAgICAgdmFyIGRpYWxvZyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImRpYWxvZy1ib3ggZGlhbG9nLW1pbmkgb2ZmbGluZS1ib3ggd2luZG93LWN1cnJlbnQiKVswXTsKICAgICAgICBkaWFsb2cuc3R5bGUud2lkdGggPSAiNzIwcHgiOwogICAgICAgIGRpYWxvZy5zdHlsZS50b3AgPSAiMTBweCI7CiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZTExNXRpcHNmb3JoZWFkZXInKSA9PSBudWxsKSB7CiAgICAgICAgICAgICQoaGVhZGVyU3RyaW5nKS5hcHBlbmRUbygiLmRpYWxvZy1oZWFkZXJbcmVsJD0ndGl0bGVfYm94J10iKTsKCiAgICAgICAgICAgICQoJyNuZVNldHRpbmcyJylbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYGFbYnRuPSJjbG9zZSJdYCkuY2xpY2soKTsKICAgICAgICAgICAgICAgIEdNX2NvbmZpZy5vcGVuKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdmFyIHRleHRBcmVhPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoIiNqc19vZmZsaW5lX25ld19hZGQiKTsKICAgICAgICBpZih0ZXh0QXJlYSl7CiAgICAgICAgICAgIHRleHRBcmVhLnN0eWxlLmhlaWdodD0iMTAwcHgiOwogICAgICAgIH0KCiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZVNlbGVjdEZpbGUnKSA9PSBudWxsKSB7CiAgICAgICAgICAgIHZhciBkaXYgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdkaWFsb2ctaW5wdXQgaW5wdXQtb2ZmbGluZScpOwoKICAgICAgICAgICAgY29uc29sZS5sb2coZGl2KTsKICAgICAgICAgICAgdmFyICRzZWxlY3RGaWxlID0gJChzZWxlY3RGaWxlU3RyaW5nKTsKICAgICAgICAgICAgdmFyICRhdXRvQ3JlYXRlUm9vdEZvbGRlciA9ICQoYXV0b0NyZWF0ZVJvb3RGb2xkZXJTdHJpbmcpOwogICAgICAgICAgICB2YXIgJG5vdENyZWF0ZUFueUNoaWxkRm9sZGVyID0gJChub3RDcmVhdGVBbnlDaGlsZEZvbGRlclN0cmluZyk7CiAgICAgICAgICAgIHZhciAkb3RoZXJTZXR0aW5nID0gJChvdGhlclNldHRpbmdTdHJpbmcpOwogICAgICAgICAgICBkaXZbMF0uc3R5bGUuZGlzcGxheSA9ICdncmlkJzsKICAgICAgICAgICAgZGl2WzBdLmFwcGVuZENoaWxkKCRzZWxlY3RGaWxlWzBdKTsKICAgICAgICAgICAgZGl2WzBdLmFwcGVuZENoaWxkKCRhdXRvQ3JlYXRlUm9vdEZvbGRlclswXSk7CgogICAgICAgICAgICBkaXZbMF0uYXBwZW5kQ2hpbGQoJG5vdENyZWF0ZUFueUNoaWxkRm9sZGVyWzBdKTsKICAgICAgICAgICAgZGl2WzBdLmFwcGVuZENoaWxkKCRvdGhlclNldHRpbmdbMF0pOwoKCiAgICAgICAgICAgIC8v55WM6Z2i6YCJ6aG56K6+572uCiAgICAgICAgICAgIC8v5qC555uu5b2V6Ieq5Yqo5Yib5bu66buY6K6k5YC877yaCiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZUF1dG9DcmVhdGVSb290Zm9sZGVyJykuY2hlY2tlZCA9IEdNX2NvbmZpZy5nZXQoY3VycmVudENvbmZpZy5jcmVhdGVSb290Rm9sZGVyRGVmYXVsdFZhbHVlKTsKICAgICAgICAgICAgLy/mmK/lkKbmmL7npLrkuI3liJvlu7rku7vkvZXnm67lvZXvvJoKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25lTm90Q3JlYXRlQW55Q2hpbGRGb2xkZXJQYXJlbnQnKS5zdHlsZS5kaXNwbGF5ID0gR01fY29uZmlnLmdldChjdXJyZW50Q29uZmlnLmNyZWF0ZUNoaWxkRm9sZGVyVmlzaWJsZSkgPT09IHRydWUgPyAnYmxvY2snIDogJ25vbmUnOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVOb3RDcmVhdGVBbnlDaGlsZEZvbGRlcicpLmNoZWNrZWQgPSBmYWxzZTsKCiAgICAgICAgICAgICRzZWxlY3RGaWxlWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGUgPT4gewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZS50YXJnZXQuZmlsZXMpOwogICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmZpbGVzKSB7CiAgICAgICAgICAgICAgICAgICAgZmlsZSA9IGUudGFyZ2V0LmZpbGVzWzBdOwogICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBmaWxlID0gIiI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgJCgnI25lU2V0dGluZzEnKVswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gewogICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYVtidG49ImNsb3NlIl1gKS5jbGljaygpOwogICAgICAgICAgICAgICAgR01fY29uZmlnLm9wZW4oKTsKICAgICAgICAgICAgfSk7CgoKICAgICAgICB9IGVsc2UgewoKICAgICAgICAgICAgLy/nlYzpnaLpgInpobnorr7nva4KICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25lU2VsZWN0RmlsZScpLnZhbHVlID0gIiI7CiAgICAgICAgICAgIGZpbGUgPSAiIjsKICAgICAgICAgICAgLy/moLnnm67lvZXoh6rliqjliJvlu7rpu5jorqTlgLzvvJoKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25lQXV0b0NyZWF0ZVJvb3Rmb2xkZXInKS5jaGVja2VkID0gR01fY29uZmlnLmdldChjdXJyZW50Q29uZmlnLmNyZWF0ZVJvb3RGb2xkZXJEZWZhdWx0VmFsdWUpOwogICAgICAgICAgICAvL+aYr+WQpuaYvuekuuS4jeWIm+W7uuS7u+S9leebruW9le+8mgogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVOb3RDcmVhdGVBbnlDaGlsZEZvbGRlclBhcmVudCcpLnN0eWxlLmRpc3BsYXkgPSBHTV9jb25maWcuZ2V0KGN1cnJlbnRDb25maWcuY3JlYXRlQ2hpbGRGb2xkZXJWaXNpYmxlKSA9PT0gdHJ1ZSA/ICdibG9jaycgOiAnbm9uZSc7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZU5vdENyZWF0ZUFueUNoaWxkRm9sZGVyJykuY2hlY2tlZCA9IGZhbHNlOwogICAgICAgIH0KCgogICAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZG93bnNoYTEnKSA9PSBudWxsKSB7CgogICAgICAgICAgICByZXNldFRhc2tDYW5jZWxGbGFnKCk7CgogICAgICAgICAgICB2YXIgJGJ0biA9ICQoYmVnaW5VcGxvYWRCeVNoYTFTdHJpbmcpOwogICAgICAgICAgICBqTm9kZVswXS5hcHBlbmRDaGlsZCgkYnRuWzBdKTsKICAgICAgICAgICAgJGJ0blswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gewoKICAgICAgICAgICAgICAgIGxldCBjaWQgPSAkKGBsaVtyZWw9ImJ0c19zZWxlY3RfaXRlbSJdW2NsYXNzPSJzZWxlY3RlZCJdYCkuYXR0cigiZmlsZV9pZCIpOwogICAgICAgICAgICAgICAgaWYgKGNpZCA9PSAiIikgewogICAgICAgICAgICAgICAgICAgIC8v55uu5b2V5LiN5a2Y5Zyo77yM5q+U5aaC5oqKIOKAnOS6keS4i+i9veKAnSDnm67lvZXliKDpmaQKICAgICAgICAgICAgICAgICAgICBjaWQgPSAnMCc7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgbGV0IG5vdENyZWF0ZUFueUNoaWxkRm9sZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25lTm90Q3JlYXRlQW55Q2hpbGRGb2xkZXInKS5jaGVja2VkOwogICAgICAgICAgICAgICAgbGV0IGF1dG9DcmVhdGVSb290Zm9sZGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25lQXV0b0NyZWF0ZVJvb3Rmb2xkZXInKS5jaGVja2VkOwoKICAgICAgICAgICAgICAgIGxldCBsaW5rcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdqc19vZmZsaW5lX25ld19hZGQnKS52YWx1ZTsKICAgICAgICAgICAgICAgIGxldCBjb25maWcgPSB7CiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0Q2lkOiBjaWQsCiAgICAgICAgICAgICAgICAgICAgdGV4dDogIiIsCiAgICAgICAgICAgICAgICAgICAgZm9sZGVyU2V0dGluZzogewogICAgICAgICAgICAgICAgICAgICAgICBub3RDcmVhdGVBbnlDaGlsZEZvbGRlcjogbm90Q3JlYXRlQW55Q2hpbGRGb2xkZXIsCiAgICAgICAgICAgICAgICAgICAgICAgIHNsZWVwVGltZTogR01fY29uZmlnLmdldChjdXJyZW50Q29uZmlnLmNyZWF0ZUZvbGRlclNsZWVwVGltZSksCiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3RGb2xkZXI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5lZWRUb0NyZWF0ZTogYXV0b0NyZWF0ZVJvb3Rmb2xkZXIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb2xkZXJOYW1lOiAiIgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgaXRlbU5hbWVTZXBhcmF0b3I6IHsKICAgICAgICAgICAgICAgICAgICAgICAgbmVlZFRvU2VwYXJhdGU6IEdNX2NvbmZpZy5nZXQoY3VycmVudENvbmZpZy5hdXRvVXNlU2VwYXJhdG9yKSwKICAgICAgICAgICAgICAgICAgICAgICAgbmVlZFRvUmVtb3ZlU2VwYXJhdG9yOiBHTV9jb25maWcuZ2V0KGN1cnJlbnRDb25maWcuYXV0b1VzZVNlcGFyYXRvclRvUmVuYW1lKSwKICAgICAgICAgICAgICAgICAgICAgICAgc2VwYXJhdG9yOiBHTV9jb25maWcuZ2V0KGN1cnJlbnRDb25maWcuc2VwYXJhdG9yKQogICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgdXBsb2FkOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtpbmdOdW1iZXI6IEdNX2NvbmZpZy5nZXQoY3VycmVudENvbmZpZy51cGxvYWROdW1iZXIpLAogICAgICAgICAgICAgICAgICAgICAgICBzbGVlcFRpbWU6IEdNX2NvbmZpZy5nZXQoY3VycmVudENvbmZpZy51cGxvYWRTbGVlcFRpbWUpLAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgoKICAgICAgICAgICAgICAgIG9ubGluZUZpbGUgPSB3aW5kb3cucGFyZW50LmRvY3VtZW50LnRyeVVwbG9hZEl0ZW0KICAgICAgICAgICAgICAgIGlmIChvbmxpbmVGaWxlKSB7CiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYVtidG49ImNsb3NlIl1gKS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLpgInmi6nkuoblnKjnur/mlofku7bvvJoiKQogICAgICAgICAgICAgICAgICAgIGNvbmZpZy5mb2xkZXJTZXR0aW5nLnJvb3RGb2xkZXIuZm9sZGVyTmFtZSA9IG9ubGluZUZpbGUubmFtZS5zcGxpdCgiLiIpLnNsaWNlKDAsIC0xKS5qb2luKCcuJyk7CgogICAgICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLkZJTEVET1dOTE9BRCwgewogICAgICAgICAgICAgICAgICAgICAgICBvbmxpbmVGaWxlOiBvbmxpbmVGaWxlLAogICAgICAgICAgICAgICAgICAgICAgICBjb25maWc6IGNvbmZpZwogICAgICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgICAgICB3aW5kb3cucGFyZW50LmRvY3VtZW50LnRyeVVwbG9hZEl0ZW0gPSBudWxsOwoKICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZmlsZSkgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLpgInmi6nkuobmlofku7bvvJoiKQogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGUpOwogICAgICAgICAgICAgICAgICAgIGxldCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwogICAgICAgICAgICAgICAgICAgIHJlYWRlci5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy9maXg6IHYzLjMg5a+85YWl55qE5paH5Lu25ZCN5bimIi4iCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy5mb2xkZXJTZXR0aW5nLnJvb3RGb2xkZXIuZm9sZGVyTmFtZSA9IGZpbGUubmFtZS5zcGxpdCgiLiIpLnNsaWNlKDAsIC0xKS5qb2luKCcuJyk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbmZpZy50ZXh0ID0gdC50YXJnZXQucmVzdWx0OwogICAgICAgICAgICAgICAgICAgICAgICBmaWxlID0gIiI7CiAgICAgICAgICAgICAgICAgICAgICAgIFVwbG9hZEZpbGVzQnlTaGExTGlua3MoY29uZmlnKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBhW2J0bj0iY2xvc2UiXWApLmNsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgLy8oZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnY2xvc2UnKVsyXS5jbGljaygpKTsKCiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGxpbmtzKSB7CgogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCLpgInmi6nkuobmlofmnKzmoYbkuK3ovpPlhaXvvJoiKQogICAgICAgICAgICAgICAgICAgIC8vIHZhciB0ZXh0ID0geyBGaWxlTmFtZTogIiIsIENvbnRlbnQ6IGxpbmtzIH07CiAgICAgICAgICAgICAgICAgICAgY29uZmlnLmZvbGRlclNldHRpbmcucm9vdEZvbGRlci5mb2xkZXJOYW1lID0gIiI7CiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnRleHQgPSBsaW5rczsKCiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgYVtidG49ImNsb3NlIl1gKS5jbGljaygpOwogICAgICAgICAgICAgICAgICAgIC8vY2xvc2VCdXR0b24uY2xpY2soKTsKICAgICAgICAgICAgICAgICAgICBVcGxvYWRGaWxlc0J5U2hhMUxpbmtzKGNvbmZpZyk7CgoKCiAgICAgICAgICAgICAgICB9CgoKCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgbGV0IHNhdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYnQtdGFzay1zYWZlJykKICAgICAgICBpZiAoc2F2ZSAhPSBudWxsICYmIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzYXZlVGlwJykgPT0gbnVsbCkgewogICAgICAgICAgICBzYXZlLmluc2VydEFkamFjZW50SFRNTCgnYWZ0ZXJlbmQnLCBgPGRpdiBpZD0ic2F2ZVRpcCI+PHAgc3R5bGU9Im1hcmdpbi1sZWZ0OjIwcHg7bWFyZ2luLXRvcDotMjBweDsiPui9rOWtmOS5n+WcqOatpOWkhOmAieaLqeS9jee9ruOAgjxzcGFuIHN0eWxlPSJjb2xvcjpyZWQ7Ij7lm6AxMTXpobXpnaLnu5PmnoTku6Xlj4rmjqXlj6PosIPmlbTvvIzmmoLml7bkuIvnur/jgJDpu5jorqTkv53lrZjoh7PlvZPliY3kvY3nva7jgJE8L3NwYW4+PC9wPjwvZGl2PmApCiAgICAgICAgfQoKCiAgICAgICAgaWYgKHdpbmRvdy5wYXJlbnQuZG9jdW1lbnQudHJ5VXBsb2FkSXRlbSkgewogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVGaWxlT25saW5lJykuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZUZpbGVVcGxvYWQnKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVPbmxpbmVGaWxlTmFtZScpLmlubmVyVGV4dCA9IHdpbmRvdy5wYXJlbnQuZG9jdW1lbnQudHJ5VXBsb2FkSXRlbS5uYW1lOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZUZpbGVPbmxpbmUnKS5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVGaWxlVXBsb2FkJykuc3R5bGUuZGlzcGxheSA9ICJibG9jayI7CiAgICAgICAgfQoKICAgICAgICBsZXQgY3VycmVudEZvbGRlciA9IGdldEN1cnJlbnRGb2xkZXJEaXNwbGF5ZWQoKTsKICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50Rm9sZGVyKTsKCiAgICAgICAgLyoKICAgICAgICAgICAgICAgIGxldCB1bCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsW3JlbD0ic2VsZWN0X2l0ZW1fdWwiXScpOwogICAgICAgIGlmICh1bCkgewogICAgICAgICAgICAvL+W8ueeql+aXtuWPr+iDveaVsOaNrui/mOWcqOiOt+WPlu+8jOW7tui/n+S/ruaUuQogICAgICAgICAgICAvL2ZpeDogdjMuMy4xIOS8mOWMluKAneiEmuacrOS/ruaUueavlOiHquW4pueahOW/q+KAnAogICAgICAgICAgICAvL2ZpeDogdjMuNCDlho3mrKHlu7bplb/vvIzkvJjljJbigJ3ohJrmnKzkv67mlLnmr5Toh6rluKbnmoTlv6vigJwKICAgICAgICAgICAgZGVsYXkoMTAwMCkudGhlbih0ID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGxpcyA9IHVsLnF1ZXJ5U2VsZWN0b3JBbGwoImxpIik7CiAgICAgICAgICAgICAgICBsZXQgZm9sZGVySW5jbHVkZWQgPSBudWxsOwoKICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbGkgb2YgbGlzKSB7CgogICAgICAgICAgICAgICAgICAgIGlmKGxpLmNsYXNzTmFtZSYmbGkuY2xhc3NOYW1lLmluY2x1ZGVzKCJzZWxlY3RlZCIpKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGkuY2xhc3NMaXN0LnJlbW92ZSgic2VsZWN0ZWQiKQogICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cobGkuYXR0cmlidXRlc1snZmlsZV9pZCddKQogICAgICAgICAgICAgICAgICAgIGlmIChsaS5hdHRyaWJ1dGVzWydmaWxlX2lkJ10udmFsdWUgPT0gY3VycmVudEZvbGRlci5pZCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb2xkZXJJbmNsdWRlZCA9IGxpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZm9sZGVySW5jbHVkZWQpCiAgICAgICAgICAgICAgICBpZihmb2xkZXJJbmNsdWRlZCl7CiAgICAgICAgICAgICAgICAgICAgZm9sZGVySW5jbHVkZWQuY2xhc3NMaXN0LmFkZCgic2VsZWN0ZWQiKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2V7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGkgPSBgPGxpIHJlbD0iYnRzX3NlbGVjdF9pdGVtIiBjbGFzcz0ic2VsZWN0ZWQiIGZpbGVfaWQ9IiR7Y3VycmVudEZvbGRlci5pZH0iPjxhIGhyZWY9ImphdmFzY3JpcHQ6OyI+PHNwYW4+JHtjdXJyZW50Rm9sZGVyLm5hbWV9PC9zcGFuPjwvYT48L2xpPmA7CiAgICAgICAgICAgICAgICAgICAgdWwuaW5zZXJ0QWRqYWNlbnRIVE1MKCJhZnRlcmJlZ2luIiwgbGkpOwogICAgICAgICAgICAgICAgfQoKCgogICAgICAgICAgICAgICAgY29uc3QgZW09IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2VtW3JlbD0iZG93bkZpbGVSZXN1bHQiXScpOwogICAgICAgICAgICAgICAgaWYoZW0pewogICAgICAgICAgICAgICAgICAgIGVtLnRleHRDb250ZW50PWN1cnJlbnRGb2xkZXIubmFtZTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CgogICAgICAgIH0KICAgICAgICAqLwoKCgoKCgogICAgfQoKCiAgICAvLyBmdW5jdGlvbiBmb3JtYXRDb21tb25Ub0pzb24oY2hpbGRyZW4sIHJvb3QpIHsKICAgIC8vICAgICBsZXQgY2hpbGRGaWxlcyA9IGNoaWxkcmVuLmZpbHRlcihmID0+IGYuUGF0aHMubGVuZ3RoID09IDApOwogICAgLy8gICAgIHJvb3QuZmlsZXMgPSBBcnJheSgpOwogICAgLy8gICAgIHJvb3QuZGlycyA9IEFycmF5KCk7CiAgICAvLyAgICAgY2hpbGRGaWxlcy5mb3JFYWNoKGMgPT4gcm9vdC5maWxlcy5wdXNoKHsgTmFtZTogYy5OYW1lIH0pKTsKCiAgICAvLyAgICAgbGV0IHNlbGVjdGVkQ2hpbGRyZW4gPSBjaGlsZHJlbi5maWx0ZXIoZiA9PiBmLlBhdGhzLmxlbmd0aCA+IDApOwoKICAgIC8vICAgICBsZXQgY2hpbGRGb2xkZXJzID0gc2VsZWN0ZWRDaGlsZHJlbi5tYXAocSA9PiBxLlBhdGhzWzBdKS5maWx0ZXIoKHYsIGksIGEpID0+IGEuaW5kZXhPZih2KSA9PT0gaSk7CiAgICAvLyAgICAgY2hpbGRGb2xkZXJzLmZvckVhY2goZiA9PiByb290LmRpcnMucHVzaCh7IGRpcl9uYW1lOiBmIH0pKTsKCiAgICAvLyAgICAgcm9vdC5kaXJzLmZvckVhY2goZCA9PiB7CiAgICAvLyAgICAgICAgIGxldCBuZXdDaGlsZHJlbiA9IHNlbGVjdGVkQ2hpbGRyZW4uZmlsdGVyKGYgPT4gZi5QYXRoc1swXSA9PSBkLmRpcl9uYW1lKQogICAgLy8gICAgICAgICAgICAgLm1hcChjID0+IHsKICAgIC8vICAgICAgICAgICAgICAgICBsZXQgYSA9IHsgTmFtZTogYy5OYW1lLCBQYXRoczogYy5QYXRocy5zbGljZSgxKSB9OwogICAgLy8gICAgICAgICAgICAgICAgIHJldHVybiBhOwogICAgLy8gICAgICAgICAgICAgfSkKICAgIC8vICAgICAgICAgQ29udmVydGVyQWR2YW5jZWQobmV3Q2hpbGRyZW4sIGQpOwogICAgLy8gICAgIH0pOwogICAgLy8gfQoKCgogICAgZnVuY3Rpb24gQWRkQ2VhdGVTaGExQnV0dG9uSW5HcmlkKGpOb2RlKSB7CiAgICAgICAgLy9hZGQ6IHYzLjQg5aKe5Yqg6K6+572u5piv5ZCm5pi+56S6IOe8qeeVpeWbvuaooeW8j+S4i+iOt+WPlnNoYTEKICAgICAgICBpZiAoIUdNX2NvbmZpZy5nZXQoY3VycmVudENvbmZpZy5jcmVhdGVJdGVtU2hhMUluVGh1bWIpKSByZXR1cm47CiAgICAgICAgbGV0ICRsaSA9IGpOb2RlLmZpbmQoJ1tjbGFzc349ImZpbGUtdGh1bWIiXScpOwogICAgICAgIC8vZml4OiB2My4zLjEg5L+u5q2j5paH5Lu25aS55aaC5p6c6K6+572u5bCB6Z2i77yM6I635Y+Wc2hhMemTvuaOpeaMiemSruS8muimhueblueahGJ1ZwogICAgICAgIGxldCAkYnV0dG9uID0gJCgnPGJ1dHRvbiBjbGFzcz0iYnRuSW5HcmlkIiB0aXRsZT0i6I635Y+Wc2hhMemTvuaOpSI+PGkgY2xhc3M9Imljb24tb3BlcmF0ZS1saWdodCBpZm9sLWRvd25sb2FkIiBzdHlsZT0iaGVpZ2h0OjE0cHg7d2lkdGg6MTRweDtwb3NpdGlvbjppbmhlcml0Ij48L2k+PC9idXR0b24+Jyk7CiAgICAgICAgJGJ1dHRvbi5hcHBlbmRUbygkbGkpOwogICAgICAgICRidXR0b24uY2xpY2soZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgbGV0IHBJdGVtID0gR2V0RmlsZUl0ZW1CeWxpTm9kZShqTm9kZVswXSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLnlJ/miJBzaGExIik7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBJdGVtKTsKICAgICAgICAgICAgLy/nlJ/miJBzaGExCiAgICAgICAgICAgIHJlc2V0VGFza0NhbmNlbEZsYWcoKTsKICAgICAgICAgICAgQ3JlYXRlU2hhMUxpbmtzKHBJdGVtKTsKICAgICAgICB9KTsKCiAgICB9CgoKICAgIGZ1bmN0aW9uIHJlbmFtZUluVG9vbFRpcChlbGVtZW50LCBwSXRlbSkgewogICAgICAgIHZhciAkYnRuMSA9ICQoJzxhPjxpPjwvaT48c3Bhbj7ljrvpmaTliIbpmpTnrKY8L3NwYW4+PC9hPicpOwogICAgICAgICRidG4xLnByZXBlbmRUbyhlbGVtZW50KTsKICAgICAgICAkYnRuMVswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jIGUgPT4gewogICAgICAgICAgICBsZXQgc2VwYXJhdG9yID0gR01fY29uZmlnLmdldChjdXJyZW50Q29uZmlnLnNlcGFyYXRvcik7CiAgICAgICAgICAgIGxldCBzbGVlcFRpbWUgPSBHTV9jb25maWcuZ2V0KGN1cnJlbnRDb25maWcuY3JlYXRlRm9sZGVyU2xlZXBUaW1lKTsKICAgICAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuQkVHSU40VVBMT0FELCAiIikpOwogICAgICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5QUk9DRVNTSU5HLCBg5Y2z5bCG5byA5aeL6YeN5ZG95ZCNIOOAkCR7cEl0ZW0ubmFtZX3jgJEg5LiL5omA5pyJ5paH5Lu277yaPGJyPjxicj7ljrvpmaTliIbpmpTnrKbvvJoke3NlcGFyYXRvcn1gKSk7CiAgICAgICAgICAgIGF3YWl0IGRlbGF5KDEwMDApOwogICAgICAgICAgICBhd2FpdCBwcm9jZXNzUmVuYW1lKHBJdGVtLmlkLCBzZXBhcmF0b3IsIHNsZWVwVGltZSwgcmVzdWx0ID0+IHsKICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhdGUgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5QUk9DRVNTSU5HLCByZXN1bHQubXNnKSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLkVSUk9SLCByZXN1bHQubXNnKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuRU5ENFVQTE9BRCwgYOWvueebruW9lSDjgJAke3BJdGVtLm5hbWV944CR5LiL55qE5paH5Lu26YeN5ZG95ZCN5a6M5oiQ77yBXAogICAgICAgICAgICAgICAgPGJyPjxicj7ojrflj5bmnIDmlrDniYjvvIzmiJbogIXpgYfliLDpl67popjljrvmraTlj43ppojvvIzmhJ/osKIgIeeCueWHuy0+XAogICAgICAgICAgICAgICAgPGEgaHJlZj0iJHtUSVBTLlVwZGF0ZVVybH0iIHRhcmdldD0iX2JsYW5rIj4ke1RJUFMuVmVyc2lvblRpcHN9PC9hPmAsIHBJdGVtLmlkKSk7CiAgICAgICAgfSkKICAgIH0KCiAgICBmdW5jdGlvbiBjcmVhdGVTaGExSW5Ub29sVGlwKHRvb3BUaXAsIHBJdGVtKSB7CiAgICAgICAgdmFyICRidG4gPSAkKCc8YSA+PGk+PC9pPjxkaXYgc3R5bGU9ImJhY2tncm91bmQ6d2hpdGUiPjxzcGFuPuiOt+WPllNIQTHpk77mjqU8L3NwYW4+PC9kaXY+PC9hPicpOwoKICAgICAgICAkYnRuLnByZXBlbmRUbyh0b29wVGlwKTsKICAgICAgICAkYnRuWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLnlJ/miJBzaGExIik7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHBJdGVtKTsKICAgICAgICAgICAgLy/nlJ/miJBzaGExCiAgICAgICAgICAgIHJlc2V0VGFza0NhbmNlbEZsYWcoKTsKICAgICAgICAgICAgQ3JlYXRlU2hhMUxpbmtzKHBJdGVtKTsKICAgICAgICB9KQogICAgfQoKICAgIGZ1bmN0aW9uIHVzaW5nT25saW5lRmlsZVRvVXBsb2FkSW5Ub29sVGlwKHRvb3BUaXAsIHBJdGVtKSB7CgogICAgICAgIGxldCB0ZW1wcyA9IHBJdGVtLm5hbWUuc3BsaXQoJy4nKTsKICAgICAgICBsZXQgZXh0ZW5zaW9uID0gdGVtcHNbdGVtcHMubGVuZ3RoIC0gMV0udG9Mb3dlckNhc2UoKTsKICAgICAgICBpZiAoZXh0ZW5zaW9uID09ICJqc29uIiB8fCBleHRlbnNpb24gPT0gInR4dCIpIHsKICAgICAgICAgICAgbGV0ICRidG4xID0gJCgnPGEgbWVudT0ib2ZmbGluZV90YXNrIiB0aXRsZT0i5pqC5LiN5pSv5oyB5aSn5LqOMk1C55qE5paH5pys5paH5Lu25pON5L2cIj48aT48L2k+PGRpdiBzdHlsZT0iYmFja2dyb3VuZDp3aGl0ZSI+PHNwYW4+5bCd6K+V6L2s5a2YPC9zcGFuPjwvZGl2PjwvYT4nKTsKICAgICAgICAgICAgJGJ0bjEucHJlcGVuZFRvKHRvb3BUaXApOwogICAgICAgICAgICAvL+Wwneivlei9rOWtmAogICAgICAgICAgICAkYnRuMVswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gewogICAgICAgICAgICAgICAgd2luZG93LnBhcmVudC5kb2N1bWVudC50cnlVcGxvYWRJdGVtID0gcEl0ZW07CiAgICAgICAgICAgIH0pCiAgICAgICAgfQogICAgfQoKICAgIC8vZml4OnYzLjMg5L+u5aSN5Zyo5Zue5pS256uZ5pi+56S65o+Q5Y+W55qEYnVnCiAgICBmdW5jdGlvbiBBZGRTaGFyZVNIQTFCdG4oak5vZGUpIHsKCiAgICAgICAgdmFyIHBhcmVudE5vZGUgPSBqTm9kZVswXS5wYXJlbnROb2RlOwogICAgICAgIHZhciBwSXRlbSA9IEdldEZpbGVJdGVtQnlsaU5vZGUocGFyZW50Tm9kZSk7CiAgICAgICAgaWYgKCFwSXRlbS5uYW1lKSByZXR1cm47CgoKICAgICAgICBqTm9kZVswXS5zdHlsZS5sZWZ0ID0gIjE4MHB4IjsKICAgICAgICAvL+ebruW9le+8jOWOu+mZpOWIhumalOespgogICAgICAgIGlmIChwSXRlbS5pc0ZvbGRlciAmJiBHTV9jb25maWcuZ2V0KGN1cnJlbnRDb25maWcuYWR2YW5jZWRSZW5hbWUpKSB7CiAgICAgICAgICAgIHJlbmFtZUluVG9vbFRpcChqTm9kZVswXSwgcEl0ZW0pOwogICAgICAgIH0KCiAgICAgICAgLy9hZGQ6IHYzLjQg5aKe5Yqg6K6+572u5piv5ZCm5pi+56S6IOWIl+ihqOaooeW8j+S4i+iOt+WPlnNoYTEKICAgICAgICBpZiAoR01fY29uZmlnLmdldChjdXJyZW50Q29uZmlnLmNyZWF0ZUl0ZW1TaGExKSkgewogICAgICAgICAgICBjcmVhdGVTaGExSW5Ub29sVGlwKGpOb2RlWzBdLCBwSXRlbSk7CiAgICAgICAgfQoKCiAgICAgICAgaWYgKCFwSXRlbS5pc0ZvbGRlcikgewogICAgICAgICAgICB1c2luZ09ubGluZUZpbGVUb1VwbG9hZEluVG9vbFRpcChqTm9kZVswXSwgcEl0ZW0pOwogICAgICAgIH0KCgoKICAgICAgICAvL+eUn+aIkGpzb27moLzlvI8KICAgICAgICAvLyBpZihwSXRlbS5pc0ZvbGRlcikKICAgICAgICAvLyB7CiAgICAgICAgLy8gICAgIHZhciAkYnRuMSA9ICQoJzxhPjxpPjwvaT48c3Bhbj7ojrflj5ZTSEExKGpzb24pPC9zcGFuPjwvYT4nKTsKICAgICAgICAvLyAgICAgJGJ0bjEucHJlcGVuZFRvKGpOb2RlWzBdKTsKICAgICAgICAvLyAgICAgJGJ0bjFbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHsKICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUubG9nKHBJdGVtKTsKICAgICAgICAvLyAgICAgLy/nlJ/miJBzaGExCiAgICAgICAgLy8gICAgICAgICByZXNldFRhc2tDYW5jZWxGbGFnKCk7CiAgICAgICAgLy8gICAgICAgICBDcmVhdGVTaGExTGlua3MocEl0ZW0pOwogICAgICAgIC8vICAgICB9KQogICAgICAgIC8vIH0KCgogICAgfQoKICAgIGFzeW5jIGZ1bmN0aW9uIEdldFNlYXJjaExpc3QoaXNPbmx5U2VsZWN0ZWQpIHsKICAgICAgICByZXNldFRhc2tDYW5jZWxGbGFnKCk7CgogICAgICAgIHZhciBtc2cgPSAi5q2j5Zyo6I635Y+W5paH5Lu2Li4uIjsKICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5CRUdJTiwgbXNnKSk7CgogICAgICAgIHZhciBkb2MgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdzZWFyY2gtaWZyYW1lJylbMF07CiAgICAgICAgaWYgKCFkb2MpIGRvYyA9IGRvY3VtZW50OwogICAgICAgIHZhciBsaXMgPSBkb2MucXVlcnlTZWxlY3RvckFsbCgnLmxpc3QtY2VsbC5sc3RjLXNlYXJjaCA+IC5saXN0LWNvbnRlbnRzID4gdWwgPiBsaScpOwogICAgICAgIGlmICghbGlzKSByZXR1cm47CiAgICAgICAgY29uc29sZS5sb2cobGlzKTsKICAgICAgICB2YXIgZmlsZXMgPSBuZXcgQXJyYXkoKTsKICAgICAgICBmb3IgKHZhciBsaSBvZiBsaXMpIHsKICAgICAgICAgICAgdmFyIGZpbGVJdGVtID0gR2V0RmlsZUl0ZW1CeWxpTm9kZShsaSk7CiAgICAgICAgICAgIGZpbGVzLnB1c2goZmlsZUl0ZW0pOwogICAgICAgIH0KICAgICAgICBjb25zb2xlLmxvZygiMDogc2VhcmNoIGl0ZW1zezB9Ii5mb3JtYXQoZmlsZXMubGVuZ3RoKSk7CiAgICAgICAgaWYgKGlzT25seVNlbGVjdGVkKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJzZWFyY2ggaXRlbXMgb25seVNlbGVjdGVkIikKICAgICAgICAgICAgZmlsZXMgPSBmaWxlcy5maWx0ZXIocSA9PiBxLnNlbGVjdGVkKTsKICAgICAgICB9CgogICAgICAgIGNvbnNvbGUubG9nKCIxOiBzZWFyY2ggaXRlbXN7MH0iLmZvcm1hdChmaWxlcy5sZW5ndGgpKTsKCiAgICAgICAgY29uc29sZS5sb2coZG9jdW1lbnQuVVJMKTsKICAgICAgICB2YXIgdXJsID0gbmV3IFVSTChkb2N1bWVudC5VUkwpOwogICAgICAgIHZhciBrZXkgPSB1cmwuc2VhcmNoUGFyYW1zLmdldCgic2VhcmNoX3ZhbHVlIik7CiAgICAgICAga2V5ID0ga2V5ID8ga2V5IDogIuaQnOe0oue7k+aenCI7CiAgICAgICAgZmlsZXMgPSBmaWxlcy5maWx0ZXIocSA9PiAhcS5pc0ZvbGRlcik7CiAgICAgICAgbXNnID0gIuiOt+WPluWIsOespuWQiOaQnOe0oueahOaWh+S7tuaVsO+8mnswfSIuZm9ybWF0KGZpbGVzLmxlbmd0aCk7CiAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuUFJPQ0VTU0lORywgbXNnKSk7CiAgICAgICAgYXdhaXQgZGVsYXkoMjAwKTsKICAgICAgICBhd2FpdCBJbm5lckNyZWF0ZVNoYTFMaW5rcyhmaWxlcywga2V5KQoKICAgIH0KCiAgICBmdW5jdGlvbiBDcmVhdGVTaGExQnV0dG9uRm9yU2VsZWN0ZWRJdGVtcyhlbGVtZW50KSB7CiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdteTExNUNyZWF0ZVNoYTFGb3JTZWxlY3RlZCcpKSByZXR1cm47CgogICAgICAgIGxldCBkaXYgPSBgPGRpdiBpZD0ibXkxMTVDcmVhdGVTaGExRm9yU2VsZWN0ZWQiIHN0eWxlPSJtYXJnaW4tbGVmdDoyMHB4O2N1cnNvcjpwb2ludGVyIj4KICAgICAgICA8YSBoZWY9ImphdmFzY3JpcHQ9OjsiIGNsYXNzPSJidXR0b24gYnRuLWxpbmUiPgogICAgICAgIDxpIGNsYXNzPSJpY29uLW9wZXJhdGUgaWZvLXNoYXJlIj48L2k+CiAgICAgICAgPHNwYW4+6I635Y+W6YCJ5Lit6aG555qEU0hBMemTvuaOpTwvc3Bhbj4KICAgICAgICA8L2E+CiAgICAgIDwvZGl2PmAKICAgICAgICBlbGVtZW50WzBdLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgZGl2KTsKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXkxMTVDcmVhdGVTaGExRm9yU2VsZWN0ZWQnKS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBhc3luYyBlID0+IHsKICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgbGV0IHNlbGV0ZWRFbGVtZW50cyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICAvL+WIl+ihqOaooeW8j+S4i++8mgogICAgICAgICAgICBsZXQgc2VsZWN0ZWRJdGVtc0luTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5saXN0LWNvbnRlbnRzID4gdWwgPiBsaScpCiAgICAgICAgICAgIGNvbnNvbGUubG9nKGDliJfooajmqKHlvI/kuIss6YCJ5LitOiR7c2VsZWN0ZWRJdGVtc0luTGlzdC5sZW5ndGh9YCk7CiAgICAgICAgICAgIHNlbGVjdGVkSXRlbXNJbkxpc3QuZm9yRWFjaChlbGUgPT4gc2VsZXRlZEVsZW1lbnRzLnB1c2goZWxlKSk7CiAgICAgICAgICAgIC8v57yp55Wl5Zu+5qih5byP5LiL77yaCiAgICAgICAgICAgIHNlbGVjdGVkSXRlbXNJbkxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubGlzdC10aHVtYiA+IHVsID4gbGknKQogICAgICAgICAgICBjb25zb2xlLmxvZyhg57yp55Wl5Zu+5qih5byP5LiLLOmAieS4rToke3NlbGVjdGVkSXRlbXNJbkxpc3QubGVuZ3RofWApOwogICAgICAgICAgICBzZWxlY3RlZEl0ZW1zSW5MaXN0LmZvckVhY2goZWxlID0+IHNlbGV0ZWRFbGVtZW50cy5wdXNoKGVsZSkpOwoKICAgICAgICAgICAgY29uc29sZS5sb2coYOmAieS4rToke3NlbGV0ZWRFbGVtZW50cy5sZW5ndGh9YCk7CiAgICAgICAgICAgIGxldCBpdGVtcyA9IG5ldyBBcnJheSgpOwogICAgICAgICAgICBmb3IgKGxldCBpdGVtIG9mIHNlbGV0ZWRFbGVtZW50cykgewogICAgICAgICAgICAgICAgbGV0IHNJdGVtID0gR2V0RmlsZUl0ZW1CeWxpTm9kZShpdGVtKTsKICAgICAgICAgICAgICAgIGlmIChzSXRlbS5zZWxlY3RlZCkgaXRlbXMucHVzaChzSXRlbSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChpdGVtcy5sZW5ndGggPT0gMCkgcmV0dXJuOwogICAgICAgICAgICBpZiAoaXRlbXMubGVuZ3RoID09IDEpIHsKICAgICAgICAgICAgICAgIGF3YWl0IENyZWF0ZVNoYTFMaW5rcyhpdGVtc1swXSkKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGF3YWl0IENyZWF0ZVNoYTFMaW5rc0FsbChpdGVtcywgYCR7aXRlbXNbMF0ubmFtZX3nrYkke2l0ZW1zLmxlbmd0aH3kuKpgKQogICAgICAgICAgICB9CgogICAgICAgIH0pOwoKCiAgICB9CgoKCiAgICBmdW5jdGlvbiBBZGRTaGFyZUJ1dHRvbkZvclNlYXJjaEl0ZW0obm9kZSkgewoKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbXkxMTVEcm9wZG93bicpLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CgogICAgICAgIC8v5q+P5LiA6aG5CiAgICAgICAgdmFyIGxpcyA9IG5vZGVbMF0uZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2xpJyk7CiAgICAgICAgZm9yICh2YXIgbGkgb2YgbGlzKSB7CiAgICAgICAgICAgIHZhciBwSXRlbSA9IEdldEZpbGVJdGVtQnlsaU5vZGUobGkpOwogICAgICAgICAgICB2YXIgJGJ0biA9ICQoJzxkaXYgY2xhc3M9ImZpbGUtb3ByIiBzdHlsZT0ibGVmdDoyMDBweCI+PC9kaXY+Jyk7CiAgICAgICAgICAgICRidG4uYXBwZW5kVG8obGkpOwogICAgICAgIH0KCiAgICAgICAgLy/pkojlr7nlvZPliY3pobXpnaIKICAgICAgICAkKCIubGVmdC10dmYgPiBhLmJ0bi11cGxvYWQiKS5jc3MoInRvcCIsICIxMHB4Iik7CiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fc2VsZWN0ZWRfc2hhMScpID09IG51bGwpIHsKICAgICAgICAgICAgdmFyICRidG5fc2VsZWN0ZWQgPSAkKGA8YSBocmVmPSJqYXZhc2NyaXB0OjsiIGlkPSJidG5fc2VsZWN0ZWRfc2hhMSIgY2xhc3M9ImJ1dHRvbiBidG4tbGluZSIgc3R5bGU9InRvcDoxMHB4Ij4KICAgICAgICAgICAgPGkgY2xhc3M9Imljb24tb3BlcmF0ZSBpZm8tc2hhcmUiPjwvaT4KICAgICAgICAgICAgPHNwYW4+5o+Q5Y+W5pys6aG16YCJ5Lit5paH5Lu277yI5LiN5YyF5ous5paH5Lu25aS577yJPC9zcGFuPgogICAgICAgICAgICA8ZW0gc3R5bGU9ImRpc3BsYXk6bm9uZTsiIGNsYXNzPSJudW0tZG90Ij48L2VtPgogICAgICAgICAgICA8L2E+YCk7CiAgICAgICAgICAgICQoIi5sZWZ0LXR2ZiIpLmVxKDApLmFwcGVuZCgkYnRuX3NlbGVjdGVkKTsKCiAgICAgICAgICAgICRidG5fc2VsZWN0ZWRbMF0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBlID0+IHsKICAgICAgICAgICAgICAgIEdldFNlYXJjaExpc3QodHJ1ZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgaWYgKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG5fYWxsX3NoYTEnKSA9PSBudWxsKSB7CiAgICAgICAgICAgIHZhciAkYnRuX2FsbCA9ICQoYDxhIGhyZWY9ImphdmFzY3JpcHQ6OyIgaWQ9ImJ0bl9hbGxfc2hhMSIgY2xhc3M9ImJ1dHRvbiBidG4tbGluZSIgc3R5bGU9InRvcDoxMHB4Ij4KICAgICAgICAgICAgPGkgY2xhc3M9Imljb24tb3BlcmF0ZSBpZm8tc2hhcmUiPjwvaT4KICAgICAgICAgICAgPHNwYW4+5o+Q5Y+W5pys6aG15omA5pyJ5paH5Lu277yI5LiN5YyF5ous5paH5Lu25aS577yJPC9zcGFuPgogICAgICAgICAgICA8ZW0gc3R5bGU9ImRpc3BsYXk6bm9uZTsiIGNsYXNzPSJudW0tZG90Ij48L2VtPgogICAgICAgICAgICA8L2E+YCk7CiAgICAgICAgICAgICQoIi5sZWZ0LXR2ZiIpLmVxKDApLmFwcGVuZCgkYnRuX2FsbCk7CgogICAgICAgICAgICAkYnRuX2FsbFswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4gewogICAgICAgICAgICAgICAgR2V0U2VhcmNoTGlzdChmYWxzZSk7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KCgogICAgfQoKCgogICAgZnVuY3Rpb24gQ29udGludWVkVGFzayh0YXNrSnNvbkZpbGVOYW1lKSB7CiAgICAgICAgY29uc29sZS5sb2coIkNvbnRpbnVlZFRhc2siKTsKICAgICAgICBwb3N0U2hhMU1lc3NnYWUoY3JlYXRlTWVzc2FnZShNZXNzYWdlVHlwZS5CRUdJTiwgIuato+WcqOe7p+e7reS7u+WKoS4uLiIpKTsKICAgICAgICByZXNldFRhc2tDYW5jZWxGbGFnKCk7CiAgICAgICAgbGV0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7CiAgICAgICAgcmVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbiAodCkgewogICAgICAgICAgICB0cnkgewoKICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlBST0NFU1NJTkcsICLmraPlnKjop6PmnpDnu6fnu63ku7vliqHphY3nva4uLi4iKSk7CiAgICAgICAgICAgICAgICBsZXQgdGFza0pzb24gPSBKU09OLnBhcnNlKHQudGFyZ2V0LnJlc3VsdCk7CgogICAgICAgICAgICAgICAgY29uc29sZS5sb2coYCR7dGFza0pzb24udGFza1R5cGV9LCAke3Rhc2tKc29uLmZpbGVOYW1lfSwgJHt0YXNrSnNvbi5kYXRhLmxlbmd0aH1gKTsKICAgICAgICAgICAgICAgIGxldCBjYW5Db250aW51ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgaWYgKHRhc2tKc29uLmRhdGEubGVuZ3RoID4gMCkgewoKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY2FuQ29udGludWVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoY2FuQ29udGludWVkKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRhc2tKc29uLnRhc2tUeXBlID09IFRhc2tUeXBlLkRPV05MT0FEKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLlBST0NFU1NJTkcsIGDmraPlnKjlvIDlp4vlr7njgJAke3Rhc2tKc29uLmZpbGVOYW1lfeOAkee7p+e7reaPkOWPli4uLuivt+eojeetie+8gWApKTsKICAgICAgICAgICAgICAgICAgICAgICAgYAogICAgICAgICAgICAgICAgICAgICAgICDmj5Dlj5bvvJoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0ZW1wRmlsZT1bCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLmlkLGYucGFyZW50SUQsZi5uYW1lLGYuc2l6ZSxmLnBhdGhzLGYucGlja0NvZGUsZi5zaGExLGYucHJlaWQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdOwogICAgICAgICAgICAgICAgICAgICAgICBgCiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBhbGxGaWxlcyA9IHRhc2tKc29uLmRhdGEubWFwKGYgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogZlswXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRJRDogZlsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBmWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IGZbM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF0aHM6IGZbNF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlja0NvZGU6IGZbNV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hhMTogZls2XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmVpZDogZls3XSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIElubmVyQ3JlYXRlU2hhMUxpbmtzKGFsbEZpbGVzLCB0YXNrSnNvbi5maWxlTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0YXNrSnNvbi50YXNrVHlwZSA9PSBUYXNrVHlwZS5VUExPQUQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgcG9zdFNoYTFNZXNzZ2FlKGNyZWF0ZU1lc3NhZ2UoTWVzc2FnZVR5cGUuQkVHSU40VVBMT0FELCAi5q2j5Zyo6Kej5p6Qc2hhMemTvuaOpS4uLiIpKTsKICAgICAgICAgICAgICAgICAgICAgICAgYOi9rOWMluagvOW8jwogICAgICAgICAgICAgICAgICAgICAgICDovazlrZjvvJoKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRlbXBGaWxlID0gWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZi5wYXJlbnRJRCxmLm5hbWUsIGYuZm9ybWF0ZWROYW1lLCBmLnNpemUsIGYuc2hhMSwgZi5wcmVpZCxmLnN0YXRlCiAgICAgICAgICAgICAgICAgICAgICAgIF0KICAgICAgICAgICAgICAgICAgICAgICAgYAogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYWxsRmlsZXMgPSB0YXNrSnNvbi5kYXRhLm1hcChmID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmVudElEOiBmWzBdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGZbMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9ybWF0ZWROYW1lOiBmWzJdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IGZbM10sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGlja0NvZGU6ICcnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNoYTE6IGZbNF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJlaWQ6IGZbNV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGU6IGZbNl0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgICAgICB0YXNrSnNvbi5kYXRhID0gYWxsRmlsZXM7CgogICAgICAgICAgICAgICAgICAgICAgICBVcGxvYWRGaWxlc0J5U2hhMUxpbmtzKG51bGwsIHRhc2tKc29uKTsKCgogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IG1zZyA9IGAKICAgICAgICAgICAgICAgICAgICDojrflj5bnmoTnu6fnu63ku7vliqHvvJrjgJAgPGI+JHt0YXNrSnNvbi5maWxlTmFtZX08L2I+IOOAkSzphY3nva7mnInor6/vvIE8YnI+CiAgICAgICAgICAgICAgICAgICAg5Y+v6IO95LiN5piv5q2j56Gu55qE6YWN572u5paH5Lu2LCDmiJbogIXkuI3pgILnlKjkuo7mraTniYjmnKznmoTphY3nva7vvIEKICAgICAgICAgICAgICAgICAgICBgOwogICAgICAgICAgICAgICAgICAgIHBvc3RTaGExTWVzc2dhZShjcmVhdGVNZXNzYWdlKE1lc3NhZ2VUeXBlLkVORCwgbXNnKSk7CiAgICAgICAgICAgICAgICB9CgoKICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgICAgICB9CgogICAgICAgIH0pOwogICAgICAgIHJlYWRlci5yZWFkQXNUZXh0KHRhc2tKc29uRmlsZU5hbWUpOwoKCgogICAgfQoKCgoKfSkoKTsKCg==","requires":[{"meta":{"name":"underscore-min.js","url":"https://unpkg.com/underscore@1.12.0/underscore-min.js","ts":1670371893015,"mimetype":"text/javascript"},"source":"IWZ1bmN0aW9uKG4scil7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz1yKCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoInVuZGVyc2NvcmUiLHIpOihuPW58fHNlbGYsZnVuY3Rpb24oKXt2YXIgdD1uLl8sZT1uLl89cigpO2Uubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiBuLl89dCxlfX0oKSl9KHRoaXMsKGZ1bmN0aW9uKCl7Ci8vICAgICBVbmRlcnNjb3JlLmpzIDEuMTIuMAovLyAgICAgaHR0cHM6Ly91bmRlcnNjb3JlanMub3JnCi8vICAgICAoYykgMjAwOS0yMDIwIEplcmVteSBBc2hrZW5hcywgRG9jdW1lbnRDbG91ZCBhbmQgSW52ZXN0aWdhdGl2ZSBSZXBvcnRlcnMgJiBFZGl0b3JzCi8vICAgICBVbmRlcnNjb3JlIG1heSBiZSBmcmVlbHkgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlLgp2YXIgbj0iMS4xMi4wIixyPSJvYmplY3QiPT10eXBlb2Ygc2VsZiYmc2VsZi5zZWxmPT09c2VsZiYmc2VsZnx8Im9iamVjdCI9PXR5cGVvZiBnbG9iYWwmJmdsb2JhbC5nbG9iYWw9PT1nbG9iYWwmJmdsb2JhbHx8RnVuY3Rpb24oInJldHVybiB0aGlzIikoKXx8e30sdD1BcnJheS5wcm90b3R5cGUsZT1PYmplY3QucHJvdG90eXBlLHU9InVuZGVmaW5lZCIhPXR5cGVvZiBTeW1ib2w/U3ltYm9sLnByb3RvdHlwZTpudWxsLG89dC5wdXNoLGk9dC5zbGljZSxhPWUudG9TdHJpbmcsZj1lLmhhc093blByb3BlcnR5LGM9InVuZGVmaW5lZCIhPXR5cGVvZiBBcnJheUJ1ZmZlcixsPSJ1bmRlZmluZWQiIT10eXBlb2YgRGF0YVZpZXcscz1BcnJheS5pc0FycmF5LHA9T2JqZWN0LmtleXMsdj1PYmplY3QuY3JlYXRlLGg9YyYmQXJyYXlCdWZmZXIuaXNWaWV3LHk9aXNOYU4sZz1pc0Zpbml0ZSxkPSF7dG9TdHJpbmc6bnVsbH0ucHJvcGVydHlJc0VudW1lcmFibGUoInRvU3RyaW5nIiksYj1bInZhbHVlT2YiLCJpc1Byb3RvdHlwZU9mIiwidG9TdHJpbmciLCJwcm9wZXJ0eUlzRW51bWVyYWJsZSIsImhhc093blByb3BlcnR5IiwidG9Mb2NhbGVTdHJpbmciXSxtPU1hdGgucG93KDIsNTMpLTE7ZnVuY3Rpb24gaihuLHIpe3JldHVybiByPW51bGw9PXI/bi5sZW5ndGgtMTorcixmdW5jdGlvbigpe2Zvcih2YXIgdD1NYXRoLm1heChhcmd1bWVudHMubGVuZ3RoLXIsMCksZT1BcnJheSh0KSx1PTA7dTx0O3UrKyllW3VdPWFyZ3VtZW50c1t1K3JdO3N3aXRjaChyKXtjYXNlIDA6cmV0dXJuIG4uY2FsbCh0aGlzLGUpO2Nhc2UgMTpyZXR1cm4gbi5jYWxsKHRoaXMsYXJndW1lbnRzWzBdLGUpO2Nhc2UgMjpyZXR1cm4gbi5jYWxsKHRoaXMsYXJndW1lbnRzWzBdLGFyZ3VtZW50c1sxXSxlKX12YXIgbz1BcnJheShyKzEpO2Zvcih1PTA7dTxyO3UrKylvW3VdPWFyZ3VtZW50c1t1XTtyZXR1cm4gb1tyXT1lLG4uYXBwbHkodGhpcyxvKX19ZnVuY3Rpb24gXyhuKXt2YXIgcj10eXBlb2YgbjtyZXR1cm4iZnVuY3Rpb24iPT09cnx8Im9iamVjdCI9PT1yJiYhIW59ZnVuY3Rpb24gdyhuKXtyZXR1cm4gdm9pZCAwPT09bn1mdW5jdGlvbiBBKG4pe3JldHVybiEwPT09bnx8ITE9PT1ufHwiW29iamVjdCBCb29sZWFuXSI9PT1hLmNhbGwobil9ZnVuY3Rpb24geChuKXt2YXIgcj0iW29iamVjdCAiK24rIl0iO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gYS5jYWxsKG4pPT09cn19dmFyIFM9eCgiU3RyaW5nIiksTz14KCJOdW1iZXIiKSxNPXgoIkRhdGUiKSxFPXgoIlJlZ0V4cCIpLEI9eCgiRXJyb3IiKSxOPXgoIlN5bWJvbCIpLEk9eCgiQXJyYXlCdWZmZXIiKSxrPXgoIkZ1bmN0aW9uIiksVD1yLmRvY3VtZW50JiZyLmRvY3VtZW50LmNoaWxkTm9kZXM7ImZ1bmN0aW9uIiE9dHlwZW9mLy4vJiYib2JqZWN0IiE9dHlwZW9mIEludDhBcnJheSYmImZ1bmN0aW9uIiE9dHlwZW9mIFQmJihrPWZ1bmN0aW9uKG4pe3JldHVybiJmdW5jdGlvbiI9PXR5cGVvZiBufHwhMX0pO3ZhciBEPWssUj14KCJPYmplY3QiKSxGPWwmJlIobmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig4KSkpLFY9InVuZGVmaW5lZCIhPXR5cGVvZiBNYXAmJlIobmV3IE1hcCksUD14KCJEYXRhVmlldyIpO3ZhciBxPUY/ZnVuY3Rpb24obil7cmV0dXJuIG51bGwhPW4mJkQobi5nZXRJbnQ4KSYmSShuLmJ1ZmZlcil9OlAsVT1zfHx4KCJBcnJheSIpO2Z1bmN0aW9uIFcobixyKXtyZXR1cm4gbnVsbCE9biYmZi5jYWxsKG4scil9dmFyIHo9eCgiQXJndW1lbnRzIik7IWZ1bmN0aW9uKCl7eihhcmd1bWVudHMpfHwoej1mdW5jdGlvbihuKXtyZXR1cm4gVyhuLCJjYWxsZWUiKX0pfSgpO3ZhciBMPXo7ZnVuY3Rpb24gQyhuKXtyZXR1cm4gTyhuKSYmeShuKX1mdW5jdGlvbiBLKG4pe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBufX1mdW5jdGlvbiBKKG4pe3JldHVybiBmdW5jdGlvbihyKXt2YXIgdD1uKHIpO3JldHVybiJudW1iZXIiPT10eXBlb2YgdCYmdD49MCYmdDw9bX19ZnVuY3Rpb24gJChuKXtyZXR1cm4gZnVuY3Rpb24ocil7cmV0dXJuIG51bGw9PXI/dm9pZCAwOnJbbl19fXZhciBHPSQoImJ5dGVMZW5ndGgiKSxIPUooRyksUT0vXFtvYmplY3QgKChJfFVpKW50KDh8MTZ8MzIpfEZsb2F0KDMyfDY0KXxVaW50OENsYW1wZWR8QmlnKEl8VWkpbnQ2NClBcnJheVxdLzt2YXIgWD1jP2Z1bmN0aW9uKG4pe3JldHVybiBoP2gobikmJiFxKG4pOkgobikmJlEudGVzdChhLmNhbGwobikpfTpLKCExKSxZPSQoImxlbmd0aCIpO2Z1bmN0aW9uIFoobixyKXtyPWZ1bmN0aW9uKG4pe2Zvcih2YXIgcj17fSx0PW4ubGVuZ3RoLGU9MDtlPHQ7KytlKXJbbltlXV09ITA7cmV0dXJue2NvbnRhaW5zOmZ1bmN0aW9uKG4pe3JldHVybiByW25dfSxwdXNoOmZ1bmN0aW9uKHQpe3JldHVybiByW3RdPSEwLG4ucHVzaCh0KX19fShyKTt2YXIgdD1iLmxlbmd0aCx1PW4uY29uc3RydWN0b3Isbz1EKHUpJiZ1LnByb3RvdHlwZXx8ZSxpPSJjb25zdHJ1Y3RvciI7Zm9yKFcobixpKSYmIXIuY29udGFpbnMoaSkmJnIucHVzaChpKTt0LS07KShpPWJbdF0paW4gbiYmbltpXSE9PW9baV0mJiFyLmNvbnRhaW5zKGkpJiZyLnB1c2goaSl9ZnVuY3Rpb24gbm4obil7aWYoIV8obikpcmV0dXJuW107aWYocClyZXR1cm4gcChuKTt2YXIgcj1bXTtmb3IodmFyIHQgaW4gbilXKG4sdCkmJnIucHVzaCh0KTtyZXR1cm4gZCYmWihuLHIpLHJ9ZnVuY3Rpb24gcm4obixyKXt2YXIgdD1ubihyKSxlPXQubGVuZ3RoO2lmKG51bGw9PW4pcmV0dXJuIWU7Zm9yKHZhciB1PU9iamVjdChuKSxvPTA7bzxlO28rKyl7dmFyIGk9dFtvXTtpZihyW2ldIT09dVtpXXx8IShpIGluIHUpKXJldHVybiExfXJldHVybiEwfWZ1bmN0aW9uIHRuKG4pe3JldHVybiBuIGluc3RhbmNlb2YgdG4/bjp0aGlzIGluc3RhbmNlb2YgdG4/dm9pZCh0aGlzLl93cmFwcGVkPW4pOm5ldyB0bihuKX1mdW5jdGlvbiBlbihuKXtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobi5idWZmZXJ8fG4sbi5ieXRlT2Zmc2V0fHwwLEcobikpfXRuLlZFUlNJT049bix0bi5wcm90b3R5cGUudmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd3JhcHBlZH0sdG4ucHJvdG90eXBlLnZhbHVlT2Y9dG4ucHJvdG90eXBlLnRvSlNPTj10bi5wcm90b3R5cGUudmFsdWUsdG4ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIFN0cmluZyh0aGlzLl93cmFwcGVkKX07dmFyIHVuPSJbb2JqZWN0IERhdGFWaWV3XSI7ZnVuY3Rpb24gb24obixyLHQsZSl7aWYobj09PXIpcmV0dXJuIDAhPT1ufHwxL249PTEvcjtpZihudWxsPT1ufHxudWxsPT1yKXJldHVybiExO2lmKG4hPW4pcmV0dXJuIHIhPXI7dmFyIG89dHlwZW9mIG47cmV0dXJuKCJmdW5jdGlvbiI9PT1vfHwib2JqZWN0Ij09PW98fCJvYmplY3QiPT10eXBlb2YgcikmJmZ1bmN0aW9uIG4ocix0LGUsbyl7ciBpbnN0YW5jZW9mIHRuJiYocj1yLl93cmFwcGVkKTt0IGluc3RhbmNlb2YgdG4mJih0PXQuX3dyYXBwZWQpO3ZhciBpPWEuY2FsbChyKTtpZihpIT09YS5jYWxsKHQpKXJldHVybiExO2lmKEYmJiJbb2JqZWN0IE9iamVjdF0iPT1pJiZxKHIpKXtpZighcSh0KSlyZXR1cm4hMTtpPXVufXN3aXRjaChpKXtjYXNlIltvYmplY3QgUmVnRXhwXSI6Y2FzZSJbb2JqZWN0IFN0cmluZ10iOnJldHVybiIiK3I9PSIiK3Q7Y2FzZSJbb2JqZWN0IE51bWJlcl0iOnJldHVybityIT0rcj8rdCE9K3Q6MD09K3I/MS8rcj09MS90OityPT0rdDtjYXNlIltvYmplY3QgRGF0ZV0iOmNhc2UiW29iamVjdCBCb29sZWFuXSI6cmV0dXJuK3I9PSt0O2Nhc2UiW29iamVjdCBTeW1ib2xdIjpyZXR1cm4gdS52YWx1ZU9mLmNhbGwocik9PT11LnZhbHVlT2YuY2FsbCh0KTtjYXNlIltvYmplY3QgQXJyYXlCdWZmZXJdIjpjYXNlIHVuOnJldHVybiBuKGVuKHIpLGVuKHQpLGUsbyl9dmFyIGY9IltvYmplY3QgQXJyYXldIj09PWk7aWYoIWYmJlgocikpe2lmKEcocikhPT1HKHQpKXJldHVybiExO2lmKHIuYnVmZmVyPT09dC5idWZmZXImJnIuYnl0ZU9mZnNldD09PXQuYnl0ZU9mZnNldClyZXR1cm4hMDtmPSEwfWlmKCFmKXtpZigib2JqZWN0IiE9dHlwZW9mIHJ8fCJvYmplY3QiIT10eXBlb2YgdClyZXR1cm4hMTt2YXIgYz1yLmNvbnN0cnVjdG9yLGw9dC5jb25zdHJ1Y3RvcjtpZihjIT09bCYmIShEKGMpJiZjIGluc3RhbmNlb2YgYyYmRChsKSYmbCBpbnN0YW5jZW9mIGwpJiYiY29uc3RydWN0b3IiaW4gciYmImNvbnN0cnVjdG9yImluIHQpcmV0dXJuITF9bz1vfHxbXTt2YXIgcz0oZT1lfHxbXSkubGVuZ3RoO2Zvcig7cy0tOylpZihlW3NdPT09cilyZXR1cm4gb1tzXT09PXQ7aWYoZS5wdXNoKHIpLG8ucHVzaCh0KSxmKXtpZigocz1yLmxlbmd0aCkhPT10Lmxlbmd0aClyZXR1cm4hMTtmb3IoO3MtLTspaWYoIW9uKHJbc10sdFtzXSxlLG8pKXJldHVybiExfWVsc2V7dmFyIHAsdj1ubihyKTtpZihzPXYubGVuZ3RoLG5uKHQpLmxlbmd0aCE9PXMpcmV0dXJuITE7Zm9yKDtzLS07KWlmKHA9dltzXSwhVyh0LHApfHwhb24ocltwXSx0W3BdLGUsbykpcmV0dXJuITF9cmV0dXJuIGUucG9wKCksby5wb3AoKSwhMH0obixyLHQsZSl9ZnVuY3Rpb24gYW4obil7aWYoIV8obikpcmV0dXJuW107dmFyIHI9W107Zm9yKHZhciB0IGluIG4pci5wdXNoKHQpO3JldHVybiBkJiZaKG4scikscn1mdW5jdGlvbiBmbihuKXt2YXIgcj1ZKG4pO3JldHVybiBmdW5jdGlvbih0KXtpZihudWxsPT10KXJldHVybiExO3ZhciBlPWFuKHQpO2lmKFkoZSkpcmV0dXJuITE7Zm9yKHZhciB1PTA7dTxyO3UrKylpZighRCh0W25bdV1dKSlyZXR1cm4hMTtyZXR1cm4gbiE9PWhufHwhRCh0W2NuXSl9fXZhciBjbj0iZm9yRWFjaCIsbG49ImhhcyIsc249WyJjbGVhciIsImRlbGV0ZSJdLHBuPVsiZ2V0Iixsbiwic2V0Il0sdm49c24uY29uY2F0KGNuLHBuKSxobj1zbi5jb25jYXQocG4pLHluPVsiYWRkIl0uY29uY2F0KHNuLGNuLGxuKSxnbj1WP2ZuKHZuKTp4KCJNYXAiKSxkbj1WP2ZuKGhuKTp4KCJXZWFrTWFwIiksYm49Vj9mbih5bik6eCgiU2V0IiksbW49eCgiV2Vha1NldCIpO2Z1bmN0aW9uIGpuKG4pe2Zvcih2YXIgcj1ubihuKSx0PXIubGVuZ3RoLGU9QXJyYXkodCksdT0wO3U8dDt1KyspZVt1XT1uW3JbdV1dO3JldHVybiBlfWZ1bmN0aW9uIF9uKG4pe2Zvcih2YXIgcj17fSx0PW5uKG4pLGU9MCx1PXQubGVuZ3RoO2U8dTtlKyspcltuW3RbZV1dXT10W2VdO3JldHVybiByfWZ1bmN0aW9uIHduKG4pe3ZhciByPVtdO2Zvcih2YXIgdCBpbiBuKUQoblt0XSkmJnIucHVzaCh0KTtyZXR1cm4gci5zb3J0KCl9ZnVuY3Rpb24gQW4obixyKXtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9YXJndW1lbnRzLmxlbmd0aDtpZihyJiYodD1PYmplY3QodCkpLGU8Mnx8bnVsbD09dClyZXR1cm4gdDtmb3IodmFyIHU9MTt1PGU7dSsrKWZvcih2YXIgbz1hcmd1bWVudHNbdV0saT1uKG8pLGE9aS5sZW5ndGgsZj0wO2Y8YTtmKyspe3ZhciBjPWlbZl07ciYmdm9pZCAwIT09dFtjXXx8KHRbY109b1tjXSl9cmV0dXJuIHR9fXZhciB4bj1BbihhbiksU249QW4obm4pLE9uPUFuKGFuLCEwKTtmdW5jdGlvbiBNbihuKXtpZighXyhuKSlyZXR1cm57fTtpZih2KXJldHVybiB2KG4pO3ZhciByPWZ1bmN0aW9uKCl7fTtyLnByb3RvdHlwZT1uO3ZhciB0PW5ldyByO3JldHVybiByLnByb3RvdHlwZT1udWxsLHR9ZnVuY3Rpb24gRW4obil7cmV0dXJuIF8obik/VShuKT9uLnNsaWNlKCk6eG4oe30sbik6bn1mdW5jdGlvbiBCbihuKXtyZXR1cm4gVShuKT9uOltuXX1mdW5jdGlvbiBObihuKXtyZXR1cm4gdG4udG9QYXRoKG4pfWZ1bmN0aW9uIEluKG4scil7Zm9yKHZhciB0PXIubGVuZ3RoLGU9MDtlPHQ7ZSsrKXtpZihudWxsPT1uKXJldHVybjtuPW5bcltlXV19cmV0dXJuIHQ/bjp2b2lkIDB9ZnVuY3Rpb24ga24obixyLHQpe3ZhciBlPUluKG4sTm4ocikpO3JldHVybiB3KGUpP3Q6ZX1mdW5jdGlvbiBUbihuKXtyZXR1cm4gbn1mdW5jdGlvbiBEbihuKXtyZXR1cm4gbj1Tbih7fSxuKSxmdW5jdGlvbihyKXtyZXR1cm4gcm4ocixuKX19ZnVuY3Rpb24gUm4obil7cmV0dXJuIG49Tm4obiksZnVuY3Rpb24ocil7cmV0dXJuIEluKHIsbil9fWZ1bmN0aW9uIEZuKG4scix0KXtpZih2b2lkIDA9PT1yKXJldHVybiBuO3N3aXRjaChudWxsPT10PzM6dCl7Y2FzZSAxOnJldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gbi5jYWxsKHIsdCl9O2Nhc2UgMzpyZXR1cm4gZnVuY3Rpb24odCxlLHUpe3JldHVybiBuLmNhbGwocix0LGUsdSl9O2Nhc2UgNDpyZXR1cm4gZnVuY3Rpb24odCxlLHUsbyl7cmV0dXJuIG4uY2FsbChyLHQsZSx1LG8pfX1yZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseShyLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIFZuKG4scix0KXtyZXR1cm4gbnVsbD09bj9UbjpEKG4pP0ZuKG4scix0KTpfKG4pJiYhVShuKT9EbihuKTpSbihuKX1mdW5jdGlvbiBQbihuLHIpe3JldHVybiBWbihuLHIsMS8wKX1mdW5jdGlvbiBxbihuLHIsdCl7cmV0dXJuIHRuLml0ZXJhdGVlIT09UG4/dG4uaXRlcmF0ZWUobixyKTpWbihuLHIsdCl9ZnVuY3Rpb24gVW4oKXt9ZnVuY3Rpb24gV24obixyKXtyZXR1cm4gbnVsbD09ciYmKHI9bixuPTApLG4rTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpKihyLW4rMSkpfXRuLnRvUGF0aD1Cbix0bi5pdGVyYXRlZT1Qbjt2YXIgem49RGF0ZS5ub3d8fGZ1bmN0aW9uKCl7cmV0dXJuKG5ldyBEYXRlKS5nZXRUaW1lKCl9O2Z1bmN0aW9uIExuKG4pe3ZhciByPWZ1bmN0aW9uKHIpe3JldHVybiBuW3JdfSx0PSIoPzoiK25uKG4pLmpvaW4oInwiKSsiKSIsZT1SZWdFeHAodCksdT1SZWdFeHAodCwiZyIpO3JldHVybiBmdW5jdGlvbihuKXtyZXR1cm4gbj1udWxsPT1uPyIiOiIiK24sZS50ZXN0KG4pP24ucmVwbGFjZSh1LHIpOm59fXZhciBDbj17IiYiOiImYW1wOyIsIjwiOiImbHQ7IiwiPiI6IiZndDsiLCciJzoiJnF1b3Q7IiwiJyI6IiYjeDI3OyIsImAiOiImI3g2MDsifSxLbj1MbihDbiksSm49TG4oX24oQ24pKSwkbj10bi50ZW1wbGF0ZVNldHRpbmdzPXtldmFsdWF0ZTovPCUoW1xzXFNdKz8pJT4vZyxpbnRlcnBvbGF0ZTovPCU9KFtcc1xTXSs/KSU+L2csZXNjYXBlOi88JS0oW1xzXFNdKz8pJT4vZ30sR249LyguKV4vLEhuPXsiJyI6IiciLCJcXCI6IlxcIiwiXHIiOiJyIiwiXG4iOiJuIiwiXHUyMDI4IjoidTIwMjgiLCJcdTIwMjkiOiJ1MjAyOSJ9LFFuPS9cXHwnfFxyfFxufFx1MjAyOHxcdTIwMjkvZztmdW5jdGlvbiBYbihuKXtyZXR1cm4iXFwiK0huW25dfXZhciBZbj0wO2Z1bmN0aW9uIFpuKG4scix0LGUsdSl7aWYoIShlIGluc3RhbmNlb2YgcikpcmV0dXJuIG4uYXBwbHkodCx1KTt2YXIgbz1NbihuLnByb3RvdHlwZSksaT1uLmFwcGx5KG8sdSk7cmV0dXJuIF8oaSk/aTpvfXZhciBucj1qKChmdW5jdGlvbihuLHIpe3ZhciB0PW5yLnBsYWNlaG9sZGVyLGU9ZnVuY3Rpb24oKXtmb3IodmFyIHU9MCxvPXIubGVuZ3RoLGk9QXJyYXkobyksYT0wO2E8bzthKyspaVthXT1yW2FdPT09dD9hcmd1bWVudHNbdSsrXTpyW2FdO2Zvcig7dTxhcmd1bWVudHMubGVuZ3RoOylpLnB1c2goYXJndW1lbnRzW3UrK10pO3JldHVybiBabihuLGUsdGhpcyx0aGlzLGkpfTtyZXR1cm4gZX0pKTtuci5wbGFjZWhvbGRlcj10bjt2YXIgcnI9aigoZnVuY3Rpb24obixyLHQpe2lmKCFEKG4pKXRocm93IG5ldyBUeXBlRXJyb3IoIkJpbmQgbXVzdCBiZSBjYWxsZWQgb24gYSBmdW5jdGlvbiIpO3ZhciBlPWooKGZ1bmN0aW9uKHUpe3JldHVybiBabihuLGUscix0aGlzLHQuY29uY2F0KHUpKX0pKTtyZXR1cm4gZX0pKSx0cj1KKFkpO2Z1bmN0aW9uIGVyKG4scix0LGUpe2lmKGU9ZXx8W10scnx8MD09PXIpe2lmKHI8PTApcmV0dXJuIGUuY29uY2F0KG4pfWVsc2Ugcj0xLzA7Zm9yKHZhciB1PWUubGVuZ3RoLG89MCxpPVkobik7bzxpO28rKyl7dmFyIGE9bltvXTtpZih0cihhKSYmKFUoYSl8fEwoYSkpKWlmKHI+MSllcihhLHItMSx0LGUpLHU9ZS5sZW5ndGg7ZWxzZSBmb3IodmFyIGY9MCxjPWEubGVuZ3RoO2Y8YzspZVt1KytdPWFbZisrXTtlbHNlIHR8fChlW3UrK109YSl9cmV0dXJuIGV9dmFyIHVyPWooKGZ1bmN0aW9uKG4scil7dmFyIHQ9KHI9ZXIociwhMSwhMSkpLmxlbmd0aDtpZih0PDEpdGhyb3cgbmV3IEVycm9yKCJiaW5kQWxsIG11c3QgYmUgcGFzc2VkIGZ1bmN0aW9uIG5hbWVzIik7Zm9yKDt0LS07KXt2YXIgZT1yW3RdO25bZV09cnIobltlXSxuKX1yZXR1cm4gbn0pKTt2YXIgb3I9aigoZnVuY3Rpb24obixyLHQpe3JldHVybiBzZXRUaW1lb3V0KChmdW5jdGlvbigpe3JldHVybiBuLmFwcGx5KG51bGwsdCl9KSxyKX0pKSxpcj1ucihvcix0biwxKTtmdW5jdGlvbiBhcihuKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4hbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIGZyKG4scil7dmFyIHQ7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuLS1uPjAmJih0PXIuYXBwbHkodGhpcyxhcmd1bWVudHMpKSxuPD0xJiYocj1udWxsKSx0fX12YXIgY3I9bnIoZnIsMik7ZnVuY3Rpb24gbHIobixyLHQpe3I9cW4ocix0KTtmb3IodmFyIGUsdT1ubihuKSxvPTAsaT11Lmxlbmd0aDtvPGk7bysrKWlmKHIobltlPXVbb11dLGUsbikpcmV0dXJuIGV9ZnVuY3Rpb24gc3Iobil7cmV0dXJuIGZ1bmN0aW9uKHIsdCxlKXt0PXFuKHQsZSk7Zm9yKHZhciB1PVkociksbz1uPjA/MDp1LTE7bz49MCYmbzx1O28rPW4paWYodChyW29dLG8scikpcmV0dXJuIG87cmV0dXJuLTF9fXZhciBwcj1zcigxKSx2cj1zcigtMSk7ZnVuY3Rpb24gaHIobixyLHQsZSl7Zm9yKHZhciB1PSh0PXFuKHQsZSwxKSkociksbz0wLGk9WShuKTtvPGk7KXt2YXIgYT1NYXRoLmZsb29yKChvK2kpLzIpO3QoblthXSk8dT9vPWErMTppPWF9cmV0dXJuIG99ZnVuY3Rpb24geXIobixyLHQpe3JldHVybiBmdW5jdGlvbihlLHUsbyl7dmFyIGE9MCxmPVkoZSk7aWYoIm51bWJlciI9PXR5cGVvZiBvKW4+MD9hPW8+PTA/bzpNYXRoLm1heChvK2YsYSk6Zj1vPj0wP01hdGgubWluKG8rMSxmKTpvK2YrMTtlbHNlIGlmKHQmJm8mJmYpcmV0dXJuIGVbbz10KGUsdSldPT09dT9vOi0xO2lmKHUhPXUpcmV0dXJuKG89cihpLmNhbGwoZSxhLGYpLEMpKT49MD9vK2E6LTE7Zm9yKG89bj4wP2E6Zi0xO28+PTAmJm88ZjtvKz1uKWlmKGVbb109PT11KXJldHVybiBvO3JldHVybi0xfX12YXIgZ3I9eXIoMSxwcixociksZHI9eXIoLTEsdnIpO2Z1bmN0aW9uIGJyKG4scix0KXt2YXIgZT0odHIobik/cHI6bHIpKG4scix0KTtpZih2b2lkIDAhPT1lJiYtMSE9PWUpcmV0dXJuIG5bZV19ZnVuY3Rpb24gbXIobixyLHQpe3ZhciBlLHU7aWYocj1GbihyLHQpLHRyKG4pKWZvcihlPTAsdT1uLmxlbmd0aDtlPHU7ZSsrKXIobltlXSxlLG4pO2Vsc2V7dmFyIG89bm4obik7Zm9yKGU9MCx1PW8ubGVuZ3RoO2U8dTtlKyspcihuW29bZV1dLG9bZV0sbil9cmV0dXJuIG59ZnVuY3Rpb24ganIobixyLHQpe3I9cW4ocix0KTtmb3IodmFyIGU9IXRyKG4pJiZubihuKSx1PShlfHxuKS5sZW5ndGgsbz1BcnJheSh1KSxpPTA7aTx1O2krKyl7dmFyIGE9ZT9lW2ldOmk7b1tpXT1yKG5bYV0sYSxuKX1yZXR1cm4gb31mdW5jdGlvbiBfcihuKXt2YXIgcj1mdW5jdGlvbihyLHQsZSx1KXt2YXIgbz0hdHIocikmJm5uKHIpLGk9KG98fHIpLmxlbmd0aCxhPW4+MD8wOmktMTtmb3IodXx8KGU9cltvP29bYV06YV0sYSs9bik7YT49MCYmYTxpO2ErPW4pe3ZhciBmPW8/b1thXTphO2U9dChlLHJbZl0sZixyKX1yZXR1cm4gZX07cmV0dXJuIGZ1bmN0aW9uKG4sdCxlLHUpe3ZhciBvPWFyZ3VtZW50cy5sZW5ndGg+PTM7cmV0dXJuIHIobixGbih0LHUsNCksZSxvKX19dmFyIHdyPV9yKDEpLEFyPV9yKC0xKTtmdW5jdGlvbiB4cihuLHIsdCl7dmFyIGU9W107cmV0dXJuIHI9cW4ocix0KSxtcihuLChmdW5jdGlvbihuLHQsdSl7cihuLHQsdSkmJmUucHVzaChuKX0pKSxlfWZ1bmN0aW9uIFNyKG4scix0KXtyPXFuKHIsdCk7Zm9yKHZhciBlPSF0cihuKSYmbm4obiksdT0oZXx8bikubGVuZ3RoLG89MDtvPHU7bysrKXt2YXIgaT1lP2Vbb106bztpZighcihuW2ldLGksbikpcmV0dXJuITF9cmV0dXJuITB9ZnVuY3Rpb24gT3IobixyLHQpe3I9cW4ocix0KTtmb3IodmFyIGU9IXRyKG4pJiZubihuKSx1PShlfHxuKS5sZW5ndGgsbz0wO288dTtvKyspe3ZhciBpPWU/ZVtvXTpvO2lmKHIobltpXSxpLG4pKXJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIE1yKG4scix0LGUpe3JldHVybiB0cihuKXx8KG49am4obikpLCgibnVtYmVyIiE9dHlwZW9mIHR8fGUpJiYodD0wKSxncihuLHIsdCk+PTB9dmFyIEVyPWooKGZ1bmN0aW9uKG4scix0KXt2YXIgZSx1O3JldHVybiBEKHIpP3U9cjoocj1ObihyKSxlPXIuc2xpY2UoMCwtMSkscj1yW3IubGVuZ3RoLTFdKSxqcihuLChmdW5jdGlvbihuKXt2YXIgbz11O2lmKCFvKXtpZihlJiZlLmxlbmd0aCYmKG49SW4obixlKSksbnVsbD09bilyZXR1cm47bz1uW3JdfXJldHVybiBudWxsPT1vP286by5hcHBseShuLHQpfSkpfSkpO2Z1bmN0aW9uIEJyKG4scil7cmV0dXJuIGpyKG4sUm4ocikpfWZ1bmN0aW9uIE5yKG4scix0KXt2YXIgZSx1LG89LTEvMCxpPS0xLzA7aWYobnVsbD09cnx8Im51bWJlciI9PXR5cGVvZiByJiYib2JqZWN0IiE9dHlwZW9mIG5bMF0mJm51bGwhPW4pZm9yKHZhciBhPTAsZj0obj10cihuKT9uOmpuKG4pKS5sZW5ndGg7YTxmO2ErKyludWxsIT0oZT1uW2FdKSYmZT5vJiYobz1lKTtlbHNlIHI9cW4ocix0KSxtcihuLChmdW5jdGlvbihuLHQsZSl7KCh1PXIobix0LGUpKT5pfHx1PT09LTEvMCYmbz09PS0xLzApJiYobz1uLGk9dSl9KSk7cmV0dXJuIG99ZnVuY3Rpb24gSXIobixyLHQpe2lmKG51bGw9PXJ8fHQpcmV0dXJuIHRyKG4pfHwobj1qbihuKSksbltXbihuLmxlbmd0aC0xKV07dmFyIGU9dHIobik/RW4obik6am4obiksdT1ZKGUpO3I9TWF0aC5tYXgoTWF0aC5taW4ocix1KSwwKTtmb3IodmFyIG89dS0xLGk9MDtpPHI7aSsrKXt2YXIgYT1XbihpLG8pLGY9ZVtpXTtlW2ldPWVbYV0sZVthXT1mfXJldHVybiBlLnNsaWNlKDAscil9ZnVuY3Rpb24ga3IobixyKXtyZXR1cm4gZnVuY3Rpb24odCxlLHUpe3ZhciBvPXI/W1tdLFtdXTp7fTtyZXR1cm4gZT1xbihlLHUpLG1yKHQsKGZ1bmN0aW9uKHIsdSl7dmFyIGk9ZShyLHUsdCk7bihvLHIsaSl9KSksb319dmFyIFRyPWtyKChmdW5jdGlvbihuLHIsdCl7VyhuLHQpP25bdF0ucHVzaChyKTpuW3RdPVtyXX0pKSxEcj1rcigoZnVuY3Rpb24obixyLHQpe25bdF09cn0pKSxScj1rcigoZnVuY3Rpb24obixyLHQpe1cobix0KT9uW3RdKys6blt0XT0xfSkpLEZyPWtyKChmdW5jdGlvbihuLHIsdCl7blt0PzA6MV0ucHVzaChyKX0pLCEwKSxWcj0vW15cdWQ4MDAtXHVkZmZmXXxbXHVkODAwLVx1ZGJmZl1bXHVkYzAwLVx1ZGZmZl18W1x1ZDgwMC1cdWRmZmZdL2c7ZnVuY3Rpb24gUHIobixyLHQpe3JldHVybiByIGluIHR9dmFyIHFyPWooKGZ1bmN0aW9uKG4scil7dmFyIHQ9e30sZT1yWzBdO2lmKG51bGw9PW4pcmV0dXJuIHQ7RChlKT8oci5sZW5ndGg+MSYmKGU9Rm4oZSxyWzFdKSkscj1hbihuKSk6KGU9UHIscj1lcihyLCExLCExKSxuPU9iamVjdChuKSk7Zm9yKHZhciB1PTAsbz1yLmxlbmd0aDt1PG87dSsrKXt2YXIgaT1yW3VdLGE9bltpXTtlKGEsaSxuKSYmKHRbaV09YSl9cmV0dXJuIHR9KSksVXI9aigoZnVuY3Rpb24obixyKXt2YXIgdCxlPXJbMF07cmV0dXJuIEQoZSk/KGU9YXIoZSksci5sZW5ndGg+MSYmKHQ9clsxXSkpOihyPWpyKGVyKHIsITEsITEpLFN0cmluZyksZT1mdW5jdGlvbihuLHQpe3JldHVybiFNcihyLHQpfSkscXIobixlLHQpfSkpO2Z1bmN0aW9uIFdyKG4scix0KXtyZXR1cm4gaS5jYWxsKG4sMCxNYXRoLm1heCgwLG4ubGVuZ3RoLShudWxsPT1yfHx0PzE6cikpKX1mdW5jdGlvbiB6cihuLHIsdCl7cmV0dXJuIG51bGw9PW58fG4ubGVuZ3RoPDE/bnVsbD09cnx8dD92b2lkIDA6W106bnVsbD09cnx8dD9uWzBdOldyKG4sbi5sZW5ndGgtcil9ZnVuY3Rpb24gTHIobixyLHQpe3JldHVybiBpLmNhbGwobixudWxsPT1yfHx0PzE6cil9dmFyIENyPWooKGZ1bmN0aW9uKG4scil7cmV0dXJuIHI9ZXIociwhMCwhMCkseHIobiwoZnVuY3Rpb24obil7cmV0dXJuIU1yKHIsbil9KSl9KSksS3I9aigoZnVuY3Rpb24obixyKXtyZXR1cm4gQ3IobixyKX0pKTtmdW5jdGlvbiBKcihuLHIsdCxlKXtBKHIpfHwoZT10LHQ9cixyPSExKSxudWxsIT10JiYodD1xbih0LGUpKTtmb3IodmFyIHU9W10sbz1bXSxpPTAsYT1ZKG4pO2k8YTtpKyspe3ZhciBmPW5baV0sYz10P3QoZixpLG4pOmY7ciYmIXQ/KGkmJm89PT1jfHx1LnB1c2goZiksbz1jKTp0P01yKG8sYyl8fChvLnB1c2goYyksdS5wdXNoKGYpKTpNcih1LGYpfHx1LnB1c2goZil9cmV0dXJuIHV9dmFyICRyPWooKGZ1bmN0aW9uKG4pe3JldHVybiBKcihlcihuLCEwLCEwKSl9KSk7ZnVuY3Rpb24gR3Iobil7Zm9yKHZhciByPW4mJk5yKG4sWSkubGVuZ3RofHwwLHQ9QXJyYXkociksZT0wO2U8cjtlKyspdFtlXT1CcihuLGUpO3JldHVybiB0fXZhciBIcj1qKEdyKTtmdW5jdGlvbiBRcihuLHIpe3JldHVybiBuLl9jaGFpbj90bihyKS5jaGFpbigpOnJ9ZnVuY3Rpb24gWHIobil7cmV0dXJuIG1yKHduKG4pLChmdW5jdGlvbihyKXt2YXIgdD10bltyXT1uW3JdO3RuLnByb3RvdHlwZVtyXT1mdW5jdGlvbigpe3ZhciBuPVt0aGlzLl93cmFwcGVkXTtyZXR1cm4gby5hcHBseShuLGFyZ3VtZW50cyksUXIodGhpcyx0LmFwcGx5KHRuLG4pKX19KSksdG59bXIoWyJwb3AiLCJwdXNoIiwicmV2ZXJzZSIsInNoaWZ0Iiwic29ydCIsInNwbGljZSIsInVuc2hpZnQiXSwoZnVuY3Rpb24obil7dmFyIHI9dFtuXTt0bi5wcm90b3R5cGVbbl09ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl93cmFwcGVkO3JldHVybiBudWxsIT10JiYoci5hcHBseSh0LGFyZ3VtZW50cyksInNoaWZ0IiE9PW4mJiJzcGxpY2UiIT09bnx8MCE9PXQubGVuZ3RofHxkZWxldGUgdFswXSksUXIodGhpcyx0KX19KSksbXIoWyJjb25jYXQiLCJqb2luIiwic2xpY2UiXSwoZnVuY3Rpb24obil7dmFyIHI9dFtuXTt0bi5wcm90b3R5cGVbbl09ZnVuY3Rpb24oKXt2YXIgbj10aGlzLl93cmFwcGVkO3JldHVybiBudWxsIT1uJiYobj1yLmFwcGx5KG4sYXJndW1lbnRzKSksUXIodGhpcyxuKX19KSk7dmFyIFlyPVhyKHtfX3Byb3RvX186bnVsbCxWRVJTSU9OOm4scmVzdEFyZ3VtZW50czpqLGlzT2JqZWN0Ol8saXNOdWxsOmZ1bmN0aW9uKG4pe3JldHVybiBudWxsPT09bn0saXNVbmRlZmluZWQ6dyxpc0Jvb2xlYW46QSxpc0VsZW1lbnQ6ZnVuY3Rpb24obil7cmV0dXJuISghbnx8MSE9PW4ubm9kZVR5cGUpfSxpc1N0cmluZzpTLGlzTnVtYmVyOk8saXNEYXRlOk0saXNSZWdFeHA6RSxpc0Vycm9yOkIsaXNTeW1ib2w6Tixpc0FycmF5QnVmZmVyOkksaXNEYXRhVmlldzpxLGlzQXJyYXk6VSxpc0Z1bmN0aW9uOkQsaXNBcmd1bWVudHM6TCxpc0Zpbml0ZTpmdW5jdGlvbihuKXtyZXR1cm4hTihuKSYmZyhuKSYmIWlzTmFOKHBhcnNlRmxvYXQobikpfSxpc05hTjpDLGlzVHlwZWRBcnJheTpYLGlzRW1wdHk6ZnVuY3Rpb24obil7aWYobnVsbD09bilyZXR1cm4hMDt2YXIgcj1ZKG4pO3JldHVybiJudW1iZXIiPT10eXBlb2YgciYmKFUobil8fFMobil8fEwobikpPzA9PT1yOjA9PT1ZKG5uKG4pKX0saXNNYXRjaDpybixpc0VxdWFsOmZ1bmN0aW9uKG4scil7cmV0dXJuIG9uKG4scil9LGlzTWFwOmduLGlzV2Vha01hcDpkbixpc1NldDpibixpc1dlYWtTZXQ6bW4sa2V5czpubixhbGxLZXlzOmFuLHZhbHVlczpqbixwYWlyczpmdW5jdGlvbihuKXtmb3IodmFyIHI9bm4obiksdD1yLmxlbmd0aCxlPUFycmF5KHQpLHU9MDt1PHQ7dSsrKWVbdV09W3JbdV0sbltyW3VdXV07cmV0dXJuIGV9LGludmVydDpfbixmdW5jdGlvbnM6d24sbWV0aG9kczp3bixleHRlbmQ6eG4sZXh0ZW5kT3duOlNuLGFzc2lnbjpTbixkZWZhdWx0czpPbixjcmVhdGU6ZnVuY3Rpb24obixyKXt2YXIgdD1NbihuKTtyZXR1cm4gciYmU24odCxyKSx0fSxjbG9uZTpFbix0YXA6ZnVuY3Rpb24obixyKXtyZXR1cm4gcihuKSxufSxnZXQ6a24saGFzOmZ1bmN0aW9uKG4scil7Zm9yKHZhciB0PShyPU5uKHIpKS5sZW5ndGgsZT0wO2U8dDtlKyspe3ZhciB1PXJbZV07aWYoIVcobix1KSlyZXR1cm4hMTtuPW5bdV19cmV0dXJuISF0fSxtYXBPYmplY3Q6ZnVuY3Rpb24obixyLHQpe3I9cW4ocix0KTtmb3IodmFyIGU9bm4obiksdT1lLmxlbmd0aCxvPXt9LGk9MDtpPHU7aSsrKXt2YXIgYT1lW2ldO29bYV09cihuW2FdLGEsbil9cmV0dXJuIG99LGlkZW50aXR5OlRuLGNvbnN0YW50Okssbm9vcDpVbix0b1BhdGg6Qm4scHJvcGVydHk6Um4scHJvcGVydHlPZjpmdW5jdGlvbihuKXtyZXR1cm4gbnVsbD09bj9VbjpmdW5jdGlvbihyKXtyZXR1cm4ga24obixyKX19LG1hdGNoZXI6RG4sbWF0Y2hlczpEbix0aW1lczpmdW5jdGlvbihuLHIsdCl7dmFyIGU9QXJyYXkoTWF0aC5tYXgoMCxuKSk7cj1GbihyLHQsMSk7Zm9yKHZhciB1PTA7dTxuO3UrKyllW3VdPXIodSk7cmV0dXJuIGV9LHJhbmRvbTpXbixub3c6em4sZXNjYXBlOktuLHVuZXNjYXBlOkpuLHRlbXBsYXRlU2V0dGluZ3M6JG4sdGVtcGxhdGU6ZnVuY3Rpb24obixyLHQpeyFyJiZ0JiYocj10KSxyPU9uKHt9LHIsdG4udGVtcGxhdGVTZXR0aW5ncyk7dmFyIGUsdT1SZWdFeHAoWyhyLmVzY2FwZXx8R24pLnNvdXJjZSwoci5pbnRlcnBvbGF0ZXx8R24pLnNvdXJjZSwoci5ldmFsdWF0ZXx8R24pLnNvdXJjZV0uam9pbigifCIpKyJ8JCIsImciKSxvPTAsaT0iX19wKz0nIjtuLnJlcGxhY2UodSwoZnVuY3Rpb24ocix0LGUsdSxhKXtyZXR1cm4gaSs9bi5zbGljZShvLGEpLnJlcGxhY2UoUW4sWG4pLG89YStyLmxlbmd0aCx0P2krPSInK1xuKChfX3Q9KCIrdCsiKSk9PW51bGw/Jyc6Xy5lc2NhcGUoX190KSkrXG4nIjplP2krPSInK1xuKChfX3Q9KCIrZSsiKSk9PW51bGw/Jyc6X190KStcbiciOnUmJihpKz0iJztcbiIrdSsiXG5fX3ArPSciKSxyfSkpLGkrPSInO1xuIixyLnZhcmlhYmxlfHwoaT0id2l0aChvYmp8fHt9KXtcbiIraSsifVxuIiksaT0idmFyIF9fdCxfX3A9JycsX19qPUFycmF5LnByb3RvdHlwZS5qb2luLCIrInByaW50PWZ1bmN0aW9uKCl7X19wKz1fX2ouY2FsbChhcmd1bWVudHMsJycpO307XG4iK2krInJldHVybiBfX3A7XG4iO3RyeXtlPW5ldyBGdW5jdGlvbihyLnZhcmlhYmxlfHwib2JqIiwiXyIsaSl9Y2F0Y2gobil7dGhyb3cgbi5zb3VyY2U9aSxufXZhciBhPWZ1bmN0aW9uKG4pe3JldHVybiBlLmNhbGwodGhpcyxuLHRuKX0sZj1yLnZhcmlhYmxlfHwib2JqIjtyZXR1cm4gYS5zb3VyY2U9ImZ1bmN0aW9uKCIrZisiKXtcbiIraSsifSIsYX0scmVzdWx0OmZ1bmN0aW9uKG4scix0KXt2YXIgZT0ocj1ObihyKSkubGVuZ3RoO2lmKCFlKXJldHVybiBEKHQpP3QuY2FsbChuKTp0O2Zvcih2YXIgdT0wO3U8ZTt1Kyspe3ZhciBvPW51bGw9PW4/dm9pZCAwOm5bclt1XV07dm9pZCAwPT09byYmKG89dCx1PWUpLG49RChvKT9vLmNhbGwobik6b31yZXR1cm4gbn0sdW5pcXVlSWQ6ZnVuY3Rpb24obil7dmFyIHI9KytZbisiIjtyZXR1cm4gbj9uK3I6cn0sY2hhaW46ZnVuY3Rpb24obil7dmFyIHI9dG4obik7cmV0dXJuIHIuX2NoYWluPSEwLHJ9LGl0ZXJhdGVlOlBuLHBhcnRpYWw6bnIsYmluZDpycixiaW5kQWxsOnVyLG1lbW9pemU6ZnVuY3Rpb24obixyKXt2YXIgdD1mdW5jdGlvbihlKXt2YXIgdT10LmNhY2hlLG89IiIrKHI/ci5hcHBseSh0aGlzLGFyZ3VtZW50cyk6ZSk7cmV0dXJuIFcodSxvKXx8KHVbb109bi5hcHBseSh0aGlzLGFyZ3VtZW50cykpLHVbb119O3JldHVybiB0LmNhY2hlPXt9LHR9LGRlbGF5Om9yLGRlZmVyOmlyLHRocm90dGxlOmZ1bmN0aW9uKG4scix0KXt2YXIgZSx1LG8saSxhPTA7dHx8KHQ9e30pO3ZhciBmPWZ1bmN0aW9uKCl7YT0hMT09PXQubGVhZGluZz8wOnpuKCksZT1udWxsLGk9bi5hcHBseSh1LG8pLGV8fCh1PW89bnVsbCl9LGM9ZnVuY3Rpb24oKXt2YXIgYz16bigpO2F8fCExIT09dC5sZWFkaW5nfHwoYT1jKTt2YXIgbD1yLShjLWEpO3JldHVybiB1PXRoaXMsbz1hcmd1bWVudHMsbDw9MHx8bD5yPyhlJiYoY2xlYXJUaW1lb3V0KGUpLGU9bnVsbCksYT1jLGk9bi5hcHBseSh1LG8pLGV8fCh1PW89bnVsbCkpOmV8fCExPT09dC50cmFpbGluZ3x8KGU9c2V0VGltZW91dChmLGwpKSxpfTtyZXR1cm4gYy5jYW5jZWw9ZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoZSksYT0wLGU9dT1vPW51bGx9LGN9LGRlYm91bmNlOmZ1bmN0aW9uKG4scix0KXt2YXIgZSx1LG89ZnVuY3Rpb24ocix0KXtlPW51bGwsdCYmKHU9bi5hcHBseShyLHQpKX0saT1qKChmdW5jdGlvbihpKXtpZihlJiZjbGVhclRpbWVvdXQoZSksdCl7dmFyIGE9IWU7ZT1zZXRUaW1lb3V0KG8sciksYSYmKHU9bi5hcHBseSh0aGlzLGkpKX1lbHNlIGU9b3IobyxyLHRoaXMsaSk7cmV0dXJuIHV9KSk7cmV0dXJuIGkuY2FuY2VsPWZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KGUpLGU9bnVsbH0saX0sd3JhcDpmdW5jdGlvbihuLHIpe3JldHVybiBucihyLG4pfSxuZWdhdGU6YXIsY29tcG9zZTpmdW5jdGlvbigpe3ZhciBuPWFyZ3VtZW50cyxyPW4ubGVuZ3RoLTE7cmV0dXJuIGZ1bmN0aW9uKCl7Zm9yKHZhciB0PXIsZT1uW3JdLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0LS07KWU9blt0XS5jYWxsKHRoaXMsZSk7cmV0dXJuIGV9fSxhZnRlcjpmdW5jdGlvbihuLHIpe3JldHVybiBmdW5jdGlvbigpe2lmKC0tbjwxKXJldHVybiByLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19LGJlZm9yZTpmcixvbmNlOmNyLGZpbmRLZXk6bHIsZmluZEluZGV4OnByLGZpbmRMYXN0SW5kZXg6dnIsc29ydGVkSW5kZXg6aHIsaW5kZXhPZjpncixsYXN0SW5kZXhPZjpkcixmaW5kOmJyLGRldGVjdDpicixmaW5kV2hlcmU6ZnVuY3Rpb24obixyKXtyZXR1cm4gYnIobixEbihyKSl9LGVhY2g6bXIsZm9yRWFjaDptcixtYXA6anIsY29sbGVjdDpqcixyZWR1Y2U6d3IsZm9sZGw6d3IsaW5qZWN0OndyLHJlZHVjZVJpZ2h0OkFyLGZvbGRyOkFyLGZpbHRlcjp4cixzZWxlY3Q6eHIscmVqZWN0OmZ1bmN0aW9uKG4scix0KXtyZXR1cm4geHIobixhcihxbihyKSksdCl9LGV2ZXJ5OlNyLGFsbDpTcixzb21lOk9yLGFueTpPcixjb250YWluczpNcixpbmNsdWRlczpNcixpbmNsdWRlOk1yLGludm9rZTpFcixwbHVjazpCcix3aGVyZTpmdW5jdGlvbihuLHIpe3JldHVybiB4cihuLERuKHIpKX0sbWF4Ok5yLG1pbjpmdW5jdGlvbihuLHIsdCl7dmFyIGUsdSxvPTEvMCxpPTEvMDtpZihudWxsPT1yfHwibnVtYmVyIj09dHlwZW9mIHImJiJvYmplY3QiIT10eXBlb2YgblswXSYmbnVsbCE9bilmb3IodmFyIGE9MCxmPShuPXRyKG4pP246am4obikpLmxlbmd0aDthPGY7YSsrKW51bGwhPShlPW5bYV0pJiZlPG8mJihvPWUpO2Vsc2Ugcj1xbihyLHQpLG1yKG4sKGZ1bmN0aW9uKG4sdCxlKXsoKHU9cihuLHQsZSkpPGl8fHU9PT0xLzAmJm89PT0xLzApJiYobz1uLGk9dSl9KSk7cmV0dXJuIG99LHNodWZmbGU6ZnVuY3Rpb24obil7cmV0dXJuIElyKG4sMS8wKX0sc2FtcGxlOklyLHNvcnRCeTpmdW5jdGlvbihuLHIsdCl7dmFyIGU9MDtyZXR1cm4gcj1xbihyLHQpLEJyKGpyKG4sKGZ1bmN0aW9uKG4sdCx1KXtyZXR1cm57dmFsdWU6bixpbmRleDplKyssY3JpdGVyaWE6cihuLHQsdSl9fSkpLnNvcnQoKGZ1bmN0aW9uKG4scil7dmFyIHQ9bi5jcml0ZXJpYSxlPXIuY3JpdGVyaWE7aWYodCE9PWUpe2lmKHQ+ZXx8dm9pZCAwPT09dClyZXR1cm4gMTtpZih0PGV8fHZvaWQgMD09PWUpcmV0dXJuLTF9cmV0dXJuIG4uaW5kZXgtci5pbmRleH0pKSwidmFsdWUiKX0sZ3JvdXBCeTpUcixpbmRleEJ5OkRyLGNvdW50Qnk6UnIscGFydGl0aW9uOkZyLHRvQXJyYXk6ZnVuY3Rpb24obil7cmV0dXJuIG4/VShuKT9pLmNhbGwobik6UyhuKT9uLm1hdGNoKFZyKTp0cihuKT9qcihuLFRuKTpqbihuKTpbXX0sc2l6ZTpmdW5jdGlvbihuKXtyZXR1cm4gbnVsbD09bj8wOnRyKG4pP24ubGVuZ3RoOm5uKG4pLmxlbmd0aH0scGljazpxcixvbWl0OlVyLGZpcnN0OnpyLGhlYWQ6enIsdGFrZTp6cixpbml0aWFsOldyLGxhc3Q6ZnVuY3Rpb24obixyLHQpe3JldHVybiBudWxsPT1ufHxuLmxlbmd0aDwxP251bGw9PXJ8fHQ/dm9pZCAwOltdOm51bGw9PXJ8fHQ/bltuLmxlbmd0aC0xXTpMcihuLE1hdGgubWF4KDAsbi5sZW5ndGgtcikpfSxyZXN0OkxyLHRhaWw6THIsZHJvcDpMcixjb21wYWN0OmZ1bmN0aW9uKG4pe3JldHVybiB4cihuLEJvb2xlYW4pfSxmbGF0dGVuOmZ1bmN0aW9uKG4scil7cmV0dXJuIGVyKG4sciwhMSl9LHdpdGhvdXQ6S3IsdW5pcTpKcix1bmlxdWU6SnIsdW5pb246JHIsaW50ZXJzZWN0aW9uOmZ1bmN0aW9uKG4pe2Zvcih2YXIgcj1bXSx0PWFyZ3VtZW50cy5sZW5ndGgsZT0wLHU9WShuKTtlPHU7ZSsrKXt2YXIgbz1uW2VdO2lmKCFNcihyLG8pKXt2YXIgaTtmb3IoaT0xO2k8dCYmTXIoYXJndW1lbnRzW2ldLG8pO2krKyk7aT09PXQmJnIucHVzaChvKX19cmV0dXJuIHJ9LGRpZmZlcmVuY2U6Q3IsdW56aXA6R3IsdHJhbnNwb3NlOkdyLHppcDpIcixvYmplY3Q6ZnVuY3Rpb24obixyKXtmb3IodmFyIHQ9e30sZT0wLHU9WShuKTtlPHU7ZSsrKXI/dFtuW2VdXT1yW2VdOnRbbltlXVswXV09bltlXVsxXTtyZXR1cm4gdH0scmFuZ2U6ZnVuY3Rpb24obixyLHQpe251bGw9PXImJihyPW58fDAsbj0wKSx0fHwodD1yPG4/LTE6MSk7Zm9yKHZhciBlPU1hdGgubWF4KE1hdGguY2VpbCgoci1uKS90KSwwKSx1PUFycmF5KGUpLG89MDtvPGU7bysrLG4rPXQpdVtvXT1uO3JldHVybiB1fSxjaHVuazpmdW5jdGlvbihuLHIpe2lmKG51bGw9PXJ8fHI8MSlyZXR1cm5bXTtmb3IodmFyIHQ9W10sZT0wLHU9bi5sZW5ndGg7ZTx1Oyl0LnB1c2goaS5jYWxsKG4sZSxlKz1yKSk7cmV0dXJuIHR9LG1peGluOlhyLGRlZmF1bHQ6dG59KTtyZXR1cm4gWXIuXz1ZcixZcn0pKTs="},{"meta":{"name":"sweetalert2@11.3.0","url":"https://unpkg.com/sweetalert2@11.3.0","ts":1670371893018,"mimetype":"text/plain"},"source":"LyohCiogc3dlZXRhbGVydDIgdjExLjMuMAoqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS4KKi8KKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHsKICB0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgPyBtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkoKSA6CiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDoKICAoZ2xvYmFsID0gZ2xvYmFsIHx8IHNlbGYsIGdsb2JhbC5Td2VldGFsZXJ0MiA9IGZhY3RvcnkoKSk7Cn0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7CgogIGNvbnN0IERpc21pc3NSZWFzb24gPSBPYmplY3QuZnJlZXplKHsKICAgIGNhbmNlbDogJ2NhbmNlbCcsCiAgICBiYWNrZHJvcDogJ2JhY2tkcm9wJywKICAgIGNsb3NlOiAnY2xvc2UnLAogICAgZXNjOiAnZXNjJywKICAgIHRpbWVyOiAndGltZXInCiAgfSk7CgogIGNvbnN0IGNvbnNvbGVQcmVmaXggPSAnU3dlZXRBbGVydDI6JzsKICAvKioKICAgKiBGaWx0ZXIgdGhlIHVuaXF1ZSB2YWx1ZXMgaW50byBhIG5ldyBhcnJheQogICAqIEBwYXJhbSBhcnIKICAgKi8KCiAgY29uc3QgdW5pcXVlQXJyYXkgPSBhcnIgPT4gewogICAgY29uc3QgcmVzdWx0ID0gW107CgogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKHJlc3VsdC5pbmRleE9mKGFycltpXSkgPT09IC0xKSB7CiAgICAgICAgcmVzdWx0LnB1c2goYXJyW2ldKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKICAvKioKICAgKiBDYXBpdGFsaXplIHRoZSBmaXJzdCBsZXR0ZXIgb2YgYSBzdHJpbmcKICAgKiBAcGFyYW0gc3RyCiAgICovCgogIGNvbnN0IGNhcGl0YWxpemVGaXJzdExldHRlciA9IHN0ciA9PiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7CiAgLyoqCiAgICogQ29udmVydCBOb2RlTGlzdCB0byBBcnJheQogICAqIEBwYXJhbSBub2RlTGlzdAogICAqLwoKICBjb25zdCB0b0FycmF5ID0gbm9kZUxpc3QgPT4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobm9kZUxpc3QpOwogIC8qKgogICAqIFN0YW5kYXJkaXNlIGNvbnNvbGUgd2FybmluZ3MKICAgKiBAcGFyYW0gbWVzc2FnZQogICAqLwoKICBjb25zdCB3YXJuID0gbWVzc2FnZSA9PiB7CiAgICBjb25zb2xlLndhcm4oIiIuY29uY2F0KGNvbnNvbGVQcmVmaXgsICIgIikuY29uY2F0KHR5cGVvZiBtZXNzYWdlID09PSAnb2JqZWN0JyA/IG1lc3NhZ2Uuam9pbignICcpIDogbWVzc2FnZSkpOwogIH07CiAgLyoqCiAgICogU3RhbmRhcmRpc2UgY29uc29sZSBlcnJvcnMKICAgKiBAcGFyYW0gbWVzc2FnZQogICAqLwoKICBjb25zdCBlcnJvciA9IG1lc3NhZ2UgPT4gewogICAgY29uc29sZS5lcnJvcigiIi5jb25jYXQoY29uc29sZVByZWZpeCwgIiAiKS5jb25jYXQobWVzc2FnZSkpOwogIH07CiAgLyoqCiAgICogUHJpdmF0ZSBnbG9iYWwgc3RhdGUgZm9yIGB3YXJuT25jZWAKICAgKiBAdHlwZSB7QXJyYXl9CiAgICogQHByaXZhdGUKICAgKi8KCiAgY29uc3QgcHJldmlvdXNXYXJuT25jZU1lc3NhZ2VzID0gW107CiAgLyoqCiAgICogU2hvdyBhIGNvbnNvbGUgd2FybmluZywgYnV0IG9ubHkgaWYgaXQgaGFzbid0IGFscmVhZHkgYmVlbiBzaG93bgogICAqIEBwYXJhbSBtZXNzYWdlCiAgICovCgogIGNvbnN0IHdhcm5PbmNlID0gbWVzc2FnZSA9PiB7CiAgICBpZiAoIXByZXZpb3VzV2Fybk9uY2VNZXNzYWdlcy5pbmNsdWRlcyhtZXNzYWdlKSkgewogICAgICBwcmV2aW91c1dhcm5PbmNlTWVzc2FnZXMucHVzaChtZXNzYWdlKTsKICAgICAgd2FybihtZXNzYWdlKTsKICAgIH0KICB9OwogIC8qKgogICAqIFNob3cgYSBvbmUtdGltZSBjb25zb2xlIHdhcm5pbmcgYWJvdXQgZGVwcmVjYXRlZCBwYXJhbXMvbWV0aG9kcwogICAqLwoKICBjb25zdCB3YXJuQWJvdXREZXByZWNhdGlvbiA9IChkZXByZWNhdGVkUGFyYW0sIHVzZUluc3RlYWQpID0+IHsKICAgIHdhcm5PbmNlKCJcIiIuY29uY2F0KGRlcHJlY2F0ZWRQYXJhbSwgIlwiIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgbmV4dCBtYWpvciByZWxlYXNlLiBQbGVhc2UgdXNlIFwiIikuY29uY2F0KHVzZUluc3RlYWQsICJcIiBpbnN0ZWFkLiIpKTsKICB9OwogIC8qKgogICAqIElmIGBhcmdgIGlzIGEgZnVuY3Rpb24sIGNhbGwgaXQgKHdpdGggbm8gYXJndW1lbnRzIG9yIGNvbnRleHQpIGFuZCByZXR1cm4gdGhlIHJlc3VsdC4KICAgKiBPdGhlcndpc2UsIGp1c3QgcGFzcyB0aGUgdmFsdWUgdGhyb3VnaAogICAqIEBwYXJhbSBhcmcKICAgKi8KCiAgY29uc3QgY2FsbElmRnVuY3Rpb24gPSBhcmcgPT4gdHlwZW9mIGFyZyA9PT0gJ2Z1bmN0aW9uJyA/IGFyZygpIDogYXJnOwogIGNvbnN0IGhhc1RvUHJvbWlzZUZuID0gYXJnID0+IGFyZyAmJiB0eXBlb2YgYXJnLnRvUHJvbWlzZSA9PT0gJ2Z1bmN0aW9uJzsKICBjb25zdCBhc1Byb21pc2UgPSBhcmcgPT4gaGFzVG9Qcm9taXNlRm4oYXJnKSA/IGFyZy50b1Byb21pc2UoKSA6IFByb21pc2UucmVzb2x2ZShhcmcpOwogIGNvbnN0IGlzUHJvbWlzZSA9IGFyZyA9PiBhcmcgJiYgUHJvbWlzZS5yZXNvbHZlKGFyZykgPT09IGFyZzsKCiAgY29uc3QgaXNKcXVlcnlFbGVtZW50ID0gZWxlbSA9PiB0eXBlb2YgZWxlbSA9PT0gJ29iamVjdCcgJiYgZWxlbS5qcXVlcnk7CgogIGNvbnN0IGlzRWxlbWVudCA9IGVsZW0gPT4gZWxlbSBpbnN0YW5jZW9mIEVsZW1lbnQgfHwgaXNKcXVlcnlFbGVtZW50KGVsZW0pOwoKICBjb25zdCBhcmdzVG9QYXJhbXMgPSBhcmdzID0+IHsKICAgIGNvbnN0IHBhcmFtcyA9IHt9OwoKICAgIGlmICh0eXBlb2YgYXJnc1swXSA9PT0gJ29iamVjdCcgJiYgIWlzRWxlbWVudChhcmdzWzBdKSkgewogICAgICBPYmplY3QuYXNzaWduKHBhcmFtcywgYXJnc1swXSk7CiAgICB9IGVsc2UgewogICAgICBbJ3RpdGxlJywgJ2h0bWwnLCAnaWNvbiddLmZvckVhY2goKG5hbWUsIGluZGV4KSA9PiB7CiAgICAgICAgY29uc3QgYXJnID0gYXJnc1tpbmRleF07CgogICAgICAgIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJyB8fCBpc0VsZW1lbnQoYXJnKSkgewogICAgICAgICAgcGFyYW1zW25hbWVdID0gYXJnOwogICAgICAgIH0gZWxzZSBpZiAoYXJnICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGVycm9yKCJVbmV4cGVjdGVkIHR5cGUgb2YgIi5jb25jYXQobmFtZSwgIiEgRXhwZWN0ZWQgXCJzdHJpbmdcIiBvciBcIkVsZW1lbnRcIiwgZ290ICIpLmNvbmNhdCh0eXBlb2YgYXJnKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gcGFyYW1zOwogIH07CgogIGNvbnN0IHN3YWxQcmVmaXggPSAnc3dhbDItJzsKICBjb25zdCBwcmVmaXggPSBpdGVtcyA9PiB7CiAgICBjb25zdCByZXN1bHQgPSB7fTsKCiAgICBmb3IgKGNvbnN0IGkgaW4gaXRlbXMpIHsKICAgICAgcmVzdWx0W2l0ZW1zW2ldXSA9IHN3YWxQcmVmaXggKyBpdGVtc1tpXTsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0OwogIH07CiAgY29uc3Qgc3dhbENsYXNzZXMgPSBwcmVmaXgoWydjb250YWluZXInLCAnc2hvd24nLCAnaGVpZ2h0LWF1dG8nLCAnaW9zZml4JywgJ3BvcHVwJywgJ21vZGFsJywgJ25vLWJhY2tkcm9wJywgJ25vLXRyYW5zaXRpb24nLCAndG9hc3QnLCAndG9hc3Qtc2hvd24nLCAnc2hvdycsICdoaWRlJywgJ2Nsb3NlJywgJ3RpdGxlJywgJ2h0bWwtY29udGFpbmVyJywgJ2FjdGlvbnMnLCAnY29uZmlybScsICdkZW55JywgJ2NhbmNlbCcsICdkZWZhdWx0LW91dGxpbmUnLCAnZm9vdGVyJywgJ2ljb24nLCAnaWNvbi1jb250ZW50JywgJ2ltYWdlJywgJ2lucHV0JywgJ2ZpbGUnLCAncmFuZ2UnLCAnc2VsZWN0JywgJ3JhZGlvJywgJ2NoZWNrYm94JywgJ2xhYmVsJywgJ3RleHRhcmVhJywgJ2lucHV0ZXJyb3InLCAnaW5wdXQtbGFiZWwnLCAndmFsaWRhdGlvbi1tZXNzYWdlJywgJ3Byb2dyZXNzLXN0ZXBzJywgJ2FjdGl2ZS1wcm9ncmVzcy1zdGVwJywgJ3Byb2dyZXNzLXN0ZXAnLCAncHJvZ3Jlc3Mtc3RlcC1saW5lJywgJ2xvYWRlcicsICdsb2FkaW5nJywgJ3N0eWxlZCcsICd0b3AnLCAndG9wLXN0YXJ0JywgJ3RvcC1lbmQnLCAndG9wLWxlZnQnLCAndG9wLXJpZ2h0JywgJ2NlbnRlcicsICdjZW50ZXItc3RhcnQnLCAnY2VudGVyLWVuZCcsICdjZW50ZXItbGVmdCcsICdjZW50ZXItcmlnaHQnLCAnYm90dG9tJywgJ2JvdHRvbS1zdGFydCcsICdib3R0b20tZW5kJywgJ2JvdHRvbS1sZWZ0JywgJ2JvdHRvbS1yaWdodCcsICdncm93LXJvdycsICdncm93LWNvbHVtbicsICdncm93LWZ1bGxzY3JlZW4nLCAncnRsJywgJ3RpbWVyLXByb2dyZXNzLWJhcicsICd0aW1lci1wcm9ncmVzcy1iYXItY29udGFpbmVyJywgJ3Njcm9sbGJhci1tZWFzdXJlJywgJ2ljb24tc3VjY2VzcycsICdpY29uLXdhcm5pbmcnLCAnaWNvbi1pbmZvJywgJ2ljb24tcXVlc3Rpb24nLCAnaWNvbi1lcnJvciddKTsKICBjb25zdCBpY29uVHlwZXMgPSBwcmVmaXgoWydzdWNjZXNzJywgJ3dhcm5pbmcnLCAnaW5mbycsICdxdWVzdGlvbicsICdlcnJvciddKTsKCiAgY29uc3QgZ2V0Q29udGFpbmVyID0gKCkgPT4gZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCIuIi5jb25jYXQoc3dhbENsYXNzZXMuY29udGFpbmVyKSk7CiAgY29uc3QgZWxlbWVudEJ5U2VsZWN0b3IgPSBzZWxlY3RvclN0cmluZyA9PiB7CiAgICBjb25zdCBjb250YWluZXIgPSBnZXRDb250YWluZXIoKTsKICAgIHJldHVybiBjb250YWluZXIgPyBjb250YWluZXIucXVlcnlTZWxlY3RvcihzZWxlY3RvclN0cmluZykgOiBudWxsOwogIH07CgogIGNvbnN0IGVsZW1lbnRCeUNsYXNzID0gY2xhc3NOYW1lID0+IHsKICAgIHJldHVybiBlbGVtZW50QnlTZWxlY3RvcigiLiIuY29uY2F0KGNsYXNzTmFtZSkpOwogIH07CgogIGNvbnN0IGdldFBvcHVwID0gKCkgPT4gZWxlbWVudEJ5Q2xhc3Moc3dhbENsYXNzZXMucG9wdXApOwogIGNvbnN0IGdldEljb24gPSAoKSA9PiBlbGVtZW50QnlDbGFzcyhzd2FsQ2xhc3Nlcy5pY29uKTsKICBjb25zdCBnZXRUaXRsZSA9ICgpID0+IGVsZW1lbnRCeUNsYXNzKHN3YWxDbGFzc2VzLnRpdGxlKTsKICBjb25zdCBnZXRIdG1sQ29udGFpbmVyID0gKCkgPT4gZWxlbWVudEJ5Q2xhc3Moc3dhbENsYXNzZXNbJ2h0bWwtY29udGFpbmVyJ10pOwogIGNvbnN0IGdldEltYWdlID0gKCkgPT4gZWxlbWVudEJ5Q2xhc3Moc3dhbENsYXNzZXMuaW1hZ2UpOwogIGNvbnN0IGdldFByb2dyZXNzU3RlcHMgPSAoKSA9PiBlbGVtZW50QnlDbGFzcyhzd2FsQ2xhc3Nlc1sncHJvZ3Jlc3Mtc3RlcHMnXSk7CiAgY29uc3QgZ2V0VmFsaWRhdGlvbk1lc3NhZ2UgPSAoKSA9PiBlbGVtZW50QnlDbGFzcyhzd2FsQ2xhc3Nlc1sndmFsaWRhdGlvbi1tZXNzYWdlJ10pOwogIGNvbnN0IGdldENvbmZpcm1CdXR0b24gPSAoKSA9PiBlbGVtZW50QnlTZWxlY3RvcigiLiIuY29uY2F0KHN3YWxDbGFzc2VzLmFjdGlvbnMsICIgLiIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5jb25maXJtKSk7CiAgY29uc3QgZ2V0RGVueUJ1dHRvbiA9ICgpID0+IGVsZW1lbnRCeVNlbGVjdG9yKCIuIi5jb25jYXQoc3dhbENsYXNzZXMuYWN0aW9ucywgIiAuIikuY29uY2F0KHN3YWxDbGFzc2VzLmRlbnkpKTsKICBjb25zdCBnZXRJbnB1dExhYmVsID0gKCkgPT4gZWxlbWVudEJ5Q2xhc3Moc3dhbENsYXNzZXNbJ2lucHV0LWxhYmVsJ10pOwogIGNvbnN0IGdldExvYWRlciA9ICgpID0+IGVsZW1lbnRCeVNlbGVjdG9yKCIuIi5jb25jYXQoc3dhbENsYXNzZXMubG9hZGVyKSk7CiAgY29uc3QgZ2V0Q2FuY2VsQnV0dG9uID0gKCkgPT4gZWxlbWVudEJ5U2VsZWN0b3IoIi4iLmNvbmNhdChzd2FsQ2xhc3Nlcy5hY3Rpb25zLCAiIC4iKS5jb25jYXQoc3dhbENsYXNzZXMuY2FuY2VsKSk7CiAgY29uc3QgZ2V0QWN0aW9ucyA9ICgpID0+IGVsZW1lbnRCeUNsYXNzKHN3YWxDbGFzc2VzLmFjdGlvbnMpOwogIGNvbnN0IGdldEZvb3RlciA9ICgpID0+IGVsZW1lbnRCeUNsYXNzKHN3YWxDbGFzc2VzLmZvb3Rlcik7CiAgY29uc3QgZ2V0VGltZXJQcm9ncmVzc0JhciA9ICgpID0+IGVsZW1lbnRCeUNsYXNzKHN3YWxDbGFzc2VzWyd0aW1lci1wcm9ncmVzcy1iYXInXSk7CiAgY29uc3QgZ2V0Q2xvc2VCdXR0b24gPSAoKSA9PiBlbGVtZW50QnlDbGFzcyhzd2FsQ2xhc3Nlcy5jbG9zZSk7IC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9qa3VwL2ZvY3VzYWJsZS9ibG9iL21hc3Rlci9pbmRleC5qcwoKICBjb25zdCBmb2N1c2FibGUgPSAiXG4gIGFbaHJlZl0sXG4gIGFyZWFbaHJlZl0sXG4gIGlucHV0Om5vdChbZGlzYWJsZWRdKSxcbiAgc2VsZWN0Om5vdChbZGlzYWJsZWRdKSxcbiAgdGV4dGFyZWE6bm90KFtkaXNhYmxlZF0pLFxuICBidXR0b246bm90KFtkaXNhYmxlZF0pLFxuICBpZnJhbWUsXG4gIG9iamVjdCxcbiAgZW1iZWQsXG4gIFt0YWJpbmRleD1cIjBcIl0sXG4gIFtjb250ZW50ZWRpdGFibGVdLFxuICBhdWRpb1tjb250cm9sc10sXG4gIHZpZGVvW2NvbnRyb2xzXSxcbiAgc3VtbWFyeVxuIjsKICBjb25zdCBnZXRGb2N1c2FibGVFbGVtZW50cyA9ICgpID0+IHsKICAgIGNvbnN0IGZvY3VzYWJsZUVsZW1lbnRzV2l0aFRhYmluZGV4ID0gdG9BcnJheShnZXRQb3B1cCgpLnF1ZXJ5U2VsZWN0b3JBbGwoJ1t0YWJpbmRleF06bm90KFt0YWJpbmRleD0iLTEiXSk6bm90KFt0YWJpbmRleD0iMCJdKScpKSAvLyBzb3J0IGFjY29yZGluZyB0byB0YWJpbmRleAogICAgLnNvcnQoKGEsIGIpID0+IHsKICAgICAgYSA9IHBhcnNlSW50KGEuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpKTsKICAgICAgYiA9IHBhcnNlSW50KGIuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpKTsKCiAgICAgIGlmIChhID4gYikgewogICAgICAgIHJldHVybiAxOwogICAgICB9IGVsc2UgaWYgKGEgPCBiKSB7CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9CgogICAgICByZXR1cm4gMDsKICAgIH0pOwogICAgY29uc3Qgb3RoZXJGb2N1c2FibGVFbGVtZW50cyA9IHRvQXJyYXkoZ2V0UG9wdXAoKS5xdWVyeVNlbGVjdG9yQWxsKGZvY3VzYWJsZSkpLmZpbHRlcihlbCA9PiBlbC5nZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JykgIT09ICctMScpOwogICAgcmV0dXJuIHVuaXF1ZUFycmF5KGZvY3VzYWJsZUVsZW1lbnRzV2l0aFRhYmluZGV4LmNvbmNhdChvdGhlckZvY3VzYWJsZUVsZW1lbnRzKSkuZmlsdGVyKGVsID0+IGlzVmlzaWJsZShlbCkpOwogIH07CiAgY29uc3QgaXNNb2RhbCA9ICgpID0+IHsKICAgIHJldHVybiAhaGFzQ2xhc3MoZG9jdW1lbnQuYm9keSwgc3dhbENsYXNzZXNbJ3RvYXN0LXNob3duJ10pICYmICFoYXNDbGFzcyhkb2N1bWVudC5ib2R5LCBzd2FsQ2xhc3Nlc1snbm8tYmFja2Ryb3AnXSk7CiAgfTsKICBjb25zdCBpc1RvYXN0ID0gKCkgPT4gewogICAgcmV0dXJuIGdldFBvcHVwKCkgJiYgaGFzQ2xhc3MoZ2V0UG9wdXAoKSwgc3dhbENsYXNzZXMudG9hc3QpOwogIH07CiAgY29uc3QgaXNMb2FkaW5nID0gKCkgPT4gewogICAgcmV0dXJuIGdldFBvcHVwKCkuaGFzQXR0cmlidXRlKCdkYXRhLWxvYWRpbmcnKTsKICB9OwoKICBjb25zdCBzdGF0ZXMgPSB7CiAgICBwcmV2aW91c0JvZHlQYWRkaW5nOiBudWxsCiAgfTsKICBjb25zdCBzZXRJbm5lckh0bWwgPSAoZWxlbSwgaHRtbCkgPT4gewogICAgLy8gIzE5MjYKICAgIGVsZW0udGV4dENvbnRlbnQgPSAnJzsKCiAgICBpZiAoaHRtbCkgewogICAgICBjb25zdCBwYXJzZXIgPSBuZXcgRE9NUGFyc2VyKCk7CiAgICAgIGNvbnN0IHBhcnNlZCA9IHBhcnNlci5wYXJzZUZyb21TdHJpbmcoaHRtbCwgInRleHQvaHRtbCIpOwogICAgICB0b0FycmF5KHBhcnNlZC5xdWVyeVNlbGVjdG9yKCdoZWFkJykuY2hpbGROb2RlcykuZm9yRWFjaChjaGlsZCA9PiB7CiAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChjaGlsZCk7CiAgICAgIH0pOwogICAgICB0b0FycmF5KHBhcnNlZC5xdWVyeVNlbGVjdG9yKCdib2R5JykuY2hpbGROb2RlcykuZm9yRWFjaChjaGlsZCA9PiB7CiAgICAgICAgZWxlbS5hcHBlbmRDaGlsZChjaGlsZCk7CiAgICAgIH0pOwogICAgfQogIH07CiAgY29uc3QgaGFzQ2xhc3MgPSAoZWxlbSwgY2xhc3NOYW1lKSA9PiB7CiAgICBpZiAoIWNsYXNzTmFtZSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgY29uc3QgY2xhc3NMaXN0ID0gY2xhc3NOYW1lLnNwbGl0KC9ccysvKTsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNsYXNzTGlzdC5sZW5ndGg7IGkrKykgewogICAgICBpZiAoIWVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTGlzdFtpXSkpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gdHJ1ZTsKICB9OwoKICBjb25zdCByZW1vdmVDdXN0b21DbGFzc2VzID0gKGVsZW0sIHBhcmFtcykgPT4gewogICAgdG9BcnJheShlbGVtLmNsYXNzTGlzdCkuZm9yRWFjaChjbGFzc05hbWUgPT4gewogICAgICBpZiAoIU9iamVjdC52YWx1ZXMoc3dhbENsYXNzZXMpLmluY2x1ZGVzKGNsYXNzTmFtZSkgJiYgIU9iamVjdC52YWx1ZXMoaWNvblR5cGVzKS5pbmNsdWRlcyhjbGFzc05hbWUpICYmICFPYmplY3QudmFsdWVzKHBhcmFtcy5zaG93Q2xhc3MpLmluY2x1ZGVzKGNsYXNzTmFtZSkpIHsKICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgY29uc3QgYXBwbHlDdXN0b21DbGFzcyA9IChlbGVtLCBwYXJhbXMsIGNsYXNzTmFtZSkgPT4gewogICAgcmVtb3ZlQ3VzdG9tQ2xhc3NlcyhlbGVtLCBwYXJhbXMpOwoKICAgIGlmIChwYXJhbXMuY3VzdG9tQ2xhc3MgJiYgcGFyYW1zLmN1c3RvbUNsYXNzW2NsYXNzTmFtZV0pIHsKICAgICAgaWYgKHR5cGVvZiBwYXJhbXMuY3VzdG9tQ2xhc3NbY2xhc3NOYW1lXSAhPT0gJ3N0cmluZycgJiYgIXBhcmFtcy5jdXN0b21DbGFzc1tjbGFzc05hbWVdLmZvckVhY2gpIHsKICAgICAgICByZXR1cm4gd2FybigiSW52YWxpZCB0eXBlIG9mIGN1c3RvbUNsYXNzLiIuY29uY2F0KGNsYXNzTmFtZSwgIiEgRXhwZWN0ZWQgc3RyaW5nIG9yIGl0ZXJhYmxlIG9iamVjdCwgZ290IFwiIikuY29uY2F0KHR5cGVvZiBwYXJhbXMuY3VzdG9tQ2xhc3NbY2xhc3NOYW1lXSwgIlwiIikpOwogICAgICB9CgogICAgICBhZGRDbGFzcyhlbGVtLCBwYXJhbXMuY3VzdG9tQ2xhc3NbY2xhc3NOYW1lXSk7CiAgICB9CiAgfTsKICBjb25zdCBnZXRJbnB1dCA9IChwb3B1cCwgaW5wdXRUeXBlKSA9PiB7CiAgICBpZiAoIWlucHV0VHlwZSkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBzd2l0Y2ggKGlucHV0VHlwZSkgewogICAgICBjYXNlICdzZWxlY3QnOgogICAgICBjYXNlICd0ZXh0YXJlYSc6CiAgICAgIGNhc2UgJ2ZpbGUnOgogICAgICAgIHJldHVybiBnZXRDaGlsZEJ5Q2xhc3MocG9wdXAsIHN3YWxDbGFzc2VzW2lucHV0VHlwZV0pOwoKICAgICAgY2FzZSAnY2hlY2tib3gnOgogICAgICAgIHJldHVybiBwb3B1cC5xdWVyeVNlbGVjdG9yKCIuIi5jb25jYXQoc3dhbENsYXNzZXMuY2hlY2tib3gsICIgaW5wdXQiKSk7CgogICAgICBjYXNlICdyYWRpbyc6CiAgICAgICAgcmV0dXJuIHBvcHVwLnF1ZXJ5U2VsZWN0b3IoIi4iLmNvbmNhdChzd2FsQ2xhc3Nlcy5yYWRpbywgIiBpbnB1dDpjaGVja2VkIikpIHx8IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoIi4iLmNvbmNhdChzd2FsQ2xhc3Nlcy5yYWRpbywgIiBpbnB1dDpmaXJzdC1jaGlsZCIpKTsKCiAgICAgIGNhc2UgJ3JhbmdlJzoKICAgICAgICByZXR1cm4gcG9wdXAucXVlcnlTZWxlY3RvcigiLiIuY29uY2F0KHN3YWxDbGFzc2VzLnJhbmdlLCAiIGlucHV0IikpOwoKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gZ2V0Q2hpbGRCeUNsYXNzKHBvcHVwLCBzd2FsQ2xhc3Nlcy5pbnB1dCk7CiAgICB9CiAgfTsKICBjb25zdCBmb2N1c0lucHV0ID0gaW5wdXQgPT4gewogICAgaW5wdXQuZm9jdXMoKTsgLy8gcGxhY2UgY3Vyc29yIGF0IGVuZCBvZiB0ZXh0IGluIHRleHQgaW5wdXQKCiAgICBpZiAoaW5wdXQudHlwZSAhPT0gJ2ZpbGUnKSB7CiAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIzNDU5MTUKICAgICAgY29uc3QgdmFsID0gaW5wdXQudmFsdWU7CiAgICAgIGlucHV0LnZhbHVlID0gJyc7CiAgICAgIGlucHV0LnZhbHVlID0gdmFsOwogICAgfQogIH07CiAgY29uc3QgdG9nZ2xlQ2xhc3MgPSAodGFyZ2V0LCBjbGFzc0xpc3QsIGNvbmRpdGlvbikgPT4gewogICAgaWYgKCF0YXJnZXQgfHwgIWNsYXNzTGlzdCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKHR5cGVvZiBjbGFzc0xpc3QgPT09ICdzdHJpbmcnKSB7CiAgICAgIGNsYXNzTGlzdCA9IGNsYXNzTGlzdC5zcGxpdCgvXHMrLykuZmlsdGVyKEJvb2xlYW4pOwogICAgfQoKICAgIGNsYXNzTGlzdC5mb3JFYWNoKGNsYXNzTmFtZSA9PiB7CiAgICAgIGlmICh0YXJnZXQuZm9yRWFjaCkgewogICAgICAgIHRhcmdldC5mb3JFYWNoKGVsZW0gPT4gewogICAgICAgICAgY29uZGl0aW9uID8gZWxlbS5jbGFzc0xpc3QuYWRkKGNsYXNzTmFtZSkgOiBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25kaXRpb24gPyB0YXJnZXQuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpIDogdGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTsKICAgICAgfQogICAgfSk7CiAgfTsKICBjb25zdCBhZGRDbGFzcyA9ICh0YXJnZXQsIGNsYXNzTGlzdCkgPT4gewogICAgdG9nZ2xlQ2xhc3ModGFyZ2V0LCBjbGFzc0xpc3QsIHRydWUpOwogIH07CiAgY29uc3QgcmVtb3ZlQ2xhc3MgPSAodGFyZ2V0LCBjbGFzc0xpc3QpID0+IHsKICAgIHRvZ2dsZUNsYXNzKHRhcmdldCwgY2xhc3NMaXN0LCBmYWxzZSk7CiAgfTsKICBjb25zdCBnZXRDaGlsZEJ5Q2xhc3MgPSAoZWxlbSwgY2xhc3NOYW1lKSA9PiB7CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGVsZW0uY2hpbGROb2Rlcy5sZW5ndGg7IGkrKykgewogICAgICBpZiAoaGFzQ2xhc3MoZWxlbS5jaGlsZE5vZGVzW2ldLCBjbGFzc05hbWUpKSB7CiAgICAgICAgcmV0dXJuIGVsZW0uY2hpbGROb2Rlc1tpXTsKICAgICAgfQogICAgfQogIH07CiAgY29uc3QgYXBwbHlOdW1lcmljYWxTdHlsZSA9IChlbGVtLCBwcm9wZXJ0eSwgdmFsdWUpID0+IHsKICAgIGlmICh2YWx1ZSA9PT0gIiIuY29uY2F0KHBhcnNlSW50KHZhbHVlKSkpIHsKICAgICAgdmFsdWUgPSBwYXJzZUludCh2YWx1ZSk7CiAgICB9CgogICAgaWYgKHZhbHVlIHx8IHBhcnNlSW50KHZhbHVlKSA9PT0gMCkgewogICAgICBlbGVtLnN0eWxlW3Byb3BlcnR5XSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgPyAiIi5jb25jYXQodmFsdWUsICJweCIpIDogdmFsdWU7CiAgICB9IGVsc2UgewogICAgICBlbGVtLnN0eWxlLnJlbW92ZVByb3BlcnR5KHByb3BlcnR5KTsKICAgIH0KICB9OwogIGNvbnN0IHNob3cgPSBmdW5jdGlvbiAoZWxlbSkgewogICAgbGV0IGRpc3BsYXkgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdmbGV4JzsKICAgIGVsZW0uc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7CiAgfTsKICBjb25zdCBoaWRlID0gZWxlbSA9PiB7CiAgICBlbGVtLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7CiAgfTsKICBjb25zdCBzZXRTdHlsZSA9IChwYXJlbnQsIHNlbGVjdG9yLCBwcm9wZXJ0eSwgdmFsdWUpID0+IHsKICAgIGNvbnN0IGVsID0gcGFyZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpOwoKICAgIGlmIChlbCkgewogICAgICBlbC5zdHlsZVtwcm9wZXJ0eV0gPSB2YWx1ZTsKICAgIH0KICB9OwogIGNvbnN0IHRvZ2dsZSA9IChlbGVtLCBjb25kaXRpb24sIGRpc3BsYXkpID0+IHsKICAgIGNvbmRpdGlvbiA/IHNob3coZWxlbSwgZGlzcGxheSkgOiBoaWRlKGVsZW0pOwogIH07IC8vIGJvcnJvd2VkIGZyb20ganF1ZXJ5ICQoZWxlbSkuaXMoJzp2aXNpYmxlJykgaW1wbGVtZW50YXRpb24KCiAgY29uc3QgaXNWaXNpYmxlID0gZWxlbSA9PiAhIShlbGVtICYmIChlbGVtLm9mZnNldFdpZHRoIHx8IGVsZW0ub2Zmc2V0SGVpZ2h0IHx8IGVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpKTsKICBjb25zdCBhbGxCdXR0b25zQXJlSGlkZGVuID0gKCkgPT4gIWlzVmlzaWJsZShnZXRDb25maXJtQnV0dG9uKCkpICYmICFpc1Zpc2libGUoZ2V0RGVueUJ1dHRvbigpKSAmJiAhaXNWaXNpYmxlKGdldENhbmNlbEJ1dHRvbigpKTsKICBjb25zdCBpc1Njcm9sbGFibGUgPSBlbGVtID0+ICEhKGVsZW0uc2Nyb2xsSGVpZ2h0ID4gZWxlbS5jbGllbnRIZWlnaHQpOyAvLyBib3Jyb3dlZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80NjM1MjExOQoKICBjb25zdCBoYXNDc3NBbmltYXRpb24gPSBlbGVtID0+IHsKICAgIGNvbnN0IHN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZWxlbSk7CiAgICBjb25zdCBhbmltRHVyYXRpb24gPSBwYXJzZUZsb2F0KHN0eWxlLmdldFByb3BlcnR5VmFsdWUoJ2FuaW1hdGlvbi1kdXJhdGlvbicpIHx8ICcwJyk7CiAgICBjb25zdCB0cmFuc0R1cmF0aW9uID0gcGFyc2VGbG9hdChzdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCd0cmFuc2l0aW9uLWR1cmF0aW9uJykgfHwgJzAnKTsKICAgIHJldHVybiBhbmltRHVyYXRpb24gPiAwIHx8IHRyYW5zRHVyYXRpb24gPiAwOwogIH07CiAgY29uc3QgYW5pbWF0ZVRpbWVyUHJvZ3Jlc3NCYXIgPSBmdW5jdGlvbiAodGltZXIpIHsKICAgIGxldCByZXNldCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICBjb25zdCB0aW1lclByb2dyZXNzQmFyID0gZ2V0VGltZXJQcm9ncmVzc0JhcigpOwoKICAgIGlmIChpc1Zpc2libGUodGltZXJQcm9ncmVzc0JhcikpIHsKICAgICAgaWYgKHJlc2V0KSB7CiAgICAgICAgdGltZXJQcm9ncmVzc0Jhci5zdHlsZS50cmFuc2l0aW9uID0gJ25vbmUnOwogICAgICAgIHRpbWVyUHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSAnMTAwJSc7CiAgICAgIH0KCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRpbWVyUHJvZ3Jlc3NCYXIuc3R5bGUudHJhbnNpdGlvbiA9ICJ3aWR0aCAiLmNvbmNhdCh0aW1lciAvIDEwMDAsICJzIGxpbmVhciIpOwogICAgICAgIHRpbWVyUHJvZ3Jlc3NCYXIuc3R5bGUud2lkdGggPSAnMCUnOwogICAgICB9LCAxMCk7CiAgICB9CiAgfTsKICBjb25zdCBzdG9wVGltZXJQcm9ncmVzc0JhciA9ICgpID0+IHsKICAgIGNvbnN0IHRpbWVyUHJvZ3Jlc3NCYXIgPSBnZXRUaW1lclByb2dyZXNzQmFyKCk7CiAgICBjb25zdCB0aW1lclByb2dyZXNzQmFyV2lkdGggPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aW1lclByb2dyZXNzQmFyKS53aWR0aCk7CiAgICB0aW1lclByb2dyZXNzQmFyLnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uJyk7CiAgICB0aW1lclByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gJzEwMCUnOwogICAgY29uc3QgdGltZXJQcm9ncmVzc0JhckZ1bGxXaWR0aCA9IHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRpbWVyUHJvZ3Jlc3NCYXIpLndpZHRoKTsKICAgIGNvbnN0IHRpbWVyUHJvZ3Jlc3NCYXJQZXJjZW50ID0gcGFyc2VJbnQodGltZXJQcm9ncmVzc0JhcldpZHRoIC8gdGltZXJQcm9ncmVzc0JhckZ1bGxXaWR0aCAqIDEwMCk7CiAgICB0aW1lclByb2dyZXNzQmFyLnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uJyk7CiAgICB0aW1lclByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gIiIuY29uY2F0KHRpbWVyUHJvZ3Jlc3NCYXJQZXJjZW50LCAiJSIpOwogIH07CgogIC8vIERldGVjdCBOb2RlIGVudgogIGNvbnN0IGlzTm9kZUVudiA9ICgpID0+IHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCc7CgogIGNvbnN0IHN3ZWV0SFRNTCA9ICJcbiA8ZGl2IGFyaWEtbGFiZWxsZWRieT1cIiIuY29uY2F0KHN3YWxDbGFzc2VzLnRpdGxlLCAiXCIgYXJpYS1kZXNjcmliZWRieT1cIiIpLmNvbmNhdChzd2FsQ2xhc3Nlc1snaHRtbC1jb250YWluZXInXSwgIlwiIGNsYXNzPVwiIikuY29uY2F0KHN3YWxDbGFzc2VzLnBvcHVwLCAiXCIgdGFiaW5kZXg9XCItMVwiPlxuICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCIiKS5jb25jYXQoc3dhbENsYXNzZXMuY2xvc2UsICJcIj48L2J1dHRvbj5cbiAgIDx1bCBjbGFzcz1cIiIpLmNvbmNhdChzd2FsQ2xhc3Nlc1sncHJvZ3Jlc3Mtc3RlcHMnXSwgIlwiPjwvdWw+XG4gICA8ZGl2IGNsYXNzPVwiIikuY29uY2F0KHN3YWxDbGFzc2VzLmljb24sICJcIj48L2Rpdj5cbiAgIDxpbWcgY2xhc3M9XCIiKS5jb25jYXQoc3dhbENsYXNzZXMuaW1hZ2UsICJcIiAvPlxuICAgPGgyIGNsYXNzPVwiIikuY29uY2F0KHN3YWxDbGFzc2VzLnRpdGxlLCAiXCIgaWQ9XCIiKS5jb25jYXQoc3dhbENsYXNzZXMudGl0bGUsICJcIj48L2gyPlxuICAgPGRpdiBjbGFzcz1cIiIpLmNvbmNhdChzd2FsQ2xhc3Nlc1snaHRtbC1jb250YWluZXInXSwgIlwiIGlkPVwiIikuY29uY2F0KHN3YWxDbGFzc2VzWydodG1sLWNvbnRhaW5lciddLCAiXCI+PC9kaXY+XG4gICA8aW5wdXQgY2xhc3M9XCIiKS5jb25jYXQoc3dhbENsYXNzZXMuaW5wdXQsICJcIiAvPlxuICAgPGlucHV0IHR5cGU9XCJmaWxlXCIgY2xhc3M9XCIiKS5jb25jYXQoc3dhbENsYXNzZXMuZmlsZSwgIlwiIC8+XG4gICA8ZGl2IGNsYXNzPVwiIikuY29uY2F0KHN3YWxDbGFzc2VzLnJhbmdlLCAiXCI+XG4gICAgIDxpbnB1dCB0eXBlPVwicmFuZ2VcIiAvPlxuICAgICA8b3V0cHV0Pjwvb3V0cHV0PlxuICAgPC9kaXY+XG4gICA8c2VsZWN0IGNsYXNzPVwiIikuY29uY2F0KHN3YWxDbGFzc2VzLnNlbGVjdCwgIlwiPjwvc2VsZWN0PlxuICAgPGRpdiBjbGFzcz1cIiIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5yYWRpbywgIlwiPjwvZGl2PlxuICAgPGxhYmVsIGZvcj1cIiIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5jaGVja2JveCwgIlwiIGNsYXNzPVwiIikuY29uY2F0KHN3YWxDbGFzc2VzLmNoZWNrYm94LCAiXCI+XG4gICAgIDxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiAvPlxuICAgICA8c3BhbiBjbGFzcz1cIiIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5sYWJlbCwgIlwiPjwvc3Bhbj5cbiAgIDwvbGFiZWw+XG4gICA8dGV4dGFyZWEgY2xhc3M9XCIiKS5jb25jYXQoc3dhbENsYXNzZXMudGV4dGFyZWEsICJcIj48L3RleHRhcmVhPlxuICAgPGRpdiBjbGFzcz1cIiIpLmNvbmNhdChzd2FsQ2xhc3Nlc1sndmFsaWRhdGlvbi1tZXNzYWdlJ10sICJcIiBpZD1cIiIpLmNvbmNhdChzd2FsQ2xhc3Nlc1sndmFsaWRhdGlvbi1tZXNzYWdlJ10sICJcIj48L2Rpdj5cbiAgIDxkaXYgY2xhc3M9XCIiKS5jb25jYXQoc3dhbENsYXNzZXMuYWN0aW9ucywgIlwiPlxuICAgICA8ZGl2IGNsYXNzPVwiIikuY29uY2F0KHN3YWxDbGFzc2VzLmxvYWRlciwgIlwiPjwvZGl2PlxuICAgICA8YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cIiIpLmNvbmNhdChzd2FsQ2xhc3Nlcy5jb25maXJtLCAiXCI+PC9idXR0b24+XG4gICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiIikuY29uY2F0KHN3YWxDbGFzc2VzLmRlbnksICJcIj48L2J1dHRvbj5cbiAgICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCIiKS5jb25jYXQoc3dhbENsYXNzZXMuY2FuY2VsLCAiXCI+PC9idXR0b24+XG4gICA8L2Rpdj5cbiAgIDxkaXYgY2xhc3M9XCIiKS5jb25jYXQoc3dhbENsYXNzZXMuZm9vdGVyLCAiXCI+PC9kaXY+XG4gICA8ZGl2IGNsYXNzPVwiIikuY29uY2F0KHN3YWxDbGFzc2VzWyd0aW1lci1wcm9ncmVzcy1iYXItY29udGFpbmVyJ10sICJcIj5cbiAgICAgPGRpdiBjbGFzcz1cIiIpLmNvbmNhdChzd2FsQ2xhc3Nlc1sndGltZXItcHJvZ3Jlc3MtYmFyJ10sICJcIj48L2Rpdj5cbiAgIDwvZGl2PlxuIDwvZGl2PlxuIikucmVwbGFjZSgvKF58XG4pXHMqL2csICcnKTsKCiAgY29uc3QgcmVzZXRPbGRDb250YWluZXIgPSAoKSA9PiB7CiAgICBjb25zdCBvbGRDb250YWluZXIgPSBnZXRDb250YWluZXIoKTsKCiAgICBpZiAoIW9sZENvbnRhaW5lcikgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgb2xkQ29udGFpbmVyLnJlbW92ZSgpOwogICAgcmVtb3ZlQ2xhc3MoW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgZG9jdW1lbnQuYm9keV0sIFtzd2FsQ2xhc3Nlc1snbm8tYmFja2Ryb3AnXSwgc3dhbENsYXNzZXNbJ3RvYXN0LXNob3duJ10sIHN3YWxDbGFzc2VzWydoYXMtY29sdW1uJ11dKTsKICAgIHJldHVybiB0cnVlOwogIH07CgogIGNvbnN0IHJlc2V0VmFsaWRhdGlvbk1lc3NhZ2UgPSAoKSA9PiB7CiAgICBpZiAoU3dhbC5pc1Zpc2libGUoKSkgewogICAgICBTd2FsLnJlc2V0VmFsaWRhdGlvbk1lc3NhZ2UoKTsKICAgIH0KICB9OwoKICBjb25zdCBhZGRJbnB1dENoYW5nZUxpc3RlbmVycyA9ICgpID0+IHsKICAgIGNvbnN0IHBvcHVwID0gZ2V0UG9wdXAoKTsKICAgIGNvbnN0IGlucHV0ID0gZ2V0Q2hpbGRCeUNsYXNzKHBvcHVwLCBzd2FsQ2xhc3Nlcy5pbnB1dCk7CiAgICBjb25zdCBmaWxlID0gZ2V0Q2hpbGRCeUNsYXNzKHBvcHVwLCBzd2FsQ2xhc3Nlcy5maWxlKTsKICAgIGNvbnN0IHJhbmdlID0gcG9wdXAucXVlcnlTZWxlY3RvcigiLiIuY29uY2F0KHN3YWxDbGFzc2VzLnJhbmdlLCAiIGlucHV0IikpOwogICAgY29uc3QgcmFuZ2VPdXRwdXQgPSBwb3B1cC5xdWVyeVNlbGVjdG9yKCIuIi5jb25jYXQoc3dhbENsYXNzZXMucmFuZ2UsICIgb3V0cHV0IikpOwogICAgY29uc3Qgc2VsZWN0ID0gZ2V0Q2hpbGRCeUNsYXNzKHBvcHVwLCBzd2FsQ2xhc3Nlcy5zZWxlY3QpOwogICAgY29uc3QgY2hlY2tib3ggPSBwb3B1cC5xdWVyeVNlbGVjdG9yKCIuIi5jb25jYXQoc3dhbENsYXNzZXMuY2hlY2tib3gsICIgaW5wdXQiKSk7CiAgICBjb25zdCB0ZXh0YXJlYSA9IGdldENoaWxkQnlDbGFzcyhwb3B1cCwgc3dhbENsYXNzZXMudGV4dGFyZWEpOwogICAgaW5wdXQub25pbnB1dCA9IHJlc2V0VmFsaWRhdGlvbk1lc3NhZ2U7CiAgICBmaWxlLm9uY2hhbmdlID0gcmVzZXRWYWxpZGF0aW9uTWVzc2FnZTsKICAgIHNlbGVjdC5vbmNoYW5nZSA9IHJlc2V0VmFsaWRhdGlvbk1lc3NhZ2U7CiAgICBjaGVja2JveC5vbmNoYW5nZSA9IHJlc2V0VmFsaWRhdGlvbk1lc3NhZ2U7CiAgICB0ZXh0YXJlYS5vbmlucHV0ID0gcmVzZXRWYWxpZGF0aW9uTWVzc2FnZTsKCiAgICByYW5nZS5vbmlucHV0ID0gKCkgPT4gewogICAgICByZXNldFZhbGlkYXRpb25NZXNzYWdlKCk7CiAgICAgIHJhbmdlT3V0cHV0LnZhbHVlID0gcmFuZ2UudmFsdWU7CiAgICB9OwoKICAgIHJhbmdlLm9uY2hhbmdlID0gKCkgPT4gewogICAgICByZXNldFZhbGlkYXRpb25NZXNzYWdlKCk7CiAgICAgIHJhbmdlLm5leHRTaWJsaW5nLnZhbHVlID0gcmFuZ2UudmFsdWU7CiAgICB9OwogIH07CgogIGNvbnN0IGdldFRhcmdldCA9IHRhcmdldCA9PiB0eXBlb2YgdGFyZ2V0ID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KSA6IHRhcmdldDsKCiAgY29uc3Qgc2V0dXBBY2Nlc3NpYmlsaXR5ID0gcGFyYW1zID0+IHsKICAgIGNvbnN0IHBvcHVwID0gZ2V0UG9wdXAoKTsKICAgIHBvcHVwLnNldEF0dHJpYnV0ZSgncm9sZScsIHBhcmFtcy50b2FzdCA/ICdhbGVydCcgOiAnZGlhbG9nJyk7CiAgICBwb3B1cC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGl2ZScsIHBhcmFtcy50b2FzdCA/ICdwb2xpdGUnIDogJ2Fzc2VydGl2ZScpOwoKICAgIGlmICghcGFyYW1zLnRvYXN0KSB7CiAgICAgIHBvcHVwLnNldEF0dHJpYnV0ZSgnYXJpYS1tb2RhbCcsICd0cnVlJyk7CiAgICB9CiAgfTsKCiAgY29uc3Qgc2V0dXBSVEwgPSB0YXJnZXRFbGVtZW50ID0+IHsKICAgIGlmICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXRFbGVtZW50KS5kaXJlY3Rpb24gPT09ICdydGwnKSB7CiAgICAgIGFkZENsYXNzKGdldENvbnRhaW5lcigpLCBzd2FsQ2xhc3Nlcy5ydGwpOwogICAgfQogIH07CiAgLyoKICAgKiBBZGQgbW9kYWwgKyBiYWNrZHJvcCB0byBET00KICAgKi8KCgogIGNvbnN0IGluaXQgPSBwYXJhbXMgPT4gewogICAgLy8gQ2xlYW4gdXAgdGhlIG9sZCBwb3B1cCBjb250YWluZXIgaWYgaXQgZXhpc3RzCiAgICBjb25zdCBvbGRDb250YWluZXJFeGlzdGVkID0gcmVzZXRPbGRDb250YWluZXIoKTsKICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqLwoKICAgIGlmIChpc05vZGVFbnYoKSkgewogICAgICBlcnJvcignU3dlZXRBbGVydDIgcmVxdWlyZXMgZG9jdW1lbnQgdG8gaW5pdGlhbGl6ZScpOwogICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBjb250YWluZXIuY2xhc3NOYW1lID0gc3dhbENsYXNzZXMuY29udGFpbmVyOwoKICAgIGlmIChvbGRDb250YWluZXJFeGlzdGVkKSB7CiAgICAgIGFkZENsYXNzKGNvbnRhaW5lciwgc3dhbENsYXNzZXNbJ25vLXRyYW5zaXRpb24nXSk7CiAgICB9CgogICAgc2V0SW5uZXJIdG1sKGNvbnRhaW5lciwgc3dlZXRIVE1MKTsKICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBnZXRUYXJnZXQocGFyYW1zLnRhcmdldCk7CiAgICB0YXJnZXRFbGVtZW50LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7CiAgICBzZXR1cEFjY2Vzc2liaWxpdHkocGFyYW1zKTsKICAgIHNldHVwUlRMKHRhcmdldEVsZW1lbnQpOwogICAgYWRkSW5wdXRDaGFuZ2VMaXN0ZW5lcnMoKTsKICB9OwoKICBjb25zdCBwYXJzZUh0bWxUb0NvbnRhaW5lciA9IChwYXJhbSwgdGFyZ2V0KSA9PiB7CiAgICAvLyBET00gZWxlbWVudAogICAgaWYgKHBhcmFtIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHsKICAgICAgdGFyZ2V0LmFwcGVuZENoaWxkKHBhcmFtKTsgLy8gT2JqZWN0CiAgICB9IGVsc2UgaWYgKHR5cGVvZiBwYXJhbSA9PT0gJ29iamVjdCcpIHsKICAgICAgaGFuZGxlT2JqZWN0KHBhcmFtLCB0YXJnZXQpOyAvLyBQbGFpbiBzdHJpbmcKICAgIH0gZWxzZSBpZiAocGFyYW0pIHsKICAgICAgc2V0SW5uZXJIdG1sKHRhcmdldCwgcGFyYW0pOwogICAgfQogIH07CgogIGNvbnN0IGhhbmRsZU9iamVjdCA9IChwYXJhbSwgdGFyZ2V0KSA9PiB7CiAgICAvLyBKUXVlcnkgZWxlbWVudChzKQogICAgaWYgKHBhcmFtLmpxdWVyeSkgewogICAgICBoYW5kbGVKcXVlcnlFbGVtKHRhcmdldCwgcGFyYW0pOyAvLyBGb3Igb3RoZXIgb2JqZWN0cyB1c2UgdGhlaXIgc3RyaW5nIHJlcHJlc2VudGF0aW9uCiAgICB9IGVsc2UgewogICAgICBzZXRJbm5lckh0bWwodGFyZ2V0LCBwYXJhbS50b1N0cmluZygpKTsKICAgIH0KICB9OwoKICBjb25zdCBoYW5kbGVKcXVlcnlFbGVtID0gKHRhcmdldCwgZWxlbSkgPT4gewogICAgdGFyZ2V0LnRleHRDb250ZW50ID0gJyc7CgogICAgaWYgKDAgaW4gZWxlbSkgewogICAgICBmb3IgKGxldCBpID0gMDsgKGkgaW4gZWxlbSk7IGkrKykgewogICAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbGVtW2ldLmNsb25lTm9kZSh0cnVlKSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbGVtLmNsb25lTm9kZSh0cnVlKSk7CiAgICB9CiAgfTsKCiAgY29uc3QgYW5pbWF0aW9uRW5kRXZlbnQgPSAoKCkgPT4gewogICAgLy8gUHJldmVudCBydW4gaW4gTm9kZSBlbnYKCiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi8KICAgIGlmIChpc05vZGVFbnYoKSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgY29uc3QgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICBjb25zdCB0cmFuc0VuZEV2ZW50TmFtZXMgPSB7CiAgICAgIFdlYmtpdEFuaW1hdGlvbjogJ3dlYmtpdEFuaW1hdGlvbkVuZCcsCiAgICAgIE9BbmltYXRpb246ICdvQW5pbWF0aW9uRW5kIG9hbmltYXRpb25lbmQnLAogICAgICBhbmltYXRpb246ICdhbmltYXRpb25lbmQnCiAgICB9OwoKICAgIGZvciAoY29uc3QgaSBpbiB0cmFuc0VuZEV2ZW50TmFtZXMpIHsKICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0cmFuc0VuZEV2ZW50TmFtZXMsIGkpICYmIHR5cGVvZiB0ZXN0RWwuc3R5bGVbaV0gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgcmV0dXJuIHRyYW5zRW5kRXZlbnROYW1lc1tpXTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9KSgpOwoKICAvLyBodHRwczovL2dpdGh1Yi5jb20vdHdicy9ib290c3RyYXAvYmxvYi9tYXN0ZXIvanMvc3JjL21vZGFsLmpzCgogIGNvbnN0IG1lYXN1cmVTY3JvbGxiYXIgPSAoKSA9PiB7CiAgICBjb25zdCBzY3JvbGxEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgIHNjcm9sbERpdi5jbGFzc05hbWUgPSBzd2FsQ2xhc3Nlc1snc2Nyb2xsYmFyLW1lYXN1cmUnXTsKICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2Nyb2xsRGl2KTsKICAgIGNvbnN0IHNjcm9sbGJhcldpZHRoID0gc2Nyb2xsRGl2LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoIC0gc2Nyb2xsRGl2LmNsaWVudFdpZHRoOwogICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzY3JvbGxEaXYpOwogICAgcmV0dXJuIHNjcm9sbGJhcldpZHRoOwogIH07CgogIGNvbnN0IHJlbmRlckFjdGlvbnMgPSAoaW5zdGFuY2UsIHBhcmFtcykgPT4gewogICAgY29uc3QgYWN0aW9ucyA9IGdldEFjdGlvbnMoKTsKICAgIGNvbnN0IGxvYWRlciA9IGdldExvYWRlcigpOyAvLyBBY3Rpb25zIChidXR0b25zKSB3cmFwcGVyCgogICAgaWYgKCFwYXJhbXMuc2hvd0NvbmZpcm1CdXR0b24gJiYgIXBhcmFtcy5zaG93RGVueUJ1dHRvbiAmJiAhcGFyYW1zLnNob3dDYW5jZWxCdXR0b24pIHsKICAgICAgaGlkZShhY3Rpb25zKTsKICAgIH0gZWxzZSB7CiAgICAgIHNob3coYWN0aW9ucyk7CiAgICB9IC8vIEN1c3RvbSBjbGFzcwoKCiAgICBhcHBseUN1c3RvbUNsYXNzKGFjdGlvbnMsIHBhcmFtcywgJ2FjdGlvbnMnKTsgLy8gUmVuZGVyIGFsbCB0aGUgYnV0dG9ucwoKICAgIHJlbmRlckJ1dHRvbnMoYWN0aW9ucywgbG9hZGVyLCBwYXJhbXMpOyAvLyBMb2FkZXIKCiAgICBzZXRJbm5lckh0bWwobG9hZGVyLCBwYXJhbXMubG9hZGVySHRtbCk7CiAgICBhcHBseUN1c3RvbUNsYXNzKGxvYWRlciwgcGFyYW1zLCAnbG9hZGVyJyk7CiAgfTsKCiAgZnVuY3Rpb24gcmVuZGVyQnV0dG9ucyhhY3Rpb25zLCBsb2FkZXIsIHBhcmFtcykgewogICAgY29uc3QgY29uZmlybUJ1dHRvbiA9IGdldENvbmZpcm1CdXR0b24oKTsKICAgIGNvbnN0IGRlbnlCdXR0b24gPSBnZXREZW55QnV0dG9uKCk7CiAgICBjb25zdCBjYW5jZWxCdXR0b24gPSBnZXRDYW5jZWxCdXR0b24oKTsgLy8gUmVuZGVyIGJ1dHRvbnMKCiAgICByZW5kZXJCdXR0b24oY29uZmlybUJ1dHRvbiwgJ2NvbmZpcm0nLCBwYXJhbXMpOwogICAgcmVuZGVyQnV0dG9uKGRlbnlCdXR0b24sICdkZW55JywgcGFyYW1zKTsKICAgIHJlbmRlckJ1dHRvbihjYW5jZWxCdXR0b24sICdjYW5jZWwnLCBwYXJhbXMpOwogICAgaGFuZGxlQnV0dG9uc1N0eWxpbmcoY29uZmlybUJ1dHRvbiwgZGVueUJ1dHRvbiwgY2FuY2VsQnV0dG9uLCBwYXJhbXMpOwoKICAgIGlmIChwYXJhbXMucmV2ZXJzZUJ1dHRvbnMpIHsKICAgICAgaWYgKHBhcmFtcy50b2FzdCkgewogICAgICAgIGFjdGlvbnMuaW5zZXJ0QmVmb3JlKGNhbmNlbEJ1dHRvbiwgY29uZmlybUJ1dHRvbik7CiAgICAgICAgYWN0aW9ucy5pbnNlcnRCZWZvcmUoZGVueUJ1dHRvbiwgY29uZmlybUJ1dHRvbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWN0aW9ucy5pbnNlcnRCZWZvcmUoY2FuY2VsQnV0dG9uLCBsb2FkZXIpOwogICAgICAgIGFjdGlvbnMuaW5zZXJ0QmVmb3JlKGRlbnlCdXR0b24sIGxvYWRlcik7CiAgICAgICAgYWN0aW9ucy5pbnNlcnRCZWZvcmUoY29uZmlybUJ1dHRvbiwgbG9hZGVyKTsKICAgICAgfQogICAgfQogIH0KCiAgZnVuY3Rpb24gaGFuZGxlQnV0dG9uc1N0eWxpbmcoY29uZmlybUJ1dHRvbiwgZGVueUJ1dHRvbiwgY2FuY2VsQnV0dG9uLCBwYXJhbXMpIHsKICAgIGlmICghcGFyYW1zLmJ1dHRvbnNTdHlsaW5nKSB7CiAgICAgIHJldHVybiByZW1vdmVDbGFzcyhbY29uZmlybUJ1dHRvbiwgZGVueUJ1dHRvbiwgY2FuY2VsQnV0dG9uXSwgc3dhbENsYXNzZXMuc3R5bGVkKTsKICAgIH0KCiAgICBhZGRDbGFzcyhbY29uZmlybUJ1dHRvbiwgZGVueUJ1dHRvbiwgY2FuY2VsQnV0dG9uXSwgc3dhbENsYXNzZXMuc3R5bGVkKTsgLy8gQnV0dG9ucyBiYWNrZ3JvdW5kIGNvbG9ycwoKICAgIGlmIChwYXJhbXMuY29uZmlybUJ1dHRvbkNvbG9yKSB7CiAgICAgIGNvbmZpcm1CdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcGFyYW1zLmNvbmZpcm1CdXR0b25Db2xvcjsKICAgICAgYWRkQ2xhc3MoY29uZmlybUJ1dHRvbiwgc3dhbENsYXNzZXNbJ2RlZmF1bHQtb3V0bGluZSddKTsKICAgIH0KCiAgICBpZiAocGFyYW1zLmRlbnlCdXR0b25Db2xvcikgewogICAgICBkZW55QnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHBhcmFtcy5kZW55QnV0dG9uQ29sb3I7CiAgICAgIGFkZENsYXNzKGRlbnlCdXR0b24sIHN3YWxDbGFzc2VzWydkZWZhdWx0LW91dGxpbmUnXSk7CiAgICB9CgogICAgaWYgKHBhcmFtcy5jYW5jZWxCdXR0b25Db2xvcikgewogICAgICBjYW5jZWxCdXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcGFyYW1zLmNhbmNlbEJ1dHRvbkNvbG9yOwogICAgICBhZGRDbGFzcyhjYW5jZWxCdXR0b24sIHN3YWxDbGFzc2VzWydkZWZhdWx0LW91dGxpbmUnXSk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiByZW5kZXJCdXR0b24oYnV0dG9uLCBidXR0b25UeXBlLCBwYXJhbXMpIHsKICAgIHRvZ2dsZShidXR0b24sIHBhcmFtc1sic2hvdyIuY29uY2F0KGNhcGl0YWxpemVGaXJzdExldHRlcihidXR0b25UeXBlKSwgIkJ1dHRvbiIpXSwgJ2lubGluZS1ibG9jaycpOwogICAgc2V0SW5uZXJIdG1sKGJ1dHRvbiwgcGFyYW1zWyIiLmNvbmNhdChidXR0b25UeXBlLCAiQnV0dG9uVGV4dCIpXSk7IC8vIFNldCBjYXB0aW9uIHRleHQKCiAgICBidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgcGFyYW1zWyIiLmNvbmNhdChidXR0b25UeXBlLCAiQnV0dG9uQXJpYUxhYmVsIildKTsgLy8gQVJJQSBsYWJlbAogICAgLy8gQWRkIGJ1dHRvbnMgY3VzdG9tIGNsYXNzZXMKCiAgICBidXR0b24uY2xhc3NOYW1lID0gc3dhbENsYXNzZXNbYnV0dG9uVHlwZV07CiAgICBhcHBseUN1c3RvbUNsYXNzKGJ1dHRvbiwgcGFyYW1zLCAiIi5jb25jYXQoYnV0dG9uVHlwZSwgIkJ1dHRvbiIpKTsKICAgIGFkZENsYXNzKGJ1dHRvbiwgcGFyYW1zWyIiLmNvbmNhdChidXR0b25UeXBlLCAiQnV0dG9uQ2xhc3MiKV0pOwogIH0KCiAgZnVuY3Rpb24gaGFuZGxlQmFja2Ryb3BQYXJhbShjb250YWluZXIsIGJhY2tkcm9wKSB7CiAgICBpZiAodHlwZW9mIGJhY2tkcm9wID09PSAnc3RyaW5nJykgewogICAgICBjb250YWluZXIuc3R5bGUuYmFja2dyb3VuZCA9IGJhY2tkcm9wOwogICAgfSBlbHNlIGlmICghYmFja2Ryb3ApIHsKICAgICAgYWRkQ2xhc3MoW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgZG9jdW1lbnQuYm9keV0sIHN3YWxDbGFzc2VzWyduby1iYWNrZHJvcCddKTsKICAgIH0KICB9CgogIGZ1bmN0aW9uIGhhbmRsZVBvc2l0aW9uUGFyYW0oY29udGFpbmVyLCBwb3NpdGlvbikgewogICAgaWYgKHBvc2l0aW9uIGluIHN3YWxDbGFzc2VzKSB7CiAgICAgIGFkZENsYXNzKGNvbnRhaW5lciwgc3dhbENsYXNzZXNbcG9zaXRpb25dKTsKICAgIH0gZWxzZSB7CiAgICAgIHdhcm4oJ1RoZSAicG9zaXRpb24iIHBhcmFtZXRlciBpcyBub3QgdmFsaWQsIGRlZmF1bHRpbmcgdG8gImNlbnRlciInKTsKICAgICAgYWRkQ2xhc3MoY29udGFpbmVyLCBzd2FsQ2xhc3Nlcy5jZW50ZXIpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gaGFuZGxlR3Jvd1BhcmFtKGNvbnRhaW5lciwgZ3JvdykgewogICAgaWYgKGdyb3cgJiYgdHlwZW9mIGdyb3cgPT09ICdzdHJpbmcnKSB7CiAgICAgIGNvbnN0IGdyb3dDbGFzcyA9ICJncm93LSIuY29uY2F0KGdyb3cpOwoKICAgICAgaWYgKGdyb3dDbGFzcyBpbiBzd2FsQ2xhc3NlcykgewogICAgICAgIGFkZENsYXNzKGNvbnRhaW5lciwgc3dhbENsYXNzZXNbZ3Jvd0NsYXNzXSk7CiAgICAgIH0KICAgIH0KICB9CgogIGNvbnN0IHJlbmRlckNvbnRhaW5lciA9IChpbnN0YW5jZSwgcGFyYW1zKSA9PiB7CiAgICBjb25zdCBjb250YWluZXIgPSBnZXRDb250YWluZXIoKTsKCiAgICBpZiAoIWNvbnRhaW5lcikgewogICAgICByZXR1cm47CiAgICB9CgogICAgaGFuZGxlQmFja2Ryb3BQYXJhbShjb250YWluZXIsIHBhcmFtcy5iYWNrZHJvcCk7CiAgICBoYW5kbGVQb3NpdGlvblBhcmFtKGNvbnRhaW5lciwgcGFyYW1zLnBvc2l0aW9uKTsKICAgIGhhbmRsZUdyb3dQYXJhbShjb250YWluZXIsIHBhcmFtcy5ncm93KTsgLy8gQ3VzdG9tIGNsYXNzCgogICAgYXBwbHlDdXN0b21DbGFzcyhjb250YWluZXIsIHBhcmFtcywgJ2NvbnRhaW5lcicpOwogIH07CgogIC8qKgogICAqIFRoaXMgbW9kdWxlIGNvbnRhaW5zIGBXZWFrTWFwYHMgZm9yIGVhY2ggZWZmZWN0aXZlbHktInByaXZhdGUgIHByb3BlcnR5IiB0aGF0IGEgYFN3YWxgIGhhcy4KICAgKiBGb3IgZXhhbXBsZSwgdG8gc2V0IHRoZSBwcml2YXRlIHByb3BlcnR5ICJmb28iIG9mIGB0aGlzYCB0byAiYmFyIiwgeW91IGNhbiBgcHJpdmF0ZVByb3BzLmZvby5zZXQodGhpcywgJ2JhcicpYAogICAqIFRoaXMgaXMgdGhlIGFwcHJvYWNoIHRoYXQgQmFiZWwgd2lsbCBwcm9iYWJseSB0YWtlIHRvIGltcGxlbWVudCBwcml2YXRlIG1ldGhvZHMvZmllbGRzCiAgICogICBodHRwczovL2dpdGh1Yi5jb20vdGMzOS9wcm9wb3NhbC1wcml2YXRlLW1ldGhvZHMKICAgKiAgIGh0dHBzOi8vZ2l0aHViLmNvbS9iYWJlbC9iYWJlbC9wdWxsLzc1NTUKICAgKiBPbmNlIHdlIGhhdmUgdGhlIGNoYW5nZXMgZnJvbSB0aGF0IFBSIGluIEJhYmVsLCBhbmQgb3VyIGNvcmUgY2xhc3MgZml0cyByZWFzb25hYmxlIGluICpvbmUgbW9kdWxlKgogICAqICAgdGhlbiB3ZSBjYW4gdXNlIHRoYXQgbGFuZ3VhZ2UgZmVhdHVyZS4KICAgKi8KICB2YXIgcHJpdmF0ZVByb3BzID0gewogICAgYXdhaXRpbmdQcm9taXNlOiBuZXcgV2Vha01hcCgpLAogICAgcHJvbWlzZTogbmV3IFdlYWtNYXAoKSwKICAgIGlubmVyUGFyYW1zOiBuZXcgV2Vha01hcCgpLAogICAgZG9tQ2FjaGU6IG5ldyBXZWFrTWFwKCkKICB9OwoKICBjb25zdCBpbnB1dFR5cGVzID0gWydpbnB1dCcsICdmaWxlJywgJ3JhbmdlJywgJ3NlbGVjdCcsICdyYWRpbycsICdjaGVja2JveCcsICd0ZXh0YXJlYSddOwogIGNvbnN0IHJlbmRlcklucHV0ID0gKGluc3RhbmNlLCBwYXJhbXMpID0+IHsKICAgIGNvbnN0IHBvcHVwID0gZ2V0UG9wdXAoKTsKICAgIGNvbnN0IGlubmVyUGFyYW1zID0gcHJpdmF0ZVByb3BzLmlubmVyUGFyYW1zLmdldChpbnN0YW5jZSk7CiAgICBjb25zdCByZXJlbmRlciA9ICFpbm5lclBhcmFtcyB8fCBwYXJhbXMuaW5wdXQgIT09IGlubmVyUGFyYW1zLmlucHV0OwogICAgaW5wdXRUeXBlcy5mb3JFYWNoKGlucHV0VHlwZSA9PiB7CiAgICAgIGNvbnN0IGlucHV0Q2xhc3MgPSBzd2FsQ2xhc3Nlc1tpbnB1dFR5cGVdOwogICAgICBjb25zdCBpbnB1dENvbnRhaW5lciA9IGdldENoaWxkQnlDbGFzcyhwb3B1cCwgaW5wdXRDbGFzcyk7IC8vIHNldCBhdHRyaWJ1dGVzCgogICAgICBzZXRBdHRyaWJ1dGVzKGlucHV0VHlwZSwgcGFyYW1zLmlucHV0QXR0cmlidXRlcyk7IC8vIHNldCBjbGFzcwoKICAgICAgaW5wdXRDb250YWluZXIuY2xhc3NOYW1lID0gaW5wdXRDbGFzczsKCiAgICAgIGlmIChyZXJlbmRlcikgewogICAgICAgIGhpZGUoaW5wdXRDb250YWluZXIpOwogICAgICB9CiAgICB9KTsKCiAgICBpZiAocGFyYW1zLmlucHV0KSB7CiAgICAgIGlmIChyZXJlbmRlcikgewogICAgICAgIHNob3dJbnB1dChwYXJhbXMpOwogICAgICB9IC8vIHNldCBjdXN0b20gY2xhc3MKCgogICAgICBzZXRDdXN0b21DbGFzcyhwYXJhbXMpOwogICAgfQogIH07CgogIGNvbnN0IHNob3dJbnB1dCA9IHBhcmFtcyA9PiB7CiAgICBpZiAoIXJlbmRlcklucHV0VHlwZVtwYXJhbXMuaW5wdXRdKSB7CiAgICAgIHJldHVybiBlcnJvcigiVW5leHBlY3RlZCB0eXBlIG9mIGlucHV0ISBFeHBlY3RlZCBcInRleHRcIiwgXCJlbWFpbFwiLCBcInBhc3N3b3JkXCIsIFwibnVtYmVyXCIsIFwidGVsXCIsIFwic2VsZWN0XCIsIFwicmFkaW9cIiwgXCJjaGVja2JveFwiLCBcInRleHRhcmVhXCIsIFwiZmlsZVwiIG9yIFwidXJsXCIsIGdvdCBcIiIuY29uY2F0KHBhcmFtcy5pbnB1dCwgIlwiIikpOwogICAgfQoKICAgIGNvbnN0IGlucHV0Q29udGFpbmVyID0gZ2V0SW5wdXRDb250YWluZXIocGFyYW1zLmlucHV0KTsKICAgIGNvbnN0IGlucHV0ID0gcmVuZGVySW5wdXRUeXBlW3BhcmFtcy5pbnB1dF0oaW5wdXRDb250YWluZXIsIHBhcmFtcyk7CiAgICBzaG93KGlucHV0KTsgLy8gaW5wdXQgYXV0b2ZvY3VzCgogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIGZvY3VzSW5wdXQoaW5wdXQpOwogICAgfSk7CiAgfTsKCiAgY29uc3QgcmVtb3ZlQXR0cmlidXRlcyA9IGlucHV0ID0+IHsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQuYXR0cmlidXRlcy5sZW5ndGg7IGkrKykgewogICAgICBjb25zdCBhdHRyTmFtZSA9IGlucHV0LmF0dHJpYnV0ZXNbaV0ubmFtZTsKCiAgICAgIGlmICghWyd0eXBlJywgJ3ZhbHVlJywgJ3N0eWxlJ10uaW5jbHVkZXMoYXR0ck5hbWUpKSB7CiAgICAgICAgaW5wdXQucmVtb3ZlQXR0cmlidXRlKGF0dHJOYW1lKTsKICAgICAgfQogICAgfQogIH07CgogIGNvbnN0IHNldEF0dHJpYnV0ZXMgPSAoaW5wdXRUeXBlLCBpbnB1dEF0dHJpYnV0ZXMpID0+IHsKICAgIGNvbnN0IGlucHV0ID0gZ2V0SW5wdXQoZ2V0UG9wdXAoKSwgaW5wdXRUeXBlKTsKCiAgICBpZiAoIWlucHV0KSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICByZW1vdmVBdHRyaWJ1dGVzKGlucHV0KTsKCiAgICBmb3IgKGNvbnN0IGF0dHIgaW4gaW5wdXRBdHRyaWJ1dGVzKSB7CiAgICAgIGlucHV0LnNldEF0dHJpYnV0ZShhdHRyLCBpbnB1dEF0dHJpYnV0ZXNbYXR0cl0pOwogICAgfQogIH07CgogIGNvbnN0IHNldEN1c3RvbUNsYXNzID0gcGFyYW1zID0+IHsKICAgIGNvbnN0IGlucHV0Q29udGFpbmVyID0gZ2V0SW5wdXRDb250YWluZXIocGFyYW1zLmlucHV0KTsKCiAgICBpZiAocGFyYW1zLmN1c3RvbUNsYXNzKSB7CiAgICAgIGFkZENsYXNzKGlucHV0Q29udGFpbmVyLCBwYXJhbXMuY3VzdG9tQ2xhc3MuaW5wdXQpOwogICAgfQogIH07CgogIGNvbnN0IHNldElucHV0UGxhY2Vob2xkZXIgPSAoaW5wdXQsIHBhcmFtcykgPT4gewogICAgaWYgKCFpbnB1dC5wbGFjZWhvbGRlciB8fCBwYXJhbXMuaW5wdXRQbGFjZWhvbGRlcikgewogICAgICBpbnB1dC5wbGFjZWhvbGRlciA9IHBhcmFtcy5pbnB1dFBsYWNlaG9sZGVyOwogICAgfQogIH07CgogIGNvbnN0IHNldElucHV0TGFiZWwgPSAoaW5wdXQsIHByZXBlbmRUbywgcGFyYW1zKSA9PiB7CiAgICBpZiAocGFyYW1zLmlucHV0TGFiZWwpIHsKICAgICAgaW5wdXQuaWQgPSBzd2FsQ2xhc3Nlcy5pbnB1dDsKICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsYWJlbCcpOwogICAgICBjb25zdCBsYWJlbENsYXNzID0gc3dhbENsYXNzZXNbJ2lucHV0LWxhYmVsJ107CiAgICAgIGxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgaW5wdXQuaWQpOwogICAgICBsYWJlbC5jbGFzc05hbWUgPSBsYWJlbENsYXNzOwogICAgICBhZGRDbGFzcyhsYWJlbCwgcGFyYW1zLmN1c3RvbUNsYXNzLmlucHV0TGFiZWwpOwogICAgICBsYWJlbC5pbm5lclRleHQgPSBwYXJhbXMuaW5wdXRMYWJlbDsKICAgICAgcHJlcGVuZFRvLmluc2VydEFkamFjZW50RWxlbWVudCgnYmVmb3JlYmVnaW4nLCBsYWJlbCk7CiAgICB9CiAgfTsKCiAgY29uc3QgZ2V0SW5wdXRDb250YWluZXIgPSBpbnB1dFR5cGUgPT4gewogICAgY29uc3QgaW5wdXRDbGFzcyA9IHN3YWxDbGFzc2VzW2lucHV0VHlwZV0gPyBzd2FsQ2xhc3Nlc1tpbnB1dFR5cGVdIDogc3dhbENsYXNzZXMuaW5wdXQ7CiAgICByZXR1cm4gZ2V0Q2hpbGRCeUNsYXNzKGdldFBvcHVwKCksIGlucHV0Q2xhc3MpOwogIH07CgogIGNvbnN0IHJlbmRlcklucHV0VHlwZSA9IHt9OwoKICByZW5kZXJJbnB1dFR5cGUudGV4dCA9IHJlbmRlcklucHV0VHlwZS5lbWFpbCA9IHJlbmRlcklucHV0VHlwZS5wYXNzd29yZCA9IHJlbmRlcklucHV0VHlwZS5udW1iZXIgPSByZW5kZXJJbnB1dFR5cGUudGVsID0gcmVuZGVySW5wdXRUeXBlLnVybCA9IChpbnB1dCwgcGFyYW1zKSA9PiB7CiAgICBpZiAodHlwZW9mIHBhcmFtcy5pbnB1dFZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgcGFyYW1zLmlucHV0VmFsdWUgPT09ICdudW1iZXInKSB7CiAgICAgIGlucHV0LnZhbHVlID0gcGFyYW1zLmlucHV0VmFsdWU7CiAgICB9IGVsc2UgaWYgKCFpc1Byb21pc2UocGFyYW1zLmlucHV0VmFsdWUpKSB7CiAgICAgIHdhcm4oIlVuZXhwZWN0ZWQgdHlwZSBvZiBpbnB1dFZhbHVlISBFeHBlY3RlZCBcInN0cmluZ1wiLCBcIm51bWJlclwiIG9yIFwiUHJvbWlzZVwiLCBnb3QgXCIiLmNvbmNhdCh0eXBlb2YgcGFyYW1zLmlucHV0VmFsdWUsICJcIiIpKTsKICAgIH0KCiAgICBzZXRJbnB1dExhYmVsKGlucHV0LCBpbnB1dCwgcGFyYW1zKTsKICAgIHNldElucHV0UGxhY2Vob2xkZXIoaW5wdXQsIHBhcmFtcyk7CiAgICBpbnB1dC50eXBlID0gcGFyYW1zLmlucHV0OwogICAgcmV0dXJuIGlucHV0OwogIH07CgogIHJlbmRlcklucHV0VHlwZS5maWxlID0gKGlucHV0LCBwYXJhbXMpID0+IHsKICAgIHNldElucHV0TGFiZWwoaW5wdXQsIGlucHV0LCBwYXJhbXMpOwogICAgc2V0SW5wdXRQbGFjZWhvbGRlcihpbnB1dCwgcGFyYW1zKTsKICAgIHJldHVybiBpbnB1dDsKICB9OwoKICByZW5kZXJJbnB1dFR5cGUucmFuZ2UgPSAocmFuZ2UsIHBhcmFtcykgPT4gewogICAgY29uc3QgcmFuZ2VJbnB1dCA9IHJhbmdlLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0Jyk7CiAgICBjb25zdCByYW5nZU91dHB1dCA9IHJhbmdlLnF1ZXJ5U2VsZWN0b3IoJ291dHB1dCcpOwogICAgcmFuZ2VJbnB1dC52YWx1ZSA9IHBhcmFtcy5pbnB1dFZhbHVlOwogICAgcmFuZ2VJbnB1dC50eXBlID0gcGFyYW1zLmlucHV0OwogICAgcmFuZ2VPdXRwdXQudmFsdWUgPSBwYXJhbXMuaW5wdXRWYWx1ZTsKICAgIHNldElucHV0TGFiZWwocmFuZ2VJbnB1dCwgcmFuZ2UsIHBhcmFtcyk7CiAgICByZXR1cm4gcmFuZ2U7CiAgfTsKCiAgcmVuZGVySW5wdXRUeXBlLnNlbGVjdCA9IChzZWxlY3QsIHBhcmFtcykgPT4gewogICAgc2VsZWN0LnRleHRDb250ZW50ID0gJyc7CgogICAgaWYgKHBhcmFtcy5pbnB1dFBsYWNlaG9sZGVyKSB7CiAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7CiAgICAgIHNldElubmVySHRtbChwbGFjZWhvbGRlciwgcGFyYW1zLmlucHV0UGxhY2Vob2xkZXIpOwogICAgICBwbGFjZWhvbGRlci52YWx1ZSA9ICcnOwogICAgICBwbGFjZWhvbGRlci5kaXNhYmxlZCA9IHRydWU7CiAgICAgIHBsYWNlaG9sZGVyLnNlbGVjdGVkID0gdHJ1ZTsKICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKHBsYWNlaG9sZGVyKTsKICAgIH0KCiAgICBzZXRJbnB1dExhYmVsKHNlbGVjdCwgc2VsZWN0LCBwYXJhbXMpOwogICAgcmV0dXJuIHNlbGVjdDsKICB9OwoKICByZW5kZXJJbnB1dFR5cGUucmFkaW8gPSByYWRpbyA9PiB7CiAgICByYWRpby50ZXh0Q29udGVudCA9ICcnOwogICAgcmV0dXJuIHJhZGlvOwogIH07CgogIHJlbmRlcklucHV0VHlwZS5jaGVja2JveCA9IChjaGVja2JveENvbnRhaW5lciwgcGFyYW1zKSA9PiB7CiAgICBjb25zdCBjaGVja2JveCA9IGdldElucHV0KGdldFBvcHVwKCksICdjaGVja2JveCcpOwogICAgY2hlY2tib3gudmFsdWUgPSAxOwogICAgY2hlY2tib3guaWQgPSBzd2FsQ2xhc3Nlcy5jaGVja2JveDsKICAgIGNoZWNrYm94LmNoZWNrZWQgPSBCb29sZWFuKHBhcmFtcy5pbnB1dFZhbHVlKTsKICAgIGNvbnN0IGxhYmVsID0gY2hlY2tib3hDb250YWluZXIucXVlcnlTZWxlY3Rvcignc3BhbicpOwogICAgc2V0SW5uZXJIdG1sKGxhYmVsLCBwYXJhbXMuaW5wdXRQbGFjZWhvbGRlcik7CiAgICByZXR1cm4gY2hlY2tib3hDb250YWluZXI7CiAgfTsKCiAgcmVuZGVySW5wdXRUeXBlLnRleHRhcmVhID0gKHRleHRhcmVhLCBwYXJhbXMpID0+IHsKICAgIHRleHRhcmVhLnZhbHVlID0gcGFyYW1zLmlucHV0VmFsdWU7CiAgICBzZXRJbnB1dFBsYWNlaG9sZGVyKHRleHRhcmVhLCBwYXJhbXMpOwogICAgc2V0SW5wdXRMYWJlbCh0ZXh0YXJlYSwgdGV4dGFyZWEsIHBhcmFtcyk7CgogICAgY29uc3QgZ2V0TWFyZ2luID0gZWwgPT4gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpLm1hcmdpbkxlZnQpICsgcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZWwpLm1hcmdpblJpZ2h0KTsKCiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgLy8gIzIyOTEKICAgICAgaWYgKCdNdXRhdGlvbk9ic2VydmVyJyBpbiB3aW5kb3cpIHsKICAgICAgICAvLyAjMTY5OQogICAgICAgIGNvbnN0IGluaXRpYWxQb3B1cFdpZHRoID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZ2V0UG9wdXAoKSkud2lkdGgpOwoKICAgICAgICBjb25zdCB0ZXh0YXJlYVJlc2l6ZUhhbmRsZXIgPSAoKSA9PiB7CiAgICAgICAgICBjb25zdCB0ZXh0YXJlYVdpZHRoID0gdGV4dGFyZWEub2Zmc2V0V2lkdGggKyBnZXRNYXJnaW4odGV4dGFyZWEpOwoKICAgICAgICAgIGlmICh0ZXh0YXJlYVdpZHRoID4gaW5pdGlhbFBvcHVwV2lkdGgpIHsKICAgICAgICAgICAgZ2V0UG9wdXAoKS5zdHlsZS53aWR0aCA9ICIiLmNvbmNhdCh0ZXh0YXJlYVdpZHRoLCAicHgiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGdldFBvcHVwKCkuc3R5bGUud2lkdGggPSBudWxsOwogICAgICAgICAgfQogICAgICAgIH07CgogICAgICAgIG5ldyBNdXRhdGlvbk9ic2VydmVyKHRleHRhcmVhUmVzaXplSGFuZGxlcikub2JzZXJ2ZSh0ZXh0YXJlYSwgewogICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSwKICAgICAgICAgIGF0dHJpYnV0ZUZpbHRlcjogWydzdHlsZSddCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0pOwogICAgcmV0dXJuIHRleHRhcmVhOwogIH07CgogIGNvbnN0IHJlbmRlckNvbnRlbnQgPSAoaW5zdGFuY2UsIHBhcmFtcykgPT4gewogICAgY29uc3QgaHRtbENvbnRhaW5lciA9IGdldEh0bWxDb250YWluZXIoKTsKICAgIGFwcGx5Q3VzdG9tQ2xhc3MoaHRtbENvbnRhaW5lciwgcGFyYW1zLCAnaHRtbENvbnRhaW5lcicpOyAvLyBDb250ZW50IGFzIEhUTUwKCiAgICBpZiAocGFyYW1zLmh0bWwpIHsKICAgICAgcGFyc2VIdG1sVG9Db250YWluZXIocGFyYW1zLmh0bWwsIGh0bWxDb250YWluZXIpOwogICAgICBzaG93KGh0bWxDb250YWluZXIsICdibG9jaycpOyAvLyBDb250ZW50IGFzIHBsYWluIHRleHQKICAgIH0gZWxzZSBpZiAocGFyYW1zLnRleHQpIHsKICAgICAgaHRtbENvbnRhaW5lci50ZXh0Q29udGVudCA9IHBhcmFtcy50ZXh0OwogICAgICBzaG93KGh0bWxDb250YWluZXIsICdibG9jaycpOyAvLyBObyBjb250ZW50CiAgICB9IGVsc2UgewogICAgICBoaWRlKGh0bWxDb250YWluZXIpOwogICAgfQoKICAgIHJlbmRlcklucHV0KGluc3RhbmNlLCBwYXJhbXMpOwogIH07CgogIGNvbnN0IHJlbmRlckZvb3RlciA9IChpbnN0YW5jZSwgcGFyYW1zKSA9PiB7CiAgICBjb25zdCBmb290ZXIgPSBnZXRGb290ZXIoKTsKICAgIHRvZ2dsZShmb290ZXIsIHBhcmFtcy5mb290ZXIpOwoKICAgIGlmIChwYXJhbXMuZm9vdGVyKSB7CiAgICAgIHBhcnNlSHRtbFRvQ29udGFpbmVyKHBhcmFtcy5mb290ZXIsIGZvb3Rlcik7CiAgICB9IC8vIEN1c3RvbSBjbGFzcwoKCiAgICBhcHBseUN1c3RvbUNsYXNzKGZvb3RlciwgcGFyYW1zLCAnZm9vdGVyJyk7CiAgfTsKCiAgY29uc3QgcmVuZGVyQ2xvc2VCdXR0b24gPSAoaW5zdGFuY2UsIHBhcmFtcykgPT4gewogICAgY29uc3QgY2xvc2VCdXR0b24gPSBnZXRDbG9zZUJ1dHRvbigpOwogICAgc2V0SW5uZXJIdG1sKGNsb3NlQnV0dG9uLCBwYXJhbXMuY2xvc2VCdXR0b25IdG1sKTsgLy8gQ3VzdG9tIGNsYXNzCgogICAgYXBwbHlDdXN0b21DbGFzcyhjbG9zZUJ1dHRvbiwgcGFyYW1zLCAnY2xvc2VCdXR0b24nKTsKICAgIHRvZ2dsZShjbG9zZUJ1dHRvbiwgcGFyYW1zLnNob3dDbG9zZUJ1dHRvbik7CiAgICBjbG9zZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBwYXJhbXMuY2xvc2VCdXR0b25BcmlhTGFiZWwpOwogIH07CgogIGNvbnN0IHJlbmRlckljb24gPSAoaW5zdGFuY2UsIHBhcmFtcykgPT4gewogICAgY29uc3QgaW5uZXJQYXJhbXMgPSBwcml2YXRlUHJvcHMuaW5uZXJQYXJhbXMuZ2V0KGluc3RhbmNlKTsKICAgIGNvbnN0IGljb24gPSBnZXRJY29uKCk7IC8vIGlmIHRoZSBnaXZlbiBpY29uIGFscmVhZHkgcmVuZGVyZWQsIGFwcGx5IHRoZSBzdHlsaW5nIHdpdGhvdXQgcmUtcmVuZGVyaW5nIHRoZSBpY29uCgogICAgaWYgKGlubmVyUGFyYW1zICYmIHBhcmFtcy5pY29uID09PSBpbm5lclBhcmFtcy5pY29uKSB7CiAgICAgIC8vIEN1c3RvbSBvciBkZWZhdWx0IGNvbnRlbnQKICAgICAgc2V0Q29udGVudChpY29uLCBwYXJhbXMpOwogICAgICBhcHBseVN0eWxlcyhpY29uLCBwYXJhbXMpOwogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKCFwYXJhbXMuaWNvbiAmJiAhcGFyYW1zLmljb25IdG1sKSB7CiAgICAgIHJldHVybiBoaWRlKGljb24pOwogICAgfQoKICAgIGlmIChwYXJhbXMuaWNvbiAmJiBPYmplY3Qua2V5cyhpY29uVHlwZXMpLmluZGV4T2YocGFyYW1zLmljb24pID09PSAtMSkgewogICAgICBlcnJvcigiVW5rbm93biBpY29uISBFeHBlY3RlZCBcInN1Y2Nlc3NcIiwgXCJlcnJvclwiLCBcIndhcm5pbmdcIiwgXCJpbmZvXCIgb3IgXCJxdWVzdGlvblwiLCBnb3QgXCIiLmNvbmNhdChwYXJhbXMuaWNvbiwgIlwiIikpOwogICAgICByZXR1cm4gaGlkZShpY29uKTsKICAgIH0KCiAgICBzaG93KGljb24pOyAvLyBDdXN0b20gb3IgZGVmYXVsdCBjb250ZW50CgogICAgc2V0Q29udGVudChpY29uLCBwYXJhbXMpOwogICAgYXBwbHlTdHlsZXMoaWNvbiwgcGFyYW1zKTsgLy8gQW5pbWF0ZSBpY29uCgogICAgYWRkQ2xhc3MoaWNvbiwgcGFyYW1zLnNob3dDbGFzcy5pY29uKTsKICB9OwoKICBjb25zdCBhcHBseVN0eWxlcyA9IChpY29uLCBwYXJhbXMpID0+IHsKICAgIGZvciAoY29uc3QgaWNvblR5cGUgaW4gaWNvblR5cGVzKSB7CiAgICAgIGlmIChwYXJhbXMuaWNvbiAhPT0gaWNvblR5cGUpIHsKICAgICAgICByZW1vdmVDbGFzcyhpY29uLCBpY29uVHlwZXNbaWNvblR5cGVdKTsKICAgICAgfQogICAgfQoKICAgIGFkZENsYXNzKGljb24sIGljb25UeXBlc1twYXJhbXMuaWNvbl0pOyAvLyBJY29uIGNvbG9yCgogICAgc2V0Q29sb3IoaWNvbiwgcGFyYW1zKTsgLy8gU3VjY2VzcyBpY29uIGJhY2tncm91bmQgY29sb3IKCiAgICBhZGp1c3RTdWNjZXNzSWNvbkJhY2tnb3VuZENvbG9yKCk7IC8vIEN1c3RvbSBjbGFzcwoKICAgIGFwcGx5Q3VzdG9tQ2xhc3MoaWNvbiwgcGFyYW1zLCAnaWNvbicpOwogIH07IC8vIEFkanVzdCBzdWNjZXNzIGljb24gYmFja2dyb3VuZCBjb2xvciB0byBtYXRjaCB0aGUgcG9wdXAgYmFja2dyb3VuZCBjb2xvcgoKCiAgY29uc3QgYWRqdXN0U3VjY2Vzc0ljb25CYWNrZ291bmRDb2xvciA9ICgpID0+IHsKICAgIGNvbnN0IHBvcHVwID0gZ2V0UG9wdXAoKTsKICAgIGNvbnN0IHBvcHVwQmFja2dyb3VuZENvbG9yID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUocG9wdXApLmdldFByb3BlcnR5VmFsdWUoJ2JhY2tncm91bmQtY29sb3InKTsKICAgIGNvbnN0IHN1Y2Nlc3NJY29uUGFydHMgPSBwb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCdbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtY2lyY3VsYXItbGluZV0sIC5zd2FsMi1zdWNjZXNzLWZpeCcpOwoKICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3VjY2Vzc0ljb25QYXJ0cy5sZW5ndGg7IGkrKykgewogICAgICBzdWNjZXNzSWNvblBhcnRzW2ldLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHBvcHVwQmFja2dyb3VuZENvbG9yOwogICAgfQogIH07CgogIGNvbnN0IHNldENvbnRlbnQgPSAoaWNvbiwgcGFyYW1zKSA9PiB7CiAgICBpY29uLnRleHRDb250ZW50ID0gJyc7CgogICAgaWYgKHBhcmFtcy5pY29uSHRtbCkgewogICAgICBzZXRJbm5lckh0bWwoaWNvbiwgaWNvbkNvbnRlbnQocGFyYW1zLmljb25IdG1sKSk7CiAgICB9IGVsc2UgaWYgKHBhcmFtcy5pY29uID09PSAnc3VjY2VzcycpIHsKICAgICAgc2V0SW5uZXJIdG1sKGljb24sICJcbiAgICAgIDxkaXYgY2xhc3M9XCJzd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmUtbGVmdFwiPjwvZGl2PlxuICAgICAgPHNwYW4gY2xhc3M9XCJzd2FsMi1zdWNjZXNzLWxpbmUtdGlwXCI+PC9zcGFuPiA8c3BhbiBjbGFzcz1cInN3YWwyLXN1Y2Nlc3MtbGluZS1sb25nXCI+PC9zcGFuPlxuICAgICAgPGRpdiBjbGFzcz1cInN3YWwyLXN1Y2Nlc3MtcmluZ1wiPjwvZGl2PiA8ZGl2IGNsYXNzPVwic3dhbDItc3VjY2Vzcy1maXhcIj48L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJzd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmUtcmlnaHRcIj48L2Rpdj5cbiAgICAiKTsKICAgIH0gZWxzZSBpZiAocGFyYW1zLmljb24gPT09ICdlcnJvcicpIHsKICAgICAgc2V0SW5uZXJIdG1sKGljb24sICJcbiAgICAgIDxzcGFuIGNsYXNzPVwic3dhbDIteC1tYXJrXCI+XG4gICAgICAgIDxzcGFuIGNsYXNzPVwic3dhbDIteC1tYXJrLWxpbmUtbGVmdFwiPjwvc3Bhbj5cbiAgICAgICAgPHNwYW4gY2xhc3M9XCJzd2FsMi14LW1hcmstbGluZS1yaWdodFwiPjwvc3Bhbj5cbiAgICAgIDwvc3Bhbj5cbiAgICAiKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IGRlZmF1bHRJY29uSHRtbCA9IHsKICAgICAgICBxdWVzdGlvbjogJz8nLAogICAgICAgIHdhcm5pbmc6ICchJywKICAgICAgICBpbmZvOiAnaScKICAgICAgfTsKICAgICAgc2V0SW5uZXJIdG1sKGljb24sIGljb25Db250ZW50KGRlZmF1bHRJY29uSHRtbFtwYXJhbXMuaWNvbl0pKTsKICAgIH0KICB9OwoKICBjb25zdCBzZXRDb2xvciA9IChpY29uLCBwYXJhbXMpID0+IHsKICAgIGlmICghcGFyYW1zLmljb25Db2xvcikgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWNvbi5zdHlsZS5jb2xvciA9IHBhcmFtcy5pY29uQ29sb3I7CiAgICBpY29uLnN0eWxlLmJvcmRlckNvbG9yID0gcGFyYW1zLmljb25Db2xvcjsKCiAgICBmb3IgKGNvbnN0IHNlbCBvZiBbJy5zd2FsMi1zdWNjZXNzLWxpbmUtdGlwJywgJy5zd2FsMi1zdWNjZXNzLWxpbmUtbG9uZycsICcuc3dhbDIteC1tYXJrLWxpbmUtbGVmdCcsICcuc3dhbDIteC1tYXJrLWxpbmUtcmlnaHQnXSkgewogICAgICBzZXRTdHlsZShpY29uLCBzZWwsICdiYWNrZ3JvdW5kQ29sb3InLCBwYXJhbXMuaWNvbkNvbG9yKTsKICAgIH0KCiAgICBzZXRTdHlsZShpY29uLCAnLnN3YWwyLXN1Y2Nlc3MtcmluZycsICdib3JkZXJDb2xvcicsIHBhcmFtcy5pY29uQ29sb3IpOwogIH07CgogIGNvbnN0IGljb25Db250ZW50ID0gY29udGVudCA9PiAiPGRpdiBjbGFzcz1cIiIuY29uY2F0KHN3YWxDbGFzc2VzWydpY29uLWNvbnRlbnQnXSwgIlwiPiIpLmNvbmNhdChjb250ZW50LCAiPC9kaXY+Iik7CgogIGNvbnN0IHJlbmRlckltYWdlID0gKGluc3RhbmNlLCBwYXJhbXMpID0+IHsKICAgIGNvbnN0IGltYWdlID0gZ2V0SW1hZ2UoKTsKCiAgICBpZiAoIXBhcmFtcy5pbWFnZVVybCkgewogICAgICByZXR1cm4gaGlkZShpbWFnZSk7CiAgICB9CgogICAgc2hvdyhpbWFnZSwgJycpOyAvLyBTcmMsIGFsdAoKICAgIGltYWdlLnNldEF0dHJpYnV0ZSgnc3JjJywgcGFyYW1zLmltYWdlVXJsKTsKICAgIGltYWdlLnNldEF0dHJpYnV0ZSgnYWx0JywgcGFyYW1zLmltYWdlQWx0KTsgLy8gV2lkdGgsIGhlaWdodAoKICAgIGFwcGx5TnVtZXJpY2FsU3R5bGUoaW1hZ2UsICd3aWR0aCcsIHBhcmFtcy5pbWFnZVdpZHRoKTsKICAgIGFwcGx5TnVtZXJpY2FsU3R5bGUoaW1hZ2UsICdoZWlnaHQnLCBwYXJhbXMuaW1hZ2VIZWlnaHQpOyAvLyBDbGFzcwoKICAgIGltYWdlLmNsYXNzTmFtZSA9IHN3YWxDbGFzc2VzLmltYWdlOwogICAgYXBwbHlDdXN0b21DbGFzcyhpbWFnZSwgcGFyYW1zLCAnaW1hZ2UnKTsKICB9OwoKICBjb25zdCBjcmVhdGVTdGVwRWxlbWVudCA9IHN0ZXAgPT4gewogICAgY29uc3Qgc3RlcEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgIGFkZENsYXNzKHN0ZXBFbCwgc3dhbENsYXNzZXNbJ3Byb2dyZXNzLXN0ZXAnXSk7CiAgICBzZXRJbm5lckh0bWwoc3RlcEVsLCBzdGVwKTsKICAgIHJldHVybiBzdGVwRWw7CiAgfTsKCiAgY29uc3QgY3JlYXRlTGluZUVsZW1lbnQgPSBwYXJhbXMgPT4gewogICAgY29uc3QgbGluZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTsKICAgIGFkZENsYXNzKGxpbmVFbCwgc3dhbENsYXNzZXNbJ3Byb2dyZXNzLXN0ZXAtbGluZSddKTsKCiAgICBpZiAocGFyYW1zLnByb2dyZXNzU3RlcHNEaXN0YW5jZSkgewogICAgICBsaW5lRWwuc3R5bGUud2lkdGggPSBwYXJhbXMucHJvZ3Jlc3NTdGVwc0Rpc3RhbmNlOwogICAgfQoKICAgIHJldHVybiBsaW5lRWw7CiAgfTsKCiAgY29uc3QgcmVuZGVyUHJvZ3Jlc3NTdGVwcyA9IChpbnN0YW5jZSwgcGFyYW1zKSA9PiB7CiAgICBjb25zdCBwcm9ncmVzc1N0ZXBzQ29udGFpbmVyID0gZ2V0UHJvZ3Jlc3NTdGVwcygpOwoKICAgIGlmICghcGFyYW1zLnByb2dyZXNzU3RlcHMgfHwgcGFyYW1zLnByb2dyZXNzU3RlcHMubGVuZ3RoID09PSAwKSB7CiAgICAgIHJldHVybiBoaWRlKHByb2dyZXNzU3RlcHNDb250YWluZXIpOwogICAgfQoKICAgIHNob3cocHJvZ3Jlc3NTdGVwc0NvbnRhaW5lcik7CiAgICBwcm9ncmVzc1N0ZXBzQ29udGFpbmVyLnRleHRDb250ZW50ID0gJyc7CgogICAgaWYgKHBhcmFtcy5jdXJyZW50UHJvZ3Jlc3NTdGVwID49IHBhcmFtcy5wcm9ncmVzc1N0ZXBzLmxlbmd0aCkgewogICAgICB3YXJuKCdJbnZhbGlkIGN1cnJlbnRQcm9ncmVzc1N0ZXAgcGFyYW1ldGVyLCBpdCBzaG91bGQgYmUgbGVzcyB0aGFuIHByb2dyZXNzU3RlcHMubGVuZ3RoICcgKyAnKGN1cnJlbnRQcm9ncmVzc1N0ZXAgbGlrZSBKUyBhcnJheXMgc3RhcnRzIGZyb20gMCknKTsKICAgIH0KCiAgICBwYXJhbXMucHJvZ3Jlc3NTdGVwcy5mb3JFYWNoKChzdGVwLCBpbmRleCkgPT4gewogICAgICBjb25zdCBzdGVwRWwgPSBjcmVhdGVTdGVwRWxlbWVudChzdGVwKTsKICAgICAgcHJvZ3Jlc3NTdGVwc0NvbnRhaW5lci5hcHBlbmRDaGlsZChzdGVwRWwpOwoKICAgICAgaWYgKGluZGV4ID09PSBwYXJhbXMuY3VycmVudFByb2dyZXNzU3RlcCkgewogICAgICAgIGFkZENsYXNzKHN0ZXBFbCwgc3dhbENsYXNzZXNbJ2FjdGl2ZS1wcm9ncmVzcy1zdGVwJ10pOwogICAgICB9CgogICAgICBpZiAoaW5kZXggIT09IHBhcmFtcy5wcm9ncmVzc1N0ZXBzLmxlbmd0aCAtIDEpIHsKICAgICAgICBjb25zdCBsaW5lRWwgPSBjcmVhdGVMaW5lRWxlbWVudChwYXJhbXMpOwogICAgICAgIHByb2dyZXNzU3RlcHNDb250YWluZXIuYXBwZW5kQ2hpbGQobGluZUVsKTsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgY29uc3QgcmVuZGVyVGl0bGUgPSAoaW5zdGFuY2UsIHBhcmFtcykgPT4gewogICAgY29uc3QgdGl0bGUgPSBnZXRUaXRsZSgpOwogICAgdG9nZ2xlKHRpdGxlLCBwYXJhbXMudGl0bGUgfHwgcGFyYW1zLnRpdGxlVGV4dCwgJ2Jsb2NrJyk7CgogICAgaWYgKHBhcmFtcy50aXRsZSkgewogICAgICBwYXJzZUh0bWxUb0NvbnRhaW5lcihwYXJhbXMudGl0bGUsIHRpdGxlKTsKICAgIH0KCiAgICBpZiAocGFyYW1zLnRpdGxlVGV4dCkgewogICAgICB0aXRsZS5pbm5lclRleHQgPSBwYXJhbXMudGl0bGVUZXh0OwogICAgfSAvLyBDdXN0b20gY2xhc3MKCgogICAgYXBwbHlDdXN0b21DbGFzcyh0aXRsZSwgcGFyYW1zLCAndGl0bGUnKTsKICB9OwoKICBjb25zdCByZW5kZXJQb3B1cCA9IChpbnN0YW5jZSwgcGFyYW1zKSA9PiB7CiAgICBjb25zdCBjb250YWluZXIgPSBnZXRDb250YWluZXIoKTsKICAgIGNvbnN0IHBvcHVwID0gZ2V0UG9wdXAoKTsgLy8gV2lkdGgKCiAgICBpZiAocGFyYW1zLnRvYXN0KSB7CiAgICAgIC8vICMyMTcwCiAgICAgIGFwcGx5TnVtZXJpY2FsU3R5bGUoY29udGFpbmVyLCAnd2lkdGgnLCBwYXJhbXMud2lkdGgpOwogICAgICBwb3B1cC5zdHlsZS53aWR0aCA9ICcxMDAlJzsKICAgICAgcG9wdXAuaW5zZXJ0QmVmb3JlKGdldExvYWRlcigpLCBnZXRJY29uKCkpOwogICAgfSBlbHNlIHsKICAgICAgYXBwbHlOdW1lcmljYWxTdHlsZShwb3B1cCwgJ3dpZHRoJywgcGFyYW1zLndpZHRoKTsKICAgIH0gLy8gUGFkZGluZwoKCiAgICBhcHBseU51bWVyaWNhbFN0eWxlKHBvcHVwLCAncGFkZGluZycsIHBhcmFtcy5wYWRkaW5nKTsgLy8gQ29sb3IKCiAgICBpZiAocGFyYW1zLmNvbG9yKSB7CiAgICAgIHBvcHVwLnN0eWxlLmNvbG9yID0gcGFyYW1zLmNvbG9yOwogICAgfSAvLyBCYWNrZ3JvdW5kCgoKICAgIGlmIChwYXJhbXMuYmFja2dyb3VuZCkgewogICAgICBwb3B1cC5zdHlsZS5iYWNrZ3JvdW5kID0gcGFyYW1zLmJhY2tncm91bmQ7CiAgICB9CgogICAgaGlkZShnZXRWYWxpZGF0aW9uTWVzc2FnZSgpKTsgLy8gQ2xhc3NlcwoKICAgIGFkZENsYXNzZXMocG9wdXAsIHBhcmFtcyk7CiAgfTsKCiAgY29uc3QgYWRkQ2xhc3NlcyA9IChwb3B1cCwgcGFyYW1zKSA9PiB7CiAgICAvLyBEZWZhdWx0IENsYXNzICsgc2hvd0NsYXNzIHdoZW4gdXBkYXRpbmcgU3dhbC51cGRhdGUoe30pCiAgICBwb3B1cC5jbGFzc05hbWUgPSAiIi5jb25jYXQoc3dhbENsYXNzZXMucG9wdXAsICIgIikuY29uY2F0KGlzVmlzaWJsZShwb3B1cCkgPyBwYXJhbXMuc2hvd0NsYXNzLnBvcHVwIDogJycpOwoKICAgIGlmIChwYXJhbXMudG9hc3QpIHsKICAgICAgYWRkQ2xhc3MoW2RvY3VtZW50LmRvY3VtZW50RWxlbWVudCwgZG9jdW1lbnQuYm9keV0sIHN3YWxDbGFzc2VzWyd0b2FzdC1zaG93biddKTsKICAgICAgYWRkQ2xhc3MocG9wdXAsIHN3YWxDbGFzc2VzLnRvYXN0KTsKICAgIH0gZWxzZSB7CiAgICAgIGFkZENsYXNzKHBvcHVwLCBzd2FsQ2xhc3Nlcy5tb2RhbCk7CiAgICB9IC8vIEN1c3RvbSBjbGFzcwoKCiAgICBhcHBseUN1c3RvbUNsYXNzKHBvcHVwLCBwYXJhbXMsICdwb3B1cCcpOwoKICAgIGlmICh0eXBlb2YgcGFyYW1zLmN1c3RvbUNsYXNzID09PSAnc3RyaW5nJykgewogICAgICBhZGRDbGFzcyhwb3B1cCwgcGFyYW1zLmN1c3RvbUNsYXNzKTsKICAgIH0gLy8gSWNvbiBjbGFzcyAoIzE4NDIpCgoKICAgIGlmIChwYXJhbXMuaWNvbikgewogICAgICBhZGRDbGFzcyhwb3B1cCwgc3dhbENsYXNzZXNbImljb24tIi5jb25jYXQocGFyYW1zLmljb24pXSk7CiAgICB9CiAgfTsKCiAgY29uc3QgcmVuZGVyID0gKGluc3RhbmNlLCBwYXJhbXMpID0+IHsKICAgIHJlbmRlclBvcHVwKGluc3RhbmNlLCBwYXJhbXMpOwogICAgcmVuZGVyQ29udGFpbmVyKGluc3RhbmNlLCBwYXJhbXMpOwogICAgcmVuZGVyUHJvZ3Jlc3NTdGVwcyhpbnN0YW5jZSwgcGFyYW1zKTsKICAgIHJlbmRlckljb24oaW5zdGFuY2UsIHBhcmFtcyk7CiAgICByZW5kZXJJbWFnZShpbnN0YW5jZSwgcGFyYW1zKTsKICAgIHJlbmRlclRpdGxlKGluc3RhbmNlLCBwYXJhbXMpOwogICAgcmVuZGVyQ2xvc2VCdXR0b24oaW5zdGFuY2UsIHBhcmFtcyk7CiAgICByZW5kZXJDb250ZW50KGluc3RhbmNlLCBwYXJhbXMpOwogICAgcmVuZGVyQWN0aW9ucyhpbnN0YW5jZSwgcGFyYW1zKTsKICAgIHJlbmRlckZvb3RlcihpbnN0YW5jZSwgcGFyYW1zKTsKCiAgICBpZiAodHlwZW9mIHBhcmFtcy5kaWRSZW5kZXIgPT09ICdmdW5jdGlvbicpIHsKICAgICAgcGFyYW1zLmRpZFJlbmRlcihnZXRQb3B1cCgpKTsKICAgIH0KICB9OwoKICAvKgogICAqIEdsb2JhbCBmdW5jdGlvbiB0byBkZXRlcm1pbmUgaWYgU3dlZXRBbGVydDIgcG9wdXAgaXMgc2hvd24KICAgKi8KCiAgY29uc3QgaXNWaXNpYmxlJDEgPSAoKSA9PiB7CiAgICByZXR1cm4gaXNWaXNpYmxlKGdldFBvcHVwKCkpOwogIH07CiAgLyoKICAgKiBHbG9iYWwgZnVuY3Rpb24gdG8gY2xpY2sgJ0NvbmZpcm0nIGJ1dHRvbgogICAqLwoKICBjb25zdCBjbGlja0NvbmZpcm0gPSAoKSA9PiBnZXRDb25maXJtQnV0dG9uKCkgJiYgZ2V0Q29uZmlybUJ1dHRvbigpLmNsaWNrKCk7CiAgLyoKICAgKiBHbG9iYWwgZnVuY3Rpb24gdG8gY2xpY2sgJ0RlbnknIGJ1dHRvbgogICAqLwoKICBjb25zdCBjbGlja0RlbnkgPSAoKSA9PiBnZXREZW55QnV0dG9uKCkgJiYgZ2V0RGVueUJ1dHRvbigpLmNsaWNrKCk7CiAgLyoKICAgKiBHbG9iYWwgZnVuY3Rpb24gdG8gY2xpY2sgJ0NhbmNlbCcgYnV0dG9uCiAgICovCgogIGNvbnN0IGNsaWNrQ2FuY2VsID0gKCkgPT4gZ2V0Q2FuY2VsQnV0dG9uKCkgJiYgZ2V0Q2FuY2VsQnV0dG9uKCkuY2xpY2soKTsKCiAgZnVuY3Rpb24gZmlyZSgpIHsKICAgIGNvbnN0IFN3YWwgPSB0aGlzOwoKICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICBhcmdzW19rZXldID0gYXJndW1lbnRzW19rZXldOwogICAgfQoKICAgIHJldHVybiBuZXcgU3dhbCguLi5hcmdzKTsKICB9CgogIC8qKgogICAqIFJldHVybnMgYW4gZXh0ZW5kZWQgdmVyc2lvbiBvZiBgU3dhbGAgY29udGFpbmluZyBgcGFyYW1zYCBhcyBkZWZhdWx0cy4KICAgKiBVc2VmdWwgZm9yIHJldXNpbmcgU3dhbCBjb25maWd1cmF0aW9uLgogICAqCiAgICogRm9yIGV4YW1wbGU6CiAgICoKICAgKiBCZWZvcmU6CiAgICogY29uc3QgdGV4dFByb21wdE9wdGlvbnMgPSB7IGlucHV0OiAndGV4dCcsIHNob3dDYW5jZWxCdXR0b246IHRydWUgfQogICAqIGNvbnN0IHt2YWx1ZTogZmlyc3ROYW1lfSA9IGF3YWl0IFN3YWwuZmlyZSh7IC4uLnRleHRQcm9tcHRPcHRpb25zLCB0aXRsZTogJ1doYXQgaXMgeW91ciBmaXJzdCBuYW1lPycgfSkKICAgKiBjb25zdCB7dmFsdWU6IGxhc3ROYW1lfSA9IGF3YWl0IFN3YWwuZmlyZSh7IC4uLnRleHRQcm9tcHRPcHRpb25zLCB0aXRsZTogJ1doYXQgaXMgeW91ciBsYXN0IG5hbWU/JyB9KQogICAqCiAgICogQWZ0ZXI6CiAgICogY29uc3QgVGV4dFByb21wdCA9IFN3YWwubWl4aW4oeyBpbnB1dDogJ3RleHQnLCBzaG93Q2FuY2VsQnV0dG9uOiB0cnVlIH0pCiAgICogY29uc3Qge3ZhbHVlOiBmaXJzdE5hbWV9ID0gYXdhaXQgVGV4dFByb21wdCgnV2hhdCBpcyB5b3VyIGZpcnN0IG5hbWU/JykKICAgKiBjb25zdCB7dmFsdWU6IGxhc3ROYW1lfSA9IGF3YWl0IFRleHRQcm9tcHQoJ1doYXQgaXMgeW91ciBsYXN0IG5hbWU/JykKICAgKgogICAqIEBwYXJhbSBtaXhpblBhcmFtcwogICAqLwogIGZ1bmN0aW9uIG1peGluKG1peGluUGFyYW1zKSB7CiAgICBjbGFzcyBNaXhpblN3YWwgZXh0ZW5kcyB0aGlzIHsKICAgICAgX21haW4ocGFyYW1zLCBwcmlvcml0eU1peGluUGFyYW1zKSB7CiAgICAgICAgcmV0dXJuIHN1cGVyLl9tYWluKHBhcmFtcywgT2JqZWN0LmFzc2lnbih7fSwgbWl4aW5QYXJhbXMsIHByaW9yaXR5TWl4aW5QYXJhbXMpKTsKICAgICAgfQoKICAgIH0KCiAgICByZXR1cm4gTWl4aW5Td2FsOwogIH0KCiAgLyoqCiAgICogU2hvd3MgbG9hZGVyIChzcGlubmVyKSwgdGhpcyBpcyB1c2VmdWwgd2l0aCBBSkFYIHJlcXVlc3RzLgogICAqIEJ5IGRlZmF1bHQgdGhlIGxvYWRlciBiZSBzaG93biBpbnN0ZWFkIG9mIHRoZSAiQ29uZmlybSIgYnV0dG9uLgogICAqLwoKICBjb25zdCBzaG93TG9hZGluZyA9IGJ1dHRvblRvUmVwbGFjZSA9PiB7CiAgICBsZXQgcG9wdXAgPSBnZXRQb3B1cCgpOwoKICAgIGlmICghcG9wdXApIHsKICAgICAgU3dhbC5maXJlKCk7CiAgICB9CgogICAgcG9wdXAgPSBnZXRQb3B1cCgpOwogICAgY29uc3QgbG9hZGVyID0gZ2V0TG9hZGVyKCk7CgogICAgaWYgKGlzVG9hc3QoKSkgewogICAgICBoaWRlKGdldEljb24oKSk7CiAgICB9IGVsc2UgewogICAgICByZXBsYWNlQnV0dG9uKHBvcHVwLCBidXR0b25Ub1JlcGxhY2UpOwogICAgfQoKICAgIHNob3cobG9hZGVyKTsKICAgIHBvcHVwLnNldEF0dHJpYnV0ZSgnZGF0YS1sb2FkaW5nJywgdHJ1ZSk7CiAgICBwb3B1cC5zZXRBdHRyaWJ1dGUoJ2FyaWEtYnVzeScsIHRydWUpOwogICAgcG9wdXAuZm9jdXMoKTsKICB9OwoKICBjb25zdCByZXBsYWNlQnV0dG9uID0gKHBvcHVwLCBidXR0b25Ub1JlcGxhY2UpID0+IHsKICAgIGNvbnN0IGFjdGlvbnMgPSBnZXRBY3Rpb25zKCk7CiAgICBjb25zdCBsb2FkZXIgPSBnZXRMb2FkZXIoKTsKCiAgICBpZiAoIWJ1dHRvblRvUmVwbGFjZSAmJiBpc1Zpc2libGUoZ2V0Q29uZmlybUJ1dHRvbigpKSkgewogICAgICBidXR0b25Ub1JlcGxhY2UgPSBnZXRDb25maXJtQnV0dG9uKCk7CiAgICB9CgogICAgc2hvdyhhY3Rpb25zKTsKCiAgICBpZiAoYnV0dG9uVG9SZXBsYWNlKSB7CiAgICAgIGhpZGUoYnV0dG9uVG9SZXBsYWNlKTsKICAgICAgbG9hZGVyLnNldEF0dHJpYnV0ZSgnZGF0YS1idXR0b24tdG8tcmVwbGFjZScsIGJ1dHRvblRvUmVwbGFjZS5jbGFzc05hbWUpOwogICAgfQoKICAgIGxvYWRlci5wYXJlbnROb2RlLmluc2VydEJlZm9yZShsb2FkZXIsIGJ1dHRvblRvUmVwbGFjZSk7CiAgICBhZGRDbGFzcyhbcG9wdXAsIGFjdGlvbnNdLCBzd2FsQ2xhc3Nlcy5sb2FkaW5nKTsKICB9OwoKICBjb25zdCBSRVNUT1JFX0ZPQ1VTX1RJTUVPVVQgPSAxMDA7CgogIGNvbnN0IGdsb2JhbFN0YXRlID0ge307CgogIGNvbnN0IGZvY3VzUHJldmlvdXNBY3RpdmVFbGVtZW50ID0gKCkgPT4gewogICAgaWYgKGdsb2JhbFN0YXRlLnByZXZpb3VzQWN0aXZlRWxlbWVudCAmJiBnbG9iYWxTdGF0ZS5wcmV2aW91c0FjdGl2ZUVsZW1lbnQuZm9jdXMpIHsKICAgICAgZ2xvYmFsU3RhdGUucHJldmlvdXNBY3RpdmVFbGVtZW50LmZvY3VzKCk7CiAgICAgIGdsb2JhbFN0YXRlLnByZXZpb3VzQWN0aXZlRWxlbWVudCA9IG51bGw7CiAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmJvZHkpIHsKICAgICAgZG9jdW1lbnQuYm9keS5mb2N1cygpOwogICAgfQogIH07IC8vIFJlc3RvcmUgcHJldmlvdXMgYWN0aXZlIChmb2N1c2VkKSBlbGVtZW50CgoKICBjb25zdCByZXN0b3JlQWN0aXZlRWxlbWVudCA9IHJldHVybkZvY3VzID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHsKICAgICAgaWYgKCFyZXR1cm5Gb2N1cykgewogICAgICAgIHJldHVybiByZXNvbHZlKCk7CiAgICAgIH0KCiAgICAgIGNvbnN0IHggPSB3aW5kb3cuc2Nyb2xsWDsKICAgICAgY29uc3QgeSA9IHdpbmRvdy5zY3JvbGxZOwogICAgICBnbG9iYWxTdGF0ZS5yZXN0b3JlRm9jdXNUaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgZm9jdXNQcmV2aW91c0FjdGl2ZUVsZW1lbnQoKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0sIFJFU1RPUkVfRk9DVVNfVElNRU9VVCk7IC8vIGlzc3Vlcy85MDAKCiAgICAgIHdpbmRvdy5zY3JvbGxUbyh4LCB5KTsKICAgIH0pOwogIH07CgogIC8qKgogICAqIElmIGB0aW1lcmAgcGFyYW1ldGVyIGlzIHNldCwgcmV0dXJucyBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIG9mIHRpbWVyIHJlbWFpbmVkLgogICAqIE90aGVyd2lzZSwgcmV0dXJucyB1bmRlZmluZWQuCiAgICovCgogIGNvbnN0IGdldFRpbWVyTGVmdCA9ICgpID0+IHsKICAgIHJldHVybiBnbG9iYWxTdGF0ZS50aW1lb3V0ICYmIGdsb2JhbFN0YXRlLnRpbWVvdXQuZ2V0VGltZXJMZWZ0KCk7CiAgfTsKICAvKioKICAgKiBTdG9wIHRpbWVyLiBSZXR1cm5zIG51bWJlciBvZiBtaWxsaXNlY29uZHMgb2YgdGltZXIgcmVtYWluZWQuCiAgICogSWYgYHRpbWVyYCBwYXJhbWV0ZXIgaXNuJ3Qgc2V0LCByZXR1cm5zIHVuZGVmaW5lZC4KICAgKi8KCiAgY29uc3Qgc3RvcFRpbWVyID0gKCkgPT4gewogICAgaWYgKGdsb2JhbFN0YXRlLnRpbWVvdXQpIHsKICAgICAgc3RvcFRpbWVyUHJvZ3Jlc3NCYXIoKTsKICAgICAgcmV0dXJuIGdsb2JhbFN0YXRlLnRpbWVvdXQuc3RvcCgpOwogICAgfQogIH07CiAgLyoqCiAgICogUmVzdW1lIHRpbWVyLiBSZXR1cm5zIG51bWJlciBvZiBtaWxsaXNlY29uZHMgb2YgdGltZXIgcmVtYWluZWQuCiAgICogSWYgYHRpbWVyYCBwYXJhbWV0ZXIgaXNuJ3Qgc2V0LCByZXR1cm5zIHVuZGVmaW5lZC4KICAgKi8KCiAgY29uc3QgcmVzdW1lVGltZXIgPSAoKSA9PiB7CiAgICBpZiAoZ2xvYmFsU3RhdGUudGltZW91dCkgewogICAgICBjb25zdCByZW1haW5pbmcgPSBnbG9iYWxTdGF0ZS50aW1lb3V0LnN0YXJ0KCk7CiAgICAgIGFuaW1hdGVUaW1lclByb2dyZXNzQmFyKHJlbWFpbmluZyk7CiAgICAgIHJldHVybiByZW1haW5pbmc7CiAgICB9CiAgfTsKICAvKioKICAgKiBSZXN1bWUgdGltZXIuIFJldHVybnMgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBvZiB0aW1lciByZW1haW5lZC4KICAgKiBJZiBgdGltZXJgIHBhcmFtZXRlciBpc24ndCBzZXQsIHJldHVybnMgdW5kZWZpbmVkLgogICAqLwoKICBjb25zdCB0b2dnbGVUaW1lciA9ICgpID0+IHsKICAgIGNvbnN0IHRpbWVyID0gZ2xvYmFsU3RhdGUudGltZW91dDsKICAgIHJldHVybiB0aW1lciAmJiAodGltZXIucnVubmluZyA/IHN0b3BUaW1lcigpIDogcmVzdW1lVGltZXIoKSk7CiAgfTsKICAvKioKICAgKiBJbmNyZWFzZSB0aW1lci4gUmV0dXJucyBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIG9mIGFuIHVwZGF0ZWQgdGltZXIuCiAgICogSWYgYHRpbWVyYCBwYXJhbWV0ZXIgaXNuJ3Qgc2V0LCByZXR1cm5zIHVuZGVmaW5lZC4KICAgKi8KCiAgY29uc3QgaW5jcmVhc2VUaW1lciA9IG4gPT4gewogICAgaWYgKGdsb2JhbFN0YXRlLnRpbWVvdXQpIHsKICAgICAgY29uc3QgcmVtYWluaW5nID0gZ2xvYmFsU3RhdGUudGltZW91dC5pbmNyZWFzZShuKTsKICAgICAgYW5pbWF0ZVRpbWVyUHJvZ3Jlc3NCYXIocmVtYWluaW5nLCB0cnVlKTsKICAgICAgcmV0dXJuIHJlbWFpbmluZzsKICAgIH0KICB9OwogIC8qKgogICAqIENoZWNrIGlmIHRpbWVyIGlzIHJ1bm5pbmcuIFJldHVybnMgdHJ1ZSBpZiB0aW1lciBpcyBydW5uaW5nCiAgICogb3IgZmFsc2UgaWYgdGltZXIgaXMgcGF1c2VkIG9yIHN0b3BwZWQuCiAgICogSWYgYHRpbWVyYCBwYXJhbWV0ZXIgaXNuJ3Qgc2V0LCByZXR1cm5zIHVuZGVmaW5lZAogICAqLwoKICBjb25zdCBpc1RpbWVyUnVubmluZyA9ICgpID0+IHsKICAgIHJldHVybiBnbG9iYWxTdGF0ZS50aW1lb3V0ICYmIGdsb2JhbFN0YXRlLnRpbWVvdXQuaXNSdW5uaW5nKCk7CiAgfTsKCiAgbGV0IGJvZHlDbGlja0xpc3RlbmVyQWRkZWQgPSBmYWxzZTsKICBjb25zdCBjbGlja0hhbmRsZXJzID0ge307CiAgZnVuY3Rpb24gYmluZENsaWNrSGFuZGxlcigpIHsKICAgIGxldCBhdHRyID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnZGF0YS1zd2FsLXRlbXBsYXRlJzsKICAgIGNsaWNrSGFuZGxlcnNbYXR0cl0gPSB0aGlzOwoKICAgIGlmICghYm9keUNsaWNrTGlzdGVuZXJBZGRlZCkgewogICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYm9keUNsaWNrTGlzdGVuZXIpOwogICAgICBib2R5Q2xpY2tMaXN0ZW5lckFkZGVkID0gdHJ1ZTsKICAgIH0KICB9CgogIGNvbnN0IGJvZHlDbGlja0xpc3RlbmVyID0gZXZlbnQgPT4gewogICAgZm9yIChsZXQgZWwgPSBldmVudC50YXJnZXQ7IGVsICYmIGVsICE9PSBkb2N1bWVudDsgZWwgPSBlbC5wYXJlbnROb2RlKSB7CiAgICAgIGZvciAoY29uc3QgYXR0ciBpbiBjbGlja0hhbmRsZXJzKSB7CiAgICAgICAgY29uc3QgdGVtcGxhdGUgPSBlbC5nZXRBdHRyaWJ1dGUoYXR0cik7CgogICAgICAgIGlmICh0ZW1wbGF0ZSkgewogICAgICAgICAgY2xpY2tIYW5kbGVyc1thdHRyXS5maXJlKHsKICAgICAgICAgICAgdGVtcGxhdGUKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH07CgogIGNvbnN0IGRlZmF1bHRQYXJhbXMgPSB7CiAgICB0aXRsZTogJycsCiAgICB0aXRsZVRleHQ6ICcnLAogICAgdGV4dDogJycsCiAgICBodG1sOiAnJywKICAgIGZvb3RlcjogJycsCiAgICBpY29uOiB1bmRlZmluZWQsCiAgICBpY29uQ29sb3I6IHVuZGVmaW5lZCwKICAgIGljb25IdG1sOiB1bmRlZmluZWQsCiAgICB0ZW1wbGF0ZTogdW5kZWZpbmVkLAogICAgdG9hc3Q6IGZhbHNlLAogICAgc2hvd0NsYXNzOiB7CiAgICAgIHBvcHVwOiAnc3dhbDItc2hvdycsCiAgICAgIGJhY2tkcm9wOiAnc3dhbDItYmFja2Ryb3Atc2hvdycsCiAgICAgIGljb246ICdzd2FsMi1pY29uLXNob3cnCiAgICB9LAogICAgaGlkZUNsYXNzOiB7CiAgICAgIHBvcHVwOiAnc3dhbDItaGlkZScsCiAgICAgIGJhY2tkcm9wOiAnc3dhbDItYmFja2Ryb3AtaGlkZScsCiAgICAgIGljb246ICdzd2FsMi1pY29uLWhpZGUnCiAgICB9LAogICAgY3VzdG9tQ2xhc3M6IHt9LAogICAgdGFyZ2V0OiAnYm9keScsCiAgICBjb2xvcjogdW5kZWZpbmVkLAogICAgYmFja2Ryb3A6IHRydWUsCiAgICBoZWlnaHRBdXRvOiB0cnVlLAogICAgYWxsb3dPdXRzaWRlQ2xpY2s6IHRydWUsCiAgICBhbGxvd0VzY2FwZUtleTogdHJ1ZSwKICAgIGFsbG93RW50ZXJLZXk6IHRydWUsCiAgICBzdG9wS2V5ZG93blByb3BhZ2F0aW9uOiB0cnVlLAogICAga2V5ZG93bkxpc3RlbmVyQ2FwdHVyZTogZmFsc2UsCiAgICBzaG93Q29uZmlybUJ1dHRvbjogdHJ1ZSwKICAgIHNob3dEZW55QnV0dG9uOiBmYWxzZSwKICAgIHNob3dDYW5jZWxCdXR0b246IGZhbHNlLAogICAgcHJlQ29uZmlybTogdW5kZWZpbmVkLAogICAgcHJlRGVueTogdW5kZWZpbmVkLAogICAgY29uZmlybUJ1dHRvblRleHQ6ICdPSycsCiAgICBjb25maXJtQnV0dG9uQXJpYUxhYmVsOiAnJywKICAgIGNvbmZpcm1CdXR0b25Db2xvcjogdW5kZWZpbmVkLAogICAgZGVueUJ1dHRvblRleHQ6ICdObycsCiAgICBkZW55QnV0dG9uQXJpYUxhYmVsOiAnJywKICAgIGRlbnlCdXR0b25Db2xvcjogdW5kZWZpbmVkLAogICAgY2FuY2VsQnV0dG9uVGV4dDogJ0NhbmNlbCcsCiAgICBjYW5jZWxCdXR0b25BcmlhTGFiZWw6ICcnLAogICAgY2FuY2VsQnV0dG9uQ29sb3I6IHVuZGVmaW5lZCwKICAgIGJ1dHRvbnNTdHlsaW5nOiB0cnVlLAogICAgcmV2ZXJzZUJ1dHRvbnM6IGZhbHNlLAogICAgZm9jdXNDb25maXJtOiB0cnVlLAogICAgZm9jdXNEZW55OiBmYWxzZSwKICAgIGZvY3VzQ2FuY2VsOiBmYWxzZSwKICAgIHJldHVybkZvY3VzOiB0cnVlLAogICAgc2hvd0Nsb3NlQnV0dG9uOiBmYWxzZSwKICAgIGNsb3NlQnV0dG9uSHRtbDogJyZ0aW1lczsnLAogICAgY2xvc2VCdXR0b25BcmlhTGFiZWw6ICdDbG9zZSB0aGlzIGRpYWxvZycsCiAgICBsb2FkZXJIdG1sOiAnJywKICAgIHNob3dMb2FkZXJPbkNvbmZpcm06IGZhbHNlLAogICAgc2hvd0xvYWRlck9uRGVueTogZmFsc2UsCiAgICBpbWFnZVVybDogdW5kZWZpbmVkLAogICAgaW1hZ2VXaWR0aDogdW5kZWZpbmVkLAogICAgaW1hZ2VIZWlnaHQ6IHVuZGVmaW5lZCwKICAgIGltYWdlQWx0OiAnJywKICAgIHRpbWVyOiB1bmRlZmluZWQsCiAgICB0aW1lclByb2dyZXNzQmFyOiBmYWxzZSwKICAgIHdpZHRoOiB1bmRlZmluZWQsCiAgICBwYWRkaW5nOiB1bmRlZmluZWQsCiAgICBiYWNrZ3JvdW5kOiB1bmRlZmluZWQsCiAgICBpbnB1dDogdW5kZWZpbmVkLAogICAgaW5wdXRQbGFjZWhvbGRlcjogJycsCiAgICBpbnB1dExhYmVsOiAnJywKICAgIGlucHV0VmFsdWU6ICcnLAogICAgaW5wdXRPcHRpb25zOiB7fSwKICAgIGlucHV0QXV0b1RyaW06IHRydWUsCiAgICBpbnB1dEF0dHJpYnV0ZXM6IHt9LAogICAgaW5wdXRWYWxpZGF0b3I6IHVuZGVmaW5lZCwKICAgIHJldHVybklucHV0VmFsdWVPbkRlbnk6IGZhbHNlLAogICAgdmFsaWRhdGlvbk1lc3NhZ2U6IHVuZGVmaW5lZCwKICAgIGdyb3c6IGZhbHNlLAogICAgcG9zaXRpb246ICdjZW50ZXInLAogICAgcHJvZ3Jlc3NTdGVwczogW10sCiAgICBjdXJyZW50UHJvZ3Jlc3NTdGVwOiB1bmRlZmluZWQsCiAgICBwcm9ncmVzc1N0ZXBzRGlzdGFuY2U6IHVuZGVmaW5lZCwKICAgIHdpbGxPcGVuOiB1bmRlZmluZWQsCiAgICBkaWRPcGVuOiB1bmRlZmluZWQsCiAgICBkaWRSZW5kZXI6IHVuZGVmaW5lZCwKICAgIHdpbGxDbG9zZTogdW5kZWZpbmVkLAogICAgZGlkQ2xvc2U6IHVuZGVmaW5lZCwKICAgIGRpZERlc3Ryb3k6IHVuZGVmaW5lZCwKICAgIHNjcm9sbGJhclBhZGRpbmc6IHRydWUKICB9OwogIGNvbnN0IHVwZGF0YWJsZVBhcmFtcyA9IFsnYWxsb3dFc2NhcGVLZXknLCAnYWxsb3dPdXRzaWRlQ2xpY2snLCAnYmFja2dyb3VuZCcsICdidXR0b25zU3R5bGluZycsICdjYW5jZWxCdXR0b25BcmlhTGFiZWwnLCAnY2FuY2VsQnV0dG9uQ29sb3InLCAnY2FuY2VsQnV0dG9uVGV4dCcsICdjbG9zZUJ1dHRvbkFyaWFMYWJlbCcsICdjbG9zZUJ1dHRvbkh0bWwnLCAnY29sb3InLCAnY29uZmlybUJ1dHRvbkFyaWFMYWJlbCcsICdjb25maXJtQnV0dG9uQ29sb3InLCAnY29uZmlybUJ1dHRvblRleHQnLCAnY3VycmVudFByb2dyZXNzU3RlcCcsICdjdXN0b21DbGFzcycsICdkZW55QnV0dG9uQXJpYUxhYmVsJywgJ2RlbnlCdXR0b25Db2xvcicsICdkZW55QnV0dG9uVGV4dCcsICdkaWRDbG9zZScsICdkaWREZXN0cm95JywgJ2Zvb3RlcicsICdoaWRlQ2xhc3MnLCAnaHRtbCcsICdpY29uJywgJ2ljb25Db2xvcicsICdpY29uSHRtbCcsICdpbWFnZUFsdCcsICdpbWFnZUhlaWdodCcsICdpbWFnZVVybCcsICdpbWFnZVdpZHRoJywgJ3ByZUNvbmZpcm0nLCAncHJlRGVueScsICdwcm9ncmVzc1N0ZXBzJywgJ3JldHVybkZvY3VzJywgJ3JldmVyc2VCdXR0b25zJywgJ3Nob3dDYW5jZWxCdXR0b24nLCAnc2hvd0Nsb3NlQnV0dG9uJywgJ3Nob3dDb25maXJtQnV0dG9uJywgJ3Nob3dEZW55QnV0dG9uJywgJ3RleHQnLCAndGl0bGUnLCAndGl0bGVUZXh0JywgJ3dpbGxDbG9zZSddOwogIGNvbnN0IGRlcHJlY2F0ZWRQYXJhbXMgPSB7fTsKICBjb25zdCB0b2FzdEluY29tcGF0aWJsZVBhcmFtcyA9IFsnYWxsb3dPdXRzaWRlQ2xpY2snLCAnYWxsb3dFbnRlcktleScsICdiYWNrZHJvcCcsICdmb2N1c0NvbmZpcm0nLCAnZm9jdXNEZW55JywgJ2ZvY3VzQ2FuY2VsJywgJ3JldHVybkZvY3VzJywgJ2hlaWdodEF1dG8nLCAna2V5ZG93bkxpc3RlbmVyQ2FwdHVyZSddOwogIC8qKgogICAqIElzIHZhbGlkIHBhcmFtZXRlcgogICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJhbU5hbWUKICAgKi8KCiAgY29uc3QgaXNWYWxpZFBhcmFtZXRlciA9IHBhcmFtTmFtZSA9PiB7CiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGRlZmF1bHRQYXJhbXMsIHBhcmFtTmFtZSk7CiAgfTsKICAvKioKICAgKiBJcyB2YWxpZCBwYXJhbWV0ZXIgZm9yIFN3YWwudXBkYXRlKCkgbWV0aG9kCiAgICogQHBhcmFtIHtTdHJpbmd9IHBhcmFtTmFtZQogICAqLwoKICBjb25zdCBpc1VwZGF0YWJsZVBhcmFtZXRlciA9IHBhcmFtTmFtZSA9PiB7CiAgICByZXR1cm4gdXBkYXRhYmxlUGFyYW1zLmluZGV4T2YocGFyYW1OYW1lKSAhPT0gLTE7CiAgfTsKICAvKioKICAgKiBJcyBkZXByZWNhdGVkIHBhcmFtZXRlcgogICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJhbU5hbWUKICAgKi8KCiAgY29uc3QgaXNEZXByZWNhdGVkUGFyYW1ldGVyID0gcGFyYW1OYW1lID0+IHsKICAgIHJldHVybiBkZXByZWNhdGVkUGFyYW1zW3BhcmFtTmFtZV07CiAgfTsKCiAgY29uc3QgY2hlY2tJZlBhcmFtSXNWYWxpZCA9IHBhcmFtID0+IHsKICAgIGlmICghaXNWYWxpZFBhcmFtZXRlcihwYXJhbSkpIHsKICAgICAgd2FybigiVW5rbm93biBwYXJhbWV0ZXIgXCIiLmNvbmNhdChwYXJhbSwgIlwiIikpOwogICAgfQogIH07CgogIGNvbnN0IGNoZWNrSWZUb2FzdFBhcmFtSXNWYWxpZCA9IHBhcmFtID0+IHsKICAgIGlmICh0b2FzdEluY29tcGF0aWJsZVBhcmFtcy5pbmNsdWRlcyhwYXJhbSkpIHsKICAgICAgd2FybigiVGhlIHBhcmFtZXRlciBcIiIuY29uY2F0KHBhcmFtLCAiXCIgaXMgaW5jb21wYXRpYmxlIHdpdGggdG9hc3RzIikpOwogICAgfQogIH07CgogIGNvbnN0IGNoZWNrSWZQYXJhbUlzRGVwcmVjYXRlZCA9IHBhcmFtID0+IHsKICAgIGlmIChpc0RlcHJlY2F0ZWRQYXJhbWV0ZXIocGFyYW0pKSB7CiAgICAgIHdhcm5BYm91dERlcHJlY2F0aW9uKHBhcmFtLCBpc0RlcHJlY2F0ZWRQYXJhbWV0ZXIocGFyYW0pKTsKICAgIH0KICB9OwogIC8qKgogICAqIFNob3cgcmVsZXZhbnQgd2FybmluZ3MgZm9yIGdpdmVuIHBhcmFtcwogICAqCiAgICogQHBhcmFtIHBhcmFtcwogICAqLwoKCiAgY29uc3Qgc2hvd1dhcm5pbmdzRm9yUGFyYW1zID0gcGFyYW1zID0+IHsKICAgIGlmICghcGFyYW1zLmJhY2tkcm9wICYmIHBhcmFtcy5hbGxvd091dHNpZGVDbGljaykgewogICAgICB3YXJuKCciYWxsb3dPdXRzaWRlQ2xpY2siIHBhcmFtZXRlciByZXF1aXJlcyBgYmFja2Ryb3BgIHBhcmFtZXRlciB0byBiZSBzZXQgdG8gYHRydWVgJyk7CiAgICB9CgogICAgZm9yIChjb25zdCBwYXJhbSBpbiBwYXJhbXMpIHsKICAgICAgY2hlY2tJZlBhcmFtSXNWYWxpZChwYXJhbSk7CgogICAgICBpZiAocGFyYW1zLnRvYXN0KSB7CiAgICAgICAgY2hlY2tJZlRvYXN0UGFyYW1Jc1ZhbGlkKHBhcmFtKTsKICAgICAgfQoKICAgICAgY2hlY2tJZlBhcmFtSXNEZXByZWNhdGVkKHBhcmFtKTsKICAgIH0KICB9OwoKCgogIHZhciBzdGF0aWNNZXRob2RzID0gLyojX19QVVJFX18qL09iamVjdC5mcmVlemUoewogICAgaXNWYWxpZFBhcmFtZXRlcjogaXNWYWxpZFBhcmFtZXRlciwKICAgIGlzVXBkYXRhYmxlUGFyYW1ldGVyOiBpc1VwZGF0YWJsZVBhcmFtZXRlciwKICAgIGlzRGVwcmVjYXRlZFBhcmFtZXRlcjogaXNEZXByZWNhdGVkUGFyYW1ldGVyLAogICAgYXJnc1RvUGFyYW1zOiBhcmdzVG9QYXJhbXMsCiAgICBpc1Zpc2libGU6IGlzVmlzaWJsZSQxLAogICAgY2xpY2tDb25maXJtOiBjbGlja0NvbmZpcm0sCiAgICBjbGlja0Rlbnk6IGNsaWNrRGVueSwKICAgIGNsaWNrQ2FuY2VsOiBjbGlja0NhbmNlbCwKICAgIGdldENvbnRhaW5lcjogZ2V0Q29udGFpbmVyLAogICAgZ2V0UG9wdXA6IGdldFBvcHVwLAogICAgZ2V0VGl0bGU6IGdldFRpdGxlLAogICAgZ2V0SHRtbENvbnRhaW5lcjogZ2V0SHRtbENvbnRhaW5lciwKICAgIGdldEltYWdlOiBnZXRJbWFnZSwKICAgIGdldEljb246IGdldEljb24sCiAgICBnZXRJbnB1dExhYmVsOiBnZXRJbnB1dExhYmVsLAogICAgZ2V0Q2xvc2VCdXR0b246IGdldENsb3NlQnV0dG9uLAogICAgZ2V0QWN0aW9uczogZ2V0QWN0aW9ucywKICAgIGdldENvbmZpcm1CdXR0b246IGdldENvbmZpcm1CdXR0b24sCiAgICBnZXREZW55QnV0dG9uOiBnZXREZW55QnV0dG9uLAogICAgZ2V0Q2FuY2VsQnV0dG9uOiBnZXRDYW5jZWxCdXR0b24sCiAgICBnZXRMb2FkZXI6IGdldExvYWRlciwKICAgIGdldEZvb3RlcjogZ2V0Rm9vdGVyLAogICAgZ2V0VGltZXJQcm9ncmVzc0JhcjogZ2V0VGltZXJQcm9ncmVzc0JhciwKICAgIGdldEZvY3VzYWJsZUVsZW1lbnRzOiBnZXRGb2N1c2FibGVFbGVtZW50cywKICAgIGdldFZhbGlkYXRpb25NZXNzYWdlOiBnZXRWYWxpZGF0aW9uTWVzc2FnZSwKICAgIGlzTG9hZGluZzogaXNMb2FkaW5nLAogICAgZmlyZTogZmlyZSwKICAgIG1peGluOiBtaXhpbiwKICAgIHNob3dMb2FkaW5nOiBzaG93TG9hZGluZywKICAgIGVuYWJsZUxvYWRpbmc6IHNob3dMb2FkaW5nLAogICAgZ2V0VGltZXJMZWZ0OiBnZXRUaW1lckxlZnQsCiAgICBzdG9wVGltZXI6IHN0b3BUaW1lciwKICAgIHJlc3VtZVRpbWVyOiByZXN1bWVUaW1lciwKICAgIHRvZ2dsZVRpbWVyOiB0b2dnbGVUaW1lciwKICAgIGluY3JlYXNlVGltZXI6IGluY3JlYXNlVGltZXIsCiAgICBpc1RpbWVyUnVubmluZzogaXNUaW1lclJ1bm5pbmcsCiAgICBiaW5kQ2xpY2tIYW5kbGVyOiBiaW5kQ2xpY2tIYW5kbGVyCiAgfSk7CgogIC8qKgogICAqIEhpZGVzIGxvYWRlciBhbmQgc2hvd3MgYmFjayB0aGUgYnV0dG9uIHdoaWNoIHdhcyBoaWRkZW4gYnkgLnNob3dMb2FkaW5nKCkKICAgKi8KCiAgZnVuY3Rpb24gaGlkZUxvYWRpbmcoKSB7CiAgICAvLyBkbyBub3RoaW5nIGlmIHBvcHVwIGlzIGNsb3NlZAogICAgY29uc3QgaW5uZXJQYXJhbXMgPSBwcml2YXRlUHJvcHMuaW5uZXJQYXJhbXMuZ2V0KHRoaXMpOwoKICAgIGlmICghaW5uZXJQYXJhbXMpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IGRvbUNhY2hlID0gcHJpdmF0ZVByb3BzLmRvbUNhY2hlLmdldCh0aGlzKTsKICAgIGhpZGUoZG9tQ2FjaGUubG9hZGVyKTsKCiAgICBpZiAoaXNUb2FzdCgpKSB7CiAgICAgIGlmIChpbm5lclBhcmFtcy5pY29uKSB7CiAgICAgICAgc2hvdyhnZXRJY29uKCkpOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBzaG93UmVsYXRlZEJ1dHRvbihkb21DYWNoZSk7CiAgICB9CgogICAgcmVtb3ZlQ2xhc3MoW2RvbUNhY2hlLnBvcHVwLCBkb21DYWNoZS5hY3Rpb25zXSwgc3dhbENsYXNzZXMubG9hZGluZyk7CiAgICBkb21DYWNoZS5wb3B1cC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtYnVzeScpOwogICAgZG9tQ2FjaGUucG9wdXAucmVtb3ZlQXR0cmlidXRlKCdkYXRhLWxvYWRpbmcnKTsKICAgIGRvbUNhY2hlLmNvbmZpcm1CdXR0b24uZGlzYWJsZWQgPSBmYWxzZTsKICAgIGRvbUNhY2hlLmRlbnlCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTsKICAgIGRvbUNhY2hlLmNhbmNlbEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlOwogIH0KCiAgY29uc3Qgc2hvd1JlbGF0ZWRCdXR0b24gPSBkb21DYWNoZSA9PiB7CiAgICBjb25zdCBidXR0b25Ub1JlcGxhY2UgPSBkb21DYWNoZS5wb3B1cC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGRvbUNhY2hlLmxvYWRlci5nZXRBdHRyaWJ1dGUoJ2RhdGEtYnV0dG9uLXRvLXJlcGxhY2UnKSk7CgogICAgaWYgKGJ1dHRvblRvUmVwbGFjZS5sZW5ndGgpIHsKICAgICAgc2hvdyhidXR0b25Ub1JlcGxhY2VbMF0sICdpbmxpbmUtYmxvY2snKTsKICAgIH0gZWxzZSBpZiAoYWxsQnV0dG9uc0FyZUhpZGRlbigpKSB7CiAgICAgIGhpZGUoZG9tQ2FjaGUuYWN0aW9ucyk7CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gZ2V0SW5wdXQkMShpbnN0YW5jZSkgewogICAgY29uc3QgaW5uZXJQYXJhbXMgPSBwcml2YXRlUHJvcHMuaW5uZXJQYXJhbXMuZ2V0KGluc3RhbmNlIHx8IHRoaXMpOwogICAgY29uc3QgZG9tQ2FjaGUgPSBwcml2YXRlUHJvcHMuZG9tQ2FjaGUuZ2V0KGluc3RhbmNlIHx8IHRoaXMpOwoKICAgIGlmICghZG9tQ2FjaGUpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CgogICAgcmV0dXJuIGdldElucHV0KGRvbUNhY2hlLnBvcHVwLCBpbm5lclBhcmFtcy5pbnB1dCk7CiAgfQoKICBjb25zdCBmaXhTY3JvbGxiYXIgPSAoKSA9PiB7CiAgICAvLyBmb3IgcXVldWVzLCBkbyBub3QgZG8gdGhpcyBtb3JlIHRoYW4gb25jZQogICAgaWYgKHN0YXRlcy5wcmV2aW91c0JvZHlQYWRkaW5nICE9PSBudWxsKSB7CiAgICAgIHJldHVybjsKICAgIH0gLy8gaWYgdGhlIGJvZHkgaGFzIG92ZXJmbG93CgoKICAgIGlmIChkb2N1bWVudC5ib2R5LnNjcm9sbEhlaWdodCA+IHdpbmRvdy5pbm5lckhlaWdodCkgewogICAgICAvLyBhZGQgcGFkZGluZyBzbyB0aGUgY29udGVudCBkb2Vzbid0IHNoaWZ0IGFmdGVyIHJlbW92YWwgb2Ygc2Nyb2xsYmFyCiAgICAgIHN0YXRlcy5wcmV2aW91c0JvZHlQYWRkaW5nID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuYm9keSkuZ2V0UHJvcGVydHlWYWx1ZSgncGFkZGluZy1yaWdodCcpKTsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5wYWRkaW5nUmlnaHQgPSAiIi5jb25jYXQoc3RhdGVzLnByZXZpb3VzQm9keVBhZGRpbmcgKyBtZWFzdXJlU2Nyb2xsYmFyKCksICJweCIpOwogICAgfQogIH07CiAgY29uc3QgdW5kb1Njcm9sbGJhciA9ICgpID0+IHsKICAgIGlmIChzdGF0ZXMucHJldmlvdXNCb2R5UGFkZGluZyAhPT0gbnVsbCkgewogICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBhZGRpbmdSaWdodCA9ICIiLmNvbmNhdChzdGF0ZXMucHJldmlvdXNCb2R5UGFkZGluZywgInB4Iik7CiAgICAgIHN0YXRlcy5wcmV2aW91c0JvZHlQYWRkaW5nID0gbnVsbDsKICAgIH0KICB9OwoKICAvKiBpc3RhbmJ1bCBpZ25vcmUgZmlsZSAqLwoKICBjb25zdCBpT1NmaXggPSAoKSA9PiB7CiAgICBjb25zdCBpT1MgPSAvaVBhZHxpUGhvbmV8aVBvZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhd2luZG93Lk1TU3RyZWFtIHx8IG5hdmlnYXRvci5wbGF0Zm9ybSA9PT0gJ01hY0ludGVsJyAmJiBuYXZpZ2F0b3IubWF4VG91Y2hQb2ludHMgPiAxOwoKICAgIGlmIChpT1MgJiYgIWhhc0NsYXNzKGRvY3VtZW50LmJvZHksIHN3YWxDbGFzc2VzLmlvc2ZpeCkpIHsKICAgICAgY29uc3Qgb2Zmc2V0ID0gZG9jdW1lbnQuYm9keS5zY3JvbGxUb3A7CiAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUudG9wID0gIiIuY29uY2F0KG9mZnNldCAqIC0xLCAicHgiKTsKICAgICAgYWRkQ2xhc3MoZG9jdW1lbnQuYm9keSwgc3dhbENsYXNzZXMuaW9zZml4KTsKICAgICAgbG9ja0JvZHlTY3JvbGwoKTsKICAgICAgYWRkQm90dG9tUGFkZGluZ0ZvclRhbGxQb3B1cHMoKTsgLy8gIzE5NDgKICAgIH0KICB9OwoKICBjb25zdCBhZGRCb3R0b21QYWRkaW5nRm9yVGFsbFBvcHVwcyA9ICgpID0+IHsKICAgIGNvbnN0IHNhZmFyaSA9ICFuYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC8oQ3JpT1N8RnhpT1N8RWRnaU9TfFlhQnJvd3NlcnxVQ0Jyb3dzZXIpL2kpOwoKICAgIGlmIChzYWZhcmkpIHsKICAgICAgY29uc3QgYm90dG9tUGFuZWxIZWlnaHQgPSA0NDsKCiAgICAgIGlmIChnZXRQb3B1cCgpLnNjcm9sbEhlaWdodCA+IHdpbmRvdy5pbm5lckhlaWdodCAtIGJvdHRvbVBhbmVsSGVpZ2h0KSB7CiAgICAgICAgZ2V0Q29udGFpbmVyKCkuc3R5bGUucGFkZGluZ0JvdHRvbSA9ICIiLmNvbmNhdChib3R0b21QYW5lbEhlaWdodCwgInB4Iik7CiAgICAgIH0KICAgIH0KICB9OwoKICBjb25zdCBsb2NrQm9keVNjcm9sbCA9ICgpID0+IHsKICAgIC8vICMxMjQ2CiAgICBjb25zdCBjb250YWluZXIgPSBnZXRDb250YWluZXIoKTsKICAgIGxldCBwcmV2ZW50VG91Y2hNb3ZlOwoKICAgIGNvbnRhaW5lci5vbnRvdWNoc3RhcnQgPSBlID0+IHsKICAgICAgcHJldmVudFRvdWNoTW92ZSA9IHNob3VsZFByZXZlbnRUb3VjaE1vdmUoZSk7CiAgICB9OwoKICAgIGNvbnRhaW5lci5vbnRvdWNobW92ZSA9IGUgPT4gewogICAgICBpZiAocHJldmVudFRvdWNoTW92ZSkgewogICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgICB9CiAgICB9OwogIH07CgogIGNvbnN0IHNob3VsZFByZXZlbnRUb3VjaE1vdmUgPSBldmVudCA9PiB7CiAgICBjb25zdCB0YXJnZXQgPSBldmVudC50YXJnZXQ7CiAgICBjb25zdCBjb250YWluZXIgPSBnZXRDb250YWluZXIoKTsKCiAgICBpZiAoaXNTdHlseXMoZXZlbnQpIHx8IGlzWm9vbShldmVudCkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGlmICh0YXJnZXQgPT09IGNvbnRhaW5lcikgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBpZiAoIWlzU2Nyb2xsYWJsZShjb250YWluZXIpICYmIHRhcmdldC50YWdOYW1lICE9PSAnSU5QVVQnICYmIC8vICMxNjAzCiAgICB0YXJnZXQudGFnTmFtZSAhPT0gJ1RFWFRBUkVBJyAmJiAvLyAjMjI2NgogICAgIShpc1Njcm9sbGFibGUoZ2V0SHRtbENvbnRhaW5lcigpKSAmJiAvLyAjMTk0NAogICAgZ2V0SHRtbENvbnRhaW5lcigpLmNvbnRhaW5zKHRhcmdldCkpKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIHJldHVybiBmYWxzZTsKICB9OwoKICBjb25zdCBpc1N0eWx5cyA9IGV2ZW50ID0+IHsKICAgIC8vICMxNzg2CiAgICByZXR1cm4gZXZlbnQudG91Y2hlcyAmJiBldmVudC50b3VjaGVzLmxlbmd0aCAmJiBldmVudC50b3VjaGVzWzBdLnRvdWNoVHlwZSA9PT0gJ3N0eWx1cyc7CiAgfTsKCiAgY29uc3QgaXNab29tID0gZXZlbnQgPT4gewogICAgLy8gIzE4OTEKICAgIHJldHVybiBldmVudC50b3VjaGVzICYmIGV2ZW50LnRvdWNoZXMubGVuZ3RoID4gMTsKICB9OwoKICBjb25zdCB1bmRvSU9TZml4ID0gKCkgPT4gewogICAgaWYgKGhhc0NsYXNzKGRvY3VtZW50LmJvZHksIHN3YWxDbGFzc2VzLmlvc2ZpeCkpIHsKICAgICAgY29uc3Qgb2Zmc2V0ID0gcGFyc2VJbnQoZG9jdW1lbnQuYm9keS5zdHlsZS50b3AsIDEwKTsKICAgICAgcmVtb3ZlQ2xhc3MoZG9jdW1lbnQuYm9keSwgc3dhbENsYXNzZXMuaW9zZml4KTsKICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS50b3AgPSAnJzsKICAgICAgZG9jdW1lbnQuYm9keS5zY3JvbGxUb3AgPSBvZmZzZXQgKiAtMTsKICAgIH0KICB9OwoKICAvLyBBZGRpbmcgYXJpYS1oaWRkZW49InRydWUiIHRvIGVsZW1lbnRzIG91dHNpZGUgb2YgdGhlIGFjdGl2ZSBtb2RhbCBkaWFsb2cgZW5zdXJlcyB0aGF0CiAgLy8gZWxlbWVudHMgbm90IHdpdGhpbiB0aGUgYWN0aXZlIG1vZGFsIGRpYWxvZyB3aWxsIG5vdCBiZSBzdXJmYWNlZCBpZiBhIHVzZXIgb3BlbnMgYSBzY3JlZW4KICAvLyByZWFkZXLigJlzIGxpc3Qgb2YgZWxlbWVudHMgKGhlYWRpbmdzLCBmb3JtIGNvbnRyb2xzLCBsYW5kbWFya3MsIGV0Yy4pIGluIHRoZSBkb2N1bWVudC4KCiAgY29uc3Qgc2V0QXJpYUhpZGRlbiA9ICgpID0+IHsKICAgIGNvbnN0IGJvZHlDaGlsZHJlbiA9IHRvQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7CiAgICBib2R5Q2hpbGRyZW4uZm9yRWFjaChlbCA9PiB7CiAgICAgIGlmIChlbCA9PT0gZ2V0Q29udGFpbmVyKCkgfHwgZWwuY29udGFpbnMoZ2V0Q29udGFpbmVyKCkpKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpKSB7CiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdkYXRhLXByZXZpb3VzLWFyaWEtaGlkZGVuJywgZWwuZ2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicpKTsKICAgICAgfQoKICAgICAgZWwuc2V0QXR0cmlidXRlKCdhcmlhLWhpZGRlbicsICd0cnVlJyk7CiAgICB9KTsKICB9OwogIGNvbnN0IHVuc2V0QXJpYUhpZGRlbiA9ICgpID0+IHsKICAgIGNvbnN0IGJvZHlDaGlsZHJlbiA9IHRvQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7CiAgICBib2R5Q2hpbGRyZW4uZm9yRWFjaChlbCA9PiB7CiAgICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2RhdGEtcHJldmlvdXMtYXJpYS1oaWRkZW4nKSkgewogICAgICAgIGVsLnNldEF0dHJpYnV0ZSgnYXJpYS1oaWRkZW4nLCBlbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcHJldmlvdXMtYXJpYS1oaWRkZW4nKSk7CiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdkYXRhLXByZXZpb3VzLWFyaWEtaGlkZGVuJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpOwogICAgICB9CiAgICB9KTsKICB9OwoKICAvKioKICAgKiBUaGlzIG1vZHVsZSBjb250YWlucyBgV2Vha01hcGBzIGZvciBlYWNoIGVmZmVjdGl2ZWx5LSJwcml2YXRlICBwcm9wZXJ0eSIgdGhhdCBhIGBTd2FsYCBoYXMuCiAgICogRm9yIGV4YW1wbGUsIHRvIHNldCB0aGUgcHJpdmF0ZSBwcm9wZXJ0eSAiZm9vIiBvZiBgdGhpc2AgdG8gImJhciIsIHlvdSBjYW4gYHByaXZhdGVQcm9wcy5mb28uc2V0KHRoaXMsICdiYXInKWAKICAgKiBUaGlzIGlzIHRoZSBhcHByb2FjaCB0aGF0IEJhYmVsIHdpbGwgcHJvYmFibHkgdGFrZSB0byBpbXBsZW1lbnQgcHJpdmF0ZSBtZXRob2RzL2ZpZWxkcwogICAqICAgaHR0cHM6Ly9naXRodWIuY29tL3RjMzkvcHJvcG9zYWwtcHJpdmF0ZS1tZXRob2RzCiAgICogICBodHRwczovL2dpdGh1Yi5jb20vYmFiZWwvYmFiZWwvcHVsbC83NTU1CiAgICogT25jZSB3ZSBoYXZlIHRoZSBjaGFuZ2VzIGZyb20gdGhhdCBQUiBpbiBCYWJlbCwgYW5kIG91ciBjb3JlIGNsYXNzIGZpdHMgcmVhc29uYWJsZSBpbiAqb25lIG1vZHVsZSoKICAgKiAgIHRoZW4gd2UgY2FuIHVzZSB0aGF0IGxhbmd1YWdlIGZlYXR1cmUuCiAgICovCiAgdmFyIHByaXZhdGVNZXRob2RzID0gewogICAgc3dhbFByb21pc2VSZXNvbHZlOiBuZXcgV2Vha01hcCgpLAogICAgc3dhbFByb21pc2VSZWplY3Q6IG5ldyBXZWFrTWFwKCkKICB9OwoKICAvKgogICAqIEluc3RhbmNlIG1ldGhvZCB0byBjbG9zZSBzd2VldEFsZXJ0CiAgICovCgogIGZ1bmN0aW9uIHJlbW92ZVBvcHVwQW5kUmVzZXRTdGF0ZShpbnN0YW5jZSwgY29udGFpbmVyLCByZXR1cm5Gb2N1cywgZGlkQ2xvc2UpIHsKICAgIGlmIChpc1RvYXN0KCkpIHsKICAgICAgdHJpZ2dlckRpZENsb3NlQW5kRGlzcG9zZShpbnN0YW5jZSwgZGlkQ2xvc2UpOwogICAgfSBlbHNlIHsKICAgICAgcmVzdG9yZUFjdGl2ZUVsZW1lbnQocmV0dXJuRm9jdXMpLnRoZW4oKCkgPT4gdHJpZ2dlckRpZENsb3NlQW5kRGlzcG9zZShpbnN0YW5jZSwgZGlkQ2xvc2UpKTsKICAgICAgZ2xvYmFsU3RhdGUua2V5ZG93blRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZ2xvYmFsU3RhdGUua2V5ZG93bkhhbmRsZXIsIHsKICAgICAgICBjYXB0dXJlOiBnbG9iYWxTdGF0ZS5rZXlkb3duTGlzdGVuZXJDYXB0dXJlCiAgICAgIH0pOwogICAgICBnbG9iYWxTdGF0ZS5rZXlkb3duSGFuZGxlckFkZGVkID0gZmFsc2U7CiAgICB9CgogICAgY29uc3QgaXNTYWZhcmkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpOyAvLyB3b3JrYXJvdW5kIGZvciAjMjA4OAogICAgLy8gZm9yIHNvbWUgcmVhc29uIHJlbW92aW5nIHRoZSBjb250YWluZXIgaW4gU2FmYXJpIHdpbGwgc2Nyb2xsIHRoZSBkb2N1bWVudCB0byBib3R0b20KCiAgICBpZiAoaXNTYWZhcmkpIHsKICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnZGlzcGxheTpub25lICFpbXBvcnRhbnQnKTsKICAgICAgY29udGFpbmVyLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTsKICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICcnOwogICAgfSBlbHNlIHsKICAgICAgY29udGFpbmVyLnJlbW92ZSgpOwogICAgfQoKICAgIGlmIChpc01vZGFsKCkpIHsKICAgICAgdW5kb1Njcm9sbGJhcigpOwogICAgICB1bmRvSU9TZml4KCk7CiAgICAgIHVuc2V0QXJpYUhpZGRlbigpOwogICAgfQoKICAgIHJlbW92ZUJvZHlDbGFzc2VzKCk7CiAgfQoKICBmdW5jdGlvbiByZW1vdmVCb2R5Q2xhc3NlcygpIHsKICAgIHJlbW92ZUNsYXNzKFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGRvY3VtZW50LmJvZHldLCBbc3dhbENsYXNzZXMuc2hvd24sIHN3YWxDbGFzc2VzWydoZWlnaHQtYXV0byddLCBzd2FsQ2xhc3Nlc1snbm8tYmFja2Ryb3AnXSwgc3dhbENsYXNzZXNbJ3RvYXN0LXNob3duJ11dKTsKICB9CgogIGZ1bmN0aW9uIGNsb3NlKHJlc29sdmVWYWx1ZSkgewogICAgcmVzb2x2ZVZhbHVlID0gcHJlcGFyZVJlc29sdmVWYWx1ZShyZXNvbHZlVmFsdWUpOwogICAgY29uc3Qgc3dhbFByb21pc2VSZXNvbHZlID0gcHJpdmF0ZU1ldGhvZHMuc3dhbFByb21pc2VSZXNvbHZlLmdldCh0aGlzKTsKICAgIGNvbnN0IGRpZENsb3NlID0gdHJpZ2dlckNsb3NlUG9wdXAodGhpcyk7CgogICAgaWYgKHRoaXMuaXNBd2FpdGluZ1Byb21pc2UoKSkgewogICAgICAvLyBBIHN3YWwgYXdhaXRpbmcgZm9yIGEgcHJvbWlzZSAoYWZ0ZXIgYSBjbGljayBvbiBDb25maXJtIG9yIERlbnkpIGNhbm5vdCBiZSBkaXNtaXNzZWQgYW55bW9yZSAjMjMzNQogICAgICBpZiAoIXJlc29sdmVWYWx1ZS5pc0Rpc21pc3NlZCkgewogICAgICAgIGhhbmRsZUF3YWl0aW5nUHJvbWlzZSh0aGlzKTsKICAgICAgICBzd2FsUHJvbWlzZVJlc29sdmUocmVzb2x2ZVZhbHVlKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChkaWRDbG9zZSkgewogICAgICAvLyBSZXNvbHZlIFN3YWwgcHJvbWlzZQogICAgICBzd2FsUHJvbWlzZVJlc29sdmUocmVzb2x2ZVZhbHVlKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gaXNBd2FpdGluZ1Byb21pc2UoKSB7CiAgICByZXR1cm4gISFwcml2YXRlUHJvcHMuYXdhaXRpbmdQcm9taXNlLmdldCh0aGlzKTsKICB9CgogIGNvbnN0IHRyaWdnZXJDbG9zZVBvcHVwID0gaW5zdGFuY2UgPT4gewogICAgY29uc3QgcG9wdXAgPSBnZXRQb3B1cCgpOwoKICAgIGlmICghcG9wdXApIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGNvbnN0IGlubmVyUGFyYW1zID0gcHJpdmF0ZVByb3BzLmlubmVyUGFyYW1zLmdldChpbnN0YW5jZSk7CgogICAgaWYgKCFpbm5lclBhcmFtcyB8fCBoYXNDbGFzcyhwb3B1cCwgaW5uZXJQYXJhbXMuaGlkZUNsYXNzLnBvcHVwKSkgewogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgcmVtb3ZlQ2xhc3MocG9wdXAsIGlubmVyUGFyYW1zLnNob3dDbGFzcy5wb3B1cCk7CiAgICBhZGRDbGFzcyhwb3B1cCwgaW5uZXJQYXJhbXMuaGlkZUNsYXNzLnBvcHVwKTsKICAgIGNvbnN0IGJhY2tkcm9wID0gZ2V0Q29udGFpbmVyKCk7CiAgICByZW1vdmVDbGFzcyhiYWNrZHJvcCwgaW5uZXJQYXJhbXMuc2hvd0NsYXNzLmJhY2tkcm9wKTsKICAgIGFkZENsYXNzKGJhY2tkcm9wLCBpbm5lclBhcmFtcy5oaWRlQ2xhc3MuYmFja2Ryb3ApOwogICAgaGFuZGxlUG9wdXBBbmltYXRpb24oaW5zdGFuY2UsIHBvcHVwLCBpbm5lclBhcmFtcyk7CiAgICByZXR1cm4gdHJ1ZTsKICB9OwoKICBmdW5jdGlvbiByZWplY3RQcm9taXNlKGVycm9yKSB7CiAgICBjb25zdCByZWplY3RQcm9taXNlID0gcHJpdmF0ZU1ldGhvZHMuc3dhbFByb21pc2VSZWplY3QuZ2V0KHRoaXMpOwogICAgaGFuZGxlQXdhaXRpbmdQcm9taXNlKHRoaXMpOwoKICAgIGlmIChyZWplY3RQcm9taXNlKSB7CiAgICAgIC8vIFJlamVjdCBTd2FsIHByb21pc2UKICAgICAgcmVqZWN0UHJvbWlzZShlcnJvcik7CiAgICB9CiAgfQoKICBjb25zdCBoYW5kbGVBd2FpdGluZ1Byb21pc2UgPSBpbnN0YW5jZSA9PiB7CiAgICBpZiAoaW5zdGFuY2UuaXNBd2FpdGluZ1Byb21pc2UoKSkgewogICAgICBwcml2YXRlUHJvcHMuYXdhaXRpbmdQcm9taXNlLmRlbGV0ZShpbnN0YW5jZSk7IC8vIFRoZSBpbnN0YW5jZSBtaWdodCBoYXZlIGJlZW4gcHJldmlvdXNseSBwYXJ0bHkgZGVzdHJveWVkLCB3ZSBtdXN0IHJlc3VtZSB0aGUgZGVzdHJveSBwcm9jZXNzIGluIHRoaXMgY2FzZSAjMjMzNQoKICAgICAgaWYgKCFwcml2YXRlUHJvcHMuaW5uZXJQYXJhbXMuZ2V0KGluc3RhbmNlKSkgewogICAgICAgIGluc3RhbmNlLl9kZXN0cm95KCk7CiAgICAgIH0KICAgIH0KICB9OwoKICBjb25zdCBwcmVwYXJlUmVzb2x2ZVZhbHVlID0gcmVzb2x2ZVZhbHVlID0+IHsKICAgIC8vIFdoZW4gdXNlciBjYWxscyBTd2FsLmNsb3NlKCkKICAgIGlmICh0eXBlb2YgcmVzb2x2ZVZhbHVlID09PSAndW5kZWZpbmVkJykgewogICAgICByZXR1cm4gewogICAgICAgIGlzQ29uZmlybWVkOiBmYWxzZSwKICAgICAgICBpc0RlbmllZDogZmFsc2UsCiAgICAgICAgaXNEaXNtaXNzZWQ6IHRydWUKICAgICAgfTsKICAgIH0KCiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7CiAgICAgIGlzQ29uZmlybWVkOiBmYWxzZSwKICAgICAgaXNEZW5pZWQ6IGZhbHNlLAogICAgICBpc0Rpc21pc3NlZDogZmFsc2UKICAgIH0sIHJlc29sdmVWYWx1ZSk7CiAgfTsKCiAgY29uc3QgaGFuZGxlUG9wdXBBbmltYXRpb24gPSAoaW5zdGFuY2UsIHBvcHVwLCBpbm5lclBhcmFtcykgPT4gewogICAgY29uc3QgY29udGFpbmVyID0gZ2V0Q29udGFpbmVyKCk7IC8vIElmIGFuaW1hdGlvbiBpcyBzdXBwb3J0ZWQsIGFuaW1hdGUKCiAgICBjb25zdCBhbmltYXRpb25Jc1N1cHBvcnRlZCA9IGFuaW1hdGlvbkVuZEV2ZW50ICYmIGhhc0Nzc0FuaW1hdGlvbihwb3B1cCk7CgogICAgaWYgKHR5cGVvZiBpbm5lclBhcmFtcy53aWxsQ2xvc2UgPT09ICdmdW5jdGlvbicpIHsKICAgICAgaW5uZXJQYXJhbXMud2lsbENsb3NlKHBvcHVwKTsKICAgIH0KCiAgICBpZiAoYW5pbWF0aW9uSXNTdXBwb3J0ZWQpIHsKICAgICAgYW5pbWF0ZVBvcHVwKGluc3RhbmNlLCBwb3B1cCwgY29udGFpbmVyLCBpbm5lclBhcmFtcy5yZXR1cm5Gb2N1cywgaW5uZXJQYXJhbXMuZGlkQ2xvc2UpOwogICAgfSBlbHNlIHsKICAgICAgLy8gT3RoZXJ3aXNlLCByZW1vdmUgaW1tZWRpYXRlbHkKICAgICAgcmVtb3ZlUG9wdXBBbmRSZXNldFN0YXRlKGluc3RhbmNlLCBjb250YWluZXIsIGlubmVyUGFyYW1zLnJldHVybkZvY3VzLCBpbm5lclBhcmFtcy5kaWRDbG9zZSk7CiAgICB9CiAgfTsKCiAgY29uc3QgYW5pbWF0ZVBvcHVwID0gKGluc3RhbmNlLCBwb3B1cCwgY29udGFpbmVyLCByZXR1cm5Gb2N1cywgZGlkQ2xvc2UpID0+IHsKICAgIGdsb2JhbFN0YXRlLnN3YWxDbG9zZUV2ZW50RmluaXNoZWRDYWxsYmFjayA9IHJlbW92ZVBvcHVwQW5kUmVzZXRTdGF0ZS5iaW5kKG51bGwsIGluc3RhbmNlLCBjb250YWluZXIsIHJldHVybkZvY3VzLCBkaWRDbG9zZSk7CiAgICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKGFuaW1hdGlvbkVuZEV2ZW50LCBmdW5jdGlvbiAoZSkgewogICAgICBpZiAoZS50YXJnZXQgPT09IHBvcHVwKSB7CiAgICAgICAgZ2xvYmFsU3RhdGUuc3dhbENsb3NlRXZlbnRGaW5pc2hlZENhbGxiYWNrKCk7CiAgICAgICAgZGVsZXRlIGdsb2JhbFN0YXRlLnN3YWxDbG9zZUV2ZW50RmluaXNoZWRDYWxsYmFjazsKICAgICAgfQogICAgfSk7CiAgfTsKCiAgY29uc3QgdHJpZ2dlckRpZENsb3NlQW5kRGlzcG9zZSA9IChpbnN0YW5jZSwgZGlkQ2xvc2UpID0+IHsKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICBpZiAodHlwZW9mIGRpZENsb3NlID09PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgZGlkQ2xvc2UuYmluZChpbnN0YW5jZS5wYXJhbXMpKCk7CiAgICAgIH0KCiAgICAgIGluc3RhbmNlLl9kZXN0cm95KCk7CiAgICB9KTsKICB9OwoKICBmdW5jdGlvbiBzZXRCdXR0b25zRGlzYWJsZWQoaW5zdGFuY2UsIGJ1dHRvbnMsIGRpc2FibGVkKSB7CiAgICBjb25zdCBkb21DYWNoZSA9IHByaXZhdGVQcm9wcy5kb21DYWNoZS5nZXQoaW5zdGFuY2UpOwogICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7CiAgICAgIGRvbUNhY2hlW2J1dHRvbl0uZGlzYWJsZWQgPSBkaXNhYmxlZDsKICAgIH0pOwogIH0KCiAgZnVuY3Rpb24gc2V0SW5wdXREaXNhYmxlZChpbnB1dCwgZGlzYWJsZWQpIHsKICAgIGlmICghaW5wdXQpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGlmIChpbnB1dC50eXBlID09PSAncmFkaW8nKSB7CiAgICAgIGNvbnN0IHJhZGlvc0NvbnRhaW5lciA9IGlucHV0LnBhcmVudE5vZGUucGFyZW50Tm9kZTsKICAgICAgY29uc3QgcmFkaW9zID0gcmFkaW9zQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0Jyk7CgogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJhZGlvcy5sZW5ndGg7IGkrKykgewogICAgICAgIHJhZGlvc1tpXS5kaXNhYmxlZCA9IGRpc2FibGVkOwogICAgICB9CiAgICB9IGVsc2UgewogICAgICBpbnB1dC5kaXNhYmxlZCA9IGRpc2FibGVkOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZW5hYmxlQnV0dG9ucygpIHsKICAgIHNldEJ1dHRvbnNEaXNhYmxlZCh0aGlzLCBbJ2NvbmZpcm1CdXR0b24nLCAnZGVueUJ1dHRvbicsICdjYW5jZWxCdXR0b24nXSwgZmFsc2UpOwogIH0KICBmdW5jdGlvbiBkaXNhYmxlQnV0dG9ucygpIHsKICAgIHNldEJ1dHRvbnNEaXNhYmxlZCh0aGlzLCBbJ2NvbmZpcm1CdXR0b24nLCAnZGVueUJ1dHRvbicsICdjYW5jZWxCdXR0b24nXSwgdHJ1ZSk7CiAgfQogIGZ1bmN0aW9uIGVuYWJsZUlucHV0KCkgewogICAgcmV0dXJuIHNldElucHV0RGlzYWJsZWQodGhpcy5nZXRJbnB1dCgpLCBmYWxzZSk7CiAgfQogIGZ1bmN0aW9uIGRpc2FibGVJbnB1dCgpIHsKICAgIHJldHVybiBzZXRJbnB1dERpc2FibGVkKHRoaXMuZ2V0SW5wdXQoKSwgdHJ1ZSk7CiAgfQoKICBmdW5jdGlvbiBzaG93VmFsaWRhdGlvbk1lc3NhZ2UoZXJyb3IpIHsKICAgIGNvbnN0IGRvbUNhY2hlID0gcHJpdmF0ZVByb3BzLmRvbUNhY2hlLmdldCh0aGlzKTsKICAgIGNvbnN0IHBhcmFtcyA9IHByaXZhdGVQcm9wcy5pbm5lclBhcmFtcy5nZXQodGhpcyk7CiAgICBzZXRJbm5lckh0bWwoZG9tQ2FjaGUudmFsaWRhdGlvbk1lc3NhZ2UsIGVycm9yKTsKICAgIGRvbUNhY2hlLnZhbGlkYXRpb25NZXNzYWdlLmNsYXNzTmFtZSA9IHN3YWxDbGFzc2VzWyd2YWxpZGF0aW9uLW1lc3NhZ2UnXTsKCiAgICBpZiAocGFyYW1zLmN1c3RvbUNsYXNzICYmIHBhcmFtcy5jdXN0b21DbGFzcy52YWxpZGF0aW9uTWVzc2FnZSkgewogICAgICBhZGRDbGFzcyhkb21DYWNoZS52YWxpZGF0aW9uTWVzc2FnZSwgcGFyYW1zLmN1c3RvbUNsYXNzLnZhbGlkYXRpb25NZXNzYWdlKTsKICAgIH0KCiAgICBzaG93KGRvbUNhY2hlLnZhbGlkYXRpb25NZXNzYWdlKTsKICAgIGNvbnN0IGlucHV0ID0gdGhpcy5nZXRJbnB1dCgpOwoKICAgIGlmIChpbnB1dCkgewogICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcsIHRydWUpOwogICAgICBpbnB1dC5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknLCBzd2FsQ2xhc3Nlc1sndmFsaWRhdGlvbi1tZXNzYWdlJ10pOwogICAgICBmb2N1c0lucHV0KGlucHV0KTsKICAgICAgYWRkQ2xhc3MoaW5wdXQsIHN3YWxDbGFzc2VzLmlucHV0ZXJyb3IpOwogICAgfQogIH0gLy8gSGlkZSBibG9jayB3aXRoIHZhbGlkYXRpb24gbWVzc2FnZQoKICBmdW5jdGlvbiByZXNldFZhbGlkYXRpb25NZXNzYWdlJDEoKSB7CiAgICBjb25zdCBkb21DYWNoZSA9IHByaXZhdGVQcm9wcy5kb21DYWNoZS5nZXQodGhpcyk7CgogICAgaWYgKGRvbUNhY2hlLnZhbGlkYXRpb25NZXNzYWdlKSB7CiAgICAgIGhpZGUoZG9tQ2FjaGUudmFsaWRhdGlvbk1lc3NhZ2UpOwogICAgfQoKICAgIGNvbnN0IGlucHV0ID0gdGhpcy5nZXRJbnB1dCgpOwoKICAgIGlmIChpbnB1dCkgewogICAgICBpbnB1dC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtaW52YWxpZCcpOwogICAgICBpbnB1dC5yZW1vdmVBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknKTsKICAgICAgcmVtb3ZlQ2xhc3MoaW5wdXQsIHN3YWxDbGFzc2VzLmlucHV0ZXJyb3IpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gZ2V0UHJvZ3Jlc3NTdGVwcyQxKCkgewogICAgY29uc3QgZG9tQ2FjaGUgPSBwcml2YXRlUHJvcHMuZG9tQ2FjaGUuZ2V0KHRoaXMpOwogICAgcmV0dXJuIGRvbUNhY2hlLnByb2dyZXNzU3RlcHM7CiAgfQoKICBjbGFzcyBUaW1lciB7CiAgICBjb25zdHJ1Y3RvcihjYWxsYmFjaywgZGVsYXkpIHsKICAgICAgdGhpcy5jYWxsYmFjayA9IGNhbGxiYWNrOwogICAgICB0aGlzLnJlbWFpbmluZyA9IGRlbGF5OwogICAgICB0aGlzLnJ1bm5pbmcgPSBmYWxzZTsKICAgICAgdGhpcy5zdGFydCgpOwogICAgfQoKICAgIHN0YXJ0KCkgewogICAgICBpZiAoIXRoaXMucnVubmluZykgewogICAgICAgIHRoaXMucnVubmluZyA9IHRydWU7CiAgICAgICAgdGhpcy5zdGFydGVkID0gbmV3IERhdGUoKTsKICAgICAgICB0aGlzLmlkID0gc2V0VGltZW91dCh0aGlzLmNhbGxiYWNrLCB0aGlzLnJlbWFpbmluZyk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnJlbWFpbmluZzsKICAgIH0KCiAgICBzdG9wKCkgewogICAgICBpZiAodGhpcy5ydW5uaW5nKSB7CiAgICAgICAgdGhpcy5ydW5uaW5nID0gZmFsc2U7CiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaWQpOwogICAgICAgIHRoaXMucmVtYWluaW5nIC09IG5ldyBEYXRlKCkgLSB0aGlzLnN0YXJ0ZWQ7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnJlbWFpbmluZzsKICAgIH0KCiAgICBpbmNyZWFzZShuKSB7CiAgICAgIGNvbnN0IHJ1bm5pbmcgPSB0aGlzLnJ1bm5pbmc7CgogICAgICBpZiAocnVubmluZykgewogICAgICAgIHRoaXMuc3RvcCgpOwogICAgICB9CgogICAgICB0aGlzLnJlbWFpbmluZyArPSBuOwoKICAgICAgaWYgKHJ1bm5pbmcpIHsKICAgICAgICB0aGlzLnN0YXJ0KCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnJlbWFpbmluZzsKICAgIH0KCiAgICBnZXRUaW1lckxlZnQoKSB7CiAgICAgIGlmICh0aGlzLnJ1bm5pbmcpIHsKICAgICAgICB0aGlzLnN0b3AoKTsKICAgICAgICB0aGlzLnN0YXJ0KCk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnJlbWFpbmluZzsKICAgIH0KCiAgICBpc1J1bm5pbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLnJ1bm5pbmc7CiAgICB9CgogIH0KCiAgdmFyIGRlZmF1bHRJbnB1dFZhbGlkYXRvcnMgPSB7CiAgICBlbWFpbDogKHN0cmluZywgdmFsaWRhdGlvbk1lc3NhZ2UpID0+IHsKICAgICAgcmV0dXJuIC9eW2EtekEtWjAtOS4rXy1dK0BbYS16QS1aMC05Li1dK1wuW2EtekEtWjAtOS1dezIsMjR9JC8udGVzdChzdHJpbmcpID8gUHJvbWlzZS5yZXNvbHZlKCkgOiBQcm9taXNlLnJlc29sdmUodmFsaWRhdGlvbk1lc3NhZ2UgfHwgJ0ludmFsaWQgZW1haWwgYWRkcmVzcycpOwogICAgfSwKICAgIHVybDogKHN0cmluZywgdmFsaWRhdGlvbk1lc3NhZ2UpID0+IHsKICAgICAgLy8gdGFrZW4gZnJvbSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzgwOTQzNSB3aXRoIGEgc21hbGwgY2hhbmdlIGZyb20gIzEzMDYgYW5kICMyMDEzCiAgICAgIHJldHVybiAvXmh0dHBzPzpcL1wvKHd3d1wuKT9bLWEtekEtWjAtOUA6JS5fK34jPV17MSwyNTZ9XC5bYS16XXsyLDYzfVxiKFstYS16QS1aMC05QDolXysufiM/Ji89XSopJC8udGVzdChzdHJpbmcpID8gUHJvbWlzZS5yZXNvbHZlKCkgOiBQcm9taXNlLnJlc29sdmUodmFsaWRhdGlvbk1lc3NhZ2UgfHwgJ0ludmFsaWQgVVJMJyk7CiAgICB9CiAgfTsKCiAgZnVuY3Rpb24gc2V0RGVmYXVsdElucHV0VmFsaWRhdG9ycyhwYXJhbXMpIHsKICAgIC8vIFVzZSBkZWZhdWx0IGBpbnB1dFZhbGlkYXRvcmAgZm9yIHN1cHBvcnRlZCBpbnB1dCB0eXBlcyBpZiBub3QgcHJvdmlkZWQKICAgIGlmICghcGFyYW1zLmlucHV0VmFsaWRhdG9yKSB7CiAgICAgIE9iamVjdC5rZXlzKGRlZmF1bHRJbnB1dFZhbGlkYXRvcnMpLmZvckVhY2goa2V5ID0+IHsKICAgICAgICBpZiAocGFyYW1zLmlucHV0ID09PSBrZXkpIHsKICAgICAgICAgIHBhcmFtcy5pbnB1dFZhbGlkYXRvciA9IGRlZmF1bHRJbnB1dFZhbGlkYXRvcnNba2V5XTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KCiAgZnVuY3Rpb24gdmFsaWRhdGVDdXN0b21UYXJnZXRFbGVtZW50KHBhcmFtcykgewogICAgLy8gRGV0ZXJtaW5lIGlmIHRoZSBjdXN0b20gdGFyZ2V0IGVsZW1lbnQgaXMgdmFsaWQKICAgIGlmICghcGFyYW1zLnRhcmdldCB8fCB0eXBlb2YgcGFyYW1zLnRhcmdldCA9PT0gJ3N0cmluZycgJiYgIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocGFyYW1zLnRhcmdldCkgfHwgdHlwZW9mIHBhcmFtcy50YXJnZXQgIT09ICdzdHJpbmcnICYmICFwYXJhbXMudGFyZ2V0LmFwcGVuZENoaWxkKSB7CiAgICAgIHdhcm4oJ1RhcmdldCBwYXJhbWV0ZXIgaXMgbm90IHZhbGlkLCBkZWZhdWx0aW5nIHRvICJib2R5IicpOwogICAgICBwYXJhbXMudGFyZ2V0ID0gJ2JvZHknOwogICAgfQogIH0KICAvKioKICAgKiBTZXQgdHlwZSwgdGV4dCBhbmQgYWN0aW9ucyBvbiBwb3B1cAogICAqCiAgICogQHBhcmFtIHBhcmFtcwogICAqIEByZXR1cm5zIHtib29sZWFufQogICAqLwoKCiAgZnVuY3Rpb24gc2V0UGFyYW1ldGVycyhwYXJhbXMpIHsKICAgIHNldERlZmF1bHRJbnB1dFZhbGlkYXRvcnMocGFyYW1zKTsgLy8gc2hvd0xvYWRlck9uQ29uZmlybSAmJiBwcmVDb25maXJtCgogICAgaWYgKHBhcmFtcy5zaG93TG9hZGVyT25Db25maXJtICYmICFwYXJhbXMucHJlQ29uZmlybSkgewogICAgICB3YXJuKCdzaG93TG9hZGVyT25Db25maXJtIGlzIHNldCB0byB0cnVlLCBidXQgcHJlQ29uZmlybSBpcyBub3QgZGVmaW5lZC5cbicgKyAnc2hvd0xvYWRlck9uQ29uZmlybSBzaG91bGQgYmUgdXNlZCB0b2dldGhlciB3aXRoIHByZUNvbmZpcm0sIHNlZSB1c2FnZSBleGFtcGxlOlxuJyArICdodHRwczovL3N3ZWV0YWxlcnQyLmdpdGh1Yi5pby8jYWpheC1yZXF1ZXN0Jyk7CiAgICB9CgogICAgdmFsaWRhdGVDdXN0b21UYXJnZXRFbGVtZW50KHBhcmFtcyk7IC8vIFJlcGxhY2UgbmV3bGluZXMgd2l0aCA8YnI+IGluIHRpdGxlCgogICAgaWYgKHR5cGVvZiBwYXJhbXMudGl0bGUgPT09ICdzdHJpbmcnKSB7CiAgICAgIHBhcmFtcy50aXRsZSA9IHBhcmFtcy50aXRsZS5zcGxpdCgnXG4nKS5qb2luKCc8YnIgLz4nKTsKICAgIH0KCiAgICBpbml0KHBhcmFtcyk7CiAgfQoKICBjb25zdCBzd2FsU3RyaW5nUGFyYW1zID0gWydzd2FsLXRpdGxlJywgJ3N3YWwtaHRtbCcsICdzd2FsLWZvb3RlciddOwogIGNvbnN0IGdldFRlbXBsYXRlUGFyYW1zID0gcGFyYW1zID0+IHsKICAgIGNvbnN0IHRlbXBsYXRlID0gdHlwZW9mIHBhcmFtcy50ZW1wbGF0ZSA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBhcmFtcy50ZW1wbGF0ZSkgOiBwYXJhbXMudGVtcGxhdGU7CgogICAgaWYgKCF0ZW1wbGF0ZSkgewogICAgICByZXR1cm4ge307CiAgICB9CgogICAgY29uc3QgdGVtcGxhdGVDb250ZW50ID0gdGVtcGxhdGUuY29udGVudDsKICAgIHNob3dXYXJuaW5nc0ZvckVsZW1lbnRzKHRlbXBsYXRlQ29udGVudCk7CiAgICBjb25zdCByZXN1bHQgPSBPYmplY3QuYXNzaWduKGdldFN3YWxQYXJhbXModGVtcGxhdGVDb250ZW50KSwgZ2V0U3dhbEJ1dHRvbnModGVtcGxhdGVDb250ZW50KSwgZ2V0U3dhbEltYWdlKHRlbXBsYXRlQ29udGVudCksIGdldFN3YWxJY29uKHRlbXBsYXRlQ29udGVudCksIGdldFN3YWxJbnB1dCh0ZW1wbGF0ZUNvbnRlbnQpLCBnZXRTd2FsU3RyaW5nUGFyYW1zKHRlbXBsYXRlQ29udGVudCwgc3dhbFN0cmluZ1BhcmFtcykpOwogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICBjb25zdCBnZXRTd2FsUGFyYW1zID0gdGVtcGxhdGVDb250ZW50ID0+IHsKICAgIGNvbnN0IHJlc3VsdCA9IHt9OwogICAgdG9BcnJheSh0ZW1wbGF0ZUNvbnRlbnQucXVlcnlTZWxlY3RvckFsbCgnc3dhbC1wYXJhbScpKS5mb3JFYWNoKHBhcmFtID0+IHsKICAgICAgc2hvd1dhcm5pbmdzRm9yQXR0cmlidXRlcyhwYXJhbSwgWyduYW1lJywgJ3ZhbHVlJ10pOwogICAgICBjb25zdCBwYXJhbU5hbWUgPSBwYXJhbS5nZXRBdHRyaWJ1dGUoJ25hbWUnKTsKICAgICAgbGV0IHZhbHVlID0gcGFyYW0uZ2V0QXR0cmlidXRlKCd2YWx1ZScpOwoKICAgICAgaWYgKHR5cGVvZiBkZWZhdWx0UGFyYW1zW3BhcmFtTmFtZV0gPT09ICdib29sZWFuJyAmJiB2YWx1ZSA9PT0gJ2ZhbHNlJykgewogICAgICAgIHZhbHVlID0gZmFsc2U7CiAgICAgIH0KCiAgICAgIGlmICh0eXBlb2YgZGVmYXVsdFBhcmFtc1twYXJhbU5hbWVdID09PSAnb2JqZWN0JykgewogICAgICAgIHZhbHVlID0gSlNPTi5wYXJzZSh2YWx1ZSk7CiAgICAgIH0KCiAgICAgIHJlc3VsdFtwYXJhbU5hbWVdID0gdmFsdWU7CiAgICB9KTsKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgY29uc3QgZ2V0U3dhbEJ1dHRvbnMgPSB0ZW1wbGF0ZUNvbnRlbnQgPT4gewogICAgY29uc3QgcmVzdWx0ID0ge307CiAgICB0b0FycmF5KHRlbXBsYXRlQ29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdzd2FsLWJ1dHRvbicpKS5mb3JFYWNoKGJ1dHRvbiA9PiB7CiAgICAgIHNob3dXYXJuaW5nc0ZvckF0dHJpYnV0ZXMoYnV0dG9uLCBbJ3R5cGUnLCAnY29sb3InLCAnYXJpYS1sYWJlbCddKTsKICAgICAgY29uc3QgdHlwZSA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ3R5cGUnKTsKICAgICAgcmVzdWx0WyIiLmNvbmNhdCh0eXBlLCAiQnV0dG9uVGV4dCIpXSA9IGJ1dHRvbi5pbm5lckhUTUw7CiAgICAgIHJlc3VsdFsic2hvdyIuY29uY2F0KGNhcGl0YWxpemVGaXJzdExldHRlcih0eXBlKSwgIkJ1dHRvbiIpXSA9IHRydWU7CgogICAgICBpZiAoYnV0dG9uLmhhc0F0dHJpYnV0ZSgnY29sb3InKSkgewogICAgICAgIHJlc3VsdFsiIi5jb25jYXQodHlwZSwgIkJ1dHRvbkNvbG9yIildID0gYnV0dG9uLmdldEF0dHJpYnV0ZSgnY29sb3InKTsKICAgICAgfQoKICAgICAgaWYgKGJ1dHRvbi5oYXNBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKSkgewogICAgICAgIHJlc3VsdFsiIi5jb25jYXQodHlwZSwgIkJ1dHRvbkFyaWFMYWJlbCIpXSA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKTsKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIGNvbnN0IGdldFN3YWxJbWFnZSA9IHRlbXBsYXRlQ29udGVudCA9PiB7CiAgICBjb25zdCByZXN1bHQgPSB7fTsKICAgIGNvbnN0IGltYWdlID0gdGVtcGxhdGVDb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ3N3YWwtaW1hZ2UnKTsKCiAgICBpZiAoaW1hZ2UpIHsKICAgICAgc2hvd1dhcm5pbmdzRm9yQXR0cmlidXRlcyhpbWFnZSwgWydzcmMnLCAnd2lkdGgnLCAnaGVpZ2h0JywgJ2FsdCddKTsKCiAgICAgIGlmIChpbWFnZS5oYXNBdHRyaWJ1dGUoJ3NyYycpKSB7CiAgICAgICAgcmVzdWx0LmltYWdlVXJsID0gaW1hZ2UuZ2V0QXR0cmlidXRlKCdzcmMnKTsKICAgICAgfQoKICAgICAgaWYgKGltYWdlLmhhc0F0dHJpYnV0ZSgnd2lkdGgnKSkgewogICAgICAgIHJlc3VsdC5pbWFnZVdpZHRoID0gaW1hZ2UuZ2V0QXR0cmlidXRlKCd3aWR0aCcpOwogICAgICB9CgogICAgICBpZiAoaW1hZ2UuaGFzQXR0cmlidXRlKCdoZWlnaHQnKSkgewogICAgICAgIHJlc3VsdC5pbWFnZUhlaWdodCA9IGltYWdlLmdldEF0dHJpYnV0ZSgnaGVpZ2h0Jyk7CiAgICAgIH0KCiAgICAgIGlmIChpbWFnZS5oYXNBdHRyaWJ1dGUoJ2FsdCcpKSB7CiAgICAgICAgcmVzdWx0LmltYWdlQWx0ID0gaW1hZ2UuZ2V0QXR0cmlidXRlKCdhbHQnKTsKICAgICAgfQogICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgY29uc3QgZ2V0U3dhbEljb24gPSB0ZW1wbGF0ZUNvbnRlbnQgPT4gewogICAgY29uc3QgcmVzdWx0ID0ge307CiAgICBjb25zdCBpY29uID0gdGVtcGxhdGVDb250ZW50LnF1ZXJ5U2VsZWN0b3IoJ3N3YWwtaWNvbicpOwoKICAgIGlmIChpY29uKSB7CiAgICAgIHNob3dXYXJuaW5nc0ZvckF0dHJpYnV0ZXMoaWNvbiwgWyd0eXBlJywgJ2NvbG9yJ10pOwoKICAgICAgaWYgKGljb24uaGFzQXR0cmlidXRlKCd0eXBlJykpIHsKICAgICAgICByZXN1bHQuaWNvbiA9IGljb24uZ2V0QXR0cmlidXRlKCd0eXBlJyk7CiAgICAgIH0KCiAgICAgIGlmIChpY29uLmhhc0F0dHJpYnV0ZSgnY29sb3InKSkgewogICAgICAgIHJlc3VsdC5pY29uQ29sb3IgPSBpY29uLmdldEF0dHJpYnV0ZSgnY29sb3InKTsKICAgICAgfQoKICAgICAgcmVzdWx0Lmljb25IdG1sID0gaWNvbi5pbm5lckhUTUw7CiAgICB9CgogICAgcmV0dXJuIHJlc3VsdDsKICB9OwoKICBjb25zdCBnZXRTd2FsSW5wdXQgPSB0ZW1wbGF0ZUNvbnRlbnQgPT4gewogICAgY29uc3QgcmVzdWx0ID0ge307CiAgICBjb25zdCBpbnB1dCA9IHRlbXBsYXRlQ29udGVudC5xdWVyeVNlbGVjdG9yKCdzd2FsLWlucHV0Jyk7CgogICAgaWYgKGlucHV0KSB7CiAgICAgIHNob3dXYXJuaW5nc0ZvckF0dHJpYnV0ZXMoaW5wdXQsIFsndHlwZScsICdsYWJlbCcsICdwbGFjZWhvbGRlcicsICd2YWx1ZSddKTsKICAgICAgcmVzdWx0LmlucHV0ID0gaW5wdXQuZ2V0QXR0cmlidXRlKCd0eXBlJykgfHwgJ3RleHQnOwoKICAgICAgaWYgKGlucHV0Lmhhc0F0dHJpYnV0ZSgnbGFiZWwnKSkgewogICAgICAgIHJlc3VsdC5pbnB1dExhYmVsID0gaW5wdXQuZ2V0QXR0cmlidXRlKCdsYWJlbCcpOwogICAgICB9CgogICAgICBpZiAoaW5wdXQuaGFzQXR0cmlidXRlKCdwbGFjZWhvbGRlcicpKSB7CiAgICAgICAgcmVzdWx0LmlucHV0UGxhY2Vob2xkZXIgPSBpbnB1dC5nZXRBdHRyaWJ1dGUoJ3BsYWNlaG9sZGVyJyk7CiAgICAgIH0KCiAgICAgIGlmIChpbnB1dC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykpIHsKICAgICAgICByZXN1bHQuaW5wdXRWYWx1ZSA9IGlucHV0LmdldEF0dHJpYnV0ZSgndmFsdWUnKTsKICAgICAgfQogICAgfQoKICAgIGNvbnN0IGlucHV0T3B0aW9ucyA9IHRlbXBsYXRlQ29udGVudC5xdWVyeVNlbGVjdG9yQWxsKCdzd2FsLWlucHV0LW9wdGlvbicpOwoKICAgIGlmIChpbnB1dE9wdGlvbnMubGVuZ3RoKSB7CiAgICAgIHJlc3VsdC5pbnB1dE9wdGlvbnMgPSB7fTsKICAgICAgdG9BcnJheShpbnB1dE9wdGlvbnMpLmZvckVhY2gob3B0aW9uID0+IHsKICAgICAgICBzaG93V2FybmluZ3NGb3JBdHRyaWJ1dGVzKG9wdGlvbiwgWyd2YWx1ZSddKTsKICAgICAgICBjb25zdCBvcHRpb25WYWx1ZSA9IG9wdGlvbi5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJyk7CiAgICAgICAgY29uc3Qgb3B0aW9uTmFtZSA9IG9wdGlvbi5pbm5lckhUTUw7CiAgICAgICAgcmVzdWx0LmlucHV0T3B0aW9uc1tvcHRpb25WYWx1ZV0gPSBvcHRpb25OYW1lOwogICAgICB9KTsKICAgIH0KCiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIGNvbnN0IGdldFN3YWxTdHJpbmdQYXJhbXMgPSAodGVtcGxhdGVDb250ZW50LCBwYXJhbU5hbWVzKSA9PiB7CiAgICBjb25zdCByZXN1bHQgPSB7fTsKCiAgICBmb3IgKGNvbnN0IGkgaW4gcGFyYW1OYW1lcykgewogICAgICBjb25zdCBwYXJhbU5hbWUgPSBwYXJhbU5hbWVzW2ldOwogICAgICBjb25zdCB0YWcgPSB0ZW1wbGF0ZUNvbnRlbnQucXVlcnlTZWxlY3RvcihwYXJhbU5hbWUpOwoKICAgICAgaWYgKHRhZykgewogICAgICAgIHNob3dXYXJuaW5nc0ZvckF0dHJpYnV0ZXModGFnLCBbXSk7CiAgICAgICAgcmVzdWx0W3BhcmFtTmFtZS5yZXBsYWNlKC9ec3dhbC0vLCAnJyldID0gdGFnLmlubmVySFRNTC50cmltKCk7CiAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gcmVzdWx0OwogIH07CgogIGNvbnN0IHNob3dXYXJuaW5nc0ZvckVsZW1lbnRzID0gdGVtcGxhdGUgPT4gewogICAgY29uc3QgYWxsb3dlZEVsZW1lbnRzID0gc3dhbFN0cmluZ1BhcmFtcy5jb25jYXQoWydzd2FsLXBhcmFtJywgJ3N3YWwtYnV0dG9uJywgJ3N3YWwtaW1hZ2UnLCAnc3dhbC1pY29uJywgJ3N3YWwtaW5wdXQnLCAnc3dhbC1pbnB1dC1vcHRpb24nXSk7CiAgICB0b0FycmF5KHRlbXBsYXRlLmNoaWxkcmVuKS5mb3JFYWNoKGVsID0+IHsKICAgICAgY29uc3QgdGFnTmFtZSA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTsKCiAgICAgIGlmIChhbGxvd2VkRWxlbWVudHMuaW5kZXhPZih0YWdOYW1lKSA9PT0gLTEpIHsKICAgICAgICB3YXJuKCJVbnJlY29nbml6ZWQgZWxlbWVudCA8Ii5jb25jYXQodGFnTmFtZSwgIj4iKSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIGNvbnN0IHNob3dXYXJuaW5nc0ZvckF0dHJpYnV0ZXMgPSAoZWwsIGFsbG93ZWRBdHRyaWJ1dGVzKSA9PiB7CiAgICB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpLmZvckVhY2goYXR0cmlidXRlID0+IHsKICAgICAgaWYgKGFsbG93ZWRBdHRyaWJ1dGVzLmluZGV4T2YoYXR0cmlidXRlLm5hbWUpID09PSAtMSkgewogICAgICAgIHdhcm4oWyJVbnJlY29nbml6ZWQgYXR0cmlidXRlIFwiIi5jb25jYXQoYXR0cmlidXRlLm5hbWUsICJcIiBvbiA8IikuY29uY2F0KGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSwgIj4uIiksICIiLmNvbmNhdChhbGxvd2VkQXR0cmlidXRlcy5sZW5ndGggPyAiQWxsb3dlZCBhdHRyaWJ1dGVzIGFyZTogIi5jb25jYXQoYWxsb3dlZEF0dHJpYnV0ZXMuam9pbignLCAnKSkgOiAnVG8gc2V0IHRoZSB2YWx1ZSwgdXNlIEhUTUwgd2l0aGluIHRoZSBlbGVtZW50LicpXSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIGNvbnN0IFNIT1dfQ0xBU1NfVElNRU9VVCA9IDEwOwogIC8qKgogICAqIE9wZW4gcG9wdXAsIGFkZCBuZWNlc3NhcnkgY2xhc3NlcyBhbmQgc3R5bGVzLCBmaXggc2Nyb2xsYmFyCiAgICoKICAgKiBAcGFyYW0gcGFyYW1zCiAgICovCgogIGNvbnN0IG9wZW5Qb3B1cCA9IHBhcmFtcyA9PiB7CiAgICBjb25zdCBjb250YWluZXIgPSBnZXRDb250YWluZXIoKTsKICAgIGNvbnN0IHBvcHVwID0gZ2V0UG9wdXAoKTsKCiAgICBpZiAodHlwZW9mIHBhcmFtcy53aWxsT3BlbiA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBwYXJhbXMud2lsbE9wZW4ocG9wdXApOwogICAgfQoKICAgIGNvbnN0IGJvZHlTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KTsKICAgIGNvbnN0IGluaXRpYWxCb2R5T3ZlcmZsb3cgPSBib2R5U3R5bGVzLm92ZXJmbG93WTsKICAgIGFkZENsYXNzZXMkMShjb250YWluZXIsIHBvcHVwLCBwYXJhbXMpOyAvLyBzY3JvbGxpbmcgaXMgJ2hpZGRlbicgdW50aWwgYW5pbWF0aW9uIGlzIGRvbmUsIGFmdGVyIHRoYXQgJ2F1dG8nCgogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIHNldFNjcm9sbGluZ1Zpc2liaWxpdHkoY29udGFpbmVyLCBwb3B1cCk7CiAgICB9LCBTSE9XX0NMQVNTX1RJTUVPVVQpOwoKICAgIGlmIChpc01vZGFsKCkpIHsKICAgICAgZml4U2Nyb2xsQ29udGFpbmVyKGNvbnRhaW5lciwgcGFyYW1zLnNjcm9sbGJhclBhZGRpbmcsIGluaXRpYWxCb2R5T3ZlcmZsb3cpOwogICAgICBzZXRBcmlhSGlkZGVuKCk7CiAgICB9CgogICAgaWYgKCFpc1RvYXN0KCkgJiYgIWdsb2JhbFN0YXRlLnByZXZpb3VzQWN0aXZlRWxlbWVudCkgewogICAgICBnbG9iYWxTdGF0ZS5wcmV2aW91c0FjdGl2ZUVsZW1lbnQgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50OwogICAgfQoKICAgIGlmICh0eXBlb2YgcGFyYW1zLmRpZE9wZW4gPT09ICdmdW5jdGlvbicpIHsKICAgICAgc2V0VGltZW91dCgoKSA9PiBwYXJhbXMuZGlkT3Blbihwb3B1cCkpOwogICAgfQoKICAgIHJlbW92ZUNsYXNzKGNvbnRhaW5lciwgc3dhbENsYXNzZXNbJ25vLXRyYW5zaXRpb24nXSk7CiAgfTsKCiAgY29uc3Qgc3dhbE9wZW5BbmltYXRpb25GaW5pc2hlZCA9IGV2ZW50ID0+IHsKICAgIGNvbnN0IHBvcHVwID0gZ2V0UG9wdXAoKTsKCiAgICBpZiAoZXZlbnQudGFyZ2V0ICE9PSBwb3B1cCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgY29uc3QgY29udGFpbmVyID0gZ2V0Q29udGFpbmVyKCk7CiAgICBwb3B1cC5yZW1vdmVFdmVudExpc3RlbmVyKGFuaW1hdGlvbkVuZEV2ZW50LCBzd2FsT3BlbkFuaW1hdGlvbkZpbmlzaGVkKTsKICAgIGNvbnRhaW5lci5zdHlsZS5vdmVyZmxvd1kgPSAnYXV0byc7CiAgfTsKCiAgY29uc3Qgc2V0U2Nyb2xsaW5nVmlzaWJpbGl0eSA9IChjb250YWluZXIsIHBvcHVwKSA9PiB7CiAgICBpZiAoYW5pbWF0aW9uRW5kRXZlbnQgJiYgaGFzQ3NzQW5pbWF0aW9uKHBvcHVwKSkgewogICAgICBjb250YWluZXIuc3R5bGUub3ZlcmZsb3dZID0gJ2hpZGRlbic7CiAgICAgIHBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoYW5pbWF0aW9uRW5kRXZlbnQsIHN3YWxPcGVuQW5pbWF0aW9uRmluaXNoZWQpOwogICAgfSBlbHNlIHsKICAgICAgY29udGFpbmVyLnN0eWxlLm92ZXJmbG93WSA9ICdhdXRvJzsKICAgIH0KICB9OwoKICBjb25zdCBmaXhTY3JvbGxDb250YWluZXIgPSAoY29udGFpbmVyLCBzY3JvbGxiYXJQYWRkaW5nLCBpbml0aWFsQm9keU92ZXJmbG93KSA9PiB7CiAgICBpT1NmaXgoKTsKCiAgICBpZiAoc2Nyb2xsYmFyUGFkZGluZyAmJiBpbml0aWFsQm9keU92ZXJmbG93ICE9PSAnaGlkZGVuJykgewogICAgICBmaXhTY3JvbGxiYXIoKTsKICAgIH0gLy8gc3dlZXRhbGVydDIvaXNzdWVzLzEyNDcKCgogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIGNvbnRhaW5lci5zY3JvbGxUb3AgPSAwOwogICAgfSk7CiAgfTsKCiAgY29uc3QgYWRkQ2xhc3NlcyQxID0gKGNvbnRhaW5lciwgcG9wdXAsIHBhcmFtcykgPT4gewogICAgYWRkQ2xhc3MoY29udGFpbmVyLCBwYXJhbXMuc2hvd0NsYXNzLmJhY2tkcm9wKTsgLy8gdGhlIHdvcmthcm91bmQgd2l0aCBzZXR0aW5nL3Vuc2V0dGluZyBvcGFjaXR5IGlzIG5lZWRlZCBmb3IgIzIwMTkgYW5kIDIwNTkKCiAgICBwb3B1cC5zdHlsZS5zZXRQcm9wZXJ0eSgnb3BhY2l0eScsICcwJywgJ2ltcG9ydGFudCcpOwogICAgc2hvdyhwb3B1cCwgJ2dyaWQnKTsKICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAvLyBBbmltYXRlIHBvcHVwIHJpZ2h0IGFmdGVyIHNob3dpbmcgaXQKICAgICAgYWRkQ2xhc3MocG9wdXAsIHBhcmFtcy5zaG93Q2xhc3MucG9wdXApOyAvLyBhbmQgcmVtb3ZlIHRoZSBvcGFjaXR5IHdvcmthcm91bmQKCiAgICAgIHBvcHVwLnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvcGFjaXR5Jyk7CiAgICB9LCBTSE9XX0NMQVNTX1RJTUVPVVQpOyAvLyAxMG1zIGluIG9yZGVyIHRvIGZpeCAjMjA2MgoKICAgIGFkZENsYXNzKFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGRvY3VtZW50LmJvZHldLCBzd2FsQ2xhc3Nlcy5zaG93bik7CgogICAgaWYgKHBhcmFtcy5oZWlnaHRBdXRvICYmIHBhcmFtcy5iYWNrZHJvcCAmJiAhcGFyYW1zLnRvYXN0KSB7CiAgICAgIGFkZENsYXNzKFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGRvY3VtZW50LmJvZHldLCBzd2FsQ2xhc3Nlc1snaGVpZ2h0LWF1dG8nXSk7CiAgICB9CiAgfTsKCiAgY29uc3QgaGFuZGxlSW5wdXRPcHRpb25zQW5kVmFsdWUgPSAoaW5zdGFuY2UsIHBhcmFtcykgPT4gewogICAgaWYgKHBhcmFtcy5pbnB1dCA9PT0gJ3NlbGVjdCcgfHwgcGFyYW1zLmlucHV0ID09PSAncmFkaW8nKSB7CiAgICAgIGhhbmRsZUlucHV0T3B0aW9ucyhpbnN0YW5jZSwgcGFyYW1zKTsKICAgIH0gZWxzZSBpZiAoWyd0ZXh0JywgJ2VtYWlsJywgJ251bWJlcicsICd0ZWwnLCAndGV4dGFyZWEnXS5pbmNsdWRlcyhwYXJhbXMuaW5wdXQpICYmIChoYXNUb1Byb21pc2VGbihwYXJhbXMuaW5wdXRWYWx1ZSkgfHwgaXNQcm9taXNlKHBhcmFtcy5pbnB1dFZhbHVlKSkpIHsKICAgICAgc2hvd0xvYWRpbmcoZ2V0Q29uZmlybUJ1dHRvbigpKTsKICAgICAgaGFuZGxlSW5wdXRWYWx1ZShpbnN0YW5jZSwgcGFyYW1zKTsKICAgIH0KICB9OwogIGNvbnN0IGdldElucHV0VmFsdWUgPSAoaW5zdGFuY2UsIGlubmVyUGFyYW1zKSA9PiB7CiAgICBjb25zdCBpbnB1dCA9IGluc3RhbmNlLmdldElucHV0KCk7CgogICAgaWYgKCFpbnB1dCkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KCiAgICBzd2l0Y2ggKGlubmVyUGFyYW1zLmlucHV0KSB7CiAgICAgIGNhc2UgJ2NoZWNrYm94JzoKICAgICAgICByZXR1cm4gZ2V0Q2hlY2tib3hWYWx1ZShpbnB1dCk7CgogICAgICBjYXNlICdyYWRpbyc6CiAgICAgICAgcmV0dXJuIGdldFJhZGlvVmFsdWUoaW5wdXQpOwoKICAgICAgY2FzZSAnZmlsZSc6CiAgICAgICAgcmV0dXJuIGdldEZpbGVWYWx1ZShpbnB1dCk7CgogICAgICBkZWZhdWx0OgogICAgICAgIHJldHVybiBpbm5lclBhcmFtcy5pbnB1dEF1dG9UcmltID8gaW5wdXQudmFsdWUudHJpbSgpIDogaW5wdXQudmFsdWU7CiAgICB9CiAgfTsKCiAgY29uc3QgZ2V0Q2hlY2tib3hWYWx1ZSA9IGlucHV0ID0+IGlucHV0LmNoZWNrZWQgPyAxIDogMDsKCiAgY29uc3QgZ2V0UmFkaW9WYWx1ZSA9IGlucHV0ID0+IGlucHV0LmNoZWNrZWQgPyBpbnB1dC52YWx1ZSA6IG51bGw7CgogIGNvbnN0IGdldEZpbGVWYWx1ZSA9IGlucHV0ID0+IGlucHV0LmZpbGVzLmxlbmd0aCA/IGlucHV0LmdldEF0dHJpYnV0ZSgnbXVsdGlwbGUnKSAhPT0gbnVsbCA/IGlucHV0LmZpbGVzIDogaW5wdXQuZmlsZXNbMF0gOiBudWxsOwoKICBjb25zdCBoYW5kbGVJbnB1dE9wdGlvbnMgPSAoaW5zdGFuY2UsIHBhcmFtcykgPT4gewogICAgY29uc3QgcG9wdXAgPSBnZXRQb3B1cCgpOwoKICAgIGNvbnN0IHByb2Nlc3NJbnB1dE9wdGlvbnMgPSBpbnB1dE9wdGlvbnMgPT4gcG9wdWxhdGVJbnB1dE9wdGlvbnNbcGFyYW1zLmlucHV0XShwb3B1cCwgZm9ybWF0SW5wdXRPcHRpb25zKGlucHV0T3B0aW9ucyksIHBhcmFtcyk7CgogICAgaWYgKGhhc1RvUHJvbWlzZUZuKHBhcmFtcy5pbnB1dE9wdGlvbnMpIHx8IGlzUHJvbWlzZShwYXJhbXMuaW5wdXRPcHRpb25zKSkgewogICAgICBzaG93TG9hZGluZyhnZXRDb25maXJtQnV0dG9uKCkpOwogICAgICBhc1Byb21pc2UocGFyYW1zLmlucHV0T3B0aW9ucykudGhlbihpbnB1dE9wdGlvbnMgPT4gewogICAgICAgIGluc3RhbmNlLmhpZGVMb2FkaW5nKCk7CiAgICAgICAgcHJvY2Vzc0lucHV0T3B0aW9ucyhpbnB1dE9wdGlvbnMpOwogICAgICB9KTsKICAgIH0gZWxzZSBpZiAodHlwZW9mIHBhcmFtcy5pbnB1dE9wdGlvbnMgPT09ICdvYmplY3QnKSB7CiAgICAgIHByb2Nlc3NJbnB1dE9wdGlvbnMocGFyYW1zLmlucHV0T3B0aW9ucyk7CiAgICB9IGVsc2UgewogICAgICBlcnJvcigiVW5leHBlY3RlZCB0eXBlIG9mIGlucHV0T3B0aW9ucyEgRXhwZWN0ZWQgb2JqZWN0LCBNYXAgb3IgUHJvbWlzZSwgZ290ICIuY29uY2F0KHR5cGVvZiBwYXJhbXMuaW5wdXRPcHRpb25zKSk7CiAgICB9CiAgfTsKCiAgY29uc3QgaGFuZGxlSW5wdXRWYWx1ZSA9IChpbnN0YW5jZSwgcGFyYW1zKSA9PiB7CiAgICBjb25zdCBpbnB1dCA9IGluc3RhbmNlLmdldElucHV0KCk7CiAgICBoaWRlKGlucHV0KTsKICAgIGFzUHJvbWlzZShwYXJhbXMuaW5wdXRWYWx1ZSkudGhlbihpbnB1dFZhbHVlID0+IHsKICAgICAgaW5wdXQudmFsdWUgPSBwYXJhbXMuaW5wdXQgPT09ICdudW1iZXInID8gcGFyc2VGbG9hdChpbnB1dFZhbHVlKSB8fCAwIDogIiIuY29uY2F0KGlucHV0VmFsdWUpOwogICAgICBzaG93KGlucHV0KTsKICAgICAgaW5wdXQuZm9jdXMoKTsKICAgICAgaW5zdGFuY2UuaGlkZUxvYWRpbmcoKTsKICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgIGVycm9yKCJFcnJvciBpbiBpbnB1dFZhbHVlIHByb21pc2U6ICIuY29uY2F0KGVycikpOwogICAgICBpbnB1dC52YWx1ZSA9ICcnOwogICAgICBzaG93KGlucHV0KTsKICAgICAgaW5wdXQuZm9jdXMoKTsKICAgICAgaW5zdGFuY2UuaGlkZUxvYWRpbmcoKTsKICAgIH0pOwogIH07CgogIGNvbnN0IHBvcHVsYXRlSW5wdXRPcHRpb25zID0gewogICAgc2VsZWN0OiAocG9wdXAsIGlucHV0T3B0aW9ucywgcGFyYW1zKSA9PiB7CiAgICAgIGNvbnN0IHNlbGVjdCA9IGdldENoaWxkQnlDbGFzcyhwb3B1cCwgc3dhbENsYXNzZXMuc2VsZWN0KTsKCiAgICAgIGNvbnN0IHJlbmRlck9wdGlvbiA9IChwYXJlbnQsIG9wdGlvbkxhYmVsLCBvcHRpb25WYWx1ZSkgPT4gewogICAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpOwogICAgICAgIG9wdGlvbi52YWx1ZSA9IG9wdGlvblZhbHVlOwogICAgICAgIHNldElubmVySHRtbChvcHRpb24sIG9wdGlvbkxhYmVsKTsKICAgICAgICBvcHRpb24uc2VsZWN0ZWQgPSBpc1NlbGVjdGVkKG9wdGlvblZhbHVlLCBwYXJhbXMuaW5wdXRWYWx1ZSk7CiAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKG9wdGlvbik7CiAgICAgIH07CgogICAgICBpbnB1dE9wdGlvbnMuZm9yRWFjaChpbnB1dE9wdGlvbiA9PiB7CiAgICAgICAgY29uc3Qgb3B0aW9uVmFsdWUgPSBpbnB1dE9wdGlvblswXTsKICAgICAgICBjb25zdCBvcHRpb25MYWJlbCA9IGlucHV0T3B0aW9uWzFdOyAvLyA8b3B0Z3JvdXA+IHNwZWM6CiAgICAgICAgLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSL2h0bWw0MDEvaW50ZXJhY3QvZm9ybXMuaHRtbCNoLTE3LjYKICAgICAgICAvLyAiLi4uYWxsIE9QVEdST1VQIGVsZW1lbnRzIG11c3QgYmUgc3BlY2lmaWVkIGRpcmVjdGx5IHdpdGhpbiBhIFNFTEVDVCBlbGVtZW50IChpLmUuLCBncm91cHMgbWF5IG5vdCBiZSBuZXN0ZWQpLi4uIgogICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgdGhpcyBpcyBhIDxvcHRncm91cD4KCiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob3B0aW9uTGFiZWwpKSB7CiAgICAgICAgICAvLyBpZiBpdCBpcyBhbiBhcnJheSwgdGhlbiBpdCBpcyBhbiA8b3B0Z3JvdXA+CiAgICAgICAgICBjb25zdCBvcHRncm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGdyb3VwJyk7CiAgICAgICAgICBvcHRncm91cC5sYWJlbCA9IG9wdGlvblZhbHVlOwogICAgICAgICAgb3B0Z3JvdXAuZGlzYWJsZWQgPSBmYWxzZTsgLy8gbm90IGNvbmZpZ3VyYWJsZSBmb3Igbm93CgogICAgICAgICAgc2VsZWN0LmFwcGVuZENoaWxkKG9wdGdyb3VwKTsKICAgICAgICAgIG9wdGlvbkxhYmVsLmZvckVhY2gobyA9PiByZW5kZXJPcHRpb24ob3B0Z3JvdXAsIG9bMV0sIG9bMF0pKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gY2FzZSBvZiA8b3B0aW9uPgogICAgICAgICAgcmVuZGVyT3B0aW9uKHNlbGVjdCwgb3B0aW9uTGFiZWwsIG9wdGlvblZhbHVlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBzZWxlY3QuZm9jdXMoKTsKICAgIH0sCiAgICByYWRpbzogKHBvcHVwLCBpbnB1dE9wdGlvbnMsIHBhcmFtcykgPT4gewogICAgICBjb25zdCByYWRpbyA9IGdldENoaWxkQnlDbGFzcyhwb3B1cCwgc3dhbENsYXNzZXMucmFkaW8pOwogICAgICBpbnB1dE9wdGlvbnMuZm9yRWFjaChpbnB1dE9wdGlvbiA9PiB7CiAgICAgICAgY29uc3QgcmFkaW9WYWx1ZSA9IGlucHV0T3B0aW9uWzBdOwogICAgICAgIGNvbnN0IHJhZGlvTGFiZWwgPSBpbnB1dE9wdGlvblsxXTsKICAgICAgICBjb25zdCByYWRpb0lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICBjb25zdCByYWRpb0xhYmVsRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xhYmVsJyk7CiAgICAgICAgcmFkaW9JbnB1dC50eXBlID0gJ3JhZGlvJzsKICAgICAgICByYWRpb0lucHV0Lm5hbWUgPSBzd2FsQ2xhc3Nlcy5yYWRpbzsKICAgICAgICByYWRpb0lucHV0LnZhbHVlID0gcmFkaW9WYWx1ZTsKCiAgICAgICAgaWYgKGlzU2VsZWN0ZWQocmFkaW9WYWx1ZSwgcGFyYW1zLmlucHV0VmFsdWUpKSB7CiAgICAgICAgICByYWRpb0lucHV0LmNoZWNrZWQgPSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgbGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7CiAgICAgICAgc2V0SW5uZXJIdG1sKGxhYmVsLCByYWRpb0xhYmVsKTsKICAgICAgICBsYWJlbC5jbGFzc05hbWUgPSBzd2FsQ2xhc3Nlcy5sYWJlbDsKICAgICAgICByYWRpb0xhYmVsRWxlbWVudC5hcHBlbmRDaGlsZChyYWRpb0lucHV0KTsKICAgICAgICByYWRpb0xhYmVsRWxlbWVudC5hcHBlbmRDaGlsZChsYWJlbCk7CiAgICAgICAgcmFkaW8uYXBwZW5kQ2hpbGQocmFkaW9MYWJlbEVsZW1lbnQpOwogICAgICB9KTsKICAgICAgY29uc3QgcmFkaW9zID0gcmFkaW8ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQnKTsKCiAgICAgIGlmIChyYWRpb3MubGVuZ3RoKSB7CiAgICAgICAgcmFkaW9zWzBdLmZvY3VzKCk7CiAgICAgIH0KICAgIH0KICB9OwogIC8qKgogICAqIENvbnZlcnRzIGBpbnB1dE9wdGlvbnNgIGludG8gYW4gYXJyYXkgb2YgYFt2YWx1ZSwgbGFiZWxdYHMKICAgKiBAcGFyYW0gaW5wdXRPcHRpb25zCiAgICovCgogIGNvbnN0IGZvcm1hdElucHV0T3B0aW9ucyA9IGlucHV0T3B0aW9ucyA9PiB7CiAgICBjb25zdCByZXN1bHQgPSBbXTsKCiAgICBpZiAodHlwZW9mIE1hcCAhPT0gJ3VuZGVmaW5lZCcgJiYgaW5wdXRPcHRpb25zIGluc3RhbmNlb2YgTWFwKSB7CiAgICAgIGlucHV0T3B0aW9ucy5mb3JFYWNoKCh2YWx1ZSwga2V5KSA9PiB7CiAgICAgICAgbGV0IHZhbHVlRm9ybWF0dGVkID0gdmFsdWU7CgogICAgICAgIGlmICh0eXBlb2YgdmFsdWVGb3JtYXR0ZWQgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAvLyBjYXNlIG9mIDxvcHRncm91cD4KICAgICAgICAgIHZhbHVlRm9ybWF0dGVkID0gZm9ybWF0SW5wdXRPcHRpb25zKHZhbHVlRm9ybWF0dGVkKTsKICAgICAgICB9CgogICAgICAgIHJlc3VsdC5wdXNoKFtrZXksIHZhbHVlRm9ybWF0dGVkXSk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgT2JqZWN0LmtleXMoaW5wdXRPcHRpb25zKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgbGV0IHZhbHVlRm9ybWF0dGVkID0gaW5wdXRPcHRpb25zW2tleV07CgogICAgICAgIGlmICh0eXBlb2YgdmFsdWVGb3JtYXR0ZWQgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICAvLyBjYXNlIG9mIDxvcHRncm91cD4KICAgICAgICAgIHZhbHVlRm9ybWF0dGVkID0gZm9ybWF0SW5wdXRPcHRpb25zKHZhbHVlRm9ybWF0dGVkKTsKICAgICAgICB9CgogICAgICAgIHJlc3VsdC5wdXNoKFtrZXksIHZhbHVlRm9ybWF0dGVkXSk7CiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiByZXN1bHQ7CiAgfTsKCiAgY29uc3QgaXNTZWxlY3RlZCA9IChvcHRpb25WYWx1ZSwgaW5wdXRWYWx1ZSkgPT4gewogICAgcmV0dXJuIGlucHV0VmFsdWUgJiYgaW5wdXRWYWx1ZS50b1N0cmluZygpID09PSBvcHRpb25WYWx1ZS50b1N0cmluZygpOwogIH07CgogIGNvbnN0IGhhbmRsZUNvbmZpcm1CdXR0b25DbGljayA9IGluc3RhbmNlID0+IHsKICAgIGNvbnN0IGlubmVyUGFyYW1zID0gcHJpdmF0ZVByb3BzLmlubmVyUGFyYW1zLmdldChpbnN0YW5jZSk7CiAgICBpbnN0YW5jZS5kaXNhYmxlQnV0dG9ucygpOwoKICAgIGlmIChpbm5lclBhcmFtcy5pbnB1dCkgewogICAgICBoYW5kbGVDb25maXJtT3JEZW55V2l0aElucHV0KGluc3RhbmNlLCAnY29uZmlybScpOwogICAgfSBlbHNlIHsKICAgICAgY29uZmlybShpbnN0YW5jZSwgdHJ1ZSk7CiAgICB9CiAgfTsKICBjb25zdCBoYW5kbGVEZW55QnV0dG9uQ2xpY2sgPSBpbnN0YW5jZSA9PiB7CiAgICBjb25zdCBpbm5lclBhcmFtcyA9IHByaXZhdGVQcm9wcy5pbm5lclBhcmFtcy5nZXQoaW5zdGFuY2UpOwogICAgaW5zdGFuY2UuZGlzYWJsZUJ1dHRvbnMoKTsKCiAgICBpZiAoaW5uZXJQYXJhbXMucmV0dXJuSW5wdXRWYWx1ZU9uRGVueSkgewogICAgICBoYW5kbGVDb25maXJtT3JEZW55V2l0aElucHV0KGluc3RhbmNlLCAnZGVueScpOwogICAgfSBlbHNlIHsKICAgICAgZGVueShpbnN0YW5jZSwgZmFsc2UpOwogICAgfQogIH07CiAgY29uc3QgaGFuZGxlQ2FuY2VsQnV0dG9uQ2xpY2sgPSAoaW5zdGFuY2UsIGRpc21pc3NXaXRoKSA9PiB7CiAgICBpbnN0YW5jZS5kaXNhYmxlQnV0dG9ucygpOwogICAgZGlzbWlzc1dpdGgoRGlzbWlzc1JlYXNvbi5jYW5jZWwpOwogIH07CgogIGNvbnN0IGhhbmRsZUNvbmZpcm1PckRlbnlXaXRoSW5wdXQgPSAoaW5zdGFuY2UsIHR5cGUKICAvKiAnY29uZmlybScgfCAnZGVueScgKi8KICApID0+IHsKICAgIGNvbnN0IGlubmVyUGFyYW1zID0gcHJpdmF0ZVByb3BzLmlubmVyUGFyYW1zLmdldChpbnN0YW5jZSk7CiAgICBjb25zdCBpbnB1dFZhbHVlID0gZ2V0SW5wdXRWYWx1ZShpbnN0YW5jZSwgaW5uZXJQYXJhbXMpOwoKICAgIGlmIChpbm5lclBhcmFtcy5pbnB1dFZhbGlkYXRvcikgewogICAgICBoYW5kbGVJbnB1dFZhbGlkYXRvcihpbnN0YW5jZSwgaW5wdXRWYWx1ZSwgdHlwZSk7CiAgICB9IGVsc2UgaWYgKCFpbnN0YW5jZS5nZXRJbnB1dCgpLmNoZWNrVmFsaWRpdHkoKSkgewogICAgICBpbnN0YW5jZS5lbmFibGVCdXR0b25zKCk7CiAgICAgIGluc3RhbmNlLnNob3dWYWxpZGF0aW9uTWVzc2FnZShpbm5lclBhcmFtcy52YWxpZGF0aW9uTWVzc2FnZSk7CiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdkZW55JykgewogICAgICBkZW55KGluc3RhbmNlLCBpbnB1dFZhbHVlKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbmZpcm0oaW5zdGFuY2UsIGlucHV0VmFsdWUpOwogICAgfQogIH07CgogIGNvbnN0IGhhbmRsZUlucHV0VmFsaWRhdG9yID0gKGluc3RhbmNlLCBpbnB1dFZhbHVlLCB0eXBlCiAgLyogJ2NvbmZpcm0nIHwgJ2RlbnknICovCiAgKSA9PiB7CiAgICBjb25zdCBpbm5lclBhcmFtcyA9IHByaXZhdGVQcm9wcy5pbm5lclBhcmFtcy5nZXQoaW5zdGFuY2UpOwogICAgaW5zdGFuY2UuZGlzYWJsZUlucHV0KCk7CiAgICBjb25zdCB2YWxpZGF0aW9uUHJvbWlzZSA9IFByb21pc2UucmVzb2x2ZSgpLnRoZW4oKCkgPT4gYXNQcm9taXNlKGlubmVyUGFyYW1zLmlucHV0VmFsaWRhdG9yKGlucHV0VmFsdWUsIGlubmVyUGFyYW1zLnZhbGlkYXRpb25NZXNzYWdlKSkpOwogICAgdmFsaWRhdGlvblByb21pc2UudGhlbih2YWxpZGF0aW9uTWVzc2FnZSA9PiB7CiAgICAgIGluc3RhbmNlLmVuYWJsZUJ1dHRvbnMoKTsKICAgICAgaW5zdGFuY2UuZW5hYmxlSW5wdXQoKTsKCiAgICAgIGlmICh2YWxpZGF0aW9uTWVzc2FnZSkgewogICAgICAgIGluc3RhbmNlLnNob3dWYWxpZGF0aW9uTWVzc2FnZSh2YWxpZGF0aW9uTWVzc2FnZSk7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2RlbnknKSB7CiAgICAgICAgZGVueShpbnN0YW5jZSwgaW5wdXRWYWx1ZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uZmlybShpbnN0YW5jZSwgaW5wdXRWYWx1ZSk7CiAgICAgIH0KICAgIH0pOwogIH07CgogIGNvbnN0IGRlbnkgPSAoaW5zdGFuY2UsIHZhbHVlKSA9PiB7CiAgICBjb25zdCBpbm5lclBhcmFtcyA9IHByaXZhdGVQcm9wcy5pbm5lclBhcmFtcy5nZXQoaW5zdGFuY2UgfHwgdW5kZWZpbmVkKTsKCiAgICBpZiAoaW5uZXJQYXJhbXMuc2hvd0xvYWRlck9uRGVueSkgewogICAgICBzaG93TG9hZGluZyhnZXREZW55QnV0dG9uKCkpOwogICAgfQoKICAgIGlmIChpbm5lclBhcmFtcy5wcmVEZW55KSB7CiAgICAgIHByaXZhdGVQcm9wcy5hd2FpdGluZ1Byb21pc2Uuc2V0KGluc3RhbmNlIHx8IHVuZGVmaW5lZCwgdHJ1ZSk7IC8vIEZsYWdnaW5nIHRoZSBpbnN0YW5jZSBhcyBhd2FpdGluZyBhIHByb21pc2Ugc28gaXQncyBvd24gcHJvbWlzZSdzIHJlamVjdC9yZXNvbHZlIG1ldGhvZHMgZG9lc250IGdldCBkZXN0cm95ZWQgdW50aWwgdGhlIHJlc3VsdCBmcm9tIHRoaXMgcHJlRGVueSdzIHByb21pc2UgaXMgcmVjZWl2ZWQKCiAgICAgIGNvbnN0IHByZURlbnlQcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiBhc1Byb21pc2UoaW5uZXJQYXJhbXMucHJlRGVueSh2YWx1ZSwgaW5uZXJQYXJhbXMudmFsaWRhdGlvbk1lc3NhZ2UpKSk7CiAgICAgIHByZURlbnlQcm9taXNlLnRoZW4ocHJlRGVueVZhbHVlID0+IHsKICAgICAgICBpZiAocHJlRGVueVZhbHVlID09PSBmYWxzZSkgewogICAgICAgICAgaW5zdGFuY2UuaGlkZUxvYWRpbmcoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaW5zdGFuY2UuY2xvc2VQb3B1cCh7CiAgICAgICAgICAgIGlzRGVuaWVkOiB0cnVlLAogICAgICAgICAgICB2YWx1ZTogdHlwZW9mIHByZURlbnlWYWx1ZSA9PT0gJ3VuZGVmaW5lZCcgPyB2YWx1ZSA6IHByZURlbnlWYWx1ZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KS5jYXRjaChlcnJvciQkMSA9PiByZWplY3RXaXRoKGluc3RhbmNlIHx8IHVuZGVmaW5lZCwgZXJyb3IkJDEpKTsKICAgIH0gZWxzZSB7CiAgICAgIGluc3RhbmNlLmNsb3NlUG9wdXAoewogICAgICAgIGlzRGVuaWVkOiB0cnVlLAogICAgICAgIHZhbHVlCiAgICAgIH0pOwogICAgfQogIH07CgogIGNvbnN0IHN1Y2NlZWRXaXRoID0gKGluc3RhbmNlLCB2YWx1ZSkgPT4gewogICAgaW5zdGFuY2UuY2xvc2VQb3B1cCh7CiAgICAgIGlzQ29uZmlybWVkOiB0cnVlLAogICAgICB2YWx1ZQogICAgfSk7CiAgfTsKCiAgY29uc3QgcmVqZWN0V2l0aCA9IChpbnN0YW5jZSwgZXJyb3IkJDEpID0+IHsKICAgIGluc3RhbmNlLnJlamVjdFByb21pc2UoZXJyb3IkJDEpOwogIH07CgogIGNvbnN0IGNvbmZpcm0gPSAoaW5zdGFuY2UsIHZhbHVlKSA9PiB7CiAgICBjb25zdCBpbm5lclBhcmFtcyA9IHByaXZhdGVQcm9wcy5pbm5lclBhcmFtcy5nZXQoaW5zdGFuY2UgfHwgdW5kZWZpbmVkKTsKCiAgICBpZiAoaW5uZXJQYXJhbXMuc2hvd0xvYWRlck9uQ29uZmlybSkgewogICAgICBzaG93TG9hZGluZygpOwogICAgfQoKICAgIGlmIChpbm5lclBhcmFtcy5wcmVDb25maXJtKSB7CiAgICAgIGluc3RhbmNlLnJlc2V0VmFsaWRhdGlvbk1lc3NhZ2UoKTsKICAgICAgcHJpdmF0ZVByb3BzLmF3YWl0aW5nUHJvbWlzZS5zZXQoaW5zdGFuY2UgfHwgdW5kZWZpbmVkLCB0cnVlKTsgLy8gRmxhZ2dpbmcgdGhlIGluc3RhbmNlIGFzIGF3YWl0aW5nIGEgcHJvbWlzZSBzbyBpdCdzIG93biBwcm9taXNlJ3MgcmVqZWN0L3Jlc29sdmUgbWV0aG9kcyBkb2VzbnQgZ2V0IGRlc3Ryb3llZCB1bnRpbCB0aGUgcmVzdWx0IGZyb20gdGhpcyBwcmVDb25maXJtJ3MgcHJvbWlzZSBpcyByZWNlaXZlZAoKICAgICAgY29uc3QgcHJlQ29uZmlybVByb21pc2UgPSBQcm9taXNlLnJlc29sdmUoKS50aGVuKCgpID0+IGFzUHJvbWlzZShpbm5lclBhcmFtcy5wcmVDb25maXJtKHZhbHVlLCBpbm5lclBhcmFtcy52YWxpZGF0aW9uTWVzc2FnZSkpKTsKICAgICAgcHJlQ29uZmlybVByb21pc2UudGhlbihwcmVDb25maXJtVmFsdWUgPT4gewogICAgICAgIGlmIChpc1Zpc2libGUoZ2V0VmFsaWRhdGlvbk1lc3NhZ2UoKSkgfHwgcHJlQ29uZmlybVZhbHVlID09PSBmYWxzZSkgewogICAgICAgICAgaW5zdGFuY2UuaGlkZUxvYWRpbmcoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3VjY2VlZFdpdGgoaW5zdGFuY2UsIHR5cGVvZiBwcmVDb25maXJtVmFsdWUgPT09ICd1bmRlZmluZWQnID8gdmFsdWUgOiBwcmVDb25maXJtVmFsdWUpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goZXJyb3IkJDEgPT4gcmVqZWN0V2l0aChpbnN0YW5jZSB8fCB1bmRlZmluZWQsIGVycm9yJCQxKSk7CiAgICB9IGVsc2UgewogICAgICBzdWNjZWVkV2l0aChpbnN0YW5jZSwgdmFsdWUpOwogICAgfQogIH07CgogIGNvbnN0IGFkZEtleWRvd25IYW5kbGVyID0gKGluc3RhbmNlLCBnbG9iYWxTdGF0ZSwgaW5uZXJQYXJhbXMsIGRpc21pc3NXaXRoKSA9PiB7CiAgICBpZiAoZ2xvYmFsU3RhdGUua2V5ZG93blRhcmdldCAmJiBnbG9iYWxTdGF0ZS5rZXlkb3duSGFuZGxlckFkZGVkKSB7CiAgICAgIGdsb2JhbFN0YXRlLmtleWRvd25UYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGdsb2JhbFN0YXRlLmtleWRvd25IYW5kbGVyLCB7CiAgICAgICAgY2FwdHVyZTogZ2xvYmFsU3RhdGUua2V5ZG93bkxpc3RlbmVyQ2FwdHVyZQogICAgICB9KTsKICAgICAgZ2xvYmFsU3RhdGUua2V5ZG93bkhhbmRsZXJBZGRlZCA9IGZhbHNlOwogICAgfQoKICAgIGlmICghaW5uZXJQYXJhbXMudG9hc3QpIHsKICAgICAgZ2xvYmFsU3RhdGUua2V5ZG93bkhhbmRsZXIgPSBlID0+IGtleWRvd25IYW5kbGVyKGluc3RhbmNlLCBlLCBkaXNtaXNzV2l0aCk7CgogICAgICBnbG9iYWxTdGF0ZS5rZXlkb3duVGFyZ2V0ID0gaW5uZXJQYXJhbXMua2V5ZG93bkxpc3RlbmVyQ2FwdHVyZSA/IHdpbmRvdyA6IGdldFBvcHVwKCk7CiAgICAgIGdsb2JhbFN0YXRlLmtleWRvd25MaXN0ZW5lckNhcHR1cmUgPSBpbm5lclBhcmFtcy5rZXlkb3duTGlzdGVuZXJDYXB0dXJlOwogICAgICBnbG9iYWxTdGF0ZS5rZXlkb3duVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBnbG9iYWxTdGF0ZS5rZXlkb3duSGFuZGxlciwgewogICAgICAgIGNhcHR1cmU6IGdsb2JhbFN0YXRlLmtleWRvd25MaXN0ZW5lckNhcHR1cmUKICAgICAgfSk7CiAgICAgIGdsb2JhbFN0YXRlLmtleWRvd25IYW5kbGVyQWRkZWQgPSB0cnVlOwogICAgfQogIH07IC8vIEZvY3VzIGhhbmRsaW5nCgogIGNvbnN0IHNldEZvY3VzID0gKGlubmVyUGFyYW1zLCBpbmRleCwgaW5jcmVtZW50KSA9PiB7CiAgICBjb25zdCBmb2N1c2FibGVFbGVtZW50cyA9IGdldEZvY3VzYWJsZUVsZW1lbnRzKCk7IC8vIHNlYXJjaCBmb3IgdmlzaWJsZSBlbGVtZW50cyBhbmQgc2VsZWN0IHRoZSBuZXh0IHBvc3NpYmxlIG1hdGNoCgogICAgaWYgKGZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCkgewogICAgICBpbmRleCA9IGluZGV4ICsgaW5jcmVtZW50OyAvLyByb2xsb3ZlciB0byBmaXJzdCBpdGVtCgogICAgICBpZiAoaW5kZXggPT09IGZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aCkgewogICAgICAgIGluZGV4ID0gMDsgLy8gZ28gdG8gbGFzdCBpdGVtCiAgICAgIH0gZWxzZSBpZiAoaW5kZXggPT09IC0xKSB7CiAgICAgICAgaW5kZXggPSBmb2N1c2FibGVFbGVtZW50cy5sZW5ndGggLSAxOwogICAgICB9CgogICAgICByZXR1cm4gZm9jdXNhYmxlRWxlbWVudHNbaW5kZXhdLmZvY3VzKCk7CiAgICB9IC8vIG5vIHZpc2libGUgZm9jdXNhYmxlIGVsZW1lbnRzLCBmb2N1cyB0aGUgcG9wdXAKCgogICAgZ2V0UG9wdXAoKS5mb2N1cygpOwogIH07CiAgY29uc3QgYXJyb3dLZXlzTmV4dEJ1dHRvbiA9IFsnQXJyb3dSaWdodCcsICdBcnJvd0Rvd24nXTsKICBjb25zdCBhcnJvd0tleXNQcmV2aW91c0J1dHRvbiA9IFsnQXJyb3dMZWZ0JywgJ0Fycm93VXAnXTsKCiAgY29uc3Qga2V5ZG93bkhhbmRsZXIgPSAoaW5zdGFuY2UsIGUsIGRpc21pc3NXaXRoKSA9PiB7CiAgICBjb25zdCBpbm5lclBhcmFtcyA9IHByaXZhdGVQcm9wcy5pbm5lclBhcmFtcy5nZXQoaW5zdGFuY2UpOwoKICAgIGlmICghaW5uZXJQYXJhbXMpIHsKICAgICAgcmV0dXJuOyAvLyBUaGlzIGluc3RhbmNlIGhhcyBhbHJlYWR5IGJlZW4gZGVzdHJveWVkCiAgICB9CgogICAgaWYgKGlubmVyUGFyYW1zLnN0b3BLZXlkb3duUHJvcGFnYXRpb24pIHsKICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgIH0gLy8gRU5URVIKCgogICAgaWYgKGUua2V5ID09PSAnRW50ZXInKSB7CiAgICAgIGhhbmRsZUVudGVyKGluc3RhbmNlLCBlLCBpbm5lclBhcmFtcyk7IC8vIFRBQgogICAgfSBlbHNlIGlmIChlLmtleSA9PT0gJ1RhYicpIHsKICAgICAgaGFuZGxlVGFiKGUsIGlubmVyUGFyYW1zKTsgLy8gQVJST1dTIC0gc3dpdGNoIGZvY3VzIGJldHdlZW4gYnV0dG9ucwogICAgfSBlbHNlIGlmIChbLi4uYXJyb3dLZXlzTmV4dEJ1dHRvbiwgLi4uYXJyb3dLZXlzUHJldmlvdXNCdXR0b25dLmluY2x1ZGVzKGUua2V5KSkgewogICAgICBoYW5kbGVBcnJvd3MoZS5rZXkpOyAvLyBFU0MKICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7CiAgICAgIGhhbmRsZUVzYyhlLCBpbm5lclBhcmFtcywgZGlzbWlzc1dpdGgpOwogICAgfQogIH07CgogIGNvbnN0IGhhbmRsZUVudGVyID0gKGluc3RhbmNlLCBlLCBpbm5lclBhcmFtcykgPT4gewogICAgLy8gIzcyMCAjNzIxCiAgICBpZiAoZS5pc0NvbXBvc2luZykgewogICAgICByZXR1cm47CiAgICB9CgogICAgaWYgKGUudGFyZ2V0ICYmIGluc3RhbmNlLmdldElucHV0KCkgJiYgZS50YXJnZXQub3V0ZXJIVE1MID09PSBpbnN0YW5jZS5nZXRJbnB1dCgpLm91dGVySFRNTCkgewogICAgICBpZiAoWyd0ZXh0YXJlYScsICdmaWxlJ10uaW5jbHVkZXMoaW5uZXJQYXJhbXMuaW5wdXQpKSB7CiAgICAgICAgcmV0dXJuOyAvLyBkbyBub3Qgc3VibWl0CiAgICAgIH0KCiAgICAgIGNsaWNrQ29uZmlybSgpOwogICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICB9CiAgfTsKCiAgY29uc3QgaGFuZGxlVGFiID0gKGUsIGlubmVyUGFyYW1zKSA9PiB7CiAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gZS50YXJnZXQ7CiAgICBjb25zdCBmb2N1c2FibGVFbGVtZW50cyA9IGdldEZvY3VzYWJsZUVsZW1lbnRzKCk7CiAgICBsZXQgYnRuSW5kZXggPSAtMTsKCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZvY3VzYWJsZUVsZW1lbnRzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGlmICh0YXJnZXRFbGVtZW50ID09PSBmb2N1c2FibGVFbGVtZW50c1tpXSkgewogICAgICAgIGJ0bkluZGV4ID0gaTsKICAgICAgICBicmVhazsKICAgICAgfQogICAgfQoKICAgIGlmICghZS5zaGlmdEtleSkgewogICAgICAvLyBDeWNsZSB0byB0aGUgbmV4dCBidXR0b24KICAgICAgc2V0Rm9jdXMoaW5uZXJQYXJhbXMsIGJ0bkluZGV4LCAxKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIEN5Y2xlIHRvIHRoZSBwcmV2IGJ1dHRvbgogICAgICBzZXRGb2N1cyhpbm5lclBhcmFtcywgYnRuSW5kZXgsIC0xKTsKICAgIH0KCiAgICBlLnN0b3BQcm9wYWdhdGlvbigpOwogICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogIH07CgogIGNvbnN0IGhhbmRsZUFycm93cyA9IGtleSA9PiB7CiAgICBjb25zdCBjb25maXJtQnV0dG9uID0gZ2V0Q29uZmlybUJ1dHRvbigpOwogICAgY29uc3QgZGVueUJ1dHRvbiA9IGdldERlbnlCdXR0b24oKTsKICAgIGNvbnN0IGNhbmNlbEJ1dHRvbiA9IGdldENhbmNlbEJ1dHRvbigpOwoKICAgIGlmICghW2NvbmZpcm1CdXR0b24sIGRlbnlCdXR0b24sIGNhbmNlbEJ1dHRvbl0uaW5jbHVkZXMoZG9jdW1lbnQuYWN0aXZlRWxlbWVudCkpIHsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIGNvbnN0IHNpYmxpbmcgPSBhcnJvd0tleXNOZXh0QnV0dG9uLmluY2x1ZGVzKGtleSkgPyAnbmV4dEVsZW1lbnRTaWJsaW5nJyA6ICdwcmV2aW91c0VsZW1lbnRTaWJsaW5nJzsKICAgIGNvbnN0IGJ1dHRvblRvRm9jdXMgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50W3NpYmxpbmddOwoKICAgIGlmIChidXR0b25Ub0ZvY3VzKSB7CiAgICAgIGJ1dHRvblRvRm9jdXMuZm9jdXMoKTsKICAgIH0KICB9OwoKICBjb25zdCBoYW5kbGVFc2MgPSAoZSwgaW5uZXJQYXJhbXMsIGRpc21pc3NXaXRoKSA9PiB7CiAgICBpZiAoY2FsbElmRnVuY3Rpb24oaW5uZXJQYXJhbXMuYWxsb3dFc2NhcGVLZXkpKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgZGlzbWlzc1dpdGgoRGlzbWlzc1JlYXNvbi5lc2MpOwogICAgfQogIH07CgogIGNvbnN0IGhhbmRsZVBvcHVwQ2xpY2sgPSAoaW5zdGFuY2UsIGRvbUNhY2hlLCBkaXNtaXNzV2l0aCkgPT4gewogICAgY29uc3QgaW5uZXJQYXJhbXMgPSBwcml2YXRlUHJvcHMuaW5uZXJQYXJhbXMuZ2V0KGluc3RhbmNlKTsKCiAgICBpZiAoaW5uZXJQYXJhbXMudG9hc3QpIHsKICAgICAgaGFuZGxlVG9hc3RDbGljayhpbnN0YW5jZSwgZG9tQ2FjaGUsIGRpc21pc3NXaXRoKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIElnbm9yZSBjbGljayBldmVudHMgdGhhdCBoYWQgbW91c2Vkb3duIG9uIHRoZSBwb3B1cCBidXQgbW91c2V1cCBvbiB0aGUgY29udGFpbmVyCiAgICAgIC8vIFRoaXMgY2FuIGhhcHBlbiB3aGVuIHRoZSB1c2VyIGRyYWdzIGEgc2xpZGVyCiAgICAgIGhhbmRsZU1vZGFsTW91c2Vkb3duKGRvbUNhY2hlKTsgLy8gSWdub3JlIGNsaWNrIGV2ZW50cyB0aGF0IGhhZCBtb3VzZWRvd24gb24gdGhlIGNvbnRhaW5lciBidXQgbW91c2V1cCBvbiB0aGUgcG9wdXAKCiAgICAgIGhhbmRsZUNvbnRhaW5lck1vdXNlZG93bihkb21DYWNoZSk7CiAgICAgIGhhbmRsZU1vZGFsQ2xpY2soaW5zdGFuY2UsIGRvbUNhY2hlLCBkaXNtaXNzV2l0aCk7CiAgICB9CiAgfTsKCiAgY29uc3QgaGFuZGxlVG9hc3RDbGljayA9IChpbnN0YW5jZSwgZG9tQ2FjaGUsIGRpc21pc3NXaXRoKSA9PiB7CiAgICAvLyBDbG9zaW5nIHRvYXN0IGJ5IGludGVybmFsIGNsaWNrCiAgICBkb21DYWNoZS5wb3B1cC5vbmNsaWNrID0gKCkgPT4gewogICAgICBjb25zdCBpbm5lclBhcmFtcyA9IHByaXZhdGVQcm9wcy5pbm5lclBhcmFtcy5nZXQoaW5zdGFuY2UpOwoKICAgICAgaWYgKGlubmVyUGFyYW1zLnNob3dDb25maXJtQnV0dG9uIHx8IGlubmVyUGFyYW1zLnNob3dEZW55QnV0dG9uIHx8IGlubmVyUGFyYW1zLnNob3dDYW5jZWxCdXR0b24gfHwgaW5uZXJQYXJhbXMuc2hvd0Nsb3NlQnV0dG9uIHx8IGlubmVyUGFyYW1zLnRpbWVyIHx8IGlubmVyUGFyYW1zLmlucHV0KSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBkaXNtaXNzV2l0aChEaXNtaXNzUmVhc29uLmNsb3NlKTsKICAgIH07CiAgfTsKCiAgbGV0IGlnbm9yZU91dHNpZGVDbGljayA9IGZhbHNlOwoKICBjb25zdCBoYW5kbGVNb2RhbE1vdXNlZG93biA9IGRvbUNhY2hlID0+IHsKICAgIGRvbUNhY2hlLnBvcHVwLm9ubW91c2Vkb3duID0gKCkgPT4gewogICAgICBkb21DYWNoZS5jb250YWluZXIub25tb3VzZXVwID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBkb21DYWNoZS5jb250YWluZXIub25tb3VzZXVwID0gdW5kZWZpbmVkOyAvLyBXZSBvbmx5IGNoZWNrIGlmIHRoZSBtb3VzZXVwIHRhcmdldCBpcyB0aGUgY29udGFpbmVyIGJlY2F1c2UgdXN1YWxseSBpdCBkb2Vzbid0CiAgICAgICAgLy8gaGF2ZSBhbnkgb3RoZXIgZGlyZWN0IGNoaWxkcmVuIGFzaWRlIG9mIHRoZSBwb3B1cAoKICAgICAgICBpZiAoZS50YXJnZXQgPT09IGRvbUNhY2hlLmNvbnRhaW5lcikgewogICAgICAgICAgaWdub3JlT3V0c2lkZUNsaWNrID0gdHJ1ZTsKICAgICAgICB9CiAgICAgIH07CiAgICB9OwogIH07CgogIGNvbnN0IGhhbmRsZUNvbnRhaW5lck1vdXNlZG93biA9IGRvbUNhY2hlID0+IHsKICAgIGRvbUNhY2hlLmNvbnRhaW5lci5vbm1vdXNlZG93biA9ICgpID0+IHsKICAgICAgZG9tQ2FjaGUucG9wdXAub25tb3VzZXVwID0gZnVuY3Rpb24gKGUpIHsKICAgICAgICBkb21DYWNoZS5wb3B1cC5vbm1vdXNldXAgPSB1bmRlZmluZWQ7IC8vIFdlIGFsc28gbmVlZCB0byBjaGVjayBpZiB0aGUgbW91c2V1cCB0YXJnZXQgaXMgYSBjaGlsZCBvZiB0aGUgcG9wdXAKCiAgICAgICAgaWYgKGUudGFyZ2V0ID09PSBkb21DYWNoZS5wb3B1cCB8fCBkb21DYWNoZS5wb3B1cC5jb250YWlucyhlLnRhcmdldCkpIHsKICAgICAgICAgIGlnbm9yZU91dHNpZGVDbGljayA9IHRydWU7CiAgICAgICAgfQogICAgICB9OwogICAgfTsKICB9OwoKICBjb25zdCBoYW5kbGVNb2RhbENsaWNrID0gKGluc3RhbmNlLCBkb21DYWNoZSwgZGlzbWlzc1dpdGgpID0+IHsKICAgIGRvbUNhY2hlLmNvbnRhaW5lci5vbmNsaWNrID0gZSA9PiB7CiAgICAgIGNvbnN0IGlubmVyUGFyYW1zID0gcHJpdmF0ZVByb3BzLmlubmVyUGFyYW1zLmdldChpbnN0YW5jZSk7CgogICAgICBpZiAoaWdub3JlT3V0c2lkZUNsaWNrKSB7CiAgICAgICAgaWdub3JlT3V0c2lkZUNsaWNrID0gZmFsc2U7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAoZS50YXJnZXQgPT09IGRvbUNhY2hlLmNvbnRhaW5lciAmJiBjYWxsSWZGdW5jdGlvbihpbm5lclBhcmFtcy5hbGxvd091dHNpZGVDbGljaykpIHsKICAgICAgICBkaXNtaXNzV2l0aChEaXNtaXNzUmVhc29uLmJhY2tkcm9wKTsKICAgICAgfQogICAgfTsKICB9OwoKICBmdW5jdGlvbiBfbWFpbih1c2VyUGFyYW1zKSB7CiAgICBsZXQgbWl4aW5QYXJhbXMgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHt9OwogICAgc2hvd1dhcm5pbmdzRm9yUGFyYW1zKE9iamVjdC5hc3NpZ24oe30sIG1peGluUGFyYW1zLCB1c2VyUGFyYW1zKSk7CgogICAgaWYgKGdsb2JhbFN0YXRlLmN1cnJlbnRJbnN0YW5jZSkgewogICAgICBnbG9iYWxTdGF0ZS5jdXJyZW50SW5zdGFuY2UuX2Rlc3Ryb3koKTsKCiAgICAgIGlmIChpc01vZGFsKCkpIHsKICAgICAgICB1bnNldEFyaWFIaWRkZW4oKTsKICAgICAgfQogICAgfQoKICAgIGdsb2JhbFN0YXRlLmN1cnJlbnRJbnN0YW5jZSA9IHRoaXM7CiAgICBjb25zdCBpbm5lclBhcmFtcyA9IHByZXBhcmVQYXJhbXModXNlclBhcmFtcywgbWl4aW5QYXJhbXMpOwogICAgc2V0UGFyYW1ldGVycyhpbm5lclBhcmFtcyk7CiAgICBPYmplY3QuZnJlZXplKGlubmVyUGFyYW1zKTsgLy8gY2xlYXIgdGhlIHByZXZpb3VzIHRpbWVyCgogICAgaWYgKGdsb2JhbFN0YXRlLnRpbWVvdXQpIHsKICAgICAgZ2xvYmFsU3RhdGUudGltZW91dC5zdG9wKCk7CiAgICAgIGRlbGV0ZSBnbG9iYWxTdGF0ZS50aW1lb3V0OwogICAgfSAvLyBjbGVhciB0aGUgcmVzdG9yZSBmb2N1cyB0aW1lb3V0CgoKICAgIGNsZWFyVGltZW91dChnbG9iYWxTdGF0ZS5yZXN0b3JlRm9jdXNUaW1lb3V0KTsKICAgIGNvbnN0IGRvbUNhY2hlID0gcG9wdWxhdGVEb21DYWNoZSh0aGlzKTsKICAgIHJlbmRlcih0aGlzLCBpbm5lclBhcmFtcyk7CiAgICBwcml2YXRlUHJvcHMuaW5uZXJQYXJhbXMuc2V0KHRoaXMsIGlubmVyUGFyYW1zKTsKICAgIHJldHVybiBzd2FsUHJvbWlzZSh0aGlzLCBkb21DYWNoZSwgaW5uZXJQYXJhbXMpOwogIH0KCiAgY29uc3QgcHJlcGFyZVBhcmFtcyA9ICh1c2VyUGFyYW1zLCBtaXhpblBhcmFtcykgPT4gewogICAgY29uc3QgdGVtcGxhdGVQYXJhbXMgPSBnZXRUZW1wbGF0ZVBhcmFtcyh1c2VyUGFyYW1zKTsKICAgIGNvbnN0IHBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRQYXJhbXMsIG1peGluUGFyYW1zLCB0ZW1wbGF0ZVBhcmFtcywgdXNlclBhcmFtcyk7IC8vIHByZWNlZGVuY2UgaXMgZGVzY3JpYmVkIGluICMyMTMxCgogICAgcGFyYW1zLnNob3dDbGFzcyA9IE9iamVjdC5hc3NpZ24oe30sIGRlZmF1bHRQYXJhbXMuc2hvd0NsYXNzLCBwYXJhbXMuc2hvd0NsYXNzKTsKICAgIHBhcmFtcy5oaWRlQ2xhc3MgPSBPYmplY3QuYXNzaWduKHt9LCBkZWZhdWx0UGFyYW1zLmhpZGVDbGFzcywgcGFyYW1zLmhpZGVDbGFzcyk7CiAgICByZXR1cm4gcGFyYW1zOwogIH07CgogIGNvbnN0IHN3YWxQcm9taXNlID0gKGluc3RhbmNlLCBkb21DYWNoZSwgaW5uZXJQYXJhbXMpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgIC8vIGZ1bmN0aW9ucyB0byBoYW5kbGUgYWxsIGNsb3NpbmdzL2Rpc21pc3NhbHMKICAgICAgY29uc3QgZGlzbWlzc1dpdGggPSBkaXNtaXNzID0+IHsKICAgICAgICBpbnN0YW5jZS5jbG9zZVBvcHVwKHsKICAgICAgICAgIGlzRGlzbWlzc2VkOiB0cnVlLAogICAgICAgICAgZGlzbWlzcwogICAgICAgIH0pOwogICAgICB9OwoKICAgICAgcHJpdmF0ZU1ldGhvZHMuc3dhbFByb21pc2VSZXNvbHZlLnNldChpbnN0YW5jZSwgcmVzb2x2ZSk7CiAgICAgIHByaXZhdGVNZXRob2RzLnN3YWxQcm9taXNlUmVqZWN0LnNldChpbnN0YW5jZSwgcmVqZWN0KTsKCiAgICAgIGRvbUNhY2hlLmNvbmZpcm1CdXR0b24ub25jbGljayA9ICgpID0+IGhhbmRsZUNvbmZpcm1CdXR0b25DbGljayhpbnN0YW5jZSk7CgogICAgICBkb21DYWNoZS5kZW55QnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBoYW5kbGVEZW55QnV0dG9uQ2xpY2soaW5zdGFuY2UpOwoKICAgICAgZG9tQ2FjaGUuY2FuY2VsQnV0dG9uLm9uY2xpY2sgPSAoKSA9PiBoYW5kbGVDYW5jZWxCdXR0b25DbGljayhpbnN0YW5jZSwgZGlzbWlzc1dpdGgpOwoKICAgICAgZG9tQ2FjaGUuY2xvc2VCdXR0b24ub25jbGljayA9ICgpID0+IGRpc21pc3NXaXRoKERpc21pc3NSZWFzb24uY2xvc2UpOwoKICAgICAgaGFuZGxlUG9wdXBDbGljayhpbnN0YW5jZSwgZG9tQ2FjaGUsIGRpc21pc3NXaXRoKTsKICAgICAgYWRkS2V5ZG93bkhhbmRsZXIoaW5zdGFuY2UsIGdsb2JhbFN0YXRlLCBpbm5lclBhcmFtcywgZGlzbWlzc1dpdGgpOwogICAgICBoYW5kbGVJbnB1dE9wdGlvbnNBbmRWYWx1ZShpbnN0YW5jZSwgaW5uZXJQYXJhbXMpOwogICAgICBvcGVuUG9wdXAoaW5uZXJQYXJhbXMpOwogICAgICBzZXR1cFRpbWVyKGdsb2JhbFN0YXRlLCBpbm5lclBhcmFtcywgZGlzbWlzc1dpdGgpOwogICAgICBpbml0Rm9jdXMoZG9tQ2FjaGUsIGlubmVyUGFyYW1zKTsgLy8gU2Nyb2xsIGNvbnRhaW5lciB0byB0b3Agb24gb3BlbiAoIzEyNDcsICMxOTQ2KQoKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgZG9tQ2FjaGUuY29udGFpbmVyLnNjcm9sbFRvcCA9IDA7CiAgICAgIH0pOwogICAgfSk7CiAgfTsKCiAgY29uc3QgcG9wdWxhdGVEb21DYWNoZSA9IGluc3RhbmNlID0+IHsKICAgIGNvbnN0IGRvbUNhY2hlID0gewogICAgICBwb3B1cDogZ2V0UG9wdXAoKSwKICAgICAgY29udGFpbmVyOiBnZXRDb250YWluZXIoKSwKICAgICAgYWN0aW9uczogZ2V0QWN0aW9ucygpLAogICAgICBjb25maXJtQnV0dG9uOiBnZXRDb25maXJtQnV0dG9uKCksCiAgICAgIGRlbnlCdXR0b246IGdldERlbnlCdXR0b24oKSwKICAgICAgY2FuY2VsQnV0dG9uOiBnZXRDYW5jZWxCdXR0b24oKSwKICAgICAgbG9hZGVyOiBnZXRMb2FkZXIoKSwKICAgICAgY2xvc2VCdXR0b246IGdldENsb3NlQnV0dG9uKCksCiAgICAgIHZhbGlkYXRpb25NZXNzYWdlOiBnZXRWYWxpZGF0aW9uTWVzc2FnZSgpLAogICAgICBwcm9ncmVzc1N0ZXBzOiBnZXRQcm9ncmVzc1N0ZXBzKCkKICAgIH07CiAgICBwcml2YXRlUHJvcHMuZG9tQ2FjaGUuc2V0KGluc3RhbmNlLCBkb21DYWNoZSk7CiAgICByZXR1cm4gZG9tQ2FjaGU7CiAgfTsKCiAgY29uc3Qgc2V0dXBUaW1lciA9IChnbG9iYWxTdGF0ZSQkMSwgaW5uZXJQYXJhbXMsIGRpc21pc3NXaXRoKSA9PiB7CiAgICBjb25zdCB0aW1lclByb2dyZXNzQmFyID0gZ2V0VGltZXJQcm9ncmVzc0JhcigpOwogICAgaGlkZSh0aW1lclByb2dyZXNzQmFyKTsKCiAgICBpZiAoaW5uZXJQYXJhbXMudGltZXIpIHsKICAgICAgZ2xvYmFsU3RhdGUkJDEudGltZW91dCA9IG5ldyBUaW1lcigoKSA9PiB7CiAgICAgICAgZGlzbWlzc1dpdGgoJ3RpbWVyJyk7CiAgICAgICAgZGVsZXRlIGdsb2JhbFN0YXRlJCQxLnRpbWVvdXQ7CiAgICAgIH0sIGlubmVyUGFyYW1zLnRpbWVyKTsKCiAgICAgIGlmIChpbm5lclBhcmFtcy50aW1lclByb2dyZXNzQmFyKSB7CiAgICAgICAgc2hvdyh0aW1lclByb2dyZXNzQmFyKTsKICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgIGlmIChnbG9iYWxTdGF0ZSQkMS50aW1lb3V0ICYmIGdsb2JhbFN0YXRlJCQxLnRpbWVvdXQucnVubmluZykgewogICAgICAgICAgICAvLyB0aW1lciBjYW4gYmUgYWxyZWFkeSBzdG9wcGVkIG9yIHVuc2V0IGF0IHRoaXMgcG9pbnQKICAgICAgICAgICAgYW5pbWF0ZVRpbWVyUHJvZ3Jlc3NCYXIoaW5uZXJQYXJhbXMudGltZXIpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfTsKCiAgY29uc3QgaW5pdEZvY3VzID0gKGRvbUNhY2hlLCBpbm5lclBhcmFtcykgPT4gewogICAgaWYgKGlubmVyUGFyYW1zLnRvYXN0KSB7CiAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoIWNhbGxJZkZ1bmN0aW9uKGlubmVyUGFyYW1zLmFsbG93RW50ZXJLZXkpKSB7CiAgICAgIHJldHVybiBibHVyQWN0aXZlRWxlbWVudCgpOwogICAgfQoKICAgIGlmICghZm9jdXNCdXR0b24oZG9tQ2FjaGUsIGlubmVyUGFyYW1zKSkgewogICAgICBzZXRGb2N1cyhpbm5lclBhcmFtcywgLTEsIDEpOwogICAgfQogIH07CgogIGNvbnN0IGZvY3VzQnV0dG9uID0gKGRvbUNhY2hlLCBpbm5lclBhcmFtcykgPT4gewogICAgaWYgKGlubmVyUGFyYW1zLmZvY3VzRGVueSAmJiBpc1Zpc2libGUoZG9tQ2FjaGUuZGVueUJ1dHRvbikpIHsKICAgICAgZG9tQ2FjaGUuZGVueUJ1dHRvbi5mb2N1cygpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KCiAgICBpZiAoaW5uZXJQYXJhbXMuZm9jdXNDYW5jZWwgJiYgaXNWaXNpYmxlKGRvbUNhY2hlLmNhbmNlbEJ1dHRvbikpIHsKICAgICAgZG9tQ2FjaGUuY2FuY2VsQnV0dG9uLmZvY3VzKCk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQoKICAgIGlmIChpbm5lclBhcmFtcy5mb2N1c0NvbmZpcm0gJiYgaXNWaXNpYmxlKGRvbUNhY2hlLmNvbmZpcm1CdXR0b24pKSB7CiAgICAgIGRvbUNhY2hlLmNvbmZpcm1CdXR0b24uZm9jdXMoKTsKICAgICAgcmV0dXJuIHRydWU7CiAgICB9CgogICAgcmV0dXJuIGZhbHNlOwogIH07CgogIGNvbnN0IGJsdXJBY3RpdmVFbGVtZW50ID0gKCkgPT4gewogICAgaWYgKGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgdHlwZW9mIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQuYmx1ciA9PT0gJ2Z1bmN0aW9uJykgewogICAgICBkb2N1bWVudC5hY3RpdmVFbGVtZW50LmJsdXIoKTsKICAgIH0KICB9OwoKICAvKioKICAgKiBVcGRhdGVzIHBvcHVwIHBhcmFtZXRlcnMuCiAgICovCgogIGZ1bmN0aW9uIHVwZGF0ZShwYXJhbXMpIHsKICAgIGNvbnN0IHBvcHVwID0gZ2V0UG9wdXAoKTsKICAgIGNvbnN0IGlubmVyUGFyYW1zID0gcHJpdmF0ZVByb3BzLmlubmVyUGFyYW1zLmdldCh0aGlzKTsKCiAgICBpZiAoIXBvcHVwIHx8IGhhc0NsYXNzKHBvcHVwLCBpbm5lclBhcmFtcy5oaWRlQ2xhc3MucG9wdXApKSB7CiAgICAgIHJldHVybiB3YXJuKCJZb3UncmUgdHJ5aW5nIHRvIHVwZGF0ZSB0aGUgY2xvc2VkIG9yIGNsb3NpbmcgcG9wdXAsIHRoYXQgd29uJ3Qgd29yay4gVXNlIHRoZSB1cGRhdGUoKSBtZXRob2QgaW4gcHJlQ29uZmlybSBwYXJhbWV0ZXIgb3Igc2hvdyBhIG5ldyBwb3B1cC4iKTsKICAgIH0KCiAgICBjb25zdCB2YWxpZFVwZGF0YWJsZVBhcmFtcyA9IHt9OyAvLyBhc3NpZ24gdmFsaWQgcGFyYW1zIGZyb20gYHBhcmFtc2AgdG8gYGRlZmF1bHRzYAoKICAgIE9iamVjdC5rZXlzKHBhcmFtcykuZm9yRWFjaChwYXJhbSA9PiB7CiAgICAgIGlmIChTd2FsLmlzVXBkYXRhYmxlUGFyYW1ldGVyKHBhcmFtKSkgewogICAgICAgIHZhbGlkVXBkYXRhYmxlUGFyYW1zW3BhcmFtXSA9IHBhcmFtc1twYXJhbV07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgd2FybigiSW52YWxpZCBwYXJhbWV0ZXIgdG8gdXBkYXRlOiBcIiIuY29uY2F0KHBhcmFtLCAiXCIuIFVwZGF0YWJsZSBwYXJhbXMgYXJlIGxpc3RlZCBoZXJlOiBodHRwczovL2dpdGh1Yi5jb20vc3dlZXRhbGVydDIvc3dlZXRhbGVydDIvYmxvYi9tYXN0ZXIvc3JjL3V0aWxzL3BhcmFtcy5qc1xuXG5JZiB5b3UgdGhpbmsgdGhpcyBwYXJhbWV0ZXIgc2hvdWxkIGJlIHVwZGF0YWJsZSwgcmVxdWVzdCBpdCBoZXJlOiBodHRwczovL2dpdGh1Yi5jb20vc3dlZXRhbGVydDIvc3dlZXRhbGVydDIvaXNzdWVzL25ldz90ZW1wbGF0ZT0wMl9mZWF0dXJlX3JlcXVlc3QubWQiKSk7CiAgICAgIH0KICAgIH0pOwogICAgY29uc3QgdXBkYXRlZFBhcmFtcyA9IE9iamVjdC5hc3NpZ24oe30sIGlubmVyUGFyYW1zLCB2YWxpZFVwZGF0YWJsZVBhcmFtcyk7CiAgICByZW5kZXIodGhpcywgdXBkYXRlZFBhcmFtcyk7CiAgICBwcml2YXRlUHJvcHMuaW5uZXJQYXJhbXMuc2V0KHRoaXMsIHVwZGF0ZWRQYXJhbXMpOwogICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywgewogICAgICBwYXJhbXM6IHsKICAgICAgICB2YWx1ZTogT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wYXJhbXMsIHBhcmFtcyksCiAgICAgICAgd3JpdGFibGU6IGZhbHNlLAogICAgICAgIGVudW1lcmFibGU6IHRydWUKICAgICAgfQogICAgfSk7CiAgfQoKICBmdW5jdGlvbiBfZGVzdHJveSgpIHsKICAgIGNvbnN0IGRvbUNhY2hlID0gcHJpdmF0ZVByb3BzLmRvbUNhY2hlLmdldCh0aGlzKTsKICAgIGNvbnN0IGlubmVyUGFyYW1zID0gcHJpdmF0ZVByb3BzLmlubmVyUGFyYW1zLmdldCh0aGlzKTsKCiAgICBpZiAoIWlubmVyUGFyYW1zKSB7CiAgICAgIGRpc3Bvc2VXZWFrTWFwcyh0aGlzKTsgLy8gVGhlIFdlYWtNYXBzIG1pZ2h0IGhhdmUgYmVlbiBwYXJ0bHkgZGVzdHJveWVkLCB3ZSBtdXN0IHJlY2FsbCBpdCB0byBkaXNwb3NlIGFueSByZW1haW5pbmcgd2Vha21hcHMgIzIzMzUKCiAgICAgIHJldHVybjsgLy8gVGhpcyBpbnN0YW5jZSBoYXMgYWxyZWFkeSBiZWVuIGRlc3Ryb3llZAogICAgfSAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbm90aGVyIFN3YWwgY2xvc2luZwoKCiAgICBpZiAoZG9tQ2FjaGUucG9wdXAgJiYgZ2xvYmFsU3RhdGUuc3dhbENsb3NlRXZlbnRGaW5pc2hlZENhbGxiYWNrKSB7CiAgICAgIGdsb2JhbFN0YXRlLnN3YWxDbG9zZUV2ZW50RmluaXNoZWRDYWxsYmFjaygpOwogICAgICBkZWxldGUgZ2xvYmFsU3RhdGUuc3dhbENsb3NlRXZlbnRGaW5pc2hlZENhbGxiYWNrOwogICAgfSAvLyBDaGVjayBpZiB0aGVyZSBpcyBhIHN3YWwgZGlzcG9zYWwgZGVmZXIgdGltZXIKCgogICAgaWYgKGdsb2JhbFN0YXRlLmRlZmVyRGlzcG9zYWxUaW1lcikgewogICAgICBjbGVhclRpbWVvdXQoZ2xvYmFsU3RhdGUuZGVmZXJEaXNwb3NhbFRpbWVyKTsKICAgICAgZGVsZXRlIGdsb2JhbFN0YXRlLmRlZmVyRGlzcG9zYWxUaW1lcjsKICAgIH0KCiAgICBpZiAodHlwZW9mIGlubmVyUGFyYW1zLmRpZERlc3Ryb3kgPT09ICdmdW5jdGlvbicpIHsKICAgICAgaW5uZXJQYXJhbXMuZGlkRGVzdHJveSgpOwogICAgfQoKICAgIGRpc3Bvc2VTd2FsKHRoaXMpOwogIH0KCiAgY29uc3QgZGlzcG9zZVN3YWwgPSBpbnN0YW5jZSA9PiB7CiAgICBkaXNwb3NlV2Vha01hcHMoaW5zdGFuY2UpOyAvLyBVbnNldCB0aGlzLnBhcmFtcyBzbyBHQyB3aWxsIGRpc3Bvc2UgaXQgKCMxNTY5KQoKICAgIGRlbGV0ZSBpbnN0YW5jZS5wYXJhbXM7IC8vIFVuc2V0IGdsb2JhbFN0YXRlIHByb3BzIHNvIEdDIHdpbGwgZGlzcG9zZSBnbG9iYWxTdGF0ZSAoIzE1NjkpCgogICAgZGVsZXRlIGdsb2JhbFN0YXRlLmtleWRvd25IYW5kbGVyOwogICAgZGVsZXRlIGdsb2JhbFN0YXRlLmtleWRvd25UYXJnZXQ7IC8vIFVuc2V0IGN1cnJlbnRJbnN0YW5jZQoKICAgIGRlbGV0ZSBnbG9iYWxTdGF0ZS5jdXJyZW50SW5zdGFuY2U7CiAgfTsKCiAgY29uc3QgZGlzcG9zZVdlYWtNYXBzID0gaW5zdGFuY2UgPT4gewogICAgLy8gSWYgdGhlIGN1cnJlbnQgaW5zdGFuY2UgaXMgYXdhaXRpbmcgYSBwcm9taXNlIHJlc3VsdCwgd2Uga2VlcCB0aGUgcHJpdmF0ZU1ldGhvZHMgdG8gY2FsbCB0aGVtIG9uY2UgdGhlIHByb21pc2UgcmVzdWx0IGlzIHJldHJpZXZlZCAjMjMzNQogICAgaWYgKGluc3RhbmNlLmlzQXdhaXRpbmdQcm9taXNlKCkpIHsKICAgICAgdW5zZXRXZWFrTWFwcyhwcml2YXRlUHJvcHMsIGluc3RhbmNlKTsKICAgICAgcHJpdmF0ZVByb3BzLmF3YWl0aW5nUHJvbWlzZS5zZXQoaW5zdGFuY2UsIHRydWUpOwogICAgfSBlbHNlIHsKICAgICAgdW5zZXRXZWFrTWFwcyhwcml2YXRlTWV0aG9kcywgaW5zdGFuY2UpOwogICAgICB1bnNldFdlYWtNYXBzKHByaXZhdGVQcm9wcywgaW5zdGFuY2UpOwogICAgfQogIH07CgogIGNvbnN0IHVuc2V0V2Vha01hcHMgPSAob2JqLCBpbnN0YW5jZSkgPT4gewogICAgZm9yIChjb25zdCBpIGluIG9iaikgewogICAgICBvYmpbaV0uZGVsZXRlKGluc3RhbmNlKTsKICAgIH0KICB9OwoKCgogIHZhciBpbnN0YW5jZU1ldGhvZHMgPSAvKiNfX1BVUkVfXyovT2JqZWN0LmZyZWV6ZSh7CiAgICBoaWRlTG9hZGluZzogaGlkZUxvYWRpbmcsCiAgICBkaXNhYmxlTG9hZGluZzogaGlkZUxvYWRpbmcsCiAgICBnZXRJbnB1dDogZ2V0SW5wdXQkMSwKICAgIGNsb3NlOiBjbG9zZSwKICAgIGlzQXdhaXRpbmdQcm9taXNlOiBpc0F3YWl0aW5nUHJvbWlzZSwKICAgIHJlamVjdFByb21pc2U6IHJlamVjdFByb21pc2UsCiAgICBjbG9zZVBvcHVwOiBjbG9zZSwKICAgIGNsb3NlTW9kYWw6IGNsb3NlLAogICAgY2xvc2VUb2FzdDogY2xvc2UsCiAgICBlbmFibGVCdXR0b25zOiBlbmFibGVCdXR0b25zLAogICAgZGlzYWJsZUJ1dHRvbnM6IGRpc2FibGVCdXR0b25zLAogICAgZW5hYmxlSW5wdXQ6IGVuYWJsZUlucHV0LAogICAgZGlzYWJsZUlucHV0OiBkaXNhYmxlSW5wdXQsCiAgICBzaG93VmFsaWRhdGlvbk1lc3NhZ2U6IHNob3dWYWxpZGF0aW9uTWVzc2FnZSwKICAgIHJlc2V0VmFsaWRhdGlvbk1lc3NhZ2U6IHJlc2V0VmFsaWRhdGlvbk1lc3NhZ2UkMSwKICAgIGdldFByb2dyZXNzU3RlcHM6IGdldFByb2dyZXNzU3RlcHMkMSwKICAgIF9tYWluOiBfbWFpbiwKICAgIHVwZGF0ZTogdXBkYXRlLAogICAgX2Rlc3Ryb3k6IF9kZXN0cm95CiAgfSk7CgogIGxldCBjdXJyZW50SW5zdGFuY2U7CgogIGNsYXNzIFN3ZWV0QWxlcnQgewogICAgY29uc3RydWN0b3IoKSB7CiAgICAgIC8vIFByZXZlbnQgcnVuIGluIE5vZGUgZW52CiAgICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgY3VycmVudEluc3RhbmNlID0gdGhpczsKCiAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICAgIH0KCiAgICAgIGNvbnN0IG91dGVyUGFyYW1zID0gT2JqZWN0LmZyZWV6ZSh0aGlzLmNvbnN0cnVjdG9yLmFyZ3NUb1BhcmFtcyhhcmdzKSk7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHZhbHVlOiBvdXRlclBhcmFtcywKICAgICAgICAgIHdyaXRhYmxlOiBmYWxzZSwKICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuX21haW4odGhpcy5wYXJhbXMpOwoKICAgICAgcHJpdmF0ZVByb3BzLnByb21pc2Uuc2V0KHRoaXMsIHByb21pc2UpOwogICAgfSAvLyBgY2F0Y2hgIGNhbm5vdCBiZSB0aGUgbmFtZSBvZiBhIG1vZHVsZSBleHBvcnQsIHNvIHdlIGRlZmluZSBvdXIgdGhlbmFibGUgbWV0aG9kcyBoZXJlIGluc3RlYWQKCgogICAgdGhlbihvbkZ1bGZpbGxlZCkgewogICAgICBjb25zdCBwcm9taXNlID0gcHJpdmF0ZVByb3BzLnByb21pc2UuZ2V0KHRoaXMpOwogICAgICByZXR1cm4gcHJvbWlzZS50aGVuKG9uRnVsZmlsbGVkKTsKICAgIH0KCiAgICBmaW5hbGx5KG9uRmluYWxseSkgewogICAgICBjb25zdCBwcm9taXNlID0gcHJpdmF0ZVByb3BzLnByb21pc2UuZ2V0KHRoaXMpOwogICAgICByZXR1cm4gcHJvbWlzZS5maW5hbGx5KG9uRmluYWxseSk7CiAgICB9CgogIH0gLy8gQXNzaWduIGluc3RhbmNlIG1ldGhvZHMgZnJvbSBzcmMvaW5zdGFuY2VNZXRob2RzLyouanMgdG8gcHJvdG90eXBlCgoKICBPYmplY3QuYXNzaWduKFN3ZWV0QWxlcnQucHJvdG90eXBlLCBpbnN0YW5jZU1ldGhvZHMpOyAvLyBBc3NpZ24gc3RhdGljIG1ldGhvZHMgZnJvbSBzcmMvc3RhdGljTWV0aG9kcy8qLmpzIHRvIGNvbnN0cnVjdG9yCgogIE9iamVjdC5hc3NpZ24oU3dlZXRBbGVydCwgc3RhdGljTWV0aG9kcyk7IC8vIFByb3h5IHRvIGluc3RhbmNlIG1ldGhvZHMgdG8gY29uc3RydWN0b3IsIGZvciBub3csIGZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eQoKICBPYmplY3Qua2V5cyhpbnN0YW5jZU1ldGhvZHMpLmZvckVhY2goa2V5ID0+IHsKICAgIFN3ZWV0QWxlcnRba2V5XSA9IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKGN1cnJlbnRJbnN0YW5jZSkgewogICAgICAgIHJldHVybiBjdXJyZW50SW5zdGFuY2Vba2V5XSguLi5hcmd1bWVudHMpOwogICAgICB9CiAgICB9OwogIH0pOwogIFN3ZWV0QWxlcnQuRGlzbWlzc1JlYXNvbiA9IERpc21pc3NSZWFzb247CiAgU3dlZXRBbGVydC52ZXJzaW9uID0gJzExLjMuMCc7CgogIGNvbnN0IFN3YWwgPSBTd2VldEFsZXJ0OwogIFN3YWwuZGVmYXVsdCA9IFN3YWw7CgogIHJldHVybiBTd2FsOwoKfSkpOwppZiAodHlwZW9mIHRoaXMgIT09ICd1bmRlZmluZWQnICYmIHRoaXMuU3dlZXRhbGVydDIpeyAgdGhpcy5zd2FsID0gdGhpcy5zd2VldEFsZXJ0ID0gdGhpcy5Td2FsID0gdGhpcy5Td2VldEFsZXJ0ID0gdGhpcy5Td2VldGFsZXJ0Mn0KCiJ1bmRlZmluZWQiIT10eXBlb2YgZG9jdW1lbnQmJmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5jcmVhdGVFbGVtZW50KCJzdHlsZSIpO2lmKGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImhlYWQiKVswXS5hcHBlbmRDaGlsZChuKSxuLnN0eWxlU2hlZXQpbi5zdHlsZVNoZWV0LmRpc2FibGVkfHwobi5zdHlsZVNoZWV0LmNzc1RleHQ9dCk7ZWxzZSB0cnl7bi5pbm5lckhUTUw9dH1jYXRjaChlKXtuLmlubmVyVGV4dD10fX0oZG9jdW1lbnQsIi5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdHtib3gtc2l6aW5nOmJvcmRlci1ib3g7Z3JpZC1jb2x1bW46MS80IWltcG9ydGFudDtncmlkLXJvdzoxLzQhaW1wb3J0YW50O2dyaWQtdGVtcGxhdGUtY29sdW1uczoxZnIgOTlmciAxZnI7cGFkZGluZzoxZW07b3ZlcmZsb3cteTpoaWRkZW47YmFja2dyb3VuZDojZmZmO2JveC1zaGFkb3c6MCAwIDFweCByZ2JhKDAsMCwwLC4wNzUpLDAgMXB4IDJweCByZ2JhKDAsMCwwLC4wNzUpLDFweCAycHggNHB4IHJnYmEoMCwwLDAsLjA3NSksMXB4IDNweCA4cHggcmdiYSgwLDAsMCwuMDc1KSwycHggNHB4IDE2cHggcmdiYSgwLDAsMCwuMDc1KTtwb2ludGVyLWV2ZW50czphbGx9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0Pip7Z3JpZC1jb2x1bW46Mn0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXRpdGxle21hcmdpbjouNWVtIDFlbTtwYWRkaW5nOjA7Zm9udC1zaXplOjFlbTt0ZXh0LWFsaWduOmluaXRpYWx9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1sb2FkaW5ne2p1c3RpZnktY29udGVudDpjZW50ZXJ9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1pbnB1dHtoZWlnaHQ6MmVtO21hcmdpbjouNWVtO2ZvbnQtc2l6ZToxZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi12YWxpZGF0aW9uLW1lc3NhZ2V7Zm9udC1zaXplOjFlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWZvb3RlcnttYXJnaW46LjVlbSAwIDA7cGFkZGluZzouNWVtIDAgMDtmb250LXNpemU6LjhlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWNsb3Nle2dyaWQtY29sdW1uOjMvMztncmlkLXJvdzoxLzk5O2FsaWduLXNlbGY6Y2VudGVyO3dpZHRoOi44ZW07aGVpZ2h0Oi44ZW07bWFyZ2luOjA7Zm9udC1zaXplOjJlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWh0bWwtY29udGFpbmVye21hcmdpbjouNWVtIDFlbTtwYWRkaW5nOjA7Zm9udC1zaXplOjFlbTt0ZXh0LWFsaWduOmluaXRpYWx9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1odG1sLWNvbnRhaW5lcjplbXB0eXtwYWRkaW5nOjB9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1sb2FkZXJ7Z3JpZC1jb2x1bW46MTtncmlkLXJvdzoxLzk5O2FsaWduLXNlbGY6Y2VudGVyO3dpZHRoOjJlbTtoZWlnaHQ6MmVtO21hcmdpbjouMjVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWljb257Z3JpZC1jb2x1bW46MTtncmlkLXJvdzoxLzk5O2FsaWduLXNlbGY6Y2VudGVyO3dpZHRoOjJlbTttaW4td2lkdGg6MmVtO2hlaWdodDoyZW07bWFyZ2luOjAgLjVlbSAwIDB9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1pY29uIC5zd2FsMi1pY29uLWNvbnRlbnR7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtmb250LXNpemU6MS44ZW07Zm9udC13ZWlnaHQ6NzAwfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIC5zd2FsMi1zdWNjZXNzLXJpbmd7d2lkdGg6MmVtO2hlaWdodDoyZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1pY29uLnN3YWwyLWVycm9yIFtjbGFzc149c3dhbDIteC1tYXJrLWxpbmVde3RvcDouODc1ZW07d2lkdGg6MS4zNzVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWljb24uc3dhbDItZXJyb3IgW2NsYXNzXj1zd2FsMi14LW1hcmstbGluZV1bY2xhc3MkPWxlZnRde2xlZnQ6LjMxMjVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLWljb24uc3dhbDItZXJyb3IgW2NsYXNzXj1zd2FsMi14LW1hcmstbGluZV1bY2xhc3MkPXJpZ2h0XXtyaWdodDouMzEyNWVtfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItYWN0aW9uc3tqdXN0aWZ5LWNvbnRlbnQ6ZmxleC1zdGFydDtoZWlnaHQ6YXV0bzttYXJnaW46MDttYXJnaW4tdG9wOi41ZW07cGFkZGluZzowIC41ZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdHlsZWR7bWFyZ2luOi4yNWVtIC41ZW07cGFkZGluZzouNGVtIC42ZW07Zm9udC1zaXplOjFlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3N7Ym9yZGVyLWNvbG9yOiNhNWRjODZ9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1jaXJjdWxhci1saW5lXXtwb3NpdGlvbjphYnNvbHV0ZTt3aWR0aDoxLjZlbTtoZWlnaHQ6M2VtO3RyYW5zZm9ybTpyb3RhdGUoNDVkZWcpO2JvcmRlci1yYWRpdXM6NTAlfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdCAuc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtY2lyY3VsYXItbGluZV1bY2xhc3MkPWxlZnRde3RvcDotLjhlbTtsZWZ0Oi0uNWVtO3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKTt0cmFuc2Zvcm0tb3JpZ2luOjJlbSAyZW07Ym9yZGVyLXJhZGl1czo0ZW0gMCAwIDRlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmVdW2NsYXNzJD1yaWdodF17dG9wOi0uMjVlbTtsZWZ0Oi45Mzc1ZW07dHJhbnNmb3JtLW9yaWdpbjowIDEuNWVtO2JvcmRlci1yYWRpdXM6MCA0ZW0gNGVtIDB9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdWNjZXNzIC5zd2FsMi1zdWNjZXNzLXJpbmd7d2lkdGg6MmVtO2hlaWdodDoyZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdWNjZXNzIC5zd2FsMi1zdWNjZXNzLWZpeHt0b3A6MDtsZWZ0Oi40Mzc1ZW07d2lkdGg6LjQzNzVlbTtoZWlnaHQ6Mi42ODc1ZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1saW5lXXtoZWlnaHQ6LjMxMjVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWxpbmVdW2NsYXNzJD10aXBde3RvcDoxLjEyNWVtO2xlZnQ6LjE4NzVlbTt3aWR0aDouNzVlbX0uc3dhbDItcG9wdXAuc3dhbDItdG9hc3QgLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWxpbmVdW2NsYXNzJD1sb25nXXt0b3A6LjkzNzVlbTtyaWdodDouMTg3NWVtO3dpZHRoOjEuMzc1ZW19LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdWNjZXNzLnN3YWwyLWljb24tc2hvdyAuc3dhbDItc3VjY2Vzcy1saW5lLXRpcHstd2Via2l0LWFuaW1hdGlvbjpzd2FsMi10b2FzdC1hbmltYXRlLXN1Y2Nlc3MtbGluZS10aXAgLjc1czthbmltYXRpb246c3dhbDItdG9hc3QtYW5pbWF0ZS1zdWNjZXNzLWxpbmUtdGlwIC43NXN9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0IC5zd2FsMi1zdWNjZXNzLnN3YWwyLWljb24tc2hvdyAuc3dhbDItc3VjY2Vzcy1saW5lLWxvbmd7LXdlYmtpdC1hbmltYXRpb246c3dhbDItdG9hc3QtYW5pbWF0ZS1zdWNjZXNzLWxpbmUtbG9uZyAuNzVzO2FuaW1hdGlvbjpzd2FsMi10b2FzdC1hbmltYXRlLXN1Y2Nlc3MtbGluZS1sb25nIC43NXN9LnN3YWwyLXBvcHVwLnN3YWwyLXRvYXN0LnN3YWwyLXNob3d7LXdlYmtpdC1hbmltYXRpb246c3dhbDItdG9hc3Qtc2hvdyAuNXM7YW5pbWF0aW9uOnN3YWwyLXRvYXN0LXNob3cgLjVzfS5zd2FsMi1wb3B1cC5zd2FsMi10b2FzdC5zd2FsMi1oaWRley13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLXRvYXN0LWhpZGUgLjFzIGZvcndhcmRzO2FuaW1hdGlvbjpzd2FsMi10b2FzdC1oaWRlIC4xcyBmb3J3YXJkc30uc3dhbDItY29udGFpbmVye2Rpc3BsYXk6Z3JpZDtwb3NpdGlvbjpmaXhlZDt6LWluZGV4OjEwNjA7dG9wOjA7cmlnaHQ6MDtib3R0b206MDtsZWZ0OjA7Ym94LXNpemluZzpib3JkZXItYm94O2dyaWQtdGVtcGxhdGUtYXJlYXM6XCJ0b3Atc3RhcnQgICAgIHRvcCAgICAgICAgICAgIHRvcC1lbmRcIiBcImNlbnRlci1zdGFydCAgY2VudGVyICAgICAgICAgY2VudGVyLWVuZFwiIFwiYm90dG9tLXN0YXJ0ICBib3R0b20tY2VudGVyICBib3R0b20tZW5kXCI7Z3JpZC10ZW1wbGF0ZS1yb3dzOm1pbm1heCgtd2Via2l0LW1pbi1jb250ZW50LGF1dG8pIG1pbm1heCgtd2Via2l0LW1pbi1jb250ZW50LGF1dG8pIG1pbm1heCgtd2Via2l0LW1pbi1jb250ZW50LGF1dG8pO2dyaWQtdGVtcGxhdGUtcm93czptaW5tYXgobWluLWNvbnRlbnQsYXV0bykgbWlubWF4KG1pbi1jb250ZW50LGF1dG8pIG1pbm1heChtaW4tY29udGVudCxhdXRvKTtoZWlnaHQ6MTAwJTtwYWRkaW5nOi42MjVlbTtvdmVyZmxvdy14OmhpZGRlbjt0cmFuc2l0aW9uOmJhY2tncm91bmQtY29sb3IgLjFzOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNofS5zd2FsMi1jb250YWluZXIuc3dhbDItYmFja2Ryb3Atc2hvdywuc3dhbDItY29udGFpbmVyLnN3YWwyLW5vYW5pbWF0aW9ue2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuNCl9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1iYWNrZHJvcC1oaWRle2JhY2tncm91bmQ6MCAwIWltcG9ydGFudH0uc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1zdGFydCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlci1zdGFydCwuc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1zdGFydHtncmlkLXRlbXBsYXRlLWNvbHVtbnM6bWlubWF4KDAsMWZyKSBhdXRvIGF1dG99LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20sLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXIsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3B7Z3JpZC10ZW1wbGF0ZS1jb2x1bW5zOmF1dG8gbWlubWF4KDAsMWZyKSBhdXRvfS5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLWVuZCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlci1lbmQsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3AtZW5ke2dyaWQtdGVtcGxhdGUtY29sdW1uczphdXRvIGF1dG8gbWlubWF4KDAsMWZyKX0uc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1zdGFydD4uc3dhbDItcG9wdXB7YWxpZ24tc2VsZjpzdGFydH0uc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcD4uc3dhbDItcG9wdXB7Z3JpZC1jb2x1bW46MjthbGlnbi1zZWxmOnN0YXJ0O2p1c3RpZnktc2VsZjpjZW50ZXJ9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3AtZW5kPi5zd2FsMi1wb3B1cCwuc3dhbDItY29udGFpbmVyLnN3YWwyLXRvcC1yaWdodD4uc3dhbDItcG9wdXB7Z3JpZC1jb2x1bW46MzthbGlnbi1zZWxmOnN0YXJ0O2p1c3RpZnktc2VsZjplbmR9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItbGVmdD4uc3dhbDItcG9wdXAsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItc3RhcnQ+LnN3YWwyLXBvcHVwe2dyaWQtcm93OjI7YWxpZ24tc2VsZjpjZW50ZXJ9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXI+LnN3YWwyLXBvcHVwe2dyaWQtY29sdW1uOjI7Z3JpZC1yb3c6MjthbGlnbi1zZWxmOmNlbnRlcjtqdXN0aWZ5LXNlbGY6Y2VudGVyfS5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLWVuZD4uc3dhbDItcG9wdXAsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItcmlnaHQ+LnN3YWwyLXBvcHVwe2dyaWQtY29sdW1uOjM7Z3JpZC1yb3c6MjthbGlnbi1zZWxmOmNlbnRlcjtqdXN0aWZ5LXNlbGY6ZW5kfS5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLWxlZnQ+LnN3YWwyLXBvcHVwLC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLXN0YXJ0Pi5zd2FsMi1wb3B1cHtncmlkLWNvbHVtbjoxO2dyaWQtcm93OjM7YWxpZ24tc2VsZjplbmR9LnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20+LnN3YWwyLXBvcHVwe2dyaWQtY29sdW1uOjI7Z3JpZC1yb3c6MztqdXN0aWZ5LXNlbGY6Y2VudGVyO2FsaWduLXNlbGY6ZW5kfS5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLWVuZD4uc3dhbDItcG9wdXAsLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1ib3R0b20tcmlnaHQ+LnN3YWwyLXBvcHVwe2dyaWQtY29sdW1uOjM7Z3JpZC1yb3c6MzthbGlnbi1zZWxmOmVuZDtqdXN0aWZ5LXNlbGY6ZW5kfS5zd2FsMi1jb250YWluZXIuc3dhbDItZ3Jvdy1mdWxsc2NyZWVuPi5zd2FsMi1wb3B1cCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctcm93Pi5zd2FsMi1wb3B1cHtncmlkLWNvbHVtbjoxLzQ7d2lkdGg6MTAwJX0uc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctY29sdW1uPi5zd2FsMi1wb3B1cCwuc3dhbDItY29udGFpbmVyLnN3YWwyLWdyb3ctZnVsbHNjcmVlbj4uc3dhbDItcG9wdXB7Z3JpZC1yb3c6MS80O2FsaWduLXNlbGY6c3RyZXRjaH0uc3dhbDItY29udGFpbmVyLnN3YWwyLW5vLXRyYW5zaXRpb257dHJhbnNpdGlvbjpub25lIWltcG9ydGFudH0uc3dhbDItcG9wdXB7ZGlzcGxheTpub25lO3Bvc2l0aW9uOnJlbGF0aXZlO2JveC1zaXppbmc6Ym9yZGVyLWJveDtncmlkLXRlbXBsYXRlLWNvbHVtbnM6bWlubWF4KDAsMTAwJSk7d2lkdGg6MzJlbTttYXgtd2lkdGg6MTAwJTtwYWRkaW5nOjAgMCAxLjI1ZW07Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo1cHg7YmFja2dyb3VuZDojZmZmO2NvbG9yOiM1NDU0NTQ7Zm9udC1mYW1pbHk6aW5oZXJpdDtmb250LXNpemU6MXJlbX0uc3dhbDItcG9wdXA6Zm9jdXN7b3V0bGluZTowfS5zd2FsMi1wb3B1cC5zd2FsMi1sb2FkaW5ne292ZXJmbG93LXk6aGlkZGVufS5zd2FsMi10aXRsZXtwb3NpdGlvbjpyZWxhdGl2ZTttYXgtd2lkdGg6MTAwJTttYXJnaW46MDtwYWRkaW5nOi44ZW0gMWVtIDA7Y29sb3I6aW5oZXJpdDtmb250LXNpemU6MS44NzVlbTtmb250LXdlaWdodDo2MDA7dGV4dC1hbGlnbjpjZW50ZXI7dGV4dC10cmFuc2Zvcm06bm9uZTt3b3JkLXdyYXA6YnJlYWstd29yZH0uc3dhbDItYWN0aW9uc3tkaXNwbGF5OmZsZXg7ei1pbmRleDoxO2JveC1zaXppbmc6Ym9yZGVyLWJveDtmbGV4LXdyYXA6d3JhcDthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjt3aWR0aDphdXRvO21hcmdpbjoxLjI1ZW0gYXV0byAwO3BhZGRpbmc6MH0uc3dhbDItYWN0aW9uczpub3QoLnN3YWwyLWxvYWRpbmcpIC5zd2FsMi1zdHlsZWRbZGlzYWJsZWRde29wYWNpdHk6LjR9LnN3YWwyLWFjdGlvbnM6bm90KC5zd2FsMi1sb2FkaW5nKSAuc3dhbDItc3R5bGVkOmhvdmVye2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHJnYmEoMCwwLDAsLjEpLHJnYmEoMCwwLDAsLjEpKX0uc3dhbDItYWN0aW9uczpub3QoLnN3YWwyLWxvYWRpbmcpIC5zd2FsMi1zdHlsZWQ6YWN0aXZle2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KHJnYmEoMCwwLDAsLjIpLHJnYmEoMCwwLDAsLjIpKX0uc3dhbDItbG9hZGVye2Rpc3BsYXk6bm9uZTthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjt3aWR0aDoyLjJlbTtoZWlnaHQ6Mi4yZW07bWFyZ2luOjAgMS44NzVlbTstd2Via2l0LWFuaW1hdGlvbjpzd2FsMi1yb3RhdGUtbG9hZGluZyAxLjVzIGxpbmVhciAwcyBpbmZpbml0ZSBub3JtYWw7YW5pbWF0aW9uOnN3YWwyLXJvdGF0ZS1sb2FkaW5nIDEuNXMgbGluZWFyIDBzIGluZmluaXRlIG5vcm1hbDtib3JkZXItd2lkdGg6LjI1ZW07Ym9yZGVyLXN0eWxlOnNvbGlkO2JvcmRlci1yYWRpdXM6MTAwJTtib3JkZXItY29sb3I6IzI3NzhjNCB0cmFuc3BhcmVudCAjMjc3OGM0IHRyYW5zcGFyZW50fS5zd2FsMi1zdHlsZWR7bWFyZ2luOi4zMTI1ZW07cGFkZGluZzouNjI1ZW0gMS4xZW07dHJhbnNpdGlvbjpib3gtc2hhZG93IC4xcztib3gtc2hhZG93OjAgMCAwIDNweCB0cmFuc3BhcmVudDtmb250LXdlaWdodDo1MDB9LnN3YWwyLXN0eWxlZDpub3QoW2Rpc2FibGVkXSl7Y3Vyc29yOnBvaW50ZXJ9LnN3YWwyLXN0eWxlZC5zd2FsMi1jb25maXJte2JvcmRlcjowO2JvcmRlci1yYWRpdXM6LjI1ZW07YmFja2dyb3VuZDppbml0aWFsO2JhY2tncm91bmQtY29sb3I6IzcwNjZlMDtjb2xvcjojZmZmO2ZvbnQtc2l6ZToxZW19LnN3YWwyLXN0eWxlZC5zd2FsMi1jb25maXJtOmZvY3Vze2JveC1zaGFkb3c6MCAwIDAgM3B4IHJnYmEoMTEyLDEwMiwyMjQsLjUpfS5zd2FsMi1zdHlsZWQuc3dhbDItZGVueXtib3JkZXI6MDtib3JkZXItcmFkaXVzOi4yNWVtO2JhY2tncm91bmQ6aW5pdGlhbDtiYWNrZ3JvdW5kLWNvbG9yOiNkYzM3NDE7Y29sb3I6I2ZmZjtmb250LXNpemU6MWVtfS5zd2FsMi1zdHlsZWQuc3dhbDItZGVueTpmb2N1c3tib3gtc2hhZG93OjAgMCAwIDNweCByZ2JhKDIyMCw1NSw2NSwuNSl9LnN3YWwyLXN0eWxlZC5zd2FsMi1jYW5jZWx7Ym9yZGVyOjA7Ym9yZGVyLXJhZGl1czouMjVlbTtiYWNrZ3JvdW5kOmluaXRpYWw7YmFja2dyb3VuZC1jb2xvcjojNmU3ODgxO2NvbG9yOiNmZmY7Zm9udC1zaXplOjFlbX0uc3dhbDItc3R5bGVkLnN3YWwyLWNhbmNlbDpmb2N1c3tib3gtc2hhZG93OjAgMCAwIDNweCByZ2JhKDExMCwxMjAsMTI5LC41KX0uc3dhbDItc3R5bGVkLnN3YWwyLWRlZmF1bHQtb3V0bGluZTpmb2N1c3tib3gtc2hhZG93OjAgMCAwIDNweCByZ2JhKDEwMCwxNTAsMjAwLC41KX0uc3dhbDItc3R5bGVkOmZvY3Vze291dGxpbmU6MH0uc3dhbDItc3R5bGVkOjotbW96LWZvY3VzLWlubmVye2JvcmRlcjowfS5zd2FsMi1mb290ZXJ7anVzdGlmeS1jb250ZW50OmNlbnRlcjttYXJnaW46MWVtIDAgMDtwYWRkaW5nOjFlbSAxZW0gMDtib3JkZXItdG9wOjFweCBzb2xpZCAjZWVlO2NvbG9yOmluaGVyaXQ7Zm9udC1zaXplOjFlbX0uc3dhbDItdGltZXItcHJvZ3Jlc3MtYmFyLWNvbnRhaW5lcntwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDowO2JvdHRvbTowO2xlZnQ6MDtncmlkLWNvbHVtbjphdXRvIWltcG9ydGFudDtoZWlnaHQ6LjI1ZW07b3ZlcmZsb3c6aGlkZGVuO2JvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOjVweDtib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOjVweH0uc3dhbDItdGltZXItcHJvZ3Jlc3MtYmFye3dpZHRoOjEwMCU7aGVpZ2h0Oi4yNWVtO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwuMil9LnN3YWwyLWltYWdle21heC13aWR0aDoxMDAlO21hcmdpbjoyZW0gYXV0byAxZW19LnN3YWwyLWNsb3Nle3otaW5kZXg6MjthbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjt3aWR0aDoxLjJlbTtoZWlnaHQ6MS4yZW07bWFyZ2luLXRvcDowO21hcmdpbi1yaWdodDowO21hcmdpbi1ib3R0b206LTEuMmVtO3BhZGRpbmc6MDtvdmVyZmxvdzpoaWRkZW47dHJhbnNpdGlvbjpjb2xvciAuMXMsYm94LXNoYWRvdyAuMXM7Ym9yZGVyOm5vbmU7Ym9yZGVyLXJhZGl1czo1cHg7YmFja2dyb3VuZDowIDA7Y29sb3I6I2NjYztmb250LWZhbWlseTpzZXJpZjtmb250LWZhbWlseTptb25vc3BhY2U7Zm9udC1zaXplOjIuNWVtO2N1cnNvcjpwb2ludGVyO2p1c3RpZnktc2VsZjplbmR9LnN3YWwyLWNsb3NlOmhvdmVye3RyYW5zZm9ybTpub25lO2JhY2tncm91bmQ6MCAwO2NvbG9yOiNmMjc0NzR9LnN3YWwyLWNsb3NlOmZvY3Vze291dGxpbmU6MDtib3gtc2hhZG93Omluc2V0IDAgMCAwIDNweCByZ2JhKDEwMCwxNTAsMjAwLC41KX0uc3dhbDItY2xvc2U6Oi1tb3otZm9jdXMtaW5uZXJ7Ym9yZGVyOjB9LnN3YWwyLWh0bWwtY29udGFpbmVye3otaW5kZXg6MTtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21hcmdpbjoxZW0gMS42ZW0gLjNlbTtwYWRkaW5nOjA7b3ZlcmZsb3c6YXV0bztjb2xvcjppbmhlcml0O2ZvbnQtc2l6ZToxLjEyNWVtO2ZvbnQtd2VpZ2h0OjQwMDtsaW5lLWhlaWdodDpub3JtYWw7dGV4dC1hbGlnbjpjZW50ZXI7d29yZC13cmFwOmJyZWFrLXdvcmQ7d29yZC1icmVhazpicmVhay13b3JkfS5zd2FsMi1jaGVja2JveCwuc3dhbDItZmlsZSwuc3dhbDItaW5wdXQsLnN3YWwyLXJhZGlvLC5zd2FsMi1zZWxlY3QsLnN3YWwyLXRleHRhcmVhe21hcmdpbjoxZW0gMmVtIDB9LnN3YWwyLWZpbGUsLnN3YWwyLWlucHV0LC5zd2FsMi10ZXh0YXJlYXtib3gtc2l6aW5nOmJvcmRlci1ib3g7d2lkdGg6YXV0bzt0cmFuc2l0aW9uOmJvcmRlci1jb2xvciAuMXMsYm94LXNoYWRvdyAuMXM7Ym9yZGVyOjFweCBzb2xpZCAjZDlkOWQ5O2JvcmRlci1yYWRpdXM6LjE4NzVlbTtiYWNrZ3JvdW5kOmluaGVyaXQ7Ym94LXNoYWRvdzppbnNldCAwIDFweCAxcHggcmdiYSgwLDAsMCwuMDYpLDAgMCAwIDNweCB0cmFuc3BhcmVudDtjb2xvcjppbmhlcml0O2ZvbnQtc2l6ZToxLjEyNWVtfS5zd2FsMi1maWxlLnN3YWwyLWlucHV0ZXJyb3IsLnN3YWwyLWlucHV0LnN3YWwyLWlucHV0ZXJyb3IsLnN3YWwyLXRleHRhcmVhLnN3YWwyLWlucHV0ZXJyb3J7Ym9yZGVyLWNvbG9yOiNmMjc0NzQhaW1wb3J0YW50O2JveC1zaGFkb3c6MCAwIDJweCAjZjI3NDc0IWltcG9ydGFudH0uc3dhbDItZmlsZTpmb2N1cywuc3dhbDItaW5wdXQ6Zm9jdXMsLnN3YWwyLXRleHRhcmVhOmZvY3Vze2JvcmRlcjoxcHggc29saWQgI2I0ZGJlZDtvdXRsaW5lOjA7Ym94LXNoYWRvdzppbnNldCAwIDFweCAxcHggcmdiYSgwLDAsMCwuMDYpLDAgMCAwIDNweCByZ2JhKDEwMCwxNTAsMjAwLC41KX0uc3dhbDItZmlsZTo6LW1vei1wbGFjZWhvbGRlciwuc3dhbDItaW5wdXQ6Oi1tb3otcGxhY2Vob2xkZXIsLnN3YWwyLXRleHRhcmVhOjotbW96LXBsYWNlaG9sZGVye2NvbG9yOiNjY2N9LnN3YWwyLWZpbGU6LW1zLWlucHV0LXBsYWNlaG9sZGVyLC5zd2FsMi1pbnB1dDotbXMtaW5wdXQtcGxhY2Vob2xkZXIsLnN3YWwyLXRleHRhcmVhOi1tcy1pbnB1dC1wbGFjZWhvbGRlcntjb2xvcjojY2NjfS5zd2FsMi1maWxlOjpwbGFjZWhvbGRlciwuc3dhbDItaW5wdXQ6OnBsYWNlaG9sZGVyLC5zd2FsMi10ZXh0YXJlYTo6cGxhY2Vob2xkZXJ7Y29sb3I6I2NjY30uc3dhbDItcmFuZ2V7bWFyZ2luOjFlbSAyZW0gMDtiYWNrZ3JvdW5kOiNmZmZ9LnN3YWwyLXJhbmdlIGlucHV0e3dpZHRoOjgwJX0uc3dhbDItcmFuZ2Ugb3V0cHV0e3dpZHRoOjIwJTtjb2xvcjppbmhlcml0O2ZvbnQtd2VpZ2h0OjYwMDt0ZXh0LWFsaWduOmNlbnRlcn0uc3dhbDItcmFuZ2UgaW5wdXQsLnN3YWwyLXJhbmdlIG91dHB1dHtoZWlnaHQ6Mi42MjVlbTtwYWRkaW5nOjA7Zm9udC1zaXplOjEuMTI1ZW07bGluZS1oZWlnaHQ6Mi42MjVlbX0uc3dhbDItaW5wdXR7aGVpZ2h0OjIuNjI1ZW07cGFkZGluZzowIC43NWVtfS5zd2FsMi1maWxle3dpZHRoOjc1JTttYXJnaW4tcmlnaHQ6YXV0bzttYXJnaW4tbGVmdDphdXRvO2JhY2tncm91bmQ6aW5oZXJpdDtmb250LXNpemU6MS4xMjVlbX0uc3dhbDItdGV4dGFyZWF7aGVpZ2h0OjYuNzVlbTtwYWRkaW5nOi43NWVtfS5zd2FsMi1zZWxlY3R7bWluLXdpZHRoOjUwJTttYXgtd2lkdGg6MTAwJTtwYWRkaW5nOi4zNzVlbSAuNjI1ZW07YmFja2dyb3VuZDppbmhlcml0O2NvbG9yOmluaGVyaXQ7Zm9udC1zaXplOjEuMTI1ZW19LnN3YWwyLWNoZWNrYm94LC5zd2FsMi1yYWRpb3thbGlnbi1pdGVtczpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjtiYWNrZ3JvdW5kOiNmZmY7Y29sb3I6aW5oZXJpdH0uc3dhbDItY2hlY2tib3ggbGFiZWwsLnN3YWwyLXJhZGlvIGxhYmVse21hcmdpbjowIC42ZW07Zm9udC1zaXplOjEuMTI1ZW19LnN3YWwyLWNoZWNrYm94IGlucHV0LC5zd2FsMi1yYWRpbyBpbnB1dHtmbGV4LXNocmluazowO21hcmdpbjowIC40ZW19LnN3YWwyLWlucHV0LWxhYmVse2Rpc3BsYXk6ZmxleDtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21hcmdpbjoxZW0gYXV0byAwfS5zd2FsMi12YWxpZGF0aW9uLW1lc3NhZ2V7YWxpZ24taXRlbXM6Y2VudGVyO2p1c3RpZnktY29udGVudDpjZW50ZXI7bWFyZ2luOjFlbSAwIDA7cGFkZGluZzouNjI1ZW07b3ZlcmZsb3c6aGlkZGVuO2JhY2tncm91bmQ6I2YwZjBmMDtjb2xvcjojNjY2O2ZvbnQtc2l6ZToxZW07Zm9udC13ZWlnaHQ6MzAwfS5zd2FsMi12YWxpZGF0aW9uLW1lc3NhZ2U6OmJlZm9yZXtjb250ZW50OlwiIVwiO2Rpc3BsYXk6aW5saW5lLWJsb2NrO3dpZHRoOjEuNWVtO21pbi13aWR0aDoxLjVlbTtoZWlnaHQ6MS41ZW07bWFyZ2luOjAgLjYyNWVtO2JvcmRlci1yYWRpdXM6NTAlO2JhY2tncm91bmQtY29sb3I6I2YyNzQ3NDtjb2xvcjojZmZmO2ZvbnQtd2VpZ2h0OjYwMDtsaW5lLWhlaWdodDoxLjVlbTt0ZXh0LWFsaWduOmNlbnRlcn0uc3dhbDItaWNvbntwb3NpdGlvbjpyZWxhdGl2ZTtib3gtc2l6aW5nOmNvbnRlbnQtYm94O2p1c3RpZnktY29udGVudDpjZW50ZXI7d2lkdGg6NWVtO2hlaWdodDo1ZW07bWFyZ2luOjIuNWVtIGF1dG8gLjZlbTtib3JkZXI6LjI1ZW0gc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czo1MCU7Ym9yZGVyLWNvbG9yOiMwMDA7Zm9udC1mYW1pbHk6aW5oZXJpdDtsaW5lLWhlaWdodDo1ZW07Y3Vyc29yOmRlZmF1bHQ7LXdlYmtpdC11c2VyLXNlbGVjdDpub25lOy1tb3otdXNlci1zZWxlY3Q6bm9uZTstbXMtdXNlci1zZWxlY3Q6bm9uZTt1c2VyLXNlbGVjdDpub25lfS5zd2FsMi1pY29uIC5zd2FsMi1pY29uLWNvbnRlbnR7ZGlzcGxheTpmbGV4O2FsaWduLWl0ZW1zOmNlbnRlcjtmb250LXNpemU6My43NWVtfS5zd2FsMi1pY29uLnN3YWwyLWVycm9ye2JvcmRlci1jb2xvcjojZjI3NDc0O2NvbG9yOiNmMjc0NzR9LnN3YWwyLWljb24uc3dhbDItZXJyb3IgLnN3YWwyLXgtbWFya3twb3NpdGlvbjpyZWxhdGl2ZTtmbGV4LWdyb3c6MX0uc3dhbDItaWNvbi5zd2FsMi1lcnJvciBbY2xhc3NePXN3YWwyLXgtbWFyay1saW5lXXtkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmFic29sdXRlO3RvcDoyLjMxMjVlbTt3aWR0aDoyLjkzNzVlbTtoZWlnaHQ6LjMxMjVlbTtib3JkZXItcmFkaXVzOi4xMjVlbTtiYWNrZ3JvdW5kLWNvbG9yOiNmMjc0NzR9LnN3YWwyLWljb24uc3dhbDItZXJyb3IgW2NsYXNzXj1zd2FsMi14LW1hcmstbGluZV1bY2xhc3MkPWxlZnRde2xlZnQ6MS4wNjI1ZW07dHJhbnNmb3JtOnJvdGF0ZSg0NWRlZyl9LnN3YWwyLWljb24uc3dhbDItZXJyb3IgW2NsYXNzXj1zd2FsMi14LW1hcmstbGluZV1bY2xhc3MkPXJpZ2h0XXtyaWdodDoxZW07dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpfS5zd2FsMi1pY29uLnN3YWwyLWVycm9yLnN3YWwyLWljb24tc2hvd3std2Via2l0LWFuaW1hdGlvbjpzd2FsMi1hbmltYXRlLWVycm9yLWljb24gLjVzO2FuaW1hdGlvbjpzd2FsMi1hbmltYXRlLWVycm9yLWljb24gLjVzfS5zd2FsMi1pY29uLnN3YWwyLWVycm9yLnN3YWwyLWljb24tc2hvdyAuc3dhbDIteC1tYXJrey13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtZXJyb3IteC1tYXJrIC41czthbmltYXRpb246c3dhbDItYW5pbWF0ZS1lcnJvci14LW1hcmsgLjVzfS5zd2FsMi1pY29uLnN3YWwyLXdhcm5pbmd7Ym9yZGVyLWNvbG9yOiNmYWNlYTg7Y29sb3I6I2Y4YmI4Nn0uc3dhbDItaWNvbi5zd2FsMi13YXJuaW5nLnN3YWwyLWljb24tc2hvd3std2Via2l0LWFuaW1hdGlvbjpzd2FsMi1hbmltYXRlLWVycm9yLWljb24gLjVzO2FuaW1hdGlvbjpzd2FsMi1hbmltYXRlLWVycm9yLWljb24gLjVzfS5zd2FsMi1pY29uLnN3YWwyLXdhcm5pbmcuc3dhbDItaWNvbi1zaG93IC5zd2FsMi1pY29uLWNvbnRlbnR7LXdlYmtpdC1hbmltYXRpb246c3dhbDItYW5pbWF0ZS1pLW1hcmsgLjVzO2FuaW1hdGlvbjpzd2FsMi1hbmltYXRlLWktbWFyayAuNXN9LnN3YWwyLWljb24uc3dhbDItaW5mb3tib3JkZXItY29sb3I6IzlkZTBmNjtjb2xvcjojM2ZjM2VlfS5zd2FsMi1pY29uLnN3YWwyLWluZm8uc3dhbDItaWNvbi1zaG93ey13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtZXJyb3ItaWNvbiAuNXM7YW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtZXJyb3ItaWNvbiAuNXN9LnN3YWwyLWljb24uc3dhbDItaW5mby5zd2FsMi1pY29uLXNob3cgLnN3YWwyLWljb24tY29udGVudHstd2Via2l0LWFuaW1hdGlvbjpzd2FsMi1hbmltYXRlLWktbWFyayAuOHM7YW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtaS1tYXJrIC44c30uc3dhbDItaWNvbi5zd2FsMi1xdWVzdGlvbntib3JkZXItY29sb3I6I2M5ZGFlMTtjb2xvcjojODdhZGJkfS5zd2FsMi1pY29uLnN3YWwyLXF1ZXN0aW9uLnN3YWwyLWljb24tc2hvd3std2Via2l0LWFuaW1hdGlvbjpzd2FsMi1hbmltYXRlLWVycm9yLWljb24gLjVzO2FuaW1hdGlvbjpzd2FsMi1hbmltYXRlLWVycm9yLWljb24gLjVzfS5zd2FsMi1pY29uLnN3YWwyLXF1ZXN0aW9uLnN3YWwyLWljb24tc2hvdyAuc3dhbDItaWNvbi1jb250ZW50ey13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtcXVlc3Rpb24tbWFyayAuOHM7YW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtcXVlc3Rpb24tbWFyayAuOHN9LnN3YWwyLWljb24uc3dhbDItc3VjY2Vzc3tib3JkZXItY29sb3I6I2E1ZGM4Njtjb2xvcjojYTVkYzg2fS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmVde3Bvc2l0aW9uOmFic29sdXRlO3dpZHRoOjMuNzVlbTtoZWlnaHQ6Ny41ZW07dHJhbnNmb3JtOnJvdGF0ZSg0NWRlZyk7Ym9yZGVyLXJhZGl1czo1MCV9LnN3YWwyLWljb24uc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtY2lyY3VsYXItbGluZV1bY2xhc3MkPWxlZnRde3RvcDotLjQzNzVlbTtsZWZ0Oi0yLjA2MzVlbTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7dHJhbnNmb3JtLW9yaWdpbjozLjc1ZW0gMy43NWVtO2JvcmRlci1yYWRpdXM6Ny41ZW0gMCAwIDcuNWVtfS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWNpcmN1bGFyLWxpbmVdW2NsYXNzJD1yaWdodF17dG9wOi0uNjg3NWVtO2xlZnQ6MS44NzVlbTt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyk7dHJhbnNmb3JtLW9yaWdpbjowIDMuNzVlbTtib3JkZXItcmFkaXVzOjAgNy41ZW0gNy41ZW0gMH0uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIC5zd2FsMi1zdWNjZXNzLXJpbmd7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDoyO3RvcDotLjI1ZW07bGVmdDotLjI1ZW07Ym94LXNpemluZzpjb250ZW50LWJveDt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JvcmRlcjouMjVlbSBzb2xpZCByZ2JhKDE2NSwyMjAsMTM0LC4zKTtib3JkZXItcmFkaXVzOjUwJX0uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIC5zd2FsMi1zdWNjZXNzLWZpeHtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjE7dG9wOi41ZW07bGVmdDoxLjYyNWVtO3dpZHRoOi40Mzc1ZW07aGVpZ2h0OjUuNjI1ZW07dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpfS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3MgW2NsYXNzXj1zd2FsMi1zdWNjZXNzLWxpbmVde2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDoyO2hlaWdodDouMzEyNWVtO2JvcmRlci1yYWRpdXM6LjEyNWVtO2JhY2tncm91bmQtY29sb3I6I2E1ZGM4Nn0uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzIFtjbGFzc149c3dhbDItc3VjY2Vzcy1saW5lXVtjbGFzcyQ9dGlwXXt0b3A6Mi44NzVlbTtsZWZ0Oi44MTI1ZW07d2lkdGg6MS41NjI1ZW07dHJhbnNmb3JtOnJvdGF0ZSg0NWRlZyl9LnN3YWwyLWljb24uc3dhbDItc3VjY2VzcyBbY2xhc3NePXN3YWwyLXN1Y2Nlc3MtbGluZV1bY2xhc3MkPWxvbmdde3RvcDoyLjM3NWVtO3JpZ2h0Oi41ZW07d2lkdGg6Mi45Mzc1ZW07dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpfS5zd2FsMi1pY29uLnN3YWwyLXN1Y2Nlc3Muc3dhbDItaWNvbi1zaG93IC5zd2FsMi1zdWNjZXNzLWxpbmUtdGlwey13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLWFuaW1hdGUtc3VjY2Vzcy1saW5lLXRpcCAuNzVzO2FuaW1hdGlvbjpzd2FsMi1hbmltYXRlLXN1Y2Nlc3MtbGluZS10aXAgLjc1c30uc3dhbDItaWNvbi5zd2FsMi1zdWNjZXNzLnN3YWwyLWljb24tc2hvdyAuc3dhbDItc3VjY2Vzcy1saW5lLWxvbmd7LXdlYmtpdC1hbmltYXRpb246c3dhbDItYW5pbWF0ZS1zdWNjZXNzLWxpbmUtbG9uZyAuNzVzO2FuaW1hdGlvbjpzd2FsMi1hbmltYXRlLXN1Y2Nlc3MtbGluZS1sb25nIC43NXN9LnN3YWwyLWljb24uc3dhbDItc3VjY2Vzcy5zd2FsMi1pY29uLXNob3cgLnN3YWwyLXN1Y2Nlc3MtY2lyY3VsYXItbGluZS1yaWdodHstd2Via2l0LWFuaW1hdGlvbjpzd2FsMi1yb3RhdGUtc3VjY2Vzcy1jaXJjdWxhci1saW5lIDQuMjVzIGVhc2UtaW47YW5pbWF0aW9uOnN3YWwyLXJvdGF0ZS1zdWNjZXNzLWNpcmN1bGFyLWxpbmUgNC4yNXMgZWFzZS1pbn0uc3dhbDItcHJvZ3Jlc3Mtc3RlcHN7ZmxleC13cmFwOndyYXA7YWxpZ24taXRlbXM6Y2VudGVyO21heC13aWR0aDoxMDAlO21hcmdpbjoxLjI1ZW0gYXV0bztwYWRkaW5nOjA7YmFja2dyb3VuZDppbmhlcml0O2ZvbnQtd2VpZ2h0OjYwMH0uc3dhbDItcHJvZ3Jlc3Mtc3RlcHMgbGl7ZGlzcGxheTppbmxpbmUtYmxvY2s7cG9zaXRpb246cmVsYXRpdmV9LnN3YWwyLXByb2dyZXNzLXN0ZXBzIC5zd2FsMi1wcm9ncmVzcy1zdGVwe3otaW5kZXg6MjA7ZmxleC1zaHJpbms6MDt3aWR0aDoyZW07aGVpZ2h0OjJlbTtib3JkZXItcmFkaXVzOjJlbTtiYWNrZ3JvdW5kOiMyNzc4YzQ7Y29sb3I6I2ZmZjtsaW5lLWhlaWdodDoyZW07dGV4dC1hbGlnbjpjZW50ZXJ9LnN3YWwyLXByb2dyZXNzLXN0ZXBzIC5zd2FsMi1wcm9ncmVzcy1zdGVwLnN3YWwyLWFjdGl2ZS1wcm9ncmVzcy1zdGVwe2JhY2tncm91bmQ6IzI3NzhjNH0uc3dhbDItcHJvZ3Jlc3Mtc3RlcHMgLnN3YWwyLXByb2dyZXNzLXN0ZXAuc3dhbDItYWN0aXZlLXByb2dyZXNzLXN0ZXB+LnN3YWwyLXByb2dyZXNzLXN0ZXB7YmFja2dyb3VuZDojYWRkOGU2O2NvbG9yOiNmZmZ9LnN3YWwyLXByb2dyZXNzLXN0ZXBzIC5zd2FsMi1wcm9ncmVzcy1zdGVwLnN3YWwyLWFjdGl2ZS1wcm9ncmVzcy1zdGVwfi5zd2FsMi1wcm9ncmVzcy1zdGVwLWxpbmV7YmFja2dyb3VuZDojYWRkOGU2fS5zd2FsMi1wcm9ncmVzcy1zdGVwcyAuc3dhbDItcHJvZ3Jlc3Mtc3RlcC1saW5le3otaW5kZXg6MTA7ZmxleC1zaHJpbms6MDt3aWR0aDoyLjVlbTtoZWlnaHQ6LjRlbTttYXJnaW46MCAtMXB4O2JhY2tncm91bmQ6IzI3NzhjNH1bY2xhc3NePXN3YWwyXXstd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6dHJhbnNwYXJlbnR9LnN3YWwyLXNob3d7LXdlYmtpdC1hbmltYXRpb246c3dhbDItc2hvdyAuM3M7YW5pbWF0aW9uOnN3YWwyLXNob3cgLjNzfS5zd2FsMi1oaWRley13ZWJraXQtYW5pbWF0aW9uOnN3YWwyLWhpZGUgLjE1cyBmb3J3YXJkczthbmltYXRpb246c3dhbDItaGlkZSAuMTVzIGZvcndhcmRzfS5zd2FsMi1ub2FuaW1hdGlvbnt0cmFuc2l0aW9uOm5vbmV9LnN3YWwyLXNjcm9sbGJhci1tZWFzdXJle3Bvc2l0aW9uOmFic29sdXRlO3RvcDotOTk5OXB4O3dpZHRoOjUwcHg7aGVpZ2h0OjUwcHg7b3ZlcmZsb3c6c2Nyb2xsfS5zd2FsMi1ydGwgLnN3YWwyLWNsb3Nle21hcmdpbi1yaWdodDppbml0aWFsO21hcmdpbi1sZWZ0OjB9LnN3YWwyLXJ0bCAuc3dhbDItdGltZXItcHJvZ3Jlc3MtYmFye3JpZ2h0OjA7bGVmdDphdXRvfUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi10b2FzdC1zaG93ezAle3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0uNjI1ZW0pIHJvdGF0ZVooMmRlZyl9MzMle3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHJvdGF0ZVooLTJkZWcpfTY2JXt0cmFuc2Zvcm06dHJhbnNsYXRlWSguMzEyNWVtKSByb3RhdGVaKDJkZWcpfTEwMCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCkgcm90YXRlWigwKX19QGtleWZyYW1lcyBzd2FsMi10b2FzdC1zaG93ezAle3RyYW5zZm9ybTp0cmFuc2xhdGVZKC0uNjI1ZW0pIHJvdGF0ZVooMmRlZyl9MzMle3RyYW5zZm9ybTp0cmFuc2xhdGVZKDApIHJvdGF0ZVooLTJkZWcpfTY2JXt0cmFuc2Zvcm06dHJhbnNsYXRlWSguMzEyNWVtKSByb3RhdGVaKDJkZWcpfTEwMCV7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoMCkgcm90YXRlWigwKX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLXRvYXN0LWhpZGV7MTAwJXt0cmFuc2Zvcm06cm90YXRlWigxZGVnKTtvcGFjaXR5OjB9fUBrZXlmcmFtZXMgc3dhbDItdG9hc3QtaGlkZXsxMDAle3RyYW5zZm9ybTpyb3RhdGVaKDFkZWcpO29wYWNpdHk6MH19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLXRvYXN0LWFuaW1hdGUtc3VjY2Vzcy1saW5lLXRpcHswJXt0b3A6LjU2MjVlbTtsZWZ0Oi4wNjI1ZW07d2lkdGg6MH01NCV7dG9wOi4xMjVlbTtsZWZ0Oi4xMjVlbTt3aWR0aDowfTcwJXt0b3A6LjYyNWVtO2xlZnQ6LS4yNWVtO3dpZHRoOjEuNjI1ZW19ODQle3RvcDoxLjA2MjVlbTtsZWZ0Oi43NWVtO3dpZHRoOi41ZW19MTAwJXt0b3A6MS4xMjVlbTtsZWZ0Oi4xODc1ZW07d2lkdGg6Ljc1ZW19fUBrZXlmcmFtZXMgc3dhbDItdG9hc3QtYW5pbWF0ZS1zdWNjZXNzLWxpbmUtdGlwezAle3RvcDouNTYyNWVtO2xlZnQ6LjA2MjVlbTt3aWR0aDowfTU0JXt0b3A6LjEyNWVtO2xlZnQ6LjEyNWVtO3dpZHRoOjB9NzAle3RvcDouNjI1ZW07bGVmdDotLjI1ZW07d2lkdGg6MS42MjVlbX04NCV7dG9wOjEuMDYyNWVtO2xlZnQ6Ljc1ZW07d2lkdGg6LjVlbX0xMDAle3RvcDoxLjEyNWVtO2xlZnQ6LjE4NzVlbTt3aWR0aDouNzVlbX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLXRvYXN0LWFuaW1hdGUtc3VjY2Vzcy1saW5lLWxvbmd7MCV7dG9wOjEuNjI1ZW07cmlnaHQ6MS4zNzVlbTt3aWR0aDowfTY1JXt0b3A6MS4yNWVtO3JpZ2h0Oi45Mzc1ZW07d2lkdGg6MH04NCV7dG9wOi45Mzc1ZW07cmlnaHQ6MDt3aWR0aDoxLjEyNWVtfTEwMCV7dG9wOi45Mzc1ZW07cmlnaHQ6LjE4NzVlbTt3aWR0aDoxLjM3NWVtfX1Aa2V5ZnJhbWVzIHN3YWwyLXRvYXN0LWFuaW1hdGUtc3VjY2Vzcy1saW5lLWxvbmd7MCV7dG9wOjEuNjI1ZW07cmlnaHQ6MS4zNzVlbTt3aWR0aDowfTY1JXt0b3A6MS4yNWVtO3JpZ2h0Oi45Mzc1ZW07d2lkdGg6MH04NCV7dG9wOi45Mzc1ZW07cmlnaHQ6MDt3aWR0aDoxLjEyNWVtfTEwMCV7dG9wOi45Mzc1ZW07cmlnaHQ6LjE4NzVlbTt3aWR0aDoxLjM3NWVtfX1ALXdlYmtpdC1rZXlmcmFtZXMgc3dhbDItc2hvd3swJXt0cmFuc2Zvcm06c2NhbGUoLjcpfTQ1JXt0cmFuc2Zvcm06c2NhbGUoMS4wNSl9ODAle3RyYW5zZm9ybTpzY2FsZSguOTUpfTEwMCV7dHJhbnNmb3JtOnNjYWxlKDEpfX1Aa2V5ZnJhbWVzIHN3YWwyLXNob3d7MCV7dHJhbnNmb3JtOnNjYWxlKC43KX00NSV7dHJhbnNmb3JtOnNjYWxlKDEuMDUpfTgwJXt0cmFuc2Zvcm06c2NhbGUoLjk1KX0xMDAle3RyYW5zZm9ybTpzY2FsZSgxKX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLWhpZGV7MCV7dHJhbnNmb3JtOnNjYWxlKDEpO29wYWNpdHk6MX0xMDAle3RyYW5zZm9ybTpzY2FsZSguNSk7b3BhY2l0eTowfX1Aa2V5ZnJhbWVzIHN3YWwyLWhpZGV7MCV7dHJhbnNmb3JtOnNjYWxlKDEpO29wYWNpdHk6MX0xMDAle3RyYW5zZm9ybTpzY2FsZSguNSk7b3BhY2l0eTowfX1ALXdlYmtpdC1rZXlmcmFtZXMgc3dhbDItYW5pbWF0ZS1zdWNjZXNzLWxpbmUtdGlwezAle3RvcDoxLjE4NzVlbTtsZWZ0Oi4wNjI1ZW07d2lkdGg6MH01NCV7dG9wOjEuMDYyNWVtO2xlZnQ6LjEyNWVtO3dpZHRoOjB9NzAle3RvcDoyLjE4NzVlbTtsZWZ0Oi0uMzc1ZW07d2lkdGg6My4xMjVlbX04NCV7dG9wOjNlbTtsZWZ0OjEuMzEyNWVtO3dpZHRoOjEuMDYyNWVtfTEwMCV7dG9wOjIuODEyNWVtO2xlZnQ6LjgxMjVlbTt3aWR0aDoxLjU2MjVlbX19QGtleWZyYW1lcyBzd2FsMi1hbmltYXRlLXN1Y2Nlc3MtbGluZS10aXB7MCV7dG9wOjEuMTg3NWVtO2xlZnQ6LjA2MjVlbTt3aWR0aDowfTU0JXt0b3A6MS4wNjI1ZW07bGVmdDouMTI1ZW07d2lkdGg6MH03MCV7dG9wOjIuMTg3NWVtO2xlZnQ6LS4zNzVlbTt3aWR0aDozLjEyNWVtfTg0JXt0b3A6M2VtO2xlZnQ6MS4zMTI1ZW07d2lkdGg6MS4wNjI1ZW19MTAwJXt0b3A6Mi44MTI1ZW07bGVmdDouODEyNWVtO3dpZHRoOjEuNTYyNWVtfX1ALXdlYmtpdC1rZXlmcmFtZXMgc3dhbDItYW5pbWF0ZS1zdWNjZXNzLWxpbmUtbG9uZ3swJXt0b3A6My4zNzVlbTtyaWdodDoyLjg3NWVtO3dpZHRoOjB9NjUle3RvcDozLjM3NWVtO3JpZ2h0OjIuODc1ZW07d2lkdGg6MH04NCV7dG9wOjIuMTg3NWVtO3JpZ2h0OjA7d2lkdGg6My40Mzc1ZW19MTAwJXt0b3A6Mi4zNzVlbTtyaWdodDouNWVtO3dpZHRoOjIuOTM3NWVtfX1Aa2V5ZnJhbWVzIHN3YWwyLWFuaW1hdGUtc3VjY2Vzcy1saW5lLWxvbmd7MCV7dG9wOjMuMzc1ZW07cmlnaHQ6Mi44NzVlbTt3aWR0aDowfTY1JXt0b3A6My4zNzVlbTtyaWdodDoyLjg3NWVtO3dpZHRoOjB9ODQle3RvcDoyLjE4NzVlbTtyaWdodDowO3dpZHRoOjMuNDM3NWVtfTEwMCV7dG9wOjIuMzc1ZW07cmlnaHQ6LjVlbTt3aWR0aDoyLjkzNzVlbX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLXJvdGF0ZS1zdWNjZXNzLWNpcmN1bGFyLWxpbmV7MCV7dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpfTUle3RyYW5zZm9ybTpyb3RhdGUoLTQ1ZGVnKX0xMiV7dHJhbnNmb3JtOnJvdGF0ZSgtNDA1ZGVnKX0xMDAle3RyYW5zZm9ybTpyb3RhdGUoLTQwNWRlZyl9fUBrZXlmcmFtZXMgc3dhbDItcm90YXRlLXN1Y2Nlc3MtY2lyY3VsYXItbGluZXswJXt0cmFuc2Zvcm06cm90YXRlKC00NWRlZyl9NSV7dHJhbnNmb3JtOnJvdGF0ZSgtNDVkZWcpfTEyJXt0cmFuc2Zvcm06cm90YXRlKC00MDVkZWcpfTEwMCV7dHJhbnNmb3JtOnJvdGF0ZSgtNDA1ZGVnKX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLWFuaW1hdGUtZXJyb3IteC1tYXJrezAle21hcmdpbi10b3A6MS42MjVlbTt0cmFuc2Zvcm06c2NhbGUoLjQpO29wYWNpdHk6MH01MCV7bWFyZ2luLXRvcDoxLjYyNWVtO3RyYW5zZm9ybTpzY2FsZSguNCk7b3BhY2l0eTowfTgwJXttYXJnaW4tdG9wOi0uMzc1ZW07dHJhbnNmb3JtOnNjYWxlKDEuMTUpfTEwMCV7bWFyZ2luLXRvcDowO3RyYW5zZm9ybTpzY2FsZSgxKTtvcGFjaXR5OjF9fUBrZXlmcmFtZXMgc3dhbDItYW5pbWF0ZS1lcnJvci14LW1hcmt7MCV7bWFyZ2luLXRvcDoxLjYyNWVtO3RyYW5zZm9ybTpzY2FsZSguNCk7b3BhY2l0eTowfTUwJXttYXJnaW4tdG9wOjEuNjI1ZW07dHJhbnNmb3JtOnNjYWxlKC40KTtvcGFjaXR5OjB9ODAle21hcmdpbi10b3A6LS4zNzVlbTt0cmFuc2Zvcm06c2NhbGUoMS4xNSl9MTAwJXttYXJnaW4tdG9wOjA7dHJhbnNmb3JtOnNjYWxlKDEpO29wYWNpdHk6MX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLWFuaW1hdGUtZXJyb3ItaWNvbnswJXt0cmFuc2Zvcm06cm90YXRlWCgxMDBkZWcpO29wYWNpdHk6MH0xMDAle3RyYW5zZm9ybTpyb3RhdGVYKDApO29wYWNpdHk6MX19QGtleWZyYW1lcyBzd2FsMi1hbmltYXRlLWVycm9yLWljb257MCV7dHJhbnNmb3JtOnJvdGF0ZVgoMTAwZGVnKTtvcGFjaXR5OjB9MTAwJXt0cmFuc2Zvcm06cm90YXRlWCgwKTtvcGFjaXR5OjF9fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi1yb3RhdGUtbG9hZGluZ3swJXt0cmFuc2Zvcm06cm90YXRlKDApfTEwMCV7dHJhbnNmb3JtOnJvdGF0ZSgzNjBkZWcpfX1Aa2V5ZnJhbWVzIHN3YWwyLXJvdGF0ZS1sb2FkaW5nezAle3RyYW5zZm9ybTpyb3RhdGUoMCl9MTAwJXt0cmFuc2Zvcm06cm90YXRlKDM2MGRlZyl9fUAtd2Via2l0LWtleWZyYW1lcyBzd2FsMi1hbmltYXRlLXF1ZXN0aW9uLW1hcmt7MCV7dHJhbnNmb3JtOnJvdGF0ZVkoLTM2MGRlZyl9MTAwJXt0cmFuc2Zvcm06cm90YXRlWSgwKX19QGtleWZyYW1lcyBzd2FsMi1hbmltYXRlLXF1ZXN0aW9uLW1hcmt7MCV7dHJhbnNmb3JtOnJvdGF0ZVkoLTM2MGRlZyl9MTAwJXt0cmFuc2Zvcm06cm90YXRlWSgwKX19QC13ZWJraXQta2V5ZnJhbWVzIHN3YWwyLWFuaW1hdGUtaS1tYXJrezAle3RyYW5zZm9ybTpyb3RhdGVaKDQ1ZGVnKTtvcGFjaXR5OjB9MjUle3RyYW5zZm9ybTpyb3RhdGVaKC0yNWRlZyk7b3BhY2l0eTouNH01MCV7dHJhbnNmb3JtOnJvdGF0ZVooMTVkZWcpO29wYWNpdHk6Ljh9NzUle3RyYW5zZm9ybTpyb3RhdGVaKC01ZGVnKTtvcGFjaXR5OjF9MTAwJXt0cmFuc2Zvcm06cm90YXRlWCgwKTtvcGFjaXR5OjF9fUBrZXlmcmFtZXMgc3dhbDItYW5pbWF0ZS1pLW1hcmt7MCV7dHJhbnNmb3JtOnJvdGF0ZVooNDVkZWcpO29wYWNpdHk6MH0yNSV7dHJhbnNmb3JtOnJvdGF0ZVooLTI1ZGVnKTtvcGFjaXR5Oi40fTUwJXt0cmFuc2Zvcm06cm90YXRlWigxNWRlZyk7b3BhY2l0eTouOH03NSV7dHJhbnNmb3JtOnJvdGF0ZVooLTVkZWcpO29wYWNpdHk6MX0xMDAle3RyYW5zZm9ybTpyb3RhdGVYKDApO29wYWNpdHk6MX19Ym9keS5zd2FsMi1zaG93bjpub3QoLnN3YWwyLW5vLWJhY2tkcm9wKTpub3QoLnN3YWwyLXRvYXN0LXNob3duKXtvdmVyZmxvdzpoaWRkZW59Ym9keS5zd2FsMi1oZWlnaHQtYXV0b3toZWlnaHQ6YXV0byFpbXBvcnRhbnR9Ym9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVye2JhY2tncm91bmQtY29sb3I6dHJhbnNwYXJlbnQhaW1wb3J0YW50O3BvaW50ZXItZXZlbnRzOm5vbmV9Ym9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyIC5zd2FsMi1wb3B1cHtwb2ludGVyLWV2ZW50czphbGx9Ym9keS5zd2FsMi1uby1iYWNrZHJvcCAuc3dhbDItY29udGFpbmVyIC5zd2FsMi1tb2RhbHtib3gtc2hhZG93OjAgMCAxMHB4IHJnYmEoMCwwLDAsLjQpfUBtZWRpYSBwcmludHtib2R5LnN3YWwyLXNob3duOm5vdCguc3dhbDItbm8tYmFja2Ryb3ApOm5vdCguc3dhbDItdG9hc3Qtc2hvd24pe292ZXJmbG93LXk6c2Nyb2xsIWltcG9ydGFudH1ib2R5LnN3YWwyLXNob3duOm5vdCguc3dhbDItbm8tYmFja2Ryb3ApOm5vdCguc3dhbDItdG9hc3Qtc2hvd24pPlthcmlhLWhpZGRlbj10cnVlXXtkaXNwbGF5Om5vbmV9Ym9keS5zd2FsMi1zaG93bjpub3QoLnN3YWwyLW5vLWJhY2tkcm9wKTpub3QoLnN3YWwyLXRvYXN0LXNob3duKSAuc3dhbDItY29udGFpbmVye3Bvc2l0aW9uOnN0YXRpYyFpbXBvcnRhbnR9fWJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lcntib3gtc2l6aW5nOmJvcmRlci1ib3g7d2lkdGg6MzYwcHg7bWF4LXdpZHRoOjEwMCU7YmFja2dyb3VuZC1jb2xvcjp0cmFuc3BhcmVudDtwb2ludGVyLWV2ZW50czpub25lfWJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3B7dG9wOjA7cmlnaHQ6YXV0bztib3R0b206YXV0bztsZWZ0OjUwJTt0cmFuc2Zvcm06dHJhbnNsYXRlWCgtNTAlKX1ib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItdG9wLWVuZCxib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItdG9wLXJpZ2h0e3RvcDowO3JpZ2h0OjA7Ym90dG9tOmF1dG87bGVmdDphdXRvfWJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi10b3AtbGVmdCxib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItdG9wLXN0YXJ0e3RvcDowO3JpZ2h0OmF1dG87Ym90dG9tOmF1dG87bGVmdDowfWJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItbGVmdCxib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItY2VudGVyLXN0YXJ0e3RvcDo1MCU7cmlnaHQ6YXV0bztib3R0b206YXV0bztsZWZ0OjA7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTUwJSl9Ym9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLWNlbnRlcnt0b3A6NTAlO3JpZ2h0OmF1dG87Ym90dG9tOmF1dG87bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLC01MCUpfWJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItZW5kLGJvZHkuc3dhbDItdG9hc3Qtc2hvd24gLnN3YWwyLWNvbnRhaW5lci5zd2FsMi1jZW50ZXItcmlnaHR7dG9wOjUwJTtyaWdodDowO2JvdHRvbTphdXRvO2xlZnQ6YXV0bzt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKX1ib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9tLWxlZnQsYm9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1zdGFydHt0b3A6YXV0bztyaWdodDphdXRvO2JvdHRvbTowO2xlZnQ6MH1ib2R5LnN3YWwyLXRvYXN0LXNob3duIC5zd2FsMi1jb250YWluZXIuc3dhbDItYm90dG9te3RvcDphdXRvO3JpZ2h0OmF1dG87Ym90dG9tOjA7bGVmdDo1MCU7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoLTUwJSl9Ym9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1lbmQsYm9keS5zd2FsMi10b2FzdC1zaG93biAuc3dhbDItY29udGFpbmVyLnN3YWwyLWJvdHRvbS1yaWdodHt0b3A6YXV0bztyaWdodDowO2JvdHRvbTowO2xlZnQ6YXV0b30iKTs="},{"meta":{"name":"forge.min.js","url":"https://unpkg.com/node-forge@0.10.0/dist/forge.min.js","ts":1670371893027,"mimetype":"text/javascript"},"source":"IWZ1bmN0aW9uKGUsdCl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYib2JqZWN0Ij09dHlwZW9mIG1vZHVsZT9tb2R1bGUuZXhwb3J0cz10KCk6ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoW10sdCk6Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuZm9yZ2U9dCgpOmUuZm9yZ2U9dCgpfSh3aW5kb3csKGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Z1bmN0aW9uIHIoYSl7aWYodFthXSlyZXR1cm4gdFthXS5leHBvcnRzO3ZhciBuPXRbYV09e2k6YSxsOiExLGV4cG9ydHM6e319O3JldHVybiBlW2FdLmNhbGwobi5leHBvcnRzLG4sbi5leHBvcnRzLHIpLG4ubD0hMCxuLmV4cG9ydHN9cmV0dXJuIHIubT1lLHIuYz10LHIuZD1mdW5jdGlvbihlLHQsYSl7ci5vKGUsdCl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2VudW1lcmFibGU6ITAsZ2V0OmF9KX0sci5yPWZ1bmN0aW9uKGUpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9LHIudD1mdW5jdGlvbihlLHQpe2lmKDEmdCYmKGU9cihlKSksOCZ0KXJldHVybiBlO2lmKDQmdCYmIm9iamVjdCI9PXR5cGVvZiBlJiZlJiZlLl9fZXNNb2R1bGUpcmV0dXJuIGU7dmFyIGE9T2JqZWN0LmNyZWF0ZShudWxsKTtpZihyLnIoYSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGEsImRlZmF1bHQiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSwyJnQmJiJzdHJpbmciIT10eXBlb2YgZSlmb3IodmFyIG4gaW4gZSlyLmQoYSxuLGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfS5iaW5kKG51bGwsbikpO3JldHVybiBhfSxyLm49ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIHIuZCh0LCJhIix0KSx0fSxyLm89ZnVuY3Rpb24oZSx0KXtyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsdCl9LHIucD0iIixyKHIucz0zNCl9KFtmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz17b3B0aW9uczp7dXNlUHVyZUphdmFTY3JpcHQ6ITF9fX0sZnVuY3Rpb24oZSx0LHIpeyhmdW5jdGlvbih0KXt2YXIgYT1yKDApLG49cigzNyksaT1lLmV4cG9ydHM9YS51dGlsPWEudXRpbHx8e307ZnVuY3Rpb24gcyhlKXtpZig4IT09ZSYmMTYhPT1lJiYyNCE9PWUmJjMyIT09ZSl0aHJvdyBuZXcgRXJyb3IoIk9ubHkgOCwgMTYsIDI0LCBvciAzMiBiaXRzIHN1cHBvcnRlZDogIitlKX1mdW5jdGlvbiBvKGUpe2lmKHRoaXMuZGF0YT0iIix0aGlzLnJlYWQ9MCwic3RyaW5nIj09dHlwZW9mIGUpdGhpcy5kYXRhPWU7ZWxzZSBpZihpLmlzQXJyYXlCdWZmZXIoZSl8fGkuaXNBcnJheUJ1ZmZlclZpZXcoZSkpaWYoInVuZGVmaW5lZCIhPXR5cGVvZiBCdWZmZXImJmUgaW5zdGFuY2VvZiBCdWZmZXIpdGhpcy5kYXRhPWUudG9TdHJpbmcoImJpbmFyeSIpO2Vsc2V7dmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZSk7dHJ5e3RoaXMuZGF0YT1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsdCl9Y2F0Y2goZSl7Zm9yKHZhciByPTA7cjx0Lmxlbmd0aDsrK3IpdGhpcy5wdXRCeXRlKHRbcl0pfX1lbHNlKGUgaW5zdGFuY2VvZiBvfHwib2JqZWN0Ij09dHlwZW9mIGUmJiJzdHJpbmciPT10eXBlb2YgZS5kYXRhJiYibnVtYmVyIj09dHlwZW9mIGUucmVhZCkmJih0aGlzLmRhdGE9ZS5kYXRhLHRoaXMucmVhZD1lLnJlYWQpO3RoaXMuX2NvbnN0cnVjdGVkU3RyaW5nTGVuZ3RoPTB9IWZ1bmN0aW9uKCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBwcm9jZXNzJiZwcm9jZXNzLm5leHRUaWNrJiYhcHJvY2Vzcy5icm93c2VyKXJldHVybiBpLm5leHRUaWNrPXByb2Nlc3MubmV4dFRpY2ssdm9pZCgiZnVuY3Rpb24iPT10eXBlb2Ygc2V0SW1tZWRpYXRlP2kuc2V0SW1tZWRpYXRlPXNldEltbWVkaWF0ZTppLnNldEltbWVkaWF0ZT1pLm5leHRUaWNrKTtpZigiZnVuY3Rpb24iPT10eXBlb2Ygc2V0SW1tZWRpYXRlKXJldHVybiBpLnNldEltbWVkaWF0ZT1mdW5jdGlvbigpe3JldHVybiBzZXRJbW1lZGlhdGUuYXBwbHkodm9pZCAwLGFyZ3VtZW50cyl9LHZvaWQoaS5uZXh0VGljaz1mdW5jdGlvbihlKXtyZXR1cm4gc2V0SW1tZWRpYXRlKGUpfSk7aWYoaS5zZXRJbW1lZGlhdGU9ZnVuY3Rpb24oZSl7c2V0VGltZW91dChlLDApfSwidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdyYmImZ1bmN0aW9uIj09dHlwZW9mIHdpbmRvdy5wb3N0TWVzc2FnZSl7dmFyIGU9ImZvcmdlLnNldEltbWVkaWF0ZSIsdD1bXTtpLnNldEltbWVkaWF0ZT1mdW5jdGlvbihyKXt0LnB1c2gociksMT09PXQubGVuZ3RoJiZ3aW5kb3cucG9zdE1lc3NhZ2UoZSwiKiIpfSx3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGZ1bmN0aW9uKHIpe2lmKHIuc291cmNlPT09d2luZG93JiZyLmRhdGE9PT1lKXtyLnN0b3BQcm9wYWdhdGlvbigpO3ZhciBhPXQuc2xpY2UoKTt0Lmxlbmd0aD0wLGEuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZSgpfSkpfX0pLCEwKX1pZigidW5kZWZpbmVkIiE9dHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIpe3ZhciByPURhdGUubm93KCksYT0hMCxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3Q9W107bmV3IE11dGF0aW9uT2JzZXJ2ZXIoKGZ1bmN0aW9uKCl7dmFyIGU9dC5zbGljZSgpO3QubGVuZ3RoPTAsZS5mb3JFYWNoKChmdW5jdGlvbihlKXtlKCl9KSl9KSkub2JzZXJ2ZShuLHthdHRyaWJ1dGVzOiEwfSk7dmFyIHM9aS5zZXRJbW1lZGlhdGU7aS5zZXRJbW1lZGlhdGU9ZnVuY3Rpb24oZSl7RGF0ZS5ub3coKS1yPjE1PyhyPURhdGUubm93KCkscyhlKSk6KHQucHVzaChlKSwxPT09dC5sZW5ndGgmJm4uc2V0QXR0cmlidXRlKCJhIixhPSFhKSl9fWkubmV4dFRpY2s9aS5zZXRJbW1lZGlhdGV9KCksaS5pc05vZGVqcz0idW5kZWZpbmVkIiE9dHlwZW9mIHByb2Nlc3MmJnByb2Nlc3MudmVyc2lvbnMmJnByb2Nlc3MudmVyc2lvbnMubm9kZSxpLmdsb2JhbFNjb3BlPWkuaXNOb2RlanM/dDoidW5kZWZpbmVkIj09dHlwZW9mIHNlbGY/d2luZG93OnNlbGYsaS5pc0FycmF5PUFycmF5LmlzQXJyYXl8fGZ1bmN0aW9uKGUpe3JldHVybiJbb2JqZWN0IEFycmF5XSI9PT1PYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoZSl9LGkuaXNBcnJheUJ1ZmZlcj1mdW5jdGlvbihlKXtyZXR1cm4idW5kZWZpbmVkIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXJ9LGkuaXNBcnJheUJ1ZmZlclZpZXc9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmkuaXNBcnJheUJ1ZmZlcihlLmJ1ZmZlcikmJnZvaWQgMCE9PWUuYnl0ZUxlbmd0aH0saS5CeXRlQnVmZmVyPW8saS5CeXRlU3RyaW5nQnVmZmVyPW87aS5CeXRlU3RyaW5nQnVmZmVyLnByb3RvdHlwZS5fb3B0aW1pemVDb25zdHJ1Y3RlZFN0cmluZz1mdW5jdGlvbihlKXt0aGlzLl9jb25zdHJ1Y3RlZFN0cmluZ0xlbmd0aCs9ZSx0aGlzLl9jb25zdHJ1Y3RlZFN0cmluZ0xlbmd0aD40MDk2JiYodGhpcy5kYXRhLnN1YnN0cigwLDEpLHRoaXMuX2NvbnN0cnVjdGVkU3RyaW5nTGVuZ3RoPTApfSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLmxlbmd0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEubGVuZ3RoLXRoaXMucmVhZH0saS5CeXRlU3RyaW5nQnVmZmVyLnByb3RvdHlwZS5pc0VtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubGVuZ3RoKCk8PTB9LGkuQnl0ZVN0cmluZ0J1ZmZlci5wcm90b3R5cGUucHV0Qnl0ZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXRCeXRlcyhTdHJpbmcuZnJvbUNoYXJDb2RlKGUpKX0saS5CeXRlU3RyaW5nQnVmZmVyLnByb3RvdHlwZS5maWxsV2l0aEJ5dGU9ZnVuY3Rpb24oZSx0KXtlPVN0cmluZy5mcm9tQ2hhckNvZGUoZSk7Zm9yKHZhciByPXRoaXMuZGF0YTt0PjA7KTEmdCYmKHIrPWUpLCh0Pj4+PTEpPjAmJihlKz1lKTtyZXR1cm4gdGhpcy5kYXRhPXIsdGhpcy5fb3B0aW1pemVDb25zdHJ1Y3RlZFN0cmluZyh0KSx0aGlzfSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLnB1dEJ5dGVzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRhdGErPWUsdGhpcy5fb3B0aW1pemVDb25zdHJ1Y3RlZFN0cmluZyhlLmxlbmd0aCksdGhpc30saS5CeXRlU3RyaW5nQnVmZmVyLnByb3RvdHlwZS5wdXRTdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHV0Qnl0ZXMoaS5lbmNvZGVVdGY4KGUpKX0saS5CeXRlU3RyaW5nQnVmZmVyLnByb3RvdHlwZS5wdXRJbnQxNj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXRCeXRlcyhTdHJpbmcuZnJvbUNoYXJDb2RlKGU+PjgmMjU1KStTdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSZlKSl9LGkuQnl0ZVN0cmluZ0J1ZmZlci5wcm90b3R5cGUucHV0SW50MjQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHV0Qnl0ZXMoU3RyaW5nLmZyb21DaGFyQ29kZShlPj4xNiYyNTUpK1N0cmluZy5mcm9tQ2hhckNvZGUoZT4+OCYyNTUpK1N0cmluZy5mcm9tQ2hhckNvZGUoMjU1JmUpKX0saS5CeXRlU3RyaW5nQnVmZmVyLnByb3RvdHlwZS5wdXRJbnQzMj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXRCeXRlcyhTdHJpbmcuZnJvbUNoYXJDb2RlKGU+PjI0JjI1NSkrU3RyaW5nLmZyb21DaGFyQ29kZShlPj4xNiYyNTUpK1N0cmluZy5mcm9tQ2hhckNvZGUoZT4+OCYyNTUpK1N0cmluZy5mcm9tQ2hhckNvZGUoMjU1JmUpKX0saS5CeXRlU3RyaW5nQnVmZmVyLnByb3RvdHlwZS5wdXRJbnQxNkxlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1dEJ5dGVzKFN0cmluZy5mcm9tQ2hhckNvZGUoMjU1JmUpK1N0cmluZy5mcm9tQ2hhckNvZGUoZT4+OCYyNTUpKX0saS5CeXRlU3RyaW5nQnVmZmVyLnByb3RvdHlwZS5wdXRJbnQyNExlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnB1dEJ5dGVzKFN0cmluZy5mcm9tQ2hhckNvZGUoMjU1JmUpK1N0cmluZy5mcm9tQ2hhckNvZGUoZT4+OCYyNTUpK1N0cmluZy5mcm9tQ2hhckNvZGUoZT4+MTYmMjU1KSl9LGkuQnl0ZVN0cmluZ0J1ZmZlci5wcm90b3R5cGUucHV0SW50MzJMZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXRCeXRlcyhTdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSZlKStTdHJpbmcuZnJvbUNoYXJDb2RlKGU+PjgmMjU1KStTdHJpbmcuZnJvbUNoYXJDb2RlKGU+PjE2JjI1NSkrU3RyaW5nLmZyb21DaGFyQ29kZShlPj4yNCYyNTUpKX0saS5CeXRlU3RyaW5nQnVmZmVyLnByb3RvdHlwZS5wdXRJbnQ9ZnVuY3Rpb24oZSx0KXtzKHQpO3ZhciByPSIiO2Rve3QtPTgscis9U3RyaW5nLmZyb21DaGFyQ29kZShlPj50JjI1NSl9d2hpbGUodD4wKTtyZXR1cm4gdGhpcy5wdXRCeXRlcyhyKX0saS5CeXRlU3RyaW5nQnVmZmVyLnByb3RvdHlwZS5wdXRTaWduZWRJbnQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZTwwJiYoZSs9Mjw8dC0xKSx0aGlzLnB1dEludChlLHQpfSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLnB1dEJ1ZmZlcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXRCeXRlcyhlLmdldEJ5dGVzKCkpfSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLmdldEJ5dGU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLmNoYXJDb2RlQXQodGhpcy5yZWFkKyspfSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLmdldEludDE2PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kYXRhLmNoYXJDb2RlQXQodGhpcy5yZWFkKTw8OF50aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnJlYWQrMSk7cmV0dXJuIHRoaXMucmVhZCs9MixlfSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLmdldEludDI0PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kYXRhLmNoYXJDb2RlQXQodGhpcy5yZWFkKTw8MTZedGhpcy5kYXRhLmNoYXJDb2RlQXQodGhpcy5yZWFkKzEpPDw4XnRoaXMuZGF0YS5jaGFyQ29kZUF0KHRoaXMucmVhZCsyKTtyZXR1cm4gdGhpcy5yZWFkKz0zLGV9LGkuQnl0ZVN0cmluZ0J1ZmZlci5wcm90b3R5cGUuZ2V0SW50MzI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnJlYWQpPDwyNF50aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnJlYWQrMSk8PDE2XnRoaXMuZGF0YS5jaGFyQ29kZUF0KHRoaXMucmVhZCsyKTw8OF50aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnJlYWQrMyk7cmV0dXJuIHRoaXMucmVhZCs9NCxlfSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLmdldEludDE2TGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnJlYWQpXnRoaXMuZGF0YS5jaGFyQ29kZUF0KHRoaXMucmVhZCsxKTw8ODtyZXR1cm4gdGhpcy5yZWFkKz0yLGV9LGkuQnl0ZVN0cmluZ0J1ZmZlci5wcm90b3R5cGUuZ2V0SW50MjRMZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZGF0YS5jaGFyQ29kZUF0KHRoaXMucmVhZCledGhpcy5kYXRhLmNoYXJDb2RlQXQodGhpcy5yZWFkKzEpPDw4XnRoaXMuZGF0YS5jaGFyQ29kZUF0KHRoaXMucmVhZCsyKTw8MTY7cmV0dXJuIHRoaXMucmVhZCs9MyxlfSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLmdldEludDMyTGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnJlYWQpXnRoaXMuZGF0YS5jaGFyQ29kZUF0KHRoaXMucmVhZCsxKTw8OF50aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnJlYWQrMik8PDE2XnRoaXMuZGF0YS5jaGFyQ29kZUF0KHRoaXMucmVhZCszKTw8MjQ7cmV0dXJuIHRoaXMucmVhZCs9NCxlfSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLmdldEludD1mdW5jdGlvbihlKXtzKGUpO3ZhciB0PTA7ZG97dD0odDw8OCkrdGhpcy5kYXRhLmNoYXJDb2RlQXQodGhpcy5yZWFkKyspLGUtPTh9d2hpbGUoZT4wKTtyZXR1cm4gdH0saS5CeXRlU3RyaW5nQnVmZmVyLnByb3RvdHlwZS5nZXRTaWduZWRJbnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5nZXRJbnQoZSkscj0yPDxlLTI7cmV0dXJuIHQ+PXImJih0LT1yPDwxKSx0fSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLmdldEJ5dGVzPWZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBlPyhlPU1hdGgubWluKHRoaXMubGVuZ3RoKCksZSksdD10aGlzLmRhdGEuc2xpY2UodGhpcy5yZWFkLHRoaXMucmVhZCtlKSx0aGlzLnJlYWQrPWUpOjA9PT1lP3Q9IiI6KHQ9MD09PXRoaXMucmVhZD90aGlzLmRhdGE6dGhpcy5kYXRhLnNsaWNlKHRoaXMucmVhZCksdGhpcy5jbGVhcigpKSx0fSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLmJ5dGVzPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDA9PT1lP3RoaXMuZGF0YS5zbGljZSh0aGlzLnJlYWQpOnRoaXMuZGF0YS5zbGljZSh0aGlzLnJlYWQsdGhpcy5yZWFkK2UpfSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLmF0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLnJlYWQrZSl9LGkuQnl0ZVN0cmluZ0J1ZmZlci5wcm90b3R5cGUuc2V0QXQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5kYXRhPXRoaXMuZGF0YS5zdWJzdHIoMCx0aGlzLnJlYWQrZSkrU3RyaW5nLmZyb21DaGFyQ29kZSh0KSt0aGlzLmRhdGEuc3Vic3RyKHRoaXMucmVhZCtlKzEpLHRoaXN9LGkuQnl0ZVN0cmluZ0J1ZmZlci5wcm90b3R5cGUubGFzdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEuY2hhckNvZGVBdCh0aGlzLmRhdGEubGVuZ3RoLTEpfSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLmNvcHk9ZnVuY3Rpb24oKXt2YXIgZT1pLmNyZWF0ZUJ1ZmZlcih0aGlzLmRhdGEpO3JldHVybiBlLnJlYWQ9dGhpcy5yZWFkLGV9LGkuQnl0ZVN0cmluZ0J1ZmZlci5wcm90b3R5cGUuY29tcGFjdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWQ+MCYmKHRoaXMuZGF0YT10aGlzLmRhdGEuc2xpY2UodGhpcy5yZWFkKSx0aGlzLnJlYWQ9MCksdGhpc30saS5CeXRlU3RyaW5nQnVmZmVyLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGE9IiIsdGhpcy5yZWFkPTAsdGhpc30saS5CeXRlU3RyaW5nQnVmZmVyLnByb3RvdHlwZS50cnVuY2F0ZT1mdW5jdGlvbihlKXt2YXIgdD1NYXRoLm1heCgwLHRoaXMubGVuZ3RoKCktZSk7cmV0dXJuIHRoaXMuZGF0YT10aGlzLmRhdGEuc3Vic3RyKHRoaXMucmVhZCx0KSx0aGlzLnJlYWQ9MCx0aGlzfSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLnRvSGV4PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPSIiLHQ9dGhpcy5yZWFkO3Q8dGhpcy5kYXRhLmxlbmd0aDsrK3Qpe3ZhciByPXRoaXMuZGF0YS5jaGFyQ29kZUF0KHQpO3I8MTYmJihlKz0iMCIpLGUrPXIudG9TdHJpbmcoMTYpfXJldHVybiBlfSxpLkJ5dGVTdHJpbmdCdWZmZXIucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7cmV0dXJuIGkuZGVjb2RlVXRmOCh0aGlzLmJ5dGVzKCkpfSxpLkRhdGFCdWZmZXI9ZnVuY3Rpb24oZSx0KXt0PXR8fHt9LHRoaXMucmVhZD10LnJlYWRPZmZzZXR8fDAsdGhpcy5ncm93U2l6ZT10Lmdyb3dTaXplfHwxMDI0O3ZhciByPWkuaXNBcnJheUJ1ZmZlcihlKSxhPWkuaXNBcnJheUJ1ZmZlclZpZXcoZSk7aWYocnx8YSlyZXR1cm4gdGhpcy5kYXRhPXI/bmV3IERhdGFWaWV3KGUpOm5ldyBEYXRhVmlldyhlLmJ1ZmZlcixlLmJ5dGVPZmZzZXQsZS5ieXRlTGVuZ3RoKSx2b2lkKHRoaXMud3JpdGU9IndyaXRlT2Zmc2V0ImluIHQ/dC53cml0ZU9mZnNldDp0aGlzLmRhdGEuYnl0ZUxlbmd0aCk7dGhpcy5kYXRhPW5ldyBEYXRhVmlldyhuZXcgQXJyYXlCdWZmZXIoMCkpLHRoaXMud3JpdGU9MCxudWxsIT1lJiZ0aGlzLnB1dEJ5dGVzKGUpLCJ3cml0ZU9mZnNldCJpbiB0JiYodGhpcy53cml0ZT10LndyaXRlT2Zmc2V0KX0saS5EYXRhQnVmZmVyLnByb3RvdHlwZS5sZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy53cml0ZS10aGlzLnJlYWR9LGkuRGF0YUJ1ZmZlci5wcm90b3R5cGUuaXNFbXB0eT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmxlbmd0aCgpPD0wfSxpLkRhdGFCdWZmZXIucHJvdG90eXBlLmFjY29tbW9kYXRlPWZ1bmN0aW9uKGUsdCl7aWYodGhpcy5sZW5ndGgoKT49ZSlyZXR1cm4gdGhpczt0PU1hdGgubWF4KHR8fHRoaXMuZ3Jvd1NpemUsZSk7dmFyIHI9bmV3IFVpbnQ4QXJyYXkodGhpcy5kYXRhLmJ1ZmZlcix0aGlzLmRhdGEuYnl0ZU9mZnNldCx0aGlzLmRhdGEuYnl0ZUxlbmd0aCksYT1uZXcgVWludDhBcnJheSh0aGlzLmxlbmd0aCgpK3QpO3JldHVybiBhLnNldChyKSx0aGlzLmRhdGE9bmV3IERhdGFWaWV3KGEuYnVmZmVyKSx0aGlzfSxpLkRhdGFCdWZmZXIucHJvdG90eXBlLnB1dEJ5dGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYWNjb21tb2RhdGUoMSksdGhpcy5kYXRhLnNldFVpbnQ4KHRoaXMud3JpdGUrKyxlKSx0aGlzfSxpLkRhdGFCdWZmZXIucHJvdG90eXBlLmZpbGxXaXRoQnl0ZT1mdW5jdGlvbihlLHQpe3RoaXMuYWNjb21tb2RhdGUodCk7Zm9yKHZhciByPTA7cjx0Oysrcil0aGlzLmRhdGEuc2V0VWludDgoZSk7cmV0dXJuIHRoaXN9LGkuRGF0YUJ1ZmZlci5wcm90b3R5cGUucHV0Qnl0ZXM9ZnVuY3Rpb24oZSx0KXtpZihpLmlzQXJyYXlCdWZmZXJWaWV3KGUpKXt2YXIgcj0oYT1uZXcgVWludDhBcnJheShlLmJ1ZmZlcixlLmJ5dGVPZmZzZXQsZS5ieXRlTGVuZ3RoKSkuYnl0ZUxlbmd0aC1hLmJ5dGVPZmZzZXQ7cmV0dXJuIHRoaXMuYWNjb21tb2RhdGUociksbmV3IFVpbnQ4QXJyYXkodGhpcy5kYXRhLmJ1ZmZlcix0aGlzLndyaXRlKS5zZXQoYSksdGhpcy53cml0ZSs9cix0aGlzfWlmKGkuaXNBcnJheUJ1ZmZlcihlKSl7dmFyIGE9bmV3IFVpbnQ4QXJyYXkoZSk7cmV0dXJuIHRoaXMuYWNjb21tb2RhdGUoYS5ieXRlTGVuZ3RoKSxuZXcgVWludDhBcnJheSh0aGlzLmRhdGEuYnVmZmVyKS5zZXQoYSx0aGlzLndyaXRlKSx0aGlzLndyaXRlKz1hLmJ5dGVMZW5ndGgsdGhpc31pZihlIGluc3RhbmNlb2YgaS5EYXRhQnVmZmVyfHwib2JqZWN0Ij09dHlwZW9mIGUmJiJudW1iZXIiPT10eXBlb2YgZS5yZWFkJiYibnVtYmVyIj09dHlwZW9mIGUud3JpdGUmJmkuaXNBcnJheUJ1ZmZlclZpZXcoZS5kYXRhKSl7YT1uZXcgVWludDhBcnJheShlLmRhdGEuYnl0ZUxlbmd0aCxlLnJlYWQsZS5sZW5ndGgoKSk7cmV0dXJuIHRoaXMuYWNjb21tb2RhdGUoYS5ieXRlTGVuZ3RoKSxuZXcgVWludDhBcnJheShlLmRhdGEuYnl0ZUxlbmd0aCx0aGlzLndyaXRlKS5zZXQoYSksdGhpcy53cml0ZSs9YS5ieXRlTGVuZ3RoLHRoaXN9aWYoZSBpbnN0YW5jZW9mIGkuQnl0ZVN0cmluZ0J1ZmZlciYmKGU9ZS5kYXRhLHQ9ImJpbmFyeSIpLHQ9dHx8ImJpbmFyeSIsInN0cmluZyI9PXR5cGVvZiBlKXt2YXIgbjtpZigiaGV4Ij09PXQpcmV0dXJuIHRoaXMuYWNjb21tb2RhdGUoTWF0aC5jZWlsKGUubGVuZ3RoLzIpKSxuPW5ldyBVaW50OEFycmF5KHRoaXMuZGF0YS5idWZmZXIsdGhpcy53cml0ZSksdGhpcy53cml0ZSs9aS5iaW5hcnkuaGV4LmRlY29kZShlLG4sdGhpcy53cml0ZSksdGhpcztpZigiYmFzZTY0Ij09PXQpcmV0dXJuIHRoaXMuYWNjb21tb2RhdGUoMypNYXRoLmNlaWwoZS5sZW5ndGgvNCkpLG49bmV3IFVpbnQ4QXJyYXkodGhpcy5kYXRhLmJ1ZmZlcix0aGlzLndyaXRlKSx0aGlzLndyaXRlKz1pLmJpbmFyeS5iYXNlNjQuZGVjb2RlKGUsbix0aGlzLndyaXRlKSx0aGlzO2lmKCJ1dGY4Ij09PXQmJihlPWkuZW5jb2RlVXRmOChlKSx0PSJiaW5hcnkiKSwiYmluYXJ5Ij09PXR8fCJyYXciPT09dClyZXR1cm4gdGhpcy5hY2NvbW1vZGF0ZShlLmxlbmd0aCksbj1uZXcgVWludDhBcnJheSh0aGlzLmRhdGEuYnVmZmVyLHRoaXMud3JpdGUpLHRoaXMud3JpdGUrPWkuYmluYXJ5LnJhdy5kZWNvZGUobiksdGhpcztpZigidXRmMTYiPT09dClyZXR1cm4gdGhpcy5hY2NvbW1vZGF0ZSgyKmUubGVuZ3RoKSxuPW5ldyBVaW50MTZBcnJheSh0aGlzLmRhdGEuYnVmZmVyLHRoaXMud3JpdGUpLHRoaXMud3JpdGUrPWkudGV4dC51dGYxNi5lbmNvZGUobiksdGhpczt0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgZW5jb2Rpbmc6ICIrdCl9dGhyb3cgRXJyb3IoIkludmFsaWQgcGFyYW1ldGVyOiAiK2UpfSxpLkRhdGFCdWZmZXIucHJvdG90eXBlLnB1dEJ1ZmZlcj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5wdXRCeXRlcyhlKSxlLmNsZWFyKCksdGhpc30saS5EYXRhQnVmZmVyLnByb3RvdHlwZS5wdXRTdHJpbmc9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucHV0Qnl0ZXMoZSwidXRmMTYiKX0saS5EYXRhQnVmZmVyLnByb3RvdHlwZS5wdXRJbnQxNj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hY2NvbW1vZGF0ZSgyKSx0aGlzLmRhdGEuc2V0SW50MTYodGhpcy53cml0ZSxlKSx0aGlzLndyaXRlKz0yLHRoaXN9LGkuRGF0YUJ1ZmZlci5wcm90b3R5cGUucHV0SW50MjQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYWNjb21tb2RhdGUoMyksdGhpcy5kYXRhLnNldEludDE2KHRoaXMud3JpdGUsZT4+OCY2NTUzNSksdGhpcy5kYXRhLnNldEludDgodGhpcy53cml0ZSxlPj4xNiYyNTUpLHRoaXMud3JpdGUrPTMsdGhpc30saS5EYXRhQnVmZmVyLnByb3RvdHlwZS5wdXRJbnQzMj1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hY2NvbW1vZGF0ZSg0KSx0aGlzLmRhdGEuc2V0SW50MzIodGhpcy53cml0ZSxlKSx0aGlzLndyaXRlKz00LHRoaXN9LGkuRGF0YUJ1ZmZlci5wcm90b3R5cGUucHV0SW50MTZMZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hY2NvbW1vZGF0ZSgyKSx0aGlzLmRhdGEuc2V0SW50MTYodGhpcy53cml0ZSxlLCEwKSx0aGlzLndyaXRlKz0yLHRoaXN9LGkuRGF0YUJ1ZmZlci5wcm90b3R5cGUucHV0SW50MjRMZT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hY2NvbW1vZGF0ZSgzKSx0aGlzLmRhdGEuc2V0SW50OCh0aGlzLndyaXRlLGU+PjE2JjI1NSksdGhpcy5kYXRhLnNldEludDE2KHRoaXMud3JpdGUsZT4+OCY2NTUzNSwhMCksdGhpcy53cml0ZSs9Myx0aGlzfSxpLkRhdGFCdWZmZXIucHJvdG90eXBlLnB1dEludDMyTGU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYWNjb21tb2RhdGUoNCksdGhpcy5kYXRhLnNldEludDMyKHRoaXMud3JpdGUsZSwhMCksdGhpcy53cml0ZSs9NCx0aGlzfSxpLkRhdGFCdWZmZXIucHJvdG90eXBlLnB1dEludD1mdW5jdGlvbihlLHQpe3ModCksdGhpcy5hY2NvbW1vZGF0ZSh0LzgpO2Rve3QtPTgsdGhpcy5kYXRhLnNldEludDgodGhpcy53cml0ZSsrLGU+PnQmMjU1KX13aGlsZSh0PjApO3JldHVybiB0aGlzfSxpLkRhdGFCdWZmZXIucHJvdG90eXBlLnB1dFNpZ25lZEludD1mdW5jdGlvbihlLHQpe3JldHVybiBzKHQpLHRoaXMuYWNjb21tb2RhdGUodC84KSxlPDAmJihlKz0yPDx0LTEpLHRoaXMucHV0SW50KGUsdCl9LGkuRGF0YUJ1ZmZlci5wcm90b3R5cGUuZ2V0Qnl0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGEuZ2V0SW50OCh0aGlzLnJlYWQrKyl9LGkuRGF0YUJ1ZmZlci5wcm90b3R5cGUuZ2V0SW50MTY9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRhdGEuZ2V0SW50MTYodGhpcy5yZWFkKTtyZXR1cm4gdGhpcy5yZWFkKz0yLGV9LGkuRGF0YUJ1ZmZlci5wcm90b3R5cGUuZ2V0SW50MjQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRhdGEuZ2V0SW50MTYodGhpcy5yZWFkKTw8OF50aGlzLmRhdGEuZ2V0SW50OCh0aGlzLnJlYWQrMik7cmV0dXJuIHRoaXMucmVhZCs9MyxlfSxpLkRhdGFCdWZmZXIucHJvdG90eXBlLmdldEludDMyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5kYXRhLmdldEludDMyKHRoaXMucmVhZCk7cmV0dXJuIHRoaXMucmVhZCs9NCxlfSxpLkRhdGFCdWZmZXIucHJvdG90eXBlLmdldEludDE2TGU9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmRhdGEuZ2V0SW50MTYodGhpcy5yZWFkLCEwKTtyZXR1cm4gdGhpcy5yZWFkKz0yLGV9LGkuRGF0YUJ1ZmZlci5wcm90b3R5cGUuZ2V0SW50MjRMZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZGF0YS5nZXRJbnQ4KHRoaXMucmVhZCledGhpcy5kYXRhLmdldEludDE2KHRoaXMucmVhZCsxLCEwKTw8ODtyZXR1cm4gdGhpcy5yZWFkKz0zLGV9LGkuRGF0YUJ1ZmZlci5wcm90b3R5cGUuZ2V0SW50MzJMZT1mdW5jdGlvbigpe3ZhciBlPXRoaXMuZGF0YS5nZXRJbnQzMih0aGlzLnJlYWQsITApO3JldHVybiB0aGlzLnJlYWQrPTQsZX0saS5EYXRhQnVmZmVyLnByb3RvdHlwZS5nZXRJbnQ9ZnVuY3Rpb24oZSl7cyhlKTt2YXIgdD0wO2Rve3Q9KHQ8PDgpK3RoaXMuZGF0YS5nZXRJbnQ4KHRoaXMucmVhZCsrKSxlLT04fXdoaWxlKGU+MCk7cmV0dXJuIHR9LGkuRGF0YUJ1ZmZlci5wcm90b3R5cGUuZ2V0U2lnbmVkSW50PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuZ2V0SW50KGUpLHI9Mjw8ZS0yO3JldHVybiB0Pj1yJiYodC09cjw8MSksdH0saS5EYXRhQnVmZmVyLnByb3RvdHlwZS5nZXRCeXRlcz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm4gZT8oZT1NYXRoLm1pbih0aGlzLmxlbmd0aCgpLGUpLHQ9dGhpcy5kYXRhLnNsaWNlKHRoaXMucmVhZCx0aGlzLnJlYWQrZSksdGhpcy5yZWFkKz1lKTowPT09ZT90PSIiOih0PTA9PT10aGlzLnJlYWQ/dGhpcy5kYXRhOnRoaXMuZGF0YS5zbGljZSh0aGlzLnJlYWQpLHRoaXMuY2xlYXIoKSksdH0saS5EYXRhQnVmZmVyLnByb3RvdHlwZS5ieXRlcz1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT90aGlzLmRhdGEuc2xpY2UodGhpcy5yZWFkKTp0aGlzLmRhdGEuc2xpY2UodGhpcy5yZWFkLHRoaXMucmVhZCtlKX0saS5EYXRhQnVmZmVyLnByb3RvdHlwZS5hdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5kYXRhLmdldFVpbnQ4KHRoaXMucmVhZCtlKX0saS5EYXRhQnVmZmVyLnByb3RvdHlwZS5zZXRBdD1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmRhdGEuc2V0VWludDgoZSx0KSx0aGlzfSxpLkRhdGFCdWZmZXIucHJvdG90eXBlLmxhc3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kYXRhLmdldFVpbnQ4KHRoaXMud3JpdGUtMSl9LGkuRGF0YUJ1ZmZlci5wcm90b3R5cGUuY29weT1mdW5jdGlvbigpe3JldHVybiBuZXcgaS5EYXRhQnVmZmVyKHRoaXMpfSxpLkRhdGFCdWZmZXIucHJvdG90eXBlLmNvbXBhY3Q9ZnVuY3Rpb24oKXtpZih0aGlzLnJlYWQ+MCl7dmFyIGU9bmV3IFVpbnQ4QXJyYXkodGhpcy5kYXRhLmJ1ZmZlcix0aGlzLnJlYWQpLHQ9bmV3IFVpbnQ4QXJyYXkoZS5ieXRlTGVuZ3RoKTt0LnNldChlKSx0aGlzLmRhdGE9bmV3IERhdGFWaWV3KHQpLHRoaXMud3JpdGUtPXRoaXMucmVhZCx0aGlzLnJlYWQ9MH1yZXR1cm4gdGhpc30saS5EYXRhQnVmZmVyLnByb3RvdHlwZS5jbGVhcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRhdGE9bmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcigwKSksdGhpcy5yZWFkPXRoaXMud3JpdGU9MCx0aGlzfSxpLkRhdGFCdWZmZXIucHJvdG90eXBlLnRydW5jYXRlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLndyaXRlPU1hdGgubWF4KDAsdGhpcy5sZW5ndGgoKS1lKSx0aGlzLnJlYWQ9TWF0aC5taW4odGhpcy5yZWFkLHRoaXMud3JpdGUpLHRoaXN9LGkuRGF0YUJ1ZmZlci5wcm90b3R5cGUudG9IZXg9ZnVuY3Rpb24oKXtmb3IodmFyIGU9IiIsdD10aGlzLnJlYWQ7dDx0aGlzLmRhdGEuYnl0ZUxlbmd0aDsrK3Qpe3ZhciByPXRoaXMuZGF0YS5nZXRVaW50OCh0KTtyPDE2JiYoZSs9IjAiKSxlKz1yLnRvU3RyaW5nKDE2KX1yZXR1cm4gZX0saS5EYXRhQnVmZmVyLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbihlKXt2YXIgdD1uZXcgVWludDhBcnJheSh0aGlzLmRhdGEsdGhpcy5yZWFkLHRoaXMubGVuZ3RoKCkpO2lmKCJiaW5hcnkiPT09KGU9ZXx8InV0ZjgiKXx8InJhdyI9PT1lKXJldHVybiBpLmJpbmFyeS5yYXcuZW5jb2RlKHQpO2lmKCJoZXgiPT09ZSlyZXR1cm4gaS5iaW5hcnkuaGV4LmVuY29kZSh0KTtpZigiYmFzZTY0Ij09PWUpcmV0dXJuIGkuYmluYXJ5LmJhc2U2NC5lbmNvZGUodCk7aWYoInV0ZjgiPT09ZSlyZXR1cm4gaS50ZXh0LnV0ZjguZGVjb2RlKHQpO2lmKCJ1dGYxNiI9PT1lKXJldHVybiBpLnRleHQudXRmMTYuZGVjb2RlKHQpO3Rocm93IG5ldyBFcnJvcigiSW52YWxpZCBlbmNvZGluZzogIitlKX0saS5jcmVhdGVCdWZmZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdD10fHwicmF3Iix2b2lkIDAhPT1lJiYidXRmOCI9PT10JiYoZT1pLmVuY29kZVV0ZjgoZSkpLG5ldyBpLkJ5dGVCdWZmZXIoZSl9LGkuZmlsbFN0cmluZz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0iIjt0PjA7KTEmdCYmKHIrPWUpLCh0Pj4+PTEpPjAmJihlKz1lKTtyZXR1cm4gcn0saS54b3JCeXRlcz1mdW5jdGlvbihlLHQscil7Zm9yKHZhciBhPSIiLG49IiIsaT0iIixzPTAsbz0wO3I+MDstLXIsKytzKW49ZS5jaGFyQ29kZUF0KHMpXnQuY2hhckNvZGVBdChzKSxvPj0xMCYmKGErPWksaT0iIixvPTApLGkrPVN0cmluZy5mcm9tQ2hhckNvZGUobiksKytvO3JldHVybiBhKz1pfSxpLmhleFRvQnl0ZXM9ZnVuY3Rpb24oZSl7dmFyIHQ9IiIscj0wO2ZvcighMCZlLmxlbmd0aCYmKHI9MSx0Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKHBhcnNlSW50KGVbMF0sMTYpKSk7cjxlLmxlbmd0aDtyKz0yKXQrPVN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoZS5zdWJzdHIociwyKSwxNikpO3JldHVybiB0fSxpLmJ5dGVzVG9IZXg9ZnVuY3Rpb24oZSl7cmV0dXJuIGkuY3JlYXRlQnVmZmVyKGUpLnRvSGV4KCl9LGkuaW50MzJUb0J5dGVzPWZ1bmN0aW9uKGUpe3JldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGU+PjI0JjI1NSkrU3RyaW5nLmZyb21DaGFyQ29kZShlPj4xNiYyNTUpK1N0cmluZy5mcm9tQ2hhckNvZGUoZT4+OCYyNTUpK1N0cmluZy5mcm9tQ2hhckNvZGUoMjU1JmUpfTt2YXIgYz0iQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz0iLHU9WzYyLC0xLC0xLC0xLDYzLDUyLDUzLDU0LDU1LDU2LDU3LDU4LDU5LDYwLDYxLC0xLC0xLC0xLDY0LC0xLC0xLC0xLDAsMSwyLDMsNCw1LDYsNyw4LDksMTAsMTEsMTIsMTMsMTQsMTUsMTYsMTcsMTgsMTksMjAsMjEsMjIsMjMsMjQsMjUsLTEsLTEsLTEsLTEsLTEsLTEsMjYsMjcsMjgsMjksMzAsMzEsMzIsMzMsMzQsMzUsMzYsMzcsMzgsMzksNDAsNDEsNDIsNDMsNDQsNDUsNDYsNDcsNDgsNDksNTAsNTFdLGw9IjEyMzQ1Njc4OUFCQ0RFRkdISktMTU5QUVJTVFVWV1hZWmFiY2RlZmdoaWprbW5vcHFyc3R1dnd4eXoiO2kuZW5jb2RlNjQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsYSxuLGk9IiIscz0iIixvPTA7bzxlLmxlbmd0aDspcj1lLmNoYXJDb2RlQXQobysrKSxhPWUuY2hhckNvZGVBdChvKyspLG49ZS5jaGFyQ29kZUF0KG8rKyksaSs9Yy5jaGFyQXQocj4+MiksaSs9Yy5jaGFyQXQoKDMmcik8PDR8YT4+NCksaXNOYU4oYSk/aSs9Ij09IjooaSs9Yy5jaGFyQXQoKDE1JmEpPDwyfG4+PjYpLGkrPWlzTmFOKG4pPyI9IjpjLmNoYXJBdCg2MyZuKSksdCYmaS5sZW5ndGg+dCYmKHMrPWkuc3Vic3RyKDAsdCkrIlxyXG4iLGk9aS5zdWJzdHIodCkpO3JldHVybiBzKz1pfSxpLmRlY29kZTY0PWZ1bmN0aW9uKGUpe2U9ZS5yZXBsYWNlKC9bXkEtWmEtejAtOVwrXC9cPV0vZywiIik7Zm9yKHZhciB0LHIsYSxuLGk9IiIscz0wO3M8ZS5sZW5ndGg7KXQ9dVtlLmNoYXJDb2RlQXQocysrKS00M10scj11W2UuY2hhckNvZGVBdChzKyspLTQzXSxhPXVbZS5jaGFyQ29kZUF0KHMrKyktNDNdLG49dVtlLmNoYXJDb2RlQXQocysrKS00M10saSs9U3RyaW5nLmZyb21DaGFyQ29kZSh0PDwyfHI+PjQpLDY0IT09YSYmKGkrPVN0cmluZy5mcm9tQ2hhckNvZGUoKDE1JnIpPDw0fGE+PjIpLDY0IT09biYmKGkrPVN0cmluZy5mcm9tQ2hhckNvZGUoKDMmYSk8PDZ8bikpKTtyZXR1cm4gaX0saS5lbmNvZGVVdGY4PWZ1bmN0aW9uKGUpe3JldHVybiB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoZSkpfSxpLmRlY29kZVV0Zjg9ZnVuY3Rpb24oZSl7cmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChlc2NhcGUoZSkpfSxpLmJpbmFyeT17cmF3Ont9LGhleDp7fSxiYXNlNjQ6e30sYmFzZTU4Ont9LGJhc2VOOntlbmNvZGU6bi5lbmNvZGUsZGVjb2RlOm4uZGVjb2RlfX0saS5iaW5hcnkucmF3LmVuY29kZT1mdW5jdGlvbihlKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGUpfSxpLmJpbmFyeS5yYXcuZGVjb2RlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgYT10O2F8fChhPW5ldyBVaW50OEFycmF5KGUubGVuZ3RoKSk7Zm9yKHZhciBuPXI9cnx8MCxpPTA7aTxlLmxlbmd0aDsrK2kpYVtuKytdPWUuY2hhckNvZGVBdChpKTtyZXR1cm4gdD9uLXI6YX0saS5iaW5hcnkuaGV4LmVuY29kZT1pLmJ5dGVzVG9IZXgsaS5iaW5hcnkuaGV4LmRlY29kZT1mdW5jdGlvbihlLHQscil7dmFyIGE9dDthfHwoYT1uZXcgVWludDhBcnJheShNYXRoLmNlaWwoZS5sZW5ndGgvMikpKTt2YXIgbj0wLGk9cj1yfHwwO2ZvcigxJmUubGVuZ3RoJiYobj0xLGFbaSsrXT1wYXJzZUludChlWzBdLDE2KSk7bjxlLmxlbmd0aDtuKz0yKWFbaSsrXT1wYXJzZUludChlLnN1YnN0cihuLDIpLDE2KTtyZXR1cm4gdD9pLXI6YX0saS5iaW5hcnkuYmFzZTY0LmVuY29kZT1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcixhLG4saT0iIixzPSIiLG89MDtvPGUuYnl0ZUxlbmd0aDspcj1lW28rK10sYT1lW28rK10sbj1lW28rK10saSs9Yy5jaGFyQXQocj4+MiksaSs9Yy5jaGFyQXQoKDMmcik8PDR8YT4+NCksaXNOYU4oYSk/aSs9Ij09IjooaSs9Yy5jaGFyQXQoKDE1JmEpPDwyfG4+PjYpLGkrPWlzTmFOKG4pPyI9IjpjLmNoYXJBdCg2MyZuKSksdCYmaS5sZW5ndGg+dCYmKHMrPWkuc3Vic3RyKDAsdCkrIlxyXG4iLGk9aS5zdWJzdHIodCkpO3JldHVybiBzKz1pfSxpLmJpbmFyeS5iYXNlNjQuZGVjb2RlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgYSxuLGkscyxvPXQ7b3x8KG89bmV3IFVpbnQ4QXJyYXkoMypNYXRoLmNlaWwoZS5sZW5ndGgvNCkpKSxlPWUucmVwbGFjZSgvW15BLVphLXowLTlcK1wvXD1dL2csIiIpO2Zvcih2YXIgYz0wLGw9cj1yfHwwO2M8ZS5sZW5ndGg7KWE9dVtlLmNoYXJDb2RlQXQoYysrKS00M10sbj11W2UuY2hhckNvZGVBdChjKyspLTQzXSxpPXVbZS5jaGFyQ29kZUF0KGMrKyktNDNdLHM9dVtlLmNoYXJDb2RlQXQoYysrKS00M10sb1tsKytdPWE8PDJ8bj4+NCw2NCE9PWkmJihvW2wrK109KDE1Jm4pPDw0fGk+PjIsNjQhPT1zJiYob1tsKytdPSgzJmkpPDw2fHMpKTtyZXR1cm4gdD9sLXI6by5zdWJhcnJheSgwLGwpfSxpLmJpbmFyeS5iYXNlNTguZW5jb2RlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkuYmluYXJ5LmJhc2VOLmVuY29kZShlLGwsdCl9LGkuYmluYXJ5LmJhc2U1OC5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaS5iaW5hcnkuYmFzZU4uZGVjb2RlKGUsbCx0KX0saS50ZXh0PXt1dGY4Ont9LHV0ZjE2Ont9fSxpLnRleHQudXRmOC5lbmNvZGU9ZnVuY3Rpb24oZSx0LHIpe2U9aS5lbmNvZGVVdGY4KGUpO3ZhciBhPXQ7YXx8KGE9bmV3IFVpbnQ4QXJyYXkoZS5sZW5ndGgpKTtmb3IodmFyIG49cj1yfHwwLHM9MDtzPGUubGVuZ3RoOysrcylhW24rK109ZS5jaGFyQ29kZUF0KHMpO3JldHVybiB0P24tcjphfSxpLnRleHQudXRmOC5kZWNvZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGkuZGVjb2RlVXRmOChTdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwsZSkpfSxpLnRleHQudXRmMTYuZW5jb2RlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgYT10O2F8fChhPW5ldyBVaW50OEFycmF5KDIqZS5sZW5ndGgpKTtmb3IodmFyIG49bmV3IFVpbnQxNkFycmF5KGEuYnVmZmVyKSxpPXI9cnx8MCxzPXIsbz0wO288ZS5sZW5ndGg7KytvKW5bcysrXT1lLmNoYXJDb2RlQXQobyksaSs9MjtyZXR1cm4gdD9pLXI6YX0saS50ZXh0LnV0ZjE2LmRlY29kZT1mdW5jdGlvbihlKXtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLG5ldyBVaW50MTZBcnJheShlLmJ1ZmZlcikpfSxpLmRlZmxhdGU9ZnVuY3Rpb24oZSx0LHIpe2lmKHQ9aS5kZWNvZGU2NChlLmRlZmxhdGUoaS5lbmNvZGU2NCh0KSkucnZhbCkscil7dmFyIGE9MjszMiZ0LmNoYXJDb2RlQXQoMSkmJihhPTYpLHQ9dC5zdWJzdHJpbmcoYSx0Lmxlbmd0aC00KX1yZXR1cm4gdH0saS5pbmZsYXRlPWZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1lLmluZmxhdGUoaS5lbmNvZGU2NCh0KSkucnZhbDtyZXR1cm4gbnVsbD09PWE/bnVsbDppLmRlY29kZTY0KGEpfTt2YXIgcD1mdW5jdGlvbihlLHQscil7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJXZWJTdG9yYWdlIG5vdCBhdmFpbGFibGUuIik7dmFyIGE7aWYobnVsbD09PXI/YT1lLnJlbW92ZUl0ZW0odCk6KHI9aS5lbmNvZGU2NChKU09OLnN0cmluZ2lmeShyKSksYT1lLnNldEl0ZW0odCxyKSksdm9pZCAwIT09YSYmITAhPT1hLnJ2YWwpe3ZhciBuPW5ldyBFcnJvcihhLmVycm9yLm1lc3NhZ2UpO3Rocm93IG4uaWQ9YS5lcnJvci5pZCxuLm5hbWU9YS5lcnJvci5uYW1lLG59fSxmPWZ1bmN0aW9uKGUsdCl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKCJXZWJTdG9yYWdlIG5vdCBhdmFpbGFibGUuIik7dmFyIHI9ZS5nZXRJdGVtKHQpO2lmKGUuaW5pdClpZihudWxsPT09ci5ydmFsKXtpZihyLmVycm9yKXt2YXIgYT1uZXcgRXJyb3Ioci5lcnJvci5tZXNzYWdlKTt0aHJvdyBhLmlkPXIuZXJyb3IuaWQsYS5uYW1lPXIuZXJyb3IubmFtZSxhfXI9bnVsbH1lbHNlIHI9ci5ydmFsO3JldHVybiBudWxsIT09ciYmKHI9SlNPTi5wYXJzZShpLmRlY29kZTY0KHIpKSkscn0saD1mdW5jdGlvbihlLHQscixhKXt2YXIgbj1mKGUsdCk7bnVsbD09PW4mJihuPXt9KSxuW3JdPWEscChlLHQsbil9LGQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPWYoZSx0KTtyZXR1cm4gbnVsbCE9PWEmJihhPXIgaW4gYT9hW3JdOm51bGwpLGF9LHk9ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPWYoZSx0KTtpZihudWxsIT09YSYmciBpbiBhKXtkZWxldGUgYVtyXTt2YXIgbj0hMDtmb3IodmFyIGkgaW4gYSl7bj0hMTticmVha31uJiYoYT1udWxsKSxwKGUsdCxhKX19LGc9ZnVuY3Rpb24oZSx0KXtwKGUsdCxudWxsKX0sbT1mdW5jdGlvbihlLHQscil7dmFyIGEsbj1udWxsO3ZvaWQgMD09PXImJihyPVsid2ViIiwiZmxhc2giXSk7dmFyIGk9ITEscz1udWxsO2Zvcih2YXIgbyBpbiByKXthPXJbb107dHJ5e2lmKCJmbGFzaCI9PT1hfHwiYm90aCI9PT1hKXtpZihudWxsPT09dFswXSl0aHJvdyBuZXcgRXJyb3IoIkZsYXNoIGxvY2FsIHN0b3JhZ2Ugbm90IGF2YWlsYWJsZS4iKTtuPWUuYXBwbHkodGhpcyx0KSxpPSJmbGFzaCI9PT1hfSJ3ZWIiIT09YSYmImJvdGgiIT09YXx8KHRbMF09bG9jYWxTdG9yYWdlLG49ZS5hcHBseSh0aGlzLHQpLGk9ITApfWNhdGNoKGUpe3M9ZX1pZihpKWJyZWFrfWlmKCFpKXRocm93IHM7cmV0dXJuIG59O2kuc2V0SXRlbT1mdW5jdGlvbihlLHQscixhLG4pe20oaCxhcmd1bWVudHMsbil9LGkuZ2V0SXRlbT1mdW5jdGlvbihlLHQscixhKXtyZXR1cm4gbShkLGFyZ3VtZW50cyxhKX0saS5yZW1vdmVJdGVtPWZ1bmN0aW9uKGUsdCxyLGEpe20oeSxhcmd1bWVudHMsYSl9LGkuY2xlYXJJdGVtcz1mdW5jdGlvbihlLHQscil7bShnLGFyZ3VtZW50cyxyKX0saS5wYXJzZVVybD1mdW5jdGlvbihlKXt2YXIgdD0vXihodHRwcz8pOlwvXC8oW146Jl5cL10qKTo/KFxkKikoLiopJC9nO3QubGFzdEluZGV4PTA7dmFyIHI9dC5leGVjKGUpLGE9bnVsbD09PXI/bnVsbDp7ZnVsbDplLHNjaGVtZTpyWzFdLGhvc3Q6clsyXSxwb3J0OnJbM10scGF0aDpyWzRdfTtyZXR1cm4gYSYmKGEuZnVsbEhvc3Q9YS5ob3N0LGEucG9ydD8oODAhPT1hLnBvcnQmJiJodHRwIj09PWEuc2NoZW1lfHw0NDMhPT1hLnBvcnQmJiJodHRwcyI9PT1hLnNjaGVtZSkmJihhLmZ1bGxIb3N0Kz0iOiIrYS5wb3J0KToiaHR0cCI9PT1hLnNjaGVtZT9hLnBvcnQ9ODA6Imh0dHBzIj09PWEuc2NoZW1lJiYoYS5wb3J0PTQ0MyksYS5mdWxsPWEuc2NoZW1lKyI6Ly8iK2EuZnVsbEhvc3QpLGF9O3ZhciB2PW51bGw7aS5nZXRRdWVyeVZhcmlhYmxlcz1mdW5jdGlvbihlKXt2YXIgdCxyPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD17fSxyPWUuc3BsaXQoIiYiKSxhPTA7YTxyLmxlbmd0aDthKyspe3ZhciBuLGkscz1yW2FdLmluZGV4T2YoIj0iKTtzPjA/KG49clthXS5zdWJzdHJpbmcoMCxzKSxpPXJbYV0uc3Vic3RyaW5nKHMrMSkpOihuPXJbYV0saT1udWxsKSxuIGluIHR8fCh0W25dPVtdKSxuIGluIE9iamVjdC5wcm90b3R5cGV8fG51bGw9PT1pfHx0W25dLnB1c2godW5lc2NhcGUoaSkpfXJldHVybiB0fTtyZXR1cm4gdm9pZCAwPT09ZT8obnVsbD09PXYmJih2PSJ1bmRlZmluZWQiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cubG9jYXRpb24mJndpbmRvdy5sb2NhdGlvbi5zZWFyY2g/cih3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKSk6e30pLHQ9dik6dD1yKGUpLHR9LGkucGFyc2VGcmFnbWVudD1mdW5jdGlvbihlKXt2YXIgdD1lLHI9IiIsYT1lLmluZGV4T2YoIj8iKTthPjAmJih0PWUuc3Vic3RyaW5nKDAsYSkscj1lLnN1YnN0cmluZyhhKzEpKTt2YXIgbj10LnNwbGl0KCIvIik7cmV0dXJuIG4ubGVuZ3RoPjAmJiIiPT09blswXSYmbi5zaGlmdCgpLHtwYXRoU3RyaW5nOnQscXVlcnlTdHJpbmc6cixwYXRoOm4scXVlcnk6IiI9PT1yP3t9OmkuZ2V0UXVlcnlWYXJpYWJsZXMocil9fSxpLm1ha2VSZXF1ZXN0PWZ1bmN0aW9uKGUpe3ZhciB0PWkucGFyc2VGcmFnbWVudChlKSxyPXtwYXRoOnQucGF0aFN0cmluZyxxdWVyeTp0LnF1ZXJ5U3RyaW5nLGdldFBhdGg6ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/dC5wYXRoOnQucGF0aFtlXX0sZ2V0UXVlcnk6ZnVuY3Rpb24oZSxyKXt2YXIgYTtyZXR1cm4gdm9pZCAwPT09ZT9hPXQucXVlcnk6KGE9dC5xdWVyeVtlXSkmJnZvaWQgMCE9PXImJihhPWFbcl0pLGF9LGdldFF1ZXJ5TGFzdDpmdW5jdGlvbihlLHQpe3ZhciBhPXIuZ2V0UXVlcnkoZSk7cmV0dXJuIGE/YVthLmxlbmd0aC0xXTp0fX07cmV0dXJuIHJ9LGkubWFrZUxpbms9ZnVuY3Rpb24oZSx0LHIpe2U9alF1ZXJ5LmlzQXJyYXkoZSk/ZS5qb2luKCIvIik6ZTt2YXIgYT1qUXVlcnkucGFyYW0odHx8e30pO3JldHVybiByPXJ8fCIiLGUrKGEubGVuZ3RoPjA/Ij8iK2E6IiIpKyhyLmxlbmd0aD4wPyIjIityOiIiKX0saS5pc0VtcHR5PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCBpbiBlKWlmKGUuaGFzT3duUHJvcGVydHkodCkpcmV0dXJuITE7cmV0dXJuITB9LGkuZm9ybWF0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxyLGE9LyUuL2csbj0wLGk9W10scz0wO3Q9YS5leGVjKGUpOyl7KHI9ZS5zdWJzdHJpbmcocyxhLmxhc3RJbmRleC0yKSkubGVuZ3RoPjAmJmkucHVzaChyKSxzPWEubGFzdEluZGV4O3ZhciBvPXRbMF1bMV07c3dpdGNoKG8pe2Nhc2UicyI6Y2FzZSJvIjpuPGFyZ3VtZW50cy5sZW5ndGg/aS5wdXNoKGFyZ3VtZW50c1sxK24rK10pOmkucHVzaCgiPD8+Iik7YnJlYWs7Y2FzZSIlIjppLnB1c2goIiUiKTticmVhaztkZWZhdWx0OmkucHVzaCgiPCUiK28rIj8+Iil9fXJldHVybiBpLnB1c2goZS5zdWJzdHJpbmcocykpLGkuam9pbigiIil9LGkuZm9ybWF0TnVtYmVyPWZ1bmN0aW9uKGUsdCxyLGEpe3ZhciBuPWUsaT1pc05hTih0PU1hdGguYWJzKHQpKT8yOnQscz12b2lkIDA9PT1yPyIsIjpyLG89dm9pZCAwPT09YT8iLiI6YSxjPW48MD8iLSI6IiIsdT1wYXJzZUludChuPU1hdGguYWJzKCtufHwwKS50b0ZpeGVkKGkpLDEwKSsiIixsPXUubGVuZ3RoPjM/dS5sZW5ndGglMzowO3JldHVybiBjKyhsP3Uuc3Vic3RyKDAsbCkrbzoiIikrdS5zdWJzdHIobCkucmVwbGFjZSgvKFxkezN9KSg/PVxkKS9nLCIkMSIrbykrKGk/cytNYXRoLmFicyhuLXUpLnRvRml4ZWQoaSkuc2xpY2UoMik6IiIpfSxpLmZvcm1hdFNpemU9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZT49MTA3Mzc0MTgyND9pLmZvcm1hdE51bWJlcihlLzEwNzM3NDE4MjQsMiwiLiIsIiIpKyIgR2lCIjplPj0xMDQ4NTc2P2kuZm9ybWF0TnVtYmVyKGUvMTA0ODU3NiwyLCIuIiwiIikrIiBNaUIiOmU+PTEwMjQ/aS5mb3JtYXROdW1iZXIoZS8xMDI0LDApKyIgS2lCIjppLmZvcm1hdE51bWJlcihlLDApKyIgYnl0ZXMifSxpLmJ5dGVzRnJvbUlQPWZ1bmN0aW9uKGUpe3JldHVybi0xIT09ZS5pbmRleE9mKCIuIik/aS5ieXRlc0Zyb21JUHY0KGUpOi0xIT09ZS5pbmRleE9mKCI6Iik/aS5ieXRlc0Zyb21JUHY2KGUpOm51bGx9LGkuYnl0ZXNGcm9tSVB2ND1mdW5jdGlvbihlKXtpZig0IT09KGU9ZS5zcGxpdCgiLiIpKS5sZW5ndGgpcmV0dXJuIG51bGw7Zm9yKHZhciB0PWkuY3JlYXRlQnVmZmVyKCkscj0wO3I8ZS5sZW5ndGg7KytyKXt2YXIgYT1wYXJzZUludChlW3JdLDEwKTtpZihpc05hTihhKSlyZXR1cm4gbnVsbDt0LnB1dEJ5dGUoYSl9cmV0dXJuIHQuZ2V0Qnl0ZXMoKX0saS5ieXRlc0Zyb21JUHY2PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLHI9MiooOC0oZT1lLnNwbGl0KCI6IikuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4gMD09PWUubGVuZ3RoJiYrK3QsITB9KSkpLmxlbmd0aCt0KSxhPWkuY3JlYXRlQnVmZmVyKCksbj0wO248ODsrK24paWYoZVtuXSYmMCE9PWVbbl0ubGVuZ3RoKXt2YXIgcz1pLmhleFRvQnl0ZXMoZVtuXSk7cy5sZW5ndGg8MiYmYS5wdXRCeXRlKDApLGEucHV0Qnl0ZXMocyl9ZWxzZSBhLmZpbGxXaXRoQnl0ZSgwLHIpLHI9MDtyZXR1cm4gYS5nZXRCeXRlcygpfSxpLmJ5dGVzVG9JUD1mdW5jdGlvbihlKXtyZXR1cm4gND09PWUubGVuZ3RoP2kuYnl0ZXNUb0lQdjQoZSk6MTY9PT1lLmxlbmd0aD9pLmJ5dGVzVG9JUHY2KGUpOm51bGx9LGkuYnl0ZXNUb0lQdjQ9ZnVuY3Rpb24oZSl7aWYoNCE9PWUubGVuZ3RoKXJldHVybiBudWxsO2Zvcih2YXIgdD1bXSxyPTA7cjxlLmxlbmd0aDsrK3IpdC5wdXNoKGUuY2hhckNvZGVBdChyKSk7cmV0dXJuIHQuam9pbigiLiIpfSxpLmJ5dGVzVG9JUHY2PWZ1bmN0aW9uKGUpe2lmKDE2IT09ZS5sZW5ndGgpcmV0dXJuIG51bGw7Zm9yKHZhciB0PVtdLHI9W10sYT0wLG49MDtuPGUubGVuZ3RoO24rPTIpe2Zvcih2YXIgcz1pLmJ5dGVzVG9IZXgoZVtuXStlW24rMV0pOyIwIj09PXNbMF0mJiIwIiE9PXM7KXM9cy5zdWJzdHIoMSk7aWYoIjAiPT09cyl7dmFyIG89cltyLmxlbmd0aC0xXSxjPXQubGVuZ3RoO28mJmM9PT1vLmVuZCsxPyhvLmVuZD1jLG8uZW5kLW8uc3RhcnQ+clthXS5lbmQtclthXS5zdGFydCYmKGE9ci5sZW5ndGgtMSkpOnIucHVzaCh7c3RhcnQ6YyxlbmQ6Y30pfXQucHVzaChzKX1pZihyLmxlbmd0aD4wKXt2YXIgdT1yW2FdO3UuZW5kLXUuc3RhcnQ+MCYmKHQuc3BsaWNlKHUuc3RhcnQsdS5lbmQtdS5zdGFydCsxLCIiKSwwPT09dS5zdGFydCYmdC51bnNoaWZ0KCIiKSw3PT09dS5lbmQmJnQucHVzaCgiIikpfXJldHVybiB0LmpvaW4oIjoiKX0saS5lc3RpbWF0ZUNvcmVzPWZ1bmN0aW9uKGUsdCl7aWYoImZ1bmN0aW9uIj09dHlwZW9mIGUmJih0PWUsZT17fSksZT1lfHx7fSwiY29yZXMiaW4gaSYmIWUudXBkYXRlKXJldHVybiB0KG51bGwsaS5jb3Jlcyk7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBuYXZpZ2F0b3ImJiJoYXJkd2FyZUNvbmN1cnJlbmN5ImluIG5hdmlnYXRvciYmbmF2aWdhdG9yLmhhcmR3YXJlQ29uY3VycmVuY3k+MClyZXR1cm4gaS5jb3Jlcz1uYXZpZ2F0b3IuaGFyZHdhcmVDb25jdXJyZW5jeSx0KG51bGwsaS5jb3Jlcyk7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBXb3JrZXIpcmV0dXJuIGkuY29yZXM9MSx0KG51bGwsaS5jb3Jlcyk7aWYoInVuZGVmaW5lZCI9PXR5cGVvZiBCbG9iKXJldHVybiBpLmNvcmVzPTIsdChudWxsLGkuY29yZXMpO3ZhciByPVVSTC5jcmVhdGVPYmplY3RVUkwobmV3IEJsb2IoWyIoIixmdW5jdGlvbigpe3NlbGYuYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1EYXRlLm5vdygpLHI9dCs0O0RhdGUubm93KCk8cjspO3NlbGYucG9zdE1lc3NhZ2Uoe3N0OnQsZXQ6cn0pfSkpfS50b1N0cmluZygpLCIpKCkiXSx7dHlwZToiYXBwbGljYXRpb24vamF2YXNjcmlwdCJ9KSk7IWZ1bmN0aW9uIGUoYSxuLHMpe2lmKDA9PT1uKXt2YXIgbz1NYXRoLmZsb29yKGEucmVkdWNlKChmdW5jdGlvbihlLHQpe3JldHVybiBlK3R9KSwwKS9hLmxlbmd0aCk7cmV0dXJuIGkuY29yZXM9TWF0aC5tYXgoMSxvKSxVUkwucmV2b2tlT2JqZWN0VVJMKHIpLHQobnVsbCxpLmNvcmVzKX0hZnVuY3Rpb24oZSx0KXtmb3IodmFyIGE9W10sbj1bXSxpPTA7aTxlOysraSl7dmFyIHM9bmV3IFdvcmtlcihyKTtzLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLChmdW5jdGlvbihyKXtpZihuLnB1c2goci5kYXRhKSxuLmxlbmd0aD09PWUpe2Zvcih2YXIgaT0wO2k8ZTsrK2kpYVtpXS50ZXJtaW5hdGUoKTt0KG51bGwsbil9fSkpLGEucHVzaChzKX1mb3IoaT0wO2k8ZTsrK2kpYVtpXS5wb3N0TWVzc2FnZShpKX0ocywoZnVuY3Rpb24odCxyKXthLnB1c2goZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9W10sYT0wO2E8ZTsrK2EpZm9yKHZhciBuPXRbYV0saT1yW2FdPVtdLHM9MDtzPGU7KytzKWlmKGEhPT1zKXt2YXIgbz10W3NdOyhuLnN0Pm8uc3QmJm4uc3Q8by5ldHx8by5zdD5uLnN0JiZvLnN0PG4uZXQpJiZpLnB1c2gocyl9cmV0dXJuIHIucmVkdWNlKChmdW5jdGlvbihlLHQpe3JldHVybiBNYXRoLm1heChlLHQubGVuZ3RoKX0pLDApfShzLHIpKSxlKGEsbi0xLHMpfSkpfShbXSw1LDE2KX19KS5jYWxsKHRoaXMscigzNikpfSxmdW5jdGlvbihlLHQscil7dmFyIGE9cigwKTtyKDUpLHIoMjMpLHIoMjQpLHIoMSksYS5yYW5kb20mJmEucmFuZG9tLmdldEJ5dGVzP2UuZXhwb3J0cz1hLnJhbmRvbTpmdW5jdGlvbih0KXt2YXIgcj17fSxuPW5ldyBBcnJheSg0KSxpPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtmdW5jdGlvbiBzKCl7dmFyIGU9YS5wcm5nLmNyZWF0ZShyKTtyZXR1cm4gZS5nZXRCeXRlcz1mdW5jdGlvbih0LHIpe3JldHVybiBlLmdlbmVyYXRlKHQscil9LGUuZ2V0Qnl0ZXNTeW5jPWZ1bmN0aW9uKHQpe3JldHVybiBlLmdlbmVyYXRlKHQpfSxlfXIuZm9ybWF0S2V5PWZ1bmN0aW9uKGUpe3ZhciB0PWEudXRpbC5jcmVhdGVCdWZmZXIoZSk7cmV0dXJuKGU9bmV3IEFycmF5KDQpKVswXT10LmdldEludDMyKCksZVsxXT10LmdldEludDMyKCksZVsyXT10LmdldEludDMyKCksZVszXT10LmdldEludDMyKCksYS5hZXMuX2V4cGFuZEtleShlLCExKX0sci5mb3JtYXRTZWVkPWZ1bmN0aW9uKGUpe3ZhciB0PWEudXRpbC5jcmVhdGVCdWZmZXIoZSk7cmV0dXJuKGU9bmV3IEFycmF5KDQpKVswXT10LmdldEludDMyKCksZVsxXT10LmdldEludDMyKCksZVsyXT10LmdldEludDMyKCksZVszXT10LmdldEludDMyKCksZX0sci5jaXBoZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYS5hZXMuX3VwZGF0ZUJsb2NrKGUsdCxuLCExKSxpLnB1dEludDMyKG5bMF0pLGkucHV0SW50MzIoblsxXSksaS5wdXRJbnQzMihuWzJdKSxpLnB1dEludDMyKG5bM10pLGkuZ2V0Qnl0ZXMoKX0sci5pbmNyZW1lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuKytlWzNdLGV9LHIubWQ9YS5tZC5zaGEyNTY7dmFyIG89cygpLGM9bnVsbCx1PWEudXRpbC5nbG9iYWxTY29wZSxsPXUuY3J5cHRvfHx1Lm1zQ3J5cHRvO2lmKGwmJmwuZ2V0UmFuZG9tVmFsdWVzJiYoYz1mdW5jdGlvbihlKXtyZXR1cm4gbC5nZXRSYW5kb21WYWx1ZXMoZSl9KSxhLm9wdGlvbnMudXNlUHVyZUphdmFTY3JpcHR8fCFhLnV0aWwuaXNOb2RlanMmJiFjKXtpZigidW5kZWZpbmVkIj09dHlwZW9mIHdpbmRvd3x8d2luZG93LmRvY3VtZW50LG8uY29sbGVjdEludCgrbmV3IERhdGUsMzIpLCJ1bmRlZmluZWQiIT10eXBlb2YgbmF2aWdhdG9yKXt2YXIgcD0iIjtmb3IodmFyIGYgaW4gbmF2aWdhdG9yKXRyeXsic3RyaW5nIj09dHlwZW9mIG5hdmlnYXRvcltmXSYmKHArPW5hdmlnYXRvcltmXSl9Y2F0Y2goZSl7fW8uY29sbGVjdChwKSxwPW51bGx9dCYmKHQoKS5tb3VzZW1vdmUoKGZ1bmN0aW9uKGUpe28uY29sbGVjdEludChlLmNsaWVudFgsMTYpLG8uY29sbGVjdEludChlLmNsaWVudFksMTYpfSkpLHQoKS5rZXlwcmVzcygoZnVuY3Rpb24oZSl7by5jb2xsZWN0SW50KGUuY2hhckNvZGUsOCl9KSkpfWlmKGEucmFuZG9tKWZvcih2YXIgZiBpbiBvKWEucmFuZG9tW2ZdPW9bZl07ZWxzZSBhLnJhbmRvbT1vO2EucmFuZG9tLmNyZWF0ZUluc3RhbmNlPXMsZS5leHBvcnRzPWEucmFuZG9tfSgidW5kZWZpbmVkIiE9dHlwZW9mIGpRdWVyeT9qUXVlcnk6bnVsbCl9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO3IoMSkscig2KTt2YXIgbj1lLmV4cG9ydHM9YS5hc24xPWEuYXNuMXx8e307ZnVuY3Rpb24gaShlLHQscil7aWYocj50KXt2YXIgYT1uZXcgRXJyb3IoIlRvbyBmZXcgYnl0ZXMgdG8gcGFyc2UgREVSLiIpO3Rocm93IGEuYXZhaWxhYmxlPWUubGVuZ3RoKCksYS5yZW1haW5pbmc9dCxhLnJlcXVlc3RlZD1yLGF9fW4uQ2xhc3M9e1VOSVZFUlNBTDowLEFQUExJQ0FUSU9OOjY0LENPTlRFWFRfU1BFQ0lGSUM6MTI4LFBSSVZBVEU6MTkyfSxuLlR5cGU9e05PTkU6MCxCT09MRUFOOjEsSU5URUdFUjoyLEJJVFNUUklORzozLE9DVEVUU1RSSU5HOjQsTlVMTDo1LE9JRDo2LE9ERVNDOjcsRVhURVJOQUw6OCxSRUFMOjksRU5VTUVSQVRFRDoxMCxFTUJFRERFRDoxMSxVVEY4OjEyLFJPSUQ6MTMsU0VRVUVOQ0U6MTYsU0VUOjE3LFBSSU5UQUJMRVNUUklORzoxOSxJQTVTVFJJTkc6MjIsVVRDVElNRToyMyxHRU5FUkFMSVpFRFRJTUU6MjQsQk1QU1RSSU5HOjMwfSxuLmNyZWF0ZT1mdW5jdGlvbihlLHQscixpLHMpe2lmKGEudXRpbC5pc0FycmF5KGkpKXtmb3IodmFyIG89W10sYz0wO2M8aS5sZW5ndGg7KytjKXZvaWQgMCE9PWlbY10mJm8ucHVzaChpW2NdKTtpPW99dmFyIHU9e3RhZ0NsYXNzOmUsdHlwZTp0LGNvbnN0cnVjdGVkOnIsY29tcG9zZWQ6cnx8YS51dGlsLmlzQXJyYXkoaSksdmFsdWU6aX07cmV0dXJuIHMmJiJiaXRTdHJpbmdDb250ZW50cyJpbiBzJiYodS5iaXRTdHJpbmdDb250ZW50cz1zLmJpdFN0cmluZ0NvbnRlbnRzLHUub3JpZ2luYWw9bi5jb3B5KHUpKSx1fSxuLmNvcHk9ZnVuY3Rpb24oZSx0KXt2YXIgcjtpZihhLnV0aWwuaXNBcnJheShlKSl7cj1bXTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoOysraSlyLnB1c2gobi5jb3B5KGVbaV0sdCkpO3JldHVybiByfXJldHVybiJzdHJpbmciPT10eXBlb2YgZT9lOihyPXt0YWdDbGFzczplLnRhZ0NsYXNzLHR5cGU6ZS50eXBlLGNvbnN0cnVjdGVkOmUuY29uc3RydWN0ZWQsY29tcG9zZWQ6ZS5jb21wb3NlZCx2YWx1ZTpuLmNvcHkoZS52YWx1ZSx0KX0sdCYmIXQuZXhjbHVkZUJpdFN0cmluZ0NvbnRlbnRzJiYoci5iaXRTdHJpbmdDb250ZW50cz1lLmJpdFN0cmluZ0NvbnRlbnRzKSxyKX0sbi5lcXVhbHM9ZnVuY3Rpb24oZSx0LHIpe2lmKGEudXRpbC5pc0FycmF5KGUpKXtpZighYS51dGlsLmlzQXJyYXkodCkpcmV0dXJuITE7aWYoZS5sZW5ndGghPT10Lmxlbmd0aClyZXR1cm4hMTtmb3IodmFyIGk9MDtpPGUubGVuZ3RoOysraSlpZighbi5lcXVhbHMoZVtpXSx0W2ldKSlyZXR1cm4hMTtyZXR1cm4hMH1pZih0eXBlb2YgZSE9dHlwZW9mIHQpcmV0dXJuITE7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBlPT09dDt2YXIgcz1lLnRhZ0NsYXNzPT09dC50YWdDbGFzcyYmZS50eXBlPT09dC50eXBlJiZlLmNvbnN0cnVjdGVkPT09dC5jb25zdHJ1Y3RlZCYmZS5jb21wb3NlZD09PXQuY29tcG9zZWQmJm4uZXF1YWxzKGUudmFsdWUsdC52YWx1ZSk7cmV0dXJuIHImJnIuaW5jbHVkZUJpdFN0cmluZ0NvbnRlbnRzJiYocz1zJiZlLmJpdFN0cmluZ0NvbnRlbnRzPT09dC5iaXRTdHJpbmdDb250ZW50cyksc30sbi5nZXRCZXJWYWx1ZUxlbmd0aD1mdW5jdGlvbihlKXt2YXIgdD1lLmdldEJ5dGUoKTtpZigxMjghPT10KXJldHVybiAxMjgmdD9lLmdldEludCgoMTI3JnQpPDwzKTp0fTtuLmZyb21EZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9e3N0cmljdDohMCxkZWNvZGVCaXRTdHJpbmdzOiEwfSksImJvb2xlYW4iPT10eXBlb2YgdCYmKHQ9e3N0cmljdDp0LGRlY29kZUJpdFN0cmluZ3M6ITB9KSwic3RyaWN0ImluIHR8fCh0LnN0cmljdD0hMCksImRlY29kZUJpdFN0cmluZ3MiaW4gdHx8KHQuZGVjb2RlQml0U3RyaW5ncz0hMCksInN0cmluZyI9PXR5cGVvZiBlJiYoZT1hLnV0aWwuY3JlYXRlQnVmZmVyKGUpKSxmdW5jdGlvbiBlKHQscixhLHMpe3ZhciBvO2kodCxyLDIpO3ZhciBjPXQuZ2V0Qnl0ZSgpO3ItLTt2YXIgdT0xOTImYyxsPTMxJmM7bz10Lmxlbmd0aCgpO3ZhciBwLGYsaD1mdW5jdGlvbihlLHQpe3ZhciByPWUuZ2V0Qnl0ZSgpO2lmKHQtLSwxMjghPT1yKXt2YXIgYTtpZigxMjgmcil7dmFyIG49MTI3JnI7aShlLHQsbiksYT1lLmdldEludChuPDwzKX1lbHNlIGE9cjtpZihhPDApdGhyb3cgbmV3IEVycm9yKCJOZWdhdGl2ZSBsZW5ndGg6ICIrYSk7cmV0dXJuIGF9fSh0LHIpO2lmKHItPW8tdC5sZW5ndGgoKSx2b2lkIDAhPT1oJiZoPnIpe2lmKHMuc3RyaWN0KXt2YXIgZD1uZXcgRXJyb3IoIlRvbyBmZXcgYnl0ZXMgdG8gcmVhZCBBU04uMSB2YWx1ZS4iKTt0aHJvdyBkLmF2YWlsYWJsZT10Lmxlbmd0aCgpLGQucmVtYWluaW5nPXIsZC5yZXF1ZXN0ZWQ9aCxkfWg9cn12YXIgeT0zMj09KDMyJmMpO2lmKHkpaWYocD1bXSx2b2lkIDA9PT1oKWZvcig7Oyl7aWYoaSh0LHIsMiksdC5ieXRlcygyKT09PVN0cmluZy5mcm9tQ2hhckNvZGUoMCwwKSl7dC5nZXRCeXRlcygyKSxyLT0yO2JyZWFrfW89dC5sZW5ndGgoKSxwLnB1c2goZSh0LHIsYSsxLHMpKSxyLT1vLXQubGVuZ3RoKCl9ZWxzZSBmb3IoO2g+MDspbz10Lmxlbmd0aCgpLHAucHVzaChlKHQsaCxhKzEscykpLHItPW8tdC5sZW5ndGgoKSxoLT1vLXQubGVuZ3RoKCk7dm9pZCAwPT09cCYmdT09PW4uQ2xhc3MuVU5JVkVSU0FMJiZsPT09bi5UeXBlLkJJVFNUUklORyYmKGY9dC5ieXRlcyhoKSk7aWYodm9pZCAwPT09cCYmcy5kZWNvZGVCaXRTdHJpbmdzJiZ1PT09bi5DbGFzcy5VTklWRVJTQUwmJmw9PT1uLlR5cGUuQklUU1RSSU5HJiZoPjEpe3ZhciBnPXQucmVhZCxtPXIsdj0wO2lmKGw9PT1uLlR5cGUuQklUU1RSSU5HJiYoaSh0LHIsMSksdj10LmdldEJ5dGUoKSxyLS0pLDA9PT12KXRyeXtvPXQubGVuZ3RoKCk7dmFyIEM9e3ZlcmJvc2U6cy52ZXJib3NlLHN0cmljdDohMCxkZWNvZGVCaXRTdHJpbmdzOiEwfSxFPWUodCxyLGErMSxDKSxTPW8tdC5sZW5ndGgoKTtyLT1TLGw9PW4uVHlwZS5CSVRTVFJJTkcmJlMrKzt2YXIgVD1FLnRhZ0NsYXNzO1MhPT1ofHxUIT09bi5DbGFzcy5VTklWRVJTQUwmJlQhPT1uLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUN8fChwPVtFXSl9Y2F0Y2goZSl7fXZvaWQgMD09PXAmJih0LnJlYWQ9ZyxyPW0pfWlmKHZvaWQgMD09PXApe2lmKHZvaWQgMD09PWgpe2lmKHMuc3RyaWN0KXRocm93IG5ldyBFcnJvcigiTm9uLWNvbnN0cnVjdGVkIEFTTi4xIG9iamVjdCBvZiBpbmRlZmluaXRlIGxlbmd0aC4iKTtoPXJ9aWYobD09PW4uVHlwZS5CTVBTVFJJTkcpZm9yKHA9IiI7aD4wO2gtPTIpaSh0LHIsMikscCs9U3RyaW5nLmZyb21DaGFyQ29kZSh0LmdldEludDE2KCkpLHItPTI7ZWxzZSBwPXQuZ2V0Qnl0ZXMoaCl9dmFyIEk9dm9pZCAwPT09Zj9udWxsOntiaXRTdHJpbmdDb250ZW50czpmfTtyZXR1cm4gbi5jcmVhdGUodSxsLHkscCxJKX0oZSxlLmxlbmd0aCgpLDAsdCl9LG4udG9EZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpLHI9ZS50YWdDbGFzc3xlLnR5cGUsaT1hLnV0aWwuY3JlYXRlQnVmZmVyKCkscz0hMTtpZigiYml0U3RyaW5nQ29udGVudHMiaW4gZSYmKHM9ITAsZS5vcmlnaW5hbCYmKHM9bi5lcXVhbHMoZSxlLm9yaWdpbmFsKSkpLHMpaS5wdXRCeXRlcyhlLmJpdFN0cmluZ0NvbnRlbnRzKTtlbHNlIGlmKGUuY29tcG9zZWQpe2UuY29uc3RydWN0ZWQ/cnw9MzI6aS5wdXRCeXRlKDApO2Zvcih2YXIgbz0wO288ZS52YWx1ZS5sZW5ndGg7KytvKXZvaWQgMCE9PWUudmFsdWVbb10mJmkucHV0QnVmZmVyKG4udG9EZXIoZS52YWx1ZVtvXSkpfWVsc2UgaWYoZS50eXBlPT09bi5UeXBlLkJNUFNUUklORylmb3Iobz0wO288ZS52YWx1ZS5sZW5ndGg7KytvKWkucHV0SW50MTYoZS52YWx1ZS5jaGFyQ29kZUF0KG8pKTtlbHNlIGUudHlwZT09PW4uVHlwZS5JTlRFR0VSJiZlLnZhbHVlLmxlbmd0aD4xJiYoMD09PWUudmFsdWUuY2hhckNvZGVBdCgwKSYmMD09KDEyOCZlLnZhbHVlLmNoYXJDb2RlQXQoMSkpfHwyNTU9PT1lLnZhbHVlLmNoYXJDb2RlQXQoMCkmJjEyOD09KDEyOCZlLnZhbHVlLmNoYXJDb2RlQXQoMSkpKT9pLnB1dEJ5dGVzKGUudmFsdWUuc3Vic3RyKDEpKTppLnB1dEJ5dGVzKGUudmFsdWUpO2lmKHQucHV0Qnl0ZShyKSxpLmxlbmd0aCgpPD0xMjcpdC5wdXRCeXRlKDEyNyZpLmxlbmd0aCgpKTtlbHNle3ZhciBjPWkubGVuZ3RoKCksdT0iIjtkb3t1Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSZjKSxjPj4+PTh9d2hpbGUoYz4wKTt0LnB1dEJ5dGUoMTI4fHUubGVuZ3RoKTtmb3Iobz11Lmxlbmd0aC0xO28+PTA7LS1vKXQucHV0Qnl0ZSh1LmNoYXJDb2RlQXQobykpfXJldHVybiB0LnB1dEJ1ZmZlcihpKSx0fSxuLm9pZFRvRGVyPWZ1bmN0aW9uKGUpe3ZhciB0LHIsbixpLHM9ZS5zcGxpdCgiLiIpLG89YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO28ucHV0Qnl0ZSg0MCpwYXJzZUludChzWzBdLDEwKStwYXJzZUludChzWzFdLDEwKSk7Zm9yKHZhciBjPTI7YzxzLmxlbmd0aDsrK2Mpe3Q9ITAscj1bXSxuPXBhcnNlSW50KHNbY10sMTApO2Rve2k9MTI3Jm4sbj4+Pj03LHR8fChpfD0xMjgpLHIucHVzaChpKSx0PSExfXdoaWxlKG4+MCk7Zm9yKHZhciB1PXIubGVuZ3RoLTE7dT49MDstLXUpby5wdXRCeXRlKHJbdV0pfXJldHVybiBvfSxuLmRlclRvT2lkPWZ1bmN0aW9uKGUpe3ZhciB0OyJzdHJpbmciPT10eXBlb2YgZSYmKGU9YS51dGlsLmNyZWF0ZUJ1ZmZlcihlKSk7dmFyIHI9ZS5nZXRCeXRlKCk7dD1NYXRoLmZsb29yKHIvNDApKyIuIityJTQwO2Zvcih2YXIgbj0wO2UubGVuZ3RoKCk+MDspbjw8PTcsMTI4JihyPWUuZ2V0Qnl0ZSgpKT9uKz0xMjcmcjoodCs9Ii4iKyhuK3IpLG49MCk7cmV0dXJuIHR9LG4udXRjVGltZVRvRGF0ZT1mdW5jdGlvbihlKXt2YXIgdD1uZXcgRGF0ZSxyPXBhcnNlSW50KGUuc3Vic3RyKDAsMiksMTApO3I9cj49NTA/MTkwMCtyOjJlMytyO3ZhciBhPXBhcnNlSW50KGUuc3Vic3RyKDIsMiksMTApLTEsbj1wYXJzZUludChlLnN1YnN0cig0LDIpLDEwKSxpPXBhcnNlSW50KGUuc3Vic3RyKDYsMiksMTApLHM9cGFyc2VJbnQoZS5zdWJzdHIoOCwyKSwxMCksbz0wO2lmKGUubGVuZ3RoPjExKXt2YXIgYz1lLmNoYXJBdCgxMCksdT0xMDsiKyIhPT1jJiYiLSIhPT1jJiYobz1wYXJzZUludChlLnN1YnN0cigxMCwyKSwxMCksdSs9Mil9aWYodC5zZXRVVENGdWxsWWVhcihyLGEsbiksdC5zZXRVVENIb3VycyhpLHMsbywwKSx1JiYoIisiPT09KGM9ZS5jaGFyQXQodSkpfHwiLSI9PT1jKSl7dmFyIGw9NjAqcGFyc2VJbnQoZS5zdWJzdHIodSsxLDIpLDEwKStwYXJzZUludChlLnN1YnN0cih1KzQsMiksMTApO2wqPTZlNCwiKyI9PT1jP3Quc2V0VGltZSgrdC1sKTp0LnNldFRpbWUoK3QrbCl9cmV0dXJuIHR9LG4uZ2VuZXJhbGl6ZWRUaW1lVG9EYXRlPWZ1bmN0aW9uKGUpe3ZhciB0PW5ldyBEYXRlLHI9cGFyc2VJbnQoZS5zdWJzdHIoMCw0KSwxMCksYT1wYXJzZUludChlLnN1YnN0cig0LDIpLDEwKS0xLG49cGFyc2VJbnQoZS5zdWJzdHIoNiwyKSwxMCksaT1wYXJzZUludChlLnN1YnN0cig4LDIpLDEwKSxzPXBhcnNlSW50KGUuc3Vic3RyKDEwLDIpLDEwKSxvPXBhcnNlSW50KGUuc3Vic3RyKDEyLDIpLDEwKSxjPTAsdT0wLGw9ITE7IloiPT09ZS5jaGFyQXQoZS5sZW5ndGgtMSkmJihsPSEwKTt2YXIgcD1lLmxlbmd0aC01LGY9ZS5jaGFyQXQocCk7IisiIT09ZiYmIi0iIT09Znx8KHU9NjAqcGFyc2VJbnQoZS5zdWJzdHIocCsxLDIpLDEwKStwYXJzZUludChlLnN1YnN0cihwKzQsMiksMTApLHUqPTZlNCwiKyI9PT1mJiYodSo9LTEpLGw9ITApO3JldHVybiIuIj09PWUuY2hhckF0KDE0KSYmKGM9MWUzKnBhcnNlRmxvYXQoZS5zdWJzdHIoMTQpLDEwKSksbD8odC5zZXRVVENGdWxsWWVhcihyLGEsbiksdC5zZXRVVENIb3VycyhpLHMsbyxjKSx0LnNldFRpbWUoK3QrdSkpOih0LnNldEZ1bGxZZWFyKHIsYSxuKSx0LnNldEhvdXJzKGkscyxvLGMpKSx0fSxuLmRhdGVUb1V0Y1RpbWU9ZnVuY3Rpb24oZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBlO3ZhciB0PSIiLHI9W107ci5wdXNoKCgiIitlLmdldFVUQ0Z1bGxZZWFyKCkpLnN1YnN0cigyKSksci5wdXNoKCIiKyhlLmdldFVUQ01vbnRoKCkrMSkpLHIucHVzaCgiIitlLmdldFVUQ0RhdGUoKSksci5wdXNoKCIiK2UuZ2V0VVRDSG91cnMoKSksci5wdXNoKCIiK2UuZ2V0VVRDTWludXRlcygpKSxyLnB1c2goIiIrZS5nZXRVVENTZWNvbmRzKCkpO2Zvcih2YXIgYT0wO2E8ci5sZW5ndGg7KythKXJbYV0ubGVuZ3RoPDImJih0Kz0iMCIpLHQrPXJbYV07cmV0dXJuIHQrPSJaIn0sbi5kYXRlVG9HZW5lcmFsaXplZFRpbWU9ZnVuY3Rpb24oZSl7aWYoInN0cmluZyI9PXR5cGVvZiBlKXJldHVybiBlO3ZhciB0PSIiLHI9W107ci5wdXNoKCIiK2UuZ2V0VVRDRnVsbFllYXIoKSksci5wdXNoKCIiKyhlLmdldFVUQ01vbnRoKCkrMSkpLHIucHVzaCgiIitlLmdldFVUQ0RhdGUoKSksci5wdXNoKCIiK2UuZ2V0VVRDSG91cnMoKSksci5wdXNoKCIiK2UuZ2V0VVRDTWludXRlcygpKSxyLnB1c2goIiIrZS5nZXRVVENTZWNvbmRzKCkpO2Zvcih2YXIgYT0wO2E8ci5sZW5ndGg7KythKXJbYV0ubGVuZ3RoPDImJih0Kz0iMCIpLHQrPXJbYV07cmV0dXJuIHQrPSJaIn0sbi5pbnRlZ2VyVG9EZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO2lmKGU+PS0xMjgmJmU8MTI4KXJldHVybiB0LnB1dFNpZ25lZEludChlLDgpO2lmKGU+PS0zMjc2OCYmZTwzMjc2OClyZXR1cm4gdC5wdXRTaWduZWRJbnQoZSwxNik7aWYoZT49LTgzODg2MDgmJmU8ODM4ODYwOClyZXR1cm4gdC5wdXRTaWduZWRJbnQoZSwyNCk7aWYoZT49LTIxNDc0ODM2NDgmJmU8MjE0NzQ4MzY0OClyZXR1cm4gdC5wdXRTaWduZWRJbnQoZSwzMik7dmFyIHI9bmV3IEVycm9yKCJJbnRlZ2VyIHRvbyBsYXJnZTsgbWF4IGlzIDMyLWJpdHMuIik7dGhyb3cgci5pbnRlZ2VyPWUscn0sbi5kZXJUb0ludGVnZXI9ZnVuY3Rpb24oZSl7InN0cmluZyI9PXR5cGVvZiBlJiYoZT1hLnV0aWwuY3JlYXRlQnVmZmVyKGUpKTt2YXIgdD04KmUubGVuZ3RoKCk7aWYodD4zMil0aHJvdyBuZXcgRXJyb3IoIkludGVnZXIgdG9vIGxhcmdlOyBtYXggaXMgMzItYml0cy4iKTtyZXR1cm4gZS5nZXRTaWduZWRJbnQodCl9LG4udmFsaWRhdGU9ZnVuY3Rpb24oZSx0LHIsaSl7dmFyIHM9ITE7aWYoZS50YWdDbGFzcyE9PXQudGFnQ2xhc3MmJnZvaWQgMCE9PXQudGFnQ2xhc3N8fGUudHlwZSE9PXQudHlwZSYmdm9pZCAwIT09dC50eXBlKWkmJihlLnRhZ0NsYXNzIT09dC50YWdDbGFzcyYmaS5wdXNoKCJbIit0Lm5hbWUrJ10gRXhwZWN0ZWQgdGFnIGNsYXNzICInK3QudGFnQ2xhc3MrJyIsIGdvdCAiJytlLnRhZ0NsYXNzKyciJyksZS50eXBlIT09dC50eXBlJiZpLnB1c2goIlsiK3QubmFtZSsnXSBFeHBlY3RlZCB0eXBlICInK3QudHlwZSsnIiwgZ290ICInK2UudHlwZSsnIicpKTtlbHNlIGlmKGUuY29uc3RydWN0ZWQ9PT10LmNvbnN0cnVjdGVkfHx2b2lkIDA9PT10LmNvbnN0cnVjdGVkKXtpZihzPSEwLHQudmFsdWUmJmEudXRpbC5pc0FycmF5KHQudmFsdWUpKWZvcih2YXIgbz0wLGM9MDtzJiZjPHQudmFsdWUubGVuZ3RoOysrYylzPXQudmFsdWVbY10ub3B0aW9uYWx8fCExLGUudmFsdWVbb10mJigocz1uLnZhbGlkYXRlKGUudmFsdWVbb10sdC52YWx1ZVtjXSxyLGkpKT8rK286dC52YWx1ZVtjXS5vcHRpb25hbCYmKHM9ITApKSwhcyYmaSYmaS5wdXNoKCJbIit0Lm5hbWUrJ10gVGFnIGNsYXNzICInK3QudGFnQ2xhc3MrJyIsIHR5cGUgIicrdC50eXBlKyciIGV4cGVjdGVkIHZhbHVlIGxlbmd0aCAiJyt0LnZhbHVlLmxlbmd0aCsnIiwgZ290ICInK2UudmFsdWUubGVuZ3RoKyciJyk7aWYocyYmcilpZih0LmNhcHR1cmUmJihyW3QuY2FwdHVyZV09ZS52YWx1ZSksdC5jYXB0dXJlQXNuMSYmKHJbdC5jYXB0dXJlQXNuMV09ZSksdC5jYXB0dXJlQml0U3RyaW5nQ29udGVudHMmJiJiaXRTdHJpbmdDb250ZW50cyJpbiBlJiYoclt0LmNhcHR1cmVCaXRTdHJpbmdDb250ZW50c109ZS5iaXRTdHJpbmdDb250ZW50cyksdC5jYXB0dXJlQml0U3RyaW5nVmFsdWUmJiJiaXRTdHJpbmdDb250ZW50cyJpbiBlKWlmKGUuYml0U3RyaW5nQ29udGVudHMubGVuZ3RoPDIpclt0LmNhcHR1cmVCaXRTdHJpbmdWYWx1ZV09IiI7ZWxzZXtpZigwIT09ZS5iaXRTdHJpbmdDb250ZW50cy5jaGFyQ29kZUF0KDApKXRocm93IG5ldyBFcnJvcigiY2FwdHVyZUJpdFN0cmluZ1ZhbHVlIG9ubHkgc3VwcG9ydGVkIGZvciB6ZXJvIHVudXNlZCBiaXRzIik7clt0LmNhcHR1cmVCaXRTdHJpbmdWYWx1ZV09ZS5iaXRTdHJpbmdDb250ZW50cy5zbGljZSgxKX19ZWxzZSBpJiZpLnB1c2goIlsiK3QubmFtZSsnXSBFeHBlY3RlZCBjb25zdHJ1Y3RlZCAiJyt0LmNvbnN0cnVjdGVkKyciLCBnb3QgIicrZS5jb25zdHJ1Y3RlZCsnIicpO3JldHVybiBzfTt2YXIgcz0vW15cXHUwMDAwLVxcdTAwZmZdLztuLnByZXR0eVByaW50PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaT0iIjtyPXJ8fDIsKHQ9dHx8MCk+MCYmKGkrPSJcbiIpO2Zvcih2YXIgbz0iIixjPTA7Yzx0KnI7KytjKW8rPSIgIjtzd2l0Y2goaSs9bysiVGFnOiAiLGUudGFnQ2xhc3Mpe2Nhc2Ugbi5DbGFzcy5VTklWRVJTQUw6aSs9IlVuaXZlcnNhbDoiO2JyZWFrO2Nhc2Ugbi5DbGFzcy5BUFBMSUNBVElPTjppKz0iQXBwbGljYXRpb246IjticmVhaztjYXNlIG4uQ2xhc3MuQ09OVEVYVF9TUEVDSUZJQzppKz0iQ29udGV4dC1TcGVjaWZpYzoiO2JyZWFrO2Nhc2Ugbi5DbGFzcy5QUklWQVRFOmkrPSJQcml2YXRlOiJ9aWYoZS50YWdDbGFzcz09PW4uQ2xhc3MuVU5JVkVSU0FMKXN3aXRjaChpKz1lLnR5cGUsZS50eXBlKXtjYXNlIG4uVHlwZS5OT05FOmkrPSIgKE5vbmUpIjticmVhaztjYXNlIG4uVHlwZS5CT09MRUFOOmkrPSIgKEJvb2xlYW4pIjticmVhaztjYXNlIG4uVHlwZS5JTlRFR0VSOmkrPSIgKEludGVnZXIpIjticmVhaztjYXNlIG4uVHlwZS5CSVRTVFJJTkc6aSs9IiAoQml0IHN0cmluZykiO2JyZWFrO2Nhc2Ugbi5UeXBlLk9DVEVUU1RSSU5HOmkrPSIgKE9jdGV0IHN0cmluZykiO2JyZWFrO2Nhc2Ugbi5UeXBlLk5VTEw6aSs9IiAoTnVsbCkiO2JyZWFrO2Nhc2Ugbi5UeXBlLk9JRDppKz0iIChPYmplY3QgSWRlbnRpZmllcikiO2JyZWFrO2Nhc2Ugbi5UeXBlLk9ERVNDOmkrPSIgKE9iamVjdCBEZXNjcmlwdG9yKSI7YnJlYWs7Y2FzZSBuLlR5cGUuRVhURVJOQUw6aSs9IiAoRXh0ZXJuYWwgb3IgSW5zdGFuY2Ugb2YpIjticmVhaztjYXNlIG4uVHlwZS5SRUFMOmkrPSIgKFJlYWwpIjticmVhaztjYXNlIG4uVHlwZS5FTlVNRVJBVEVEOmkrPSIgKEVudW1lcmF0ZWQpIjticmVhaztjYXNlIG4uVHlwZS5FTUJFRERFRDppKz0iIChFbWJlZGRlZCBQRFYpIjticmVhaztjYXNlIG4uVHlwZS5VVEY4OmkrPSIgKFVURjgpIjticmVhaztjYXNlIG4uVHlwZS5ST0lEOmkrPSIgKFJlbGF0aXZlIE9iamVjdCBJZGVudGlmaWVyKSI7YnJlYWs7Y2FzZSBuLlR5cGUuU0VRVUVOQ0U6aSs9IiAoU2VxdWVuY2UpIjticmVhaztjYXNlIG4uVHlwZS5TRVQ6aSs9IiAoU2V0KSI7YnJlYWs7Y2FzZSBuLlR5cGUuUFJJTlRBQkxFU1RSSU5HOmkrPSIgKFByaW50YWJsZSBTdHJpbmcpIjticmVhaztjYXNlIG4uVHlwZS5JQTVTdHJpbmc6aSs9IiAoSUE1U3RyaW5nIChBU0NJSSkpIjticmVhaztjYXNlIG4uVHlwZS5VVENUSU1FOmkrPSIgKFVUQyB0aW1lKSI7YnJlYWs7Y2FzZSBuLlR5cGUuR0VORVJBTElaRURUSU1FOmkrPSIgKEdlbmVyYWxpemVkIHRpbWUpIjticmVhaztjYXNlIG4uVHlwZS5CTVBTVFJJTkc6aSs9IiAoQk1QIFN0cmluZykifWVsc2UgaSs9ZS50eXBlO2lmKGkrPSJcbiIsaSs9bysiQ29uc3RydWN0ZWQ6ICIrZS5jb25zdHJ1Y3RlZCsiXG4iLGUuY29tcG9zZWQpe3ZhciB1PTAsbD0iIjtmb3IoYz0wO2M8ZS52YWx1ZS5sZW5ndGg7KytjKXZvaWQgMCE9PWUudmFsdWVbY10mJih1Kz0xLGwrPW4ucHJldHR5UHJpbnQoZS52YWx1ZVtjXSx0KzEsciksYysxPGUudmFsdWUubGVuZ3RoJiYobCs9IiwiKSk7aSs9bysiU3ViIHZhbHVlczogIit1K2x9ZWxzZXtpZihpKz1vKyJWYWx1ZTogIixlLnR5cGU9PT1uLlR5cGUuT0lEKXt2YXIgcD1uLmRlclRvT2lkKGUudmFsdWUpO2krPXAsYS5wa2kmJmEucGtpLm9pZHMmJnAgaW4gYS5wa2kub2lkcyYmKGkrPSIgKCIrYS5wa2kub2lkc1twXSsiKSAiKX1pZihlLnR5cGU9PT1uLlR5cGUuSU5URUdFUil0cnl7aSs9bi5kZXJUb0ludGVnZXIoZS52YWx1ZSl9Y2F0Y2godCl7aSs9IjB4IithLnV0aWwuYnl0ZXNUb0hleChlLnZhbHVlKX1lbHNlIGlmKGUudHlwZT09PW4uVHlwZS5CSVRTVFJJTkcpe2lmKGUudmFsdWUubGVuZ3RoPjE/aSs9IjB4IithLnV0aWwuYnl0ZXNUb0hleChlLnZhbHVlLnNsaWNlKDEpKTppKz0iKG5vbmUpIixlLnZhbHVlLmxlbmd0aD4wKXt2YXIgZj1lLnZhbHVlLmNoYXJDb2RlQXQoMCk7MT09Zj9pKz0iICgxIHVudXNlZCBiaXQgc2hvd24pIjpmPjEmJihpKz0iICgiK2YrIiB1bnVzZWQgYml0cyBzaG93bikiKX19ZWxzZSBlLnR5cGU9PT1uLlR5cGUuT0NURVRTVFJJTkc/KHMudGVzdChlLnZhbHVlKXx8KGkrPSIoIitlLnZhbHVlKyIpICIpLGkrPSIweCIrYS51dGlsLmJ5dGVzVG9IZXgoZS52YWx1ZSkpOmUudHlwZT09PW4uVHlwZS5VVEY4P2krPWEudXRpbC5kZWNvZGVVdGY4KGUudmFsdWUpOmUudHlwZT09PW4uVHlwZS5QUklOVEFCTEVTVFJJTkd8fGUudHlwZT09PW4uVHlwZS5JQTVTdHJpbmc/aSs9ZS52YWx1ZTpzLnRlc3QoZS52YWx1ZSk/aSs9IjB4IithLnV0aWwuYnl0ZXNUb0hleChlLnZhbHVlKTowPT09ZS52YWx1ZS5sZW5ndGg/aSs9IltudWxsXSI6aSs9ZS52YWx1ZX1yZXR1cm4gaX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO2UuZXhwb3J0cz1hLm1kPWEubWR8fHt9LGEubWQuYWxnb3JpdGhtcz1hLm1kLmFsZ29yaXRobXN8fHt9fSxmdW5jdGlvbihlLHQscil7dmFyIGE9cigwKTtmdW5jdGlvbiBuKGUsdCl7YS5jaXBoZXIucmVnaXN0ZXJBbGdvcml0aG0oZSwoZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGEuYWVzLkFsZ29yaXRobShlLHQpfSkpfXIoMTMpLHIoMTkpLHIoMSksZS5leHBvcnRzPWEuYWVzPWEuYWVzfHx7fSxhLmFlcy5zdGFydEVuY3J5cHRpbmc9ZnVuY3Rpb24oZSx0LHIsYSl7dmFyIG49ZCh7a2V5OmUsb3V0cHV0OnIsZGVjcnlwdDohMSxtb2RlOmF9KTtyZXR1cm4gbi5zdGFydCh0KSxufSxhLmFlcy5jcmVhdGVFbmNyeXB0aW9uQ2lwaGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGQoe2tleTplLG91dHB1dDpudWxsLGRlY3J5cHQ6ITEsbW9kZTp0fSl9LGEuYWVzLnN0YXJ0RGVjcnlwdGluZz1mdW5jdGlvbihlLHQscixhKXt2YXIgbj1kKHtrZXk6ZSxvdXRwdXQ6cixkZWNyeXB0OiEwLG1vZGU6YX0pO3JldHVybiBuLnN0YXJ0KHQpLG59LGEuYWVzLmNyZWF0ZURlY3J5cHRpb25DaXBoZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZCh7a2V5OmUsb3V0cHV0Om51bGwsZGVjcnlwdDohMCxtb2RlOnR9KX0sYS5hZXMuQWxnb3JpdGhtPWZ1bmN0aW9uKGUsdCl7bHx8cCgpO3ZhciByPXRoaXM7ci5uYW1lPWUsci5tb2RlPW5ldyB0KHtibG9ja1NpemU6MTYsY2lwaGVyOntlbmNyeXB0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGgoci5fdyxlLHQsITEpfSxkZWNyeXB0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGgoci5fdyxlLHQsITApfX19KSxyLl9pbml0PSExfSxhLmFlcy5BbGdvcml0aG0ucHJvdG90eXBlLmluaXRpYWxpemU9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX2luaXQpe3ZhciB0LHI9ZS5rZXk7aWYoInN0cmluZyIhPXR5cGVvZiByfHwxNiE9PXIubGVuZ3RoJiYyNCE9PXIubGVuZ3RoJiYzMiE9PXIubGVuZ3RoKXtpZihhLnV0aWwuaXNBcnJheShyKSYmKDE2PT09ci5sZW5ndGh8fDI0PT09ci5sZW5ndGh8fDMyPT09ci5sZW5ndGgpKXt0PXIscj1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDsrK24pci5wdXRCeXRlKHRbbl0pfX1lbHNlIHI9YS51dGlsLmNyZWF0ZUJ1ZmZlcihyKTtpZighYS51dGlsLmlzQXJyYXkocikpe3Q9cixyPVtdO3ZhciBpPXQubGVuZ3RoKCk7aWYoMTY9PT1pfHwyND09PWl8fDMyPT09aSl7aT4+Pj0yO2ZvcihuPTA7bjxpOysrbilyLnB1c2godC5nZXRJbnQzMigpKX19aWYoIWEudXRpbC5pc0FycmF5KHIpfHw0IT09ci5sZW5ndGgmJjYhPT1yLmxlbmd0aCYmOCE9PXIubGVuZ3RoKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBrZXkgcGFyYW1ldGVyLiIpO3ZhciBzPXRoaXMubW9kZS5uYW1lLG89LTEhPT1bIkNGQiIsIk9GQiIsIkNUUiIsIkdDTSJdLmluZGV4T2Yocyk7dGhpcy5fdz1mKHIsZS5kZWNyeXB0JiYhbyksdGhpcy5faW5pdD0hMH19LGEuYWVzLl9leHBhbmRLZXk9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbHx8cCgpLGYoZSx0KX0sYS5hZXMuX3VwZGF0ZUJsb2NrPWgsbigiQUVTLUVDQiIsYS5jaXBoZXIubW9kZXMuZWNiKSxuKCJBRVMtQ0JDIixhLmNpcGhlci5tb2Rlcy5jYmMpLG4oIkFFUy1DRkIiLGEuY2lwaGVyLm1vZGVzLmNmYiksbigiQUVTLU9GQiIsYS5jaXBoZXIubW9kZXMub2ZiKSxuKCJBRVMtQ1RSIixhLmNpcGhlci5tb2Rlcy5jdHIpLG4oIkFFUy1HQ00iLGEuY2lwaGVyLm1vZGVzLmdjbSk7dmFyIGkscyxvLGMsdSxsPSExO2Z1bmN0aW9uIHAoKXtsPSEwLG89WzAsMSwyLDQsOCwxNiwzMiw2NCwxMjgsMjcsNTRdO2Zvcih2YXIgZT1uZXcgQXJyYXkoMjU2KSx0PTA7dDwxMjg7Kyt0KWVbdF09dDw8MSxlW3QrMTI4XT10KzEyODw8MV4yODM7aT1uZXcgQXJyYXkoMjU2KSxzPW5ldyBBcnJheSgyNTYpLGM9bmV3IEFycmF5KDQpLHU9bmV3IEFycmF5KDQpO2Zvcih0PTA7dDw0OysrdCljW3RdPW5ldyBBcnJheSgyNTYpLHVbdF09bmV3IEFycmF5KDI1Nik7dmFyIHIsYSxuLHAsZixoLGQseT0wLGc9MDtmb3IodD0wO3Q8MjU2OysrdCl7cD0ocD1nXmc8PDFeZzw8Ml5nPDwzXmc8PDQpPj44XjI1NSZwXjk5LGlbeV09cCxzW3BdPXksaD0oZj1lW3BdKTw8MjRecDw8MTZecDw8OF5wXmYsZD0oKHI9ZVt5XSleKGE9ZVtyXSleKG49ZVthXSkpPDwyNF4oeV5uKTw8MTZeKHleYV5uKTw8OF55XnJebjtmb3IodmFyIG09MDttPDQ7KyttKWNbbV1beV09aCx1W21dW3BdPWQsaD1oPDwyNHxoPj4+OCxkPWQ8PDI0fGQ+Pj44OzA9PT15P3k9Zz0xOih5PXJeZVtlW2Vbcl5uXV1dLGdePWVbZVtnXV0pfX1mdW5jdGlvbiBmKGUsdCl7Zm9yKHZhciByLGE9ZS5zbGljZSgwKSxuPTEscz1hLmxlbmd0aCxjPTQqKHMrNisxKSxsPXM7bDxjOysrbClyPWFbbC0xXSxsJXM9PTA/KHI9aVtyPj4+MTYmMjU1XTw8MjReaVtyPj4+OCYyNTVdPDwxNl5pWzI1NSZyXTw8OF5pW3I+Pj4yNF1eb1tuXTw8MjQsbisrKTpzPjYmJmwlcz09NCYmKHI9aVtyPj4+MjRdPDwyNF5pW3I+Pj4xNiYyNTVdPDwxNl5pW3I+Pj44JjI1NV08PDheaVsyNTUmcl0pLGFbbF09YVtsLXNdXnI7aWYodCl7Zm9yKHZhciBwLGY9dVswXSxoPXVbMV0sZD11WzJdLHk9dVszXSxnPWEuc2xpY2UoMCksbT0obD0wLChjPWEubGVuZ3RoKS00KTtsPGM7bCs9NCxtLT00KWlmKDA9PT1sfHxsPT09Yy00KWdbbF09YVttXSxnW2wrMV09YVttKzNdLGdbbCsyXT1hW20rMl0sZ1tsKzNdPWFbbSsxXTtlbHNlIGZvcih2YXIgdj0wO3Y8NDsrK3YpcD1hW20rdl0sZ1tsKygzJi12KV09ZltpW3A+Pj4yNF1dXmhbaVtwPj4+MTYmMjU1XV1eZFtpW3A+Pj44JjI1NV1dXnlbaVsyNTUmcF1dO2E9Z31yZXR1cm4gYX1mdW5jdGlvbiBoKGUsdCxyLGEpe3ZhciBuLG8sbCxwLGYsaCxkLHksZyxtLHYsQyxFPWUubGVuZ3RoLzQtMTthPyhuPXVbMF0sbz11WzFdLGw9dVsyXSxwPXVbM10sZj1zKToobj1jWzBdLG89Y1sxXSxsPWNbMl0scD1jWzNdLGY9aSksaD10WzBdXmVbMF0sZD10W2E/MzoxXV5lWzFdLHk9dFsyXV5lWzJdLGc9dFthPzE6M11eZVszXTtmb3IodmFyIFM9MyxUPTE7VDxFOysrVCltPW5baD4+PjI0XV5vW2Q+Pj4xNiYyNTVdXmxbeT4+PjgmMjU1XV5wWzI1NSZnXV5lWysrU10sdj1uW2Q+Pj4yNF1eb1t5Pj4+MTYmMjU1XV5sW2c+Pj44JjI1NV1ecFsyNTUmaF1eZVsrK1NdLEM9blt5Pj4+MjRdXm9bZz4+PjE2JjI1NV1ebFtoPj4+OCYyNTVdXnBbMjU1JmRdXmVbKytTXSxnPW5bZz4+PjI0XV5vW2g+Pj4xNiYyNTVdXmxbZD4+PjgmMjU1XV5wWzI1NSZ5XV5lWysrU10saD1tLGQ9dix5PUM7clswXT1mW2g+Pj4yNF08PDI0XmZbZD4+PjE2JjI1NV08PDE2XmZbeT4+PjgmMjU1XTw8OF5mWzI1NSZnXV5lWysrU10sclthPzM6MV09ZltkPj4+MjRdPDwyNF5mW3k+Pj4xNiYyNTVdPDwxNl5mW2c+Pj44JjI1NV08PDheZlsyNTUmaF1eZVsrK1NdLHJbMl09Zlt5Pj4+MjRdPDwyNF5mW2c+Pj4xNiYyNTVdPDwxNl5mW2g+Pj44JjI1NV08PDheZlsyNTUmZF1eZVsrK1NdLHJbYT8xOjNdPWZbZz4+PjI0XTw8MjReZltoPj4+MTYmMjU1XTw8MTZeZltkPj4+OCYyNTVdPDw4XmZbMjU1JnldXmVbKytTXX1mdW5jdGlvbiBkKGUpe3ZhciB0LHI9IkFFUy0iKygoZT1lfHx7fSkubW9kZXx8IkNCQyIpLnRvVXBwZXJDYXNlKCksbj0odD1lLmRlY3J5cHQ/YS5jaXBoZXIuY3JlYXRlRGVjaXBoZXIocixlLmtleSk6YS5jaXBoZXIuY3JlYXRlQ2lwaGVyKHIsZS5rZXkpKS5zdGFydDtyZXR1cm4gdC5zdGFydD1mdW5jdGlvbihlLHIpe3ZhciBpPW51bGw7ciBpbnN0YW5jZW9mIGEudXRpbC5CeXRlQnVmZmVyJiYoaT1yLHI9e30pLChyPXJ8fHt9KS5vdXRwdXQ9aSxyLml2PWUsbi5jYWxsKHQscil9LHR9fSxmdW5jdGlvbihlLHQscil7dmFyIGE9cigwKTthLnBraT1hLnBraXx8e307dmFyIG49ZS5leHBvcnRzPWEucGtpLm9pZHM9YS5vaWRzPWEub2lkc3x8e307ZnVuY3Rpb24gaShlLHQpe25bZV09dCxuW3RdPWV9ZnVuY3Rpb24gcyhlLHQpe25bZV09dH1pKCIxLjIuODQwLjExMzU0OS4xLjEuMSIsInJzYUVuY3J5cHRpb24iKSxpKCIxLjIuODQwLjExMzU0OS4xLjEuNCIsIm1kNVdpdGhSU0FFbmNyeXB0aW9uIiksaSgiMS4yLjg0MC4xMTM1NDkuMS4xLjUiLCJzaGExV2l0aFJTQUVuY3J5cHRpb24iKSxpKCIxLjIuODQwLjExMzU0OS4xLjEuNyIsIlJTQUVTLU9BRVAiKSxpKCIxLjIuODQwLjExMzU0OS4xLjEuOCIsIm1nZjEiKSxpKCIxLjIuODQwLjExMzU0OS4xLjEuOSIsInBTcGVjaWZpZWQiKSxpKCIxLjIuODQwLjExMzU0OS4xLjEuMTAiLCJSU0FTU0EtUFNTIiksaSgiMS4yLjg0MC4xMTM1NDkuMS4xLjExIiwic2hhMjU2V2l0aFJTQUVuY3J5cHRpb24iKSxpKCIxLjIuODQwLjExMzU0OS4xLjEuMTIiLCJzaGEzODRXaXRoUlNBRW5jcnlwdGlvbiIpLGkoIjEuMi44NDAuMTEzNTQ5LjEuMS4xMyIsInNoYTUxMldpdGhSU0FFbmNyeXB0aW9uIiksaSgiMS4zLjEwMS4xMTIiLCJFZERTQTI1NTE5IiksaSgiMS4yLjg0MC4xMDA0MC40LjMiLCJkc2Etd2l0aC1zaGExIiksaSgiMS4zLjE0LjMuMi43IiwiZGVzQ0JDIiksaSgiMS4zLjE0LjMuMi4yNiIsInNoYTEiKSxpKCIyLjE2Ljg0MC4xLjEwMS4zLjQuMi4xIiwic2hhMjU2IiksaSgiMi4xNi44NDAuMS4xMDEuMy40LjIuMiIsInNoYTM4NCIpLGkoIjIuMTYuODQwLjEuMTAxLjMuNC4yLjMiLCJzaGE1MTIiKSxpKCIxLjIuODQwLjExMzU0OS4yLjUiLCJtZDUiKSxpKCIxLjIuODQwLjExMzU0OS4xLjcuMSIsImRhdGEiKSxpKCIxLjIuODQwLjExMzU0OS4xLjcuMiIsInNpZ25lZERhdGEiKSxpKCIxLjIuODQwLjExMzU0OS4xLjcuMyIsImVudmVsb3BlZERhdGEiKSxpKCIxLjIuODQwLjExMzU0OS4xLjcuNCIsInNpZ25lZEFuZEVudmVsb3BlZERhdGEiKSxpKCIxLjIuODQwLjExMzU0OS4xLjcuNSIsImRpZ2VzdGVkRGF0YSIpLGkoIjEuMi44NDAuMTEzNTQ5LjEuNy42IiwiZW5jcnlwdGVkRGF0YSIpLGkoIjEuMi44NDAuMTEzNTQ5LjEuOS4xIiwiZW1haWxBZGRyZXNzIiksaSgiMS4yLjg0MC4xMTM1NDkuMS45LjIiLCJ1bnN0cnVjdHVyZWROYW1lIiksaSgiMS4yLjg0MC4xMTM1NDkuMS45LjMiLCJjb250ZW50VHlwZSIpLGkoIjEuMi44NDAuMTEzNTQ5LjEuOS40IiwibWVzc2FnZURpZ2VzdCIpLGkoIjEuMi44NDAuMTEzNTQ5LjEuOS41Iiwic2lnbmluZ1RpbWUiKSxpKCIxLjIuODQwLjExMzU0OS4xLjkuNiIsImNvdW50ZXJTaWduYXR1cmUiKSxpKCIxLjIuODQwLjExMzU0OS4xLjkuNyIsImNoYWxsZW5nZVBhc3N3b3JkIiksaSgiMS4yLjg0MC4xMTM1NDkuMS45LjgiLCJ1bnN0cnVjdHVyZWRBZGRyZXNzIiksaSgiMS4yLjg0MC4xMTM1NDkuMS45LjE0IiwiZXh0ZW5zaW9uUmVxdWVzdCIpLGkoIjEuMi44NDAuMTEzNTQ5LjEuOS4yMCIsImZyaWVuZGx5TmFtZSIpLGkoIjEuMi44NDAuMTEzNTQ5LjEuOS4yMSIsImxvY2FsS2V5SWQiKSxpKCIxLjIuODQwLjExMzU0OS4xLjkuMjIuMSIsIng1MDlDZXJ0aWZpY2F0ZSIpLGkoIjEuMi44NDAuMTEzNTQ5LjEuMTIuMTAuMS4xIiwia2V5QmFnIiksaSgiMS4yLjg0MC4xMTM1NDkuMS4xMi4xMC4xLjIiLCJwa2NzOFNocm91ZGVkS2V5QmFnIiksaSgiMS4yLjg0MC4xMTM1NDkuMS4xMi4xMC4xLjMiLCJjZXJ0QmFnIiksaSgiMS4yLjg0MC4xMTM1NDkuMS4xMi4xMC4xLjQiLCJjcmxCYWciKSxpKCIxLjIuODQwLjExMzU0OS4xLjEyLjEwLjEuNSIsInNlY3JldEJhZyIpLGkoIjEuMi44NDAuMTEzNTQ5LjEuMTIuMTAuMS42Iiwic2FmZUNvbnRlbnRzQmFnIiksaSgiMS4yLjg0MC4xMTM1NDkuMS41LjEzIiwicGtjczVQQkVTMiIpLGkoIjEuMi44NDAuMTEzNTQ5LjEuNS4xMiIsInBrY3M1UEJLREYyIiksaSgiMS4yLjg0MC4xMTM1NDkuMS4xMi4xLjEiLCJwYmVXaXRoU0hBQW5kMTI4Qml0UkM0IiksaSgiMS4yLjg0MC4xMTM1NDkuMS4xMi4xLjIiLCJwYmVXaXRoU0hBQW5kNDBCaXRSQzQiKSxpKCIxLjIuODQwLjExMzU0OS4xLjEyLjEuMyIsInBiZVdpdGhTSEFBbmQzLUtleVRyaXBsZURFUy1DQkMiKSxpKCIxLjIuODQwLjExMzU0OS4xLjEyLjEuNCIsInBiZVdpdGhTSEFBbmQyLUtleVRyaXBsZURFUy1DQkMiKSxpKCIxLjIuODQwLjExMzU0OS4xLjEyLjEuNSIsInBiZVdpdGhTSEFBbmQxMjhCaXRSQzItQ0JDIiksaSgiMS4yLjg0MC4xMTM1NDkuMS4xMi4xLjYiLCJwYmV3aXRoU0hBQW5kNDBCaXRSQzItQ0JDIiksaSgiMS4yLjg0MC4xMTM1NDkuMi43IiwiaG1hY1dpdGhTSEExIiksaSgiMS4yLjg0MC4xMTM1NDkuMi44IiwiaG1hY1dpdGhTSEEyMjQiKSxpKCIxLjIuODQwLjExMzU0OS4yLjkiLCJobWFjV2l0aFNIQTI1NiIpLGkoIjEuMi44NDAuMTEzNTQ5LjIuMTAiLCJobWFjV2l0aFNIQTM4NCIpLGkoIjEuMi44NDAuMTEzNTQ5LjIuMTEiLCJobWFjV2l0aFNIQTUxMiIpLGkoIjEuMi44NDAuMTEzNTQ5LjMuNyIsImRlcy1FREUzLUNCQyIpLGkoIjIuMTYuODQwLjEuMTAxLjMuNC4xLjIiLCJhZXMxMjgtQ0JDIiksaSgiMi4xNi44NDAuMS4xMDEuMy40LjEuMjIiLCJhZXMxOTItQ0JDIiksaSgiMi4xNi44NDAuMS4xMDEuMy40LjEuNDIiLCJhZXMyNTYtQ0JDIiksaSgiMi41LjQuMyIsImNvbW1vbk5hbWUiKSxpKCIyLjUuNC41Iiwic2VyaWFsTmFtZSIpLGkoIjIuNS40LjYiLCJjb3VudHJ5TmFtZSIpLGkoIjIuNS40LjciLCJsb2NhbGl0eU5hbWUiKSxpKCIyLjUuNC44Iiwic3RhdGVPclByb3ZpbmNlTmFtZSIpLGkoIjIuNS40LjkiLCJzdHJlZXRBZGRyZXNzIiksaSgiMi41LjQuMTAiLCJvcmdhbml6YXRpb25OYW1lIiksaSgiMi41LjQuMTEiLCJvcmdhbml6YXRpb25hbFVuaXROYW1lIiksaSgiMi41LjQuMTMiLCJkZXNjcmlwdGlvbiIpLGkoIjIuNS40LjE1IiwiYnVzaW5lc3NDYXRlZ29yeSIpLGkoIjIuNS40LjE3IiwicG9zdGFsQ29kZSIpLGkoIjEuMy42LjEuNC4xLjMxMS42MC4yLjEuMiIsImp1cmlzZGljdGlvbk9mSW5jb3Jwb3JhdGlvblN0YXRlT3JQcm92aW5jZU5hbWUiKSxpKCIxLjMuNi4xLjQuMS4zMTEuNjAuMi4xLjMiLCJqdXJpc2RpY3Rpb25PZkluY29ycG9yYXRpb25Db3VudHJ5TmFtZSIpLGkoIjIuMTYuODQwLjEuMTEzNzMwLjEuMSIsIm5zQ2VydFR5cGUiKSxpKCIyLjE2Ljg0MC4xLjExMzczMC4xLjEzIiwibnNDb21tZW50IikscygiMi41LjI5LjEiLCJhdXRob3JpdHlLZXlJZGVudGlmaWVyIikscygiMi41LjI5LjIiLCJrZXlBdHRyaWJ1dGVzIikscygiMi41LjI5LjMiLCJjZXJ0aWZpY2F0ZVBvbGljaWVzIikscygiMi41LjI5LjQiLCJrZXlVc2FnZVJlc3RyaWN0aW9uIikscygiMi41LjI5LjUiLCJwb2xpY3lNYXBwaW5nIikscygiMi41LjI5LjYiLCJzdWJ0cmVlc0NvbnN0cmFpbnQiKSxzKCIyLjUuMjkuNyIsInN1YmplY3RBbHROYW1lIikscygiMi41LjI5LjgiLCJpc3N1ZXJBbHROYW1lIikscygiMi41LjI5LjkiLCJzdWJqZWN0RGlyZWN0b3J5QXR0cmlidXRlcyIpLHMoIjIuNS4yOS4xMCIsImJhc2ljQ29uc3RyYWludHMiKSxzKCIyLjUuMjkuMTEiLCJuYW1lQ29uc3RyYWludHMiKSxzKCIyLjUuMjkuMTIiLCJwb2xpY3lDb25zdHJhaW50cyIpLHMoIjIuNS4yOS4xMyIsImJhc2ljQ29uc3RyYWludHMiKSxpKCIyLjUuMjkuMTQiLCJzdWJqZWN0S2V5SWRlbnRpZmllciIpLGkoIjIuNS4yOS4xNSIsImtleVVzYWdlIikscygiMi41LjI5LjE2IiwicHJpdmF0ZUtleVVzYWdlUGVyaW9kIiksaSgiMi41LjI5LjE3Iiwic3ViamVjdEFsdE5hbWUiKSxpKCIyLjUuMjkuMTgiLCJpc3N1ZXJBbHROYW1lIiksaSgiMi41LjI5LjE5IiwiYmFzaWNDb25zdHJhaW50cyIpLHMoIjIuNS4yOS4yMCIsImNSTE51bWJlciIpLHMoIjIuNS4yOS4yMSIsImNSTFJlYXNvbiIpLHMoIjIuNS4yOS4yMiIsImV4cGlyYXRpb25EYXRlIikscygiMi41LjI5LjIzIiwiaW5zdHJ1Y3Rpb25Db2RlIikscygiMi41LjI5LjI0IiwiaW52YWxpZGl0eURhdGUiKSxzKCIyLjUuMjkuMjUiLCJjUkxEaXN0cmlidXRpb25Qb2ludHMiKSxzKCIyLjUuMjkuMjYiLCJpc3N1aW5nRGlzdHJpYnV0aW9uUG9pbnQiKSxzKCIyLjUuMjkuMjciLCJkZWx0YUNSTEluZGljYXRvciIpLHMoIjIuNS4yOS4yOCIsImlzc3VpbmdEaXN0cmlidXRpb25Qb2ludCIpLHMoIjIuNS4yOS4yOSIsImNlcnRpZmljYXRlSXNzdWVyIikscygiMi41LjI5LjMwIiwibmFtZUNvbnN0cmFpbnRzIiksaSgiMi41LjI5LjMxIiwiY1JMRGlzdHJpYnV0aW9uUG9pbnRzIiksaSgiMi41LjI5LjMyIiwiY2VydGlmaWNhdGVQb2xpY2llcyIpLHMoIjIuNS4yOS4zMyIsInBvbGljeU1hcHBpbmdzIikscygiMi41LjI5LjM0IiwicG9saWN5Q29uc3RyYWludHMiKSxpKCIyLjUuMjkuMzUiLCJhdXRob3JpdHlLZXlJZGVudGlmaWVyIikscygiMi41LjI5LjM2IiwicG9saWN5Q29uc3RyYWludHMiKSxpKCIyLjUuMjkuMzciLCJleHRLZXlVc2FnZSIpLHMoIjIuNS4yOS40NiIsImZyZXNoZXN0Q1JMIikscygiMi41LjI5LjU0IiwiaW5oaWJpdEFueVBvbGljeSIpLGkoIjEuMy42LjEuNC4xLjExMTI5LjIuNC4yIiwidGltZXN0YW1wTGlzdCIpLGkoIjEuMy42LjEuNS41LjcuMS4xIiwiYXV0aG9yaXR5SW5mb0FjY2VzcyIpLGkoIjEuMy42LjEuNS41LjcuMy4xIiwic2VydmVyQXV0aCIpLGkoIjEuMy42LjEuNS41LjcuMy4yIiwiY2xpZW50QXV0aCIpLGkoIjEuMy42LjEuNS41LjcuMy4zIiwiY29kZVNpZ25pbmciKSxpKCIxLjMuNi4xLjUuNS43LjMuNCIsImVtYWlsUHJvdGVjdGlvbiIpLGkoIjEuMy42LjEuNS41LjcuMy44IiwidGltZVN0YW1waW5nIil9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO3IoMSk7dmFyIG49ZS5leHBvcnRzPWEucGVtPWEucGVtfHx7fTtmdW5jdGlvbiBpKGUpe2Zvcih2YXIgdD1lLm5hbWUrIjogIixyPVtdLGE9ZnVuY3Rpb24oZSx0KXtyZXR1cm4iICIrdH0sbj0wO248ZS52YWx1ZXMubGVuZ3RoOysrbilyLnB1c2goZS52YWx1ZXNbbl0ucmVwbGFjZSgvXihcUytcclxuKS8sYSkpO3QrPXIuam9pbigiLCIpKyJcclxuIjt2YXIgaT0wLHM9LTE7Zm9yKG49MDtuPHQubGVuZ3RoOysrbiwrK2kpaWYoaT42NSYmLTEhPT1zKXt2YXIgbz10W3NdOyIsIj09PW8/KCsrcyx0PXQuc3Vic3RyKDAscykrIlxyXG4gIit0LnN1YnN0cihzKSk6dD10LnN1YnN0cigwLHMpKyJcclxuIitvK3Quc3Vic3RyKHMrMSksaT1uLXMtMSxzPS0xLCsrbn1lbHNlIiAiIT09dFtuXSYmIlx0IiE9PXRbbl0mJiIsIiE9PXRbbl18fChzPW4pO3JldHVybiB0fWZ1bmN0aW9uIHMoZSl7cmV0dXJuIGUucmVwbGFjZSgvXlxzKy8sIiIpfW4uZW5jb2RlPWZ1bmN0aW9uKGUsdCl7dD10fHx7fTt2YXIgcixuPSItLS0tLUJFR0lOICIrZS50eXBlKyItLS0tLVxyXG4iO2lmKGUucHJvY1R5cGUmJihuKz1pKHI9e25hbWU6IlByb2MtVHlwZSIsdmFsdWVzOltTdHJpbmcoZS5wcm9jVHlwZS52ZXJzaW9uKSxlLnByb2NUeXBlLnR5cGVdfSkpLGUuY29udGVudERvbWFpbiYmKG4rPWkocj17bmFtZToiQ29udGVudC1Eb21haW4iLHZhbHVlczpbZS5jb250ZW50RG9tYWluXX0pKSxlLmRla0luZm8mJihyPXtuYW1lOiJERUstSW5mbyIsdmFsdWVzOltlLmRla0luZm8uYWxnb3JpdGhtXX0sZS5kZWtJbmZvLnBhcmFtZXRlcnMmJnIudmFsdWVzLnB1c2goZS5kZWtJbmZvLnBhcmFtZXRlcnMpLG4rPWkocikpLGUuaGVhZGVycylmb3IodmFyIHM9MDtzPGUuaGVhZGVycy5sZW5ndGg7KytzKW4rPWkoZS5oZWFkZXJzW3NdKTtyZXR1cm4gZS5wcm9jVHlwZSYmKG4rPSJcclxuIiksbis9YS51dGlsLmVuY29kZTY0KGUuYm9keSx0Lm1heGxpbmV8fDY0KSsiXHJcbiIsbis9Ii0tLS0tRU5EICIrZS50eXBlKyItLS0tLVxyXG4ifSxuLmRlY29kZT1mdW5jdGlvbihlKXtmb3IodmFyIHQscj1bXSxuPS9ccyotLS0tLUJFR0lOIChbQS1aMC05LSBdKyktLS0tLVxyP1xuPyhbXHgyMS1ceDdlXHNdKz8oPzpccj9cblxyP1xuKSk/KFs6QS1aYS16MC05K1wvPVxzXSs/KS0tLS0tRU5EIFwxLS0tLS0vZyxpPS8oW1x4MjEtXHg3ZV0rKTpccyooW1x4MjEtXHg3ZVxzXjpdKykvLG89L1xyP1xuLzt0PW4uZXhlYyhlKTspe3ZhciBjPXt0eXBlOnRbMV0scHJvY1R5cGU6bnVsbCxjb250ZW50RG9tYWluOm51bGwsZGVrSW5mbzpudWxsLGhlYWRlcnM6W10sYm9keTphLnV0aWwuZGVjb2RlNjQodFszXSl9O2lmKHIucHVzaChjKSx0WzJdKXtmb3IodmFyIHU9dFsyXS5zcGxpdChvKSxsPTA7dCYmbDx1Lmxlbmd0aDspe2Zvcih2YXIgcD11W2xdLnJlcGxhY2UoL1xzKyQvLCIiKSxmPWwrMTtmPHUubGVuZ3RoOysrZil7dmFyIGg9dVtmXTtpZighL1xzLy50ZXN0KGhbMF0pKWJyZWFrO3ArPWgsbD1mfWlmKHQ9cC5tYXRjaChpKSl7Zm9yKHZhciBkPXtuYW1lOnRbMV0sdmFsdWVzOltdfSx5PXRbMl0uc3BsaXQoIiwiKSxnPTA7Zzx5Lmxlbmd0aDsrK2cpZC52YWx1ZXMucHVzaChzKHlbZ10pKTtpZihjLnByb2NUeXBlKWlmKGMuY29udGVudERvbWFpbnx8IkNvbnRlbnQtRG9tYWluIiE9PWQubmFtZSlpZihjLmRla0luZm98fCJERUstSW5mbyIhPT1kLm5hbWUpYy5oZWFkZXJzLnB1c2goZCk7ZWxzZXtpZigwPT09ZC52YWx1ZXMubGVuZ3RoKXRocm93IG5ldyBFcnJvcignSW52YWxpZCBQRU0gZm9ybWF0dGVkIG1lc3NhZ2UuIFRoZSAiREVLLUluZm8iIGhlYWRlciBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIHN1YmZpZWxkLicpO2MuZGVrSW5mbz17YWxnb3JpdGhtOnlbMF0scGFyYW1ldGVyczp5WzFdfHxudWxsfX1lbHNlIGMuY29udGVudERvbWFpbj15WzBdfHwiIjtlbHNle2lmKCJQcm9jLVR5cGUiIT09ZC5uYW1lKXRocm93IG5ldyBFcnJvcignSW52YWxpZCBQRU0gZm9ybWF0dGVkIG1lc3NhZ2UuIFRoZSBmaXJzdCBlbmNhcHN1bGF0ZWQgaGVhZGVyIG11c3QgYmUgIlByb2MtVHlwZSIuJyk7aWYoMiE9PWQudmFsdWVzLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgUEVNIGZvcm1hdHRlZCBtZXNzYWdlLiBUaGUgIlByb2MtVHlwZSIgaGVhZGVyIG11c3QgaGF2ZSB0d28gc3ViZmllbGRzLicpO2MucHJvY1R5cGU9e3ZlcnNpb246eVswXSx0eXBlOnlbMV19fX0rK2x9aWYoIkVOQ1JZUFRFRCI9PT1jLnByb2NUeXBlJiYhYy5kZWtJbmZvKXRocm93IG5ldyBFcnJvcignSW52YWxpZCBQRU0gZm9ybWF0dGVkIG1lc3NhZ2UuIFRoZSAiREVLLUluZm8iIGhlYWRlciBtdXN0IGJlIHByZXNlbnQgaWYgIlByb2MtVHlwZSIgaXMgIkVOQ1JZUFRFRCIuJyl9fWlmKDA9PT1yLmxlbmd0aCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgUEVNIGZvcm1hdHRlZCBtZXNzYWdlLiIpO3JldHVybiByfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXIoMCk7cig0KSxyKDEpLChlLmV4cG9ydHM9YS5obWFjPWEuaG1hY3x8e30pLmNyZWF0ZT1mdW5jdGlvbigpe3ZhciBlPW51bGwsdD1udWxsLHI9bnVsbCxuPW51bGwsaT17c3RhcnQ6ZnVuY3Rpb24oaSxzKXtpZihudWxsIT09aSlpZigic3RyaW5nIj09dHlwZW9mIGkpe2lmKCEoKGk9aS50b0xvd2VyQ2FzZSgpKWluIGEubWQuYWxnb3JpdGhtcykpdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGhhc2ggYWxnb3JpdGhtICInK2krJyInKTt0PWEubWQuYWxnb3JpdGhtc1tpXS5jcmVhdGUoKX1lbHNlIHQ9aTtpZihudWxsPT09cylzPWU7ZWxzZXtpZigic3RyaW5nIj09dHlwZW9mIHMpcz1hLnV0aWwuY3JlYXRlQnVmZmVyKHMpO2Vsc2UgaWYoYS51dGlsLmlzQXJyYXkocykpe3ZhciBvPXM7cz1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7Zm9yKHZhciBjPTA7YzxvLmxlbmd0aDsrK2Mpcy5wdXRCeXRlKG9bY10pfXZhciB1PXMubGVuZ3RoKCk7dT50LmJsb2NrTGVuZ3RoJiYodC5zdGFydCgpLHQudXBkYXRlKHMuYnl0ZXMoKSkscz10LmRpZ2VzdCgpKSxyPWEudXRpbC5jcmVhdGVCdWZmZXIoKSxuPWEudXRpbC5jcmVhdGVCdWZmZXIoKSx1PXMubGVuZ3RoKCk7Zm9yKGM9MDtjPHU7KytjKXtvPXMuYXQoYyk7ci5wdXRCeXRlKDU0Xm8pLG4ucHV0Qnl0ZSg5Ml5vKX1pZih1PHQuYmxvY2tMZW5ndGgpZm9yKG89dC5ibG9ja0xlbmd0aC11LGM9MDtjPG87KytjKXIucHV0Qnl0ZSg1NCksbi5wdXRCeXRlKDkyKTtlPXMscj1yLmJ5dGVzKCksbj1uLmJ5dGVzKCl9dC5zdGFydCgpLHQudXBkYXRlKHIpfSx1cGRhdGU6ZnVuY3Rpb24oZSl7dC51cGRhdGUoZSl9LGdldE1hYzpmdW5jdGlvbigpe3ZhciBlPXQuZGlnZXN0KCkuYnl0ZXMoKTtyZXR1cm4gdC5zdGFydCgpLHQudXBkYXRlKG4pLHQudXBkYXRlKGUpLHQuZGlnZXN0KCl9fTtyZXR1cm4gaS5kaWdlc3Q9aS5nZXRNYWMsaX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO3IoNCkscigxKTt2YXIgbj1lLmV4cG9ydHM9YS5zaGExPWEuc2hhMXx8e307YS5tZC5zaGExPWEubWQuYWxnb3JpdGhtcy5zaGExPW4sbi5jcmVhdGU9ZnVuY3Rpb24oKXtzfHwoaT1TdHJpbmcuZnJvbUNoYXJDb2RlKDEyOCksaSs9YS51dGlsLmZpbGxTdHJpbmcoU3RyaW5nLmZyb21DaGFyQ29kZSgwKSw2NCkscz0hMCk7dmFyIGU9bnVsbCx0PWEudXRpbC5jcmVhdGVCdWZmZXIoKSxyPW5ldyBBcnJheSg4MCksbj17YWxnb3JpdGhtOiJzaGExIixibG9ja0xlbmd0aDo2NCxkaWdlc3RMZW5ndGg6MjAsbWVzc2FnZUxlbmd0aDowLGZ1bGxNZXNzYWdlTGVuZ3RoOm51bGwsbWVzc2FnZUxlbmd0aFNpemU6OCxzdGFydDpmdW5jdGlvbigpe24ubWVzc2FnZUxlbmd0aD0wLG4uZnVsbE1lc3NhZ2VMZW5ndGg9bi5tZXNzYWdlTGVuZ3RoNjQ9W107Zm9yKHZhciByPW4ubWVzc2FnZUxlbmd0aFNpemUvNCxpPTA7aTxyOysraSluLmZ1bGxNZXNzYWdlTGVuZ3RoLnB1c2goMCk7cmV0dXJuIHQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpLGU9e2gwOjE3MzI1ODQxOTMsaDE6NDAyMzIzMzQxNyxoMjoyNTYyMzgzMTAyLGgzOjI3MTczMzg3OCxoNDozMjg1Mzc3NTIwfSxufX07cmV0dXJuIG4uc3RhcnQoKSxuLnVwZGF0ZT1mdW5jdGlvbihpLHMpeyJ1dGY4Ij09PXMmJihpPWEudXRpbC5lbmNvZGVVdGY4KGkpKTt2YXIgYz1pLmxlbmd0aDtuLm1lc3NhZ2VMZW5ndGgrPWMsYz1bYy80Mjk0OTY3Mjk2Pj4+MCxjPj4+MF07Zm9yKHZhciB1PW4uZnVsbE1lc3NhZ2VMZW5ndGgubGVuZ3RoLTE7dT49MDstLXUpbi5mdWxsTWVzc2FnZUxlbmd0aFt1XSs9Y1sxXSxjWzFdPWNbMF0rKG4uZnVsbE1lc3NhZ2VMZW5ndGhbdV0vNDI5NDk2NzI5Nj4+PjApLG4uZnVsbE1lc3NhZ2VMZW5ndGhbdV09bi5mdWxsTWVzc2FnZUxlbmd0aFt1XT4+PjAsY1swXT1jWzFdLzQyOTQ5NjcyOTY+Pj4wO3JldHVybiB0LnB1dEJ5dGVzKGkpLG8oZSxyLHQpLCh0LnJlYWQ+MjA0OHx8MD09PXQubGVuZ3RoKCkpJiZ0LmNvbXBhY3QoKSxufSxuLmRpZ2VzdD1mdW5jdGlvbigpe3ZhciBzPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtzLnB1dEJ5dGVzKHQuYnl0ZXMoKSk7dmFyIGMsdT1uLmZ1bGxNZXNzYWdlTGVuZ3RoW24uZnVsbE1lc3NhZ2VMZW5ndGgubGVuZ3RoLTFdK24ubWVzc2FnZUxlbmd0aFNpemUmbi5ibG9ja0xlbmd0aC0xO3MucHV0Qnl0ZXMoaS5zdWJzdHIoMCxuLmJsb2NrTGVuZ3RoLXUpKTtmb3IodmFyIGw9OCpuLmZ1bGxNZXNzYWdlTGVuZ3RoWzBdLHA9MDtwPG4uZnVsbE1lc3NhZ2VMZW5ndGgubGVuZ3RoLTE7KytwKWwrPShjPTgqbi5mdWxsTWVzc2FnZUxlbmd0aFtwKzFdKS80Mjk0OTY3Mjk2Pj4+MCxzLnB1dEludDMyKGw+Pj4wKSxsPWM+Pj4wO3MucHV0SW50MzIobCk7dmFyIGY9e2gwOmUuaDAsaDE6ZS5oMSxoMjplLmgyLGgzOmUuaDMsaDQ6ZS5oNH07byhmLHIscyk7dmFyIGg9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO3JldHVybiBoLnB1dEludDMyKGYuaDApLGgucHV0SW50MzIoZi5oMSksaC5wdXRJbnQzMihmLmgyKSxoLnB1dEludDMyKGYuaDMpLGgucHV0SW50MzIoZi5oNCksaH0sbn07dmFyIGk9bnVsbCxzPSExO2Z1bmN0aW9uIG8oZSx0LHIpe2Zvcih2YXIgYSxuLGkscyxvLGMsdSxsPXIubGVuZ3RoKCk7bD49NjQ7KXtmb3Iobj1lLmgwLGk9ZS5oMSxzPWUuaDIsbz1lLmgzLGM9ZS5oNCx1PTA7dTwxNjsrK3UpYT1yLmdldEludDMyKCksdFt1XT1hLGE9KG48PDV8bj4+PjI3KSsob15pJihzXm8pKStjKzE1MTg1MDAyNDkrYSxjPW8sbz1zLHM9KGk8PDMwfGk+Pj4yKT4+PjAsaT1uLG49YTtmb3IoO3U8MjA7Kyt1KWE9KGE9dFt1LTNdXnRbdS04XV50W3UtMTRdXnRbdS0xNl0pPDwxfGE+Pj4zMSx0W3VdPWEsYT0objw8NXxuPj4+MjcpKyhvXmkmKHNebykpK2MrMTUxODUwMDI0OSthLGM9byxvPXMscz0oaTw8MzB8aT4+PjIpPj4+MCxpPW4sbj1hO2Zvcig7dTwzMjsrK3UpYT0oYT10W3UtM11edFt1LThdXnRbdS0xNF1edFt1LTE2XSk8PDF8YT4+PjMxLHRbdV09YSxhPShuPDw1fG4+Pj4yNykrKGlec15vKStjKzE4NTk3NzUzOTMrYSxjPW8sbz1zLHM9KGk8PDMwfGk+Pj4yKT4+PjAsaT1uLG49YTtmb3IoO3U8NDA7Kyt1KWE9KGE9dFt1LTZdXnRbdS0xNl1edFt1LTI4XV50W3UtMzJdKTw8MnxhPj4+MzAsdFt1XT1hLGE9KG48PDV8bj4+PjI3KSsoaV5zXm8pK2MrMTg1OTc3NTM5MythLGM9byxvPXMscz0oaTw8MzB8aT4+PjIpPj4+MCxpPW4sbj1hO2Zvcig7dTw2MDsrK3UpYT0oYT10W3UtNl1edFt1LTE2XV50W3UtMjhdXnRbdS0zMl0pPDwyfGE+Pj4zMCx0W3VdPWEsYT0objw8NXxuPj4+MjcpKyhpJnN8byYoaV5zKSkrYysyNDAwOTU5NzA4K2EsYz1vLG89cyxzPShpPDwzMHxpPj4+Mik+Pj4wLGk9bixuPWE7Zm9yKDt1PDgwOysrdSlhPShhPXRbdS02XV50W3UtMTZdXnRbdS0yOF1edFt1LTMyXSk8PDJ8YT4+PjMwLHRbdV09YSxhPShuPDw1fG4+Pj4yNykrKGlec15vKStjKzMzOTU0Njk3ODIrYSxjPW8sbz1zLHM9KGk8PDMwfGk+Pj4yKT4+PjAsaT1uLG49YTtlLmgwPWUuaDArbnwwLGUuaDE9ZS5oMStpfDAsZS5oMj1lLmgyK3N8MCxlLmgzPWUuaDMrb3wwLGUuaDQ9ZS5oNCtjfDAsbC09NjR9fX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXIoMCk7ZnVuY3Rpb24gbihlLHQpe2EuY2lwaGVyLnJlZ2lzdGVyQWxnb3JpdGhtKGUsKGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBhLmRlcy5BbGdvcml0aG0oZSx0KX0pKX1yKDEzKSxyKDE5KSxyKDEpLGUuZXhwb3J0cz1hLmRlcz1hLmRlc3x8e30sYS5kZXMuc3RhcnRFbmNyeXB0aW5nPWZ1bmN0aW9uKGUsdCxyLGEpe3ZhciBuPWQoe2tleTplLG91dHB1dDpyLGRlY3J5cHQ6ITEsbW9kZTphfHwobnVsbD09PXQ/IkVDQiI6IkNCQyIpfSk7cmV0dXJuIG4uc3RhcnQodCksbn0sYS5kZXMuY3JlYXRlRW5jcnlwdGlvbkNpcGhlcj1mdW5jdGlvbihlLHQpe3JldHVybiBkKHtrZXk6ZSxvdXRwdXQ6bnVsbCxkZWNyeXB0OiExLG1vZGU6dH0pfSxhLmRlcy5zdGFydERlY3J5cHRpbmc9ZnVuY3Rpb24oZSx0LHIsYSl7dmFyIG49ZCh7a2V5OmUsb3V0cHV0OnIsZGVjcnlwdDohMCxtb2RlOmF8fChudWxsPT09dD8iRUNCIjoiQ0JDIil9KTtyZXR1cm4gbi5zdGFydCh0KSxufSxhLmRlcy5jcmVhdGVEZWNyeXB0aW9uQ2lwaGVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGQoe2tleTplLG91dHB1dDpudWxsLGRlY3J5cHQ6ITAsbW9kZTp0fSl9LGEuZGVzLkFsZ29yaXRobT1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXM7ci5uYW1lPWUsci5tb2RlPW5ldyB0KHtibG9ja1NpemU6OCxjaXBoZXI6e2VuY3J5cHQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaChyLl9rZXlzLGUsdCwhMSl9LGRlY3J5cHQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaChyLl9rZXlzLGUsdCwhMCl9fX0pLHIuX2luaXQ9ITF9LGEuZGVzLkFsZ29yaXRobS5wcm90b3R5cGUuaW5pdGlhbGl6ZT1mdW5jdGlvbihlKXtpZighdGhpcy5faW5pdCl7dmFyIHQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcihlLmtleSk7aWYoMD09PXRoaXMubmFtZS5pbmRleE9mKCIzREVTIikmJjI0IT09dC5sZW5ndGgoKSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgVHJpcGxlLURFUyBrZXkgc2l6ZTogIis4KnQubGVuZ3RoKCkpO3RoaXMuX2tleXM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LHI9WzAsNCw1MzY4NzA5MTIsNTM2ODcwOTE2LDY1NTM2LDY1NTQwLDUzNjkzNjQ0OCw1MzY5MzY0NTIsNTEyLDUxNiw1MzY4NzE0MjQsNTM2ODcxNDI4LDY2MDQ4LDY2MDUyLDUzNjkzNjk2MCw1MzY5MzY5NjRdLGE9WzAsMSwxMDQ4NTc2LDEwNDg1NzcsNjcxMDg4NjQsNjcxMDg4NjUsNjgxNTc0NDAsNjgxNTc0NDEsMjU2LDI1NywxMDQ4ODMyLDEwNDg4MzMsNjcxMDkxMjAsNjcxMDkxMjEsNjgxNTc2OTYsNjgxNTc2OTddLG49WzAsOCwyMDQ4LDIwNTYsMTY3NzcyMTYsMTY3NzcyMjQsMTY3NzkyNjQsMTY3NzkyNzIsMCw4LDIwNDgsMjA1NiwxNjc3NzIxNiwxNjc3NzIyNCwxNjc3OTI2NCwxNjc3OTI3Ml0saT1bMCwyMDk3MTUyLDEzNDIxNzcyOCwxMzYzMTQ4ODAsODE5MiwyMTA1MzQ0LDEzNDIyNTkyMCwxMzYzMjMwNzIsMTMxMDcyLDIyMjgyMjQsMTM0MzQ4ODAwLDEzNjQ0NTk1MiwxMzkyNjQsMjIzNjQxNiwxMzQzNTY5OTIsMTM2NDU0MTQ0XSxzPVswLDI2MjE0NCwxNiwyNjIxNjAsMCwyNjIxNDQsMTYsMjYyMTYwLDQwOTYsMjY2MjQwLDQxMTIsMjY2MjU2LDQwOTYsMjY2MjQwLDQxMTIsMjY2MjU2XSxvPVswLDEwMjQsMzIsMTA1NiwwLDEwMjQsMzIsMTA1NiwzMzU1NDQzMiwzMzU1NTQ1NiwzMzU1NDQ2NCwzMzU1NTQ4OCwzMzU1NDQzMiwzMzU1NTQ1NiwzMzU1NDQ2NCwzMzU1NTQ4OF0sYz1bMCwyNjg0MzU0NTYsNTI0Mjg4LDI2ODk1OTc0NCwyLDI2ODQzNTQ1OCw1MjQyOTAsMjY4OTU5NzQ2LDAsMjY4NDM1NDU2LDUyNDI4OCwyNjg5NTk3NDQsMiwyNjg0MzU0NTgsNTI0MjkwLDI2ODk1OTc0Nl0sdT1bMCw2NTUzNiwyMDQ4LDY3NTg0LDUzNjg3MDkxMiw1MzY5MzY0NDgsNTM2ODcyOTYwLDUzNjkzODQ5NiwxMzEwNzIsMTk2NjA4LDEzMzEyMCwxOTg2NTYsNTM3MDAxOTg0LDUzNzA2NzUyMCw1MzcwMDQwMzIsNTM3MDY5NTY4XSxsPVswLDI2MjE0NCwwLDI2MjE0NCwyLDI2MjE0NiwyLDI2MjE0NiwzMzU1NDQzMiwzMzgxNjU3NiwzMzU1NDQzMiwzMzgxNjU3NiwzMzU1NDQzNCwzMzgxNjU3OCwzMzU1NDQzNCwzMzgxNjU3OF0scD1bMCwyNjg0MzU0NTYsOCwyNjg0MzU0NjQsMCwyNjg0MzU0NTYsOCwyNjg0MzU0NjQsMTAyNCwyNjg0MzY0ODAsMTAzMiwyNjg0MzY0ODgsMTAyNCwyNjg0MzY0ODAsMTAzMiwyNjg0MzY0ODhdLGY9WzAsMzIsMCwzMiwxMDQ4NTc2LDEwNDg2MDgsMTA0ODU3NiwxMDQ4NjA4LDgxOTIsODIyNCw4MTkyLDgyMjQsMTA1Njc2OCwxMDU2ODAwLDEwNTY3NjgsMTA1NjgwMF0saD1bMCwxNjc3NzIxNiw1MTIsMTY3Nzc3MjgsMjA5NzE1MiwxODg3NDM2OCwyMDk3NjY0LDE4ODc0ODgwLDY3MTA4ODY0LDgzODg2MDgwLDY3MTA5Mzc2LDgzODg2NTkyLDY5MjA2MDE2LDg1OTgzMjMyLDY5MjA2NTI4LDg1OTgzNzQ0XSxkPVswLDQwOTYsMTM0MjE3NzI4LDEzNDIyMTgyNCw1MjQyODgsNTI4Mzg0LDEzNDc0MjAxNiwxMzQ3NDYxMTIsMTYsNDExMiwxMzQyMTc3NDQsMTM0MjIxODQwLDUyNDMwNCw1Mjg0MDAsMTM0NzQyMDMyLDEzNDc0NjEyOF0seT1bMCw0LDI1NiwyNjAsMCw0LDI1NiwyNjAsMSw1LDI1NywyNjEsMSw1LDI1NywyNjFdLGc9ZS5sZW5ndGgoKT44PzM6MSxtPVtdLHY9WzAsMCwxLDEsMSwxLDEsMSwwLDEsMSwxLDEsMSwxLDBdLEM9MCxFPTA7RTxnO0UrKyl7dmFyIFM9ZS5nZXRJbnQzMigpLFQ9ZS5nZXRJbnQzMigpO1NePSh0PTI1MjY0NTEzNSYoUz4+PjReVCkpPDw0LFNePXQ9NjU1MzUmKChUXj10KT4+Pi0xNl5TKSxTXj0odD04NTg5OTM0NTkmKFM+Pj4yXihUXj10PDwtMTYpKSk8PDIsU149dD02NTUzNSYoKFRePXQpPj4+LTE2XlMpLFNePSh0PTE0MzE2NTU3NjUmKFM+Pj4xXihUXj10PDwtMTYpKSk8PDEsU149dD0xNjcxMTkzNSYoKFRePXQpPj4+OF5TKSx0PShTXj0odD0xNDMxNjU1NzY1JihTPj4+MV4oVF49dDw8OCkpKTw8MSk8PDh8KFRePXQpPj4+MjAmMjQwLFM9VDw8MjR8VDw8OCYxNjcxMTY4MHxUPj4+OCY2NTI4MHxUPj4+MjQmMjQwLFQ9dDtmb3IodmFyIEk9MDtJPHYubGVuZ3RoOysrSSl7dltJXT8oUz1TPDwyfFM+Pj4yNixUPVQ8PDJ8VD4+PjI2KTooUz1TPDwxfFM+Pj4yNyxUPVQ8PDF8VD4+PjI3KTt2YXIgYj1yWyhTJj0tMTUpPj4+MjhdfGFbUz4+PjI0JjE1XXxuW1M+Pj4yMCYxNV18aVtTPj4+MTYmMTVdfHNbUz4+PjEyJjE1XXxvW1M+Pj44JjE1XXxjW1M+Pj40JjE1XSxBPXVbKFQmPS0xNSk+Pj4yOF18bFtUPj4+MjQmMTVdfHBbVD4+PjIwJjE1XXxmW1Q+Pj4xNiYxNV18aFtUPj4+MTImMTVdfGRbVD4+PjgmMTVdfHlbVD4+PjQmMTVdO3Q9NjU1MzUmKEE+Pj4xNl5iKSxtW0MrK109Yl50LG1bQysrXT1BXnQ8PDE2fX1yZXR1cm4gbX0odCksdGhpcy5faW5pdD0hMH19LG4oIkRFUy1FQ0IiLGEuY2lwaGVyLm1vZGVzLmVjYiksbigiREVTLUNCQyIsYS5jaXBoZXIubW9kZXMuY2JjKSxuKCJERVMtQ0ZCIixhLmNpcGhlci5tb2Rlcy5jZmIpLG4oIkRFUy1PRkIiLGEuY2lwaGVyLm1vZGVzLm9mYiksbigiREVTLUNUUiIsYS5jaXBoZXIubW9kZXMuY3RyKSxuKCIzREVTLUVDQiIsYS5jaXBoZXIubW9kZXMuZWNiKSxuKCIzREVTLUNCQyIsYS5jaXBoZXIubW9kZXMuY2JjKSxuKCIzREVTLUNGQiIsYS5jaXBoZXIubW9kZXMuY2ZiKSxuKCIzREVTLU9GQiIsYS5jaXBoZXIubW9kZXMub2ZiKSxuKCIzREVTLUNUUiIsYS5jaXBoZXIubW9kZXMuY3RyKTt2YXIgaT1bMTY4NDM3NzYsMCw2NTUzNiwxNjg0Mzc4MCwxNjg0Mjc1Niw2NjU2NCw0LDY1NTM2LDEwMjQsMTY4NDM3NzYsMTY4NDM3ODAsMTAyNCwxNjc3ODI0NCwxNjg0Mjc1NiwxNjc3NzIxNiw0LDEwMjgsMTY3NzgyNDAsMTY3NzgyNDAsNjY1NjAsNjY1NjAsMTY4NDI3NTIsMTY4NDI3NTIsMTY3NzgyNDQsNjU1NDAsMTY3NzcyMjAsMTY3NzcyMjAsNjU1NDAsMCwxMDI4LDY2NTY0LDE2Nzc3MjE2LDY1NTM2LDE2ODQzNzgwLDQsMTY4NDI3NTIsMTY4NDM3NzYsMTY3NzcyMTYsMTY3NzcyMTYsMTAyNCwxNjg0Mjc1Niw2NTUzNiw2NjU2MCwxNjc3NzIyMCwxMDI0LDQsMTY3NzgyNDQsNjY1NjQsMTY4NDM3ODAsNjU1NDAsMTY4NDI3NTIsMTY3NzgyNDQsMTY3NzcyMjAsMTAyOCw2NjU2NCwxNjg0Mzc3NiwxMDI4LDE2Nzc4MjQwLDE2Nzc4MjQwLDAsNjU1NDAsNjY1NjAsMCwxNjg0Mjc1Nl0scz1bLTIxNDY0MDIyNzIsLTIxNDc0NTA4ODAsMzI3NjgsMTA4MTM3NiwxMDQ4NTc2LDMyLC0yMTQ2NDM1MDQwLC0yMTQ3NDUwODQ4LC0yMTQ3NDgzNjE2LC0yMTQ2NDAyMjcyLC0yMTQ2NDAyMzA0LC0yMTQ3NDgzNjQ4LC0yMTQ3NDUwODgwLDEwNDg1NzYsMzIsLTIxNDY0MzUwNDAsMTA4MTM0NCwxMDQ4NjA4LC0yMTQ3NDUwODQ4LDAsLTIxNDc0ODM2NDgsMzI3NjgsMTA4MTM3NiwtMjE0NjQzNTA3MiwxMDQ4NjA4LC0yMTQ3NDgzNjE2LDAsMTA4MTM0NCwzMjgwMCwtMjE0NjQwMjMwNCwtMjE0NjQzNTA3MiwzMjgwMCwwLDEwODEzNzYsLTIxNDY0MzUwNDAsMTA0ODU3NiwtMjE0NzQ1MDg0OCwtMjE0NjQzNTA3MiwtMjE0NjQwMjMwNCwzMjc2OCwtMjE0NjQzNTA3MiwtMjE0NzQ1MDg4MCwzMiwtMjE0NjQwMjI3MiwxMDgxMzc2LDMyLDMyNzY4LC0yMTQ3NDgzNjQ4LDMyODAwLC0yMTQ2NDAyMzA0LDEwNDg1NzYsLTIxNDc0ODM2MTYsMTA0ODYwOCwtMjE0NzQ1MDg0OCwtMjE0NzQ4MzYxNiwxMDQ4NjA4LDEwODEzNDQsMCwtMjE0NzQ1MDg4MCwzMjgwMCwtMjE0NzQ4MzY0OCwtMjE0NjQzNTA0MCwtMjE0NjQwMjI3MiwxMDgxMzQ0XSxvPVs1MjAsMTM0MzQ5MzEyLDAsMTM0MzQ4ODA4LDEzNDIxODI0MCwwLDEzMTU5MiwxMzQyMTgyNDAsMTMxMDgwLDEzNDIxNzczNiwxMzQyMTc3MzYsMTMxMDcyLDEzNDM0OTMyMCwxMzEwODAsMTM0MzQ4ODAwLDUyMCwxMzQyMTc3MjgsOCwxMzQzNDkzMTIsNTEyLDEzMTU4NCwxMzQzNDg4MDAsMTM0MzQ4ODA4LDEzMTU5MiwxMzQyMTgyNDgsMTMxNTg0LDEzMTA3MiwxMzQyMTgyNDgsOCwxMzQzNDkzMjAsNTEyLDEzNDIxNzcyOCwxMzQzNDkzMTIsMTM0MjE3NzI4LDEzMTA4MCw1MjAsMTMxMDcyLDEzNDM0OTMxMiwxMzQyMTgyNDAsMCw1MTIsMTMxMDgwLDEzNDM0OTMyMCwxMzQyMTgyNDAsMTM0MjE3NzM2LDUxMiwwLDEzNDM0ODgwOCwxMzQyMTgyNDgsMTMxMDcyLDEzNDIxNzcyOCwxMzQzNDkzMjAsOCwxMzE1OTIsMTMxNTg0LDEzNDIxNzczNiwxMzQzNDg4MDAsMTM0MjE4MjQ4LDUyMCwxMzQzNDg4MDAsMTMxNTkyLDgsMTM0MzQ4ODA4LDEzMTU4NF0sYz1bODM5NjgwMSw4MzIxLDgzMjEsMTI4LDgzOTY5MjgsODM4ODczNyw4Mzg4NjA5LDgxOTMsMCw4Mzk2ODAwLDgzOTY4MDAsODM5NjkyOSwxMjksMCw4Mzg4NzM2LDgzODg2MDksMSw4MTkyLDgzODg2MDgsODM5NjgwMSwxMjgsODM4ODYwOCw4MTkzLDgzMjAsODM4ODczNywxLDgzMjAsODM4ODczNiw4MTkyLDgzOTY5MjgsODM5NjkyOSwxMjksODM4ODczNiw4Mzg4NjA5LDgzOTY4MDAsODM5NjkyOSwxMjksMCwwLDgzOTY4MDAsODMyMCw4Mzg4NzM2LDgzODg3MzcsMSw4Mzk2ODAxLDgzMjEsODMyMSwxMjgsODM5NjkyOSwxMjksMSw4MTkyLDgzODg2MDksODE5Myw4Mzk2OTI4LDgzODg3MzcsODE5Myw4MzIwLDgzODg2MDgsODM5NjgwMSwxMjgsODM4ODYwOCw4MTkyLDgzOTY5MjhdLHU9WzI1NiwzNDA3ODk3NiwzNDA3ODcyMCwxMTA3Mjk2NTEyLDUyNDI4OCwyNTYsMTA3Mzc0MTgyNCwzNDA3ODcyMCwxMDc0MjY2MzY4LDUyNDI4OCwzMzU1NDY4OCwxMDc0MjY2MzY4LDExMDcyOTY1MTIsMTEwNzgyMDU0NCw1MjQ1NDQsMTA3Mzc0MTgyNCwzMzU1NDQzMiwxMDc0MjY2MTEyLDEwNzQyNjYxMTIsMCwxMDczNzQyMDgwLDExMDc4MjA4MDAsMTEwNzgyMDgwMCwzMzU1NDY4OCwxMTA3ODIwNTQ0LDEwNzM3NDIwODAsMCwxMTA3Mjk2MjU2LDM0MDc4OTc2LDMzNTU0NDMyLDExMDcyOTYyNTYsNTI0NTQ0LDUyNDI4OCwxMTA3Mjk2NTEyLDI1NiwzMzU1NDQzMiwxMDczNzQxODI0LDM0MDc4NzIwLDExMDcyOTY1MTIsMTA3NDI2NjM2OCwzMzU1NDY4OCwxMDczNzQxODI0LDExMDc4MjA1NDQsMzQwNzg5NzYsMTA3NDI2NjM2OCwyNTYsMzM1NTQ0MzIsMTEwNzgyMDU0NCwxMTA3ODIwODAwLDUyNDU0NCwxMTA3Mjk2MjU2LDExMDc4MjA4MDAsMzQwNzg3MjAsMCwxMDc0MjY2MTEyLDExMDcyOTYyNTYsNTI0NTQ0LDMzNTU0Njg4LDEwNzM3NDIwODAsNTI0Mjg4LDAsMTA3NDI2NjExMiwzNDA3ODk3NiwxMDczNzQyMDgwXSxsPVs1MzY4NzA5MjgsNTQxMDY1MjE2LDE2Mzg0LDU0MTA4MTYxNiw1NDEwNjUyMTYsMTYsNTQxMDgxNjE2LDQxOTQzMDQsNTM2ODg3Mjk2LDQyMTA3MDQsNDE5NDMwNCw1MzY4NzA5MjgsNDE5NDMyMCw1MzY4ODcyOTYsNTM2ODcwOTEyLDE2NDAwLDAsNDE5NDMyMCw1MzY4ODczMTIsMTYzODQsNDIxMDY4OCw1MzY4ODczMTIsMTYsNTQxMDY1MjMyLDU0MTA2NTIzMiwwLDQyMTA3MDQsNTQxMDgxNjAwLDE2NDAwLDQyMTA2ODgsNTQxMDgxNjAwLDUzNjg3MDkxMiw1MzY4ODcyOTYsMTYsNTQxMDY1MjMyLDQyMTA2ODgsNTQxMDgxNjE2LDQxOTQzMDQsMTY0MDAsNTM2ODcwOTI4LDQxOTQzMDQsNTM2ODg3Mjk2LDUzNjg3MDkxMiwxNjQwMCw1MzY4NzA5MjgsNTQxMDgxNjE2LDQyMTA2ODgsNTQxMDY1MjE2LDQyMTA3MDQsNTQxMDgxNjAwLDAsNTQxMDY1MjMyLDE2LDE2Mzg0LDU0MTA2NTIxNiw0MjEwNzA0LDE2Mzg0LDQxOTQzMjAsNTM2ODg3MzEyLDAsNTQxMDgxNjAwLDUzNjg3MDkxMiw0MTk0MzIwLDUzNjg4NzMxMl0scD1bMjA5NzE1Miw2OTIwNjAxOCw2NzExMDkxNCwwLDIwNDgsNjcxMTA5MTQsMjA5OTIwMiw2OTIwODA2NCw2OTIwODA2NiwyMDk3MTUyLDAsNjcxMDg4NjYsMiw2NzEwODg2NCw2OTIwNjAxOCwyMDUwLDY3MTEwOTEyLDIwOTkyMDIsMjA5NzE1NCw2NzExMDkxMiw2NzEwODg2Niw2OTIwNjAxNiw2OTIwODA2NCwyMDk3MTU0LDY5MjA2MDE2LDIwNDgsMjA1MCw2OTIwODA2NiwyMDk5MjAwLDIsNjcxMDg4NjQsMjA5OTIwMCw2NzEwODg2NCwyMDk5MjAwLDIwOTcxNTIsNjcxMTA5MTQsNjcxMTA5MTQsNjkyMDYwMTgsNjkyMDYwMTgsMiwyMDk3MTU0LDY3MTA4ODY0LDY3MTEwOTEyLDIwOTcxNTIsNjkyMDgwNjQsMjA1MCwyMDk5MjAyLDY5MjA4MDY0LDIwNTAsNjcxMDg4NjYsNjkyMDgwNjYsNjkyMDYwMTYsMjA5OTIwMCwwLDIsNjkyMDgwNjYsMCwyMDk5MjAyLDY5MjA2MDE2LDIwNDgsNjcxMDg4NjYsNjcxMTA5MTIsMjA0OCwyMDk3MTU0XSxmPVsyNjg0Mzk2MTYsNDA5NiwyNjIxNDQsMjY4NzAxNzYwLDI2ODQzNTQ1NiwyNjg0Mzk2MTYsNjQsMjY4NDM1NDU2LDI2MjIwOCwyNjg2OTc2MDAsMjY4NzAxNzYwLDI2NjI0MCwyNjg3MDE2OTYsMjY2MzA0LDQwOTYsNjQsMjY4Njk3NjAwLDI2ODQzNTUyMCwyNjg0Mzk1NTIsNDE2MCwyNjYyNDAsMjYyMjA4LDI2ODY5NzY2NCwyNjg3MDE2OTYsNDE2MCwwLDAsMjY4Njk3NjY0LDI2ODQzNTUyMCwyNjg0Mzk1NTIsMjY2MzA0LDI2MjE0NCwyNjYzMDQsMjYyMTQ0LDI2ODcwMTY5Niw0MDk2LDY0LDI2ODY5NzY2NCw0MDk2LDI2NjMwNCwyNjg0Mzk1NTIsNjQsMjY4NDM1NTIwLDI2ODY5NzYwMCwyNjg2OTc2NjQsMjY4NDM1NDU2LDI2MjE0NCwyNjg0Mzk2MTYsMCwyNjg3MDE3NjAsMjYyMjA4LDI2ODQzNTUyMCwyNjg2OTc2MDAsMjY4NDM5NTUyLDI2ODQzOTYxNiwwLDI2ODcwMTc2MCwyNjYyNDAsMjY2MjQwLDQxNjAsNDE2MCwyNjIyMDgsMjY4NDM1NDU2LDI2ODcwMTY5Nl07ZnVuY3Rpb24gaChlLHQscixhKXt2YXIgbixoLGQ9MzI9PT1lLmxlbmd0aD8zOjk7bj0zPT09ZD9hP1szMCwtMiwtMl06WzAsMzIsMl06YT9bOTQsNjIsLTIsMzIsNjQsMiwzMCwtMiwtMl06WzAsMzIsMiw2MiwzMCwtMiw2NCw5NiwyXTt2YXIgeT10WzBdLGc9dFsxXTt5Xj0oaD0yNTI2NDUxMzUmKHk+Pj40XmcpKTw8NCx5Xj0oaD02NTUzNSYoeT4+PjE2XihnXj1oKSkpPDwxNix5Xj1oPTg1ODk5MzQ1OSYoKGdePWgpPj4+Ml55KSx5Xj1oPTE2NzExOTM1JigoZ149aDw8Mik+Pj44XnkpLHk9KHlePShoPTE0MzE2NTU3NjUmKHk+Pj4xXihnXj1oPDw4KSkpPDwxKTw8MXx5Pj4+MzEsZz0oZ149aCk8PDF8Zz4+PjMxO2Zvcih2YXIgbT0wO208ZDttKz0zKXtmb3IodmFyIHY9blttKzFdLEM9blttKzJdLEU9blttXTtFIT12O0UrPUMpe3ZhciBTPWdeZVtFXSxUPShnPj4+NHxnPDwyOCleZVtFKzFdO2g9eSx5PWcsZz1oXihzW1M+Pj4yNCY2M118Y1tTPj4+MTYmNjNdfGxbUz4+PjgmNjNdfGZbNjMmU118aVtUPj4+MjQmNjNdfG9bVD4+PjE2JjYzXXx1W1Q+Pj44JjYzXXxwWzYzJlRdKX1oPXkseT1nLGc9aH1nPWc+Pj4xfGc8PDMxLGdePWg9MTQzMTY1NTc2NSYoKHk9eT4+PjF8eTw8MzEpPj4+MV5nKSxnXj0oaD0xNjcxMTkzNSYoZz4+PjheKHlePWg8PDEpKSk8PDgsZ149KGg9ODU4OTkzNDU5JihnPj4+Ml4oeV49aCkpKTw8MixnXj1oPTY1NTM1JigoeV49aCk+Pj4xNl5nKSxnXj1oPTI1MjY0NTEzNSYoKHlePWg8PDE2KT4+PjReZykseV49aDw8NCxyWzBdPXksclsxXT1nfWZ1bmN0aW9uIGQoZSl7dmFyIHQscj0iREVTLSIrKChlPWV8fHt9KS5tb2RlfHwiQ0JDIikudG9VcHBlckNhc2UoKSxuPSh0PWUuZGVjcnlwdD9hLmNpcGhlci5jcmVhdGVEZWNpcGhlcihyLGUua2V5KTphLmNpcGhlci5jcmVhdGVDaXBoZXIocixlLmtleSkpLnN0YXJ0O3JldHVybiB0LnN0YXJ0PWZ1bmN0aW9uKGUscil7dmFyIGk9bnVsbDtyIGluc3RhbmNlb2YgYS51dGlsLkJ5dGVCdWZmZXImJihpPXIscj17fSksKHI9cnx8e30pLm91dHB1dD1pLHIuaXY9ZSxuLmNhbGwodCxyKX0sdH19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO2lmKHIoMykscigxMikscig2KSxyKDI2KSxyKDI3KSxyKDIpLHIoMSksdm9pZCAwPT09bil2YXIgbj1hLmpzYm4uQmlnSW50ZWdlcjt2YXIgaT1hLnV0aWwuaXNOb2RlanM/cigxNik6bnVsbCxzPWEuYXNuMSxvPWEudXRpbDthLnBraT1hLnBraXx8e30sZS5leHBvcnRzPWEucGtpLnJzYT1hLnJzYT1hLnJzYXx8e307dmFyIGM9YS5wa2ksdT1bNiw0LDIsNCwyLDQsNiwyXSxsPXtuYW1lOiJQcml2YXRlS2V5SW5mbyIsdGFnQ2xhc3M6cy5DbGFzcy5VTklWRVJTQUwsdHlwZTpzLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsdmFsdWU6W3tuYW1lOiJQcml2YXRlS2V5SW5mby52ZXJzaW9uIix0YWdDbGFzczpzLkNsYXNzLlVOSVZFUlNBTCx0eXBlOnMuVHlwZS5JTlRFR0VSLGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6InByaXZhdGVLZXlWZXJzaW9uIn0se25hbWU6IlByaXZhdGVLZXlJbmZvLnByaXZhdGVLZXlBbGdvcml0aG0iLHRhZ0NsYXNzOnMuQ2xhc3MuVU5JVkVSU0FMLHR5cGU6cy5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiQWxnb3JpdGhtSWRlbnRpZmllci5hbGdvcml0aG0iLHRhZ0NsYXNzOnMuQ2xhc3MuVU5JVkVSU0FMLHR5cGU6cy5UeXBlLk9JRCxjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJwcml2YXRlS2V5T2lkIn1dfSx7bmFtZToiUHJpdmF0ZUtleUluZm8iLHRhZ0NsYXNzOnMuQ2xhc3MuVU5JVkVSU0FMLHR5cGU6cy5UeXBlLk9DVEVUU1RSSU5HLGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6InByaXZhdGVLZXkifV19LHA9e25hbWU6IlJTQVByaXZhdGVLZXkiLHRhZ0NsYXNzOnMuQ2xhc3MuVU5JVkVSU0FMLHR5cGU6cy5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiUlNBUHJpdmF0ZUtleS52ZXJzaW9uIix0YWdDbGFzczpzLkNsYXNzLlVOSVZFUlNBTCx0eXBlOnMuVHlwZS5JTlRFR0VSLGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6InByaXZhdGVLZXlWZXJzaW9uIn0se25hbWU6IlJTQVByaXZhdGVLZXkubW9kdWx1cyIsdGFnQ2xhc3M6cy5DbGFzcy5VTklWRVJTQUwsdHlwZTpzLlR5cGUuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJwcml2YXRlS2V5TW9kdWx1cyJ9LHtuYW1lOiJSU0FQcml2YXRlS2V5LnB1YmxpY0V4cG9uZW50Iix0YWdDbGFzczpzLkNsYXNzLlVOSVZFUlNBTCx0eXBlOnMuVHlwZS5JTlRFR0VSLGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6InByaXZhdGVLZXlQdWJsaWNFeHBvbmVudCJ9LHtuYW1lOiJSU0FQcml2YXRlS2V5LnByaXZhdGVFeHBvbmVudCIsdGFnQ2xhc3M6cy5DbGFzcy5VTklWRVJTQUwsdHlwZTpzLlR5cGUuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJwcml2YXRlS2V5UHJpdmF0ZUV4cG9uZW50In0se25hbWU6IlJTQVByaXZhdGVLZXkucHJpbWUxIix0YWdDbGFzczpzLkNsYXNzLlVOSVZFUlNBTCx0eXBlOnMuVHlwZS5JTlRFR0VSLGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6InByaXZhdGVLZXlQcmltZTEifSx7bmFtZToiUlNBUHJpdmF0ZUtleS5wcmltZTIiLHRhZ0NsYXNzOnMuQ2xhc3MuVU5JVkVSU0FMLHR5cGU6cy5UeXBlLklOVEVHRVIsY29uc3RydWN0ZWQ6ITEsY2FwdHVyZToicHJpdmF0ZUtleVByaW1lMiJ9LHtuYW1lOiJSU0FQcml2YXRlS2V5LmV4cG9uZW50MSIsdGFnQ2xhc3M6cy5DbGFzcy5VTklWRVJTQUwsdHlwZTpzLlR5cGUuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJwcml2YXRlS2V5RXhwb25lbnQxIn0se25hbWU6IlJTQVByaXZhdGVLZXkuZXhwb25lbnQyIix0YWdDbGFzczpzLkNsYXNzLlVOSVZFUlNBTCx0eXBlOnMuVHlwZS5JTlRFR0VSLGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6InByaXZhdGVLZXlFeHBvbmVudDIifSx7bmFtZToiUlNBUHJpdmF0ZUtleS5jb2VmZmljaWVudCIsdGFnQ2xhc3M6cy5DbGFzcy5VTklWRVJTQUwsdHlwZTpzLlR5cGUuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJwcml2YXRlS2V5Q29lZmZpY2llbnQifV19LGY9e25hbWU6IlJTQVB1YmxpY0tleSIsdGFnQ2xhc3M6cy5DbGFzcy5VTklWRVJTQUwsdHlwZTpzLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsdmFsdWU6W3tuYW1lOiJSU0FQdWJsaWNLZXkubW9kdWx1cyIsdGFnQ2xhc3M6cy5DbGFzcy5VTklWRVJTQUwsdHlwZTpzLlR5cGUuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJwdWJsaWNLZXlNb2R1bHVzIn0se25hbWU6IlJTQVB1YmxpY0tleS5leHBvbmVudCIsdGFnQ2xhc3M6cy5DbGFzcy5VTklWRVJTQUwsdHlwZTpzLlR5cGUuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJwdWJsaWNLZXlFeHBvbmVudCJ9XX0saD1hLnBraS5yc2EucHVibGljS2V5VmFsaWRhdG9yPXtuYW1lOiJTdWJqZWN0UHVibGljS2V5SW5mbyIsdGFnQ2xhc3M6cy5DbGFzcy5VTklWRVJTQUwsdHlwZTpzLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsY2FwdHVyZUFzbjE6InN1YmplY3RQdWJsaWNLZXlJbmZvIix2YWx1ZTpbe25hbWU6IlN1YmplY3RQdWJsaWNLZXlJbmZvLkFsZ29yaXRobUlkZW50aWZpZXIiLHRhZ0NsYXNzOnMuQ2xhc3MuVU5JVkVSU0FMLHR5cGU6cy5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiQWxnb3JpdGhtSWRlbnRpZmllci5hbGdvcml0aG0iLHRhZ0NsYXNzOnMuQ2xhc3MuVU5JVkVSU0FMLHR5cGU6cy5UeXBlLk9JRCxjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJwdWJsaWNLZXlPaWQifV19LHtuYW1lOiJTdWJqZWN0UHVibGljS2V5SW5mby5zdWJqZWN0UHVibGljS2V5Iix0YWdDbGFzczpzLkNsYXNzLlVOSVZFUlNBTCx0eXBlOnMuVHlwZS5CSVRTVFJJTkcsY29uc3RydWN0ZWQ6ITEsdmFsdWU6W3tuYW1lOiJTdWJqZWN0UHVibGljS2V5SW5mby5zdWJqZWN0UHVibGljS2V5LlJTQVB1YmxpY0tleSIsdGFnQ2xhc3M6cy5DbGFzcy5VTklWRVJTQUwsdHlwZTpzLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsb3B0aW9uYWw6ITAsY2FwdHVyZUFzbjE6InJzYVB1YmxpY0tleSJ9XX1dfSxkPWZ1bmN0aW9uKGUpe3ZhciB0O2lmKCEoZS5hbGdvcml0aG0gaW4gYy5vaWRzKSl7dmFyIHI9bmV3IEVycm9yKCJVbmtub3duIG1lc3NhZ2UgZGlnZXN0IGFsZ29yaXRobS4iKTt0aHJvdyByLmFsZ29yaXRobT1lLmFsZ29yaXRobSxyfXQ9Yy5vaWRzW2UuYWxnb3JpdGhtXTt2YXIgYT1zLm9pZFRvRGVyKHQpLmdldEJ5dGVzKCksbj1zLmNyZWF0ZShzLkNsYXNzLlVOSVZFUlNBTCxzLlR5cGUuU0VRVUVOQ0UsITAsW10pLGk9cy5jcmVhdGUocy5DbGFzcy5VTklWRVJTQUwscy5UeXBlLlNFUVVFTkNFLCEwLFtdKTtpLnZhbHVlLnB1c2gocy5jcmVhdGUocy5DbGFzcy5VTklWRVJTQUwscy5UeXBlLk9JRCwhMSxhKSksaS52YWx1ZS5wdXNoKHMuY3JlYXRlKHMuQ2xhc3MuVU5JVkVSU0FMLHMuVHlwZS5OVUxMLCExLCIiKSk7dmFyIG89cy5jcmVhdGUocy5DbGFzcy5VTklWRVJTQUwscy5UeXBlLk9DVEVUU1RSSU5HLCExLGUuZGlnZXN0KCkuZ2V0Qnl0ZXMoKSk7cmV0dXJuIG4udmFsdWUucHVzaChpKSxuLnZhbHVlLnB1c2gobykscy50b0RlcihuKS5nZXRCeXRlcygpfSx5PWZ1bmN0aW9uKGUsdCxyKXtpZihyKXJldHVybiBlLm1vZFBvdyh0LmUsdC5uKTtpZighdC5wfHwhdC5xKXJldHVybiBlLm1vZFBvdyh0LmQsdC5uKTt2YXIgaTt0LmRQfHwodC5kUD10LmQubW9kKHQucC5zdWJ0cmFjdChuLk9ORSkpKSx0LmRRfHwodC5kUT10LmQubW9kKHQucS5zdWJ0cmFjdChuLk9ORSkpKSx0LnFJbnZ8fCh0LnFJbnY9dC5xLm1vZEludmVyc2UodC5wKSk7ZG97aT1uZXcgbihhLnV0aWwuYnl0ZXNUb0hleChhLnJhbmRvbS5nZXRCeXRlcyh0Lm4uYml0TGVuZ3RoKCkvOCkpLDE2KX13aGlsZShpLmNvbXBhcmVUbyh0Lm4pPj0wfHwhaS5nY2QodC5uKS5lcXVhbHMobi5PTkUpKTtmb3IodmFyIHM9KGU9ZS5tdWx0aXBseShpLm1vZFBvdyh0LmUsdC5uKSkubW9kKHQubikpLm1vZCh0LnApLm1vZFBvdyh0LmRQLHQucCksbz1lLm1vZCh0LnEpLm1vZFBvdyh0LmRRLHQucSk7cy5jb21wYXJlVG8obyk8MDspcz1zLmFkZCh0LnApO3ZhciBjPXMuc3VidHJhY3QobykubXVsdGlwbHkodC5xSW52KS5tb2QodC5wKS5tdWx0aXBseSh0LnEpLmFkZChvKTtyZXR1cm4gYz1jLm11bHRpcGx5KGkubW9kSW52ZXJzZSh0Lm4pKS5tb2QodC5uKX07ZnVuY3Rpb24gZyhlLHQscil7dmFyIG49YS51dGlsLmNyZWF0ZUJ1ZmZlcigpLGk9TWF0aC5jZWlsKHQubi5iaXRMZW5ndGgoKS84KTtpZihlLmxlbmd0aD5pLTExKXt2YXIgcz1uZXcgRXJyb3IoIk1lc3NhZ2UgaXMgdG9vIGxvbmcgZm9yIFBLQ1MjMSB2MS41IHBhZGRpbmcuIik7dGhyb3cgcy5sZW5ndGg9ZS5sZW5ndGgscy5tYXg9aS0xMSxzfW4ucHV0Qnl0ZSgwKSxuLnB1dEJ5dGUocik7dmFyIG8sYz1pLTMtZS5sZW5ndGg7aWYoMD09PXJ8fDE9PT1yKXtvPTA9PT1yPzA6MjU1O2Zvcih2YXIgdT0wO3U8YzsrK3Upbi5wdXRCeXRlKG8pfWVsc2UgZm9yKDtjPjA7KXt2YXIgbD0wLHA9YS5yYW5kb20uZ2V0Qnl0ZXMoYyk7Zm9yKHU9MDt1PGM7Kyt1KTA9PT0obz1wLmNoYXJDb2RlQXQodSkpPysrbDpuLnB1dEJ5dGUobyk7Yz1sfXJldHVybiBuLnB1dEJ5dGUoMCksbi5wdXRCeXRlcyhlKSxufWZ1bmN0aW9uIG0oZSx0LHIsbil7dmFyIGk9TWF0aC5jZWlsKHQubi5iaXRMZW5ndGgoKS84KSxzPWEudXRpbC5jcmVhdGVCdWZmZXIoZSksbz1zLmdldEJ5dGUoKSxjPXMuZ2V0Qnl0ZSgpO2lmKDAhPT1vfHxyJiYwIT09YyYmMSE9PWN8fCFyJiYyIT1jfHxyJiYwPT09YyYmdm9pZCAwPT09bil0aHJvdyBuZXcgRXJyb3IoIkVuY3J5cHRpb24gYmxvY2sgaXMgaW52YWxpZC4iKTt2YXIgdT0wO2lmKDA9PT1jKXt1PWktMy1uO2Zvcih2YXIgbD0wO2w8dTsrK2wpaWYoMCE9PXMuZ2V0Qnl0ZSgpKXRocm93IG5ldyBFcnJvcigiRW5jcnlwdGlvbiBibG9jayBpcyBpbnZhbGlkLiIpfWVsc2UgaWYoMT09PWMpZm9yKHU9MDtzLmxlbmd0aCgpPjE7KXtpZigyNTUhPT1zLmdldEJ5dGUoKSl7LS1zLnJlYWQ7YnJlYWt9Kyt1fWVsc2UgaWYoMj09PWMpZm9yKHU9MDtzLmxlbmd0aCgpPjE7KXtpZigwPT09cy5nZXRCeXRlKCkpey0tcy5yZWFkO2JyZWFrfSsrdX1pZigwIT09cy5nZXRCeXRlKCl8fHUhPT1pLTMtcy5sZW5ndGgoKSl0aHJvdyBuZXcgRXJyb3IoIkVuY3J5cHRpb24gYmxvY2sgaXMgaW52YWxpZC4iKTtyZXR1cm4gcy5nZXRCeXRlcygpfWZ1bmN0aW9uIHYoZSx0LHIpeyJmdW5jdGlvbiI9PXR5cGVvZiB0JiYocj10LHQ9e30pO3ZhciBpPXthbGdvcml0aG06e25hbWU6KHQ9dHx8e30pLmFsZ29yaXRobXx8IlBSSU1FSU5DIixvcHRpb25zOnt3b3JrZXJzOnQud29ya2Vyc3x8Mix3b3JrTG9hZDp0LndvcmtMb2FkfHwxMDAsd29ya2VyU2NyaXB0OnQud29ya2VyU2NyaXB0fX19O2Z1bmN0aW9uIHMoKXtvKGUucEJpdHMsKGZ1bmN0aW9uKHQsYSl7cmV0dXJuIHQ/cih0KTooZS5wPWEsbnVsbCE9PWUucT91KHQsZS5xKTp2b2lkIG8oZS5xQml0cyx1KSl9KSl9ZnVuY3Rpb24gbyhlLHQpe2EucHJpbWUuZ2VuZXJhdGVQcm9iYWJsZVByaW1lKGUsaSx0KX1mdW5jdGlvbiB1KHQsYSl7aWYodClyZXR1cm4gcih0KTtpZihlLnE9YSxlLnAuY29tcGFyZVRvKGUucSk8MCl7dmFyIGk9ZS5wO2UucD1lLnEsZS5xPWl9aWYoMCE9PWUucC5zdWJ0cmFjdChuLk9ORSkuZ2NkKGUuZSkuY29tcGFyZVRvKG4uT05FKSlyZXR1cm4gZS5wPW51bGwsdm9pZCBzKCk7aWYoMCE9PWUucS5zdWJ0cmFjdChuLk9ORSkuZ2NkKGUuZSkuY29tcGFyZVRvKG4uT05FKSlyZXR1cm4gZS5xPW51bGwsdm9pZCBvKGUucUJpdHMsdSk7aWYoZS5wMT1lLnAuc3VidHJhY3Qobi5PTkUpLGUucTE9ZS5xLnN1YnRyYWN0KG4uT05FKSxlLnBoaT1lLnAxLm11bHRpcGx5KGUucTEpLDAhPT1lLnBoaS5nY2QoZS5lKS5jb21wYXJlVG8obi5PTkUpKXJldHVybiBlLnA9ZS5xPW51bGwsdm9pZCBzKCk7aWYoZS5uPWUucC5tdWx0aXBseShlLnEpLGUubi5iaXRMZW5ndGgoKSE9PWUuYml0cylyZXR1cm4gZS5xPW51bGwsdm9pZCBvKGUucUJpdHMsdSk7dmFyIGw9ZS5lLm1vZEludmVyc2UoZS5waGkpO2Uua2V5cz17cHJpdmF0ZUtleTpjLnJzYS5zZXRQcml2YXRlS2V5KGUubixlLmUsbCxlLnAsZS5xLGwubW9kKGUucDEpLGwubW9kKGUucTEpLGUucS5tb2RJbnZlcnNlKGUucCkpLHB1YmxpY0tleTpjLnJzYS5zZXRQdWJsaWNLZXkoZS5uLGUuZSl9LHIobnVsbCxlLmtleXMpfSJwcm5nImluIHQmJihpLnBybmc9dC5wcm5nKSxzKCl9ZnVuY3Rpb24gQyhlKXt2YXIgdD1lLnRvU3RyaW5nKDE2KTt0WzBdPj0iOCImJih0PSIwMCIrdCk7dmFyIHI9YS51dGlsLmhleFRvQnl0ZXModCk7cmV0dXJuIHIubGVuZ3RoPjEmJigwPT09ci5jaGFyQ29kZUF0KDApJiYwPT0oMTI4JnIuY2hhckNvZGVBdCgxKSl8fDI1NT09PXIuY2hhckNvZGVBdCgwKSYmMTI4PT0oMTI4JnIuY2hhckNvZGVBdCgxKSkpP3Iuc3Vic3RyKDEpOnJ9ZnVuY3Rpb24gRShlKXtyZXR1cm4gZTw9MTAwPzI3OmU8PTE1MD8xODplPD0yMDA/MTU6ZTw9MjUwPzEyOmU8PTMwMD85OmU8PTM1MD84OmU8PTQwMD83OmU8PTUwMD82OmU8PTYwMD81OmU8PTgwMD80OmU8PTEyNTA/MzoyfWZ1bmN0aW9uIFMoZSl7cmV0dXJuIGEudXRpbC5pc05vZGVqcyYmImZ1bmN0aW9uIj09dHlwZW9mIGlbZV19ZnVuY3Rpb24gVChlKXtyZXR1cm4gdm9pZCAwIT09by5nbG9iYWxTY29wZSYmIm9iamVjdCI9PXR5cGVvZiBvLmdsb2JhbFNjb3BlLmNyeXB0byYmIm9iamVjdCI9PXR5cGVvZiBvLmdsb2JhbFNjb3BlLmNyeXB0by5zdWJ0bGUmJiJmdW5jdGlvbiI9PXR5cGVvZiBvLmdsb2JhbFNjb3BlLmNyeXB0by5zdWJ0bGVbZV19ZnVuY3Rpb24gSShlKXtyZXR1cm4gdm9pZCAwIT09by5nbG9iYWxTY29wZSYmIm9iamVjdCI9PXR5cGVvZiBvLmdsb2JhbFNjb3BlLm1zQ3J5cHRvJiYib2JqZWN0Ij09dHlwZW9mIG8uZ2xvYmFsU2NvcGUubXNDcnlwdG8uc3VidGxlJiYiZnVuY3Rpb24iPT10eXBlb2Ygby5nbG9iYWxTY29wZS5tc0NyeXB0by5zdWJ0bGVbZV19ZnVuY3Rpb24gYihlKXtmb3IodmFyIHQ9YS51dGlsLmhleFRvQnl0ZXMoZS50b1N0cmluZygxNikpLHI9bmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpLG49MDtuPHQubGVuZ3RoOysrbilyW25dPXQuY2hhckNvZGVBdChuKTtyZXR1cm4gcn1jLnJzYS5lbmNyeXB0PWZ1bmN0aW9uKGUsdCxyKXt2YXIgaSxzPXIsbz1NYXRoLmNlaWwodC5uLmJpdExlbmd0aCgpLzgpOyExIT09ciYmITAhPT1yPyhzPTI9PT1yLGk9ZyhlLHQscikpOihpPWEudXRpbC5jcmVhdGVCdWZmZXIoKSkucHV0Qnl0ZXMoZSk7Zm9yKHZhciBjPW5ldyBuKGkudG9IZXgoKSwxNiksdT15KGMsdCxzKS50b1N0cmluZygxNiksbD1hLnV0aWwuY3JlYXRlQnVmZmVyKCkscD1vLU1hdGguY2VpbCh1Lmxlbmd0aC8yKTtwPjA7KWwucHV0Qnl0ZSgwKSwtLXA7cmV0dXJuIGwucHV0Qnl0ZXMoYS51dGlsLmhleFRvQnl0ZXModSkpLGwuZ2V0Qnl0ZXMoKX0sYy5yc2EuZGVjcnlwdD1mdW5jdGlvbihlLHQscixpKXt2YXIgcz1NYXRoLmNlaWwodC5uLmJpdExlbmd0aCgpLzgpO2lmKGUubGVuZ3RoIT09cyl7dmFyIG89bmV3IEVycm9yKCJFbmNyeXB0ZWQgbWVzc2FnZSBsZW5ndGggaXMgaW52YWxpZC4iKTt0aHJvdyBvLmxlbmd0aD1lLmxlbmd0aCxvLmV4cGVjdGVkPXMsb312YXIgYz1uZXcgbihhLnV0aWwuY3JlYXRlQnVmZmVyKGUpLnRvSGV4KCksMTYpO2lmKGMuY29tcGFyZVRvKHQubik+PTApdGhyb3cgbmV3IEVycm9yKCJFbmNyeXB0ZWQgbWVzc2FnZSBpcyBpbnZhbGlkLiIpO2Zvcih2YXIgdT15KGMsdCxyKS50b1N0cmluZygxNiksbD1hLnV0aWwuY3JlYXRlQnVmZmVyKCkscD1zLU1hdGguY2VpbCh1Lmxlbmd0aC8yKTtwPjA7KWwucHV0Qnl0ZSgwKSwtLXA7cmV0dXJuIGwucHV0Qnl0ZXMoYS51dGlsLmhleFRvQnl0ZXModSkpLCExIT09aT9tKGwuZ2V0Qnl0ZXMoKSx0LHIpOmwuZ2V0Qnl0ZXMoKX0sYy5yc2EuY3JlYXRlS2V5UGFpckdlbmVyYXRpb25TdGF0ZT1mdW5jdGlvbihlLHQscil7InN0cmluZyI9PXR5cGVvZiBlJiYoZT1wYXJzZUludChlLDEwKSksZT1lfHwyMDQ4O3ZhciBpLHM9KHI9cnx8e30pLnBybmd8fGEucmFuZG9tLG89e25leHRCeXRlczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9cy5nZXRCeXRlc1N5bmMoZS5sZW5ndGgpLHI9MDtyPGUubGVuZ3RoOysrcillW3JdPXQuY2hhckNvZGVBdChyKX19LGM9ci5hbGdvcml0aG18fCJQUklNRUlOQyI7aWYoIlBSSU1FSU5DIiE9PWMpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGtleSBnZW5lcmF0aW9uIGFsZ29yaXRobTogIitjKTtyZXR1cm4oaT17YWxnb3JpdGhtOmMsc3RhdGU6MCxiaXRzOmUscm5nOm8sZUludDp0fHw2NTUzNyxlOm5ldyBuKG51bGwpLHA6bnVsbCxxOm51bGwscUJpdHM6ZT4+MSxwQml0czplLShlPj4xKSxwcVN0YXRlOjAsbnVtOm51bGwsa2V5czpudWxsfSkuZS5mcm9tSW50KGkuZUludCksaX0sYy5yc2Euc3RlcEtleVBhaXJHZW5lcmF0aW9uU3RhdGU9ZnVuY3Rpb24oZSx0KXsiYWxnb3JpdGhtImluIGV8fChlLmFsZ29yaXRobT0iUFJJTUVJTkMiKTt2YXIgcj1uZXcgbihudWxsKTtyLmZyb21JbnQoMzApO2Zvcih2YXIgYSxpPTAscz1mdW5jdGlvbihlLHQpe3JldHVybiBlfHR9LG89K25ldyBEYXRlLGw9MDtudWxsPT09ZS5rZXlzJiYodDw9MHx8bDx0KTspe2lmKDA9PT1lLnN0YXRlKXt2YXIgcD1udWxsPT09ZS5wP2UucEJpdHM6ZS5xQml0cyxmPXAtMTswPT09ZS5wcVN0YXRlPyhlLm51bT1uZXcgbihwLGUucm5nKSxlLm51bS50ZXN0Qml0KGYpfHxlLm51bS5iaXR3aXNlVG8obi5PTkUuc2hpZnRMZWZ0KGYpLHMsZS5udW0pLGUubnVtLmRBZGRPZmZzZXQoMzEtZS5udW0ubW9kKHIpLmJ5dGVWYWx1ZSgpLDApLGk9MCwrK2UucHFTdGF0ZSk6MT09PWUucHFTdGF0ZT9lLm51bS5iaXRMZW5ndGgoKT5wP2UucHFTdGF0ZT0wOmUubnVtLmlzUHJvYmFibGVQcmltZShFKGUubnVtLmJpdExlbmd0aCgpKSk/KytlLnBxU3RhdGU6ZS5udW0uZEFkZE9mZnNldCh1W2krKyU4XSwwKToyPT09ZS5wcVN0YXRlP2UucHFTdGF0ZT0wPT09ZS5udW0uc3VidHJhY3Qobi5PTkUpLmdjZChlLmUpLmNvbXBhcmVUbyhuLk9ORSk/MzowOjM9PT1lLnBxU3RhdGUmJihlLnBxU3RhdGU9MCxudWxsPT09ZS5wP2UucD1lLm51bTplLnE9ZS5udW0sbnVsbCE9PWUucCYmbnVsbCE9PWUucSYmKytlLnN0YXRlLGUubnVtPW51bGwpfWVsc2UgaWYoMT09PWUuc3RhdGUpZS5wLmNvbXBhcmVUbyhlLnEpPDAmJihlLm51bT1lLnAsZS5wPWUucSxlLnE9ZS5udW0pLCsrZS5zdGF0ZTtlbHNlIGlmKDI9PT1lLnN0YXRlKWUucDE9ZS5wLnN1YnRyYWN0KG4uT05FKSxlLnExPWUucS5zdWJ0cmFjdChuLk9ORSksZS5waGk9ZS5wMS5tdWx0aXBseShlLnExKSwrK2Uuc3RhdGU7ZWxzZSBpZigzPT09ZS5zdGF0ZSkwPT09ZS5waGkuZ2NkKGUuZSkuY29tcGFyZVRvKG4uT05FKT8rK2Uuc3RhdGU6KGUucD1udWxsLGUucT1udWxsLGUuc3RhdGU9MCk7ZWxzZSBpZig0PT09ZS5zdGF0ZSllLm49ZS5wLm11bHRpcGx5KGUucSksZS5uLmJpdExlbmd0aCgpPT09ZS5iaXRzPysrZS5zdGF0ZTooZS5xPW51bGwsZS5zdGF0ZT0wKTtlbHNlIGlmKDU9PT1lLnN0YXRlKXt2YXIgaD1lLmUubW9kSW52ZXJzZShlLnBoaSk7ZS5rZXlzPXtwcml2YXRlS2V5OmMucnNhLnNldFByaXZhdGVLZXkoZS5uLGUuZSxoLGUucCxlLnEsaC5tb2QoZS5wMSksaC5tb2QoZS5xMSksZS5xLm1vZEludmVyc2UoZS5wKSkscHVibGljS2V5OmMucnNhLnNldFB1YmxpY0tleShlLm4sZS5lKX19bCs9KGE9K25ldyBEYXRlKS1vLG89YX1yZXR1cm4gbnVsbCE9PWUua2V5c30sYy5yc2EuZ2VuZXJhdGVLZXlQYWlyPWZ1bmN0aW9uKGUsdCxyLG4pe2lmKDE9PT1hcmd1bWVudHMubGVuZ3RoPyJvYmplY3QiPT10eXBlb2YgZT8ocj1lLGU9dm9pZCAwKToiZnVuY3Rpb24iPT10eXBlb2YgZSYmKG49ZSxlPXZvaWQgMCk6Mj09PWFyZ3VtZW50cy5sZW5ndGg/Im51bWJlciI9PXR5cGVvZiBlPyJmdW5jdGlvbiI9PXR5cGVvZiB0PyhuPXQsdD12b2lkIDApOiJudW1iZXIiIT10eXBlb2YgdCYmKHI9dCx0PXZvaWQgMCk6KHI9ZSxuPXQsZT12b2lkIDAsdD12b2lkIDApOjM9PT1hcmd1bWVudHMubGVuZ3RoJiYoIm51bWJlciI9PXR5cGVvZiB0PyJmdW5jdGlvbiI9PXR5cGVvZiByJiYobj1yLHI9dm9pZCAwKToobj1yLHI9dCx0PXZvaWQgMCkpLHI9cnx8e30sdm9pZCAwPT09ZSYmKGU9ci5iaXRzfHwyMDQ4KSx2b2lkIDA9PT10JiYodD1yLmV8fDY1NTM3KSwhYS5vcHRpb25zLnVzZVB1cmVKYXZhU2NyaXB0JiYhci5wcm5nJiZlPj0yNTYmJmU8PTE2Mzg0JiYoNjU1Mzc9PT10fHwzPT09dCkpaWYobil7aWYoUygiZ2VuZXJhdGVLZXlQYWlyIikpcmV0dXJuIGkuZ2VuZXJhdGVLZXlQYWlyKCJyc2EiLHttb2R1bHVzTGVuZ3RoOmUscHVibGljRXhwb25lbnQ6dCxwdWJsaWNLZXlFbmNvZGluZzp7dHlwZToic3BraSIsZm9ybWF0OiJwZW0ifSxwcml2YXRlS2V5RW5jb2Rpbmc6e3R5cGU6InBrY3M4Iixmb3JtYXQ6InBlbSJ9fSwoZnVuY3Rpb24oZSx0LHIpe2lmKGUpcmV0dXJuIG4oZSk7bihudWxsLHtwcml2YXRlS2V5OmMucHJpdmF0ZUtleUZyb21QZW0ocikscHVibGljS2V5OmMucHVibGljS2V5RnJvbVBlbSh0KX0pfSkpO2lmKFQoImdlbmVyYXRlS2V5IikmJlQoImV4cG9ydEtleSIpKXJldHVybiBvLmdsb2JhbFNjb3BlLmNyeXB0by5zdWJ0bGUuZ2VuZXJhdGVLZXkoe25hbWU6IlJTQVNTQS1QS0NTMS12MV81Iixtb2R1bHVzTGVuZ3RoOmUscHVibGljRXhwb25lbnQ6Yih0KSxoYXNoOntuYW1lOiJTSEEtMjU2In19LCEwLFsic2lnbiIsInZlcmlmeSJdKS50aGVuKChmdW5jdGlvbihlKXtyZXR1cm4gby5nbG9iYWxTY29wZS5jcnlwdG8uc3VidGxlLmV4cG9ydEtleSgicGtjczgiLGUucHJpdmF0ZUtleSl9KSkudGhlbih2b2lkIDAsKGZ1bmN0aW9uKGUpe24oZSl9KSkudGhlbigoZnVuY3Rpb24oZSl7aWYoZSl7dmFyIHQ9Yy5wcml2YXRlS2V5RnJvbUFzbjEocy5mcm9tRGVyKGEudXRpbC5jcmVhdGVCdWZmZXIoZSkpKTtuKG51bGwse3ByaXZhdGVLZXk6dCxwdWJsaWNLZXk6Yy5zZXRSc2FQdWJsaWNLZXkodC5uLHQuZSl9KX19KSk7aWYoSSgiZ2VuZXJhdGVLZXkiKSYmSSgiZXhwb3J0S2V5Iikpe3ZhciB1PW8uZ2xvYmFsU2NvcGUubXNDcnlwdG8uc3VidGxlLmdlbmVyYXRlS2V5KHtuYW1lOiJSU0FTU0EtUEtDUzEtdjFfNSIsbW9kdWx1c0xlbmd0aDplLHB1YmxpY0V4cG9uZW50OmIodCksaGFzaDp7bmFtZToiU0hBLTI1NiJ9fSwhMCxbInNpZ24iLCJ2ZXJpZnkiXSk7cmV0dXJuIHUub25jb21wbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldC5yZXN1bHQscj1vLmdsb2JhbFNjb3BlLm1zQ3J5cHRvLnN1YnRsZS5leHBvcnRLZXkoInBrY3M4Iix0LnByaXZhdGVLZXkpO3Iub25jb21wbGV0ZT1mdW5jdGlvbihlKXt2YXIgdD1lLnRhcmdldC5yZXN1bHQscj1jLnByaXZhdGVLZXlGcm9tQXNuMShzLmZyb21EZXIoYS51dGlsLmNyZWF0ZUJ1ZmZlcih0KSkpO24obnVsbCx7cHJpdmF0ZUtleTpyLHB1YmxpY0tleTpjLnNldFJzYVB1YmxpY0tleShyLm4sci5lKX0pfSxyLm9uZXJyb3I9ZnVuY3Rpb24oZSl7bihlKX19LHZvaWQodS5vbmVycm9yPWZ1bmN0aW9uKGUpe24oZSl9KX19ZWxzZSBpZihTKCJnZW5lcmF0ZUtleVBhaXJTeW5jIikpe3ZhciBsPWkuZ2VuZXJhdGVLZXlQYWlyU3luYygicnNhIix7bW9kdWx1c0xlbmd0aDplLHB1YmxpY0V4cG9uZW50OnQscHVibGljS2V5RW5jb2Rpbmc6e3R5cGU6InNwa2kiLGZvcm1hdDoicGVtIn0scHJpdmF0ZUtleUVuY29kaW5nOnt0eXBlOiJwa2NzOCIsZm9ybWF0OiJwZW0ifX0pO3JldHVybntwcml2YXRlS2V5OmMucHJpdmF0ZUtleUZyb21QZW0obC5wcml2YXRlS2V5KSxwdWJsaWNLZXk6Yy5wdWJsaWNLZXlGcm9tUGVtKGwucHVibGljS2V5KX19dmFyIHA9Yy5yc2EuY3JlYXRlS2V5UGFpckdlbmVyYXRpb25TdGF0ZShlLHQscik7aWYoIW4pcmV0dXJuIGMucnNhLnN0ZXBLZXlQYWlyR2VuZXJhdGlvblN0YXRlKHAsMCkscC5rZXlzO3YocCxyLG4pfSxjLnNldFJzYVB1YmxpY0tleT1jLnJzYS5zZXRQdWJsaWNLZXk9ZnVuY3Rpb24oZSx0KXt2YXIgcj17bjplLGU6dCxlbmNyeXB0OmZ1bmN0aW9uKGUsdCxuKXtpZigic3RyaW5nIj09dHlwZW9mIHQ/dD10LnRvVXBwZXJDYXNlKCk6dm9pZCAwPT09dCYmKHQ9IlJTQUVTLVBLQ1MxLVYxXzUiKSwiUlNBRVMtUEtDUzEtVjFfNSI9PT10KXQ9e2VuY29kZTpmdW5jdGlvbihlLHQscil7cmV0dXJuIGcoZSx0LDIpLmdldEJ5dGVzKCl9fTtlbHNlIGlmKCJSU0EtT0FFUCI9PT10fHwiUlNBRVMtT0FFUCI9PT10KXQ9e2VuY29kZTpmdW5jdGlvbihlLHQpe3JldHVybiBhLnBrY3MxLmVuY29kZV9yc2Ffb2FlcCh0LGUsbil9fTtlbHNlIGlmKC0xIT09WyJSQVciLCJOT05FIiwiTlVMTCIsbnVsbF0uaW5kZXhPZih0KSl0PXtlbmNvZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9fTtlbHNlIGlmKCJzdHJpbmciPT10eXBlb2YgdCl0aHJvdyBuZXcgRXJyb3IoJ1Vuc3VwcG9ydGVkIGVuY3J5cHRpb24gc2NoZW1lOiAiJyt0KyciLicpO3ZhciBpPXQuZW5jb2RlKGUsciwhMCk7cmV0dXJuIGMucnNhLmVuY3J5cHQoaSxyLCEwKX0sdmVyaWZ5OmZ1bmN0aW9uKGUsdCxhKXsic3RyaW5nIj09dHlwZW9mIGE/YT1hLnRvVXBwZXJDYXNlKCk6dm9pZCAwPT09YSYmKGE9IlJTQVNTQS1QS0NTMS1WMV81IiksIlJTQVNTQS1QS0NTMS1WMV81Ij09PWE/YT17dmVyaWZ5OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ9bSh0LHIsITApLGU9PT1zLmZyb21EZXIodCkudmFsdWVbMV0udmFsdWV9fToiTk9ORSIhPT1hJiYiTlVMTCIhPT1hJiZudWxsIT09YXx8KGE9e3ZlcmlmeTpmdW5jdGlvbihlLHQpe3JldHVybiBlPT09KHQ9bSh0LHIsITApKX19KTt2YXIgbj1jLnJzYS5kZWNyeXB0KHQsciwhMCwhMSk7cmV0dXJuIGEudmVyaWZ5KGUsbixyLm4uYml0TGVuZ3RoKCkpfX07cmV0dXJuIHJ9LGMuc2V0UnNhUHJpdmF0ZUtleT1jLnJzYS5zZXRQcml2YXRlS2V5PWZ1bmN0aW9uKGUsdCxyLG4saSxzLG8sdSl7dmFyIGw9e246ZSxlOnQsZDpyLHA6bixxOmksZFA6cyxkUTpvLHFJbnY6dSxkZWNyeXB0OmZ1bmN0aW9uKGUsdCxyKXsic3RyaW5nIj09dHlwZW9mIHQ/dD10LnRvVXBwZXJDYXNlKCk6dm9pZCAwPT09dCYmKHQ9IlJTQUVTLVBLQ1MxLVYxXzUiKTt2YXIgbj1jLnJzYS5kZWNyeXB0KGUsbCwhMSwhMSk7aWYoIlJTQUVTLVBLQ1MxLVYxXzUiPT09dCl0PXtkZWNvZGU6bX07ZWxzZSBpZigiUlNBLU9BRVAiPT09dHx8IlJTQUVTLU9BRVAiPT09dCl0PXtkZWNvZGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYS5wa2NzMS5kZWNvZGVfcnNhX29hZXAodCxlLHIpfX07ZWxzZXtpZigtMT09PVsiUkFXIiwiTk9ORSIsIk5VTEwiLG51bGxdLmluZGV4T2YodCkpdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBlbmNyeXB0aW9uIHNjaGVtZTogIicrdCsnIi4nKTt0PXtkZWNvZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGV9fX1yZXR1cm4gdC5kZWNvZGUobixsLCExKX0sc2lnbjpmdW5jdGlvbihlLHQpe3ZhciByPSExOyJzdHJpbmciPT10eXBlb2YgdCYmKHQ9dC50b1VwcGVyQ2FzZSgpKSx2b2lkIDA9PT10fHwiUlNBU1NBLVBLQ1MxLVYxXzUiPT09dD8odD17ZW5jb2RlOmR9LHI9MSk6Ik5PTkUiIT09dCYmIk5VTEwiIT09dCYmbnVsbCE9PXR8fCh0PXtlbmNvZGU6ZnVuY3Rpb24oKXtyZXR1cm4gZX19LHI9MSk7dmFyIGE9dC5lbmNvZGUoZSxsLm4uYml0TGVuZ3RoKCkpO3JldHVybiBjLnJzYS5lbmNyeXB0KGEsbCxyKX19O3JldHVybiBsfSxjLndyYXBSc2FQcml2YXRlS2V5PWZ1bmN0aW9uKGUpe3JldHVybiBzLmNyZWF0ZShzLkNsYXNzLlVOSVZFUlNBTCxzLlR5cGUuU0VRVUVOQ0UsITAsW3MuY3JlYXRlKHMuQ2xhc3MuVU5JVkVSU0FMLHMuVHlwZS5JTlRFR0VSLCExLHMuaW50ZWdlclRvRGVyKDApLmdldEJ5dGVzKCkpLHMuY3JlYXRlKHMuQ2xhc3MuVU5JVkVSU0FMLHMuVHlwZS5TRVFVRU5DRSwhMCxbcy5jcmVhdGUocy5DbGFzcy5VTklWRVJTQUwscy5UeXBlLk9JRCwhMSxzLm9pZFRvRGVyKGMub2lkcy5yc2FFbmNyeXB0aW9uKS5nZXRCeXRlcygpKSxzLmNyZWF0ZShzLkNsYXNzLlVOSVZFUlNBTCxzLlR5cGUuTlVMTCwhMSwiIildKSxzLmNyZWF0ZShzLkNsYXNzLlVOSVZFUlNBTCxzLlR5cGUuT0NURVRTVFJJTkcsITEscy50b0RlcihlKS5nZXRCeXRlcygpKV0pfSxjLnByaXZhdGVLZXlGcm9tQXNuMT1mdW5jdGlvbihlKXt2YXIgdCxyLGksbyx1LGYsaCxkLHk9e30sZz1bXTtpZihzLnZhbGlkYXRlKGUsbCx5LGcpJiYoZT1zLmZyb21EZXIoYS51dGlsLmNyZWF0ZUJ1ZmZlcih5LnByaXZhdGVLZXkpKSkseT17fSxnPVtdLCFzLnZhbGlkYXRlKGUscCx5LGcpKXt2YXIgbT1uZXcgRXJyb3IoIkNhbm5vdCByZWFkIHByaXZhdGUga2V5LiBBU04uMSBvYmplY3QgZG9lcyBub3QgY29udGFpbiBhbiBSU0FQcml2YXRlS2V5LiIpO3Rocm93IG0uZXJyb3JzPWcsbX1yZXR1cm4gdD1hLnV0aWwuY3JlYXRlQnVmZmVyKHkucHJpdmF0ZUtleU1vZHVsdXMpLnRvSGV4KCkscj1hLnV0aWwuY3JlYXRlQnVmZmVyKHkucHJpdmF0ZUtleVB1YmxpY0V4cG9uZW50KS50b0hleCgpLGk9YS51dGlsLmNyZWF0ZUJ1ZmZlcih5LnByaXZhdGVLZXlQcml2YXRlRXhwb25lbnQpLnRvSGV4KCksbz1hLnV0aWwuY3JlYXRlQnVmZmVyKHkucHJpdmF0ZUtleVByaW1lMSkudG9IZXgoKSx1PWEudXRpbC5jcmVhdGVCdWZmZXIoeS5wcml2YXRlS2V5UHJpbWUyKS50b0hleCgpLGY9YS51dGlsLmNyZWF0ZUJ1ZmZlcih5LnByaXZhdGVLZXlFeHBvbmVudDEpLnRvSGV4KCksaD1hLnV0aWwuY3JlYXRlQnVmZmVyKHkucHJpdmF0ZUtleUV4cG9uZW50MikudG9IZXgoKSxkPWEudXRpbC5jcmVhdGVCdWZmZXIoeS5wcml2YXRlS2V5Q29lZmZpY2llbnQpLnRvSGV4KCksYy5zZXRSc2FQcml2YXRlS2V5KG5ldyBuKHQsMTYpLG5ldyBuKHIsMTYpLG5ldyBuKGksMTYpLG5ldyBuKG8sMTYpLG5ldyBuKHUsMTYpLG5ldyBuKGYsMTYpLG5ldyBuKGgsMTYpLG5ldyBuKGQsMTYpKX0sYy5wcml2YXRlS2V5VG9Bc24xPWMucHJpdmF0ZUtleVRvUlNBUHJpdmF0ZUtleT1mdW5jdGlvbihlKXtyZXR1cm4gcy5jcmVhdGUocy5DbGFzcy5VTklWRVJTQUwscy5UeXBlLlNFUVVFTkNFLCEwLFtzLmNyZWF0ZShzLkNsYXNzLlVOSVZFUlNBTCxzLlR5cGUuSU5URUdFUiwhMSxzLmludGVnZXJUb0RlcigwKS5nZXRCeXRlcygpKSxzLmNyZWF0ZShzLkNsYXNzLlVOSVZFUlNBTCxzLlR5cGUuSU5URUdFUiwhMSxDKGUubikpLHMuY3JlYXRlKHMuQ2xhc3MuVU5JVkVSU0FMLHMuVHlwZS5JTlRFR0VSLCExLEMoZS5lKSkscy5jcmVhdGUocy5DbGFzcy5VTklWRVJTQUwscy5UeXBlLklOVEVHRVIsITEsQyhlLmQpKSxzLmNyZWF0ZShzLkNsYXNzLlVOSVZFUlNBTCxzLlR5cGUuSU5URUdFUiwhMSxDKGUucCkpLHMuY3JlYXRlKHMuQ2xhc3MuVU5JVkVSU0FMLHMuVHlwZS5JTlRFR0VSLCExLEMoZS5xKSkscy5jcmVhdGUocy5DbGFzcy5VTklWRVJTQUwscy5UeXBlLklOVEVHRVIsITEsQyhlLmRQKSkscy5jcmVhdGUocy5DbGFzcy5VTklWRVJTQUwscy5UeXBlLklOVEVHRVIsITEsQyhlLmRRKSkscy5jcmVhdGUocy5DbGFzcy5VTklWRVJTQUwscy5UeXBlLklOVEVHRVIsITEsQyhlLnFJbnYpKV0pfSxjLnB1YmxpY0tleUZyb21Bc24xPWZ1bmN0aW9uKGUpe3ZhciB0PXt9LHI9W107aWYocy52YWxpZGF0ZShlLGgsdCxyKSl7dmFyIGksbz1zLmRlclRvT2lkKHQucHVibGljS2V5T2lkKTtpZihvIT09Yy5vaWRzLnJzYUVuY3J5cHRpb24pdGhyb3coaT1uZXcgRXJyb3IoIkNhbm5vdCByZWFkIHB1YmxpYyBrZXkuIFVua25vd24gT0lELiIpKS5vaWQ9byxpO2U9dC5yc2FQdWJsaWNLZXl9aWYocj1bXSwhcy52YWxpZGF0ZShlLGYsdCxyKSl0aHJvdyhpPW5ldyBFcnJvcigiQ2Fubm90IHJlYWQgcHVibGljIGtleS4gQVNOLjEgb2JqZWN0IGRvZXMgbm90IGNvbnRhaW4gYW4gUlNBUHVibGljS2V5LiIpKS5lcnJvcnM9cixpO3ZhciB1PWEudXRpbC5jcmVhdGVCdWZmZXIodC5wdWJsaWNLZXlNb2R1bHVzKS50b0hleCgpLGw9YS51dGlsLmNyZWF0ZUJ1ZmZlcih0LnB1YmxpY0tleUV4cG9uZW50KS50b0hleCgpO3JldHVybiBjLnNldFJzYVB1YmxpY0tleShuZXcgbih1LDE2KSxuZXcgbihsLDE2KSl9LGMucHVibGljS2V5VG9Bc24xPWMucHVibGljS2V5VG9TdWJqZWN0UHVibGljS2V5SW5mbz1mdW5jdGlvbihlKXtyZXR1cm4gcy5jcmVhdGUocy5DbGFzcy5VTklWRVJTQUwscy5UeXBlLlNFUVVFTkNFLCEwLFtzLmNyZWF0ZShzLkNsYXNzLlVOSVZFUlNBTCxzLlR5cGUuU0VRVUVOQ0UsITAsW3MuY3JlYXRlKHMuQ2xhc3MuVU5JVkVSU0FMLHMuVHlwZS5PSUQsITEscy5vaWRUb0RlcihjLm9pZHMucnNhRW5jcnlwdGlvbikuZ2V0Qnl0ZXMoKSkscy5jcmVhdGUocy5DbGFzcy5VTklWRVJTQUwscy5UeXBlLk5VTEwsITEsIiIpXSkscy5jcmVhdGUocy5DbGFzcy5VTklWRVJTQUwscy5UeXBlLkJJVFNUUklORywhMSxbYy5wdWJsaWNLZXlUb1JTQVB1YmxpY0tleShlKV0pXSl9LGMucHVibGljS2V5VG9SU0FQdWJsaWNLZXk9ZnVuY3Rpb24oZSl7cmV0dXJuIHMuY3JlYXRlKHMuQ2xhc3MuVU5JVkVSU0FMLHMuVHlwZS5TRVFVRU5DRSwhMCxbcy5jcmVhdGUocy5DbGFzcy5VTklWRVJTQUwscy5UeXBlLklOVEVHRVIsITEsQyhlLm4pKSxzLmNyZWF0ZShzLkNsYXNzLlVOSVZFUlNBTCxzLlR5cGUuSU5URUdFUiwhMSxDKGUuZSkpXSl9fSxmdW5jdGlvbihlLHQscil7dmFyIGEsbj1yKDApO2UuZXhwb3J0cz1uLmpzYm49bi5qc2JufHx7fTtmdW5jdGlvbiBpKGUsdCxyKXt0aGlzLmRhdGE9W10sbnVsbCE9ZSYmKCJudW1iZXIiPT10eXBlb2YgZT90aGlzLmZyb21OdW1iZXIoZSx0LHIpOm51bGw9PXQmJiJzdHJpbmciIT10eXBlb2YgZT90aGlzLmZyb21TdHJpbmcoZSwyNTYpOnRoaXMuZnJvbVN0cmluZyhlLHQpKX1mdW5jdGlvbiBzKCl7cmV0dXJuIG5ldyBpKG51bGwpfWZ1bmN0aW9uIG8oZSx0LHIsYSxuLGkpe2Zvcih2YXIgcz0xNjM4MyZ0LG89dD4+MTQ7LS1pPj0wOyl7dmFyIGM9MTYzODMmdGhpcy5kYXRhW2VdLHU9dGhpcy5kYXRhW2UrK10+PjE0LGw9bypjK3UqcztuPSgoYz1zKmMrKCgxNjM4MyZsKTw8MTQpK3IuZGF0YVthXStuKT4+MjgpKyhsPj4xNCkrbyp1LHIuZGF0YVthKytdPTI2ODQzNTQ1NSZjfXJldHVybiBufW4uanNibi5CaWdJbnRlZ2VyPWksInVuZGVmaW5lZCI9PXR5cGVvZiBuYXZpZ2F0b3I/KGkucHJvdG90eXBlLmFtPW8sYT0yOCk6Ik1pY3Jvc29mdCBJbnRlcm5ldCBFeHBsb3JlciI9PW5hdmlnYXRvci5hcHBOYW1lPyhpLnByb3RvdHlwZS5hbT1mdW5jdGlvbihlLHQscixhLG4saSl7Zm9yKHZhciBzPTMyNzY3JnQsbz10Pj4xNTstLWk+PTA7KXt2YXIgYz0zMjc2NyZ0aGlzLmRhdGFbZV0sdT10aGlzLmRhdGFbZSsrXT4+MTUsbD1vKmMrdSpzO249KChjPXMqYysoKDMyNzY3JmwpPDwxNSkrci5kYXRhW2FdKygxMDczNzQxODIzJm4pKT4+PjMwKSsobD4+PjE1KStvKnUrKG4+Pj4zMCksci5kYXRhW2ErK109MTA3Mzc0MTgyMyZjfXJldHVybiBufSxhPTMwKToiTmV0c2NhcGUiIT1uYXZpZ2F0b3IuYXBwTmFtZT8oaS5wcm90b3R5cGUuYW09ZnVuY3Rpb24oZSx0LHIsYSxuLGkpe2Zvcig7LS1pPj0wOyl7dmFyIHM9dCp0aGlzLmRhdGFbZSsrXStyLmRhdGFbYV0rbjtuPU1hdGguZmxvb3Iocy82NzEwODg2NCksci5kYXRhW2ErK109NjcxMDg4NjMmc31yZXR1cm4gbn0sYT0yNik6KGkucHJvdG90eXBlLmFtPW8sYT0yOCksaS5wcm90b3R5cGUuREI9YSxpLnByb3RvdHlwZS5ETT0oMTw8YSktMSxpLnByb3RvdHlwZS5EVj0xPDxhO2kucHJvdG90eXBlLkZWPU1hdGgucG93KDIsNTIpLGkucHJvdG90eXBlLkYxPTUyLWEsaS5wcm90b3R5cGUuRjI9MiphLTUyO3ZhciBjLHUsbD1uZXcgQXJyYXk7Zm9yKGM9IjAiLmNoYXJDb2RlQXQoMCksdT0wO3U8PTk7Kyt1KWxbYysrXT11O2ZvcihjPSJhIi5jaGFyQ29kZUF0KDApLHU9MTA7dTwzNjsrK3UpbFtjKytdPXU7Zm9yKGM9IkEiLmNoYXJDb2RlQXQoMCksdT0xMDt1PDM2OysrdSlsW2MrK109dTtmdW5jdGlvbiBwKGUpe3JldHVybiIwMTIzNDU2Nzg5YWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXoiLmNoYXJBdChlKX1mdW5jdGlvbiBmKGUsdCl7dmFyIHI9bFtlLmNoYXJDb2RlQXQodCldO3JldHVybiBudWxsPT1yPy0xOnJ9ZnVuY3Rpb24gaChlKXt2YXIgdD1zKCk7cmV0dXJuIHQuZnJvbUludChlKSx0fWZ1bmN0aW9uIGQoZSl7dmFyIHQscj0xO3JldHVybiAwIT0odD1lPj4+MTYpJiYoZT10LHIrPTE2KSwwIT0odD1lPj44KSYmKGU9dCxyKz04KSwwIT0odD1lPj40KSYmKGU9dCxyKz00KSwwIT0odD1lPj4yKSYmKGU9dCxyKz0yKSwwIT0odD1lPj4xKSYmKGU9dCxyKz0xKSxyfWZ1bmN0aW9uIHkoZSl7dGhpcy5tPWV9ZnVuY3Rpb24gZyhlKXt0aGlzLm09ZSx0aGlzLm1wPWUuaW52RGlnaXQoKSx0aGlzLm1wbD0zMjc2NyZ0aGlzLm1wLHRoaXMubXBoPXRoaXMubXA+PjE1LHRoaXMudW09KDE8PGUuREItMTUpLTEsdGhpcy5tdDI9MiplLnR9ZnVuY3Rpb24gbShlLHQpe3JldHVybiBlJnR9ZnVuY3Rpb24gdihlLHQpe3JldHVybiBlfHR9ZnVuY3Rpb24gQyhlLHQpe3JldHVybiBlXnR9ZnVuY3Rpb24gRShlLHQpe3JldHVybiBlJn50fWZ1bmN0aW9uIFMoZSl7aWYoMD09ZSlyZXR1cm4tMTt2YXIgdD0wO3JldHVybiAwPT0oNjU1MzUmZSkmJihlPj49MTYsdCs9MTYpLDA9PSgyNTUmZSkmJihlPj49OCx0Kz04KSwwPT0oMTUmZSkmJihlPj49NCx0Kz00KSwwPT0oMyZlKSYmKGU+Pj0yLHQrPTIpLDA9PSgxJmUpJiYrK3QsdH1mdW5jdGlvbiBUKGUpe2Zvcih2YXIgdD0wOzAhPWU7KWUmPWUtMSwrK3Q7cmV0dXJuIHR9ZnVuY3Rpb24gSSgpe31mdW5jdGlvbiBiKGUpe3JldHVybiBlfWZ1bmN0aW9uIEEoZSl7dGhpcy5yMj1zKCksdGhpcy5xMz1zKCksaS5PTkUuZGxTaGlmdFRvKDIqZS50LHRoaXMucjIpLHRoaXMubXU9dGhpcy5yMi5kaXZpZGUoZSksdGhpcy5tPWV9eS5wcm90b3R5cGUuY29udmVydD1mdW5jdGlvbihlKXtyZXR1cm4gZS5zPDB8fGUuY29tcGFyZVRvKHRoaXMubSk+PTA/ZS5tb2QodGhpcy5tKTplfSx5LnByb3RvdHlwZS5yZXZlcnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGV9LHkucHJvdG90eXBlLnJlZHVjZT1mdW5jdGlvbihlKXtlLmRpdlJlbVRvKHRoaXMubSxudWxsLGUpfSx5LnByb3RvdHlwZS5tdWxUbz1mdW5jdGlvbihlLHQscil7ZS5tdWx0aXBseVRvKHQsciksdGhpcy5yZWR1Y2Uocil9LHkucHJvdG90eXBlLnNxclRvPWZ1bmN0aW9uKGUsdCl7ZS5zcXVhcmVUbyh0KSx0aGlzLnJlZHVjZSh0KX0sZy5wcm90b3R5cGUuY29udmVydD1mdW5jdGlvbihlKXt2YXIgdD1zKCk7cmV0dXJuIGUuYWJzKCkuZGxTaGlmdFRvKHRoaXMubS50LHQpLHQuZGl2UmVtVG8odGhpcy5tLG51bGwsdCksZS5zPDAmJnQuY29tcGFyZVRvKGkuWkVSTyk+MCYmdGhpcy5tLnN1YlRvKHQsdCksdH0sZy5wcm90b3R5cGUucmV2ZXJ0PWZ1bmN0aW9uKGUpe3ZhciB0PXMoKTtyZXR1cm4gZS5jb3B5VG8odCksdGhpcy5yZWR1Y2UodCksdH0sZy5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKGUpe2Zvcig7ZS50PD10aGlzLm10MjspZS5kYXRhW2UudCsrXT0wO2Zvcih2YXIgdD0wO3Q8dGhpcy5tLnQ7Kyt0KXt2YXIgcj0zMjc2NyZlLmRhdGFbdF0sYT1yKnRoaXMubXBsKygocip0aGlzLm1waCsoZS5kYXRhW3RdPj4xNSkqdGhpcy5tcGwmdGhpcy51bSk8PDE1KSZlLkRNO2ZvcihyPXQrdGhpcy5tLnQsZS5kYXRhW3JdKz10aGlzLm0uYW0oMCxhLGUsdCwwLHRoaXMubS50KTtlLmRhdGFbcl0+PWUuRFY7KWUuZGF0YVtyXS09ZS5EVixlLmRhdGFbKytyXSsrfWUuY2xhbXAoKSxlLmRyU2hpZnRUbyh0aGlzLm0udCxlKSxlLmNvbXBhcmVUbyh0aGlzLm0pPj0wJiZlLnN1YlRvKHRoaXMubSxlKX0sZy5wcm90b3R5cGUubXVsVG89ZnVuY3Rpb24oZSx0LHIpe2UubXVsdGlwbHlUbyh0LHIpLHRoaXMucmVkdWNlKHIpfSxnLnByb3RvdHlwZS5zcXJUbz1mdW5jdGlvbihlLHQpe2Uuc3F1YXJlVG8odCksdGhpcy5yZWR1Y2UodCl9LGkucHJvdG90eXBlLmNvcHlUbz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50LTE7dD49MDstLXQpZS5kYXRhW3RdPXRoaXMuZGF0YVt0XTtlLnQ9dGhpcy50LGUucz10aGlzLnN9LGkucHJvdG90eXBlLmZyb21JbnQ9ZnVuY3Rpb24oZSl7dGhpcy50PTEsdGhpcy5zPWU8MD8tMTowLGU+MD90aGlzLmRhdGFbMF09ZTplPC0xP3RoaXMuZGF0YVswXT1lK3RoaXMuRFY6dGhpcy50PTB9LGkucHJvdG90eXBlLmZyb21TdHJpbmc9ZnVuY3Rpb24oZSx0KXt2YXIgcjtpZigxNj09dClyPTQ7ZWxzZSBpZig4PT10KXI9MztlbHNlIGlmKDI1Nj09dClyPTg7ZWxzZSBpZigyPT10KXI9MTtlbHNlIGlmKDMyPT10KXI9NTtlbHNle2lmKDQhPXQpcmV0dXJuIHZvaWQgdGhpcy5mcm9tUmFkaXgoZSx0KTtyPTJ9dGhpcy50PTAsdGhpcy5zPTA7Zm9yKHZhciBhPWUubGVuZ3RoLG49ITEscz0wOy0tYT49MDspe3ZhciBvPTg9PXI/MjU1JmVbYV06ZihlLGEpO288MD8iLSI9PWUuY2hhckF0KGEpJiYobj0hMCk6KG49ITEsMD09cz90aGlzLmRhdGFbdGhpcy50KytdPW86cytyPnRoaXMuREI/KHRoaXMuZGF0YVt0aGlzLnQtMV18PShvJigxPDx0aGlzLkRCLXMpLTEpPDxzLHRoaXMuZGF0YVt0aGlzLnQrK109bz4+dGhpcy5EQi1zKTp0aGlzLmRhdGFbdGhpcy50LTFdfD1vPDxzLChzKz1yKT49dGhpcy5EQiYmKHMtPXRoaXMuREIpKX04PT1yJiYwIT0oMTI4JmVbMF0pJiYodGhpcy5zPS0xLHM+MCYmKHRoaXMuZGF0YVt0aGlzLnQtMV18PSgxPDx0aGlzLkRCLXMpLTE8PHMpKSx0aGlzLmNsYW1wKCksbiYmaS5aRVJPLnN1YlRvKHRoaXMsdGhpcyl9LGkucHJvdG90eXBlLmNsYW1wPWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXRoaXMucyZ0aGlzLkRNO3RoaXMudD4wJiZ0aGlzLmRhdGFbdGhpcy50LTFdPT1lOyktLXRoaXMudH0saS5wcm90b3R5cGUuZGxTaGlmdFRvPWZ1bmN0aW9uKGUsdCl7dmFyIHI7Zm9yKHI9dGhpcy50LTE7cj49MDstLXIpdC5kYXRhW3IrZV09dGhpcy5kYXRhW3JdO2ZvcihyPWUtMTtyPj0wOy0tcil0LmRhdGFbcl09MDt0LnQ9dGhpcy50K2UsdC5zPXRoaXMuc30saS5wcm90b3R5cGUuZHJTaGlmdFRvPWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPWU7cjx0aGlzLnQ7KytyKXQuZGF0YVtyLWVdPXRoaXMuZGF0YVtyXTt0LnQ9TWF0aC5tYXgodGhpcy50LWUsMCksdC5zPXRoaXMuc30saS5wcm90b3R5cGUubFNoaWZ0VG89ZnVuY3Rpb24oZSx0KXt2YXIgcixhPWUldGhpcy5EQixuPXRoaXMuREItYSxpPSgxPDxuKS0xLHM9TWF0aC5mbG9vcihlL3RoaXMuREIpLG89dGhpcy5zPDxhJnRoaXMuRE07Zm9yKHI9dGhpcy50LTE7cj49MDstLXIpdC5kYXRhW3IrcysxXT10aGlzLmRhdGFbcl0+Pm58byxvPSh0aGlzLmRhdGFbcl0maSk8PGE7Zm9yKHI9cy0xO3I+PTA7LS1yKXQuZGF0YVtyXT0wO3QuZGF0YVtzXT1vLHQudD10aGlzLnQrcysxLHQucz10aGlzLnMsdC5jbGFtcCgpfSxpLnByb3RvdHlwZS5yU2hpZnRUbz1mdW5jdGlvbihlLHQpe3Qucz10aGlzLnM7dmFyIHI9TWF0aC5mbG9vcihlL3RoaXMuREIpO2lmKHI+PXRoaXMudCl0LnQ9MDtlbHNle3ZhciBhPWUldGhpcy5EQixuPXRoaXMuREItYSxpPSgxPDxhKS0xO3QuZGF0YVswXT10aGlzLmRhdGFbcl0+PmE7Zm9yKHZhciBzPXIrMTtzPHRoaXMudDsrK3MpdC5kYXRhW3Mtci0xXXw9KHRoaXMuZGF0YVtzXSZpKTw8bix0LmRhdGFbcy1yXT10aGlzLmRhdGFbc10+PmE7YT4wJiYodC5kYXRhW3RoaXMudC1yLTFdfD0odGhpcy5zJmkpPDxuKSx0LnQ9dGhpcy50LXIsdC5jbGFtcCgpfX0saS5wcm90b3R5cGUuc3ViVG89ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9MCxhPTAsbj1NYXRoLm1pbihlLnQsdGhpcy50KTtyPG47KWErPXRoaXMuZGF0YVtyXS1lLmRhdGFbcl0sdC5kYXRhW3IrK109YSZ0aGlzLkRNLGE+Pj10aGlzLkRCO2lmKGUudDx0aGlzLnQpe2ZvcihhLT1lLnM7cjx0aGlzLnQ7KWErPXRoaXMuZGF0YVtyXSx0LmRhdGFbcisrXT1hJnRoaXMuRE0sYT4+PXRoaXMuREI7YSs9dGhpcy5zfWVsc2V7Zm9yKGErPXRoaXMucztyPGUudDspYS09ZS5kYXRhW3JdLHQuZGF0YVtyKytdPWEmdGhpcy5ETSxhPj49dGhpcy5EQjthLT1lLnN9dC5zPWE8MD8tMTowLGE8LTE/dC5kYXRhW3IrK109dGhpcy5EVithOmE+MCYmKHQuZGF0YVtyKytdPWEpLHQudD1yLHQuY2xhbXAoKX0saS5wcm90b3R5cGUubXVsdGlwbHlUbz1mdW5jdGlvbihlLHQpe3ZhciByPXRoaXMuYWJzKCksYT1lLmFicygpLG49ci50O2Zvcih0LnQ9bithLnQ7LS1uPj0wOyl0LmRhdGFbbl09MDtmb3Iobj0wO248YS50Oysrbil0LmRhdGFbbityLnRdPXIuYW0oMCxhLmRhdGFbbl0sdCxuLDAsci50KTt0LnM9MCx0LmNsYW1wKCksdGhpcy5zIT1lLnMmJmkuWkVSTy5zdWJUbyh0LHQpfSxpLnByb3RvdHlwZS5zcXVhcmVUbz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy5hYnMoKSxyPWUudD0yKnQudDstLXI+PTA7KWUuZGF0YVtyXT0wO2ZvcihyPTA7cjx0LnQtMTsrK3Ipe3ZhciBhPXQuYW0ocix0LmRhdGFbcl0sZSwyKnIsMCwxKTsoZS5kYXRhW3IrdC50XSs9dC5hbShyKzEsMip0LmRhdGFbcl0sZSwyKnIrMSxhLHQudC1yLTEpKT49dC5EViYmKGUuZGF0YVtyK3QudF0tPXQuRFYsZS5kYXRhW3IrdC50KzFdPTEpfWUudD4wJiYoZS5kYXRhW2UudC0xXSs9dC5hbShyLHQuZGF0YVtyXSxlLDIqciwwLDEpKSxlLnM9MCxlLmNsYW1wKCl9LGkucHJvdG90eXBlLmRpdlJlbVRvPWZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1lLmFicygpO2lmKCEoYS50PD0wKSl7dmFyIG49dGhpcy5hYnMoKTtpZihuLnQ8YS50KXJldHVybiBudWxsIT10JiZ0LmZyb21JbnQoMCksdm9pZChudWxsIT1yJiZ0aGlzLmNvcHlUbyhyKSk7bnVsbD09ciYmKHI9cygpKTt2YXIgbz1zKCksYz10aGlzLnMsdT1lLnMsbD10aGlzLkRCLWQoYS5kYXRhW2EudC0xXSk7bD4wPyhhLmxTaGlmdFRvKGwsbyksbi5sU2hpZnRUbyhsLHIpKTooYS5jb3B5VG8obyksbi5jb3B5VG8ocikpO3ZhciBwPW8udCxmPW8uZGF0YVtwLTFdO2lmKDAhPWYpe3ZhciBoPWYqKDE8PHRoaXMuRjEpKyhwPjE/by5kYXRhW3AtMl0+PnRoaXMuRjI6MCkseT10aGlzLkZWL2gsZz0oMTw8dGhpcy5GMSkvaCxtPTE8PHRoaXMuRjIsdj1yLnQsQz12LXAsRT1udWxsPT10P3MoKTp0O2ZvcihvLmRsU2hpZnRUbyhDLEUpLHIuY29tcGFyZVRvKEUpPj0wJiYoci5kYXRhW3IudCsrXT0xLHIuc3ViVG8oRSxyKSksaS5PTkUuZGxTaGlmdFRvKHAsRSksRS5zdWJUbyhvLG8pO28udDxwOylvLmRhdGFbby50KytdPTA7Zm9yKDstLUM+PTA7KXt2YXIgUz1yLmRhdGFbLS12XT09Zj90aGlzLkRNOk1hdGguZmxvb3Ioci5kYXRhW3ZdKnkrKHIuZGF0YVt2LTFdK20pKmcpO2lmKChyLmRhdGFbdl0rPW8uYW0oMCxTLHIsQywwLHApKTxTKWZvcihvLmRsU2hpZnRUbyhDLEUpLHIuc3ViVG8oRSxyKTtyLmRhdGFbdl08LS1TOylyLnN1YlRvKEUscil9bnVsbCE9dCYmKHIuZHJTaGlmdFRvKHAsdCksYyE9dSYmaS5aRVJPLnN1YlRvKHQsdCkpLHIudD1wLHIuY2xhbXAoKSxsPjAmJnIuclNoaWZ0VG8obCxyKSxjPDAmJmkuWkVSTy5zdWJUbyhyLHIpfX19LGkucHJvdG90eXBlLmludkRpZ2l0PWZ1bmN0aW9uKCl7aWYodGhpcy50PDEpcmV0dXJuIDA7dmFyIGU9dGhpcy5kYXRhWzBdO2lmKDA9PSgxJmUpKXJldHVybiAwO3ZhciB0PTMmZTtyZXR1cm4odD0odD0odD0odD10KigyLSgxNSZlKSp0KSYxNSkqKDItKDI1NSZlKSp0KSYyNTUpKigyLSgoNjU1MzUmZSkqdCY2NTUzNSkpJjY1NTM1KSooMi1lKnQldGhpcy5EVikldGhpcy5EVik+MD90aGlzLkRWLXQ6LXR9LGkucHJvdG90eXBlLmlzRXZlbj1mdW5jdGlvbigpe3JldHVybiAwPT0odGhpcy50PjA/MSZ0aGlzLmRhdGFbMF06dGhpcy5zKX0saS5wcm90b3R5cGUuZXhwPWZ1bmN0aW9uKGUsdCl7aWYoZT40Mjk0OTY3Mjk1fHxlPDEpcmV0dXJuIGkuT05FO3ZhciByPXMoKSxhPXMoKSxuPXQuY29udmVydCh0aGlzKSxvPWQoZSktMTtmb3Iobi5jb3B5VG8ocik7LS1vPj0wOylpZih0LnNxclRvKHIsYSksKGUmMTw8byk+MCl0Lm11bFRvKGEsbixyKTtlbHNle3ZhciBjPXI7cj1hLGE9Y31yZXR1cm4gdC5yZXZlcnQocil9LGkucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKGUpe2lmKHRoaXMuczwwKXJldHVybiItIit0aGlzLm5lZ2F0ZSgpLnRvU3RyaW5nKGUpO3ZhciB0O2lmKDE2PT1lKXQ9NDtlbHNlIGlmKDg9PWUpdD0zO2Vsc2UgaWYoMj09ZSl0PTE7ZWxzZSBpZigzMj09ZSl0PTU7ZWxzZXtpZig0IT1lKXJldHVybiB0aGlzLnRvUmFkaXgoZSk7dD0yfXZhciByLGE9KDE8PHQpLTEsbj0hMSxpPSIiLHM9dGhpcy50LG89dGhpcy5EQi1zKnRoaXMuREIldDtpZihzLS0gPjApZm9yKG88dGhpcy5EQiYmKHI9dGhpcy5kYXRhW3NdPj5vKT4wJiYobj0hMCxpPXAocikpO3M+PTA7KW88dD8ocj0odGhpcy5kYXRhW3NdJigxPDxvKS0xKTw8dC1vLHJ8PXRoaXMuZGF0YVstLXNdPj4obys9dGhpcy5EQi10KSk6KHI9dGhpcy5kYXRhW3NdPj4oby09dCkmYSxvPD0wJiYobys9dGhpcy5EQiwtLXMpKSxyPjAmJihuPSEwKSxuJiYoaSs9cChyKSk7cmV0dXJuIG4/aToiMCJ9LGkucHJvdG90eXBlLm5lZ2F0ZT1mdW5jdGlvbigpe3ZhciBlPXMoKTtyZXR1cm4gaS5aRVJPLnN1YlRvKHRoaXMsZSksZX0saS5wcm90b3R5cGUuYWJzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuczwwP3RoaXMubmVnYXRlKCk6dGhpc30saS5wcm90b3R5cGUuY29tcGFyZVRvPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMucy1lLnM7aWYoMCE9dClyZXR1cm4gdDt2YXIgcj10aGlzLnQ7aWYoMCE9KHQ9ci1lLnQpKXJldHVybiB0aGlzLnM8MD8tdDp0O2Zvcig7LS1yPj0wOylpZigwIT0odD10aGlzLmRhdGFbcl0tZS5kYXRhW3JdKSlyZXR1cm4gdDtyZXR1cm4gMH0saS5wcm90b3R5cGUuYml0TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudDw9MD8wOnRoaXMuREIqKHRoaXMudC0xKStkKHRoaXMuZGF0YVt0aGlzLnQtMV1edGhpcy5zJnRoaXMuRE0pfSxpLnByb3RvdHlwZS5tb2Q9ZnVuY3Rpb24oZSl7dmFyIHQ9cygpO3JldHVybiB0aGlzLmFicygpLmRpdlJlbVRvKGUsbnVsbCx0KSx0aGlzLnM8MCYmdC5jb21wYXJlVG8oaS5aRVJPKT4wJiZlLnN1YlRvKHQsdCksdH0saS5wcm90b3R5cGUubW9kUG93SW50PWZ1bmN0aW9uKGUsdCl7dmFyIHI7cmV0dXJuIHI9ZTwyNTZ8fHQuaXNFdmVuKCk/bmV3IHkodCk6bmV3IGcodCksdGhpcy5leHAoZSxyKX0saS5aRVJPPWgoMCksaS5PTkU9aCgxKSxJLnByb3RvdHlwZS5jb252ZXJ0PWIsSS5wcm90b3R5cGUucmV2ZXJ0PWIsSS5wcm90b3R5cGUubXVsVG89ZnVuY3Rpb24oZSx0LHIpe2UubXVsdGlwbHlUbyh0LHIpfSxJLnByb3RvdHlwZS5zcXJUbz1mdW5jdGlvbihlLHQpe2Uuc3F1YXJlVG8odCl9LEEucHJvdG90eXBlLmNvbnZlcnQ9ZnVuY3Rpb24oZSl7aWYoZS5zPDB8fGUudD4yKnRoaXMubS50KXJldHVybiBlLm1vZCh0aGlzLm0pO2lmKGUuY29tcGFyZVRvKHRoaXMubSk8MClyZXR1cm4gZTt2YXIgdD1zKCk7cmV0dXJuIGUuY29weVRvKHQpLHRoaXMucmVkdWNlKHQpLHR9LEEucHJvdG90eXBlLnJldmVydD1mdW5jdGlvbihlKXtyZXR1cm4gZX0sQS5wcm90b3R5cGUucmVkdWNlPWZ1bmN0aW9uKGUpe2ZvcihlLmRyU2hpZnRUbyh0aGlzLm0udC0xLHRoaXMucjIpLGUudD50aGlzLm0udCsxJiYoZS50PXRoaXMubS50KzEsZS5jbGFtcCgpKSx0aGlzLm11Lm11bHRpcGx5VXBwZXJUbyh0aGlzLnIyLHRoaXMubS50KzEsdGhpcy5xMyksdGhpcy5tLm11bHRpcGx5TG93ZXJUbyh0aGlzLnEzLHRoaXMubS50KzEsdGhpcy5yMik7ZS5jb21wYXJlVG8odGhpcy5yMik8MDspZS5kQWRkT2Zmc2V0KDEsdGhpcy5tLnQrMSk7Zm9yKGUuc3ViVG8odGhpcy5yMixlKTtlLmNvbXBhcmVUbyh0aGlzLm0pPj0wOyllLnN1YlRvKHRoaXMubSxlKX0sQS5wcm90b3R5cGUubXVsVG89ZnVuY3Rpb24oZSx0LHIpe2UubXVsdGlwbHlUbyh0LHIpLHRoaXMucmVkdWNlKHIpfSxBLnByb3RvdHlwZS5zcXJUbz1mdW5jdGlvbihlLHQpe2Uuc3F1YXJlVG8odCksdGhpcy5yZWR1Y2UodCl9O3ZhciBCPVsyLDMsNSw3LDExLDEzLDE3LDE5LDIzLDI5LDMxLDM3LDQxLDQzLDQ3LDUzLDU5LDYxLDY3LDcxLDczLDc5LDgzLDg5LDk3LDEwMSwxMDMsMTA3LDEwOSwxMTMsMTI3LDEzMSwxMzcsMTM5LDE0OSwxNTEsMTU3LDE2MywxNjcsMTczLDE3OSwxODEsMTkxLDE5MywxOTcsMTk5LDIxMSwyMjMsMjI3LDIyOSwyMzMsMjM5LDI0MSwyNTEsMjU3LDI2MywyNjksMjcxLDI3NywyODEsMjgzLDI5MywzMDcsMzExLDMxMywzMTcsMzMxLDMzNywzNDcsMzQ5LDM1MywzNTksMzY3LDM3MywzNzksMzgzLDM4OSwzOTcsNDAxLDQwOSw0MTksNDIxLDQzMSw0MzMsNDM5LDQ0Myw0NDksNDU3LDQ2MSw0NjMsNDY3LDQ3OSw0ODcsNDkxLDQ5OSw1MDMsNTA5XSxOPSgxPDwyNikvQltCLmxlbmd0aC0xXTtpLnByb3RvdHlwZS5jaHVua1NpemU9ZnVuY3Rpb24oZSl7cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5MTjIqdGhpcy5EQi9NYXRoLmxvZyhlKSl9LGkucHJvdG90eXBlLnRvUmFkaXg9ZnVuY3Rpb24oZSl7aWYobnVsbD09ZSYmKGU9MTApLDA9PXRoaXMuc2lnbnVtKCl8fGU8Mnx8ZT4zNilyZXR1cm4iMCI7dmFyIHQ9dGhpcy5jaHVua1NpemUoZSkscj1NYXRoLnBvdyhlLHQpLGE9aChyKSxuPXMoKSxpPXMoKSxvPSIiO2Zvcih0aGlzLmRpdlJlbVRvKGEsbixpKTtuLnNpZ251bSgpPjA7KW89KHIraS5pbnRWYWx1ZSgpKS50b1N0cmluZyhlKS5zdWJzdHIoMSkrbyxuLmRpdlJlbVRvKGEsbixpKTtyZXR1cm4gaS5pbnRWYWx1ZSgpLnRvU3RyaW5nKGUpK299LGkucHJvdG90eXBlLmZyb21SYWRpeD1mdW5jdGlvbihlLHQpe3RoaXMuZnJvbUludCgwKSxudWxsPT10JiYodD0xMCk7Zm9yKHZhciByPXRoaXMuY2h1bmtTaXplKHQpLGE9TWF0aC5wb3codCxyKSxuPSExLHM9MCxvPTAsYz0wO2M8ZS5sZW5ndGg7KytjKXt2YXIgdT1mKGUsYyk7dTwwPyItIj09ZS5jaGFyQXQoYykmJjA9PXRoaXMuc2lnbnVtKCkmJihuPSEwKToobz10Km8rdSwrK3M+PXImJih0aGlzLmRNdWx0aXBseShhKSx0aGlzLmRBZGRPZmZzZXQobywwKSxzPTAsbz0wKSl9cz4wJiYodGhpcy5kTXVsdGlwbHkoTWF0aC5wb3codCxzKSksdGhpcy5kQWRkT2Zmc2V0KG8sMCkpLG4mJmkuWkVSTy5zdWJUbyh0aGlzLHRoaXMpfSxpLnByb3RvdHlwZS5mcm9tTnVtYmVyPWZ1bmN0aW9uKGUsdCxyKXtpZigibnVtYmVyIj09dHlwZW9mIHQpaWYoZTwyKXRoaXMuZnJvbUludCgxKTtlbHNlIGZvcih0aGlzLmZyb21OdW1iZXIoZSxyKSx0aGlzLnRlc3RCaXQoZS0xKXx8dGhpcy5iaXR3aXNlVG8oaS5PTkUuc2hpZnRMZWZ0KGUtMSksdix0aGlzKSx0aGlzLmlzRXZlbigpJiZ0aGlzLmRBZGRPZmZzZXQoMSwwKTshdGhpcy5pc1Byb2JhYmxlUHJpbWUodCk7KXRoaXMuZEFkZE9mZnNldCgyLDApLHRoaXMuYml0TGVuZ3RoKCk+ZSYmdGhpcy5zdWJUbyhpLk9ORS5zaGlmdExlZnQoZS0xKSx0aGlzKTtlbHNle3ZhciBhPW5ldyBBcnJheSxuPTcmZTthLmxlbmd0aD0xKyhlPj4zKSx0Lm5leHRCeXRlcyhhKSxuPjA/YVswXSY9KDE8PG4pLTE6YVswXT0wLHRoaXMuZnJvbVN0cmluZyhhLDI1Nil9fSxpLnByb3RvdHlwZS5iaXR3aXNlVG89ZnVuY3Rpb24oZSx0LHIpe3ZhciBhLG4saT1NYXRoLm1pbihlLnQsdGhpcy50KTtmb3IoYT0wO2E8aTsrK2Epci5kYXRhW2FdPXQodGhpcy5kYXRhW2FdLGUuZGF0YVthXSk7aWYoZS50PHRoaXMudCl7Zm9yKG49ZS5zJnRoaXMuRE0sYT1pO2E8dGhpcy50OysrYSlyLmRhdGFbYV09dCh0aGlzLmRhdGFbYV0sbik7ci50PXRoaXMudH1lbHNle2ZvcihuPXRoaXMucyZ0aGlzLkRNLGE9aTthPGUudDsrK2Epci5kYXRhW2FdPXQobixlLmRhdGFbYV0pO3IudD1lLnR9ci5zPXQodGhpcy5zLGUucyksci5jbGFtcCgpfSxpLnByb3RvdHlwZS5jaGFuZ2VCaXQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj1pLk9ORS5zaGlmdExlZnQoZSk7cmV0dXJuIHRoaXMuYml0d2lzZVRvKHIsdCxyKSxyfSxpLnByb3RvdHlwZS5hZGRUbz1mdW5jdGlvbihlLHQpe2Zvcih2YXIgcj0wLGE9MCxuPU1hdGgubWluKGUudCx0aGlzLnQpO3I8bjspYSs9dGhpcy5kYXRhW3JdK2UuZGF0YVtyXSx0LmRhdGFbcisrXT1hJnRoaXMuRE0sYT4+PXRoaXMuREI7aWYoZS50PHRoaXMudCl7Zm9yKGErPWUucztyPHRoaXMudDspYSs9dGhpcy5kYXRhW3JdLHQuZGF0YVtyKytdPWEmdGhpcy5ETSxhPj49dGhpcy5EQjthKz10aGlzLnN9ZWxzZXtmb3IoYSs9dGhpcy5zO3I8ZS50OylhKz1lLmRhdGFbcl0sdC5kYXRhW3IrK109YSZ0aGlzLkRNLGE+Pj10aGlzLkRCO2ErPWUuc310LnM9YTwwPy0xOjAsYT4wP3QuZGF0YVtyKytdPWE6YTwtMSYmKHQuZGF0YVtyKytdPXRoaXMuRFYrYSksdC50PXIsdC5jbGFtcCgpfSxpLnByb3RvdHlwZS5kTXVsdGlwbHk9ZnVuY3Rpb24oZSl7dGhpcy5kYXRhW3RoaXMudF09dGhpcy5hbSgwLGUtMSx0aGlzLDAsMCx0aGlzLnQpLCsrdGhpcy50LHRoaXMuY2xhbXAoKX0saS5wcm90b3R5cGUuZEFkZE9mZnNldD1mdW5jdGlvbihlLHQpe2lmKDAhPWUpe2Zvcig7dGhpcy50PD10Oyl0aGlzLmRhdGFbdGhpcy50KytdPTA7Zm9yKHRoaXMuZGF0YVt0XSs9ZTt0aGlzLmRhdGFbdF0+PXRoaXMuRFY7KXRoaXMuZGF0YVt0XS09dGhpcy5EViwrK3Q+PXRoaXMudCYmKHRoaXMuZGF0YVt0aGlzLnQrK109MCksKyt0aGlzLmRhdGFbdF19fSxpLnByb3RvdHlwZS5tdWx0aXBseUxvd2VyVG89ZnVuY3Rpb24oZSx0LHIpe3ZhciBhLG49TWF0aC5taW4odGhpcy50K2UudCx0KTtmb3Ioci5zPTAsci50PW47bj4wOylyLmRhdGFbLS1uXT0wO2ZvcihhPXIudC10aGlzLnQ7bjxhOysrbilyLmRhdGFbbit0aGlzLnRdPXRoaXMuYW0oMCxlLmRhdGFbbl0scixuLDAsdGhpcy50KTtmb3IoYT1NYXRoLm1pbihlLnQsdCk7bjxhOysrbil0aGlzLmFtKDAsZS5kYXRhW25dLHIsbiwwLHQtbik7ci5jbGFtcCgpfSxpLnByb3RvdHlwZS5tdWx0aXBseVVwcGVyVG89ZnVuY3Rpb24oZSx0LHIpey0tdDt2YXIgYT1yLnQ9dGhpcy50K2UudC10O2ZvcihyLnM9MDstLWE+PTA7KXIuZGF0YVthXT0wO2ZvcihhPU1hdGgubWF4KHQtdGhpcy50LDApO2E8ZS50OysrYSlyLmRhdGFbdGhpcy50K2EtdF09dGhpcy5hbSh0LWEsZS5kYXRhW2FdLHIsMCwwLHRoaXMudCthLXQpO3IuY2xhbXAoKSxyLmRyU2hpZnRUbygxLHIpfSxpLnByb3RvdHlwZS5tb2RJbnQ9ZnVuY3Rpb24oZSl7aWYoZTw9MClyZXR1cm4gMDt2YXIgdD10aGlzLkRWJWUscj10aGlzLnM8MD9lLTE6MDtpZih0aGlzLnQ+MClpZigwPT10KXI9dGhpcy5kYXRhWzBdJWU7ZWxzZSBmb3IodmFyIGE9dGhpcy50LTE7YT49MDstLWEpcj0odCpyK3RoaXMuZGF0YVthXSklZTtyZXR1cm4gcn0saS5wcm90b3R5cGUubWlsbGVyUmFiaW49ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zdWJ0cmFjdChpLk9ORSkscj10LmdldExvd2VzdFNldEJpdCgpO2lmKHI8PTApcmV0dXJuITE7Zm9yKHZhciBhLG49dC5zaGlmdFJpZ2h0KHIpLHM9e25leHRCeXRlczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoOysrdCllW3RdPU1hdGguZmxvb3IoMjU2Kk1hdGgucmFuZG9tKCkpfX0sbz0wO288ZTsrK28pe2Rve2E9bmV3IGkodGhpcy5iaXRMZW5ndGgoKSxzKX13aGlsZShhLmNvbXBhcmVUbyhpLk9ORSk8PTB8fGEuY29tcGFyZVRvKHQpPj0wKTt2YXIgYz1hLm1vZFBvdyhuLHRoaXMpO2lmKDAhPWMuY29tcGFyZVRvKGkuT05FKSYmMCE9Yy5jb21wYXJlVG8odCkpe2Zvcih2YXIgdT0xO3UrKzxyJiYwIT1jLmNvbXBhcmVUbyh0KTspaWYoMD09KGM9Yy5tb2RQb3dJbnQoMix0aGlzKSkuY29tcGFyZVRvKGkuT05FKSlyZXR1cm4hMTtpZigwIT1jLmNvbXBhcmVUbyh0KSlyZXR1cm4hMX19cmV0dXJuITB9LGkucHJvdG90eXBlLmNsb25lPWZ1bmN0aW9uKCl7dmFyIGU9cygpO3JldHVybiB0aGlzLmNvcHlUbyhlKSxlfSxpLnByb3RvdHlwZS5pbnRWYWx1ZT1mdW5jdGlvbigpe2lmKHRoaXMuczwwKXtpZigxPT10aGlzLnQpcmV0dXJuIHRoaXMuZGF0YVswXS10aGlzLkRWO2lmKDA9PXRoaXMudClyZXR1cm4tMX1lbHNle2lmKDE9PXRoaXMudClyZXR1cm4gdGhpcy5kYXRhWzBdO2lmKDA9PXRoaXMudClyZXR1cm4gMH1yZXR1cm4odGhpcy5kYXRhWzFdJigxPDwzMi10aGlzLkRCKS0xKTw8dGhpcy5EQnx0aGlzLmRhdGFbMF19LGkucHJvdG90eXBlLmJ5dGVWYWx1ZT1mdW5jdGlvbigpe3JldHVybiAwPT10aGlzLnQ/dGhpcy5zOnRoaXMuZGF0YVswXTw8MjQ+PjI0fSxpLnByb3RvdHlwZS5zaG9ydFZhbHVlPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PXRoaXMudD90aGlzLnM6dGhpcy5kYXRhWzBdPDwxNj4+MTZ9LGkucHJvdG90eXBlLnNpZ251bT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnM8MD8tMTp0aGlzLnQ8PTB8fDE9PXRoaXMudCYmdGhpcy5kYXRhWzBdPD0wPzA6MX0saS5wcm90b3R5cGUudG9CeXRlQXJyYXk9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnQsdD1uZXcgQXJyYXk7dFswXT10aGlzLnM7dmFyIHIsYT10aGlzLkRCLWUqdGhpcy5EQiU4LG49MDtpZihlLS0gPjApZm9yKGE8dGhpcy5EQiYmKHI9dGhpcy5kYXRhW2VdPj5hKSE9KHRoaXMucyZ0aGlzLkRNKT4+YSYmKHRbbisrXT1yfHRoaXMuczw8dGhpcy5EQi1hKTtlPj0wOylhPDg/KHI9KHRoaXMuZGF0YVtlXSYoMTw8YSktMSk8PDgtYSxyfD10aGlzLmRhdGFbLS1lXT4+KGErPXRoaXMuREItOCkpOihyPXRoaXMuZGF0YVtlXT4+KGEtPTgpJjI1NSxhPD0wJiYoYSs9dGhpcy5EQiwtLWUpKSwwIT0oMTI4JnIpJiYocnw9LTI1NiksMD09biYmKDEyOCZ0aGlzLnMpIT0oMTI4JnIpJiYrK24sKG4+MHx8ciE9dGhpcy5zKSYmKHRbbisrXT1yKTtyZXR1cm4gdH0saS5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKGUpe3JldHVybiAwPT10aGlzLmNvbXBhcmVUbyhlKX0saS5wcm90b3R5cGUubWluPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbXBhcmVUbyhlKTwwP3RoaXM6ZX0saS5wcm90b3R5cGUubWF4PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbXBhcmVUbyhlKT4wP3RoaXM6ZX0saS5wcm90b3R5cGUuYW5kPWZ1bmN0aW9uKGUpe3ZhciB0PXMoKTtyZXR1cm4gdGhpcy5iaXR3aXNlVG8oZSxtLHQpLHR9LGkucHJvdG90eXBlLm9yPWZ1bmN0aW9uKGUpe3ZhciB0PXMoKTtyZXR1cm4gdGhpcy5iaXR3aXNlVG8oZSx2LHQpLHR9LGkucHJvdG90eXBlLnhvcj1mdW5jdGlvbihlKXt2YXIgdD1zKCk7cmV0dXJuIHRoaXMuYml0d2lzZVRvKGUsQyx0KSx0fSxpLnByb3RvdHlwZS5hbmROb3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9cygpO3JldHVybiB0aGlzLmJpdHdpc2VUbyhlLEUsdCksdH0saS5wcm90b3R5cGUubm90PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPXMoKSx0PTA7dDx0aGlzLnQ7Kyt0KWUuZGF0YVt0XT10aGlzLkRNJn50aGlzLmRhdGFbdF07cmV0dXJuIGUudD10aGlzLnQsZS5zPX50aGlzLnMsZX0saS5wcm90b3R5cGUuc2hpZnRMZWZ0PWZ1bmN0aW9uKGUpe3ZhciB0PXMoKTtyZXR1cm4gZTwwP3RoaXMuclNoaWZ0VG8oLWUsdCk6dGhpcy5sU2hpZnRUbyhlLHQpLHR9LGkucHJvdG90eXBlLnNoaWZ0UmlnaHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9cygpO3JldHVybiBlPDA/dGhpcy5sU2hpZnRUbygtZSx0KTp0aGlzLnJTaGlmdFRvKGUsdCksdH0saS5wcm90b3R5cGUuZ2V0TG93ZXN0U2V0Qml0PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTA7ZTx0aGlzLnQ7KytlKWlmKDAhPXRoaXMuZGF0YVtlXSlyZXR1cm4gZSp0aGlzLkRCK1ModGhpcy5kYXRhW2VdKTtyZXR1cm4gdGhpcy5zPDA/dGhpcy50KnRoaXMuREI6LTF9LGkucHJvdG90eXBlLmJpdENvdW50PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPTAsdD10aGlzLnMmdGhpcy5ETSxyPTA7cjx0aGlzLnQ7KytyKWUrPVQodGhpcy5kYXRhW3JdXnQpO3JldHVybiBlfSxpLnByb3RvdHlwZS50ZXN0Qml0PWZ1bmN0aW9uKGUpe3ZhciB0PU1hdGguZmxvb3IoZS90aGlzLkRCKTtyZXR1cm4gdD49dGhpcy50PzAhPXRoaXMuczowIT0odGhpcy5kYXRhW3RdJjE8PGUldGhpcy5EQil9LGkucHJvdG90eXBlLnNldEJpdD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jaGFuZ2VCaXQoZSx2KX0saS5wcm90b3R5cGUuY2xlYXJCaXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY2hhbmdlQml0KGUsRSl9LGkucHJvdG90eXBlLmZsaXBCaXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY2hhbmdlQml0KGUsQyl9LGkucHJvdG90eXBlLmFkZD1mdW5jdGlvbihlKXt2YXIgdD1zKCk7cmV0dXJuIHRoaXMuYWRkVG8oZSx0KSx0fSxpLnByb3RvdHlwZS5zdWJ0cmFjdD1mdW5jdGlvbihlKXt2YXIgdD1zKCk7cmV0dXJuIHRoaXMuc3ViVG8oZSx0KSx0fSxpLnByb3RvdHlwZS5tdWx0aXBseT1mdW5jdGlvbihlKXt2YXIgdD1zKCk7cmV0dXJuIHRoaXMubXVsdGlwbHlUbyhlLHQpLHR9LGkucHJvdG90eXBlLmRpdmlkZT1mdW5jdGlvbihlKXt2YXIgdD1zKCk7cmV0dXJuIHRoaXMuZGl2UmVtVG8oZSx0LG51bGwpLHR9LGkucHJvdG90eXBlLnJlbWFpbmRlcj1mdW5jdGlvbihlKXt2YXIgdD1zKCk7cmV0dXJuIHRoaXMuZGl2UmVtVG8oZSxudWxsLHQpLHR9LGkucHJvdG90eXBlLmRpdmlkZUFuZFJlbWFpbmRlcj1mdW5jdGlvbihlKXt2YXIgdD1zKCkscj1zKCk7cmV0dXJuIHRoaXMuZGl2UmVtVG8oZSx0LHIpLG5ldyBBcnJheSh0LHIpfSxpLnByb3RvdHlwZS5tb2RQb3c9ZnVuY3Rpb24oZSx0KXt2YXIgcixhLG49ZS5iaXRMZW5ndGgoKSxpPWgoMSk7aWYobjw9MClyZXR1cm4gaTtyPW48MTg/MTpuPDQ4PzM6bjwxNDQ/NDpuPDc2OD81OjYsYT1uPDg/bmV3IHkodCk6dC5pc0V2ZW4oKT9uZXcgQSh0KTpuZXcgZyh0KTt2YXIgbz1uZXcgQXJyYXksYz0zLHU9ci0xLGw9KDE8PHIpLTE7aWYob1sxXT1hLmNvbnZlcnQodGhpcykscj4xKXt2YXIgcD1zKCk7Zm9yKGEuc3FyVG8ob1sxXSxwKTtjPD1sOylvW2NdPXMoKSxhLm11bFRvKHAsb1tjLTJdLG9bY10pLGMrPTJ9dmFyIGYsbSx2PWUudC0xLEM9ITAsRT1zKCk7Zm9yKG49ZChlLmRhdGFbdl0pLTE7dj49MDspe2ZvcihuPj11P2Y9ZS5kYXRhW3ZdPj5uLXUmbDooZj0oZS5kYXRhW3ZdJigxPDxuKzEpLTEpPDx1LW4sdj4wJiYoZnw9ZS5kYXRhW3YtMV0+PnRoaXMuREIrbi11KSksYz1yOzA9PSgxJmYpOylmPj49MSwtLWM7aWYoKG4tPWMpPDAmJihuKz10aGlzLkRCLC0tdiksQylvW2ZdLmNvcHlUbyhpKSxDPSExO2Vsc2V7Zm9yKDtjPjE7KWEuc3FyVG8oaSxFKSxhLnNxclRvKEUsaSksYy09MjtjPjA/YS5zcXJUbyhpLEUpOihtPWksaT1FLEU9bSksYS5tdWxUbyhFLG9bZl0saSl9Zm9yKDt2Pj0wJiYwPT0oZS5kYXRhW3ZdJjE8PG4pOylhLnNxclRvKGksRSksbT1pLGk9RSxFPW0sLS1uPDAmJihuPXRoaXMuREItMSwtLXYpfXJldHVybiBhLnJldmVydChpKX0saS5wcm90b3R5cGUubW9kSW52ZXJzZT1mdW5jdGlvbihlKXt2YXIgdD1lLmlzRXZlbigpO2lmKHRoaXMuaXNFdmVuKCkmJnR8fDA9PWUuc2lnbnVtKCkpcmV0dXJuIGkuWkVSTztmb3IodmFyIHI9ZS5jbG9uZSgpLGE9dGhpcy5jbG9uZSgpLG49aCgxKSxzPWgoMCksbz1oKDApLGM9aCgxKTswIT1yLnNpZ251bSgpOyl7Zm9yKDtyLmlzRXZlbigpOylyLnJTaGlmdFRvKDEsciksdD8obi5pc0V2ZW4oKSYmcy5pc0V2ZW4oKXx8KG4uYWRkVG8odGhpcyxuKSxzLnN1YlRvKGUscykpLG4uclNoaWZ0VG8oMSxuKSk6cy5pc0V2ZW4oKXx8cy5zdWJUbyhlLHMpLHMuclNoaWZ0VG8oMSxzKTtmb3IoO2EuaXNFdmVuKCk7KWEuclNoaWZ0VG8oMSxhKSx0PyhvLmlzRXZlbigpJiZjLmlzRXZlbigpfHwoby5hZGRUbyh0aGlzLG8pLGMuc3ViVG8oZSxjKSksby5yU2hpZnRUbygxLG8pKTpjLmlzRXZlbigpfHxjLnN1YlRvKGUsYyksYy5yU2hpZnRUbygxLGMpO3IuY29tcGFyZVRvKGEpPj0wPyhyLnN1YlRvKGEsciksdCYmbi5zdWJUbyhvLG4pLHMuc3ViVG8oYyxzKSk6KGEuc3ViVG8ocixhKSx0JiZvLnN1YlRvKG4sbyksYy5zdWJUbyhzLGMpKX1yZXR1cm4gMCE9YS5jb21wYXJlVG8oaS5PTkUpP2kuWkVSTzpjLmNvbXBhcmVUbyhlKT49MD9jLnN1YnRyYWN0KGUpOmMuc2lnbnVtKCk8MD8oYy5hZGRUbyhlLGMpLGMuc2lnbnVtKCk8MD9jLmFkZChlKTpjKTpjfSxpLnByb3RvdHlwZS5wb3c9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZXhwKGUsbmV3IEkpfSxpLnByb3RvdHlwZS5nY2Q9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5zPDA/dGhpcy5uZWdhdGUoKTp0aGlzLmNsb25lKCkscj1lLnM8MD9lLm5lZ2F0ZSgpOmUuY2xvbmUoKTtpZih0LmNvbXBhcmVUbyhyKTwwKXt2YXIgYT10O3Q9cixyPWF9dmFyIG49dC5nZXRMb3dlc3RTZXRCaXQoKSxpPXIuZ2V0TG93ZXN0U2V0Qml0KCk7aWYoaTwwKXJldHVybiB0O2ZvcihuPGkmJihpPW4pLGk+MCYmKHQuclNoaWZ0VG8oaSx0KSxyLnJTaGlmdFRvKGkscikpO3Quc2lnbnVtKCk+MDspKG49dC5nZXRMb3dlc3RTZXRCaXQoKSk+MCYmdC5yU2hpZnRUbyhuLHQpLChuPXIuZ2V0TG93ZXN0U2V0Qml0KCkpPjAmJnIuclNoaWZ0VG8obixyKSx0LmNvbXBhcmVUbyhyKT49MD8odC5zdWJUbyhyLHQpLHQuclNoaWZ0VG8oMSx0KSk6KHIuc3ViVG8odCxyKSxyLnJTaGlmdFRvKDEscikpO3JldHVybiBpPjAmJnIubFNoaWZ0VG8oaSxyKSxyfSxpLnByb3RvdHlwZS5pc1Byb2JhYmxlUHJpbWU9ZnVuY3Rpb24oZSl7dmFyIHQscj10aGlzLmFicygpO2lmKDE9PXIudCYmci5kYXRhWzBdPD1CW0IubGVuZ3RoLTFdKXtmb3IodD0wO3Q8Qi5sZW5ndGg7Kyt0KWlmKHIuZGF0YVswXT09Qlt0XSlyZXR1cm4hMDtyZXR1cm4hMX1pZihyLmlzRXZlbigpKXJldHVybiExO2Zvcih0PTE7dDxCLmxlbmd0aDspe2Zvcih2YXIgYT1CW3RdLG49dCsxO248Qi5sZW5ndGgmJmE8TjspYSo9QltuKytdO2ZvcihhPXIubW9kSW50KGEpO3Q8bjspaWYoYSVCW3QrK109PTApcmV0dXJuITF9cmV0dXJuIHIubWlsbGVyUmFiaW4oZSl9fSxmdW5jdGlvbihlLHQscil7dmFyIGE9cigwKTtyKDEpLGUuZXhwb3J0cz1hLmNpcGhlcj1hLmNpcGhlcnx8e30sYS5jaXBoZXIuYWxnb3JpdGhtcz1hLmNpcGhlci5hbGdvcml0aG1zfHx7fSxhLmNpcGhlci5jcmVhdGVDaXBoZXI9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lO2lmKCJzdHJpbmciPT10eXBlb2YgciYmKHI9YS5jaXBoZXIuZ2V0QWxnb3JpdGhtKHIpKSYmKHI9cigpKSwhcil0aHJvdyBuZXcgRXJyb3IoIlVuc3VwcG9ydGVkIGFsZ29yaXRobTogIitlKTtyZXR1cm4gbmV3IGEuY2lwaGVyLkJsb2NrQ2lwaGVyKHthbGdvcml0aG06cixrZXk6dCxkZWNyeXB0OiExfSl9LGEuY2lwaGVyLmNyZWF0ZURlY2lwaGVyPWZ1bmN0aW9uKGUsdCl7dmFyIHI9ZTtpZigic3RyaW5nIj09dHlwZW9mIHImJihyPWEuY2lwaGVyLmdldEFsZ29yaXRobShyKSkmJihyPXIoKSksIXIpdGhyb3cgbmV3IEVycm9yKCJVbnN1cHBvcnRlZCBhbGdvcml0aG06ICIrZSk7cmV0dXJuIG5ldyBhLmNpcGhlci5CbG9ja0NpcGhlcih7YWxnb3JpdGhtOnIsa2V5OnQsZGVjcnlwdDohMH0pfSxhLmNpcGhlci5yZWdpc3RlckFsZ29yaXRobT1mdW5jdGlvbihlLHQpe2U9ZS50b1VwcGVyQ2FzZSgpLGEuY2lwaGVyLmFsZ29yaXRobXNbZV09dH0sYS5jaXBoZXIuZ2V0QWxnb3JpdGhtPWZ1bmN0aW9uKGUpe3JldHVybihlPWUudG9VcHBlckNhc2UoKSlpbiBhLmNpcGhlci5hbGdvcml0aG1zP2EuY2lwaGVyLmFsZ29yaXRobXNbZV06bnVsbH07dmFyIG49YS5jaXBoZXIuQmxvY2tDaXBoZXI9ZnVuY3Rpb24oZSl7dGhpcy5hbGdvcml0aG09ZS5hbGdvcml0aG0sdGhpcy5tb2RlPXRoaXMuYWxnb3JpdGhtLm1vZGUsdGhpcy5ibG9ja1NpemU9dGhpcy5tb2RlLmJsb2NrU2l6ZSx0aGlzLl9maW5pc2g9ITEsdGhpcy5faW5wdXQ9bnVsbCx0aGlzLm91dHB1dD1udWxsLHRoaXMuX29wPWUuZGVjcnlwdD90aGlzLm1vZGUuZGVjcnlwdDp0aGlzLm1vZGUuZW5jcnlwdCx0aGlzLl9kZWNyeXB0PWUuZGVjcnlwdCx0aGlzLmFsZ29yaXRobS5pbml0aWFsaXplKGUpfTtuLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihlKXtlPWV8fHt9O3ZhciB0PXt9O2Zvcih2YXIgciBpbiBlKXRbcl09ZVtyXTt0LmRlY3J5cHQ9dGhpcy5fZGVjcnlwdCx0aGlzLl9maW5pc2g9ITEsdGhpcy5faW5wdXQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpLHRoaXMub3V0cHV0PWUub3V0cHV0fHxhLnV0aWwuY3JlYXRlQnVmZmVyKCksdGhpcy5tb2RlLnN0YXJ0KHQpfSxuLnByb3RvdHlwZS51cGRhdGU9ZnVuY3Rpb24oZSl7Zm9yKGUmJnRoaXMuX2lucHV0LnB1dEJ1ZmZlcihlKTshdGhpcy5fb3AuY2FsbCh0aGlzLm1vZGUsdGhpcy5faW5wdXQsdGhpcy5vdXRwdXQsdGhpcy5fZmluaXNoKSYmIXRoaXMuX2ZpbmlzaDspO3RoaXMuX2lucHV0LmNvbXBhY3QoKX0sbi5wcm90b3R5cGUuZmluaXNoPWZ1bmN0aW9uKGUpeyFlfHwiRUNCIiE9PXRoaXMubW9kZS5uYW1lJiYiQ0JDIiE9PXRoaXMubW9kZS5uYW1lfHwodGhpcy5tb2RlLnBhZD1mdW5jdGlvbih0KXtyZXR1cm4gZSh0aGlzLmJsb2NrU2l6ZSx0LCExKX0sdGhpcy5tb2RlLnVucGFkPWZ1bmN0aW9uKHQpe3JldHVybiBlKHRoaXMuYmxvY2tTaXplLHQsITApfSk7dmFyIHQ9e307cmV0dXJuIHQuZGVjcnlwdD10aGlzLl9kZWNyeXB0LHQub3ZlcmZsb3c9dGhpcy5faW5wdXQubGVuZ3RoKCkldGhpcy5ibG9ja1NpemUsISghdGhpcy5fZGVjcnlwdCYmdGhpcy5tb2RlLnBhZCYmIXRoaXMubW9kZS5wYWQodGhpcy5faW5wdXQsdCkpJiYodGhpcy5fZmluaXNoPSEwLHRoaXMudXBkYXRlKCksISh0aGlzLl9kZWNyeXB0JiZ0aGlzLm1vZGUudW5wYWQmJiF0aGlzLm1vZGUudW5wYWQodGhpcy5vdXRwdXQsdCkpJiYhKHRoaXMubW9kZS5hZnRlckZpbmlzaCYmIXRoaXMubW9kZS5hZnRlckZpbmlzaCh0aGlzLm91dHB1dCx0KSkpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXIoMCk7cig0KSxyKDEpO3ZhciBuPWUuZXhwb3J0cz1hLm1kNT1hLm1kNXx8e307YS5tZC5tZDU9YS5tZC5hbGdvcml0aG1zLm1kNT1uLG4uY3JlYXRlPWZ1bmN0aW9uKCl7dXx8ZnVuY3Rpb24oKXtpPVN0cmluZy5mcm9tQ2hhckNvZGUoMTI4KSxpKz1hLnV0aWwuZmlsbFN0cmluZyhTdHJpbmcuZnJvbUNoYXJDb2RlKDApLDY0KSxzPVswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDEsNiwxMSwwLDUsMTAsMTUsNCw5LDE0LDMsOCwxMywyLDcsMTIsNSw4LDExLDE0LDEsNCw3LDEwLDEzLDAsMyw2LDksMTIsMTUsMiwwLDcsMTQsNSwxMiwzLDEwLDEsOCwxNSw2LDEzLDQsMTEsMiw5XSxvPVs3LDEyLDE3LDIyLDcsMTIsMTcsMjIsNywxMiwxNywyMiw3LDEyLDE3LDIyLDUsOSwxNCwyMCw1LDksMTQsMjAsNSw5LDE0LDIwLDUsOSwxNCwyMCw0LDExLDE2LDIzLDQsMTEsMTYsMjMsNCwxMSwxNiwyMyw0LDExLDE2LDIzLDYsMTAsMTUsMjEsNiwxMCwxNSwyMSw2LDEwLDE1LDIxLDYsMTAsMTUsMjFdLGM9bmV3IEFycmF5KDY0KTtmb3IodmFyIGU9MDtlPDY0OysrZSljW2VdPU1hdGguZmxvb3IoNDI5NDk2NzI5NipNYXRoLmFicyhNYXRoLnNpbihlKzEpKSk7dT0hMH0oKTt2YXIgZT1udWxsLHQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpLHI9bmV3IEFycmF5KDE2KSxuPXthbGdvcml0aG06Im1kNSIsYmxvY2tMZW5ndGg6NjQsZGlnZXN0TGVuZ3RoOjE2LG1lc3NhZ2VMZW5ndGg6MCxmdWxsTWVzc2FnZUxlbmd0aDpudWxsLG1lc3NhZ2VMZW5ndGhTaXplOjgsc3RhcnQ6ZnVuY3Rpb24oKXtuLm1lc3NhZ2VMZW5ndGg9MCxuLmZ1bGxNZXNzYWdlTGVuZ3RoPW4ubWVzc2FnZUxlbmd0aDY0PVtdO2Zvcih2YXIgcj1uLm1lc3NhZ2VMZW5ndGhTaXplLzQsaT0wO2k8cjsrK2kpbi5mdWxsTWVzc2FnZUxlbmd0aC5wdXNoKDApO3JldHVybiB0PWEudXRpbC5jcmVhdGVCdWZmZXIoKSxlPXtoMDoxNzMyNTg0MTkzLGgxOjQwMjMyMzM0MTcsaDI6MjU2MjM4MzEwMixoMzoyNzE3MzM4Nzh9LG59fTtyZXR1cm4gbi5zdGFydCgpLG4udXBkYXRlPWZ1bmN0aW9uKGkscyl7InV0ZjgiPT09cyYmKGk9YS51dGlsLmVuY29kZVV0ZjgoaSkpO3ZhciBvPWkubGVuZ3RoO24ubWVzc2FnZUxlbmd0aCs9byxvPVtvLzQyOTQ5NjcyOTY+Pj4wLG8+Pj4wXTtmb3IodmFyIGM9bi5mdWxsTWVzc2FnZUxlbmd0aC5sZW5ndGgtMTtjPj0wOy0tYyluLmZ1bGxNZXNzYWdlTGVuZ3RoW2NdKz1vWzFdLG9bMV09b1swXSsobi5mdWxsTWVzc2FnZUxlbmd0aFtjXS80Mjk0OTY3Mjk2Pj4+MCksbi5mdWxsTWVzc2FnZUxlbmd0aFtjXT1uLmZ1bGxNZXNzYWdlTGVuZ3RoW2NdPj4+MCxvWzBdPW9bMV0vNDI5NDk2NzI5Nj4+PjA7cmV0dXJuIHQucHV0Qnl0ZXMoaSksbChlLHIsdCksKHQucmVhZD4yMDQ4fHwwPT09dC5sZW5ndGgoKSkmJnQuY29tcGFjdCgpLG59LG4uZGlnZXN0PWZ1bmN0aW9uKCl7dmFyIHM9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO3MucHV0Qnl0ZXModC5ieXRlcygpKTt2YXIgbz1uLmZ1bGxNZXNzYWdlTGVuZ3RoW24uZnVsbE1lc3NhZ2VMZW5ndGgubGVuZ3RoLTFdK24ubWVzc2FnZUxlbmd0aFNpemUmbi5ibG9ja0xlbmd0aC0xO3MucHV0Qnl0ZXMoaS5zdWJzdHIoMCxuLmJsb2NrTGVuZ3RoLW8pKTtmb3IodmFyIGMsdT0wLHA9bi5mdWxsTWVzc2FnZUxlbmd0aC5sZW5ndGgtMTtwPj0wOy0tcCl1PShjPTgqbi5mdWxsTWVzc2FnZUxlbmd0aFtwXSt1KS80Mjk0OTY3Mjk2Pj4+MCxzLnB1dEludDMyTGUoYz4+PjApO3ZhciBmPXtoMDplLmgwLGgxOmUuaDEsaDI6ZS5oMixoMzplLmgzfTtsKGYscixzKTt2YXIgaD1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7cmV0dXJuIGgucHV0SW50MzJMZShmLmgwKSxoLnB1dEludDMyTGUoZi5oMSksaC5wdXRJbnQzMkxlKGYuaDIpLGgucHV0SW50MzJMZShmLmgzKSxofSxufTt2YXIgaT1udWxsLHM9bnVsbCxvPW51bGwsYz1udWxsLHU9ITE7ZnVuY3Rpb24gbChlLHQscil7Zm9yKHZhciBhLG4saSx1LGwscCxmLGg9ci5sZW5ndGgoKTtoPj02NDspe2ZvcihuPWUuaDAsaT1lLmgxLHU9ZS5oMixsPWUuaDMsZj0wO2Y8MTY7KytmKXRbZl09ci5nZXRJbnQzMkxlKCksYT1uKyhsXmkmKHVebCkpK2NbZl0rdFtmXSxuPWwsbD11LHU9aSxpKz1hPDwocD1vW2ZdKXxhPj4+MzItcDtmb3IoO2Y8MzI7KytmKWE9bisodV5sJihpXnUpKStjW2ZdK3Rbc1tmXV0sbj1sLGw9dSx1PWksaSs9YTw8KHA9b1tmXSl8YT4+PjMyLXA7Zm9yKDtmPDQ4OysrZilhPW4rKGledV5sKStjW2ZdK3Rbc1tmXV0sbj1sLGw9dSx1PWksaSs9YTw8KHA9b1tmXSl8YT4+PjMyLXA7Zm9yKDtmPDY0OysrZilhPW4rKHVeKGl8fmwpKStjW2ZdK3Rbc1tmXV0sbj1sLGw9dSx1PWksaSs9YTw8KHA9b1tmXSl8YT4+PjMyLXA7ZS5oMD1lLmgwK258MCxlLmgxPWUuaDEraXwwLGUuaDI9ZS5oMit1fDAsZS5oMz1lLmgzK2x8MCxoLT02NH19fSxmdW5jdGlvbihlLHQscil7dmFyIGE9cigwKTtyKDgpLHIoNCkscigxKTt2YXIgbixpPWEucGtjczU9YS5wa2NzNXx8e307YS51dGlsLmlzTm9kZWpzJiYhYS5vcHRpb25zLnVzZVB1cmVKYXZhU2NyaXB0JiYobj1yKDE2KSksZS5leHBvcnRzPWEucGJrZGYyPWkucGJrZGYyPWZ1bmN0aW9uKGUsdCxyLGkscyxvKXtpZigiZnVuY3Rpb24iPT10eXBlb2YgcyYmKG89cyxzPW51bGwpLGEudXRpbC5pc05vZGVqcyYmIWEub3B0aW9ucy51c2VQdXJlSmF2YVNjcmlwdCYmbi5wYmtkZjImJihudWxsPT09c3x8Im9iamVjdCIhPXR5cGVvZiBzKSYmKG4ucGJrZGYyU3luYy5sZW5ndGg+NHx8IXN8fCJzaGExIj09PXMpKXJldHVybiJzdHJpbmciIT10eXBlb2YgcyYmKHM9InNoYTEiKSxlPUJ1ZmZlci5mcm9tKGUsImJpbmFyeSIpLHQ9QnVmZmVyLmZyb20odCwiYmluYXJ5Iiksbz80PT09bi5wYmtkZjJTeW5jLmxlbmd0aD9uLnBia2RmMihlLHQscixpLChmdW5jdGlvbihlLHQpe2lmKGUpcmV0dXJuIG8oZSk7byhudWxsLHQudG9TdHJpbmcoImJpbmFyeSIpKX0pKTpuLnBia2RmMihlLHQscixpLHMsKGZ1bmN0aW9uKGUsdCl7aWYoZSlyZXR1cm4gbyhlKTtvKG51bGwsdC50b1N0cmluZygiYmluYXJ5IikpfSkpOjQ9PT1uLnBia2RmMlN5bmMubGVuZ3RoP24ucGJrZGYyU3luYyhlLHQscixpKS50b1N0cmluZygiYmluYXJ5Iik6bi5wYmtkZjJTeW5jKGUsdCxyLGkscykudG9TdHJpbmcoImJpbmFyeSIpO2lmKG51bGw9PXMmJihzPSJzaGExIiksInN0cmluZyI9PXR5cGVvZiBzKXtpZighKHMgaW4gYS5tZC5hbGdvcml0aG1zKSl0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gaGFzaCBhbGdvcml0aG06ICIrcyk7cz1hLm1kW3NdLmNyZWF0ZSgpfXZhciBjPXMuZGlnZXN0TGVuZ3RoO2lmKGk+NDI5NDk2NzI5NSpjKXt2YXIgdT1uZXcgRXJyb3IoIkRlcml2ZWQga2V5IGlzIHRvbyBsb25nLiIpO2lmKG8pcmV0dXJuIG8odSk7dGhyb3cgdX12YXIgbD1NYXRoLmNlaWwoaS9jKSxwPWktKGwtMSkqYyxmPWEuaG1hYy5jcmVhdGUoKTtmLnN0YXJ0KHMsZSk7dmFyIGgsZCx5LGc9IiI7aWYoIW8pe2Zvcih2YXIgbT0xO208PWw7KyttKXtmLnN0YXJ0KG51bGwsbnVsbCksZi51cGRhdGUodCksZi51cGRhdGUoYS51dGlsLmludDMyVG9CeXRlcyhtKSksaD15PWYuZGlnZXN0KCkuZ2V0Qnl0ZXMoKTtmb3IodmFyIHY9Mjt2PD1yOysrdilmLnN0YXJ0KG51bGwsbnVsbCksZi51cGRhdGUoeSksZD1mLmRpZ2VzdCgpLmdldEJ5dGVzKCksaD1hLnV0aWwueG9yQnl0ZXMoaCxkLGMpLHk9ZDtnKz1tPGw/aDpoLnN1YnN0cigwLHApfXJldHVybiBnfW09MTtmdW5jdGlvbiBDKCl7aWYobT5sKXJldHVybiBvKG51bGwsZyk7Zi5zdGFydChudWxsLG51bGwpLGYudXBkYXRlKHQpLGYudXBkYXRlKGEudXRpbC5pbnQzMlRvQnl0ZXMobSkpLGg9eT1mLmRpZ2VzdCgpLmdldEJ5dGVzKCksdj0yLEUoKX1mdW5jdGlvbiBFKCl7aWYodjw9cilyZXR1cm4gZi5zdGFydChudWxsLG51bGwpLGYudXBkYXRlKHkpLGQ9Zi5kaWdlc3QoKS5nZXRCeXRlcygpLGg9YS51dGlsLnhvckJ5dGVzKGgsZCxjKSx5PWQsKyt2LGEudXRpbC5zZXRJbW1lZGlhdGUoRSk7Zys9bTxsP2g6aC5zdWJzdHIoMCxwKSwrK20sQygpfUMoKX19LGZ1bmN0aW9uKGUsdCl7fSxmdW5jdGlvbihlLHQscil7dmFyIGE9cigwKTtyKDUpLHIoMykscigxMCkscig0KSxyKDM5KSxyKDYpLHIoNykscigxOCkscigxMSkscigxKTt2YXIgbj1hLmFzbjEsaT1lLmV4cG9ydHM9YS5wa2k9YS5wa2l8fHt9LHM9aS5vaWRzLG89e307by5DTj1zLmNvbW1vbk5hbWUsby5jb21tb25OYW1lPSJDTiIsby5DPXMuY291bnRyeU5hbWUsby5jb3VudHJ5TmFtZT0iQyIsby5MPXMubG9jYWxpdHlOYW1lLG8ubG9jYWxpdHlOYW1lPSJMIixvLlNUPXMuc3RhdGVPclByb3ZpbmNlTmFtZSxvLnN0YXRlT3JQcm92aW5jZU5hbWU9IlNUIixvLk89cy5vcmdhbml6YXRpb25OYW1lLG8ub3JnYW5pemF0aW9uTmFtZT0iTyIsby5PVT1zLm9yZ2FuaXphdGlvbmFsVW5pdE5hbWUsby5vcmdhbml6YXRpb25hbFVuaXROYW1lPSJPVSIsby5FPXMuZW1haWxBZGRyZXNzLG8uZW1haWxBZGRyZXNzPSJFIjt2YXIgYz1hLnBraS5yc2EucHVibGljS2V5VmFsaWRhdG9yLHU9e25hbWU6IkNlcnRpZmljYXRlIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCx2YWx1ZTpbe25hbWU6IkNlcnRpZmljYXRlLlRCU0NlcnRpZmljYXRlIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCxjYXB0dXJlQXNuMToidGJzQ2VydGlmaWNhdGUiLHZhbHVlOlt7bmFtZToiQ2VydGlmaWNhdGUuVEJTQ2VydGlmaWNhdGUudmVyc2lvbiIsdGFnQ2xhc3M6bi5DbGFzcy5DT05URVhUX1NQRUNJRklDLHR5cGU6MCxjb25zdHJ1Y3RlZDohMCxvcHRpb25hbDohMCx2YWx1ZTpbe25hbWU6IkNlcnRpZmljYXRlLlRCU0NlcnRpZmljYXRlLnZlcnNpb24uaW50ZWdlciIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJjZXJ0VmVyc2lvbiJ9XX0se25hbWU6IkNlcnRpZmljYXRlLlRCU0NlcnRpZmljYXRlLnNlcmlhbE51bWJlciIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJjZXJ0U2VyaWFsTnVtYmVyIn0se25hbWU6IkNlcnRpZmljYXRlLlRCU0NlcnRpZmljYXRlLnNpZ25hdHVyZSIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsdmFsdWU6W3tuYW1lOiJDZXJ0aWZpY2F0ZS5UQlNDZXJ0aWZpY2F0ZS5zaWduYXR1cmUuYWxnb3JpdGhtIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5PSUQsY29uc3RydWN0ZWQ6ITEsY2FwdHVyZToiY2VydGluZm9TaWduYXR1cmVPaWQifSx7bmFtZToiQ2VydGlmaWNhdGUuVEJTQ2VydGlmaWNhdGUuc2lnbmF0dXJlLnBhcmFtZXRlcnMiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLG9wdGlvbmFsOiEwLGNhcHR1cmVBc24xOiJjZXJ0aW5mb1NpZ25hdHVyZVBhcmFtcyJ9XX0se25hbWU6IkNlcnRpZmljYXRlLlRCU0NlcnRpZmljYXRlLmlzc3VlciIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsY2FwdHVyZUFzbjE6ImNlcnRJc3N1ZXIifSx7bmFtZToiQ2VydGlmaWNhdGUuVEJTQ2VydGlmaWNhdGUudmFsaWRpdHkiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiQ2VydGlmaWNhdGUuVEJTQ2VydGlmaWNhdGUudmFsaWRpdHkubm90QmVmb3JlICh1dGMpIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5VVENUSU1FLGNvbnN0cnVjdGVkOiExLG9wdGlvbmFsOiEwLGNhcHR1cmU6ImNlcnRWYWxpZGl0eTFVVENUaW1lIn0se25hbWU6IkNlcnRpZmljYXRlLlRCU0NlcnRpZmljYXRlLnZhbGlkaXR5Lm5vdEJlZm9yZSAoZ2VuZXJhbGl6ZWQpIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5HRU5FUkFMSVpFRFRJTUUsY29uc3RydWN0ZWQ6ITEsb3B0aW9uYWw6ITAsY2FwdHVyZToiY2VydFZhbGlkaXR5MkdlbmVyYWxpemVkVGltZSJ9LHtuYW1lOiJDZXJ0aWZpY2F0ZS5UQlNDZXJ0aWZpY2F0ZS52YWxpZGl0eS5ub3RBZnRlciAodXRjKSIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuVVRDVElNRSxjb25zdHJ1Y3RlZDohMSxvcHRpb25hbDohMCxjYXB0dXJlOiJjZXJ0VmFsaWRpdHkzVVRDVGltZSJ9LHtuYW1lOiJDZXJ0aWZpY2F0ZS5UQlNDZXJ0aWZpY2F0ZS52YWxpZGl0eS5ub3RBZnRlciAoZ2VuZXJhbGl6ZWQpIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5HRU5FUkFMSVpFRFRJTUUsY29uc3RydWN0ZWQ6ITEsb3B0aW9uYWw6ITAsY2FwdHVyZToiY2VydFZhbGlkaXR5NEdlbmVyYWxpemVkVGltZSJ9XX0se25hbWU6IkNlcnRpZmljYXRlLlRCU0NlcnRpZmljYXRlLnN1YmplY3QiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLGNhcHR1cmVBc24xOiJjZXJ0U3ViamVjdCJ9LGMse25hbWU6IkNlcnRpZmljYXRlLlRCU0NlcnRpZmljYXRlLmlzc3VlclVuaXF1ZUlEIix0YWdDbGFzczpuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsdHlwZToxLGNvbnN0cnVjdGVkOiEwLG9wdGlvbmFsOiEwLHZhbHVlOlt7bmFtZToiQ2VydGlmaWNhdGUuVEJTQ2VydGlmaWNhdGUuaXNzdWVyVW5pcXVlSUQuaWQiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLkJJVFNUUklORyxjb25zdHJ1Y3RlZDohMSxjYXB0dXJlQml0U3RyaW5nVmFsdWU6ImNlcnRJc3N1ZXJVbmlxdWVJZCJ9XX0se25hbWU6IkNlcnRpZmljYXRlLlRCU0NlcnRpZmljYXRlLnN1YmplY3RVbmlxdWVJRCIsdGFnQ2xhc3M6bi5DbGFzcy5DT05URVhUX1NQRUNJRklDLHR5cGU6Mixjb25zdHJ1Y3RlZDohMCxvcHRpb25hbDohMCx2YWx1ZTpbe25hbWU6IkNlcnRpZmljYXRlLlRCU0NlcnRpZmljYXRlLnN1YmplY3RVbmlxdWVJRC5pZCIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuQklUU1RSSU5HLGNvbnN0cnVjdGVkOiExLGNhcHR1cmVCaXRTdHJpbmdWYWx1ZToiY2VydFN1YmplY3RVbmlxdWVJZCJ9XX0se25hbWU6IkNlcnRpZmljYXRlLlRCU0NlcnRpZmljYXRlLmV4dGVuc2lvbnMiLHRhZ0NsYXNzOm4uQ2xhc3MuQ09OVEVYVF9TUEVDSUZJQyx0eXBlOjMsY29uc3RydWN0ZWQ6ITAsY2FwdHVyZUFzbjE6ImNlcnRFeHRlbnNpb25zIixvcHRpb25hbDohMH1dfSx7bmFtZToiQ2VydGlmaWNhdGUuc2lnbmF0dXJlQWxnb3JpdGhtIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCx2YWx1ZTpbe25hbWU6IkNlcnRpZmljYXRlLnNpZ25hdHVyZUFsZ29yaXRobS5hbGdvcml0aG0iLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLk9JRCxjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJjZXJ0U2lnbmF0dXJlT2lkIn0se25hbWU6IkNlcnRpZmljYXRlLlRCU0NlcnRpZmljYXRlLnNpZ25hdHVyZS5wYXJhbWV0ZXJzIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCxvcHRpb25hbDohMCxjYXB0dXJlQXNuMToiY2VydFNpZ25hdHVyZVBhcmFtcyJ9XX0se25hbWU6IkNlcnRpZmljYXRlLnNpZ25hdHVyZVZhbHVlIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5CSVRTVFJJTkcsY29uc3RydWN0ZWQ6ITEsY2FwdHVyZUJpdFN0cmluZ1ZhbHVlOiJjZXJ0U2lnbmF0dXJlIn1dfSxsPXtuYW1lOiJyc2Fwc3MiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToicnNhcHNzLmhhc2hBbGdvcml0aG0iLHRhZ0NsYXNzOm4uQ2xhc3MuQ09OVEVYVF9TUEVDSUZJQyx0eXBlOjAsY29uc3RydWN0ZWQ6ITAsdmFsdWU6W3tuYW1lOiJyc2Fwc3MuaGFzaEFsZ29yaXRobS5BbGdvcml0aG1JZGVudGlmaWVyIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uQ2xhc3MuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsb3B0aW9uYWw6ITAsdmFsdWU6W3tuYW1lOiJyc2Fwc3MuaGFzaEFsZ29yaXRobS5BbGdvcml0aG1JZGVudGlmaWVyLmFsZ29yaXRobSIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuT0lELGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6Imhhc2hPaWQifV19XX0se25hbWU6InJzYXBzcy5tYXNrR2VuQWxnb3JpdGhtIix0YWdDbGFzczpuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsdHlwZToxLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToicnNhcHNzLm1hc2tHZW5BbGdvcml0aG0uQWxnb3JpdGhtSWRlbnRpZmllciIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLkNsYXNzLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLG9wdGlvbmFsOiEwLHZhbHVlOlt7bmFtZToicnNhcHNzLm1hc2tHZW5BbGdvcml0aG0uQWxnb3JpdGhtSWRlbnRpZmllci5hbGdvcml0aG0iLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLk9JRCxjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJtYXNrR2VuT2lkIn0se25hbWU6InJzYXBzcy5tYXNrR2VuQWxnb3JpdGhtLkFsZ29yaXRobUlkZW50aWZpZXIucGFyYW1zIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCx2YWx1ZTpbe25hbWU6InJzYXBzcy5tYXNrR2VuQWxnb3JpdGhtLkFsZ29yaXRobUlkZW50aWZpZXIucGFyYW1zLmFsZ29yaXRobSIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuT0lELGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6Im1hc2tHZW5IYXNoT2lkIn1dfV19XX0se25hbWU6InJzYXBzcy5zYWx0TGVuZ3RoIix0YWdDbGFzczpuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsdHlwZToyLG9wdGlvbmFsOiEwLHZhbHVlOlt7bmFtZToicnNhcHNzLnNhbHRMZW5ndGguc2FsdExlbmd0aCIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLkNsYXNzLklOVEVHRVIsY29uc3RydWN0ZWQ6ITEsY2FwdHVyZToic2FsdExlbmd0aCJ9XX0se25hbWU6InJzYXBzcy50cmFpbGVyRmllbGQiLHRhZ0NsYXNzOm4uQ2xhc3MuQ09OVEVYVF9TUEVDSUZJQyx0eXBlOjMsb3B0aW9uYWw6ITAsdmFsdWU6W3tuYW1lOiJyc2Fwc3MudHJhaWxlci50cmFpbGVyIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uQ2xhc3MuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJ0cmFpbGVyIn1dfV19LHA9e25hbWU6IkNlcnRpZmljYXRpb25SZXF1ZXN0SW5mbyIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsY2FwdHVyZUFzbjE6ImNlcnRpZmljYXRpb25SZXF1ZXN0SW5mbyIsdmFsdWU6W3tuYW1lOiJDZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm8uaW50ZWdlciIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJjZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm9WZXJzaW9uIn0se25hbWU6IkNlcnRpZmljYXRpb25SZXF1ZXN0SW5mby5zdWJqZWN0Iix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCxjYXB0dXJlQXNuMToiY2VydGlmaWNhdGlvblJlcXVlc3RJbmZvU3ViamVjdCJ9LGMse25hbWU6IkNlcnRpZmljYXRpb25SZXF1ZXN0SW5mby5hdHRyaWJ1dGVzIix0YWdDbGFzczpuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsdHlwZTowLGNvbnN0cnVjdGVkOiEwLG9wdGlvbmFsOiEwLGNhcHR1cmU6ImNlcnRpZmljYXRpb25SZXF1ZXN0SW5mb0F0dHJpYnV0ZXMiLHZhbHVlOlt7bmFtZToiQ2VydGlmaWNhdGlvblJlcXVlc3RJbmZvLmF0dHJpYnV0ZXMiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiQ2VydGlmaWNhdGlvblJlcXVlc3RJbmZvLmF0dHJpYnV0ZXMudHlwZSIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuT0lELGNvbnN0cnVjdGVkOiExfSx7bmFtZToiQ2VydGlmaWNhdGlvblJlcXVlc3RJbmZvLmF0dHJpYnV0ZXMudmFsdWUiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFVCxjb25zdHJ1Y3RlZDohMH1dfV19XX0sZj17bmFtZToiQ2VydGlmaWNhdGlvblJlcXVlc3QiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLGNhcHR1cmVBc24xOiJjc3IiLHZhbHVlOltwLHtuYW1lOiJDZXJ0aWZpY2F0aW9uUmVxdWVzdC5zaWduYXR1cmVBbGdvcml0aG0iLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiQ2VydGlmaWNhdGlvblJlcXVlc3Quc2lnbmF0dXJlQWxnb3JpdGhtLmFsZ29yaXRobSIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuT0lELGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6ImNzclNpZ25hdHVyZU9pZCJ9LHtuYW1lOiJDZXJ0aWZpY2F0aW9uUmVxdWVzdC5zaWduYXR1cmVBbGdvcml0aG0ucGFyYW1ldGVycyIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsb3B0aW9uYWw6ITAsY2FwdHVyZUFzbjE6ImNzclNpZ25hdHVyZVBhcmFtcyJ9XX0se25hbWU6IkNlcnRpZmljYXRpb25SZXF1ZXN0LnNpZ25hdHVyZSIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuQklUU1RSSU5HLGNvbnN0cnVjdGVkOiExLGNhcHR1cmVCaXRTdHJpbmdWYWx1ZToiY3NyU2lnbmF0dXJlIn1dfTtmdW5jdGlvbiBoKGUsdCl7InN0cmluZyI9PXR5cGVvZiB0JiYodD17c2hvcnROYW1lOnR9KTtmb3IodmFyIHIsYT1udWxsLG49MDtudWxsPT09YSYmbjxlLmF0dHJpYnV0ZXMubGVuZ3RoOysrbilyPWUuYXR0cmlidXRlc1tuXSwodC50eXBlJiZ0LnR5cGU9PT1yLnR5cGV8fHQubmFtZSYmdC5uYW1lPT09ci5uYW1lfHx0LnNob3J0TmFtZSYmdC5zaG9ydE5hbWU9PT1yLnNob3J0TmFtZSkmJihhPXIpO3JldHVybiBhfWkuUkROQXR0cmlidXRlc0FzQXJyYXk9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHIsYSxpLGM9W10sdT0wO3U8ZS52YWx1ZS5sZW5ndGg7Kyt1KXtyPWUudmFsdWVbdV07Zm9yKHZhciBsPTA7bDxyLnZhbHVlLmxlbmd0aDsrK2wpaT17fSxhPXIudmFsdWVbbF0saS50eXBlPW4uZGVyVG9PaWQoYS52YWx1ZVswXS52YWx1ZSksaS52YWx1ZT1hLnZhbHVlWzFdLnZhbHVlLGkudmFsdWVUYWdDbGFzcz1hLnZhbHVlWzFdLnR5cGUsaS50eXBlIGluIHMmJihpLm5hbWU9c1tpLnR5cGVdLGkubmFtZSBpbiBvJiYoaS5zaG9ydE5hbWU9b1tpLm5hbWVdKSksdCYmKHQudXBkYXRlKGkudHlwZSksdC51cGRhdGUoaS52YWx1ZSkpLGMucHVzaChpKX1yZXR1cm4gY30saS5DUklBdHRyaWJ1dGVzQXNBcnJheT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0wO3I8ZS5sZW5ndGg7KytyKWZvcih2YXIgYT1lW3JdLGM9bi5kZXJUb09pZChhLnZhbHVlWzBdLnZhbHVlKSx1PWEudmFsdWVbMV0udmFsdWUsbD0wO2w8dS5sZW5ndGg7KytsKXt2YXIgcD17fTtpZihwLnR5cGU9YyxwLnZhbHVlPXVbbF0udmFsdWUscC52YWx1ZVRhZ0NsYXNzPXVbbF0udHlwZSxwLnR5cGUgaW4gcyYmKHAubmFtZT1zW3AudHlwZV0scC5uYW1lIGluIG8mJihwLnNob3J0TmFtZT1vW3AubmFtZV0pKSxwLnR5cGU9PT1zLmV4dGVuc2lvblJlcXVlc3Qpe3AuZXh0ZW5zaW9ucz1bXTtmb3IodmFyIGY9MDtmPHAudmFsdWUubGVuZ3RoOysrZilwLmV4dGVuc2lvbnMucHVzaChpLmNlcnRpZmljYXRlRXh0ZW5zaW9uRnJvbUFzbjEocC52YWx1ZVtmXSkpfXQucHVzaChwKX1yZXR1cm4gdH07dmFyIGQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXt9O2lmKGUhPT1zWyJSU0FTU0EtUFNTIl0pcmV0dXJuIGE7ciYmKGE9e2hhc2g6e2FsZ29yaXRobU9pZDpzLnNoYTF9LG1nZjp7YWxnb3JpdGhtT2lkOnMubWdmMSxoYXNoOnthbGdvcml0aG1PaWQ6cy5zaGExfX0sc2FsdExlbmd0aDoyMH0pO3ZhciBpPXt9LG89W107aWYoIW4udmFsaWRhdGUodCxsLGksbykpe3ZhciBjPW5ldyBFcnJvcigiQ2Fubm90IHJlYWQgUlNBU1NBLVBTUyBwYXJhbWV0ZXIgYmxvY2suIik7dGhyb3cgYy5lcnJvcnM9byxjfXJldHVybiB2b2lkIDAhPT1pLmhhc2hPaWQmJihhLmhhc2g9YS5oYXNofHx7fSxhLmhhc2guYWxnb3JpdGhtT2lkPW4uZGVyVG9PaWQoaS5oYXNoT2lkKSksdm9pZCAwIT09aS5tYXNrR2VuT2lkJiYoYS5tZ2Y9YS5tZ2Z8fHt9LGEubWdmLmFsZ29yaXRobU9pZD1uLmRlclRvT2lkKGkubWFza0dlbk9pZCksYS5tZ2YuaGFzaD1hLm1nZi5oYXNofHx7fSxhLm1nZi5oYXNoLmFsZ29yaXRobU9pZD1uLmRlclRvT2lkKGkubWFza0dlbkhhc2hPaWQpKSx2b2lkIDAhPT1pLnNhbHRMZW5ndGgmJihhLnNhbHRMZW5ndGg9aS5zYWx0TGVuZ3RoLmNoYXJDb2RlQXQoMCkpLGF9O2Z1bmN0aW9uIHkoZSl7Zm9yKHZhciB0LHIsaT1uLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW10pLHM9ZS5hdHRyaWJ1dGVzLG89MDtvPHMubGVuZ3RoOysrbyl7dmFyIGM9KHQ9c1tvXSkudmFsdWUsdT1uLlR5cGUuUFJJTlRBQkxFU1RSSU5HOyJ2YWx1ZVRhZ0NsYXNzImluIHQmJih1PXQudmFsdWVUYWdDbGFzcyk9PT1uLlR5cGUuVVRGOCYmKGM9YS51dGlsLmVuY29kZVV0ZjgoYykpLHI9bi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFVCwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFtuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0lELCExLG4ub2lkVG9EZXIodC50eXBlKS5nZXRCeXRlcygpKSxuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCx1LCExLGMpXSldKSxpLnZhbHVlLnB1c2gocil9cmV0dXJuIGl9ZnVuY3Rpb24gZyhlKXtmb3IodmFyIHQscj0wO3I8ZS5sZW5ndGg7KytyKXtpZih2b2lkIDA9PT0odD1lW3JdKS5uYW1lJiYodC50eXBlJiZ0LnR5cGUgaW4gaS5vaWRzP3QubmFtZT1pLm9pZHNbdC50eXBlXTp0LnNob3J0TmFtZSYmdC5zaG9ydE5hbWUgaW4gbyYmKHQubmFtZT1pLm9pZHNbb1t0LnNob3J0TmFtZV1dKSksdm9pZCAwPT09dC50eXBlKXtpZighdC5uYW1lfHwhKHQubmFtZSBpbiBpLm9pZHMpKXRocm93KGM9bmV3IEVycm9yKCJBdHRyaWJ1dGUgdHlwZSBub3Qgc3BlY2lmaWVkLiIpKS5hdHRyaWJ1dGU9dCxjO3QudHlwZT1pLm9pZHNbdC5uYW1lXX1pZih2b2lkIDA9PT10LnNob3J0TmFtZSYmdC5uYW1lJiZ0Lm5hbWUgaW4gbyYmKHQuc2hvcnROYW1lPW9bdC5uYW1lXSksdC50eXBlPT09cy5leHRlbnNpb25SZXF1ZXN0JiYodC52YWx1ZUNvbnN0cnVjdGVkPSEwLHQudmFsdWVUYWdDbGFzcz1uLlR5cGUuU0VRVUVOQ0UsIXQudmFsdWUmJnQuZXh0ZW5zaW9ucykpe3QudmFsdWU9W107Zm9yKHZhciBhPTA7YTx0LmV4dGVuc2lvbnMubGVuZ3RoOysrYSl0LnZhbHVlLnB1c2goaS5jZXJ0aWZpY2F0ZUV4dGVuc2lvblRvQXNuMShtKHQuZXh0ZW5zaW9uc1thXSkpKX12YXIgYztpZih2b2lkIDA9PT10LnZhbHVlKXRocm93KGM9bmV3IEVycm9yKCJBdHRyaWJ1dGUgdmFsdWUgbm90IHNwZWNpZmllZC4iKSkuYXR0cmlidXRlPXQsY319ZnVuY3Rpb24gbShlLHQpe2lmKHQ9dHx8e30sdm9pZCAwPT09ZS5uYW1lJiZlLmlkJiZlLmlkIGluIGkub2lkcyYmKGUubmFtZT1pLm9pZHNbZS5pZF0pLHZvaWQgMD09PWUuaWQpe2lmKCFlLm5hbWV8fCEoZS5uYW1lIGluIGkub2lkcykpdGhyb3coUz1uZXcgRXJyb3IoIkV4dGVuc2lvbiBJRCBub3Qgc3BlY2lmaWVkLiIpKS5leHRlbnNpb249ZSxTO2UuaWQ9aS5vaWRzW2UubmFtZV19aWYodm9pZCAwIT09ZS52YWx1ZSlyZXR1cm4gZTtpZigia2V5VXNhZ2UiPT09ZS5uYW1lKXt2YXIgcj0wLG89MCxjPTA7ZS5kaWdpdGFsU2lnbmF0dXJlJiYob3w9MTI4LHI9NyksZS5ub25SZXB1ZGlhdGlvbiYmKG98PTY0LHI9NiksZS5rZXlFbmNpcGhlcm1lbnQmJihvfD0zMixyPTUpLGUuZGF0YUVuY2lwaGVybWVudCYmKG98PTE2LHI9NCksZS5rZXlBZ3JlZW1lbnQmJihvfD04LHI9MyksZS5rZXlDZXJ0U2lnbiYmKG98PTQscj0yKSxlLmNSTFNpZ24mJihvfD0yLHI9MSksZS5lbmNpcGhlck9ubHkmJihvfD0xLHI9MCksZS5kZWNpcGhlck9ubHkmJihjfD0xMjgscj03KTt2YXIgdT1TdHJpbmcuZnJvbUNoYXJDb2RlKHIpOzAhPT1jP3UrPVN0cmluZy5mcm9tQ2hhckNvZGUobykrU3RyaW5nLmZyb21DaGFyQ29kZShjKTowIT09byYmKHUrPVN0cmluZy5mcm9tQ2hhckNvZGUobykpLGUudmFsdWU9bi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLkJJVFNUUklORywhMSx1KX1lbHNlIGlmKCJiYXNpY0NvbnN0cmFpbnRzIj09PWUubmFtZSllLnZhbHVlPW4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbXSksZS5jQSYmZS52YWx1ZS52YWx1ZS5wdXNoKG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5CT09MRUFOLCExLFN0cmluZy5mcm9tQ2hhckNvZGUoMjU1KSkpLCJwYXRoTGVuQ29uc3RyYWludCJpbiBlJiZlLnZhbHVlLnZhbHVlLnB1c2gobi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLklOVEVHRVIsITEsbi5pbnRlZ2VyVG9EZXIoZS5wYXRoTGVuQ29uc3RyYWludCkuZ2V0Qnl0ZXMoKSkpO2Vsc2UgaWYoImV4dEtleVVzYWdlIj09PWUubmFtZSl7ZS52YWx1ZT1uLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW10pO3ZhciBsPWUudmFsdWUudmFsdWU7Zm9yKHZhciBwIGluIGUpITA9PT1lW3BdJiYocCBpbiBzP2wucHVzaChuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0lELCExLG4ub2lkVG9EZXIoc1twXSkuZ2V0Qnl0ZXMoKSkpOi0xIT09cC5pbmRleE9mKCIuIikmJmwucHVzaChuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0lELCExLG4ub2lkVG9EZXIocCkuZ2V0Qnl0ZXMoKSkpKX1lbHNlIGlmKCJuc0NlcnRUeXBlIj09PWUubmFtZSl7cj0wLG89MDtlLmNsaWVudCYmKG98PTEyOCxyPTcpLGUuc2VydmVyJiYob3w9NjQscj02KSxlLmVtYWlsJiYob3w9MzIscj01KSxlLm9ianNpZ24mJihvfD0xNixyPTQpLGUucmVzZXJ2ZWQmJihvfD04LHI9MyksZS5zc2xDQSYmKG98PTQscj0yKSxlLmVtYWlsQ0EmJihvfD0yLHI9MSksZS5vYmpDQSYmKG98PTEscj0wKTt1PVN0cmluZy5mcm9tQ2hhckNvZGUocik7MCE9PW8mJih1Kz1TdHJpbmcuZnJvbUNoYXJDb2RlKG8pKSxlLnZhbHVlPW4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5CSVRTVFJJTkcsITEsdSl9ZWxzZSBpZigic3ViamVjdEFsdE5hbWUiPT09ZS5uYW1lfHwiaXNzdWVyQWx0TmFtZSI9PT1lLm5hbWUpe2UudmFsdWU9bi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFtdKTtmb3IodmFyIGY9MDtmPGUuYWx0TmFtZXMubGVuZ3RoOysrZil7dT0odj1lLmFsdE5hbWVzW2ZdKS52YWx1ZTtpZig3PT09di50eXBlJiZ2LmlwKXtpZihudWxsPT09KHU9YS51dGlsLmJ5dGVzRnJvbUlQKHYuaXApKSl0aHJvdyhTPW5ldyBFcnJvcignRXh0ZW5zaW9uICJpcCIgdmFsdWUgaXMgbm90IGEgdmFsaWQgSVB2NCBvciBJUHY2IGFkZHJlc3MuJykpLmV4dGVuc2lvbj1lLFN9ZWxzZSA4PT09di50eXBlJiYodT12Lm9pZD9uLm9pZFRvRGVyKG4ub2lkVG9EZXIodi5vaWQpKTpuLm9pZFRvRGVyKHUpKTtlLnZhbHVlLnZhbHVlLnB1c2gobi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLHYudHlwZSwhMSx1KSl9fWVsc2UgaWYoIm5zQ29tbWVudCI9PT1lLm5hbWUmJnQuY2VydCl7aWYoIS9eW1x4MDAtXHg3Rl0qJC8udGVzdChlLmNvbW1lbnQpfHxlLmNvbW1lbnQubGVuZ3RoPDF8fGUuY29tbWVudC5sZW5ndGg+MTI4KXRocm93IG5ldyBFcnJvcignSW52YWxpZCAibnNDb21tZW50IiBjb250ZW50LicpO2UudmFsdWU9bi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLklBNVNUUklORywhMSxlLmNvbW1lbnQpfWVsc2UgaWYoInN1YmplY3RLZXlJZGVudGlmaWVyIj09PWUubmFtZSYmdC5jZXJ0KXt2YXIgaD10LmNlcnQuZ2VuZXJhdGVTdWJqZWN0S2V5SWRlbnRpZmllcigpO2Uuc3ViamVjdEtleUlkZW50aWZpZXI9aC50b0hleCgpLGUudmFsdWU9bi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9DVEVUU1RSSU5HLCExLGguZ2V0Qnl0ZXMoKSl9ZWxzZSBpZigiYXV0aG9yaXR5S2V5SWRlbnRpZmllciI9PT1lLm5hbWUmJnQuY2VydCl7ZS52YWx1ZT1uLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW10pO2w9ZS52YWx1ZS52YWx1ZTtpZihlLmtleUlkZW50aWZpZXIpe3ZhciBkPSEwPT09ZS5rZXlJZGVudGlmaWVyP3QuY2VydC5nZW5lcmF0ZVN1YmplY3RLZXlJZGVudGlmaWVyKCkuZ2V0Qnl0ZXMoKTplLmtleUlkZW50aWZpZXI7bC5wdXNoKG4uY3JlYXRlKG4uQ2xhc3MuQ09OVEVYVF9TUEVDSUZJQywwLCExLGQpKX1pZihlLmF1dGhvcml0eUNlcnRJc3N1ZXIpe3ZhciBnPVtuLmNyZWF0ZShuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsNCwhMCxbeSghMD09PWUuYXV0aG9yaXR5Q2VydElzc3Vlcj90LmNlcnQuaXNzdWVyOmUuYXV0aG9yaXR5Q2VydElzc3VlcildKV07bC5wdXNoKG4uY3JlYXRlKG4uQ2xhc3MuQ09OVEVYVF9TUEVDSUZJQywxLCEwLGcpKX1pZihlLnNlcmlhbE51bWJlcil7dmFyIG09YS51dGlsLmhleFRvQnl0ZXMoITA9PT1lLnNlcmlhbE51bWJlcj90LmNlcnQuc2VyaWFsTnVtYmVyOmUuc2VyaWFsTnVtYmVyKTtsLnB1c2gobi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLDIsITEsbSkpfX1lbHNlIGlmKCJjUkxEaXN0cmlidXRpb25Qb2ludHMiPT09ZS5uYW1lKXtlLnZhbHVlPW4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbXSk7bD1lLnZhbHVlLnZhbHVlO3ZhciB2LEM9bi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFtdKSxFPW4uY3JlYXRlKG4uQ2xhc3MuQ09OVEVYVF9TUEVDSUZJQywwLCEwLFtdKTtmb3IoZj0wO2Y8ZS5hbHROYW1lcy5sZW5ndGg7KytmKXt1PSh2PWUuYWx0TmFtZXNbZl0pLnZhbHVlO2lmKDc9PT12LnR5cGUmJnYuaXApe2lmKG51bGw9PT0odT1hLnV0aWwuYnl0ZXNGcm9tSVAodi5pcCkpKXRocm93KFM9bmV3IEVycm9yKCdFeHRlbnNpb24gImlwIiB2YWx1ZSBpcyBub3QgYSB2YWxpZCBJUHY0IG9yIElQdjYgYWRkcmVzcy4nKSkuZXh0ZW5zaW9uPWUsU31lbHNlIDg9PT12LnR5cGUmJih1PXYub2lkP24ub2lkVG9EZXIobi5vaWRUb0Rlcih2Lm9pZCkpOm4ub2lkVG9EZXIodSkpO0UudmFsdWUucHVzaChuLmNyZWF0ZShuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsdi50eXBlLCExLHUpKX1DLnZhbHVlLnB1c2gobi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLDAsITAsW0VdKSksbC5wdXNoKEMpfXZhciBTO2lmKHZvaWQgMD09PWUudmFsdWUpdGhyb3coUz1uZXcgRXJyb3IoIkV4dGVuc2lvbiB2YWx1ZSBub3Qgc3BlY2lmaWVkLiIpKS5leHRlbnNpb249ZSxTO3JldHVybiBlfWZ1bmN0aW9uIHYoZSx0KXtzd2l0Y2goZSl7Y2FzZSBzWyJSU0FTU0EtUFNTIl06dmFyIHI9W107cmV0dXJuIHZvaWQgMCE9PXQuaGFzaC5hbGdvcml0aG1PaWQmJnIucHVzaChuLmNyZWF0ZShuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsMCwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFtuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0lELCExLG4ub2lkVG9EZXIodC5oYXNoLmFsZ29yaXRobU9pZCkuZ2V0Qnl0ZXMoKSksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk5VTEwsITEsIiIpXSldKSksdm9pZCAwIT09dC5tZ2YuYWxnb3JpdGhtT2lkJiZyLnB1c2gobi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLDEsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9JRCwhMSxuLm9pZFRvRGVyKHQubWdmLmFsZ29yaXRobU9pZCkuZ2V0Qnl0ZXMoKSksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFtuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0lELCExLG4ub2lkVG9EZXIodC5tZ2YuaGFzaC5hbGdvcml0aG1PaWQpLmdldEJ5dGVzKCkpLG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5OVUxMLCExLCIiKV0pXSldKSksdm9pZCAwIT09dC5zYWx0TGVuZ3RoJiZyLnB1c2gobi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLDIsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5JTlRFR0VSLCExLG4uaW50ZWdlclRvRGVyKHQuc2FsdExlbmd0aCkuZ2V0Qnl0ZXMoKSldKSksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLHIpO2RlZmF1bHQ6cmV0dXJuIG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5OVUxMLCExLCIiKX19ZnVuY3Rpb24gQyhlKXt2YXIgdD1uLmNyZWF0ZShuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsMCwhMCxbXSk7aWYoMD09PWUuYXR0cmlidXRlcy5sZW5ndGgpcmV0dXJuIHQ7Zm9yKHZhciByPWUuYXR0cmlidXRlcyxpPTA7aTxyLmxlbmd0aDsrK2kpe3ZhciBzPXJbaV0sbz1zLnZhbHVlLGM9bi5UeXBlLlVURjg7InZhbHVlVGFnQ2xhc3MiaW4gcyYmKGM9cy52YWx1ZVRhZ0NsYXNzKSxjPT09bi5UeXBlLlVURjgmJihvPWEudXRpbC5lbmNvZGVVdGY4KG8pKTt2YXIgdT0hMTsidmFsdWVDb25zdHJ1Y3RlZCJpbiBzJiYodT1zLnZhbHVlQ29uc3RydWN0ZWQpO3ZhciBsPW4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9JRCwhMSxuLm9pZFRvRGVyKHMudHlwZSkuZ2V0Qnl0ZXMoKSksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFVCwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsYyx1LG8pXSldKTt0LnZhbHVlLnB1c2gobCl9cmV0dXJuIHR9aS5jZXJ0aWZpY2F0ZUZyb21QZW09ZnVuY3Rpb24oZSx0LHIpe3ZhciBzPWEucGVtLmRlY29kZShlKVswXTtpZigiQ0VSVElGSUNBVEUiIT09cy50eXBlJiYiWDUwOSBDRVJUSUZJQ0FURSIhPT1zLnR5cGUmJiJUUlVTVEVEIENFUlRJRklDQVRFIiE9PXMudHlwZSl7dmFyIG89bmV3IEVycm9yKCdDb3VsZCBub3QgY29udmVydCBjZXJ0aWZpY2F0ZSBmcm9tIFBFTTsgUEVNIGhlYWRlciB0eXBlIGlzIG5vdCAiQ0VSVElGSUNBVEUiLCAiWDUwOSBDRVJUSUZJQ0FURSIsIG9yICJUUlVTVEVEIENFUlRJRklDQVRFIi4nKTt0aHJvdyBvLmhlYWRlclR5cGU9cy50eXBlLG99aWYocy5wcm9jVHlwZSYmIkVOQ1JZUFRFRCI9PT1zLnByb2NUeXBlLnR5cGUpdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgY29udmVydCBjZXJ0aWZpY2F0ZSBmcm9tIFBFTTsgUEVNIGlzIGVuY3J5cHRlZC4iKTt2YXIgYz1uLmZyb21EZXIocy5ib2R5LHIpO3JldHVybiBpLmNlcnRpZmljYXRlRnJvbUFzbjEoYyx0KX0saS5jZXJ0aWZpY2F0ZVRvUGVtPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e3R5cGU6IkNFUlRJRklDQVRFIixib2R5Om4udG9EZXIoaS5jZXJ0aWZpY2F0ZVRvQXNuMShlKSkuZ2V0Qnl0ZXMoKX07cmV0dXJuIGEucGVtLmVuY29kZShyLHttYXhsaW5lOnR9KX0saS5wdWJsaWNLZXlGcm9tUGVtPWZ1bmN0aW9uKGUpe3ZhciB0PWEucGVtLmRlY29kZShlKVswXTtpZigiUFVCTElDIEtFWSIhPT10LnR5cGUmJiJSU0EgUFVCTElDIEtFWSIhPT10LnR5cGUpe3ZhciByPW5ldyBFcnJvcignQ291bGQgbm90IGNvbnZlcnQgcHVibGljIGtleSBmcm9tIFBFTTsgUEVNIGhlYWRlciB0eXBlIGlzIG5vdCAiUFVCTElDIEtFWSIgb3IgIlJTQSBQVUJMSUMgS0VZIi4nKTt0aHJvdyByLmhlYWRlclR5cGU9dC50eXBlLHJ9aWYodC5wcm9jVHlwZSYmIkVOQ1JZUFRFRCI9PT10LnByb2NUeXBlLnR5cGUpdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgY29udmVydCBwdWJsaWMga2V5IGZyb20gUEVNOyBQRU0gaXMgZW5jcnlwdGVkLiIpO3ZhciBzPW4uZnJvbURlcih0LmJvZHkpO3JldHVybiBpLnB1YmxpY0tleUZyb21Bc24xKHMpfSxpLnB1YmxpY0tleVRvUGVtPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e3R5cGU6IlBVQkxJQyBLRVkiLGJvZHk6bi50b0RlcihpLnB1YmxpY0tleVRvQXNuMShlKSkuZ2V0Qnl0ZXMoKX07cmV0dXJuIGEucGVtLmVuY29kZShyLHttYXhsaW5lOnR9KX0saS5wdWJsaWNLZXlUb1JTQVB1YmxpY0tleVBlbT1mdW5jdGlvbihlLHQpe3ZhciByPXt0eXBlOiJSU0EgUFVCTElDIEtFWSIsYm9keTpuLnRvRGVyKGkucHVibGljS2V5VG9SU0FQdWJsaWNLZXkoZSkpLmdldEJ5dGVzKCl9O3JldHVybiBhLnBlbS5lbmNvZGUocix7bWF4bGluZTp0fSl9LGkuZ2V0UHVibGljS2V5RmluZ2VycHJpbnQ9ZnVuY3Rpb24oZSx0KXt2YXIgcixzPSh0PXR8fHt9KS5tZHx8YS5tZC5zaGExLmNyZWF0ZSgpO3N3aXRjaCh0LnR5cGV8fCJSU0FQdWJsaWNLZXkiKXtjYXNlIlJTQVB1YmxpY0tleSI6cj1uLnRvRGVyKGkucHVibGljS2V5VG9SU0FQdWJsaWNLZXkoZSkpLmdldEJ5dGVzKCk7YnJlYWs7Y2FzZSJTdWJqZWN0UHVibGljS2V5SW5mbyI6cj1uLnRvRGVyKGkucHVibGljS2V5VG9Bc24xKGUpKS5nZXRCeXRlcygpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGZpbmdlcnByaW50IHR5cGUgIicrdC50eXBlKyciLicpfXMuc3RhcnQoKSxzLnVwZGF0ZShyKTt2YXIgbz1zLmRpZ2VzdCgpO2lmKCJoZXgiPT09dC5lbmNvZGluZyl7dmFyIGM9by50b0hleCgpO3JldHVybiB0LmRlbGltaXRlcj9jLm1hdGNoKC8uezJ9L2cpLmpvaW4odC5kZWxpbWl0ZXIpOmN9aWYoImJpbmFyeSI9PT10LmVuY29kaW5nKXJldHVybiBvLmdldEJ5dGVzKCk7aWYodC5lbmNvZGluZyl0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZW5jb2RpbmcgIicrdC5lbmNvZGluZysnIi4nKTtyZXR1cm4gb30saS5jZXJ0aWZpY2F0aW9uUmVxdWVzdEZyb21QZW09ZnVuY3Rpb24oZSx0LHIpe3ZhciBzPWEucGVtLmRlY29kZShlKVswXTtpZigiQ0VSVElGSUNBVEUgUkVRVUVTVCIhPT1zLnR5cGUpe3ZhciBvPW5ldyBFcnJvcignQ291bGQgbm90IGNvbnZlcnQgY2VydGlmaWNhdGlvbiByZXF1ZXN0IGZyb20gUEVNOyBQRU0gaGVhZGVyIHR5cGUgaXMgbm90ICJDRVJUSUZJQ0FURSBSRVFVRVNUIi4nKTt0aHJvdyBvLmhlYWRlclR5cGU9cy50eXBlLG99aWYocy5wcm9jVHlwZSYmIkVOQ1JZUFRFRCI9PT1zLnByb2NUeXBlLnR5cGUpdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgY29udmVydCBjZXJ0aWZpY2F0aW9uIHJlcXVlc3QgZnJvbSBQRU07IFBFTSBpcyBlbmNyeXB0ZWQuIik7dmFyIGM9bi5mcm9tRGVyKHMuYm9keSxyKTtyZXR1cm4gaS5jZXJ0aWZpY2F0aW9uUmVxdWVzdEZyb21Bc24xKGMsdCl9LGkuY2VydGlmaWNhdGlvblJlcXVlc3RUb1BlbT1mdW5jdGlvbihlLHQpe3ZhciByPXt0eXBlOiJDRVJUSUZJQ0FURSBSRVFVRVNUIixib2R5Om4udG9EZXIoaS5jZXJ0aWZpY2F0aW9uUmVxdWVzdFRvQXNuMShlKSkuZ2V0Qnl0ZXMoKX07cmV0dXJuIGEucGVtLmVuY29kZShyLHttYXhsaW5lOnR9KX0saS5jcmVhdGVDZXJ0aWZpY2F0ZT1mdW5jdGlvbigpe3ZhciBlPXt2ZXJzaW9uOjIsc2VyaWFsTnVtYmVyOiIwMCIsc2lnbmF0dXJlT2lkOm51bGwsc2lnbmF0dXJlOm51bGwsc2lnaW5mbzp7fX07cmV0dXJuIGUuc2lnaW5mby5hbGdvcml0aG1PaWQ9bnVsbCxlLnZhbGlkaXR5PXt9LGUudmFsaWRpdHkubm90QmVmb3JlPW5ldyBEYXRlLGUudmFsaWRpdHkubm90QWZ0ZXI9bmV3IERhdGUsZS5pc3N1ZXI9e30sZS5pc3N1ZXIuZ2V0RmllbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIGgoZS5pc3N1ZXIsdCl9LGUuaXNzdWVyLmFkZEZpZWxkPWZ1bmN0aW9uKHQpe2coW3RdKSxlLmlzc3Vlci5hdHRyaWJ1dGVzLnB1c2godCl9LGUuaXNzdWVyLmF0dHJpYnV0ZXM9W10sZS5pc3N1ZXIuaGFzaD1udWxsLGUuc3ViamVjdD17fSxlLnN1YmplY3QuZ2V0RmllbGQ9ZnVuY3Rpb24odCl7cmV0dXJuIGgoZS5zdWJqZWN0LHQpfSxlLnN1YmplY3QuYWRkRmllbGQ9ZnVuY3Rpb24odCl7ZyhbdF0pLGUuc3ViamVjdC5hdHRyaWJ1dGVzLnB1c2godCl9LGUuc3ViamVjdC5hdHRyaWJ1dGVzPVtdLGUuc3ViamVjdC5oYXNoPW51bGwsZS5leHRlbnNpb25zPVtdLGUucHVibGljS2V5PW51bGwsZS5tZD1udWxsLGUuc2V0U3ViamVjdD1mdW5jdGlvbih0LHIpe2codCksZS5zdWJqZWN0LmF0dHJpYnV0ZXM9dCxkZWxldGUgZS5zdWJqZWN0LnVuaXF1ZUlkLHImJihlLnN1YmplY3QudW5pcXVlSWQ9ciksZS5zdWJqZWN0Lmhhc2g9bnVsbH0sZS5zZXRJc3N1ZXI9ZnVuY3Rpb24odCxyKXtnKHQpLGUuaXNzdWVyLmF0dHJpYnV0ZXM9dCxkZWxldGUgZS5pc3N1ZXIudW5pcXVlSWQsciYmKGUuaXNzdWVyLnVuaXF1ZUlkPXIpLGUuaXNzdWVyLmhhc2g9bnVsbH0sZS5zZXRFeHRlbnNpb25zPWZ1bmN0aW9uKHQpe2Zvcih2YXIgcj0wO3I8dC5sZW5ndGg7KytyKW0odFtyXSx7Y2VydDplfSk7ZS5leHRlbnNpb25zPXR9LGUuZ2V0RXh0ZW5zaW9uPWZ1bmN0aW9uKHQpeyJzdHJpbmciPT10eXBlb2YgdCYmKHQ9e25hbWU6dH0pO2Zvcih2YXIgcixhPW51bGwsbj0wO251bGw9PT1hJiZuPGUuZXh0ZW5zaW9ucy5sZW5ndGg7KytuKXI9ZS5leHRlbnNpb25zW25dLCh0LmlkJiZyLmlkPT09dC5pZHx8dC5uYW1lJiZyLm5hbWU9PT10Lm5hbWUpJiYoYT1yKTtyZXR1cm4gYX0sZS5zaWduPWZ1bmN0aW9uKHQscil7ZS5tZD1yfHxhLm1kLnNoYTEuY3JlYXRlKCk7dmFyIG89c1tlLm1kLmFsZ29yaXRobSsiV2l0aFJTQUVuY3J5cHRpb24iXTtpZighbyl7dmFyIGM9bmV3IEVycm9yKCJDb3VsZCBub3QgY29tcHV0ZSBjZXJ0aWZpY2F0ZSBkaWdlc3QuIFVua25vd24gbWVzc2FnZSBkaWdlc3QgYWxnb3JpdGhtIE9JRC4iKTt0aHJvdyBjLmFsZ29yaXRobT1lLm1kLmFsZ29yaXRobSxjfWUuc2lnbmF0dXJlT2lkPWUuc2lnaW5mby5hbGdvcml0aG1PaWQ9byxlLnRic0NlcnRpZmljYXRlPWkuZ2V0VEJTQ2VydGlmaWNhdGUoZSk7dmFyIHU9bi50b0RlcihlLnRic0NlcnRpZmljYXRlKTtlLm1kLnVwZGF0ZSh1LmdldEJ5dGVzKCkpLGUuc2lnbmF0dXJlPXQuc2lnbihlLm1kKX0sZS52ZXJpZnk9ZnVuY3Rpb24odCl7dmFyIHI9ITE7aWYoIWUuaXNzdWVkKHQpKXt2YXIgbz10Lmlzc3VlcixjPWUuc3ViamVjdDt0aHJvdyh5PW5ldyBFcnJvcigiVGhlIHBhcmVudCBjZXJ0aWZpY2F0ZSBkaWQgbm90IGlzc3VlIHRoZSBnaXZlbiBjaGlsZCBjZXJ0aWZpY2F0ZTsgdGhlIGNoaWxkIGNlcnRpZmljYXRlJ3MgaXNzdWVyIGRvZXMgbm90IG1hdGNoIHRoZSBwYXJlbnQncyBzdWJqZWN0LiIpKS5leHBlY3RlZElzc3Vlcj1vLmF0dHJpYnV0ZXMseS5hY3R1YWxJc3N1ZXI9Yy5hdHRyaWJ1dGVzLHl9dmFyIHU9dC5tZDtpZihudWxsPT09dSl7aWYodC5zaWduYXR1cmVPaWQgaW4gcylzd2l0Y2goc1t0LnNpZ25hdHVyZU9pZF0pe2Nhc2Uic2hhMVdpdGhSU0FFbmNyeXB0aW9uIjp1PWEubWQuc2hhMS5jcmVhdGUoKTticmVhaztjYXNlIm1kNVdpdGhSU0FFbmNyeXB0aW9uIjp1PWEubWQubWQ1LmNyZWF0ZSgpO2JyZWFrO2Nhc2Uic2hhMjU2V2l0aFJTQUVuY3J5cHRpb24iOnU9YS5tZC5zaGEyNTYuY3JlYXRlKCk7YnJlYWs7Y2FzZSJzaGEzODRXaXRoUlNBRW5jcnlwdGlvbiI6dT1hLm1kLnNoYTM4NC5jcmVhdGUoKTticmVhaztjYXNlInNoYTUxMldpdGhSU0FFbmNyeXB0aW9uIjp1PWEubWQuc2hhNTEyLmNyZWF0ZSgpO2JyZWFrO2Nhc2UiUlNBU1NBLVBTUyI6dT1hLm1kLnNoYTI1Ni5jcmVhdGUoKX1pZihudWxsPT09dSl0aHJvdyh5PW5ldyBFcnJvcigiQ291bGQgbm90IGNvbXB1dGUgY2VydGlmaWNhdGUgZGlnZXN0LiBVbmtub3duIHNpZ25hdHVyZSBPSUQuIikpLnNpZ25hdHVyZU9pZD10LnNpZ25hdHVyZU9pZCx5O3ZhciBsPXQudGJzQ2VydGlmaWNhdGV8fGkuZ2V0VEJTQ2VydGlmaWNhdGUodCkscD1uLnRvRGVyKGwpO3UudXBkYXRlKHAuZ2V0Qnl0ZXMoKSl9aWYobnVsbCE9PXUpe3ZhciBmO3N3aXRjaCh0LnNpZ25hdHVyZU9pZCl7Y2FzZSBzLnNoYTFXaXRoUlNBRW5jcnlwdGlvbjpmPXZvaWQgMDticmVhaztjYXNlIHNbIlJTQVNTQS1QU1MiXTp2YXIgaCxkLHk7aWYodm9pZCAwPT09KGg9c1t0LnNpZ25hdHVyZVBhcmFtZXRlcnMubWdmLmhhc2guYWxnb3JpdGhtT2lkXSl8fHZvaWQgMD09PWEubWRbaF0pdGhyb3coeT1uZXcgRXJyb3IoIlVuc3VwcG9ydGVkIE1HRiBoYXNoIGZ1bmN0aW9uLiIpKS5vaWQ9dC5zaWduYXR1cmVQYXJhbWV0ZXJzLm1nZi5oYXNoLmFsZ29yaXRobU9pZCx5Lm5hbWU9aCx5O2lmKHZvaWQgMD09PShkPXNbdC5zaWduYXR1cmVQYXJhbWV0ZXJzLm1nZi5hbGdvcml0aG1PaWRdKXx8dm9pZCAwPT09YS5tZ2ZbZF0pdGhyb3coeT1uZXcgRXJyb3IoIlVuc3VwcG9ydGVkIE1HRiBmdW5jdGlvbi4iKSkub2lkPXQuc2lnbmF0dXJlUGFyYW1ldGVycy5tZ2YuYWxnb3JpdGhtT2lkLHkubmFtZT1kLHk7aWYoZD1hLm1nZltkXS5jcmVhdGUoYS5tZFtoXS5jcmVhdGUoKSksdm9pZCAwPT09KGg9c1t0LnNpZ25hdHVyZVBhcmFtZXRlcnMuaGFzaC5hbGdvcml0aG1PaWRdKXx8dm9pZCAwPT09YS5tZFtoXSl0aHJvd3ttZXNzYWdlOiJVbnN1cHBvcnRlZCBSU0FTU0EtUFNTIGhhc2ggZnVuY3Rpb24uIixvaWQ6dC5zaWduYXR1cmVQYXJhbWV0ZXJzLmhhc2guYWxnb3JpdGhtT2lkLG5hbWU6aH07Zj1hLnBzcy5jcmVhdGUoYS5tZFtoXS5jcmVhdGUoKSxkLHQuc2lnbmF0dXJlUGFyYW1ldGVycy5zYWx0TGVuZ3RoKX1yPWUucHVibGljS2V5LnZlcmlmeSh1LmRpZ2VzdCgpLmdldEJ5dGVzKCksdC5zaWduYXR1cmUsZil9cmV0dXJuIHJ9LGUuaXNJc3N1ZXI9ZnVuY3Rpb24odCl7dmFyIHI9ITEsYT1lLmlzc3VlcixuPXQuc3ViamVjdDtpZihhLmhhc2gmJm4uaGFzaClyPWEuaGFzaD09PW4uaGFzaDtlbHNlIGlmKGEuYXR0cmlidXRlcy5sZW5ndGg9PT1uLmF0dHJpYnV0ZXMubGVuZ3RoKXt2YXIgaSxzO3I9ITA7Zm9yKHZhciBvPTA7ciYmbzxhLmF0dHJpYnV0ZXMubGVuZ3RoOysrbylpPWEuYXR0cmlidXRlc1tvXSxzPW4uYXR0cmlidXRlc1tvXSxpLnR5cGU9PT1zLnR5cGUmJmkudmFsdWU9PT1zLnZhbHVlfHwocj0hMSl9cmV0dXJuIHJ9LGUuaXNzdWVkPWZ1bmN0aW9uKHQpe3JldHVybiB0LmlzSXNzdWVyKGUpfSxlLmdlbmVyYXRlU3ViamVjdEtleUlkZW50aWZpZXI9ZnVuY3Rpb24oKXtyZXR1cm4gaS5nZXRQdWJsaWNLZXlGaW5nZXJwcmludChlLnB1YmxpY0tleSx7dHlwZToiUlNBUHVibGljS2V5In0pfSxlLnZlcmlmeVN1YmplY3RLZXlJZGVudGlmaWVyPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PXMuc3ViamVjdEtleUlkZW50aWZpZXIscj0wO3I8ZS5leHRlbnNpb25zLmxlbmd0aDsrK3Ipe3ZhciBuPWUuZXh0ZW5zaW9uc1tyXTtpZihuLmlkPT09dCl7dmFyIGk9ZS5nZW5lcmF0ZVN1YmplY3RLZXlJZGVudGlmaWVyKCkuZ2V0Qnl0ZXMoKTtyZXR1cm4gYS51dGlsLmhleFRvQnl0ZXMobi5zdWJqZWN0S2V5SWRlbnRpZmllcik9PT1pfX1yZXR1cm4hMX0sZX0saS5jZXJ0aWZpY2F0ZUZyb21Bc24xPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e30sbz1bXTtpZighbi52YWxpZGF0ZShlLHUscixvKSl0aHJvdyhmPW5ldyBFcnJvcigiQ2Fubm90IHJlYWQgWC41MDkgY2VydGlmaWNhdGUuIEFTTi4xIG9iamVjdCBpcyBub3QgYW4gWDUwOXYzIENlcnRpZmljYXRlLiIpKS5lcnJvcnM9byxmO2lmKG4uZGVyVG9PaWQoci5wdWJsaWNLZXlPaWQpIT09aS5vaWRzLnJzYUVuY3J5cHRpb24pdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcmVhZCBwdWJsaWMga2V5LiBPSUQgaXMgbm90IFJTQS4iKTt2YXIgYz1pLmNyZWF0ZUNlcnRpZmljYXRlKCk7Yy52ZXJzaW9uPXIuY2VydFZlcnNpb24/ci5jZXJ0VmVyc2lvbi5jaGFyQ29kZUF0KDApOjA7dmFyIGw9YS51dGlsLmNyZWF0ZUJ1ZmZlcihyLmNlcnRTZXJpYWxOdW1iZXIpO2Muc2VyaWFsTnVtYmVyPWwudG9IZXgoKSxjLnNpZ25hdHVyZU9pZD1hLmFzbjEuZGVyVG9PaWQoci5jZXJ0U2lnbmF0dXJlT2lkKSxjLnNpZ25hdHVyZVBhcmFtZXRlcnM9ZChjLnNpZ25hdHVyZU9pZCxyLmNlcnRTaWduYXR1cmVQYXJhbXMsITApLGMuc2lnaW5mby5hbGdvcml0aG1PaWQ9YS5hc24xLmRlclRvT2lkKHIuY2VydGluZm9TaWduYXR1cmVPaWQpLGMuc2lnaW5mby5wYXJhbWV0ZXJzPWQoYy5zaWdpbmZvLmFsZ29yaXRobU9pZCxyLmNlcnRpbmZvU2lnbmF0dXJlUGFyYW1zLCExKSxjLnNpZ25hdHVyZT1yLmNlcnRTaWduYXR1cmU7dmFyIHA9W107aWYodm9pZCAwIT09ci5jZXJ0VmFsaWRpdHkxVVRDVGltZSYmcC5wdXNoKG4udXRjVGltZVRvRGF0ZShyLmNlcnRWYWxpZGl0eTFVVENUaW1lKSksdm9pZCAwIT09ci5jZXJ0VmFsaWRpdHkyR2VuZXJhbGl6ZWRUaW1lJiZwLnB1c2gobi5nZW5lcmFsaXplZFRpbWVUb0RhdGUoci5jZXJ0VmFsaWRpdHkyR2VuZXJhbGl6ZWRUaW1lKSksdm9pZCAwIT09ci5jZXJ0VmFsaWRpdHkzVVRDVGltZSYmcC5wdXNoKG4udXRjVGltZVRvRGF0ZShyLmNlcnRWYWxpZGl0eTNVVENUaW1lKSksdm9pZCAwIT09ci5jZXJ0VmFsaWRpdHk0R2VuZXJhbGl6ZWRUaW1lJiZwLnB1c2gobi5nZW5lcmFsaXplZFRpbWVUb0RhdGUoci5jZXJ0VmFsaWRpdHk0R2VuZXJhbGl6ZWRUaW1lKSkscC5sZW5ndGg+Mil0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCByZWFkIG5vdEJlZm9yZS9ub3RBZnRlciB2YWxpZGl0eSB0aW1lczsgbW9yZSB0aGFuIHR3byB0aW1lcyB3ZXJlIHByb3ZpZGVkIGluIHRoZSBjZXJ0aWZpY2F0ZS4iKTtpZihwLmxlbmd0aDwyKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IHJlYWQgbm90QmVmb3JlL25vdEFmdGVyIHZhbGlkaXR5IHRpbWVzOyB0aGV5IHdlcmUgbm90IHByb3ZpZGVkIGFzIGVpdGhlciBVVENUaW1lIG9yIEdlbmVyYWxpemVkVGltZS4iKTtpZihjLnZhbGlkaXR5Lm5vdEJlZm9yZT1wWzBdLGMudmFsaWRpdHkubm90QWZ0ZXI9cFsxXSxjLnRic0NlcnRpZmljYXRlPXIudGJzQ2VydGlmaWNhdGUsdCl7dmFyIGY7aWYoYy5tZD1udWxsLGMuc2lnbmF0dXJlT2lkIGluIHMpc3dpdGNoKHNbYy5zaWduYXR1cmVPaWRdKXtjYXNlInNoYTFXaXRoUlNBRW5jcnlwdGlvbiI6Yy5tZD1hLm1kLnNoYTEuY3JlYXRlKCk7YnJlYWs7Y2FzZSJtZDVXaXRoUlNBRW5jcnlwdGlvbiI6Yy5tZD1hLm1kLm1kNS5jcmVhdGUoKTticmVhaztjYXNlInNoYTI1NldpdGhSU0FFbmNyeXB0aW9uIjpjLm1kPWEubWQuc2hhMjU2LmNyZWF0ZSgpO2JyZWFrO2Nhc2Uic2hhMzg0V2l0aFJTQUVuY3J5cHRpb24iOmMubWQ9YS5tZC5zaGEzODQuY3JlYXRlKCk7YnJlYWs7Y2FzZSJzaGE1MTJXaXRoUlNBRW5jcnlwdGlvbiI6Yy5tZD1hLm1kLnNoYTUxMi5jcmVhdGUoKTticmVhaztjYXNlIlJTQVNTQS1QU1MiOmMubWQ9YS5tZC5zaGEyNTYuY3JlYXRlKCl9aWYobnVsbD09PWMubWQpdGhyb3coZj1uZXcgRXJyb3IoIkNvdWxkIG5vdCBjb21wdXRlIGNlcnRpZmljYXRlIGRpZ2VzdC4gVW5rbm93biBzaWduYXR1cmUgT0lELiIpKS5zaWduYXR1cmVPaWQ9Yy5zaWduYXR1cmVPaWQsZjt2YXIgeT1uLnRvRGVyKGMudGJzQ2VydGlmaWNhdGUpO2MubWQudXBkYXRlKHkuZ2V0Qnl0ZXMoKSl9dmFyIG09YS5tZC5zaGExLmNyZWF0ZSgpO2MuaXNzdWVyLmdldEZpZWxkPWZ1bmN0aW9uKGUpe3JldHVybiBoKGMuaXNzdWVyLGUpfSxjLmlzc3Vlci5hZGRGaWVsZD1mdW5jdGlvbihlKXtnKFtlXSksYy5pc3N1ZXIuYXR0cmlidXRlcy5wdXNoKGUpfSxjLmlzc3Vlci5hdHRyaWJ1dGVzPWkuUkROQXR0cmlidXRlc0FzQXJyYXkoci5jZXJ0SXNzdWVyLG0pLHIuY2VydElzc3VlclVuaXF1ZUlkJiYoYy5pc3N1ZXIudW5pcXVlSWQ9ci5jZXJ0SXNzdWVyVW5pcXVlSWQpLGMuaXNzdWVyLmhhc2g9bS5kaWdlc3QoKS50b0hleCgpO3ZhciB2PWEubWQuc2hhMS5jcmVhdGUoKTtyZXR1cm4gYy5zdWJqZWN0LmdldEZpZWxkPWZ1bmN0aW9uKGUpe3JldHVybiBoKGMuc3ViamVjdCxlKX0sYy5zdWJqZWN0LmFkZEZpZWxkPWZ1bmN0aW9uKGUpe2coW2VdKSxjLnN1YmplY3QuYXR0cmlidXRlcy5wdXNoKGUpfSxjLnN1YmplY3QuYXR0cmlidXRlcz1pLlJETkF0dHJpYnV0ZXNBc0FycmF5KHIuY2VydFN1YmplY3Qsdiksci5jZXJ0U3ViamVjdFVuaXF1ZUlkJiYoYy5zdWJqZWN0LnVuaXF1ZUlkPXIuY2VydFN1YmplY3RVbmlxdWVJZCksYy5zdWJqZWN0Lmhhc2g9di5kaWdlc3QoKS50b0hleCgpLHIuY2VydEV4dGVuc2lvbnM/Yy5leHRlbnNpb25zPWkuY2VydGlmaWNhdGVFeHRlbnNpb25zRnJvbUFzbjEoci5jZXJ0RXh0ZW5zaW9ucyk6Yy5leHRlbnNpb25zPVtdLGMucHVibGljS2V5PWkucHVibGljS2V5RnJvbUFzbjEoci5zdWJqZWN0UHVibGljS2V5SW5mbyksY30saS5jZXJ0aWZpY2F0ZUV4dGVuc2lvbnNGcm9tQXNuMT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0wO3I8ZS52YWx1ZS5sZW5ndGg7KytyKWZvcih2YXIgYT1lLnZhbHVlW3JdLG49MDtuPGEudmFsdWUubGVuZ3RoOysrbil0LnB1c2goaS5jZXJ0aWZpY2F0ZUV4dGVuc2lvbkZyb21Bc24xKGEudmFsdWVbbl0pKTtyZXR1cm4gdH0saS5jZXJ0aWZpY2F0ZUV4dGVuc2lvbkZyb21Bc24xPWZ1bmN0aW9uKGUpe3ZhciB0PXt9O2lmKHQuaWQ9bi5kZXJUb09pZChlLnZhbHVlWzBdLnZhbHVlKSx0LmNyaXRpY2FsPSExLGUudmFsdWVbMV0udHlwZT09PW4uVHlwZS5CT09MRUFOPyh0LmNyaXRpY2FsPTAhPT1lLnZhbHVlWzFdLnZhbHVlLmNoYXJDb2RlQXQoMCksdC52YWx1ZT1lLnZhbHVlWzJdLnZhbHVlKTp0LnZhbHVlPWUudmFsdWVbMV0udmFsdWUsdC5pZCBpbiBzKWlmKHQubmFtZT1zW3QuaWRdLCJrZXlVc2FnZSI9PT10Lm5hbWUpe3ZhciByPTAsaT0wOyhjPW4uZnJvbURlcih0LnZhbHVlKSkudmFsdWUubGVuZ3RoPjEmJihyPWMudmFsdWUuY2hhckNvZGVBdCgxKSxpPWMudmFsdWUubGVuZ3RoPjI/Yy52YWx1ZS5jaGFyQ29kZUF0KDIpOjApLHQuZGlnaXRhbFNpZ25hdHVyZT0xMjg9PSgxMjgmciksdC5ub25SZXB1ZGlhdGlvbj02ND09KDY0JnIpLHQua2V5RW5jaXBoZXJtZW50PTMyPT0oMzImciksdC5kYXRhRW5jaXBoZXJtZW50PTE2PT0oMTYmciksdC5rZXlBZ3JlZW1lbnQ9OD09KDgmciksdC5rZXlDZXJ0U2lnbj00PT0oNCZyKSx0LmNSTFNpZ249Mj09KDImciksdC5lbmNpcGhlck9ubHk9MT09KDEmciksdC5kZWNpcGhlck9ubHk9MTI4PT0oMTI4JmkpfWVsc2UgaWYoImJhc2ljQ29uc3RyYWludHMiPT09dC5uYW1lKXsoYz1uLmZyb21EZXIodC52YWx1ZSkpLnZhbHVlLmxlbmd0aD4wJiZjLnZhbHVlWzBdLnR5cGU9PT1uLlR5cGUuQk9PTEVBTj90LmNBPTAhPT1jLnZhbHVlWzBdLnZhbHVlLmNoYXJDb2RlQXQoMCk6dC5jQT0hMTt2YXIgbz1udWxsO2MudmFsdWUubGVuZ3RoPjAmJmMudmFsdWVbMF0udHlwZT09PW4uVHlwZS5JTlRFR0VSP289Yy52YWx1ZVswXS52YWx1ZTpjLnZhbHVlLmxlbmd0aD4xJiYobz1jLnZhbHVlWzFdLnZhbHVlKSxudWxsIT09byYmKHQucGF0aExlbkNvbnN0cmFpbnQ9bi5kZXJUb0ludGVnZXIobykpfWVsc2UgaWYoImV4dEtleVVzYWdlIj09PXQubmFtZSlmb3IodmFyIGM9bi5mcm9tRGVyKHQudmFsdWUpLHU9MDt1PGMudmFsdWUubGVuZ3RoOysrdSl7dmFyIGw9bi5kZXJUb09pZChjLnZhbHVlW3VdLnZhbHVlKTtsIGluIHM/dFtzW2xdXT0hMDp0W2xdPSEwfWVsc2UgaWYoIm5zQ2VydFR5cGUiPT09dC5uYW1lKXtyPTA7KGM9bi5mcm9tRGVyKHQudmFsdWUpKS52YWx1ZS5sZW5ndGg+MSYmKHI9Yy52YWx1ZS5jaGFyQ29kZUF0KDEpKSx0LmNsaWVudD0xMjg9PSgxMjgmciksdC5zZXJ2ZXI9NjQ9PSg2NCZyKSx0LmVtYWlsPTMyPT0oMzImciksdC5vYmpzaWduPTE2PT0oMTYmciksdC5yZXNlcnZlZD04PT0oOCZyKSx0LnNzbENBPTQ9PSg0JnIpLHQuZW1haWxDQT0yPT0oMiZyKSx0Lm9iakNBPTE9PSgxJnIpfWVsc2UgaWYoInN1YmplY3RBbHROYW1lIj09PXQubmFtZXx8Imlzc3VlckFsdE5hbWUiPT09dC5uYW1lKXt2YXIgcDt0LmFsdE5hbWVzPVtdO2M9bi5mcm9tRGVyKHQudmFsdWUpO2Zvcih2YXIgZj0wO2Y8Yy52YWx1ZS5sZW5ndGg7KytmKXt2YXIgaD17dHlwZToocD1jLnZhbHVlW2ZdKS50eXBlLHZhbHVlOnAudmFsdWV9O3N3aXRjaCh0LmFsdE5hbWVzLnB1c2goaCkscC50eXBlKXtjYXNlIDE6Y2FzZSAyOmNhc2UgNjpicmVhaztjYXNlIDc6aC5pcD1hLnV0aWwuYnl0ZXNUb0lQKHAudmFsdWUpO2JyZWFrO2Nhc2UgODpoLm9pZD1uLmRlclRvT2lkKHAudmFsdWUpfX19ZWxzZSBpZigic3ViamVjdEtleUlkZW50aWZpZXIiPT09dC5uYW1lKXtjPW4uZnJvbURlcih0LnZhbHVlKTt0LnN1YmplY3RLZXlJZGVudGlmaWVyPWEudXRpbC5ieXRlc1RvSGV4KGMudmFsdWUpfXJldHVybiB0fSxpLmNlcnRpZmljYXRpb25SZXF1ZXN0RnJvbUFzbjE9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fSxvPVtdO2lmKCFuLnZhbGlkYXRlKGUsZixyLG8pKXRocm93KHU9bmV3IEVycm9yKCJDYW5ub3QgcmVhZCBQS0NTIzEwIGNlcnRpZmljYXRlIHJlcXVlc3QuIEFTTi4xIG9iamVjdCBpcyBub3QgYSBQS0NTIzEwIENlcnRpZmljYXRpb25SZXF1ZXN0LiIpKS5lcnJvcnM9byx1O2lmKG4uZGVyVG9PaWQoci5wdWJsaWNLZXlPaWQpIT09aS5vaWRzLnJzYUVuY3J5cHRpb24pdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcmVhZCBwdWJsaWMga2V5LiBPSUQgaXMgbm90IFJTQS4iKTt2YXIgYz1pLmNyZWF0ZUNlcnRpZmljYXRpb25SZXF1ZXN0KCk7aWYoYy52ZXJzaW9uPXIuY3NyVmVyc2lvbj9yLmNzclZlcnNpb24uY2hhckNvZGVBdCgwKTowLGMuc2lnbmF0dXJlT2lkPWEuYXNuMS5kZXJUb09pZChyLmNzclNpZ25hdHVyZU9pZCksYy5zaWduYXR1cmVQYXJhbWV0ZXJzPWQoYy5zaWduYXR1cmVPaWQsci5jc3JTaWduYXR1cmVQYXJhbXMsITApLGMuc2lnaW5mby5hbGdvcml0aG1PaWQ9YS5hc24xLmRlclRvT2lkKHIuY3NyU2lnbmF0dXJlT2lkKSxjLnNpZ2luZm8ucGFyYW1ldGVycz1kKGMuc2lnaW5mby5hbGdvcml0aG1PaWQsci5jc3JTaWduYXR1cmVQYXJhbXMsITEpLGMuc2lnbmF0dXJlPXIuY3NyU2lnbmF0dXJlLGMuY2VydGlmaWNhdGlvblJlcXVlc3RJbmZvPXIuY2VydGlmaWNhdGlvblJlcXVlc3RJbmZvLHQpe3ZhciB1O2lmKGMubWQ9bnVsbCxjLnNpZ25hdHVyZU9pZCBpbiBzKXN3aXRjaChzW2Muc2lnbmF0dXJlT2lkXSl7Y2FzZSJzaGExV2l0aFJTQUVuY3J5cHRpb24iOmMubWQ9YS5tZC5zaGExLmNyZWF0ZSgpO2JyZWFrO2Nhc2UibWQ1V2l0aFJTQUVuY3J5cHRpb24iOmMubWQ9YS5tZC5tZDUuY3JlYXRlKCk7YnJlYWs7Y2FzZSJzaGEyNTZXaXRoUlNBRW5jcnlwdGlvbiI6Yy5tZD1hLm1kLnNoYTI1Ni5jcmVhdGUoKTticmVhaztjYXNlInNoYTM4NFdpdGhSU0FFbmNyeXB0aW9uIjpjLm1kPWEubWQuc2hhMzg0LmNyZWF0ZSgpO2JyZWFrO2Nhc2Uic2hhNTEyV2l0aFJTQUVuY3J5cHRpb24iOmMubWQ9YS5tZC5zaGE1MTIuY3JlYXRlKCk7YnJlYWs7Y2FzZSJSU0FTU0EtUFNTIjpjLm1kPWEubWQuc2hhMjU2LmNyZWF0ZSgpfWlmKG51bGw9PT1jLm1kKXRocm93KHU9bmV3IEVycm9yKCJDb3VsZCBub3QgY29tcHV0ZSBjZXJ0aWZpY2F0aW9uIHJlcXVlc3QgZGlnZXN0LiBVbmtub3duIHNpZ25hdHVyZSBPSUQuIikpLnNpZ25hdHVyZU9pZD1jLnNpZ25hdHVyZU9pZCx1O3ZhciBsPW4udG9EZXIoYy5jZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm8pO2MubWQudXBkYXRlKGwuZ2V0Qnl0ZXMoKSl9dmFyIHA9YS5tZC5zaGExLmNyZWF0ZSgpO3JldHVybiBjLnN1YmplY3QuZ2V0RmllbGQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGgoYy5zdWJqZWN0LGUpfSxjLnN1YmplY3QuYWRkRmllbGQ9ZnVuY3Rpb24oZSl7ZyhbZV0pLGMuc3ViamVjdC5hdHRyaWJ1dGVzLnB1c2goZSl9LGMuc3ViamVjdC5hdHRyaWJ1dGVzPWkuUkROQXR0cmlidXRlc0FzQXJyYXkoci5jZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm9TdWJqZWN0LHApLGMuc3ViamVjdC5oYXNoPXAuZGlnZXN0KCkudG9IZXgoKSxjLnB1YmxpY0tleT1pLnB1YmxpY0tleUZyb21Bc24xKHIuc3ViamVjdFB1YmxpY0tleUluZm8pLGMuZ2V0QXR0cmlidXRlPWZ1bmN0aW9uKGUpe3JldHVybiBoKGMsZSl9LGMuYWRkQXR0cmlidXRlPWZ1bmN0aW9uKGUpe2coW2VdKSxjLmF0dHJpYnV0ZXMucHVzaChlKX0sYy5hdHRyaWJ1dGVzPWkuQ1JJQXR0cmlidXRlc0FzQXJyYXkoci5jZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm9BdHRyaWJ1dGVzfHxbXSksY30saS5jcmVhdGVDZXJ0aWZpY2F0aW9uUmVxdWVzdD1mdW5jdGlvbigpe3ZhciBlPXt2ZXJzaW9uOjAsc2lnbmF0dXJlT2lkOm51bGwsc2lnbmF0dXJlOm51bGwsc2lnaW5mbzp7fX07cmV0dXJuIGUuc2lnaW5mby5hbGdvcml0aG1PaWQ9bnVsbCxlLnN1YmplY3Q9e30sZS5zdWJqZWN0LmdldEZpZWxkPWZ1bmN0aW9uKHQpe3JldHVybiBoKGUuc3ViamVjdCx0KX0sZS5zdWJqZWN0LmFkZEZpZWxkPWZ1bmN0aW9uKHQpe2coW3RdKSxlLnN1YmplY3QuYXR0cmlidXRlcy5wdXNoKHQpfSxlLnN1YmplY3QuYXR0cmlidXRlcz1bXSxlLnN1YmplY3QuaGFzaD1udWxsLGUucHVibGljS2V5PW51bGwsZS5hdHRyaWJ1dGVzPVtdLGUuZ2V0QXR0cmlidXRlPWZ1bmN0aW9uKHQpe3JldHVybiBoKGUsdCl9LGUuYWRkQXR0cmlidXRlPWZ1bmN0aW9uKHQpe2coW3RdKSxlLmF0dHJpYnV0ZXMucHVzaCh0KX0sZS5tZD1udWxsLGUuc2V0U3ViamVjdD1mdW5jdGlvbih0KXtnKHQpLGUuc3ViamVjdC5hdHRyaWJ1dGVzPXQsZS5zdWJqZWN0Lmhhc2g9bnVsbH0sZS5zZXRBdHRyaWJ1dGVzPWZ1bmN0aW9uKHQpe2codCksZS5hdHRyaWJ1dGVzPXR9LGUuc2lnbj1mdW5jdGlvbih0LHIpe2UubWQ9cnx8YS5tZC5zaGExLmNyZWF0ZSgpO3ZhciBvPXNbZS5tZC5hbGdvcml0aG0rIldpdGhSU0FFbmNyeXB0aW9uIl07aWYoIW8pe3ZhciBjPW5ldyBFcnJvcigiQ291bGQgbm90IGNvbXB1dGUgY2VydGlmaWNhdGlvbiByZXF1ZXN0IGRpZ2VzdC4gVW5rbm93biBtZXNzYWdlIGRpZ2VzdCBhbGdvcml0aG0gT0lELiIpO3Rocm93IGMuYWxnb3JpdGhtPWUubWQuYWxnb3JpdGhtLGN9ZS5zaWduYXR1cmVPaWQ9ZS5zaWdpbmZvLmFsZ29yaXRobU9pZD1vLGUuY2VydGlmaWNhdGlvblJlcXVlc3RJbmZvPWkuZ2V0Q2VydGlmaWNhdGlvblJlcXVlc3RJbmZvKGUpO3ZhciB1PW4udG9EZXIoZS5jZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm8pO2UubWQudXBkYXRlKHUuZ2V0Qnl0ZXMoKSksZS5zaWduYXR1cmU9dC5zaWduKGUubWQpfSxlLnZlcmlmeT1mdW5jdGlvbigpe3ZhciB0PSExLHI9ZS5tZDtpZihudWxsPT09cil7aWYoZS5zaWduYXR1cmVPaWQgaW4gcylzd2l0Y2goc1tlLnNpZ25hdHVyZU9pZF0pe2Nhc2Uic2hhMVdpdGhSU0FFbmNyeXB0aW9uIjpyPWEubWQuc2hhMS5jcmVhdGUoKTticmVhaztjYXNlIm1kNVdpdGhSU0FFbmNyeXB0aW9uIjpyPWEubWQubWQ1LmNyZWF0ZSgpO2JyZWFrO2Nhc2Uic2hhMjU2V2l0aFJTQUVuY3J5cHRpb24iOnI9YS5tZC5zaGEyNTYuY3JlYXRlKCk7YnJlYWs7Y2FzZSJzaGEzODRXaXRoUlNBRW5jcnlwdGlvbiI6cj1hLm1kLnNoYTM4NC5jcmVhdGUoKTticmVhaztjYXNlInNoYTUxMldpdGhSU0FFbmNyeXB0aW9uIjpyPWEubWQuc2hhNTEyLmNyZWF0ZSgpO2JyZWFrO2Nhc2UiUlNBU1NBLVBTUyI6cj1hLm1kLnNoYTI1Ni5jcmVhdGUoKX1pZihudWxsPT09cil0aHJvdyhmPW5ldyBFcnJvcigiQ291bGQgbm90IGNvbXB1dGUgY2VydGlmaWNhdGlvbiByZXF1ZXN0IGRpZ2VzdC4gVW5rbm93biBzaWduYXR1cmUgT0lELiIpKS5zaWduYXR1cmVPaWQ9ZS5zaWduYXR1cmVPaWQsZjt2YXIgbz1lLmNlcnRpZmljYXRpb25SZXF1ZXN0SW5mb3x8aS5nZXRDZXJ0aWZpY2F0aW9uUmVxdWVzdEluZm8oZSksYz1uLnRvRGVyKG8pO3IudXBkYXRlKGMuZ2V0Qnl0ZXMoKSl9aWYobnVsbCE9PXIpe3ZhciB1O3N3aXRjaChlLnNpZ25hdHVyZU9pZCl7Y2FzZSBzLnNoYTFXaXRoUlNBRW5jcnlwdGlvbjpicmVhaztjYXNlIHNbIlJTQVNTQS1QU1MiXTp2YXIgbCxwLGY7aWYodm9pZCAwPT09KGw9c1tlLnNpZ25hdHVyZVBhcmFtZXRlcnMubWdmLmhhc2guYWxnb3JpdGhtT2lkXSl8fHZvaWQgMD09PWEubWRbbF0pdGhyb3coZj1uZXcgRXJyb3IoIlVuc3VwcG9ydGVkIE1HRiBoYXNoIGZ1bmN0aW9uLiIpKS5vaWQ9ZS5zaWduYXR1cmVQYXJhbWV0ZXJzLm1nZi5oYXNoLmFsZ29yaXRobU9pZCxmLm5hbWU9bCxmO2lmKHZvaWQgMD09PShwPXNbZS5zaWduYXR1cmVQYXJhbWV0ZXJzLm1nZi5hbGdvcml0aG1PaWRdKXx8dm9pZCAwPT09YS5tZ2ZbcF0pdGhyb3coZj1uZXcgRXJyb3IoIlVuc3VwcG9ydGVkIE1HRiBmdW5jdGlvbi4iKSkub2lkPWUuc2lnbmF0dXJlUGFyYW1ldGVycy5tZ2YuYWxnb3JpdGhtT2lkLGYubmFtZT1wLGY7aWYocD1hLm1nZltwXS5jcmVhdGUoYS5tZFtsXS5jcmVhdGUoKSksdm9pZCAwPT09KGw9c1tlLnNpZ25hdHVyZVBhcmFtZXRlcnMuaGFzaC5hbGdvcml0aG1PaWRdKXx8dm9pZCAwPT09YS5tZFtsXSl0aHJvdyhmPW5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgUlNBU1NBLVBTUyBoYXNoIGZ1bmN0aW9uLiIpKS5vaWQ9ZS5zaWduYXR1cmVQYXJhbWV0ZXJzLmhhc2guYWxnb3JpdGhtT2lkLGYubmFtZT1sLGY7dT1hLnBzcy5jcmVhdGUoYS5tZFtsXS5jcmVhdGUoKSxwLGUuc2lnbmF0dXJlUGFyYW1ldGVycy5zYWx0TGVuZ3RoKX10PWUucHVibGljS2V5LnZlcmlmeShyLmRpZ2VzdCgpLmdldEJ5dGVzKCksZS5zaWduYXR1cmUsdSl9cmV0dXJuIHR9LGV9O3ZhciBFPW5ldyBEYXRlKCIxOTUwLTAxLTAxVDAwOjAwOjAwWiIpLFM9bmV3IERhdGUoIjIwNTAtMDEtMDFUMDA6MDA6MDBaIik7ZnVuY3Rpb24gVChlKXtyZXR1cm4gZT49RSYmZTxTP24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5VVENUSU1FLCExLG4uZGF0ZVRvVXRjVGltZShlKSk6bi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLkdFTkVSQUxJWkVEVElNRSwhMSxuLmRhdGVUb0dlbmVyYWxpemVkVGltZShlKSl9aS5nZXRUQlNDZXJ0aWZpY2F0ZT1mdW5jdGlvbihlKXt2YXIgdD1UKGUudmFsaWRpdHkubm90QmVmb3JlKSxyPVQoZS52YWxpZGl0eS5ub3RBZnRlcikscz1uLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW24uY3JlYXRlKG4uQ2xhc3MuQ09OVEVYVF9TUEVDSUZJQywwLCEwLFtuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuSU5URUdFUiwhMSxuLmludGVnZXJUb0RlcihlLnZlcnNpb24pLmdldEJ5dGVzKCkpXSksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLklOVEVHRVIsITEsYS51dGlsLmhleFRvQnl0ZXMoZS5zZXJpYWxOdW1iZXIpKSxuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PSUQsITEsbi5vaWRUb0RlcihlLnNpZ2luZm8uYWxnb3JpdGhtT2lkKS5nZXRCeXRlcygpKSx2KGUuc2lnaW5mby5hbGdvcml0aG1PaWQsZS5zaWdpbmZvLnBhcmFtZXRlcnMpXSkseShlLmlzc3Vlciksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFt0LHJdKSx5KGUuc3ViamVjdCksaS5wdWJsaWNLZXlUb0FzbjEoZS5wdWJsaWNLZXkpXSk7cmV0dXJuIGUuaXNzdWVyLnVuaXF1ZUlkJiZzLnZhbHVlLnB1c2gobi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLDEsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5CSVRTVFJJTkcsITEsU3RyaW5nLmZyb21DaGFyQ29kZSgwKStlLmlzc3Vlci51bmlxdWVJZCldKSksZS5zdWJqZWN0LnVuaXF1ZUlkJiZzLnZhbHVlLnB1c2gobi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLDIsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5CSVRTVFJJTkcsITEsU3RyaW5nLmZyb21DaGFyQ29kZSgwKStlLnN1YmplY3QudW5pcXVlSWQpXSkpLGUuZXh0ZW5zaW9ucy5sZW5ndGg+MCYmcy52YWx1ZS5wdXNoKGkuY2VydGlmaWNhdGVFeHRlbnNpb25zVG9Bc24xKGUuZXh0ZW5zaW9ucykpLHN9LGkuZ2V0Q2VydGlmaWNhdGlvblJlcXVlc3RJbmZvPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5JTlRFR0VSLCExLG4uaW50ZWdlclRvRGVyKGUudmVyc2lvbikuZ2V0Qnl0ZXMoKSkseShlLnN1YmplY3QpLGkucHVibGljS2V5VG9Bc24xKGUucHVibGljS2V5KSxDKGUpXSl9LGkuZGlzdGluZ3Vpc2hlZE5hbWVUb0FzbjE9ZnVuY3Rpb24oZSl7cmV0dXJuIHkoZSl9LGkuY2VydGlmaWNhdGVUb0FzbjE9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS50YnNDZXJ0aWZpY2F0ZXx8aS5nZXRUQlNDZXJ0aWZpY2F0ZShlKTtyZXR1cm4gbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFt0LG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9JRCwhMSxuLm9pZFRvRGVyKGUuc2lnbmF0dXJlT2lkKS5nZXRCeXRlcygpKSx2KGUuc2lnbmF0dXJlT2lkLGUuc2lnbmF0dXJlUGFyYW1ldGVycyldKSxuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuQklUU1RSSU5HLCExLFN0cmluZy5mcm9tQ2hhckNvZGUoMCkrZS5zaWduYXR1cmUpXSl9LGkuY2VydGlmaWNhdGVFeHRlbnNpb25zVG9Bc24xPWZ1bmN0aW9uKGUpe3ZhciB0PW4uY3JlYXRlKG4uQ2xhc3MuQ09OVEVYVF9TUEVDSUZJQywzLCEwLFtdKSxyPW4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbXSk7dC52YWx1ZS5wdXNoKHIpO2Zvcih2YXIgYT0wO2E8ZS5sZW5ndGg7KythKXIudmFsdWUucHVzaChpLmNlcnRpZmljYXRlRXh0ZW5zaW9uVG9Bc24xKGVbYV0pKTtyZXR1cm4gdH0saS5jZXJ0aWZpY2F0ZUV4dGVuc2lvblRvQXNuMT1mdW5jdGlvbihlKXt2YXIgdD1uLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW10pO3QudmFsdWUucHVzaChuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0lELCExLG4ub2lkVG9EZXIoZS5pZCkuZ2V0Qnl0ZXMoKSkpLGUuY3JpdGljYWwmJnQudmFsdWUucHVzaChuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuQk9PTEVBTiwhMSxTdHJpbmcuZnJvbUNoYXJDb2RlKDI1NSkpKTt2YXIgcj1lLnZhbHVlO3JldHVybiJzdHJpbmciIT10eXBlb2YgZS52YWx1ZSYmKHI9bi50b0RlcihyKS5nZXRCeXRlcygpKSx0LnZhbHVlLnB1c2gobi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9DVEVUU1RSSU5HLCExLHIpKSx0fSxpLmNlcnRpZmljYXRpb25SZXF1ZXN0VG9Bc24xPWZ1bmN0aW9uKGUpe3ZhciB0PWUuY2VydGlmaWNhdGlvblJlcXVlc3RJbmZvfHxpLmdldENlcnRpZmljYXRpb25SZXF1ZXN0SW5mbyhlKTtyZXR1cm4gbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFt0LG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9JRCwhMSxuLm9pZFRvRGVyKGUuc2lnbmF0dXJlT2lkKS5nZXRCeXRlcygpKSx2KGUuc2lnbmF0dXJlT2lkLGUuc2lnbmF0dXJlUGFyYW1ldGVycyldKSxuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuQklUU1RSSU5HLCExLFN0cmluZy5mcm9tQ2hhckNvZGUoMCkrZS5zaWduYXR1cmUpXSl9LGkuY3JlYXRlQ2FTdG9yZT1mdW5jdGlvbihlKXt2YXIgdD17Y2VydHM6e319O2Z1bmN0aW9uIHIoZSl7cmV0dXJuIHMoZSksdC5jZXJ0c1tlLmhhc2hdfHxudWxsfWZ1bmN0aW9uIHMoZSl7aWYoIWUuaGFzaCl7dmFyIHQ9YS5tZC5zaGExLmNyZWF0ZSgpO2UuYXR0cmlidXRlcz1pLlJETkF0dHJpYnV0ZXNBc0FycmF5KHkoZSksdCksZS5oYXNoPXQuZGlnZXN0KCkudG9IZXgoKX19aWYodC5nZXRJc3N1ZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHIoZS5pc3N1ZXIpfSx0LmFkZENlcnRpZmljYXRlPWZ1bmN0aW9uKGUpe2lmKCJzdHJpbmciPT10eXBlb2YgZSYmKGU9YS5wa2kuY2VydGlmaWNhdGVGcm9tUGVtKGUpKSxzKGUuc3ViamVjdCksIXQuaGFzQ2VydGlmaWNhdGUoZSkpaWYoZS5zdWJqZWN0Lmhhc2ggaW4gdC5jZXJ0cyl7dmFyIHI9dC5jZXJ0c1tlLnN1YmplY3QuaGFzaF07YS51dGlsLmlzQXJyYXkocil8fChyPVtyXSksci5wdXNoKGUpLHQuY2VydHNbZS5zdWJqZWN0Lmhhc2hdPXJ9ZWxzZSB0LmNlcnRzW2Uuc3ViamVjdC5oYXNoXT1lfSx0Lmhhc0NlcnRpZmljYXRlPWZ1bmN0aW9uKGUpeyJzdHJpbmciPT10eXBlb2YgZSYmKGU9YS5wa2kuY2VydGlmaWNhdGVGcm9tUGVtKGUpKTt2YXIgdD1yKGUuc3ViamVjdCk7aWYoIXQpcmV0dXJuITE7YS51dGlsLmlzQXJyYXkodCl8fCh0PVt0XSk7Zm9yKHZhciBzPW4udG9EZXIoaS5jZXJ0aWZpY2F0ZVRvQXNuMShlKSkuZ2V0Qnl0ZXMoKSxvPTA7bzx0Lmxlbmd0aDsrK28pe2lmKHM9PT1uLnRvRGVyKGkuY2VydGlmaWNhdGVUb0FzbjEodFtvXSkpLmdldEJ5dGVzKCkpcmV0dXJuITB9cmV0dXJuITF9LHQubGlzdEFsbENlcnRpZmljYXRlcz1mdW5jdGlvbigpe3ZhciBlPVtdO2Zvcih2YXIgciBpbiB0LmNlcnRzKWlmKHQuY2VydHMuaGFzT3duUHJvcGVydHkocikpe3ZhciBuPXQuY2VydHNbcl07aWYoYS51dGlsLmlzQXJyYXkobikpZm9yKHZhciBpPTA7aTxuLmxlbmd0aDsrK2kpZS5wdXNoKG5baV0pO2Vsc2UgZS5wdXNoKG4pfXJldHVybiBlfSx0LnJlbW92ZUNlcnRpZmljYXRlPWZ1bmN0aW9uKGUpe3ZhciBvO2lmKCJzdHJpbmciPT10eXBlb2YgZSYmKGU9YS5wa2kuY2VydGlmaWNhdGVGcm9tUGVtKGUpKSxzKGUuc3ViamVjdCksIXQuaGFzQ2VydGlmaWNhdGUoZSkpcmV0dXJuIG51bGw7dmFyIGM9cihlLnN1YmplY3QpO2lmKCFhLnV0aWwuaXNBcnJheShjKSlyZXR1cm4gbz10LmNlcnRzW2Uuc3ViamVjdC5oYXNoXSxkZWxldGUgdC5jZXJ0c1tlLnN1YmplY3QuaGFzaF0sbztmb3IodmFyIHU9bi50b0RlcihpLmNlcnRpZmljYXRlVG9Bc24xKGUpKS5nZXRCeXRlcygpLGw9MDtsPGMubGVuZ3RoOysrbCl7dT09PW4udG9EZXIoaS5jZXJ0aWZpY2F0ZVRvQXNuMShjW2xdKSkuZ2V0Qnl0ZXMoKSYmKG89Y1tsXSxjLnNwbGljZShsLDEpKX1yZXR1cm4gMD09PWMubGVuZ3RoJiZkZWxldGUgdC5jZXJ0c1tlLnN1YmplY3QuaGFzaF0sb30sZSlmb3IodmFyIG89MDtvPGUubGVuZ3RoOysrbyl7dmFyIGM9ZVtvXTt0LmFkZENlcnRpZmljYXRlKGMpfXJldHVybiB0fSxpLmNlcnRpZmljYXRlRXJyb3I9e2JhZF9jZXJ0aWZpY2F0ZToiZm9yZ2UucGtpLkJhZENlcnRpZmljYXRlIix1bnN1cHBvcnRlZF9jZXJ0aWZpY2F0ZToiZm9yZ2UucGtpLlVuc3VwcG9ydGVkQ2VydGlmaWNhdGUiLGNlcnRpZmljYXRlX3Jldm9rZWQ6ImZvcmdlLnBraS5DZXJ0aWZpY2F0ZVJldm9rZWQiLGNlcnRpZmljYXRlX2V4cGlyZWQ6ImZvcmdlLnBraS5DZXJ0aWZpY2F0ZUV4cGlyZWQiLGNlcnRpZmljYXRlX3Vua25vd246ImZvcmdlLnBraS5DZXJ0aWZpY2F0ZVVua25vd24iLHVua25vd25fY2E6ImZvcmdlLnBraS5Vbmtub3duQ2VydGlmaWNhdGVBdXRob3JpdHkifSxpLnZlcmlmeUNlcnRpZmljYXRlQ2hhaW49ZnVuY3Rpb24oZSx0LHIpeyJmdW5jdGlvbiI9PXR5cGVvZiByJiYocj17dmVyaWZ5OnJ9KSxyPXJ8fHt9O3ZhciBuPSh0PXQuc2xpY2UoMCkpLnNsaWNlKDApLHM9ci52YWxpZGl0eUNoZWNrRGF0ZTt2b2lkIDA9PT1zJiYocz1uZXcgRGF0ZSk7dmFyIG89ITAsYz1udWxsLHU9MDtkb3t2YXIgbD10LnNoaWZ0KCkscD1udWxsLGY9ITE7aWYocyYmKHM8bC52YWxpZGl0eS5ub3RCZWZvcmV8fHM+bC52YWxpZGl0eS5ub3RBZnRlcikmJihjPXttZXNzYWdlOiJDZXJ0aWZpY2F0ZSBpcyBub3QgdmFsaWQgeWV0IG9yIGhhcyBleHBpcmVkLiIsZXJyb3I6aS5jZXJ0aWZpY2F0ZUVycm9yLmNlcnRpZmljYXRlX2V4cGlyZWQsbm90QmVmb3JlOmwudmFsaWRpdHkubm90QmVmb3JlLG5vdEFmdGVyOmwudmFsaWRpdHkubm90QWZ0ZXIsbm93OnN9KSxudWxsPT09Yyl7aWYobnVsbD09PShwPXRbMF18fGUuZ2V0SXNzdWVyKGwpKSYmbC5pc0lzc3VlcihsKSYmKGY9ITAscD1sKSxwKXt2YXIgaD1wO2EudXRpbC5pc0FycmF5KGgpfHwoaD1baF0pO2Zvcih2YXIgZD0hMTshZCYmaC5sZW5ndGg+MDspe3A9aC5zaGlmdCgpO3RyeXtkPXAudmVyaWZ5KGwpfWNhdGNoKGUpe319ZHx8KGM9e21lc3NhZ2U6IkNlcnRpZmljYXRlIHNpZ25hdHVyZSBpcyBpbnZhbGlkLiIsZXJyb3I6aS5jZXJ0aWZpY2F0ZUVycm9yLmJhZF9jZXJ0aWZpY2F0ZX0pfW51bGwhPT1jfHxwJiYhZnx8ZS5oYXNDZXJ0aWZpY2F0ZShsKXx8KGM9e21lc3NhZ2U6IkNlcnRpZmljYXRlIGlzIG5vdCB0cnVzdGVkLiIsZXJyb3I6aS5jZXJ0aWZpY2F0ZUVycm9yLnVua25vd25fY2F9KX1pZihudWxsPT09YyYmcCYmIWwuaXNJc3N1ZXIocCkmJihjPXttZXNzYWdlOiJDZXJ0aWZpY2F0ZSBpc3N1ZXIgaXMgaW52YWxpZC4iLGVycm9yOmkuY2VydGlmaWNhdGVFcnJvci5iYWRfY2VydGlmaWNhdGV9KSxudWxsPT09Yylmb3IodmFyIHk9e2tleVVzYWdlOiEwLGJhc2ljQ29uc3RyYWludHM6ITB9LGc9MDtudWxsPT09YyYmZzxsLmV4dGVuc2lvbnMubGVuZ3RoOysrZyl7dmFyIG09bC5leHRlbnNpb25zW2ddO20uY3JpdGljYWwmJiEobS5uYW1lIGluIHkpJiYoYz17bWVzc2FnZToiQ2VydGlmaWNhdGUgaGFzIGFuIHVuc3VwcG9ydGVkIGNyaXRpY2FsIGV4dGVuc2lvbi4iLGVycm9yOmkuY2VydGlmaWNhdGVFcnJvci51bnN1cHBvcnRlZF9jZXJ0aWZpY2F0ZX0pfWlmKG51bGw9PT1jJiYoIW98fDA9PT10Lmxlbmd0aCYmKCFwfHxmKSkpe3ZhciB2PWwuZ2V0RXh0ZW5zaW9uKCJiYXNpY0NvbnN0cmFpbnRzIiksQz1sLmdldEV4dGVuc2lvbigia2V5VXNhZ2UiKTtpZihudWxsIT09QyYmKEMua2V5Q2VydFNpZ24mJm51bGwhPT12fHwoYz17bWVzc2FnZToiQ2VydGlmaWNhdGUga2V5VXNhZ2Ugb3IgYmFzaWNDb25zdHJhaW50cyBjb25mbGljdCBvciBpbmRpY2F0ZSB0aGF0IHRoZSBjZXJ0aWZpY2F0ZSBpcyBub3QgYSBDQS4gSWYgdGhlIGNlcnRpZmljYXRlIGlzIHRoZSBvbmx5IG9uZSBpbiB0aGUgY2hhaW4gb3IgaXNuJ3QgdGhlIGZpcnN0IHRoZW4gdGhlIGNlcnRpZmljYXRlIG11c3QgYmUgYSB2YWxpZCBDQS4iLGVycm9yOmkuY2VydGlmaWNhdGVFcnJvci5iYWRfY2VydGlmaWNhdGV9KSksbnVsbCE9PWN8fG51bGw9PT12fHx2LmNBfHwoYz17bWVzc2FnZToiQ2VydGlmaWNhdGUgYmFzaWNDb25zdHJhaW50cyBpbmRpY2F0ZXMgdGhlIGNlcnRpZmljYXRlIGlzIG5vdCBhIENBLiIsZXJyb3I6aS5jZXJ0aWZpY2F0ZUVycm9yLmJhZF9jZXJ0aWZpY2F0ZX0pLG51bGw9PT1jJiZudWxsIT09QyYmInBhdGhMZW5Db25zdHJhaW50ImluIHYpdS0xPnYucGF0aExlbkNvbnN0cmFpbnQmJihjPXttZXNzYWdlOiJDZXJ0aWZpY2F0ZSBiYXNpY0NvbnN0cmFpbnRzIHBhdGhMZW5Db25zdHJhaW50IHZpb2xhdGVkLiIsZXJyb3I6aS5jZXJ0aWZpY2F0ZUVycm9yLmJhZF9jZXJ0aWZpY2F0ZX0pfXZhciBFPW51bGw9PT1jfHxjLmVycm9yLFM9ci52ZXJpZnk/ci52ZXJpZnkoRSx1LG4pOkU7aWYoITAhPT1TKXRocm93ITA9PT1FJiYoYz17bWVzc2FnZToiVGhlIGFwcGxpY2F0aW9uIHJlamVjdGVkIHRoZSBjZXJ0aWZpY2F0ZS4iLGVycm9yOmkuY2VydGlmaWNhdGVFcnJvci5iYWRfY2VydGlmaWNhdGV9KSwoU3x8MD09PVMpJiYoIm9iamVjdCIhPXR5cGVvZiBTfHxhLnV0aWwuaXNBcnJheShTKT8ic3RyaW5nIj09dHlwZW9mIFMmJihjLmVycm9yPVMpOihTLm1lc3NhZ2UmJihjLm1lc3NhZ2U9Uy5tZXNzYWdlKSxTLmVycm9yJiYoYy5lcnJvcj1TLmVycm9yKSkpLGM7Yz1udWxsLG89ITEsKyt1fXdoaWxlKHQubGVuZ3RoPjApO3JldHVybiEwfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXIoMCk7cigyKSxyKDEpLChlLmV4cG9ydHM9YS5wc3M9YS5wc3N8fHt9KS5jcmVhdGU9ZnVuY3Rpb24oZSl7Mz09PWFyZ3VtZW50cy5sZW5ndGgmJihlPXttZDphcmd1bWVudHNbMF0sbWdmOmFyZ3VtZW50c1sxXSxzYWx0TGVuZ3RoOmFyZ3VtZW50c1syXX0pO3ZhciB0LHI9ZS5tZCxuPWUubWdmLGk9ci5kaWdlc3RMZW5ndGgscz1lLnNhbHR8fG51bGw7aWYoInN0cmluZyI9PXR5cGVvZiBzJiYocz1hLnV0aWwuY3JlYXRlQnVmZmVyKHMpKSwic2FsdExlbmd0aCJpbiBlKXQ9ZS5zYWx0TGVuZ3RoO2Vsc2V7aWYobnVsbD09PXMpdGhyb3cgbmV3IEVycm9yKCJTYWx0IGxlbmd0aCBub3Qgc3BlY2lmaWVkIG9yIHNwZWNpZmljIHNhbHQgbm90IGdpdmVuLiIpO3Q9cy5sZW5ndGgoKX1pZihudWxsIT09cyYmcy5sZW5ndGgoKSE9PXQpdGhyb3cgbmV3IEVycm9yKCJHaXZlbiBzYWx0IGxlbmd0aCBkb2VzIG5vdCBtYXRjaCBsZW5ndGggb2YgZ2l2ZW4gc2FsdC4iKTt2YXIgbz1lLnBybmd8fGEucmFuZG9tLGM9e2VuY29kZTpmdW5jdGlvbihlLGMpe3ZhciB1LGwscD1jLTEsZj1NYXRoLmNlaWwocC84KSxoPWUuZGlnZXN0KCkuZ2V0Qnl0ZXMoKTtpZihmPGkrdCsyKXRocm93IG5ldyBFcnJvcigiTWVzc2FnZSBpcyB0b28gbG9uZyB0byBlbmNyeXB0LiIpO2w9bnVsbD09PXM/by5nZXRCeXRlc1N5bmModCk6cy5ieXRlcygpO3ZhciBkPW5ldyBhLnV0aWwuQnl0ZUJ1ZmZlcjtkLmZpbGxXaXRoQnl0ZSgwLDgpLGQucHV0Qnl0ZXMoaCksZC5wdXRCeXRlcyhsKSxyLnN0YXJ0KCksci51cGRhdGUoZC5nZXRCeXRlcygpKTt2YXIgeT1yLmRpZ2VzdCgpLmdldEJ5dGVzKCksZz1uZXcgYS51dGlsLkJ5dGVCdWZmZXI7Zy5maWxsV2l0aEJ5dGUoMCxmLXQtaS0yKSxnLnB1dEJ5dGUoMSksZy5wdXRCeXRlcyhsKTt2YXIgbT1nLmdldEJ5dGVzKCksdj1mLWktMSxDPW4uZ2VuZXJhdGUoeSx2KSxFPSIiO2Zvcih1PTA7dTx2O3UrKylFKz1TdHJpbmcuZnJvbUNoYXJDb2RlKG0uY2hhckNvZGVBdCh1KV5DLmNoYXJDb2RlQXQodSkpO3ZhciBTPTY1MjgwPj44KmYtcCYyNTU7cmV0dXJuKEU9U3RyaW5nLmZyb21DaGFyQ29kZShFLmNoYXJDb2RlQXQoMCkmflMpK0Uuc3Vic3RyKDEpKSt5K1N0cmluZy5mcm9tQ2hhckNvZGUoMTg4KX0sdmVyaWZ5OmZ1bmN0aW9uKGUscyxvKXt2YXIgYyx1PW8tMSxsPU1hdGguY2VpbCh1LzgpO2lmKHM9cy5zdWJzdHIoLWwpLGw8aSt0KzIpdGhyb3cgbmV3IEVycm9yKCJJbmNvbnNpc3RlbnQgcGFyYW1ldGVycyB0byBQU1Mgc2lnbmF0dXJlIHZlcmlmaWNhdGlvbi4iKTtpZigxODghPT1zLmNoYXJDb2RlQXQobC0xKSl0aHJvdyBuZXcgRXJyb3IoIkVuY29kZWQgbWVzc2FnZSBkb2VzIG5vdCBlbmQgaW4gMHhCQy4iKTt2YXIgcD1sLWktMSxmPXMuc3Vic3RyKDAscCksaD1zLnN1YnN0cihwLGkpLGQ9NjUyODA+PjgqbC11JjI1NTtpZigwIT0oZi5jaGFyQ29kZUF0KDApJmQpKXRocm93IG5ldyBFcnJvcigiQml0cyBiZXlvbmQga2V5c2l6ZSBub3QgemVybyBhcyBleHBlY3RlZC4iKTt2YXIgeT1uLmdlbmVyYXRlKGgscCksZz0iIjtmb3IoYz0wO2M8cDtjKyspZys9U3RyaW5nLmZyb21DaGFyQ29kZShmLmNoYXJDb2RlQXQoYyleeS5jaGFyQ29kZUF0KGMpKTtnPVN0cmluZy5mcm9tQ2hhckNvZGUoZy5jaGFyQ29kZUF0KDApJn5kKStnLnN1YnN0cigxKTt2YXIgbT1sLWktdC0yO2ZvcihjPTA7YzxtO2MrKylpZigwIT09Zy5jaGFyQ29kZUF0KGMpKXRocm93IG5ldyBFcnJvcigiTGVmdG1vc3Qgb2N0ZXRzIG5vdCB6ZXJvIGFzIGV4cGVjdGVkIik7aWYoMSE9PWcuY2hhckNvZGVBdChtKSl0aHJvdyBuZXcgRXJyb3IoIkluY29uc2lzdGVudCBQU1Mgc2lnbmF0dXJlLCAweDAxIG1hcmtlciBub3QgZm91bmQiKTt2YXIgdj1nLnN1YnN0cigtdCksQz1uZXcgYS51dGlsLkJ5dGVCdWZmZXI7cmV0dXJuIEMuZmlsbFdpdGhCeXRlKDAsOCksQy5wdXRCeXRlcyhlKSxDLnB1dEJ5dGVzKHYpLHIuc3RhcnQoKSxyLnVwZGF0ZShDLmdldEJ5dGVzKCkpLGg9PT1yLmRpZ2VzdCgpLmdldEJ5dGVzKCl9fTtyZXR1cm4gY319LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO3IoMSksYS5jaXBoZXI9YS5jaXBoZXJ8fHt9O3ZhciBuPWUuZXhwb3J0cz1hLmNpcGhlci5tb2Rlcz1hLmNpcGhlci5tb2Rlc3x8e307ZnVuY3Rpb24gaShlLHQpe2lmKCJzdHJpbmciPT10eXBlb2YgZSYmKGU9YS51dGlsLmNyZWF0ZUJ1ZmZlcihlKSksYS51dGlsLmlzQXJyYXkoZSkmJmUubGVuZ3RoPjQpe3ZhciByPWU7ZT1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7Zm9yKHZhciBuPTA7bjxyLmxlbmd0aDsrK24pZS5wdXRCeXRlKHJbbl0pfWlmKGUubGVuZ3RoKCk8dCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgSVYgbGVuZ3RoOyBnb3QgIitlLmxlbmd0aCgpKyIgYnl0ZXMgYW5kIGV4cGVjdGVkICIrdCsiIGJ5dGVzLiIpO2lmKCFhLnV0aWwuaXNBcnJheShlKSl7dmFyIGk9W10scz10LzQ7Zm9yKG49MDtuPHM7KytuKWkucHVzaChlLmdldEludDMyKCkpO2U9aX1yZXR1cm4gZX1mdW5jdGlvbiBzKGUpe2VbZS5sZW5ndGgtMV09ZVtlLmxlbmd0aC0xXSsxJjQyOTQ5NjcyOTV9ZnVuY3Rpb24gbyhlKXtyZXR1cm5bZS80Mjk0OTY3Mjk2fDAsNDI5NDk2NzI5NSZlXX1uLmVjYj1mdW5jdGlvbihlKXtlPWV8fHt9LHRoaXMubmFtZT0iRUNCIix0aGlzLmNpcGhlcj1lLmNpcGhlcix0aGlzLmJsb2NrU2l6ZT1lLmJsb2NrU2l6ZXx8MTYsdGhpcy5faW50cz10aGlzLmJsb2NrU2l6ZS80LHRoaXMuX2luQmxvY2s9bmV3IEFycmF5KHRoaXMuX2ludHMpLHRoaXMuX291dEJsb2NrPW5ldyBBcnJheSh0aGlzLl9pbnRzKX0sbi5lY2IucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGUpe30sbi5lY2IucHJvdG90eXBlLmVuY3J5cHQ9ZnVuY3Rpb24oZSx0LHIpe2lmKGUubGVuZ3RoKCk8dGhpcy5ibG9ja1NpemUmJiEociYmZS5sZW5ndGgoKT4wKSlyZXR1cm4hMDtmb3IodmFyIGE9MDthPHRoaXMuX2ludHM7KythKXRoaXMuX2luQmxvY2tbYV09ZS5nZXRJbnQzMigpO3RoaXMuY2lwaGVyLmVuY3J5cHQodGhpcy5faW5CbG9jayx0aGlzLl9vdXRCbG9jayk7Zm9yKGE9MDthPHRoaXMuX2ludHM7KythKXQucHV0SW50MzIodGhpcy5fb3V0QmxvY2tbYV0pfSxuLmVjYi5wcm90b3R5cGUuZGVjcnlwdD1mdW5jdGlvbihlLHQscil7aWYoZS5sZW5ndGgoKTx0aGlzLmJsb2NrU2l6ZSYmIShyJiZlLmxlbmd0aCgpPjApKXJldHVybiEwO2Zvcih2YXIgYT0wO2E8dGhpcy5faW50czsrK2EpdGhpcy5faW5CbG9ja1thXT1lLmdldEludDMyKCk7dGhpcy5jaXBoZXIuZGVjcnlwdCh0aGlzLl9pbkJsb2NrLHRoaXMuX291dEJsb2NrKTtmb3IoYT0wO2E8dGhpcy5faW50czsrK2EpdC5wdXRJbnQzMih0aGlzLl9vdXRCbG9ja1thXSl9LG4uZWNiLnByb3RvdHlwZS5wYWQ9ZnVuY3Rpb24oZSx0KXt2YXIgcj1lLmxlbmd0aCgpPT09dGhpcy5ibG9ja1NpemU/dGhpcy5ibG9ja1NpemU6dGhpcy5ibG9ja1NpemUtZS5sZW5ndGgoKTtyZXR1cm4gZS5maWxsV2l0aEJ5dGUocixyKSwhMH0sbi5lY2IucHJvdG90eXBlLnVucGFkPWZ1bmN0aW9uKGUsdCl7aWYodC5vdmVyZmxvdz4wKXJldHVybiExO3ZhciByPWUubGVuZ3RoKCksYT1lLmF0KHItMSk7cmV0dXJuIShhPnRoaXMuYmxvY2tTaXplPDwyKSYmKGUudHJ1bmNhdGUoYSksITApfSxuLmNiYz1mdW5jdGlvbihlKXtlPWV8fHt9LHRoaXMubmFtZT0iQ0JDIix0aGlzLmNpcGhlcj1lLmNpcGhlcix0aGlzLmJsb2NrU2l6ZT1lLmJsb2NrU2l6ZXx8MTYsdGhpcy5faW50cz10aGlzLmJsb2NrU2l6ZS80LHRoaXMuX2luQmxvY2s9bmV3IEFycmF5KHRoaXMuX2ludHMpLHRoaXMuX291dEJsb2NrPW5ldyBBcnJheSh0aGlzLl9pbnRzKX0sbi5jYmMucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGUpe2lmKG51bGw9PT1lLml2KXtpZighdGhpcy5fcHJldil0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgSVYgcGFyYW1ldGVyLiIpO3RoaXMuX2l2PXRoaXMuX3ByZXYuc2xpY2UoMCl9ZWxzZXtpZighKCJpdiJpbiBlKSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgSVYgcGFyYW1ldGVyLiIpO3RoaXMuX2l2PWkoZS5pdix0aGlzLmJsb2NrU2l6ZSksdGhpcy5fcHJldj10aGlzLl9pdi5zbGljZSgwKX19LG4uY2JjLnByb3RvdHlwZS5lbmNyeXB0PWZ1bmN0aW9uKGUsdCxyKXtpZihlLmxlbmd0aCgpPHRoaXMuYmxvY2tTaXplJiYhKHImJmUubGVuZ3RoKCk+MCkpcmV0dXJuITA7Zm9yKHZhciBhPTA7YTx0aGlzLl9pbnRzOysrYSl0aGlzLl9pbkJsb2NrW2FdPXRoaXMuX3ByZXZbYV1eZS5nZXRJbnQzMigpO3RoaXMuY2lwaGVyLmVuY3J5cHQodGhpcy5faW5CbG9jayx0aGlzLl9vdXRCbG9jayk7Zm9yKGE9MDthPHRoaXMuX2ludHM7KythKXQucHV0SW50MzIodGhpcy5fb3V0QmxvY2tbYV0pO3RoaXMuX3ByZXY9dGhpcy5fb3V0QmxvY2t9LG4uY2JjLnByb3RvdHlwZS5kZWNyeXB0PWZ1bmN0aW9uKGUsdCxyKXtpZihlLmxlbmd0aCgpPHRoaXMuYmxvY2tTaXplJiYhKHImJmUubGVuZ3RoKCk+MCkpcmV0dXJuITA7Zm9yKHZhciBhPTA7YTx0aGlzLl9pbnRzOysrYSl0aGlzLl9pbkJsb2NrW2FdPWUuZ2V0SW50MzIoKTt0aGlzLmNpcGhlci5kZWNyeXB0KHRoaXMuX2luQmxvY2ssdGhpcy5fb3V0QmxvY2spO2ZvcihhPTA7YTx0aGlzLl9pbnRzOysrYSl0LnB1dEludDMyKHRoaXMuX3ByZXZbYV1edGhpcy5fb3V0QmxvY2tbYV0pO3RoaXMuX3ByZXY9dGhpcy5faW5CbG9jay5zbGljZSgwKX0sbi5jYmMucHJvdG90eXBlLnBhZD1mdW5jdGlvbihlLHQpe3ZhciByPWUubGVuZ3RoKCk9PT10aGlzLmJsb2NrU2l6ZT90aGlzLmJsb2NrU2l6ZTp0aGlzLmJsb2NrU2l6ZS1lLmxlbmd0aCgpO3JldHVybiBlLmZpbGxXaXRoQnl0ZShyLHIpLCEwfSxuLmNiYy5wcm90b3R5cGUudW5wYWQ9ZnVuY3Rpb24oZSx0KXtpZih0Lm92ZXJmbG93PjApcmV0dXJuITE7dmFyIHI9ZS5sZW5ndGgoKSxhPWUuYXQoci0xKTtyZXR1cm4hKGE+dGhpcy5ibG9ja1NpemU8PDIpJiYoZS50cnVuY2F0ZShhKSwhMCl9LG4uY2ZiPWZ1bmN0aW9uKGUpe2U9ZXx8e30sdGhpcy5uYW1lPSJDRkIiLHRoaXMuY2lwaGVyPWUuY2lwaGVyLHRoaXMuYmxvY2tTaXplPWUuYmxvY2tTaXplfHwxNix0aGlzLl9pbnRzPXRoaXMuYmxvY2tTaXplLzQsdGhpcy5faW5CbG9jaz1udWxsLHRoaXMuX291dEJsb2NrPW5ldyBBcnJheSh0aGlzLl9pbnRzKSx0aGlzLl9wYXJ0aWFsQmxvY2s9bmV3IEFycmF5KHRoaXMuX2ludHMpLHRoaXMuX3BhcnRpYWxPdXRwdXQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpLHRoaXMuX3BhcnRpYWxCeXRlcz0wfSxuLmNmYi5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oZSl7aWYoISgiaXYiaW4gZSkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIElWIHBhcmFtZXRlci4iKTt0aGlzLl9pdj1pKGUuaXYsdGhpcy5ibG9ja1NpemUpLHRoaXMuX2luQmxvY2s9dGhpcy5faXYuc2xpY2UoMCksdGhpcy5fcGFydGlhbEJ5dGVzPTB9LG4uY2ZiLnByb3RvdHlwZS5lbmNyeXB0PWZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1lLmxlbmd0aCgpO2lmKDA9PT1hKXJldHVybiEwO2lmKHRoaXMuY2lwaGVyLmVuY3J5cHQodGhpcy5faW5CbG9jayx0aGlzLl9vdXRCbG9jayksMD09PXRoaXMuX3BhcnRpYWxCeXRlcyYmYT49dGhpcy5ibG9ja1NpemUpZm9yKHZhciBuPTA7bjx0aGlzLl9pbnRzOysrbil0aGlzLl9pbkJsb2NrW25dPWUuZ2V0SW50MzIoKV50aGlzLl9vdXRCbG9ja1tuXSx0LnB1dEludDMyKHRoaXMuX2luQmxvY2tbbl0pO2Vsc2V7dmFyIGk9KHRoaXMuYmxvY2tTaXplLWEpJXRoaXMuYmxvY2tTaXplO2k+MCYmKGk9dGhpcy5ibG9ja1NpemUtaSksdGhpcy5fcGFydGlhbE91dHB1dC5jbGVhcigpO2ZvcihuPTA7bjx0aGlzLl9pbnRzOysrbil0aGlzLl9wYXJ0aWFsQmxvY2tbbl09ZS5nZXRJbnQzMigpXnRoaXMuX291dEJsb2NrW25dLHRoaXMuX3BhcnRpYWxPdXRwdXQucHV0SW50MzIodGhpcy5fcGFydGlhbEJsb2NrW25dKTtpZihpPjApZS5yZWFkLT10aGlzLmJsb2NrU2l6ZTtlbHNlIGZvcihuPTA7bjx0aGlzLl9pbnRzOysrbil0aGlzLl9pbkJsb2NrW25dPXRoaXMuX3BhcnRpYWxCbG9ja1tuXTtpZih0aGlzLl9wYXJ0aWFsQnl0ZXM+MCYmdGhpcy5fcGFydGlhbE91dHB1dC5nZXRCeXRlcyh0aGlzLl9wYXJ0aWFsQnl0ZXMpLGk+MCYmIXIpcmV0dXJuIHQucHV0Qnl0ZXModGhpcy5fcGFydGlhbE91dHB1dC5nZXRCeXRlcyhpLXRoaXMuX3BhcnRpYWxCeXRlcykpLHRoaXMuX3BhcnRpYWxCeXRlcz1pLCEwO3QucHV0Qnl0ZXModGhpcy5fcGFydGlhbE91dHB1dC5nZXRCeXRlcyhhLXRoaXMuX3BhcnRpYWxCeXRlcykpLHRoaXMuX3BhcnRpYWxCeXRlcz0wfX0sbi5jZmIucHJvdG90eXBlLmRlY3J5cHQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPWUubGVuZ3RoKCk7aWYoMD09PWEpcmV0dXJuITA7aWYodGhpcy5jaXBoZXIuZW5jcnlwdCh0aGlzLl9pbkJsb2NrLHRoaXMuX291dEJsb2NrKSwwPT09dGhpcy5fcGFydGlhbEJ5dGVzJiZhPj10aGlzLmJsb2NrU2l6ZSlmb3IodmFyIG49MDtuPHRoaXMuX2ludHM7KytuKXRoaXMuX2luQmxvY2tbbl09ZS5nZXRJbnQzMigpLHQucHV0SW50MzIodGhpcy5faW5CbG9ja1tuXV50aGlzLl9vdXRCbG9ja1tuXSk7ZWxzZXt2YXIgaT0odGhpcy5ibG9ja1NpemUtYSkldGhpcy5ibG9ja1NpemU7aT4wJiYoaT10aGlzLmJsb2NrU2l6ZS1pKSx0aGlzLl9wYXJ0aWFsT3V0cHV0LmNsZWFyKCk7Zm9yKG49MDtuPHRoaXMuX2ludHM7KytuKXRoaXMuX3BhcnRpYWxCbG9ja1tuXT1lLmdldEludDMyKCksdGhpcy5fcGFydGlhbE91dHB1dC5wdXRJbnQzMih0aGlzLl9wYXJ0aWFsQmxvY2tbbl1edGhpcy5fb3V0QmxvY2tbbl0pO2lmKGk+MCllLnJlYWQtPXRoaXMuYmxvY2tTaXplO2Vsc2UgZm9yKG49MDtuPHRoaXMuX2ludHM7KytuKXRoaXMuX2luQmxvY2tbbl09dGhpcy5fcGFydGlhbEJsb2NrW25dO2lmKHRoaXMuX3BhcnRpYWxCeXRlcz4wJiZ0aGlzLl9wYXJ0aWFsT3V0cHV0LmdldEJ5dGVzKHRoaXMuX3BhcnRpYWxCeXRlcyksaT4wJiYhcilyZXR1cm4gdC5wdXRCeXRlcyh0aGlzLl9wYXJ0aWFsT3V0cHV0LmdldEJ5dGVzKGktdGhpcy5fcGFydGlhbEJ5dGVzKSksdGhpcy5fcGFydGlhbEJ5dGVzPWksITA7dC5wdXRCeXRlcyh0aGlzLl9wYXJ0aWFsT3V0cHV0LmdldEJ5dGVzKGEtdGhpcy5fcGFydGlhbEJ5dGVzKSksdGhpcy5fcGFydGlhbEJ5dGVzPTB9fSxuLm9mYj1mdW5jdGlvbihlKXtlPWV8fHt9LHRoaXMubmFtZT0iT0ZCIix0aGlzLmNpcGhlcj1lLmNpcGhlcix0aGlzLmJsb2NrU2l6ZT1lLmJsb2NrU2l6ZXx8MTYsdGhpcy5faW50cz10aGlzLmJsb2NrU2l6ZS80LHRoaXMuX2luQmxvY2s9bnVsbCx0aGlzLl9vdXRCbG9jaz1uZXcgQXJyYXkodGhpcy5faW50cyksdGhpcy5fcGFydGlhbE91dHB1dD1hLnV0aWwuY3JlYXRlQnVmZmVyKCksdGhpcy5fcGFydGlhbEJ5dGVzPTB9LG4ub2ZiLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbihlKXtpZighKCJpdiJpbiBlKSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgSVYgcGFyYW1ldGVyLiIpO3RoaXMuX2l2PWkoZS5pdix0aGlzLmJsb2NrU2l6ZSksdGhpcy5faW5CbG9jaz10aGlzLl9pdi5zbGljZSgwKSx0aGlzLl9wYXJ0aWFsQnl0ZXM9MH0sbi5vZmIucHJvdG90eXBlLmVuY3J5cHQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPWUubGVuZ3RoKCk7aWYoMD09PWUubGVuZ3RoKCkpcmV0dXJuITA7aWYodGhpcy5jaXBoZXIuZW5jcnlwdCh0aGlzLl9pbkJsb2NrLHRoaXMuX291dEJsb2NrKSwwPT09dGhpcy5fcGFydGlhbEJ5dGVzJiZhPj10aGlzLmJsb2NrU2l6ZSlmb3IodmFyIG49MDtuPHRoaXMuX2ludHM7KytuKXQucHV0SW50MzIoZS5nZXRJbnQzMigpXnRoaXMuX291dEJsb2NrW25dKSx0aGlzLl9pbkJsb2NrW25dPXRoaXMuX291dEJsb2NrW25dO2Vsc2V7dmFyIGk9KHRoaXMuYmxvY2tTaXplLWEpJXRoaXMuYmxvY2tTaXplO2k+MCYmKGk9dGhpcy5ibG9ja1NpemUtaSksdGhpcy5fcGFydGlhbE91dHB1dC5jbGVhcigpO2ZvcihuPTA7bjx0aGlzLl9pbnRzOysrbil0aGlzLl9wYXJ0aWFsT3V0cHV0LnB1dEludDMyKGUuZ2V0SW50MzIoKV50aGlzLl9vdXRCbG9ja1tuXSk7aWYoaT4wKWUucmVhZC09dGhpcy5ibG9ja1NpemU7ZWxzZSBmb3Iobj0wO248dGhpcy5faW50czsrK24pdGhpcy5faW5CbG9ja1tuXT10aGlzLl9vdXRCbG9ja1tuXTtpZih0aGlzLl9wYXJ0aWFsQnl0ZXM+MCYmdGhpcy5fcGFydGlhbE91dHB1dC5nZXRCeXRlcyh0aGlzLl9wYXJ0aWFsQnl0ZXMpLGk+MCYmIXIpcmV0dXJuIHQucHV0Qnl0ZXModGhpcy5fcGFydGlhbE91dHB1dC5nZXRCeXRlcyhpLXRoaXMuX3BhcnRpYWxCeXRlcykpLHRoaXMuX3BhcnRpYWxCeXRlcz1pLCEwO3QucHV0Qnl0ZXModGhpcy5fcGFydGlhbE91dHB1dC5nZXRCeXRlcyhhLXRoaXMuX3BhcnRpYWxCeXRlcykpLHRoaXMuX3BhcnRpYWxCeXRlcz0wfX0sbi5vZmIucHJvdG90eXBlLmRlY3J5cHQ9bi5vZmIucHJvdG90eXBlLmVuY3J5cHQsbi5jdHI9ZnVuY3Rpb24oZSl7ZT1lfHx7fSx0aGlzLm5hbWU9IkNUUiIsdGhpcy5jaXBoZXI9ZS5jaXBoZXIsdGhpcy5ibG9ja1NpemU9ZS5ibG9ja1NpemV8fDE2LHRoaXMuX2ludHM9dGhpcy5ibG9ja1NpemUvNCx0aGlzLl9pbkJsb2NrPW51bGwsdGhpcy5fb3V0QmxvY2s9bmV3IEFycmF5KHRoaXMuX2ludHMpLHRoaXMuX3BhcnRpYWxPdXRwdXQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpLHRoaXMuX3BhcnRpYWxCeXRlcz0wfSxuLmN0ci5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oZSl7aWYoISgiaXYiaW4gZSkpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIElWIHBhcmFtZXRlci4iKTt0aGlzLl9pdj1pKGUuaXYsdGhpcy5ibG9ja1NpemUpLHRoaXMuX2luQmxvY2s9dGhpcy5faXYuc2xpY2UoMCksdGhpcy5fcGFydGlhbEJ5dGVzPTB9LG4uY3RyLnByb3RvdHlwZS5lbmNyeXB0PWZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1lLmxlbmd0aCgpO2lmKDA9PT1hKXJldHVybiEwO2lmKHRoaXMuY2lwaGVyLmVuY3J5cHQodGhpcy5faW5CbG9jayx0aGlzLl9vdXRCbG9jayksMD09PXRoaXMuX3BhcnRpYWxCeXRlcyYmYT49dGhpcy5ibG9ja1NpemUpZm9yKHZhciBuPTA7bjx0aGlzLl9pbnRzOysrbil0LnB1dEludDMyKGUuZ2V0SW50MzIoKV50aGlzLl9vdXRCbG9ja1tuXSk7ZWxzZXt2YXIgaT0odGhpcy5ibG9ja1NpemUtYSkldGhpcy5ibG9ja1NpemU7aT4wJiYoaT10aGlzLmJsb2NrU2l6ZS1pKSx0aGlzLl9wYXJ0aWFsT3V0cHV0LmNsZWFyKCk7Zm9yKG49MDtuPHRoaXMuX2ludHM7KytuKXRoaXMuX3BhcnRpYWxPdXRwdXQucHV0SW50MzIoZS5nZXRJbnQzMigpXnRoaXMuX291dEJsb2NrW25dKTtpZihpPjAmJihlLnJlYWQtPXRoaXMuYmxvY2tTaXplKSx0aGlzLl9wYXJ0aWFsQnl0ZXM+MCYmdGhpcy5fcGFydGlhbE91dHB1dC5nZXRCeXRlcyh0aGlzLl9wYXJ0aWFsQnl0ZXMpLGk+MCYmIXIpcmV0dXJuIHQucHV0Qnl0ZXModGhpcy5fcGFydGlhbE91dHB1dC5nZXRCeXRlcyhpLXRoaXMuX3BhcnRpYWxCeXRlcykpLHRoaXMuX3BhcnRpYWxCeXRlcz1pLCEwO3QucHV0Qnl0ZXModGhpcy5fcGFydGlhbE91dHB1dC5nZXRCeXRlcyhhLXRoaXMuX3BhcnRpYWxCeXRlcykpLHRoaXMuX3BhcnRpYWxCeXRlcz0wfXModGhpcy5faW5CbG9jayl9LG4uY3RyLnByb3RvdHlwZS5kZWNyeXB0PW4uY3RyLnByb3RvdHlwZS5lbmNyeXB0LG4uZ2NtPWZ1bmN0aW9uKGUpe2U9ZXx8e30sdGhpcy5uYW1lPSJHQ00iLHRoaXMuY2lwaGVyPWUuY2lwaGVyLHRoaXMuYmxvY2tTaXplPWUuYmxvY2tTaXplfHwxNix0aGlzLl9pbnRzPXRoaXMuYmxvY2tTaXplLzQsdGhpcy5faW5CbG9jaz1uZXcgQXJyYXkodGhpcy5faW50cyksdGhpcy5fb3V0QmxvY2s9bmV3IEFycmF5KHRoaXMuX2ludHMpLHRoaXMuX3BhcnRpYWxPdXRwdXQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpLHRoaXMuX3BhcnRpYWxCeXRlcz0wLHRoaXMuX1I9Mzc3NDg3MzYwMH0sbi5nY20ucHJvdG90eXBlLnN0YXJ0PWZ1bmN0aW9uKGUpe2lmKCEoIml2ImluIGUpKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBJViBwYXJhbWV0ZXIuIik7dmFyIHQscj1hLnV0aWwuY3JlYXRlQnVmZmVyKGUuaXYpO2lmKHRoaXMuX2NpcGhlckxlbmd0aD0wLHQ9ImFkZGl0aW9uYWxEYXRhImluIGU/YS51dGlsLmNyZWF0ZUJ1ZmZlcihlLmFkZGl0aW9uYWxEYXRhKTphLnV0aWwuY3JlYXRlQnVmZmVyKCksdGhpcy5fdGFnTGVuZ3RoPSJ0YWdMZW5ndGgiaW4gZT9lLnRhZ0xlbmd0aDoxMjgsdGhpcy5fdGFnPW51bGwsZS5kZWNyeXB0JiYodGhpcy5fdGFnPWEudXRpbC5jcmVhdGVCdWZmZXIoZS50YWcpLmdldEJ5dGVzKCksdGhpcy5fdGFnLmxlbmd0aCE9PXRoaXMuX3RhZ0xlbmd0aC84KSl0aHJvdyBuZXcgRXJyb3IoIkF1dGhlbnRpY2F0aW9uIHRhZyBkb2VzIG5vdCBtYXRjaCB0YWcgbGVuZ3RoLiIpO3RoaXMuX2hhc2hCbG9jaz1uZXcgQXJyYXkodGhpcy5faW50cyksdGhpcy50YWc9bnVsbCx0aGlzLl9oYXNoU3Via2V5PW5ldyBBcnJheSh0aGlzLl9pbnRzKSx0aGlzLmNpcGhlci5lbmNyeXB0KFswLDAsMCwwXSx0aGlzLl9oYXNoU3Via2V5KSx0aGlzLmNvbXBvbmVudEJpdHM9NCx0aGlzLl9tPXRoaXMuZ2VuZXJhdGVIYXNoVGFibGUodGhpcy5faGFzaFN1YmtleSx0aGlzLmNvbXBvbmVudEJpdHMpO3ZhciBuPXIubGVuZ3RoKCk7aWYoMTI9PT1uKXRoaXMuX2owPVtyLmdldEludDMyKCksci5nZXRJbnQzMigpLHIuZ2V0SW50MzIoKSwxXTtlbHNle2Zvcih0aGlzLl9qMD1bMCwwLDAsMF07ci5sZW5ndGgoKT4wOyl0aGlzLl9qMD10aGlzLmdoYXNoKHRoaXMuX2hhc2hTdWJrZXksdGhpcy5fajAsW3IuZ2V0SW50MzIoKSxyLmdldEludDMyKCksci5nZXRJbnQzMigpLHIuZ2V0SW50MzIoKV0pO3RoaXMuX2owPXRoaXMuZ2hhc2godGhpcy5faGFzaFN1YmtleSx0aGlzLl9qMCxbMCwwXS5jb25jYXQobyg4Km4pKSl9dGhpcy5faW5CbG9jaz10aGlzLl9qMC5zbGljZSgwKSxzKHRoaXMuX2luQmxvY2spLHRoaXMuX3BhcnRpYWxCeXRlcz0wLHQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcih0KSx0aGlzLl9hRGF0YUxlbmd0aD1vKDgqdC5sZW5ndGgoKSk7dmFyIGk9dC5sZW5ndGgoKSV0aGlzLmJsb2NrU2l6ZTtmb3IoaSYmdC5maWxsV2l0aEJ5dGUoMCx0aGlzLmJsb2NrU2l6ZS1pKSx0aGlzLl9zPVswLDAsMCwwXTt0Lmxlbmd0aCgpPjA7KXRoaXMuX3M9dGhpcy5naGFzaCh0aGlzLl9oYXNoU3Via2V5LHRoaXMuX3MsW3QuZ2V0SW50MzIoKSx0LmdldEludDMyKCksdC5nZXRJbnQzMigpLHQuZ2V0SW50MzIoKV0pfSxuLmdjbS5wcm90b3R5cGUuZW5jcnlwdD1mdW5jdGlvbihlLHQscil7dmFyIGE9ZS5sZW5ndGgoKTtpZigwPT09YSlyZXR1cm4hMDtpZih0aGlzLmNpcGhlci5lbmNyeXB0KHRoaXMuX2luQmxvY2ssdGhpcy5fb3V0QmxvY2spLDA9PT10aGlzLl9wYXJ0aWFsQnl0ZXMmJmE+PXRoaXMuYmxvY2tTaXplKXtmb3IodmFyIG49MDtuPHRoaXMuX2ludHM7KytuKXQucHV0SW50MzIodGhpcy5fb3V0QmxvY2tbbl1ePWUuZ2V0SW50MzIoKSk7dGhpcy5fY2lwaGVyTGVuZ3RoKz10aGlzLmJsb2NrU2l6ZX1lbHNle3ZhciBpPSh0aGlzLmJsb2NrU2l6ZS1hKSV0aGlzLmJsb2NrU2l6ZTtpPjAmJihpPXRoaXMuYmxvY2tTaXplLWkpLHRoaXMuX3BhcnRpYWxPdXRwdXQuY2xlYXIoKTtmb3Iobj0wO248dGhpcy5faW50czsrK24pdGhpcy5fcGFydGlhbE91dHB1dC5wdXRJbnQzMihlLmdldEludDMyKCledGhpcy5fb3V0QmxvY2tbbl0pO2lmKGk8PTB8fHIpe2lmKHIpe3ZhciBvPWEldGhpcy5ibG9ja1NpemU7dGhpcy5fY2lwaGVyTGVuZ3RoKz1vLHRoaXMuX3BhcnRpYWxPdXRwdXQudHJ1bmNhdGUodGhpcy5ibG9ja1NpemUtbyl9ZWxzZSB0aGlzLl9jaXBoZXJMZW5ndGgrPXRoaXMuYmxvY2tTaXplO2ZvcihuPTA7bjx0aGlzLl9pbnRzOysrbil0aGlzLl9vdXRCbG9ja1tuXT10aGlzLl9wYXJ0aWFsT3V0cHV0LmdldEludDMyKCk7dGhpcy5fcGFydGlhbE91dHB1dC5yZWFkLT10aGlzLmJsb2NrU2l6ZX1pZih0aGlzLl9wYXJ0aWFsQnl0ZXM+MCYmdGhpcy5fcGFydGlhbE91dHB1dC5nZXRCeXRlcyh0aGlzLl9wYXJ0aWFsQnl0ZXMpLGk+MCYmIXIpcmV0dXJuIGUucmVhZC09dGhpcy5ibG9ja1NpemUsdC5wdXRCeXRlcyh0aGlzLl9wYXJ0aWFsT3V0cHV0LmdldEJ5dGVzKGktdGhpcy5fcGFydGlhbEJ5dGVzKSksdGhpcy5fcGFydGlhbEJ5dGVzPWksITA7dC5wdXRCeXRlcyh0aGlzLl9wYXJ0aWFsT3V0cHV0LmdldEJ5dGVzKGEtdGhpcy5fcGFydGlhbEJ5dGVzKSksdGhpcy5fcGFydGlhbEJ5dGVzPTB9dGhpcy5fcz10aGlzLmdoYXNoKHRoaXMuX2hhc2hTdWJrZXksdGhpcy5fcyx0aGlzLl9vdXRCbG9jaykscyh0aGlzLl9pbkJsb2NrKX0sbi5nY20ucHJvdG90eXBlLmRlY3J5cHQ9ZnVuY3Rpb24oZSx0LHIpe3ZhciBhPWUubGVuZ3RoKCk7aWYoYTx0aGlzLmJsb2NrU2l6ZSYmIShyJiZhPjApKXJldHVybiEwO3RoaXMuY2lwaGVyLmVuY3J5cHQodGhpcy5faW5CbG9jayx0aGlzLl9vdXRCbG9jaykscyh0aGlzLl9pbkJsb2NrKSx0aGlzLl9oYXNoQmxvY2tbMF09ZS5nZXRJbnQzMigpLHRoaXMuX2hhc2hCbG9ja1sxXT1lLmdldEludDMyKCksdGhpcy5faGFzaEJsb2NrWzJdPWUuZ2V0SW50MzIoKSx0aGlzLl9oYXNoQmxvY2tbM109ZS5nZXRJbnQzMigpLHRoaXMuX3M9dGhpcy5naGFzaCh0aGlzLl9oYXNoU3Via2V5LHRoaXMuX3MsdGhpcy5faGFzaEJsb2NrKTtmb3IodmFyIG49MDtuPHRoaXMuX2ludHM7KytuKXQucHV0SW50MzIodGhpcy5fb3V0QmxvY2tbbl1edGhpcy5faGFzaEJsb2NrW25dKTthPHRoaXMuYmxvY2tTaXplP3RoaXMuX2NpcGhlckxlbmd0aCs9YSV0aGlzLmJsb2NrU2l6ZTp0aGlzLl9jaXBoZXJMZW5ndGgrPXRoaXMuYmxvY2tTaXplfSxuLmdjbS5wcm90b3R5cGUuYWZ0ZXJGaW5pc2g9ZnVuY3Rpb24oZSx0KXt2YXIgcj0hMDt0LmRlY3J5cHQmJnQub3ZlcmZsb3cmJmUudHJ1bmNhdGUodGhpcy5ibG9ja1NpemUtdC5vdmVyZmxvdyksdGhpcy50YWc9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO3ZhciBuPXRoaXMuX2FEYXRhTGVuZ3RoLmNvbmNhdChvKDgqdGhpcy5fY2lwaGVyTGVuZ3RoKSk7dGhpcy5fcz10aGlzLmdoYXNoKHRoaXMuX2hhc2hTdWJrZXksdGhpcy5fcyxuKTt2YXIgaT1bXTt0aGlzLmNpcGhlci5lbmNyeXB0KHRoaXMuX2owLGkpO2Zvcih2YXIgcz0wO3M8dGhpcy5faW50czsrK3MpdGhpcy50YWcucHV0SW50MzIodGhpcy5fc1tzXV5pW3NdKTtyZXR1cm4gdGhpcy50YWcudHJ1bmNhdGUodGhpcy50YWcubGVuZ3RoKCklKHRoaXMuX3RhZ0xlbmd0aC84KSksdC5kZWNyeXB0JiZ0aGlzLnRhZy5ieXRlcygpIT09dGhpcy5fdGFnJiYocj0hMSkscn0sbi5nY20ucHJvdG90eXBlLm11bHRpcGx5PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPVswLDAsMCwwXSxhPXQuc2xpY2UoMCksbj0wO248MTI4Oysrbil7ZVtuLzMyfDBdJjE8PDMxLW4lMzImJihyWzBdXj1hWzBdLHJbMV1ePWFbMV0sclsyXV49YVsyXSxyWzNdXj1hWzNdKSx0aGlzLnBvdyhhLGEpfXJldHVybiByfSxuLmdjbS5wcm90b3R5cGUucG93PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciByPTEmZVszXSxhPTM7YT4wOy0tYSl0W2FdPWVbYV0+Pj4xfCgxJmVbYS0xXSk8PDMxO3RbMF09ZVswXT4+PjEsciYmKHRbMF1ePXRoaXMuX1IpfSxuLmdjbS5wcm90b3R5cGUudGFibGVNdWx0aXBseT1mdW5jdGlvbihlKXtmb3IodmFyIHQ9WzAsMCwwLDBdLHI9MDtyPDMyOysrcil7dmFyIGE9ZVtyLzh8MF0+Pj40Kig3LXIlOCkmMTUsbj10aGlzLl9tW3JdW2FdO3RbMF1ePW5bMF0sdFsxXV49blsxXSx0WzJdXj1uWzJdLHRbM11ePW5bM119cmV0dXJuIHR9LG4uZ2NtLnByb3RvdHlwZS5naGFzaD1mdW5jdGlvbihlLHQscil7cmV0dXJuIHRbMF1ePXJbMF0sdFsxXV49clsxXSx0WzJdXj1yWzJdLHRbM11ePXJbM10sdGhpcy50YWJsZU11bHRpcGx5KHQpfSxuLmdjbS5wcm90b3R5cGUuZ2VuZXJhdGVIYXNoVGFibGU9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIHI9OC90LGE9NCpyLG49MTYqcixpPW5ldyBBcnJheShuKSxzPTA7czxuOysrcyl7dmFyIG89WzAsMCwwLDBdLGM9KGEtMS1zJWEpKnQ7b1tzL2F8MF09MTw8dC0xPDxjLGlbc109dGhpcy5nZW5lcmF0ZVN1Ykhhc2hUYWJsZSh0aGlzLm11bHRpcGx5KG8sZSksdCl9cmV0dXJuIGl9LG4uZ2NtLnByb3RvdHlwZS5nZW5lcmF0ZVN1Ykhhc2hUYWJsZT1mdW5jdGlvbihlLHQpe3ZhciByPTE8PHQsYT1yPj4+MSxuPW5ldyBBcnJheShyKTtuW2FdPWUuc2xpY2UoMCk7Zm9yKHZhciBpPWE+Pj4xO2k+MDspdGhpcy5wb3coblsyKmldLG5baV09W10pLGk+Pj0xO2ZvcihpPTI7aTxhOyl7Zm9yKHZhciBzPTE7czxpOysrcyl7dmFyIG89bltpXSxjPW5bc107bltpK3NdPVtvWzBdXmNbMF0sb1sxXV5jWzFdLG9bMl1eY1syXSxvWzNdXmNbM11dfWkqPTJ9Zm9yKG5bMF09WzAsMCwwLDBdLGk9YSsxO2k8cjsrK2kpe3ZhciB1PW5baV5hXTtuW2ldPVtlWzBdXnVbMF0sZVsxXV51WzFdLGVbMl1edVsyXSxlWzNdXnVbM11dfXJldHVybiBufX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXIoMCk7cigzKSxyKDgpLHIoMTQpLHIoNykscigyMSkscigyKSxyKDkpLHIoMSk7dmFyIG49ZnVuY3Rpb24oZSx0LHIsbil7dmFyIGk9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpLHM9ZS5sZW5ndGg+PjEsbz1zKygxJmUubGVuZ3RoKSxjPWUuc3Vic3RyKDAsbyksdT1lLnN1YnN0cihzLG8pLGw9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpLHA9YS5obWFjLmNyZWF0ZSgpO3I9dCtyO3ZhciBmPU1hdGguY2VpbChuLzE2KSxoPU1hdGguY2VpbChuLzIwKTtwLnN0YXJ0KCJNRDUiLGMpO3ZhciBkPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtsLnB1dEJ5dGVzKHIpO2Zvcih2YXIgeT0wO3k8ZjsrK3kpcC5zdGFydChudWxsLG51bGwpLHAudXBkYXRlKGwuZ2V0Qnl0ZXMoKSksbC5wdXRCdWZmZXIocC5kaWdlc3QoKSkscC5zdGFydChudWxsLG51bGwpLHAudXBkYXRlKGwuYnl0ZXMoKStyKSxkLnB1dEJ1ZmZlcihwLmRpZ2VzdCgpKTtwLnN0YXJ0KCJTSEExIix1KTt2YXIgZz1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7bC5jbGVhcigpLGwucHV0Qnl0ZXMocik7Zm9yKHk9MDt5PGg7Kyt5KXAuc3RhcnQobnVsbCxudWxsKSxwLnVwZGF0ZShsLmdldEJ5dGVzKCkpLGwucHV0QnVmZmVyKHAuZGlnZXN0KCkpLHAuc3RhcnQobnVsbCxudWxsKSxwLnVwZGF0ZShsLmJ5dGVzKCkrciksZy5wdXRCdWZmZXIocC5kaWdlc3QoKSk7cmV0dXJuIGkucHV0Qnl0ZXMoYS51dGlsLnhvckJ5dGVzKGQuZ2V0Qnl0ZXMoKSxnLmdldEJ5dGVzKCksbikpLGl9LGk9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPSExO3RyeXt2YXIgaT1lLmRlZmxhdGUodC5mcmFnbWVudC5nZXRCeXRlcygpKTt0LmZyYWdtZW50PWEudXRpbC5jcmVhdGVCdWZmZXIoaSksdC5sZW5ndGg9aS5sZW5ndGgsbj0hMH1jYXRjaChlKXt9cmV0dXJuIG59LHM9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPSExO3RyeXt2YXIgaT1lLmluZmxhdGUodC5mcmFnbWVudC5nZXRCeXRlcygpKTt0LmZyYWdtZW50PWEudXRpbC5jcmVhdGVCdWZmZXIoaSksdC5sZW5ndGg9aS5sZW5ndGgsbj0hMH1jYXRjaChlKXt9cmV0dXJuIG59LG89ZnVuY3Rpb24oZSx0KXt2YXIgcj0wO3N3aXRjaCh0KXtjYXNlIDE6cj1lLmdldEJ5dGUoKTticmVhaztjYXNlIDI6cj1lLmdldEludDE2KCk7YnJlYWs7Y2FzZSAzOnI9ZS5nZXRJbnQyNCgpO2JyZWFrO2Nhc2UgNDpyPWUuZ2V0SW50MzIoKX1yZXR1cm4gYS51dGlsLmNyZWF0ZUJ1ZmZlcihlLmdldEJ5dGVzKHIpKX0sYz1mdW5jdGlvbihlLHQscil7ZS5wdXRJbnQoci5sZW5ndGgoKSx0PDwzKSxlLnB1dEJ1ZmZlcihyKX0sdT17VmVyc2lvbnM6e1RMU18xXzA6e21ham9yOjMsbWlub3I6MX0sVExTXzFfMTp7bWFqb3I6MyxtaW5vcjoyfSxUTFNfMV8yOnttYWpvcjozLG1pbm9yOjN9fX07dS5TdXBwb3J0ZWRWZXJzaW9ucz1bdS5WZXJzaW9ucy5UTFNfMV8xLHUuVmVyc2lvbnMuVExTXzFfMF0sdS5WZXJzaW9uPXUuU3VwcG9ydGVkVmVyc2lvbnNbMF0sdS5NYXhGcmFnbWVudD0xNTM2MCx1LkNvbm5lY3Rpb25FbmQ9e3NlcnZlcjowLGNsaWVudDoxfSx1LlBSRkFsZ29yaXRobT17dGxzX3ByZl9zaGEyNTY6MH0sdS5CdWxrQ2lwaGVyQWxnb3JpdGhtPXtub25lOm51bGwscmM0OjAsZGVzMzoxLGFlczoyfSx1LkNpcGhlclR5cGU9e3N0cmVhbTowLGJsb2NrOjEsYWVhZDoyfSx1Lk1BQ0FsZ29yaXRobT17bm9uZTpudWxsLGhtYWNfbWQ1OjAsaG1hY19zaGExOjEsaG1hY19zaGEyNTY6MixobWFjX3NoYTM4NDozLGhtYWNfc2hhNTEyOjR9LHUuQ29tcHJlc3Npb25NZXRob2Q9e25vbmU6MCxkZWZsYXRlOjF9LHUuQ29udGVudFR5cGU9e2NoYW5nZV9jaXBoZXJfc3BlYzoyMCxhbGVydDoyMSxoYW5kc2hha2U6MjIsYXBwbGljYXRpb25fZGF0YToyMyxoZWFydGJlYXQ6MjR9LHUuSGFuZHNoYWtlVHlwZT17aGVsbG9fcmVxdWVzdDowLGNsaWVudF9oZWxsbzoxLHNlcnZlcl9oZWxsbzoyLGNlcnRpZmljYXRlOjExLHNlcnZlcl9rZXlfZXhjaGFuZ2U6MTIsY2VydGlmaWNhdGVfcmVxdWVzdDoxMyxzZXJ2ZXJfaGVsbG9fZG9uZToxNCxjZXJ0aWZpY2F0ZV92ZXJpZnk6MTUsY2xpZW50X2tleV9leGNoYW5nZToxNixmaW5pc2hlZDoyMH0sdS5BbGVydD17fSx1LkFsZXJ0LkxldmVsPXt3YXJuaW5nOjEsZmF0YWw6Mn0sdS5BbGVydC5EZXNjcmlwdGlvbj17Y2xvc2Vfbm90aWZ5OjAsdW5leHBlY3RlZF9tZXNzYWdlOjEwLGJhZF9yZWNvcmRfbWFjOjIwLGRlY3J5cHRpb25fZmFpbGVkOjIxLHJlY29yZF9vdmVyZmxvdzoyMixkZWNvbXByZXNzaW9uX2ZhaWx1cmU6MzAsaGFuZHNoYWtlX2ZhaWx1cmU6NDAsYmFkX2NlcnRpZmljYXRlOjQyLHVuc3VwcG9ydGVkX2NlcnRpZmljYXRlOjQzLGNlcnRpZmljYXRlX3Jldm9rZWQ6NDQsY2VydGlmaWNhdGVfZXhwaXJlZDo0NSxjZXJ0aWZpY2F0ZV91bmtub3duOjQ2LGlsbGVnYWxfcGFyYW1ldGVyOjQ3LHVua25vd25fY2E6NDgsYWNjZXNzX2RlbmllZDo0OSxkZWNvZGVfZXJyb3I6NTAsZGVjcnlwdF9lcnJvcjo1MSxleHBvcnRfcmVzdHJpY3Rpb246NjAscHJvdG9jb2xfdmVyc2lvbjo3MCxpbnN1ZmZpY2llbnRfc2VjdXJpdHk6NzEsaW50ZXJuYWxfZXJyb3I6ODAsdXNlcl9jYW5jZWxlZDo5MCxub19yZW5lZ290aWF0aW9uOjEwMH0sdS5IZWFydGJlYXRNZXNzYWdlVHlwZT17aGVhcnRiZWF0X3JlcXVlc3Q6MSxoZWFydGJlYXRfcmVzcG9uc2U6Mn0sdS5DaXBoZXJTdWl0ZXM9e30sdS5nZXRDaXBoZXJTdWl0ZT1mdW5jdGlvbihlKXt2YXIgdD1udWxsO2Zvcih2YXIgciBpbiB1LkNpcGhlclN1aXRlcyl7dmFyIGE9dS5DaXBoZXJTdWl0ZXNbcl07aWYoYS5pZFswXT09PWUuY2hhckNvZGVBdCgwKSYmYS5pZFsxXT09PWUuY2hhckNvZGVBdCgxKSl7dD1hO2JyZWFrfX1yZXR1cm4gdH0sdS5oYW5kbGVVbmV4cGVjdGVkPWZ1bmN0aW9uKGUsdCl7IWUub3BlbiYmZS5lbnRpdHk9PT11LkNvbm5lY3Rpb25FbmQuY2xpZW50fHxlLmVycm9yKGUse21lc3NhZ2U6IlVuZXhwZWN0ZWQgbWVzc2FnZS4gUmVjZWl2ZWQgVExTIHJlY29yZCBvdXQgb2Ygb3JkZXIuIixzZW5kOiEwLGFsZXJ0OntsZXZlbDp1LkFsZXJ0LkxldmVsLmZhdGFsLGRlc2NyaXB0aW9uOnUuQWxlcnQuRGVzY3JpcHRpb24udW5leHBlY3RlZF9tZXNzYWdlfX0pfSx1LmhhbmRsZUhlbGxvUmVxdWVzdD1mdW5jdGlvbihlLHQscil7IWUuaGFuZHNoYWtpbmcmJmUuaGFuZHNoYWtlcz4wJiYodS5xdWV1ZShlLHUuY3JlYXRlQWxlcnQoZSx7bGV2ZWw6dS5BbGVydC5MZXZlbC53YXJuaW5nLGRlc2NyaXB0aW9uOnUuQWxlcnQuRGVzY3JpcHRpb24ubm9fcmVuZWdvdGlhdGlvbn0pKSx1LmZsdXNoKGUpKSxlLnByb2Nlc3MoKX0sdS5wYXJzZUhlbGxvTWVzc2FnZT1mdW5jdGlvbihlLHQscil7dmFyIG49bnVsbCxpPWUuZW50aXR5PT09dS5Db25uZWN0aW9uRW5kLmNsaWVudDtpZihyPDM4KWUuZXJyb3IoZSx7bWVzc2FnZTppPyJJbnZhbGlkIFNlcnZlckhlbGxvIG1lc3NhZ2UuIE1lc3NhZ2UgdG9vIHNob3J0LiI6IkludmFsaWQgQ2xpZW50SGVsbG8gbWVzc2FnZS4gTWVzc2FnZSB0b28gc2hvcnQuIixzZW5kOiEwLGFsZXJ0OntsZXZlbDp1LkFsZXJ0LkxldmVsLmZhdGFsLGRlc2NyaXB0aW9uOnUuQWxlcnQuRGVzY3JpcHRpb24uaWxsZWdhbF9wYXJhbWV0ZXJ9fSk7ZWxzZXt2YXIgcz10LmZyYWdtZW50LGM9cy5sZW5ndGgoKTtpZihuPXt2ZXJzaW9uOnttYWpvcjpzLmdldEJ5dGUoKSxtaW5vcjpzLmdldEJ5dGUoKX0scmFuZG9tOmEudXRpbC5jcmVhdGVCdWZmZXIocy5nZXRCeXRlcygzMikpLHNlc3Npb25faWQ6byhzLDEpLGV4dGVuc2lvbnM6W119LGk/KG4uY2lwaGVyX3N1aXRlPXMuZ2V0Qnl0ZXMoMiksbi5jb21wcmVzc2lvbl9tZXRob2Q9cy5nZXRCeXRlKCkpOihuLmNpcGhlcl9zdWl0ZXM9byhzLDIpLG4uY29tcHJlc3Npb25fbWV0aG9kcz1vKHMsMSkpLChjPXItKGMtcy5sZW5ndGgoKSkpPjApe2Zvcih2YXIgbD1vKHMsMik7bC5sZW5ndGgoKT4wOyluLmV4dGVuc2lvbnMucHVzaCh7dHlwZTpbbC5nZXRCeXRlKCksbC5nZXRCeXRlKCldLGRhdGE6byhsLDIpfSk7aWYoIWkpZm9yKHZhciBwPTA7cDxuLmV4dGVuc2lvbnMubGVuZ3RoOysrcCl7dmFyIGY9bi5leHRlbnNpb25zW3BdO2lmKDA9PT1mLnR5cGVbMF0mJjA9PT1mLnR5cGVbMV0pZm9yKHZhciBoPW8oZi5kYXRhLDIpO2gubGVuZ3RoKCk+MDspe2lmKDAhPT1oLmdldEJ5dGUoKSlicmVhaztlLnNlc3Npb24uZXh0ZW5zaW9ucy5zZXJ2ZXJfbmFtZS5zZXJ2ZXJOYW1lTGlzdC5wdXNoKG8oaCwyKS5nZXRCeXRlcygpKX19fWlmKGUuc2Vzc2lvbi52ZXJzaW9uJiYobi52ZXJzaW9uLm1ham9yIT09ZS5zZXNzaW9uLnZlcnNpb24ubWFqb3J8fG4udmVyc2lvbi5taW5vciE9PWUuc2Vzc2lvbi52ZXJzaW9uLm1pbm9yKSlyZXR1cm4gZS5lcnJvcihlLHttZXNzYWdlOiJUTFMgdmVyc2lvbiBjaGFuZ2UgaXMgZGlzYWxsb3dlZCBkdXJpbmcgcmVuZWdvdGlhdGlvbi4iLHNlbmQ6ITAsYWxlcnQ6e2xldmVsOnUuQWxlcnQuTGV2ZWwuZmF0YWwsZGVzY3JpcHRpb246dS5BbGVydC5EZXNjcmlwdGlvbi5wcm90b2NvbF92ZXJzaW9ufX0pO2lmKGkpZS5zZXNzaW9uLmNpcGhlclN1aXRlPXUuZ2V0Q2lwaGVyU3VpdGUobi5jaXBoZXJfc3VpdGUpO2Vsc2UgZm9yKHZhciBkPWEudXRpbC5jcmVhdGVCdWZmZXIobi5jaXBoZXJfc3VpdGVzLmJ5dGVzKCkpO2QubGVuZ3RoKCk+MCYmKGUuc2Vzc2lvbi5jaXBoZXJTdWl0ZT11LmdldENpcGhlclN1aXRlKGQuZ2V0Qnl0ZXMoMikpLG51bGw9PT1lLnNlc3Npb24uY2lwaGVyU3VpdGUpOyk7aWYobnVsbD09PWUuc2Vzc2lvbi5jaXBoZXJTdWl0ZSlyZXR1cm4gZS5lcnJvcihlLHttZXNzYWdlOiJObyBjaXBoZXIgc3VpdGVzIGluIGNvbW1vbi4iLHNlbmQ6ITAsYWxlcnQ6e2xldmVsOnUuQWxlcnQuTGV2ZWwuZmF0YWwsZGVzY3JpcHRpb246dS5BbGVydC5EZXNjcmlwdGlvbi5oYW5kc2hha2VfZmFpbHVyZX0sY2lwaGVyU3VpdGU6YS51dGlsLmJ5dGVzVG9IZXgobi5jaXBoZXJfc3VpdGUpfSk7ZS5zZXNzaW9uLmNvbXByZXNzaW9uTWV0aG9kPWk/bi5jb21wcmVzc2lvbl9tZXRob2Q6dS5Db21wcmVzc2lvbk1ldGhvZC5ub25lfXJldHVybiBufSx1LmNyZWF0ZVNlY3VyaXR5UGFyYW1ldGVycz1mdW5jdGlvbihlLHQpe3ZhciByPWUuZW50aXR5PT09dS5Db25uZWN0aW9uRW5kLmNsaWVudCxhPXQucmFuZG9tLmJ5dGVzKCksbj1yP2Uuc2Vzc2lvbi5zcC5jbGllbnRfcmFuZG9tOmEsaT1yP2E6dS5jcmVhdGVSYW5kb20oKS5nZXRCeXRlcygpO2Uuc2Vzc2lvbi5zcD17ZW50aXR5OmUuZW50aXR5LHByZl9hbGdvcml0aG06dS5QUkZBbGdvcml0aG0udGxzX3ByZl9zaGEyNTYsYnVsa19jaXBoZXJfYWxnb3JpdGhtOm51bGwsY2lwaGVyX3R5cGU6bnVsbCxlbmNfa2V5X2xlbmd0aDpudWxsLGJsb2NrX2xlbmd0aDpudWxsLGZpeGVkX2l2X2xlbmd0aDpudWxsLHJlY29yZF9pdl9sZW5ndGg6bnVsbCxtYWNfYWxnb3JpdGhtOm51bGwsbWFjX2xlbmd0aDpudWxsLG1hY19rZXlfbGVuZ3RoOm51bGwsY29tcHJlc3Npb25fYWxnb3JpdGhtOmUuc2Vzc2lvbi5jb21wcmVzc2lvbk1ldGhvZCxwcmVfbWFzdGVyX3NlY3JldDpudWxsLG1hc3Rlcl9zZWNyZXQ6bnVsbCxjbGllbnRfcmFuZG9tOm4sc2VydmVyX3JhbmRvbTppfX0sdS5oYW5kbGVTZXJ2ZXJIZWxsbz1mdW5jdGlvbihlLHQscil7dmFyIGE9dS5wYXJzZUhlbGxvTWVzc2FnZShlLHQscik7aWYoIWUuZmFpbCl7aWYoIShhLnZlcnNpb24ubWlub3I8PWUudmVyc2lvbi5taW5vcikpcmV0dXJuIGUuZXJyb3IoZSx7bWVzc2FnZToiSW5jb21wYXRpYmxlIFRMUyB2ZXJzaW9uLiIsc2VuZDohMCxhbGVydDp7bGV2ZWw6dS5BbGVydC5MZXZlbC5mYXRhbCxkZXNjcmlwdGlvbjp1LkFsZXJ0LkRlc2NyaXB0aW9uLnByb3RvY29sX3ZlcnNpb259fSk7ZS52ZXJzaW9uLm1pbm9yPWEudmVyc2lvbi5taW5vcixlLnNlc3Npb24udmVyc2lvbj1lLnZlcnNpb247dmFyIG49YS5zZXNzaW9uX2lkLmJ5dGVzKCk7bi5sZW5ndGg+MCYmbj09PWUuc2Vzc2lvbi5pZD8oZS5leHBlY3Q9ZCxlLnNlc3Npb24ucmVzdW1pbmc9ITAsZS5zZXNzaW9uLnNwLnNlcnZlcl9yYW5kb209YS5yYW5kb20uYnl0ZXMoKSk6KGUuZXhwZWN0PWwsZS5zZXNzaW9uLnJlc3VtaW5nPSExLHUuY3JlYXRlU2VjdXJpdHlQYXJhbWV0ZXJzKGUsYSkpLGUuc2Vzc2lvbi5pZD1uLGUucHJvY2VzcygpfX0sdS5oYW5kbGVDbGllbnRIZWxsbz1mdW5jdGlvbihlLHQscil7dmFyIG49dS5wYXJzZUhlbGxvTWVzc2FnZShlLHQscik7aWYoIWUuZmFpbCl7dmFyIGk9bi5zZXNzaW9uX2lkLmJ5dGVzKCkscz1udWxsO2lmKGUuc2Vzc2lvbkNhY2hlJiYobnVsbD09PShzPWUuc2Vzc2lvbkNhY2hlLmdldFNlc3Npb24oaSkpP2k9IiI6KHMudmVyc2lvbi5tYWpvciE9PW4udmVyc2lvbi5tYWpvcnx8cy52ZXJzaW9uLm1pbm9yPm4udmVyc2lvbi5taW5vcikmJihzPW51bGwsaT0iIikpLDA9PT1pLmxlbmd0aCYmKGk9YS5yYW5kb20uZ2V0Qnl0ZXMoMzIpKSxlLnNlc3Npb24uaWQ9aSxlLnNlc3Npb24uY2xpZW50SGVsbG9WZXJzaW9uPW4udmVyc2lvbixlLnNlc3Npb24uc3A9e30scyllLnZlcnNpb249ZS5zZXNzaW9uLnZlcnNpb249cy52ZXJzaW9uLGUuc2Vzc2lvbi5zcD1zLnNwO2Vsc2V7Zm9yKHZhciBvLGM9MTtjPHUuU3VwcG9ydGVkVmVyc2lvbnMubGVuZ3RoJiYhKChvPXUuU3VwcG9ydGVkVmVyc2lvbnNbY10pLm1pbm9yPD1uLnZlcnNpb24ubWlub3IpOysrYyk7ZS52ZXJzaW9uPXttYWpvcjpvLm1ham9yLG1pbm9yOm8ubWlub3J9LGUuc2Vzc2lvbi52ZXJzaW9uPWUudmVyc2lvbn1udWxsIT09cz8oZS5leHBlY3Q9UyxlLnNlc3Npb24ucmVzdW1pbmc9ITAsZS5zZXNzaW9uLnNwLmNsaWVudF9yYW5kb209bi5yYW5kb20uYnl0ZXMoKSk6KGUuZXhwZWN0PSExIT09ZS52ZXJpZnlDbGllbnQ/djpDLGUuc2Vzc2lvbi5yZXN1bWluZz0hMSx1LmNyZWF0ZVNlY3VyaXR5UGFyYW1ldGVycyhlLG4pKSxlLm9wZW49ITAsdS5xdWV1ZShlLHUuY3JlYXRlUmVjb3JkKGUse3R5cGU6dS5Db250ZW50VHlwZS5oYW5kc2hha2UsZGF0YTp1LmNyZWF0ZVNlcnZlckhlbGxvKGUpfSkpLGUuc2Vzc2lvbi5yZXN1bWluZz8odS5xdWV1ZShlLHUuY3JlYXRlUmVjb3JkKGUse3R5cGU6dS5Db250ZW50VHlwZS5jaGFuZ2VfY2lwaGVyX3NwZWMsZGF0YTp1LmNyZWF0ZUNoYW5nZUNpcGhlclNwZWMoKX0pKSxlLnN0YXRlLnBlbmRpbmc9dS5jcmVhdGVDb25uZWN0aW9uU3RhdGUoZSksZS5zdGF0ZS5jdXJyZW50LndyaXRlPWUuc3RhdGUucGVuZGluZy53cml0ZSx1LnF1ZXVlKGUsdS5jcmVhdGVSZWNvcmQoZSx7dHlwZTp1LkNvbnRlbnRUeXBlLmhhbmRzaGFrZSxkYXRhOnUuY3JlYXRlRmluaXNoZWQoZSl9KSkpOih1LnF1ZXVlKGUsdS5jcmVhdGVSZWNvcmQoZSx7dHlwZTp1LkNvbnRlbnRUeXBlLmhhbmRzaGFrZSxkYXRhOnUuY3JlYXRlQ2VydGlmaWNhdGUoZSl9KSksZS5mYWlsfHwodS5xdWV1ZShlLHUuY3JlYXRlUmVjb3JkKGUse3R5cGU6dS5Db250ZW50VHlwZS5oYW5kc2hha2UsZGF0YTp1LmNyZWF0ZVNlcnZlcktleUV4Y2hhbmdlKGUpfSkpLCExIT09ZS52ZXJpZnlDbGllbnQmJnUucXVldWUoZSx1LmNyZWF0ZVJlY29yZChlLHt0eXBlOnUuQ29udGVudFR5cGUuaGFuZHNoYWtlLGRhdGE6dS5jcmVhdGVDZXJ0aWZpY2F0ZVJlcXVlc3QoZSl9KSksdS5xdWV1ZShlLHUuY3JlYXRlUmVjb3JkKGUse3R5cGU6dS5Db250ZW50VHlwZS5oYW5kc2hha2UsZGF0YTp1LmNyZWF0ZVNlcnZlckhlbGxvRG9uZShlKX0pKSkpLHUuZmx1c2goZSksZS5wcm9jZXNzKCl9fSx1LmhhbmRsZUNlcnRpZmljYXRlPWZ1bmN0aW9uKGUsdCxyKXtpZihyPDMpcmV0dXJuIGUuZXJyb3IoZSx7bWVzc2FnZToiSW52YWxpZCBDZXJ0aWZpY2F0ZSBtZXNzYWdlLiBNZXNzYWdlIHRvbyBzaG9ydC4iLHNlbmQ6ITAsYWxlcnQ6e2xldmVsOnUuQWxlcnQuTGV2ZWwuZmF0YWwsZGVzY3JpcHRpb246dS5BbGVydC5EZXNjcmlwdGlvbi5pbGxlZ2FsX3BhcmFtZXRlcn19KTt2YXIgbixpLHM9dC5mcmFnbWVudCxjPXtjZXJ0aWZpY2F0ZV9saXN0Om8ocywzKX0sbD1bXTt0cnl7Zm9yKDtjLmNlcnRpZmljYXRlX2xpc3QubGVuZ3RoKCk+MDspbj1vKGMuY2VydGlmaWNhdGVfbGlzdCwzKSxpPWEuYXNuMS5mcm9tRGVyKG4pLG49YS5wa2kuY2VydGlmaWNhdGVGcm9tQXNuMShpLCEwKSxsLnB1c2gobil9Y2F0Y2godCl7cmV0dXJuIGUuZXJyb3IoZSx7bWVzc2FnZToiQ291bGQgbm90IHBhcnNlIGNlcnRpZmljYXRlIGxpc3QuIixjYXVzZTp0LHNlbmQ6ITAsYWxlcnQ6e2xldmVsOnUuQWxlcnQuTGV2ZWwuZmF0YWwsZGVzY3JpcHRpb246dS5BbGVydC5EZXNjcmlwdGlvbi5iYWRfY2VydGlmaWNhdGV9fSl9dmFyIGY9ZS5lbnRpdHk9PT11LkNvbm5lY3Rpb25FbmQuY2xpZW50OyFmJiYhMCE9PWUudmVyaWZ5Q2xpZW50fHwwIT09bC5sZW5ndGg/MD09PWwubGVuZ3RoP2UuZXhwZWN0PWY/cDpDOihmP2Uuc2Vzc2lvbi5zZXJ2ZXJDZXJ0aWZpY2F0ZT1sWzBdOmUuc2Vzc2lvbi5jbGllbnRDZXJ0aWZpY2F0ZT1sWzBdLHUudmVyaWZ5Q2VydGlmaWNhdGVDaGFpbihlLGwpJiYoZS5leHBlY3Q9Zj9wOkMpKTplLmVycm9yKGUse21lc3NhZ2U6Zj8iTm8gc2VydmVyIGNlcnRpZmljYXRlIHByb3ZpZGVkLiI6Ik5vIGNsaWVudCBjZXJ0aWZpY2F0ZSBwcm92aWRlZC4iLHNlbmQ6ITAsYWxlcnQ6e2xldmVsOnUuQWxlcnQuTGV2ZWwuZmF0YWwsZGVzY3JpcHRpb246dS5BbGVydC5EZXNjcmlwdGlvbi5pbGxlZ2FsX3BhcmFtZXRlcn19KSxlLnByb2Nlc3MoKX0sdS5oYW5kbGVTZXJ2ZXJLZXlFeGNoYW5nZT1mdW5jdGlvbihlLHQscil7aWYocj4wKXJldHVybiBlLmVycm9yKGUse21lc3NhZ2U6IkludmFsaWQga2V5IHBhcmFtZXRlcnMuIE9ubHkgUlNBIGlzIHN1cHBvcnRlZC4iLHNlbmQ6ITAsYWxlcnQ6e2xldmVsOnUuQWxlcnQuTGV2ZWwuZmF0YWwsZGVzY3JpcHRpb246dS5BbGVydC5EZXNjcmlwdGlvbi51bnN1cHBvcnRlZF9jZXJ0aWZpY2F0ZX19KTtlLmV4cGVjdD1mLGUucHJvY2VzcygpfSx1LmhhbmRsZUNsaWVudEtleUV4Y2hhbmdlPWZ1bmN0aW9uKGUsdCxyKXtpZihyPDQ4KXJldHVybiBlLmVycm9yKGUse21lc3NhZ2U6IkludmFsaWQga2V5IHBhcmFtZXRlcnMuIE9ubHkgUlNBIGlzIHN1cHBvcnRlZC4iLHNlbmQ6ITAsYWxlcnQ6e2xldmVsOnUuQWxlcnQuTGV2ZWwuZmF0YWwsZGVzY3JpcHRpb246dS5BbGVydC5EZXNjcmlwdGlvbi51bnN1cHBvcnRlZF9jZXJ0aWZpY2F0ZX19KTt2YXIgbj10LmZyYWdtZW50LGk9e2VuY19wcmVfbWFzdGVyX3NlY3JldDpvKG4sMikuZ2V0Qnl0ZXMoKX0scz1udWxsO2lmKGUuZ2V0UHJpdmF0ZUtleSl0cnl7cz1lLmdldFByaXZhdGVLZXkoZSxlLnNlc3Npb24uc2VydmVyQ2VydGlmaWNhdGUpLHM9YS5wa2kucHJpdmF0ZUtleUZyb21QZW0ocyl9Y2F0Y2godCl7ZS5lcnJvcihlLHttZXNzYWdlOiJDb3VsZCBub3QgZ2V0IHByaXZhdGUga2V5LiIsY2F1c2U6dCxzZW5kOiEwLGFsZXJ0OntsZXZlbDp1LkFsZXJ0LkxldmVsLmZhdGFsLGRlc2NyaXB0aW9uOnUuQWxlcnQuRGVzY3JpcHRpb24uaW50ZXJuYWxfZXJyb3J9fSl9aWYobnVsbD09PXMpcmV0dXJuIGUuZXJyb3IoZSx7bWVzc2FnZToiTm8gcHJpdmF0ZSBrZXkgc2V0LiIsc2VuZDohMCxhbGVydDp7bGV2ZWw6dS5BbGVydC5MZXZlbC5mYXRhbCxkZXNjcmlwdGlvbjp1LkFsZXJ0LkRlc2NyaXB0aW9uLmludGVybmFsX2Vycm9yfX0pO3RyeXt2YXIgYz1lLnNlc3Npb24uc3A7Yy5wcmVfbWFzdGVyX3NlY3JldD1zLmRlY3J5cHQoaS5lbmNfcHJlX21hc3Rlcl9zZWNyZXQpO3ZhciBsPWUuc2Vzc2lvbi5jbGllbnRIZWxsb1ZlcnNpb247aWYobC5tYWpvciE9PWMucHJlX21hc3Rlcl9zZWNyZXQuY2hhckNvZGVBdCgwKXx8bC5taW5vciE9PWMucHJlX21hc3Rlcl9zZWNyZXQuY2hhckNvZGVBdCgxKSl0aHJvdyBuZXcgRXJyb3IoIlRMUyB2ZXJzaW9uIHJvbGxiYWNrIGF0dGFjayBkZXRlY3RlZC4iKX1jYXRjaChlKXtjLnByZV9tYXN0ZXJfc2VjcmV0PWEucmFuZG9tLmdldEJ5dGVzKDQ4KX1lLmV4cGVjdD1TLG51bGwhPT1lLnNlc3Npb24uY2xpZW50Q2VydGlmaWNhdGUmJihlLmV4cGVjdD1FKSxlLnByb2Nlc3MoKX0sdS5oYW5kbGVDZXJ0aWZpY2F0ZVJlcXVlc3Q9ZnVuY3Rpb24oZSx0LHIpe2lmKHI8MylyZXR1cm4gZS5lcnJvcihlLHttZXNzYWdlOiJJbnZhbGlkIENlcnRpZmljYXRlUmVxdWVzdC4gTWVzc2FnZSB0b28gc2hvcnQuIixzZW5kOiEwLGFsZXJ0OntsZXZlbDp1LkFsZXJ0LkxldmVsLmZhdGFsLGRlc2NyaXB0aW9uOnUuQWxlcnQuRGVzY3JpcHRpb24uaWxsZWdhbF9wYXJhbWV0ZXJ9fSk7dmFyIGE9dC5mcmFnbWVudCxuPXtjZXJ0aWZpY2F0ZV90eXBlczpvKGEsMSksY2VydGlmaWNhdGVfYXV0aG9yaXRpZXM6byhhLDIpfTtlLnNlc3Npb24uY2VydGlmaWNhdGVSZXF1ZXN0PW4sZS5leHBlY3Q9aCxlLnByb2Nlc3MoKX0sdS5oYW5kbGVDZXJ0aWZpY2F0ZVZlcmlmeT1mdW5jdGlvbihlLHQscil7aWYocjwyKXJldHVybiBlLmVycm9yKGUse21lc3NhZ2U6IkludmFsaWQgQ2VydGlmaWNhdGVWZXJpZnkuIE1lc3NhZ2UgdG9vIHNob3J0LiIsc2VuZDohMCxhbGVydDp7bGV2ZWw6dS5BbGVydC5MZXZlbC5mYXRhbCxkZXNjcmlwdGlvbjp1LkFsZXJ0LkRlc2NyaXB0aW9uLmlsbGVnYWxfcGFyYW1ldGVyfX0pO3ZhciBuPXQuZnJhZ21lbnQ7bi5yZWFkLT00O3ZhciBpPW4uYnl0ZXMoKTtuLnJlYWQrPTQ7dmFyIHM9e3NpZ25hdHVyZTpvKG4sMikuZ2V0Qnl0ZXMoKX0sYz1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7Yy5wdXRCdWZmZXIoZS5zZXNzaW9uLm1kNS5kaWdlc3QoKSksYy5wdXRCdWZmZXIoZS5zZXNzaW9uLnNoYTEuZGlnZXN0KCkpLGM9Yy5nZXRCeXRlcygpO3RyeXtpZighZS5zZXNzaW9uLmNsaWVudENlcnRpZmljYXRlLnB1YmxpY0tleS52ZXJpZnkoYyxzLnNpZ25hdHVyZSwiTk9ORSIpKXRocm93IG5ldyBFcnJvcigiQ2VydGlmaWNhdGVWZXJpZnkgc2lnbmF0dXJlIGRvZXMgbm90IG1hdGNoLiIpO2Uuc2Vzc2lvbi5tZDUudXBkYXRlKGkpLGUuc2Vzc2lvbi5zaGExLnVwZGF0ZShpKX1jYXRjaCh0KXtyZXR1cm4gZS5lcnJvcihlLHttZXNzYWdlOiJCYWQgc2lnbmF0dXJlIGluIENlcnRpZmljYXRlVmVyaWZ5LiIsc2VuZDohMCxhbGVydDp7bGV2ZWw6dS5BbGVydC5MZXZlbC5mYXRhbCxkZXNjcmlwdGlvbjp1LkFsZXJ0LkRlc2NyaXB0aW9uLmhhbmRzaGFrZV9mYWlsdXJlfX0pfWUuZXhwZWN0PVMsZS5wcm9jZXNzKCl9LHUuaGFuZGxlU2VydmVySGVsbG9Eb25lPWZ1bmN0aW9uKGUsdCxyKXtpZihyPjApcmV0dXJuIGUuZXJyb3IoZSx7bWVzc2FnZToiSW52YWxpZCBTZXJ2ZXJIZWxsb0RvbmUgbWVzc2FnZS4gSW52YWxpZCBsZW5ndGguIixzZW5kOiEwLGFsZXJ0OntsZXZlbDp1LkFsZXJ0LkxldmVsLmZhdGFsLGRlc2NyaXB0aW9uOnUuQWxlcnQuRGVzY3JpcHRpb24ucmVjb3JkX292ZXJmbG93fX0pO2lmKG51bGw9PT1lLnNlcnZlckNlcnRpZmljYXRlKXt2YXIgbj17bWVzc2FnZToiTm8gc2VydmVyIGNlcnRpZmljYXRlIHByb3ZpZGVkLiBOb3QgZW5vdWdoIHNlY3VyaXR5LiIsc2VuZDohMCxhbGVydDp7bGV2ZWw6dS5BbGVydC5MZXZlbC5mYXRhbCxkZXNjcmlwdGlvbjp1LkFsZXJ0LkRlc2NyaXB0aW9uLmluc3VmZmljaWVudF9zZWN1cml0eX19LGk9ZS52ZXJpZnkoZSxuLmFsZXJ0LmRlc2NyaXB0aW9uLDAsW10pO2lmKCEwIT09aSlyZXR1cm4oaXx8MD09PWkpJiYoIm9iamVjdCIhPXR5cGVvZiBpfHxhLnV0aWwuaXNBcnJheShpKT8ibnVtYmVyIj09dHlwZW9mIGkmJihuLmFsZXJ0LmRlc2NyaXB0aW9uPWkpOihpLm1lc3NhZ2UmJihuLm1lc3NhZ2U9aS5tZXNzYWdlKSxpLmFsZXJ0JiYobi5hbGVydC5kZXNjcmlwdGlvbj1pLmFsZXJ0KSkpLGUuZXJyb3IoZSxuKX1udWxsIT09ZS5zZXNzaW9uLmNlcnRpZmljYXRlUmVxdWVzdCYmKHQ9dS5jcmVhdGVSZWNvcmQoZSx7dHlwZTp1LkNvbnRlbnRUeXBlLmhhbmRzaGFrZSxkYXRhOnUuY3JlYXRlQ2VydGlmaWNhdGUoZSl9KSx1LnF1ZXVlKGUsdCkpLHQ9dS5jcmVhdGVSZWNvcmQoZSx7dHlwZTp1LkNvbnRlbnRUeXBlLmhhbmRzaGFrZSxkYXRhOnUuY3JlYXRlQ2xpZW50S2V5RXhjaGFuZ2UoZSl9KSx1LnF1ZXVlKGUsdCksZS5leHBlY3Q9bTt2YXIgcz1mdW5jdGlvbihlLHQpe251bGwhPT1lLnNlc3Npb24uY2VydGlmaWNhdGVSZXF1ZXN0JiZudWxsIT09ZS5zZXNzaW9uLmNsaWVudENlcnRpZmljYXRlJiZ1LnF1ZXVlKGUsdS5jcmVhdGVSZWNvcmQoZSx7dHlwZTp1LkNvbnRlbnRUeXBlLmhhbmRzaGFrZSxkYXRhOnUuY3JlYXRlQ2VydGlmaWNhdGVWZXJpZnkoZSx0KX0pKSx1LnF1ZXVlKGUsdS5jcmVhdGVSZWNvcmQoZSx7dHlwZTp1LkNvbnRlbnRUeXBlLmNoYW5nZV9jaXBoZXJfc3BlYyxkYXRhOnUuY3JlYXRlQ2hhbmdlQ2lwaGVyU3BlYygpfSkpLGUuc3RhdGUucGVuZGluZz11LmNyZWF0ZUNvbm5lY3Rpb25TdGF0ZShlKSxlLnN0YXRlLmN1cnJlbnQud3JpdGU9ZS5zdGF0ZS5wZW5kaW5nLndyaXRlLHUucXVldWUoZSx1LmNyZWF0ZVJlY29yZChlLHt0eXBlOnUuQ29udGVudFR5cGUuaGFuZHNoYWtlLGRhdGE6dS5jcmVhdGVGaW5pc2hlZChlKX0pKSxlLmV4cGVjdD1kLHUuZmx1c2goZSksZS5wcm9jZXNzKCl9O2lmKG51bGw9PT1lLnNlc3Npb24uY2VydGlmaWNhdGVSZXF1ZXN0fHxudWxsPT09ZS5zZXNzaW9uLmNsaWVudENlcnRpZmljYXRlKXJldHVybiBzKGUsbnVsbCk7dS5nZXRDbGllbnRTaWduYXR1cmUoZSxzKX0sdS5oYW5kbGVDaGFuZ2VDaXBoZXJTcGVjPWZ1bmN0aW9uKGUsdCl7aWYoMSE9PXQuZnJhZ21lbnQuZ2V0Qnl0ZSgpKXJldHVybiBlLmVycm9yKGUse21lc3NhZ2U6IkludmFsaWQgQ2hhbmdlQ2lwaGVyU3BlYyBtZXNzYWdlIHJlY2VpdmVkLiIsc2VuZDohMCxhbGVydDp7bGV2ZWw6dS5BbGVydC5MZXZlbC5mYXRhbCxkZXNjcmlwdGlvbjp1LkFsZXJ0LkRlc2NyaXB0aW9uLmlsbGVnYWxfcGFyYW1ldGVyfX0pO3ZhciByPWUuZW50aXR5PT09dS5Db25uZWN0aW9uRW5kLmNsaWVudDsoZS5zZXNzaW9uLnJlc3VtaW5nJiZyfHwhZS5zZXNzaW9uLnJlc3VtaW5nJiYhcikmJihlLnN0YXRlLnBlbmRpbmc9dS5jcmVhdGVDb25uZWN0aW9uU3RhdGUoZSkpLGUuc3RhdGUuY3VycmVudC5yZWFkPWUuc3RhdGUucGVuZGluZy5yZWFkLCghZS5zZXNzaW9uLnJlc3VtaW5nJiZyfHxlLnNlc3Npb24ucmVzdW1pbmcmJiFyKSYmKGUuc3RhdGUucGVuZGluZz1udWxsKSxlLmV4cGVjdD1yP3k6VCxlLnByb2Nlc3MoKX0sdS5oYW5kbGVGaW5pc2hlZD1mdW5jdGlvbihlLHQscil7dmFyIGk9dC5mcmFnbWVudDtpLnJlYWQtPTQ7dmFyIHM9aS5ieXRlcygpO2kucmVhZCs9NDt2YXIgbz10LmZyYWdtZW50LmdldEJ5dGVzKCk7KGk9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpKS5wdXRCdWZmZXIoZS5zZXNzaW9uLm1kNS5kaWdlc3QoKSksaS5wdXRCdWZmZXIoZS5zZXNzaW9uLnNoYTEuZGlnZXN0KCkpO3ZhciBjPWUuZW50aXR5PT09dS5Db25uZWN0aW9uRW5kLmNsaWVudCxsPWM/InNlcnZlciBmaW5pc2hlZCI6ImNsaWVudCBmaW5pc2hlZCIscD1lLnNlc3Npb24uc3A7aWYoKGk9bihwLm1hc3Rlcl9zZWNyZXQsbCxpLmdldEJ5dGVzKCksMTIpKS5nZXRCeXRlcygpIT09bylyZXR1cm4gZS5lcnJvcihlLHttZXNzYWdlOiJJbnZhbGlkIHZlcmlmeV9kYXRhIGluIEZpbmlzaGVkIG1lc3NhZ2UuIixzZW5kOiEwLGFsZXJ0OntsZXZlbDp1LkFsZXJ0LkxldmVsLmZhdGFsLGRlc2NyaXB0aW9uOnUuQWxlcnQuRGVzY3JpcHRpb24uZGVjcnlwdF9lcnJvcn19KTtlLnNlc3Npb24ubWQ1LnVwZGF0ZShzKSxlLnNlc3Npb24uc2hhMS51cGRhdGUocyksKGUuc2Vzc2lvbi5yZXN1bWluZyYmY3x8IWUuc2Vzc2lvbi5yZXN1bWluZyYmIWMpJiYodS5xdWV1ZShlLHUuY3JlYXRlUmVjb3JkKGUse3R5cGU6dS5Db250ZW50VHlwZS5jaGFuZ2VfY2lwaGVyX3NwZWMsZGF0YTp1LmNyZWF0ZUNoYW5nZUNpcGhlclNwZWMoKX0pKSxlLnN0YXRlLmN1cnJlbnQud3JpdGU9ZS5zdGF0ZS5wZW5kaW5nLndyaXRlLGUuc3RhdGUucGVuZGluZz1udWxsLHUucXVldWUoZSx1LmNyZWF0ZVJlY29yZChlLHt0eXBlOnUuQ29udGVudFR5cGUuaGFuZHNoYWtlLGRhdGE6dS5jcmVhdGVGaW5pc2hlZChlKX0pKSksZS5leHBlY3Q9Yz9nOkksZS5oYW5kc2hha2luZz0hMSwrK2UuaGFuZHNoYWtlcyxlLnBlZXJDZXJ0aWZpY2F0ZT1jP2Uuc2Vzc2lvbi5zZXJ2ZXJDZXJ0aWZpY2F0ZTplLnNlc3Npb24uY2xpZW50Q2VydGlmaWNhdGUsdS5mbHVzaChlKSxlLmlzQ29ubmVjdGVkPSEwLGUuY29ubmVjdGVkKGUpLGUucHJvY2VzcygpfSx1LmhhbmRsZUFsZXJ0PWZ1bmN0aW9uKGUsdCl7dmFyIHIsYT10LmZyYWdtZW50LG49e2xldmVsOmEuZ2V0Qnl0ZSgpLGRlc2NyaXB0aW9uOmEuZ2V0Qnl0ZSgpfTtzd2l0Y2gobi5kZXNjcmlwdGlvbil7Y2FzZSB1LkFsZXJ0LkRlc2NyaXB0aW9uLmNsb3NlX25vdGlmeTpyPSJDb25uZWN0aW9uIGNsb3NlZC4iO2JyZWFrO2Nhc2UgdS5BbGVydC5EZXNjcmlwdGlvbi51bmV4cGVjdGVkX21lc3NhZ2U6cj0iVW5leHBlY3RlZCBtZXNzYWdlLiI7YnJlYWs7Y2FzZSB1LkFsZXJ0LkRlc2NyaXB0aW9uLmJhZF9yZWNvcmRfbWFjOnI9IkJhZCByZWNvcmQgTUFDLiI7YnJlYWs7Y2FzZSB1LkFsZXJ0LkRlc2NyaXB0aW9uLmRlY3J5cHRpb25fZmFpbGVkOnI9IkRlY3J5cHRpb24gZmFpbGVkLiI7YnJlYWs7Y2FzZSB1LkFsZXJ0LkRlc2NyaXB0aW9uLnJlY29yZF9vdmVyZmxvdzpyPSJSZWNvcmQgb3ZlcmZsb3cuIjticmVhaztjYXNlIHUuQWxlcnQuRGVzY3JpcHRpb24uZGVjb21wcmVzc2lvbl9mYWlsdXJlOnI9IkRlY29tcHJlc3Npb24gZmFpbGVkLiI7YnJlYWs7Y2FzZSB1LkFsZXJ0LkRlc2NyaXB0aW9uLmhhbmRzaGFrZV9mYWlsdXJlOnI9IkhhbmRzaGFrZSBmYWlsdXJlLiI7YnJlYWs7Y2FzZSB1LkFsZXJ0LkRlc2NyaXB0aW9uLmJhZF9jZXJ0aWZpY2F0ZTpyPSJCYWQgY2VydGlmaWNhdGUuIjticmVhaztjYXNlIHUuQWxlcnQuRGVzY3JpcHRpb24udW5zdXBwb3J0ZWRfY2VydGlmaWNhdGU6cj0iVW5zdXBwb3J0ZWQgY2VydGlmaWNhdGUuIjticmVhaztjYXNlIHUuQWxlcnQuRGVzY3JpcHRpb24uY2VydGlmaWNhdGVfcmV2b2tlZDpyPSJDZXJ0aWZpY2F0ZSByZXZva2VkLiI7YnJlYWs7Y2FzZSB1LkFsZXJ0LkRlc2NyaXB0aW9uLmNlcnRpZmljYXRlX2V4cGlyZWQ6cj0iQ2VydGlmaWNhdGUgZXhwaXJlZC4iO2JyZWFrO2Nhc2UgdS5BbGVydC5EZXNjcmlwdGlvbi5jZXJ0aWZpY2F0ZV91bmtub3duOnI9IkNlcnRpZmljYXRlIHVua25vd24uIjticmVhaztjYXNlIHUuQWxlcnQuRGVzY3JpcHRpb24uaWxsZWdhbF9wYXJhbWV0ZXI6cj0iSWxsZWdhbCBwYXJhbWV0ZXIuIjticmVhaztjYXNlIHUuQWxlcnQuRGVzY3JpcHRpb24udW5rbm93bl9jYTpyPSJVbmtub3duIGNlcnRpZmljYXRlIGF1dGhvcml0eS4iO2JyZWFrO2Nhc2UgdS5BbGVydC5EZXNjcmlwdGlvbi5hY2Nlc3NfZGVuaWVkOnI9IkFjY2VzcyBkZW5pZWQuIjticmVhaztjYXNlIHUuQWxlcnQuRGVzY3JpcHRpb24uZGVjb2RlX2Vycm9yOnI9IkRlY29kZSBlcnJvci4iO2JyZWFrO2Nhc2UgdS5BbGVydC5EZXNjcmlwdGlvbi5kZWNyeXB0X2Vycm9yOnI9IkRlY3J5cHQgZXJyb3IuIjticmVhaztjYXNlIHUuQWxlcnQuRGVzY3JpcHRpb24uZXhwb3J0X3Jlc3RyaWN0aW9uOnI9IkV4cG9ydCByZXN0cmljdGlvbi4iO2JyZWFrO2Nhc2UgdS5BbGVydC5EZXNjcmlwdGlvbi5wcm90b2NvbF92ZXJzaW9uOnI9IlVuc3VwcG9ydGVkIHByb3RvY29sIHZlcnNpb24uIjticmVhaztjYXNlIHUuQWxlcnQuRGVzY3JpcHRpb24uaW5zdWZmaWNpZW50X3NlY3VyaXR5OnI9Ikluc3VmZmljaWVudCBzZWN1cml0eS4iO2JyZWFrO2Nhc2UgdS5BbGVydC5EZXNjcmlwdGlvbi5pbnRlcm5hbF9lcnJvcjpyPSJJbnRlcm5hbCBlcnJvci4iO2JyZWFrO2Nhc2UgdS5BbGVydC5EZXNjcmlwdGlvbi51c2VyX2NhbmNlbGVkOnI9IlVzZXIgY2FuY2VsZWQuIjticmVhaztjYXNlIHUuQWxlcnQuRGVzY3JpcHRpb24ubm9fcmVuZWdvdGlhdGlvbjpyPSJSZW5lZ290aWF0aW9uIG5vdCBzdXBwb3J0ZWQuIjticmVhaztkZWZhdWx0OnI9IlVua25vd24gZXJyb3IuIn1pZihuLmRlc2NyaXB0aW9uPT09dS5BbGVydC5EZXNjcmlwdGlvbi5jbG9zZV9ub3RpZnkpcmV0dXJuIGUuY2xvc2UoKTtlLmVycm9yKGUse21lc3NhZ2U6cixzZW5kOiExLG9yaWdpbjplLmVudGl0eT09PXUuQ29ubmVjdGlvbkVuZC5jbGllbnQ/InNlcnZlciI6ImNsaWVudCIsYWxlcnQ6bn0pLGUucHJvY2VzcygpfSx1LmhhbmRsZUhhbmRzaGFrZT1mdW5jdGlvbihlLHQpe3ZhciByPXQuZnJhZ21lbnQsbj1yLmdldEJ5dGUoKSxpPXIuZ2V0SW50MjQoKTtpZihpPnIubGVuZ3RoKCkpcmV0dXJuIGUuZnJhZ21lbnRlZD10LHQuZnJhZ21lbnQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpLHIucmVhZC09NCxlLnByb2Nlc3MoKTtlLmZyYWdtZW50ZWQ9bnVsbCxyLnJlYWQtPTQ7dmFyIHM9ci5ieXRlcyhpKzQpO3IucmVhZCs9NCxuIGluIEtbZS5lbnRpdHldW2UuZXhwZWN0XT8oZS5lbnRpdHkhPT11LkNvbm5lY3Rpb25FbmQuc2VydmVyfHxlLm9wZW58fGUuZmFpbHx8KGUuaGFuZHNoYWtpbmc9ITAsZS5zZXNzaW9uPXt2ZXJzaW9uOm51bGwsZXh0ZW5zaW9uczp7c2VydmVyX25hbWU6e3NlcnZlck5hbWVMaXN0OltdfX0sY2lwaGVyU3VpdGU6bnVsbCxjb21wcmVzc2lvbk1ldGhvZDpudWxsLHNlcnZlckNlcnRpZmljYXRlOm51bGwsY2xpZW50Q2VydGlmaWNhdGU6bnVsbCxtZDU6YS5tZC5tZDUuY3JlYXRlKCksc2hhMTphLm1kLnNoYTEuY3JlYXRlKCl9KSxuIT09dS5IYW5kc2hha2VUeXBlLmhlbGxvX3JlcXVlc3QmJm4hPT11LkhhbmRzaGFrZVR5cGUuY2VydGlmaWNhdGVfdmVyaWZ5JiZuIT09dS5IYW5kc2hha2VUeXBlLmZpbmlzaGVkJiYoZS5zZXNzaW9uLm1kNS51cGRhdGUocyksZS5zZXNzaW9uLnNoYTEudXBkYXRlKHMpKSxLW2UuZW50aXR5XVtlLmV4cGVjdF1bbl0oZSx0LGkpKTp1LmhhbmRsZVVuZXhwZWN0ZWQoZSx0KX0sdS5oYW5kbGVBcHBsaWNhdGlvbkRhdGE9ZnVuY3Rpb24oZSx0KXtlLmRhdGEucHV0QnVmZmVyKHQuZnJhZ21lbnQpLGUuZGF0YVJlYWR5KGUpLGUucHJvY2VzcygpfSx1LmhhbmRsZUhlYXJ0YmVhdD1mdW5jdGlvbihlLHQpe3ZhciByPXQuZnJhZ21lbnQsbj1yLmdldEJ5dGUoKSxpPXIuZ2V0SW50MTYoKSxzPXIuZ2V0Qnl0ZXMoaSk7aWYobj09PXUuSGVhcnRiZWF0TWVzc2FnZVR5cGUuaGVhcnRiZWF0X3JlcXVlc3Qpe2lmKGUuaGFuZHNoYWtpbmd8fGk+cy5sZW5ndGgpcmV0dXJuIGUucHJvY2VzcygpO3UucXVldWUoZSx1LmNyZWF0ZVJlY29yZChlLHt0eXBlOnUuQ29udGVudFR5cGUuaGVhcnRiZWF0LGRhdGE6dS5jcmVhdGVIZWFydGJlYXQodS5IZWFydGJlYXRNZXNzYWdlVHlwZS5oZWFydGJlYXRfcmVzcG9uc2Uscyl9KSksdS5mbHVzaChlKX1lbHNlIGlmKG49PT11LkhlYXJ0YmVhdE1lc3NhZ2VUeXBlLmhlYXJ0YmVhdF9yZXNwb25zZSl7aWYocyE9PWUuZXhwZWN0ZWRIZWFydGJlYXRQYXlsb2FkKXJldHVybiBlLnByb2Nlc3MoKTtlLmhlYXJ0YmVhdFJlY2VpdmVkJiZlLmhlYXJ0YmVhdFJlY2VpdmVkKGUsYS51dGlsLmNyZWF0ZUJ1ZmZlcihzKSl9ZS5wcm9jZXNzKCl9O3ZhciBsPTEscD0yLGY9MyxoPTQsZD01LHk9NixnPTcsbT04LHY9MSxDPTIsRT0zLFM9NCxUPTUsST02LGI9dS5oYW5kbGVVbmV4cGVjdGVkLEE9dS5oYW5kbGVDaGFuZ2VDaXBoZXJTcGVjLEI9dS5oYW5kbGVBbGVydCxOPXUuaGFuZGxlSGFuZHNoYWtlLGs9dS5oYW5kbGVBcHBsaWNhdGlvbkRhdGEsdz11LmhhbmRsZUhlYXJ0YmVhdCxSPVtdO1JbdS5Db25uZWN0aW9uRW5kLmNsaWVudF09W1tiLEIsTixiLHddLFtiLEIsTixiLHddLFtiLEIsTixiLHddLFtiLEIsTixiLHddLFtiLEIsTixiLHddLFtBLEIsYixiLHddLFtiLEIsTixiLHddLFtiLEIsTixrLHddLFtiLEIsTixiLHddXSxSW3UuQ29ubmVjdGlvbkVuZC5zZXJ2ZXJdPVtbYixCLE4sYix3XSxbYixCLE4sYix3XSxbYixCLE4sYix3XSxbYixCLE4sYix3XSxbQSxCLGIsYix3XSxbYixCLE4sYix3XSxbYixCLE4sayx3XSxbYixCLE4sYix3XV07dmFyIF89dS5oYW5kbGVIZWxsb1JlcXVlc3QsTD11LmhhbmRsZVNlcnZlckhlbGxvLFU9dS5oYW5kbGVDZXJ0aWZpY2F0ZSxEPXUuaGFuZGxlU2VydmVyS2V5RXhjaGFuZ2UsUD11LmhhbmRsZUNlcnRpZmljYXRlUmVxdWVzdCxWPXUuaGFuZGxlU2VydmVySGVsbG9Eb25lLE89dS5oYW5kbGVGaW5pc2hlZCxLPVtdO0tbdS5Db25uZWN0aW9uRW5kLmNsaWVudF09W1tiLGIsTCxiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYl0sW18sYixiLGIsYixiLGIsYixiLGIsYixVLEQsUCxWLGIsYixiLGIsYixiXSxbXyxiLGIsYixiLGIsYixiLGIsYixiLGIsRCxQLFYsYixiLGIsYixiLGJdLFtfLGIsYixiLGIsYixiLGIsYixiLGIsYixiLFAsVixiLGIsYixiLGIsYl0sW18sYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixWLGIsYixiLGIsYixiXSxbXyxiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGJdLFtfLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsT10sW18sYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiXSxbXyxiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGJdXTt2YXIgeD11LmhhbmRsZUNsaWVudEhlbGxvLE09dS5oYW5kbGVDbGllbnRLZXlFeGNoYW5nZSxGPXUuaGFuZGxlQ2VydGlmaWNhdGVWZXJpZnk7S1t1LkNvbm5lY3Rpb25FbmQuc2VydmVyXT1bW2IseCxiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiXSxbYixiLGIsYixiLGIsYixiLGIsYixiLFUsYixiLGIsYixiLGIsYixiLGJdLFtiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLE0sYixiLGIsYl0sW2IsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLEYsYixiLGIsYixiXSxbYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGJdLFtiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsT10sW2IsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiXSxbYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGIsYixiLGJdXSx1LmdlbmVyYXRlS2V5cz1mdW5jdGlvbihlLHQpe3ZhciByPW4sYT10LmNsaWVudF9yYW5kb20rdC5zZXJ2ZXJfcmFuZG9tO2Uuc2Vzc2lvbi5yZXN1bWluZ3x8KHQubWFzdGVyX3NlY3JldD1yKHQucHJlX21hc3Rlcl9zZWNyZXQsIm1hc3RlciBzZWNyZXQiLGEsNDgpLmJ5dGVzKCksdC5wcmVfbWFzdGVyX3NlY3JldD1udWxsKSxhPXQuc2VydmVyX3JhbmRvbSt0LmNsaWVudF9yYW5kb207dmFyIGk9Mip0Lm1hY19rZXlfbGVuZ3RoKzIqdC5lbmNfa2V5X2xlbmd0aCxzPWUudmVyc2lvbi5tYWpvcj09PXUuVmVyc2lvbnMuVExTXzFfMC5tYWpvciYmZS52ZXJzaW9uLm1pbm9yPT09dS5WZXJzaW9ucy5UTFNfMV8wLm1pbm9yO3MmJihpKz0yKnQuZml4ZWRfaXZfbGVuZ3RoKTt2YXIgbz1yKHQubWFzdGVyX3NlY3JldCwia2V5IGV4cGFuc2lvbiIsYSxpKSxjPXtjbGllbnRfd3JpdGVfTUFDX2tleTpvLmdldEJ5dGVzKHQubWFjX2tleV9sZW5ndGgpLHNlcnZlcl93cml0ZV9NQUNfa2V5Om8uZ2V0Qnl0ZXModC5tYWNfa2V5X2xlbmd0aCksY2xpZW50X3dyaXRlX2tleTpvLmdldEJ5dGVzKHQuZW5jX2tleV9sZW5ndGgpLHNlcnZlcl93cml0ZV9rZXk6by5nZXRCeXRlcyh0LmVuY19rZXlfbGVuZ3RoKX07cmV0dXJuIHMmJihjLmNsaWVudF93cml0ZV9JVj1vLmdldEJ5dGVzKHQuZml4ZWRfaXZfbGVuZ3RoKSxjLnNlcnZlcl93cml0ZV9JVj1vLmdldEJ5dGVzKHQuZml4ZWRfaXZfbGVuZ3RoKSksY30sdS5jcmVhdGVDb25uZWN0aW9uU3RhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5lbnRpdHk9PT11LkNvbm5lY3Rpb25FbmQuY2xpZW50LHI9ZnVuY3Rpb24oKXt2YXIgZT17c2VxdWVuY2VOdW1iZXI6WzAsMF0sbWFjS2V5Om51bGwsbWFjTGVuZ3RoOjAsbWFjRnVuY3Rpb246bnVsbCxjaXBoZXJTdGF0ZTpudWxsLGNpcGhlckZ1bmN0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiEwfSxjb21wcmVzc2lvblN0YXRlOm51bGwsY29tcHJlc3NGdW5jdGlvbjpmdW5jdGlvbihlKXtyZXR1cm4hMH0sdXBkYXRlU2VxdWVuY2VOdW1iZXI6ZnVuY3Rpb24oKXs0Mjk0OTY3Mjk1PT09ZS5zZXF1ZW5jZU51bWJlclsxXT8oZS5zZXF1ZW5jZU51bWJlclsxXT0wLCsrZS5zZXF1ZW5jZU51bWJlclswXSk6KytlLnNlcXVlbmNlTnVtYmVyWzFdfX07cmV0dXJuIGV9LGE9e3JlYWQ6cigpLHdyaXRlOnIoKX07aWYoYS5yZWFkLnVwZGF0ZT1mdW5jdGlvbihlLHQpe3JldHVybiBhLnJlYWQuY2lwaGVyRnVuY3Rpb24odCxhLnJlYWQpP2EucmVhZC5jb21wcmVzc0Z1bmN0aW9uKGUsdCxhLnJlYWQpfHxlLmVycm9yKGUse21lc3NhZ2U6IkNvdWxkIG5vdCBkZWNvbXByZXNzIHJlY29yZC4iLHNlbmQ6ITAsYWxlcnQ6e2xldmVsOnUuQWxlcnQuTGV2ZWwuZmF0YWwsZGVzY3JpcHRpb246dS5BbGVydC5EZXNjcmlwdGlvbi5kZWNvbXByZXNzaW9uX2ZhaWx1cmV9fSk6ZS5lcnJvcihlLHttZXNzYWdlOiJDb3VsZCBub3QgZGVjcnlwdCByZWNvcmQgb3IgYmFkIE1BQy4iLHNlbmQ6ITAsYWxlcnQ6e2xldmVsOnUuQWxlcnQuTGV2ZWwuZmF0YWwsZGVzY3JpcHRpb246dS5BbGVydC5EZXNjcmlwdGlvbi5iYWRfcmVjb3JkX21hY319KSwhZS5mYWlsfSxhLndyaXRlLnVwZGF0ZT1mdW5jdGlvbihlLHQpe3JldHVybiBhLndyaXRlLmNvbXByZXNzRnVuY3Rpb24oZSx0LGEud3JpdGUpP2Eud3JpdGUuY2lwaGVyRnVuY3Rpb24odCxhLndyaXRlKXx8ZS5lcnJvcihlLHttZXNzYWdlOiJDb3VsZCBub3QgZW5jcnlwdCByZWNvcmQuIixzZW5kOiExLGFsZXJ0OntsZXZlbDp1LkFsZXJ0LkxldmVsLmZhdGFsLGRlc2NyaXB0aW9uOnUuQWxlcnQuRGVzY3JpcHRpb24uaW50ZXJuYWxfZXJyb3J9fSk6ZS5lcnJvcihlLHttZXNzYWdlOiJDb3VsZCBub3QgY29tcHJlc3MgcmVjb3JkLiIsc2VuZDohMSxhbGVydDp7bGV2ZWw6dS5BbGVydC5MZXZlbC5mYXRhbCxkZXNjcmlwdGlvbjp1LkFsZXJ0LkRlc2NyaXB0aW9uLmludGVybmFsX2Vycm9yfX0pLCFlLmZhaWx9LGUuc2Vzc2lvbil7dmFyIG49ZS5zZXNzaW9uLnNwO3N3aXRjaChlLnNlc3Npb24uY2lwaGVyU3VpdGUuaW5pdFNlY3VyaXR5UGFyYW1ldGVycyhuKSxuLmtleXM9dS5nZW5lcmF0ZUtleXMoZSxuKSxhLnJlYWQubWFjS2V5PXQ/bi5rZXlzLnNlcnZlcl93cml0ZV9NQUNfa2V5Om4ua2V5cy5jbGllbnRfd3JpdGVfTUFDX2tleSxhLndyaXRlLm1hY0tleT10P24ua2V5cy5jbGllbnRfd3JpdGVfTUFDX2tleTpuLmtleXMuc2VydmVyX3dyaXRlX01BQ19rZXksZS5zZXNzaW9uLmNpcGhlclN1aXRlLmluaXRDb25uZWN0aW9uU3RhdGUoYSxlLG4pLG4uY29tcHJlc3Npb25fYWxnb3JpdGhtKXtjYXNlIHUuQ29tcHJlc3Npb25NZXRob2Qubm9uZTpicmVhaztjYXNlIHUuQ29tcHJlc3Npb25NZXRob2QuZGVmbGF0ZTphLnJlYWQuY29tcHJlc3NGdW5jdGlvbj1zLGEud3JpdGUuY29tcHJlc3NGdW5jdGlvbj1pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbnN1cHBvcnRlZCBjb21wcmVzc2lvbiBhbGdvcml0aG0uIil9fXJldHVybiBhfSx1LmNyZWF0ZVJhbmRvbT1mdW5jdGlvbigpe3ZhciBlPW5ldyBEYXRlLHQ9K2UrNmU0KmUuZ2V0VGltZXpvbmVPZmZzZXQoKSxyPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtyZXR1cm4gci5wdXRJbnQzMih0KSxyLnB1dEJ5dGVzKGEucmFuZG9tLmdldEJ5dGVzKDI4KSkscn0sdS5jcmVhdGVSZWNvcmQ9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5kYXRhP3t0eXBlOnQudHlwZSx2ZXJzaW9uOnttYWpvcjplLnZlcnNpb24ubWFqb3IsbWlub3I6ZS52ZXJzaW9uLm1pbm9yfSxsZW5ndGg6dC5kYXRhLmxlbmd0aCgpLGZyYWdtZW50OnQuZGF0YX06bnVsbH0sdS5jcmVhdGVBbGVydD1mdW5jdGlvbihlLHQpe3ZhciByPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtyZXR1cm4gci5wdXRCeXRlKHQubGV2ZWwpLHIucHV0Qnl0ZSh0LmRlc2NyaXB0aW9uKSx1LmNyZWF0ZVJlY29yZChlLHt0eXBlOnUuQ29udGVudFR5cGUuYWxlcnQsZGF0YTpyfSl9LHUuY3JlYXRlQ2xpZW50SGVsbG89ZnVuY3Rpb24oZSl7ZS5zZXNzaW9uLmNsaWVudEhlbGxvVmVyc2lvbj17bWFqb3I6ZS52ZXJzaW9uLm1ham9yLG1pbm9yOmUudmVyc2lvbi5taW5vcn07Zm9yKHZhciB0PWEudXRpbC5jcmVhdGVCdWZmZXIoKSxyPTA7cjxlLmNpcGhlclN1aXRlcy5sZW5ndGg7KytyKXt2YXIgbj1lLmNpcGhlclN1aXRlc1tyXTt0LnB1dEJ5dGUobi5pZFswXSksdC5wdXRCeXRlKG4uaWRbMV0pfXZhciBpPXQubGVuZ3RoKCkscz1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7cy5wdXRCeXRlKHUuQ29tcHJlc3Npb25NZXRob2Qubm9uZSk7dmFyIG89cy5sZW5ndGgoKSxsPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtpZihlLnZpcnR1YWxIb3N0KXt2YXIgcD1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7cC5wdXRCeXRlKDApLHAucHV0Qnl0ZSgwKTt2YXIgZj1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7Zi5wdXRCeXRlKDApLGMoZiwyLGEudXRpbC5jcmVhdGVCdWZmZXIoZS52aXJ0dWFsSG9zdCkpO3ZhciBoPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtjKGgsMixmKSxjKHAsMixoKSxsLnB1dEJ1ZmZlcihwKX12YXIgZD1sLmxlbmd0aCgpO2Q+MCYmKGQrPTIpO3ZhciB5PWUuc2Vzc2lvbi5pZCxnPXkubGVuZ3RoKzErMis0KzI4KzIraSsxK28rZCxtPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtyZXR1cm4gbS5wdXRCeXRlKHUuSGFuZHNoYWtlVHlwZS5jbGllbnRfaGVsbG8pLG0ucHV0SW50MjQoZyksbS5wdXRCeXRlKGUudmVyc2lvbi5tYWpvciksbS5wdXRCeXRlKGUudmVyc2lvbi5taW5vciksbS5wdXRCeXRlcyhlLnNlc3Npb24uc3AuY2xpZW50X3JhbmRvbSksYyhtLDEsYS51dGlsLmNyZWF0ZUJ1ZmZlcih5KSksYyhtLDIsdCksYyhtLDEscyksZD4wJiZjKG0sMixsKSxtfSx1LmNyZWF0ZVNlcnZlckhlbGxvPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc2Vzc2lvbi5pZCxyPXQubGVuZ3RoKzErMis0KzI4KzIrMSxuPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtyZXR1cm4gbi5wdXRCeXRlKHUuSGFuZHNoYWtlVHlwZS5zZXJ2ZXJfaGVsbG8pLG4ucHV0SW50MjQociksbi5wdXRCeXRlKGUudmVyc2lvbi5tYWpvciksbi5wdXRCeXRlKGUudmVyc2lvbi5taW5vciksbi5wdXRCeXRlcyhlLnNlc3Npb24uc3Auc2VydmVyX3JhbmRvbSksYyhuLDEsYS51dGlsLmNyZWF0ZUJ1ZmZlcih0KSksbi5wdXRCeXRlKGUuc2Vzc2lvbi5jaXBoZXJTdWl0ZS5pZFswXSksbi5wdXRCeXRlKGUuc2Vzc2lvbi5jaXBoZXJTdWl0ZS5pZFsxXSksbi5wdXRCeXRlKGUuc2Vzc2lvbi5jb21wcmVzc2lvbk1ldGhvZCksbn0sdS5jcmVhdGVDZXJ0aWZpY2F0ZT1mdW5jdGlvbihlKXt2YXIgdCxyPWUuZW50aXR5PT09dS5Db25uZWN0aW9uRW5kLmNsaWVudCxuPW51bGw7ZS5nZXRDZXJ0aWZpY2F0ZSYmKHQ9cj9lLnNlc3Npb24uY2VydGlmaWNhdGVSZXF1ZXN0OmUuc2Vzc2lvbi5leHRlbnNpb25zLnNlcnZlcl9uYW1lLnNlcnZlck5hbWVMaXN0LG49ZS5nZXRDZXJ0aWZpY2F0ZShlLHQpKTt2YXIgaT1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7aWYobnVsbCE9PW4pdHJ5e2EudXRpbC5pc0FycmF5KG4pfHwobj1bbl0pO2Zvcih2YXIgcz1udWxsLG89MDtvPG4ubGVuZ3RoOysrbyl7dmFyIGw9YS5wZW0uZGVjb2RlKG5bb10pWzBdO2lmKCJDRVJUSUZJQ0FURSIhPT1sLnR5cGUmJiJYNTA5IENFUlRJRklDQVRFIiE9PWwudHlwZSYmIlRSVVNURUQgQ0VSVElGSUNBVEUiIT09bC50eXBlKXt2YXIgcD1uZXcgRXJyb3IoJ0NvdWxkIG5vdCBjb252ZXJ0IGNlcnRpZmljYXRlIGZyb20gUEVNOyBQRU0gaGVhZGVyIHR5cGUgaXMgbm90ICJDRVJUSUZJQ0FURSIsICJYNTA5IENFUlRJRklDQVRFIiwgb3IgIlRSVVNURUQgQ0VSVElGSUNBVEUiLicpO3Rocm93IHAuaGVhZGVyVHlwZT1sLnR5cGUscH1pZihsLnByb2NUeXBlJiYiRU5DUllQVEVEIj09PWwucHJvY1R5cGUudHlwZSl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBjb252ZXJ0IGNlcnRpZmljYXRlIGZyb20gUEVNOyBQRU0gaXMgZW5jcnlwdGVkLiIpO3ZhciBmPWEudXRpbC5jcmVhdGVCdWZmZXIobC5ib2R5KTtudWxsPT09cyYmKHM9YS5hc24xLmZyb21EZXIoZi5ieXRlcygpLCExKSk7dmFyIGg9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO2MoaCwzLGYpLGkucHV0QnVmZmVyKGgpfW49YS5wa2kuY2VydGlmaWNhdGVGcm9tQXNuMShzKSxyP2Uuc2Vzc2lvbi5jbGllbnRDZXJ0aWZpY2F0ZT1uOmUuc2Vzc2lvbi5zZXJ2ZXJDZXJ0aWZpY2F0ZT1ufWNhdGNoKHQpe3JldHVybiBlLmVycm9yKGUse21lc3NhZ2U6IkNvdWxkIG5vdCBzZW5kIGNlcnRpZmljYXRlIGxpc3QuIixjYXVzZTp0LHNlbmQ6ITAsYWxlcnQ6e2xldmVsOnUuQWxlcnQuTGV2ZWwuZmF0YWwsZGVzY3JpcHRpb246dS5BbGVydC5EZXNjcmlwdGlvbi5iYWRfY2VydGlmaWNhdGV9fSl9dmFyIGQ9MytpLmxlbmd0aCgpLHk9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO3JldHVybiB5LnB1dEJ5dGUodS5IYW5kc2hha2VUeXBlLmNlcnRpZmljYXRlKSx5LnB1dEludDI0KGQpLGMoeSwzLGkpLHl9LHUuY3JlYXRlQ2xpZW50S2V5RXhjaGFuZ2U9ZnVuY3Rpb24oZSl7dmFyIHQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO3QucHV0Qnl0ZShlLnNlc3Npb24uY2xpZW50SGVsbG9WZXJzaW9uLm1ham9yKSx0LnB1dEJ5dGUoZS5zZXNzaW9uLmNsaWVudEhlbGxvVmVyc2lvbi5taW5vciksdC5wdXRCeXRlcyhhLnJhbmRvbS5nZXRCeXRlcyg0NikpO3ZhciByPWUuc2Vzc2lvbi5zcDtyLnByZV9tYXN0ZXJfc2VjcmV0PXQuZ2V0Qnl0ZXMoKTt2YXIgbj0odD1lLnNlc3Npb24uc2VydmVyQ2VydGlmaWNhdGUucHVibGljS2V5LmVuY3J5cHQoci5wcmVfbWFzdGVyX3NlY3JldCkpLmxlbmd0aCsyLGk9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO3JldHVybiBpLnB1dEJ5dGUodS5IYW5kc2hha2VUeXBlLmNsaWVudF9rZXlfZXhjaGFuZ2UpLGkucHV0SW50MjQobiksaS5wdXRJbnQxNih0Lmxlbmd0aCksaS5wdXRCeXRlcyh0KSxpfSx1LmNyZWF0ZVNlcnZlcktleUV4Y2hhbmdlPWZ1bmN0aW9uKGUpe3ZhciB0PWEudXRpbC5jcmVhdGVCdWZmZXIoKTtyZXR1cm4gdH0sdS5nZXRDbGllbnRTaWduYXR1cmU9ZnVuY3Rpb24oZSx0KXt2YXIgcj1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7ci5wdXRCdWZmZXIoZS5zZXNzaW9uLm1kNS5kaWdlc3QoKSksci5wdXRCdWZmZXIoZS5zZXNzaW9uLnNoYTEuZGlnZXN0KCkpLHI9ci5nZXRCeXRlcygpLGUuZ2V0U2lnbmF0dXJlPWUuZ2V0U2lnbmF0dXJlfHxmdW5jdGlvbihlLHQscil7dmFyIG49bnVsbDtpZihlLmdldFByaXZhdGVLZXkpdHJ5e249ZS5nZXRQcml2YXRlS2V5KGUsZS5zZXNzaW9uLmNsaWVudENlcnRpZmljYXRlKSxuPWEucGtpLnByaXZhdGVLZXlGcm9tUGVtKG4pfWNhdGNoKHQpe2UuZXJyb3IoZSx7bWVzc2FnZToiQ291bGQgbm90IGdldCBwcml2YXRlIGtleS4iLGNhdXNlOnQsc2VuZDohMCxhbGVydDp7bGV2ZWw6dS5BbGVydC5MZXZlbC5mYXRhbCxkZXNjcmlwdGlvbjp1LkFsZXJ0LkRlc2NyaXB0aW9uLmludGVybmFsX2Vycm9yfX0pfW51bGw9PT1uP2UuZXJyb3IoZSx7bWVzc2FnZToiTm8gcHJpdmF0ZSBrZXkgc2V0LiIsc2VuZDohMCxhbGVydDp7bGV2ZWw6dS5BbGVydC5MZXZlbC5mYXRhbCxkZXNjcmlwdGlvbjp1LkFsZXJ0LkRlc2NyaXB0aW9uLmludGVybmFsX2Vycm9yfX0pOnQ9bi5zaWduKHQsbnVsbCkscihlLHQpfSxlLmdldFNpZ25hdHVyZShlLHIsdCl9LHUuY3JlYXRlQ2VydGlmaWNhdGVWZXJpZnk9ZnVuY3Rpb24oZSx0KXt2YXIgcj10Lmxlbmd0aCsyLG49YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO3JldHVybiBuLnB1dEJ5dGUodS5IYW5kc2hha2VUeXBlLmNlcnRpZmljYXRlX3ZlcmlmeSksbi5wdXRJbnQyNChyKSxuLnB1dEludDE2KHQubGVuZ3RoKSxuLnB1dEJ5dGVzKHQpLG59LHUuY3JlYXRlQ2VydGlmaWNhdGVSZXF1ZXN0PWZ1bmN0aW9uKGUpe3ZhciB0PWEudXRpbC5jcmVhdGVCdWZmZXIoKTt0LnB1dEJ5dGUoMSk7dmFyIHI9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO2Zvcih2YXIgbiBpbiBlLmNhU3RvcmUuY2VydHMpe3ZhciBpPWUuY2FTdG9yZS5jZXJ0c1tuXSxzPWEucGtpLmRpc3Rpbmd1aXNoZWROYW1lVG9Bc24xKGkuc3ViamVjdCksbz1hLmFzbjEudG9EZXIocyk7ci5wdXRJbnQxNihvLmxlbmd0aCgpKSxyLnB1dEJ1ZmZlcihvKX12YXIgbD0xK3QubGVuZ3RoKCkrMityLmxlbmd0aCgpLHA9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO3JldHVybiBwLnB1dEJ5dGUodS5IYW5kc2hha2VUeXBlLmNlcnRpZmljYXRlX3JlcXVlc3QpLHAucHV0SW50MjQobCksYyhwLDEsdCksYyhwLDIscikscH0sdS5jcmVhdGVTZXJ2ZXJIZWxsb0RvbmU9ZnVuY3Rpb24oZSl7dmFyIHQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO3JldHVybiB0LnB1dEJ5dGUodS5IYW5kc2hha2VUeXBlLnNlcnZlcl9oZWxsb19kb25lKSx0LnB1dEludDI0KDApLHR9LHUuY3JlYXRlQ2hhbmdlQ2lwaGVyU3BlYz1mdW5jdGlvbigpe3ZhciBlPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtyZXR1cm4gZS5wdXRCeXRlKDEpLGV9LHUuY3JlYXRlRmluaXNoZWQ9ZnVuY3Rpb24oZSl7dmFyIHQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO3QucHV0QnVmZmVyKGUuc2Vzc2lvbi5tZDUuZGlnZXN0KCkpLHQucHV0QnVmZmVyKGUuc2Vzc2lvbi5zaGExLmRpZ2VzdCgpKTt2YXIgcj1lLmVudGl0eT09PXUuQ29ubmVjdGlvbkVuZC5jbGllbnQsaT1lLnNlc3Npb24uc3Ascz1yPyJjbGllbnQgZmluaXNoZWQiOiJzZXJ2ZXIgZmluaXNoZWQiO3Q9bihpLm1hc3Rlcl9zZWNyZXQscyx0LmdldEJ5dGVzKCksMTIpO3ZhciBvPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtyZXR1cm4gby5wdXRCeXRlKHUuSGFuZHNoYWtlVHlwZS5maW5pc2hlZCksby5wdXRJbnQyNCh0Lmxlbmd0aCgpKSxvLnB1dEJ1ZmZlcih0KSxvfSx1LmNyZWF0ZUhlYXJ0YmVhdD1mdW5jdGlvbihlLHQscil7dm9pZCAwPT09ciYmKHI9dC5sZW5ndGgpO3ZhciBuPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtuLnB1dEJ5dGUoZSksbi5wdXRJbnQxNihyKSxuLnB1dEJ5dGVzKHQpO3ZhciBpPW4ubGVuZ3RoKCkscz1NYXRoLm1heCgxNixpLXItMyk7cmV0dXJuIG4ucHV0Qnl0ZXMoYS5yYW5kb20uZ2V0Qnl0ZXMocykpLG59LHUucXVldWU9ZnVuY3Rpb24oZSx0KXtpZih0JiYoMCE9PXQuZnJhZ21lbnQubGVuZ3RoKCl8fHQudHlwZSE9PXUuQ29udGVudFR5cGUuaGFuZHNoYWtlJiZ0LnR5cGUhPT11LkNvbnRlbnRUeXBlLmFsZXJ0JiZ0LnR5cGUhPT11LkNvbnRlbnRUeXBlLmNoYW5nZV9jaXBoZXJfc3BlYykpe2lmKHQudHlwZT09PXUuQ29udGVudFR5cGUuaGFuZHNoYWtlKXt2YXIgcj10LmZyYWdtZW50LmJ5dGVzKCk7ZS5zZXNzaW9uLm1kNS51cGRhdGUociksZS5zZXNzaW9uLnNoYTEudXBkYXRlKHIpLHI9bnVsbH12YXIgbjtpZih0LmZyYWdtZW50Lmxlbmd0aCgpPD11Lk1heEZyYWdtZW50KW49W3RdO2Vsc2V7bj1bXTtmb3IodmFyIGk9dC5mcmFnbWVudC5ieXRlcygpO2kubGVuZ3RoPnUuTWF4RnJhZ21lbnQ7KW4ucHVzaCh1LmNyZWF0ZVJlY29yZChlLHt0eXBlOnQudHlwZSxkYXRhOmEudXRpbC5jcmVhdGVCdWZmZXIoaS5zbGljZSgwLHUuTWF4RnJhZ21lbnQpKX0pKSxpPWkuc2xpY2UodS5NYXhGcmFnbWVudCk7aS5sZW5ndGg+MCYmbi5wdXNoKHUuY3JlYXRlUmVjb3JkKGUse3R5cGU6dC50eXBlLGRhdGE6YS51dGlsLmNyZWF0ZUJ1ZmZlcihpKX0pKX1mb3IodmFyIHM9MDtzPG4ubGVuZ3RoJiYhZS5mYWlsOysrcyl7dmFyIG89bltzXTtlLnN0YXRlLmN1cnJlbnQud3JpdGUudXBkYXRlKGUsbykmJmUucmVjb3Jkcy5wdXNoKG8pfX19LHUuZmx1c2g9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxlLnJlY29yZHMubGVuZ3RoOysrdCl7dmFyIHI9ZS5yZWNvcmRzW3RdO2UudGxzRGF0YS5wdXRCeXRlKHIudHlwZSksZS50bHNEYXRhLnB1dEJ5dGUoci52ZXJzaW9uLm1ham9yKSxlLnRsc0RhdGEucHV0Qnl0ZShyLnZlcnNpb24ubWlub3IpLGUudGxzRGF0YS5wdXRJbnQxNihyLmZyYWdtZW50Lmxlbmd0aCgpKSxlLnRsc0RhdGEucHV0QnVmZmVyKGUucmVjb3Jkc1t0XS5mcmFnbWVudCl9cmV0dXJuIGUucmVjb3Jkcz1bXSxlLnRsc0RhdGFSZWFkeShlKX07dmFyIGo9ZnVuY3Rpb24oZSl7c3dpdGNoKGUpe2Nhc2UhMDpyZXR1cm4hMDtjYXNlIGEucGtpLmNlcnRpZmljYXRlRXJyb3IuYmFkX2NlcnRpZmljYXRlOnJldHVybiB1LkFsZXJ0LkRlc2NyaXB0aW9uLmJhZF9jZXJ0aWZpY2F0ZTtjYXNlIGEucGtpLmNlcnRpZmljYXRlRXJyb3IudW5zdXBwb3J0ZWRfY2VydGlmaWNhdGU6cmV0dXJuIHUuQWxlcnQuRGVzY3JpcHRpb24udW5zdXBwb3J0ZWRfY2VydGlmaWNhdGU7Y2FzZSBhLnBraS5jZXJ0aWZpY2F0ZUVycm9yLmNlcnRpZmljYXRlX3Jldm9rZWQ6cmV0dXJuIHUuQWxlcnQuRGVzY3JpcHRpb24uY2VydGlmaWNhdGVfcmV2b2tlZDtjYXNlIGEucGtpLmNlcnRpZmljYXRlRXJyb3IuY2VydGlmaWNhdGVfZXhwaXJlZDpyZXR1cm4gdS5BbGVydC5EZXNjcmlwdGlvbi5jZXJ0aWZpY2F0ZV9leHBpcmVkO2Nhc2UgYS5wa2kuY2VydGlmaWNhdGVFcnJvci5jZXJ0aWZpY2F0ZV91bmtub3duOnJldHVybiB1LkFsZXJ0LkRlc2NyaXB0aW9uLmNlcnRpZmljYXRlX3Vua25vd247Y2FzZSBhLnBraS5jZXJ0aWZpY2F0ZUVycm9yLnVua25vd25fY2E6cmV0dXJuIHUuQWxlcnQuRGVzY3JpcHRpb24udW5rbm93bl9jYTtkZWZhdWx0OnJldHVybiB1LkFsZXJ0LkRlc2NyaXB0aW9uLmJhZF9jZXJ0aWZpY2F0ZX19O2Zvcih2YXIgcSBpbiB1LnZlcmlmeUNlcnRpZmljYXRlQ2hhaW49ZnVuY3Rpb24oZSx0KXt0cnl7dmFyIHI9e307Zm9yKHZhciBuIGluIGUudmVyaWZ5T3B0aW9ucylyW25dPWUudmVyaWZ5T3B0aW9uc1tuXTtyLnZlcmlmeT1mdW5jdGlvbih0LHIsbil7aih0KTt2YXIgaT1lLnZlcmlmeShlLHQscixuKTtpZighMCE9PWkpe2lmKCJvYmplY3QiPT10eXBlb2YgaSYmIWEudXRpbC5pc0FycmF5KGkpKXt2YXIgcz1uZXcgRXJyb3IoIlRoZSBhcHBsaWNhdGlvbiByZWplY3RlZCB0aGUgY2VydGlmaWNhdGUuIik7dGhyb3cgcy5zZW5kPSEwLHMuYWxlcnQ9e2xldmVsOnUuQWxlcnQuTGV2ZWwuZmF0YWwsZGVzY3JpcHRpb246dS5BbGVydC5EZXNjcmlwdGlvbi5iYWRfY2VydGlmaWNhdGV9LGkubWVzc2FnZSYmKHMubWVzc2FnZT1pLm1lc3NhZ2UpLGkuYWxlcnQmJihzLmFsZXJ0LmRlc2NyaXB0aW9uPWkuYWxlcnQpLHN9aSE9PXQmJihpPWZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlITA6cmV0dXJuITA7Y2FzZSB1LkFsZXJ0LkRlc2NyaXB0aW9uLmJhZF9jZXJ0aWZpY2F0ZTpyZXR1cm4gYS5wa2kuY2VydGlmaWNhdGVFcnJvci5iYWRfY2VydGlmaWNhdGU7Y2FzZSB1LkFsZXJ0LkRlc2NyaXB0aW9uLnVuc3VwcG9ydGVkX2NlcnRpZmljYXRlOnJldHVybiBhLnBraS5jZXJ0aWZpY2F0ZUVycm9yLnVuc3VwcG9ydGVkX2NlcnRpZmljYXRlO2Nhc2UgdS5BbGVydC5EZXNjcmlwdGlvbi5jZXJ0aWZpY2F0ZV9yZXZva2VkOnJldHVybiBhLnBraS5jZXJ0aWZpY2F0ZUVycm9yLmNlcnRpZmljYXRlX3Jldm9rZWQ7Y2FzZSB1LkFsZXJ0LkRlc2NyaXB0aW9uLmNlcnRpZmljYXRlX2V4cGlyZWQ6cmV0dXJuIGEucGtpLmNlcnRpZmljYXRlRXJyb3IuY2VydGlmaWNhdGVfZXhwaXJlZDtjYXNlIHUuQWxlcnQuRGVzY3JpcHRpb24uY2VydGlmaWNhdGVfdW5rbm93bjpyZXR1cm4gYS5wa2kuY2VydGlmaWNhdGVFcnJvci5jZXJ0aWZpY2F0ZV91bmtub3duO2Nhc2UgdS5BbGVydC5EZXNjcmlwdGlvbi51bmtub3duX2NhOnJldHVybiBhLnBraS5jZXJ0aWZpY2F0ZUVycm9yLnVua25vd25fY2E7ZGVmYXVsdDpyZXR1cm4gYS5wa2kuY2VydGlmaWNhdGVFcnJvci5iYWRfY2VydGlmaWNhdGV9fShpKSl9cmV0dXJuIGl9LGEucGtpLnZlcmlmeUNlcnRpZmljYXRlQ2hhaW4oZS5jYVN0b3JlLHQscil9Y2F0Y2godCl7dmFyIGk9dDsoIm9iamVjdCIhPXR5cGVvZiBpfHxhLnV0aWwuaXNBcnJheShpKSkmJihpPXtzZW5kOiEwLGFsZXJ0OntsZXZlbDp1LkFsZXJ0LkxldmVsLmZhdGFsLGRlc2NyaXB0aW9uOmoodCl9fSksInNlbmQiaW4gaXx8KGkuc2VuZD0hMCksImFsZXJ0ImluIGl8fChpLmFsZXJ0PXtsZXZlbDp1LkFsZXJ0LkxldmVsLmZhdGFsLGRlc2NyaXB0aW9uOmooaS5lcnJvcil9KSxlLmVycm9yKGUsaSl9cmV0dXJuIWUuZmFpbH0sdS5jcmVhdGVTZXNzaW9uQ2FjaGU9ZnVuY3Rpb24oZSx0KXt2YXIgcj1udWxsO2lmKGUmJmUuZ2V0U2Vzc2lvbiYmZS5zZXRTZXNzaW9uJiZlLm9yZGVyKXI9ZTtlbHNle2Zvcih2YXIgbiBpbihyPXt9KS5jYWNoZT1lfHx7fSxyLmNhcGFjaXR5PU1hdGgubWF4KHR8fDEwMCwxKSxyLm9yZGVyPVtdLGUpci5vcmRlci5sZW5ndGg8PXQ/ci5vcmRlci5wdXNoKG4pOmRlbGV0ZSBlW25dO3IuZ2V0U2Vzc2lvbj1mdW5jdGlvbihlKXt2YXIgdD1udWxsLG49bnVsbDtpZihlP249YS51dGlsLmJ5dGVzVG9IZXgoZSk6ci5vcmRlci5sZW5ndGg+MCYmKG49ci5vcmRlclswXSksbnVsbCE9PW4mJm4gaW4gci5jYWNoZSlmb3IodmFyIGkgaW4gdD1yLmNhY2hlW25dLGRlbGV0ZSByLmNhY2hlW25dLHIub3JkZXIpaWYoci5vcmRlcltpXT09PW4pe3Iub3JkZXIuc3BsaWNlKGksMSk7YnJlYWt9cmV0dXJuIHR9LHIuc2V0U2Vzc2lvbj1mdW5jdGlvbihlLHQpe2lmKHIub3JkZXIubGVuZ3RoPT09ci5jYXBhY2l0eSl7dmFyIG49ci5vcmRlci5zaGlmdCgpO2RlbGV0ZSByLmNhY2hlW25dfW49YS51dGlsLmJ5dGVzVG9IZXgoZSk7ci5vcmRlci5wdXNoKG4pLHIuY2FjaGVbbl09dH19cmV0dXJuIHJ9LHUuY3JlYXRlQ29ubmVjdGlvbj1mdW5jdGlvbihlKXt2YXIgdD1udWxsO3Q9ZS5jYVN0b3JlP2EudXRpbC5pc0FycmF5KGUuY2FTdG9yZSk/YS5wa2kuY3JlYXRlQ2FTdG9yZShlLmNhU3RvcmUpOmUuY2FTdG9yZTphLnBraS5jcmVhdGVDYVN0b3JlKCk7dmFyIHI9ZS5jaXBoZXJTdWl0ZXN8fG51bGw7aWYobnVsbD09PXIpZm9yKHZhciBuIGluIHI9W10sdS5DaXBoZXJTdWl0ZXMpci5wdXNoKHUuQ2lwaGVyU3VpdGVzW25dKTt2YXIgaT1lLnNlcnZlcj91LkNvbm5lY3Rpb25FbmQuc2VydmVyOnUuQ29ubmVjdGlvbkVuZC5jbGllbnQscz1lLnNlc3Npb25DYWNoZT91LmNyZWF0ZVNlc3Npb25DYWNoZShlLnNlc3Npb25DYWNoZSk6bnVsbCxvPXt2ZXJzaW9uOnttYWpvcjp1LlZlcnNpb24ubWFqb3IsbWlub3I6dS5WZXJzaW9uLm1pbm9yfSxlbnRpdHk6aSxzZXNzaW9uSWQ6ZS5zZXNzaW9uSWQsY2FTdG9yZTp0LHNlc3Npb25DYWNoZTpzLGNpcGhlclN1aXRlczpyLGNvbm5lY3RlZDplLmNvbm5lY3RlZCx2aXJ0dWFsSG9zdDplLnZpcnR1YWxIb3N0fHxudWxsLHZlcmlmeUNsaWVudDplLnZlcmlmeUNsaWVudHx8ITEsdmVyaWZ5OmUudmVyaWZ5fHxmdW5jdGlvbihlLHQscixhKXtyZXR1cm4gdH0sdmVyaWZ5T3B0aW9uczplLnZlcmlmeU9wdGlvbnN8fHt9LGdldENlcnRpZmljYXRlOmUuZ2V0Q2VydGlmaWNhdGV8fG51bGwsZ2V0UHJpdmF0ZUtleTplLmdldFByaXZhdGVLZXl8fG51bGwsZ2V0U2lnbmF0dXJlOmUuZ2V0U2lnbmF0dXJlfHxudWxsLGlucHV0OmEudXRpbC5jcmVhdGVCdWZmZXIoKSx0bHNEYXRhOmEudXRpbC5jcmVhdGVCdWZmZXIoKSxkYXRhOmEudXRpbC5jcmVhdGVCdWZmZXIoKSx0bHNEYXRhUmVhZHk6ZS50bHNEYXRhUmVhZHksZGF0YVJlYWR5OmUuZGF0YVJlYWR5LGhlYXJ0YmVhdFJlY2VpdmVkOmUuaGVhcnRiZWF0UmVjZWl2ZWQsY2xvc2VkOmUuY2xvc2VkLGVycm9yOmZ1bmN0aW9uKHQscil7ci5vcmlnaW49ci5vcmlnaW58fCh0LmVudGl0eT09PXUuQ29ubmVjdGlvbkVuZC5jbGllbnQ/ImNsaWVudCI6InNlcnZlciIpLHIuc2VuZCYmKHUucXVldWUodCx1LmNyZWF0ZUFsZXJ0KHQsci5hbGVydCkpLHUuZmx1c2godCkpO3ZhciBhPSExIT09ci5mYXRhbDthJiYodC5mYWlsPSEwKSxlLmVycm9yKHQsciksYSYmdC5jbG9zZSghMSl9LGRlZmxhdGU6ZS5kZWZsYXRlfHxudWxsLGluZmxhdGU6ZS5pbmZsYXRlfHxudWxsLHJlc2V0OmZ1bmN0aW9uKGUpe28udmVyc2lvbj17bWFqb3I6dS5WZXJzaW9uLm1ham9yLG1pbm9yOnUuVmVyc2lvbi5taW5vcn0sby5yZWNvcmQ9bnVsbCxvLnNlc3Npb249bnVsbCxvLnBlZXJDZXJ0aWZpY2F0ZT1udWxsLG8uc3RhdGU9e3BlbmRpbmc6bnVsbCxjdXJyZW50Om51bGx9LG8uZXhwZWN0PShvLmVudGl0eSx1LkNvbm5lY3Rpb25FbmQuY2xpZW50LDApLG8uZnJhZ21lbnRlZD1udWxsLG8ucmVjb3Jkcz1bXSxvLm9wZW49ITEsby5oYW5kc2hha2VzPTAsby5oYW5kc2hha2luZz0hMSxvLmlzQ29ubmVjdGVkPSExLG8uZmFpbD0hKGV8fHZvaWQgMD09PWUpLG8uaW5wdXQuY2xlYXIoKSxvLnRsc0RhdGEuY2xlYXIoKSxvLmRhdGEuY2xlYXIoKSxvLnN0YXRlLmN1cnJlbnQ9dS5jcmVhdGVDb25uZWN0aW9uU3RhdGUobyl9fTtvLnJlc2V0KCk7cmV0dXJuIG8uaGFuZHNoYWtlPWZ1bmN0aW9uKGUpe2lmKG8uZW50aXR5IT09dS5Db25uZWN0aW9uRW5kLmNsaWVudClvLmVycm9yKG8se21lc3NhZ2U6IkNhbm5vdCBpbml0aWF0ZSBoYW5kc2hha2UgYXMgYSBzZXJ2ZXIuIixmYXRhbDohMX0pO2Vsc2UgaWYoby5oYW5kc2hha2luZylvLmVycm9yKG8se21lc3NhZ2U6IkhhbmRzaGFrZSBhbHJlYWR5IGluIHByb2dyZXNzLiIsZmF0YWw6ITF9KTtlbHNle28uZmFpbCYmIW8ub3BlbiYmMD09PW8uaGFuZHNoYWtlcyYmKG8uZmFpbD0hMSksby5oYW5kc2hha2luZz0hMDt2YXIgdD1udWxsOyhlPWV8fCIiKS5sZW5ndGg+MCYmKG8uc2Vzc2lvbkNhY2hlJiYodD1vLnNlc3Npb25DYWNoZS5nZXRTZXNzaW9uKGUpKSxudWxsPT09dCYmKGU9IiIpKSwwPT09ZS5sZW5ndGgmJm8uc2Vzc2lvbkNhY2hlJiZudWxsIT09KHQ9by5zZXNzaW9uQ2FjaGUuZ2V0U2Vzc2lvbigpKSYmKGU9dC5pZCksby5zZXNzaW9uPXtpZDplLHZlcnNpb246bnVsbCxjaXBoZXJTdWl0ZTpudWxsLGNvbXByZXNzaW9uTWV0aG9kOm51bGwsc2VydmVyQ2VydGlmaWNhdGU6bnVsbCxjZXJ0aWZpY2F0ZVJlcXVlc3Q6bnVsbCxjbGllbnRDZXJ0aWZpY2F0ZTpudWxsLHNwOnt9LG1kNTphLm1kLm1kNS5jcmVhdGUoKSxzaGExOmEubWQuc2hhMS5jcmVhdGUoKX0sdCYmKG8udmVyc2lvbj10LnZlcnNpb24sby5zZXNzaW9uLnNwPXQuc3ApLG8uc2Vzc2lvbi5zcC5jbGllbnRfcmFuZG9tPXUuY3JlYXRlUmFuZG9tKCkuZ2V0Qnl0ZXMoKSxvLm9wZW49ITAsdS5xdWV1ZShvLHUuY3JlYXRlUmVjb3JkKG8se3R5cGU6dS5Db250ZW50VHlwZS5oYW5kc2hha2UsZGF0YTp1LmNyZWF0ZUNsaWVudEhlbGxvKG8pfSkpLHUuZmx1c2gobyl9fSxvLnByb2Nlc3M9ZnVuY3Rpb24oZSl7dmFyIHQ9MDtyZXR1cm4gZSYmby5pbnB1dC5wdXRCeXRlcyhlKSxvLmZhaWx8fChudWxsIT09by5yZWNvcmQmJm8ucmVjb3JkLnJlYWR5JiZvLnJlY29yZC5mcmFnbWVudC5pc0VtcHR5KCkmJihvLnJlY29yZD1udWxsKSxudWxsPT09by5yZWNvcmQmJih0PWZ1bmN0aW9uKGUpe3ZhciB0PTAscj1lLmlucHV0LG49ci5sZW5ndGgoKTtpZihuPDUpdD01LW47ZWxzZXtlLnJlY29yZD17dHlwZTpyLmdldEJ5dGUoKSx2ZXJzaW9uOnttYWpvcjpyLmdldEJ5dGUoKSxtaW5vcjpyLmdldEJ5dGUoKX0sbGVuZ3RoOnIuZ2V0SW50MTYoKSxmcmFnbWVudDphLnV0aWwuY3JlYXRlQnVmZmVyKCkscmVhZHk6ITF9O3ZhciBpPWUucmVjb3JkLnZlcnNpb24ubWFqb3I9PT1lLnZlcnNpb24ubWFqb3I7aSYmZS5zZXNzaW9uJiZlLnNlc3Npb24udmVyc2lvbiYmKGk9ZS5yZWNvcmQudmVyc2lvbi5taW5vcj09PWUudmVyc2lvbi5taW5vciksaXx8ZS5lcnJvcihlLHttZXNzYWdlOiJJbmNvbXBhdGlibGUgVExTIHZlcnNpb24uIixzZW5kOiEwLGFsZXJ0OntsZXZlbDp1LkFsZXJ0LkxldmVsLmZhdGFsLGRlc2NyaXB0aW9uOnUuQWxlcnQuRGVzY3JpcHRpb24ucHJvdG9jb2xfdmVyc2lvbn19KX1yZXR1cm4gdH0obykpLG8uZmFpbHx8bnVsbD09PW8ucmVjb3JkfHxvLnJlY29yZC5yZWFkeXx8KHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9MCxyPWUuaW5wdXQsYT1yLmxlbmd0aCgpO2E8ZS5yZWNvcmQubGVuZ3RoP3Q9ZS5yZWNvcmQubGVuZ3RoLWE6KGUucmVjb3JkLmZyYWdtZW50LnB1dEJ5dGVzKHIuZ2V0Qnl0ZXMoZS5yZWNvcmQubGVuZ3RoKSksci5jb21wYWN0KCksZS5zdGF0ZS5jdXJyZW50LnJlYWQudXBkYXRlKGUsZS5yZWNvcmQpJiYobnVsbCE9PWUuZnJhZ21lbnRlZCYmKGUuZnJhZ21lbnRlZC50eXBlPT09ZS5yZWNvcmQudHlwZT8oZS5mcmFnbWVudGVkLmZyYWdtZW50LnB1dEJ1ZmZlcihlLnJlY29yZC5mcmFnbWVudCksZS5yZWNvcmQ9ZS5mcmFnbWVudGVkKTplLmVycm9yKGUse21lc3NhZ2U6IkludmFsaWQgZnJhZ21lbnRlZCByZWNvcmQuIixzZW5kOiEwLGFsZXJ0OntsZXZlbDp1LkFsZXJ0LkxldmVsLmZhdGFsLGRlc2NyaXB0aW9uOnUuQWxlcnQuRGVzY3JpcHRpb24udW5leHBlY3RlZF9tZXNzYWdlfX0pKSxlLnJlY29yZC5yZWFkeT0hMCkpO3JldHVybiB0fShvKSksIW8uZmFpbCYmbnVsbCE9PW8ucmVjb3JkJiZvLnJlY29yZC5yZWFkeSYmZnVuY3Rpb24oZSx0KXt2YXIgcj10LnR5cGUtdS5Db250ZW50VHlwZS5jaGFuZ2VfY2lwaGVyX3NwZWMsYT1SW2UuZW50aXR5XVtlLmV4cGVjdF07ciBpbiBhP2Fbcl0oZSx0KTp1LmhhbmRsZVVuZXhwZWN0ZWQoZSx0KX0obyxvLnJlY29yZCkpLHR9LG8ucHJlcGFyZT1mdW5jdGlvbihlKXtyZXR1cm4gdS5xdWV1ZShvLHUuY3JlYXRlUmVjb3JkKG8se3R5cGU6dS5Db250ZW50VHlwZS5hcHBsaWNhdGlvbl9kYXRhLGRhdGE6YS51dGlsLmNyZWF0ZUJ1ZmZlcihlKX0pKSx1LmZsdXNoKG8pfSxvLnByZXBhcmVIZWFydGJlYXRSZXF1ZXN0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUgaW5zdGFuY2VvZiBhLnV0aWwuQnl0ZUJ1ZmZlciYmKGU9ZS5ieXRlcygpKSx2b2lkIDA9PT10JiYodD1lLmxlbmd0aCksby5leHBlY3RlZEhlYXJ0YmVhdFBheWxvYWQ9ZSx1LnF1ZXVlKG8sdS5jcmVhdGVSZWNvcmQobyx7dHlwZTp1LkNvbnRlbnRUeXBlLmhlYXJ0YmVhdCxkYXRhOnUuY3JlYXRlSGVhcnRiZWF0KHUuSGVhcnRiZWF0TWVzc2FnZVR5cGUuaGVhcnRiZWF0X3JlcXVlc3QsZSx0KX0pKSx1LmZsdXNoKG8pfSxvLmNsb3NlPWZ1bmN0aW9uKGUpe2lmKCFvLmZhaWwmJm8uc2Vzc2lvbkNhY2hlJiZvLnNlc3Npb24pe3ZhciB0PXtpZDpvLnNlc3Npb24uaWQsdmVyc2lvbjpvLnNlc3Npb24udmVyc2lvbixzcDpvLnNlc3Npb24uc3B9O3Quc3Aua2V5cz1udWxsLG8uc2Vzc2lvbkNhY2hlLnNldFNlc3Npb24odC5pZCx0KX1vLm9wZW4mJihvLm9wZW49ITEsby5pbnB1dC5jbGVhcigpLChvLmlzQ29ubmVjdGVkfHxvLmhhbmRzaGFraW5nKSYmKG8uaXNDb25uZWN0ZWQ9by5oYW5kc2hha2luZz0hMSx1LnF1ZXVlKG8sdS5jcmVhdGVBbGVydChvLHtsZXZlbDp1LkFsZXJ0LkxldmVsLndhcm5pbmcsZGVzY3JpcHRpb246dS5BbGVydC5EZXNjcmlwdGlvbi5jbG9zZV9ub3RpZnl9KSksdS5mbHVzaChvKSksby5jbG9zZWQobykpLG8ucmVzZXQoZSl9LG99LGUuZXhwb3J0cz1hLnRscz1hLnRsc3x8e30sdSkiZnVuY3Rpb24iIT10eXBlb2YgdVtxXSYmKGEudGxzW3FdPXVbcV0pO2EudGxzLnByZl90bHMxPW4sYS50bHMuaG1hY19zaGExPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1hLmhtYWMuY3JlYXRlKCk7bi5zdGFydCgiU0hBMSIsZSk7dmFyIGk9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO3JldHVybiBpLnB1dEludDMyKHRbMF0pLGkucHV0SW50MzIodFsxXSksaS5wdXRCeXRlKHIudHlwZSksaS5wdXRCeXRlKHIudmVyc2lvbi5tYWpvciksaS5wdXRCeXRlKHIudmVyc2lvbi5taW5vciksaS5wdXRJbnQxNihyLmxlbmd0aCksaS5wdXRCeXRlcyhyLmZyYWdtZW50LmJ5dGVzKCkpLG4udXBkYXRlKGkuZ2V0Qnl0ZXMoKSksbi5kaWdlc3QoKS5nZXRCeXRlcygpfSxhLnRscy5jcmVhdGVTZXNzaW9uQ2FjaGU9dS5jcmVhdGVTZXNzaW9uQ2FjaGUsYS50bHMuY3JlYXRlQ29ubmVjdGlvbj11LmNyZWF0ZUNvbm5lY3Rpb259LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO3IoMykscig2KSxyKDIyKSxyKDcpLHIoMTUpLHIoMjgpLHIoMTgpLHIoMTEpLHIoMSkscigxNyk7dmFyIG49YS5hc24xLGk9ZS5leHBvcnRzPWEucGtpPWEucGtpfHx7fTtpLnBlbVRvRGVyPWZ1bmN0aW9uKGUpe3ZhciB0PWEucGVtLmRlY29kZShlKVswXTtpZih0LnByb2NUeXBlJiYiRU5DUllQVEVEIj09PXQucHJvY1R5cGUudHlwZSl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBjb252ZXJ0IFBFTSB0byBERVI7IFBFTSBpcyBlbmNyeXB0ZWQuIik7cmV0dXJuIGEudXRpbC5jcmVhdGVCdWZmZXIodC5ib2R5KX0saS5wcml2YXRlS2V5RnJvbVBlbT1mdW5jdGlvbihlKXt2YXIgdD1hLnBlbS5kZWNvZGUoZSlbMF07aWYoIlBSSVZBVEUgS0VZIiE9PXQudHlwZSYmIlJTQSBQUklWQVRFIEtFWSIhPT10LnR5cGUpe3ZhciByPW5ldyBFcnJvcignQ291bGQgbm90IGNvbnZlcnQgcHJpdmF0ZSBrZXkgZnJvbSBQRU07IFBFTSBoZWFkZXIgdHlwZSBpcyBub3QgIlBSSVZBVEUgS0VZIiBvciAiUlNBIFBSSVZBVEUgS0VZIi4nKTt0aHJvdyByLmhlYWRlclR5cGU9dC50eXBlLHJ9aWYodC5wcm9jVHlwZSYmIkVOQ1JZUFRFRCI9PT10LnByb2NUeXBlLnR5cGUpdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgY29udmVydCBwcml2YXRlIGtleSBmcm9tIFBFTTsgUEVNIGlzIGVuY3J5cHRlZC4iKTt2YXIgcz1uLmZyb21EZXIodC5ib2R5KTtyZXR1cm4gaS5wcml2YXRlS2V5RnJvbUFzbjEocyl9LGkucHJpdmF0ZUtleVRvUGVtPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e3R5cGU6IlJTQSBQUklWQVRFIEtFWSIsYm9keTpuLnRvRGVyKGkucHJpdmF0ZUtleVRvQXNuMShlKSkuZ2V0Qnl0ZXMoKX07cmV0dXJuIGEucGVtLmVuY29kZShyLHttYXhsaW5lOnR9KX0saS5wcml2YXRlS2V5SW5mb1RvUGVtPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e3R5cGU6IlBSSVZBVEUgS0VZIixib2R5Om4udG9EZXIoZSkuZ2V0Qnl0ZXMoKX07cmV0dXJuIGEucGVtLmVuY29kZShyLHttYXhsaW5lOnR9KX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO2lmKHIoNSkscigzKSxyKDEwKSxyKDQpLHIoNikscigxNSkscig3KSxyKDIpLHIoMjUpLHIoMTEpLHIoMSksdm9pZCAwPT09bil2YXIgbj1hLmpzYm4uQmlnSW50ZWdlcjt2YXIgaT1hLmFzbjEscz1hLnBraT1hLnBraXx8e307ZS5leHBvcnRzPXMucGJlPWEucGJlPWEucGJlfHx7fTt2YXIgbz1zLm9pZHMsYz17bmFtZToiRW5jcnlwdGVkUHJpdmF0ZUtleUluZm8iLHRhZ0NsYXNzOmkuQ2xhc3MuVU5JVkVSU0FMLHR5cGU6aS5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiRW5jcnlwdGVkUHJpdmF0ZUtleUluZm8uZW5jcnlwdGlvbkFsZ29yaXRobSIsdGFnQ2xhc3M6aS5DbGFzcy5VTklWRVJTQUwsdHlwZTppLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsdmFsdWU6W3tuYW1lOiJBbGdvcml0aG1JZGVudGlmaWVyLmFsZ29yaXRobSIsdGFnQ2xhc3M6aS5DbGFzcy5VTklWRVJTQUwsdHlwZTppLlR5cGUuT0lELGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6ImVuY3J5cHRpb25PaWQifSx7bmFtZToiQWxnb3JpdGhtSWRlbnRpZmllci5wYXJhbWV0ZXJzIix0YWdDbGFzczppLkNsYXNzLlVOSVZFUlNBTCx0eXBlOmkuVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCxjYXB0dXJlQXNuMToiZW5jcnlwdGlvblBhcmFtcyJ9XX0se25hbWU6IkVuY3J5cHRlZFByaXZhdGVLZXlJbmZvLmVuY3J5cHRlZERhdGEiLHRhZ0NsYXNzOmkuQ2xhc3MuVU5JVkVSU0FMLHR5cGU6aS5UeXBlLk9DVEVUU1RSSU5HLGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6ImVuY3J5cHRlZERhdGEifV19LHU9e25hbWU6IlBCRVMyQWxnb3JpdGhtcyIsdGFnQ2xhc3M6aS5DbGFzcy5VTklWRVJTQUwsdHlwZTppLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsdmFsdWU6W3tuYW1lOiJQQkVTMkFsZ29yaXRobXMua2V5RGVyaXZhdGlvbkZ1bmMiLHRhZ0NsYXNzOmkuQ2xhc3MuVU5JVkVSU0FMLHR5cGU6aS5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiUEJFUzJBbGdvcml0aG1zLmtleURlcml2YXRpb25GdW5jLm9pZCIsdGFnQ2xhc3M6aS5DbGFzcy5VTklWRVJTQUwsdHlwZTppLlR5cGUuT0lELGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6ImtkZk9pZCJ9LHtuYW1lOiJQQkVTMkFsZ29yaXRobXMucGFyYW1zIix0YWdDbGFzczppLkNsYXNzLlVOSVZFUlNBTCx0eXBlOmkuVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCx2YWx1ZTpbe25hbWU6IlBCRVMyQWxnb3JpdGhtcy5wYXJhbXMuc2FsdCIsdGFnQ2xhc3M6aS5DbGFzcy5VTklWRVJTQUwsdHlwZTppLlR5cGUuT0NURVRTVFJJTkcsY29uc3RydWN0ZWQ6ITEsY2FwdHVyZToia2RmU2FsdCJ9LHtuYW1lOiJQQkVTMkFsZ29yaXRobXMucGFyYW1zLml0ZXJhdGlvbkNvdW50Iix0YWdDbGFzczppLkNsYXNzLlVOSVZFUlNBTCx0eXBlOmkuVHlwZS5JTlRFR0VSLGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6ImtkZkl0ZXJhdGlvbkNvdW50In0se25hbWU6IlBCRVMyQWxnb3JpdGhtcy5wYXJhbXMua2V5TGVuZ3RoIix0YWdDbGFzczppLkNsYXNzLlVOSVZFUlNBTCx0eXBlOmkuVHlwZS5JTlRFR0VSLGNvbnN0cnVjdGVkOiExLG9wdGlvbmFsOiEwLGNhcHR1cmU6ImtleUxlbmd0aCJ9LHtuYW1lOiJQQkVTMkFsZ29yaXRobXMucGFyYW1zLnByZiIsdGFnQ2xhc3M6aS5DbGFzcy5VTklWRVJTQUwsdHlwZTppLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsb3B0aW9uYWw6ITAsdmFsdWU6W3tuYW1lOiJQQkVTMkFsZ29yaXRobXMucGFyYW1zLnByZi5hbGdvcml0aG0iLHRhZ0NsYXNzOmkuQ2xhc3MuVU5JVkVSU0FMLHR5cGU6aS5UeXBlLk9JRCxjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJwcmZPaWQifV19XX1dfSx7bmFtZToiUEJFUzJBbGdvcml0aG1zLmVuY3J5cHRpb25TY2hlbWUiLHRhZ0NsYXNzOmkuQ2xhc3MuVU5JVkVSU0FMLHR5cGU6aS5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiUEJFUzJBbGdvcml0aG1zLmVuY3J5cHRpb25TY2hlbWUub2lkIix0YWdDbGFzczppLkNsYXNzLlVOSVZFUlNBTCx0eXBlOmkuVHlwZS5PSUQsY29uc3RydWN0ZWQ6ITEsY2FwdHVyZToiZW5jT2lkIn0se25hbWU6IlBCRVMyQWxnb3JpdGhtcy5lbmNyeXB0aW9uU2NoZW1lLml2Iix0YWdDbGFzczppLkNsYXNzLlVOSVZFUlNBTCx0eXBlOmkuVHlwZS5PQ1RFVFNUUklORyxjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJlbmNJdiJ9XX1dfSxsPXtuYW1lOiJwa2NzLTEyUGJlUGFyYW1zIix0YWdDbGFzczppLkNsYXNzLlVOSVZFUlNBTCx0eXBlOmkuVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCx2YWx1ZTpbe25hbWU6InBrY3MtMTJQYmVQYXJhbXMuc2FsdCIsdGFnQ2xhc3M6aS5DbGFzcy5VTklWRVJTQUwsdHlwZTppLlR5cGUuT0NURVRTVFJJTkcsY29uc3RydWN0ZWQ6ITEsY2FwdHVyZToic2FsdCJ9LHtuYW1lOiJwa2NzLTEyUGJlUGFyYW1zLml0ZXJhdGlvbnMiLHRhZ0NsYXNzOmkuQ2xhc3MuVU5JVkVSU0FMLHR5cGU6aS5UeXBlLklOVEVHRVIsY29uc3RydWN0ZWQ6ITEsY2FwdHVyZToiaXRlcmF0aW9ucyJ9XX07ZnVuY3Rpb24gcChlLHQpe3JldHVybiBlLnN0YXJ0KCkudXBkYXRlKHQpLmRpZ2VzdCgpLmdldEJ5dGVzKCl9ZnVuY3Rpb24gZihlKXt2YXIgdDtpZihlKXtpZighKHQ9cy5vaWRzW2kuZGVyVG9PaWQoZSldKSl7dmFyIHI9bmV3IEVycm9yKCJVbnN1cHBvcnRlZCBQUkYgT0lELiIpO3Rocm93IHIub2lkPWUsci5zdXBwb3J0ZWQ9WyJobWFjV2l0aFNIQTEiLCJobWFjV2l0aFNIQTIyNCIsImhtYWNXaXRoU0hBMjU2IiwiaG1hY1dpdGhTSEEzODQiLCJobWFjV2l0aFNIQTUxMiJdLHJ9fWVsc2UgdD0iaG1hY1dpdGhTSEExIjtyZXR1cm4gaCh0KX1mdW5jdGlvbiBoKGUpe3ZhciB0PWEubWQ7c3dpdGNoKGUpe2Nhc2UiaG1hY1dpdGhTSEEyMjQiOnQ9YS5tZC5zaGE1MTI7Y2FzZSJobWFjV2l0aFNIQTEiOmNhc2UiaG1hY1dpdGhTSEEyNTYiOmNhc2UiaG1hY1dpdGhTSEEzODQiOmNhc2UiaG1hY1dpdGhTSEE1MTIiOmU9ZS5zdWJzdHIoOCkudG9Mb3dlckNhc2UoKTticmVhaztkZWZhdWx0OnZhciByPW5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgUFJGIGFsZ29yaXRobS4iKTt0aHJvdyByLmFsZ29yaXRobT1lLHIuc3VwcG9ydGVkPVsiaG1hY1dpdGhTSEExIiwiaG1hY1dpdGhTSEEyMjQiLCJobWFjV2l0aFNIQTI1NiIsImhtYWNXaXRoU0hBMzg0IiwiaG1hY1dpdGhTSEE1MTIiXSxyfWlmKCF0fHwhKGUgaW4gdCkpdGhyb3cgbmV3IEVycm9yKCJVbmtub3duIGhhc2ggYWxnb3JpdGhtOiAiK2UpO3JldHVybiB0W2VdLmNyZWF0ZSgpfXMuZW5jcnlwdFByaXZhdGVLZXlJbmZvPWZ1bmN0aW9uKGUsdCxyKXsocj1yfHx7fSkuc2FsdFNpemU9ci5zYWx0U2l6ZXx8OCxyLmNvdW50PXIuY291bnR8fDIwNDgsci5hbGdvcml0aG09ci5hbGdvcml0aG18fCJhZXMxMjgiLHIucHJmQWxnb3JpdGhtPXIucHJmQWxnb3JpdGhtfHwic2hhMSI7dmFyIG4sYyx1LGw9YS5yYW5kb20uZ2V0Qnl0ZXNTeW5jKHIuc2FsdFNpemUpLHA9ci5jb3VudCxmPWkuaW50ZWdlclRvRGVyKHApO2lmKDA9PT1yLmFsZ29yaXRobS5pbmRleE9mKCJhZXMiKXx8ImRlcyI9PT1yLmFsZ29yaXRobSl7dmFyIGQseSxnO3N3aXRjaChyLmFsZ29yaXRobSl7Y2FzZSJhZXMxMjgiOm49MTYsZD0xNix5PW9bImFlczEyOC1DQkMiXSxnPWEuYWVzLmNyZWF0ZUVuY3J5cHRpb25DaXBoZXI7YnJlYWs7Y2FzZSJhZXMxOTIiOm49MjQsZD0xNix5PW9bImFlczE5Mi1DQkMiXSxnPWEuYWVzLmNyZWF0ZUVuY3J5cHRpb25DaXBoZXI7YnJlYWs7Y2FzZSJhZXMyNTYiOm49MzIsZD0xNix5PW9bImFlczI1Ni1DQkMiXSxnPWEuYWVzLmNyZWF0ZUVuY3J5cHRpb25DaXBoZXI7YnJlYWs7Y2FzZSJkZXMiOm49OCxkPTgseT1vLmRlc0NCQyxnPWEuZGVzLmNyZWF0ZUVuY3J5cHRpb25DaXBoZXI7YnJlYWs7ZGVmYXVsdDp0aHJvdyhUPW5ldyBFcnJvcigiQ2Fubm90IGVuY3J5cHQgcHJpdmF0ZSBrZXkuIFVua25vd24gZW5jcnlwdGlvbiBhbGdvcml0aG0uIikpLmFsZ29yaXRobT1yLmFsZ29yaXRobSxUfXZhciBtPSJobWFjV2l0aCIrci5wcmZBbGdvcml0aG0udG9VcHBlckNhc2UoKSx2PWgobSksQz1hLnBrY3M1LnBia2RmMih0LGwscCxuLHYpLEU9YS5yYW5kb20uZ2V0Qnl0ZXNTeW5jKGQpOyhJPWcoQykpLnN0YXJ0KEUpLEkudXBkYXRlKGkudG9EZXIoZSkpLEkuZmluaXNoKCksdT1JLm91dHB1dC5nZXRCeXRlcygpO3ZhciBTPWZ1bmN0aW9uKGUsdCxyLG4pe3ZhciBvPWkuY3JlYXRlKGkuQ2xhc3MuVU5JVkVSU0FMLGkuVHlwZS5TRVFVRU5DRSwhMCxbaS5jcmVhdGUoaS5DbGFzcy5VTklWRVJTQUwsaS5UeXBlLk9DVEVUU1RSSU5HLCExLGUpLGkuY3JlYXRlKGkuQ2xhc3MuVU5JVkVSU0FMLGkuVHlwZS5JTlRFR0VSLCExLHQuZ2V0Qnl0ZXMoKSldKTsiaG1hY1dpdGhTSEExIiE9PW4mJm8udmFsdWUucHVzaChpLmNyZWF0ZShpLkNsYXNzLlVOSVZFUlNBTCxpLlR5cGUuSU5URUdFUiwhMSxhLnV0aWwuaGV4VG9CeXRlcyhyLnRvU3RyaW5nKDE2KSkpLGkuY3JlYXRlKGkuQ2xhc3MuVU5JVkVSU0FMLGkuVHlwZS5TRVFVRU5DRSwhMCxbaS5jcmVhdGUoaS5DbGFzcy5VTklWRVJTQUwsaS5UeXBlLk9JRCwhMSxpLm9pZFRvRGVyKHMub2lkc1tuXSkuZ2V0Qnl0ZXMoKSksaS5jcmVhdGUoaS5DbGFzcy5VTklWRVJTQUwsaS5UeXBlLk5VTEwsITEsIiIpXSkpO3JldHVybiBvfShsLGYsbixtKTtjPWkuY3JlYXRlKGkuQ2xhc3MuVU5JVkVSU0FMLGkuVHlwZS5TRVFVRU5DRSwhMCxbaS5jcmVhdGUoaS5DbGFzcy5VTklWRVJTQUwsaS5UeXBlLk9JRCwhMSxpLm9pZFRvRGVyKG8ucGtjczVQQkVTMikuZ2V0Qnl0ZXMoKSksaS5jcmVhdGUoaS5DbGFzcy5VTklWRVJTQUwsaS5UeXBlLlNFUVVFTkNFLCEwLFtpLmNyZWF0ZShpLkNsYXNzLlVOSVZFUlNBTCxpLlR5cGUuU0VRVUVOQ0UsITAsW2kuY3JlYXRlKGkuQ2xhc3MuVU5JVkVSU0FMLGkuVHlwZS5PSUQsITEsaS5vaWRUb0RlcihvLnBrY3M1UEJLREYyKS5nZXRCeXRlcygpKSxTXSksaS5jcmVhdGUoaS5DbGFzcy5VTklWRVJTQUwsaS5UeXBlLlNFUVVFTkNFLCEwLFtpLmNyZWF0ZShpLkNsYXNzLlVOSVZFUlNBTCxpLlR5cGUuT0lELCExLGkub2lkVG9EZXIoeSkuZ2V0Qnl0ZXMoKSksaS5jcmVhdGUoaS5DbGFzcy5VTklWRVJTQUwsaS5UeXBlLk9DVEVUU1RSSU5HLCExLEUpXSldKV0pfWVsc2V7dmFyIFQ7aWYoIjNkZXMiIT09ci5hbGdvcml0aG0pdGhyb3coVD1uZXcgRXJyb3IoIkNhbm5vdCBlbmNyeXB0IHByaXZhdGUga2V5LiBVbmtub3duIGVuY3J5cHRpb24gYWxnb3JpdGhtLiIpKS5hbGdvcml0aG09ci5hbGdvcml0aG0sVDtuPTI0O3ZhciBJLGI9bmV3IGEudXRpbC5CeXRlQnVmZmVyKGwpO0M9cy5wYmUuZ2VuZXJhdGVQa2NzMTJLZXkodCxiLDEscCxuKSxFPXMucGJlLmdlbmVyYXRlUGtjczEyS2V5KHQsYiwyLHAsbik7KEk9YS5kZXMuY3JlYXRlRW5jcnlwdGlvbkNpcGhlcihDKSkuc3RhcnQoRSksSS51cGRhdGUoaS50b0RlcihlKSksSS5maW5pc2goKSx1PUkub3V0cHV0LmdldEJ5dGVzKCksYz1pLmNyZWF0ZShpLkNsYXNzLlVOSVZFUlNBTCxpLlR5cGUuU0VRVUVOQ0UsITAsW2kuY3JlYXRlKGkuQ2xhc3MuVU5JVkVSU0FMLGkuVHlwZS5PSUQsITEsaS5vaWRUb0RlcihvWyJwYmVXaXRoU0hBQW5kMy1LZXlUcmlwbGVERVMtQ0JDIl0pLmdldEJ5dGVzKCkpLGkuY3JlYXRlKGkuQ2xhc3MuVU5JVkVSU0FMLGkuVHlwZS5TRVFVRU5DRSwhMCxbaS5jcmVhdGUoaS5DbGFzcy5VTklWRVJTQUwsaS5UeXBlLk9DVEVUU1RSSU5HLCExLGwpLGkuY3JlYXRlKGkuQ2xhc3MuVU5JVkVSU0FMLGkuVHlwZS5JTlRFR0VSLCExLGYuZ2V0Qnl0ZXMoKSldKV0pfXJldHVybiBpLmNyZWF0ZShpLkNsYXNzLlVOSVZFUlNBTCxpLlR5cGUuU0VRVUVOQ0UsITAsW2MsaS5jcmVhdGUoaS5DbGFzcy5VTklWRVJTQUwsaS5UeXBlLk9DVEVUU1RSSU5HLCExLHUpXSl9LHMuZGVjcnlwdFByaXZhdGVLZXlJbmZvPWZ1bmN0aW9uKGUsdCl7dmFyIHI9bnVsbCxuPXt9LG89W107aWYoIWkudmFsaWRhdGUoZSxjLG4sbykpe3ZhciB1PW5ldyBFcnJvcigiQ2Fubm90IHJlYWQgZW5jcnlwdGVkIHByaXZhdGUga2V5LiBBU04uMSBvYmplY3QgaXMgbm90IGEgc3VwcG9ydGVkIEVuY3J5cHRlZFByaXZhdGVLZXlJbmZvLiIpO3Rocm93IHUuZXJyb3JzPW8sdX12YXIgbD1pLmRlclRvT2lkKG4uZW5jcnlwdGlvbk9pZCkscD1zLnBiZS5nZXRDaXBoZXIobCxuLmVuY3J5cHRpb25QYXJhbXMsdCksZj1hLnV0aWwuY3JlYXRlQnVmZmVyKG4uZW5jcnlwdGVkRGF0YSk7cmV0dXJuIHAudXBkYXRlKGYpLHAuZmluaXNoKCkmJihyPWkuZnJvbURlcihwLm91dHB1dCkpLHJ9LHMuZW5jcnlwdGVkUHJpdmF0ZUtleVRvUGVtPWZ1bmN0aW9uKGUsdCl7dmFyIHI9e3R5cGU6IkVOQ1JZUFRFRCBQUklWQVRFIEtFWSIsYm9keTppLnRvRGVyKGUpLmdldEJ5dGVzKCl9O3JldHVybiBhLnBlbS5lbmNvZGUocix7bWF4bGluZTp0fSl9LHMuZW5jcnlwdGVkUHJpdmF0ZUtleUZyb21QZW09ZnVuY3Rpb24oZSl7dmFyIHQ9YS5wZW0uZGVjb2RlKGUpWzBdO2lmKCJFTkNSWVBURUQgUFJJVkFURSBLRVkiIT09dC50eXBlKXt2YXIgcj1uZXcgRXJyb3IoJ0NvdWxkIG5vdCBjb252ZXJ0IGVuY3J5cHRlZCBwcml2YXRlIGtleSBmcm9tIFBFTTsgUEVNIGhlYWRlciB0eXBlIGlzICJFTkNSWVBURUQgUFJJVkFURSBLRVkiLicpO3Rocm93IHIuaGVhZGVyVHlwZT10LnR5cGUscn1pZih0LnByb2NUeXBlJiYiRU5DUllQVEVEIj09PXQucHJvY1R5cGUudHlwZSl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBjb252ZXJ0IGVuY3J5cHRlZCBwcml2YXRlIGtleSBmcm9tIFBFTTsgUEVNIGlzIGVuY3J5cHRlZC4iKTtyZXR1cm4gaS5mcm9tRGVyKHQuYm9keSl9LHMuZW5jcnlwdFJzYVByaXZhdGVLZXk9ZnVuY3Rpb24oZSx0LHIpe2lmKCEocj1yfHx7fSkubGVnYWN5KXt2YXIgbj1zLndyYXBSc2FQcml2YXRlS2V5KHMucHJpdmF0ZUtleVRvQXNuMShlKSk7cmV0dXJuIG49cy5lbmNyeXB0UHJpdmF0ZUtleUluZm8obix0LHIpLHMuZW5jcnlwdGVkUHJpdmF0ZUtleVRvUGVtKG4pfXZhciBvLGMsdSxsO3N3aXRjaChyLmFsZ29yaXRobSl7Y2FzZSJhZXMxMjgiOm89IkFFUy0xMjgtQ0JDIix1PTE2LGM9YS5yYW5kb20uZ2V0Qnl0ZXNTeW5jKDE2KSxsPWEuYWVzLmNyZWF0ZUVuY3J5cHRpb25DaXBoZXI7YnJlYWs7Y2FzZSJhZXMxOTIiOm89IkFFUy0xOTItQ0JDIix1PTI0LGM9YS5yYW5kb20uZ2V0Qnl0ZXNTeW5jKDE2KSxsPWEuYWVzLmNyZWF0ZUVuY3J5cHRpb25DaXBoZXI7YnJlYWs7Y2FzZSJhZXMyNTYiOm89IkFFUy0yNTYtQ0JDIix1PTMyLGM9YS5yYW5kb20uZ2V0Qnl0ZXNTeW5jKDE2KSxsPWEuYWVzLmNyZWF0ZUVuY3J5cHRpb25DaXBoZXI7YnJlYWs7Y2FzZSIzZGVzIjpvPSJERVMtRURFMy1DQkMiLHU9MjQsYz1hLnJhbmRvbS5nZXRCeXRlc1N5bmMoOCksbD1hLmRlcy5jcmVhdGVFbmNyeXB0aW9uQ2lwaGVyO2JyZWFrO2Nhc2UiZGVzIjpvPSJERVMtQ0JDIix1PTgsYz1hLnJhbmRvbS5nZXRCeXRlc1N5bmMoOCksbD1hLmRlcy5jcmVhdGVFbmNyeXB0aW9uQ2lwaGVyO2JyZWFrO2RlZmF1bHQ6dmFyIHA9bmV3IEVycm9yKCdDb3VsZCBub3QgZW5jcnlwdCBSU0EgcHJpdmF0ZSBrZXk7IHVuc3VwcG9ydGVkIGVuY3J5cHRpb24gYWxnb3JpdGhtICInK3IuYWxnb3JpdGhtKyciLicpO3Rocm93IHAuYWxnb3JpdGhtPXIuYWxnb3JpdGhtLHB9dmFyIGY9bChhLnBiZS5vcGVuc3NsRGVyaXZlQnl0ZXModCxjLnN1YnN0cigwLDgpLHUpKTtmLnN0YXJ0KGMpLGYudXBkYXRlKGkudG9EZXIocy5wcml2YXRlS2V5VG9Bc24xKGUpKSksZi5maW5pc2goKTt2YXIgaD17dHlwZToiUlNBIFBSSVZBVEUgS0VZIixwcm9jVHlwZTp7dmVyc2lvbjoiNCIsdHlwZToiRU5DUllQVEVEIn0sZGVrSW5mbzp7YWxnb3JpdGhtOm8scGFyYW1ldGVyczphLnV0aWwuYnl0ZXNUb0hleChjKS50b1VwcGVyQ2FzZSgpfSxib2R5OmYub3V0cHV0LmdldEJ5dGVzKCl9O3JldHVybiBhLnBlbS5lbmNvZGUoaCl9LHMuZGVjcnlwdFJzYVByaXZhdGVLZXk9ZnVuY3Rpb24oZSx0KXt2YXIgcj1udWxsLG49YS5wZW0uZGVjb2RlKGUpWzBdO2lmKCJFTkNSWVBURUQgUFJJVkFURSBLRVkiIT09bi50eXBlJiYiUFJJVkFURSBLRVkiIT09bi50eXBlJiYiUlNBIFBSSVZBVEUgS0VZIiE9PW4udHlwZSl0aHJvdyh1PW5ldyBFcnJvcignQ291bGQgbm90IGNvbnZlcnQgcHJpdmF0ZSBrZXkgZnJvbSBQRU07IFBFTSBoZWFkZXIgdHlwZSBpcyBub3QgIkVOQ1JZUFRFRCBQUklWQVRFIEtFWSIsICJQUklWQVRFIEtFWSIsIG9yICJSU0EgUFJJVkFURSBLRVkiLicpKS5oZWFkZXJUeXBlPXUsdTtpZihuLnByb2NUeXBlJiYiRU5DUllQVEVEIj09PW4ucHJvY1R5cGUudHlwZSl7dmFyIG8sYztzd2l0Y2gobi5kZWtJbmZvLmFsZ29yaXRobSl7Y2FzZSJERVMtQ0JDIjpvPTgsYz1hLmRlcy5jcmVhdGVEZWNyeXB0aW9uQ2lwaGVyO2JyZWFrO2Nhc2UiREVTLUVERTMtQ0JDIjpvPTI0LGM9YS5kZXMuY3JlYXRlRGVjcnlwdGlvbkNpcGhlcjticmVhaztjYXNlIkFFUy0xMjgtQ0JDIjpvPTE2LGM9YS5hZXMuY3JlYXRlRGVjcnlwdGlvbkNpcGhlcjticmVhaztjYXNlIkFFUy0xOTItQ0JDIjpvPTI0LGM9YS5hZXMuY3JlYXRlRGVjcnlwdGlvbkNpcGhlcjticmVhaztjYXNlIkFFUy0yNTYtQ0JDIjpvPTMyLGM9YS5hZXMuY3JlYXRlRGVjcnlwdGlvbkNpcGhlcjticmVhaztjYXNlIlJDMi00MC1DQkMiOm89NSxjPWZ1bmN0aW9uKGUpe3JldHVybiBhLnJjMi5jcmVhdGVEZWNyeXB0aW9uQ2lwaGVyKGUsNDApfTticmVhaztjYXNlIlJDMi02NC1DQkMiOm89OCxjPWZ1bmN0aW9uKGUpe3JldHVybiBhLnJjMi5jcmVhdGVEZWNyeXB0aW9uQ2lwaGVyKGUsNjQpfTticmVhaztjYXNlIlJDMi0xMjgtQ0JDIjpvPTE2LGM9ZnVuY3Rpb24oZSl7cmV0dXJuIGEucmMyLmNyZWF0ZURlY3J5cHRpb25DaXBoZXIoZSwxMjgpfTticmVhaztkZWZhdWx0OnZhciB1O3Rocm93KHU9bmV3IEVycm9yKCdDb3VsZCBub3QgZGVjcnlwdCBwcml2YXRlIGtleTsgdW5zdXBwb3J0ZWQgZW5jcnlwdGlvbiBhbGdvcml0aG0gIicrbi5kZWtJbmZvLmFsZ29yaXRobSsnIi4nKSkuYWxnb3JpdGhtPW4uZGVrSW5mby5hbGdvcml0aG0sdX12YXIgbD1hLnV0aWwuaGV4VG9CeXRlcyhuLmRla0luZm8ucGFyYW1ldGVycykscD1jKGEucGJlLm9wZW5zc2xEZXJpdmVCeXRlcyh0LGwuc3Vic3RyKDAsOCksbykpO2lmKHAuc3RhcnQobCkscC51cGRhdGUoYS51dGlsLmNyZWF0ZUJ1ZmZlcihuLmJvZHkpKSwhcC5maW5pc2goKSlyZXR1cm4gcjtyPXAub3V0cHV0LmdldEJ5dGVzKCl9ZWxzZSByPW4uYm9keTtyZXR1cm4gbnVsbCE9PShyPSJFTkNSWVBURUQgUFJJVkFURSBLRVkiPT09bi50eXBlP3MuZGVjcnlwdFByaXZhdGVLZXlJbmZvKGkuZnJvbURlcihyKSx0KTppLmZyb21EZXIocikpJiYocj1zLnByaXZhdGVLZXlGcm9tQXNuMShyKSkscn0scy5wYmUuZ2VuZXJhdGVQa2NzMTJLZXk9ZnVuY3Rpb24oZSx0LHIsbixpLHMpe3ZhciBvLGM7aWYobnVsbD09cyl7aWYoISgic2hhMSJpbiBhLm1kKSl0aHJvdyBuZXcgRXJyb3IoJyJzaGExIiBoYXNoIGFsZ29yaXRobSB1bmF2YWlsYWJsZS4nKTtzPWEubWQuc2hhMS5jcmVhdGUoKX12YXIgdT1zLmRpZ2VzdExlbmd0aCxsPXMuYmxvY2tMZW5ndGgscD1uZXcgYS51dGlsLkJ5dGVCdWZmZXIsZj1uZXcgYS51dGlsLkJ5dGVCdWZmZXI7aWYobnVsbCE9ZSl7Zm9yKGM9MDtjPGUubGVuZ3RoO2MrKylmLnB1dEludDE2KGUuY2hhckNvZGVBdChjKSk7Zi5wdXRJbnQxNigwKX12YXIgaD1mLmxlbmd0aCgpLGQ9dC5sZW5ndGgoKSx5PW5ldyBhLnV0aWwuQnl0ZUJ1ZmZlcjt5LmZpbGxXaXRoQnl0ZShyLGwpO3ZhciBnPWwqTWF0aC5jZWlsKGQvbCksbT1uZXcgYS51dGlsLkJ5dGVCdWZmZXI7Zm9yKGM9MDtjPGc7YysrKW0ucHV0Qnl0ZSh0LmF0KGMlZCkpO3ZhciB2PWwqTWF0aC5jZWlsKGgvbCksQz1uZXcgYS51dGlsLkJ5dGVCdWZmZXI7Zm9yKGM9MDtjPHY7YysrKUMucHV0Qnl0ZShmLmF0KGMlaCkpO3ZhciBFPW07RS5wdXRCdWZmZXIoQyk7Zm9yKHZhciBTPU1hdGguY2VpbChpL3UpLFQ9MTtUPD1TO1QrKyl7dmFyIEk9bmV3IGEudXRpbC5CeXRlQnVmZmVyO0kucHV0Qnl0ZXMoeS5ieXRlcygpKSxJLnB1dEJ5dGVzKEUuYnl0ZXMoKSk7Zm9yKHZhciBiPTA7YjxuO2IrKylzLnN0YXJ0KCkscy51cGRhdGUoSS5nZXRCeXRlcygpKSxJPXMuZGlnZXN0KCk7dmFyIEE9bmV3IGEudXRpbC5CeXRlQnVmZmVyO2ZvcihjPTA7YzxsO2MrKylBLnB1dEJ5dGUoSS5hdChjJXUpKTt2YXIgQj1NYXRoLmNlaWwoZC9sKStNYXRoLmNlaWwoaC9sKSxOPW5ldyBhLnV0aWwuQnl0ZUJ1ZmZlcjtmb3Iobz0wO288QjtvKyspe3ZhciBrPW5ldyBhLnV0aWwuQnl0ZUJ1ZmZlcihFLmdldEJ5dGVzKGwpKSx3PTUxMTtmb3IoYz1BLmxlbmd0aCgpLTE7Yz49MDtjLS0pdz4+PTgsdys9QS5hdChjKStrLmF0KGMpLGsuc2V0QXQoYywyNTUmdyk7Ti5wdXRCdWZmZXIoayl9RT1OLHAucHV0QnVmZmVyKEkpfXJldHVybiBwLnRydW5jYXRlKHAubGVuZ3RoKCktaSkscH0scy5wYmUuZ2V0Q2lwaGVyPWZ1bmN0aW9uKGUsdCxyKXtzd2l0Y2goZSl7Y2FzZSBzLm9pZHMucGtjczVQQkVTMjpyZXR1cm4gcy5wYmUuZ2V0Q2lwaGVyRm9yUEJFUzIoZSx0LHIpO2Nhc2Ugcy5vaWRzWyJwYmVXaXRoU0hBQW5kMy1LZXlUcmlwbGVERVMtQ0JDIl06Y2FzZSBzLm9pZHNbInBiZXdpdGhTSEFBbmQ0MEJpdFJDMi1DQkMiXTpyZXR1cm4gcy5wYmUuZ2V0Q2lwaGVyRm9yUEtDUzEyUEJFKGUsdCxyKTtkZWZhdWx0OnZhciBhPW5ldyBFcnJvcigiQ2Fubm90IHJlYWQgZW5jcnlwdGVkIFBCRSBkYXRhIGJsb2NrLiBVbnN1cHBvcnRlZCBPSUQuIik7dGhyb3cgYS5vaWQ9ZSxhLnN1cHBvcnRlZE9pZHM9WyJwa2NzNVBCRVMyIiwicGJlV2l0aFNIQUFuZDMtS2V5VHJpcGxlREVTLUNCQyIsInBiZXdpdGhTSEFBbmQ0MEJpdFJDMi1DQkMiXSxhfX0scy5wYmUuZ2V0Q2lwaGVyRm9yUEJFUzI9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLG89e30sYz1bXTtpZighaS52YWxpZGF0ZSh0LHUsbyxjKSl0aHJvdyhuPW5ldyBFcnJvcigiQ2Fubm90IHJlYWQgcGFzc3dvcmQtYmFzZWQtZW5jcnlwdGlvbiBhbGdvcml0aG0gcGFyYW1ldGVycy4gQVNOLjEgb2JqZWN0IGlzIG5vdCBhIHN1cHBvcnRlZCBFbmNyeXB0ZWRQcml2YXRlS2V5SW5mby4iKSkuZXJyb3JzPWMsbjtpZigoZT1pLmRlclRvT2lkKG8ua2RmT2lkKSkhPT1zLm9pZHMucGtjczVQQktERjIpdGhyb3cobj1uZXcgRXJyb3IoIkNhbm5vdCByZWFkIGVuY3J5cHRlZCBwcml2YXRlIGtleS4gVW5zdXBwb3J0ZWQga2V5IGRlcml2YXRpb24gZnVuY3Rpb24gT0lELiIpKS5vaWQ9ZSxuLnN1cHBvcnRlZE9pZHM9WyJwa2NzNVBCS0RGMiJdLG47aWYoKGU9aS5kZXJUb09pZChvLmVuY09pZCkpIT09cy5vaWRzWyJhZXMxMjgtQ0JDIl0mJmUhPT1zLm9pZHNbImFlczE5Mi1DQkMiXSYmZSE9PXMub2lkc1siYWVzMjU2LUNCQyJdJiZlIT09cy5vaWRzWyJkZXMtRURFMy1DQkMiXSYmZSE9PXMub2lkcy5kZXNDQkMpdGhyb3cobj1uZXcgRXJyb3IoIkNhbm5vdCByZWFkIGVuY3J5cHRlZCBwcml2YXRlIGtleS4gVW5zdXBwb3J0ZWQgZW5jcnlwdGlvbiBzY2hlbWUgT0lELiIpKS5vaWQ9ZSxuLnN1cHBvcnRlZE9pZHM9WyJhZXMxMjgtQ0JDIiwiYWVzMTkyLUNCQyIsImFlczI1Ni1DQkMiLCJkZXMtRURFMy1DQkMiLCJkZXNDQkMiXSxuO3ZhciBsLHAsaD1vLmtkZlNhbHQsZD1hLnV0aWwuY3JlYXRlQnVmZmVyKG8ua2RmSXRlcmF0aW9uQ291bnQpO3N3aXRjaChkPWQuZ2V0SW50KGQubGVuZ3RoKCk8PDMpLHMub2lkc1tlXSl7Y2FzZSJhZXMxMjgtQ0JDIjpsPTE2LHA9YS5hZXMuY3JlYXRlRGVjcnlwdGlvbkNpcGhlcjticmVhaztjYXNlImFlczE5Mi1DQkMiOmw9MjQscD1hLmFlcy5jcmVhdGVEZWNyeXB0aW9uQ2lwaGVyO2JyZWFrO2Nhc2UiYWVzMjU2LUNCQyI6bD0zMixwPWEuYWVzLmNyZWF0ZURlY3J5cHRpb25DaXBoZXI7YnJlYWs7Y2FzZSJkZXMtRURFMy1DQkMiOmw9MjQscD1hLmRlcy5jcmVhdGVEZWNyeXB0aW9uQ2lwaGVyO2JyZWFrO2Nhc2UiZGVzQ0JDIjpsPTgscD1hLmRlcy5jcmVhdGVEZWNyeXB0aW9uQ2lwaGVyfXZhciB5PWYoby5wcmZPaWQpLGc9YS5wa2NzNS5wYmtkZjIocixoLGQsbCx5KSxtPW8uZW5jSXYsdj1wKGcpO3JldHVybiB2LnN0YXJ0KG0pLHZ9LHMucGJlLmdldENpcGhlckZvclBLQ1MxMlBCRT1mdW5jdGlvbihlLHQscil7dmFyIG49e30sbz1bXTtpZighaS52YWxpZGF0ZSh0LGwsbixvKSl0aHJvdyh5PW5ldyBFcnJvcigiQ2Fubm90IHJlYWQgcGFzc3dvcmQtYmFzZWQtZW5jcnlwdGlvbiBhbGdvcml0aG0gcGFyYW1ldGVycy4gQVNOLjEgb2JqZWN0IGlzIG5vdCBhIHN1cHBvcnRlZCBFbmNyeXB0ZWRQcml2YXRlS2V5SW5mby4iKSkuZXJyb3JzPW8seTt2YXIgYyx1LHAsaD1hLnV0aWwuY3JlYXRlQnVmZmVyKG4uc2FsdCksZD1hLnV0aWwuY3JlYXRlQnVmZmVyKG4uaXRlcmF0aW9ucyk7c3dpdGNoKGQ9ZC5nZXRJbnQoZC5sZW5ndGgoKTw8MyksZSl7Y2FzZSBzLm9pZHNbInBiZVdpdGhTSEFBbmQzLUtleVRyaXBsZURFUy1DQkMiXTpjPTI0LHU9OCxwPWEuZGVzLnN0YXJ0RGVjcnlwdGluZzticmVhaztjYXNlIHMub2lkc1sicGJld2l0aFNIQUFuZDQwQml0UkMyLUNCQyJdOmM9NSx1PTgscD1mdW5jdGlvbihlLHQpe3ZhciByPWEucmMyLmNyZWF0ZURlY3J5cHRpb25DaXBoZXIoZSw0MCk7cmV0dXJuIHIuc3RhcnQodCxudWxsKSxyfTticmVhaztkZWZhdWx0OnZhciB5O3Rocm93KHk9bmV3IEVycm9yKCJDYW5ub3QgcmVhZCBQS0NTICMxMiBQQkUgZGF0YSBibG9jay4gVW5zdXBwb3J0ZWQgT0lELiIpKS5vaWQ9ZSx5fXZhciBnPWYobi5wcmZPaWQpLG09cy5wYmUuZ2VuZXJhdGVQa2NzMTJLZXkocixoLDEsZCxjLGcpO3JldHVybiBnLnN0YXJ0KCkscChtLHMucGJlLmdlbmVyYXRlUGtjczEyS2V5KHIsaCwyLGQsdSxnKSl9LHMucGJlLm9wZW5zc2xEZXJpdmVCeXRlcz1mdW5jdGlvbihlLHQscixuKXtpZihudWxsPT1uKXtpZighKCJtZDUiaW4gYS5tZCkpdGhyb3cgbmV3IEVycm9yKCcibWQ1IiBoYXNoIGFsZ29yaXRobSB1bmF2YWlsYWJsZS4nKTtuPWEubWQubWQ1LmNyZWF0ZSgpfW51bGw9PT10JiYodD0iIik7Zm9yKHZhciBpPVtwKG4sZSt0KV0scz0xNixvPTE7czxyOysrbyxzKz0xNilpLnB1c2gocChuLGlbby0xXStlK3QpKTtyZXR1cm4gaS5qb2luKCIiKS5zdWJzdHIoMCxyKX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO3IoNCkscigxKTt2YXIgbj1lLmV4cG9ydHM9YS5zaGEyNTY9YS5zaGEyNTZ8fHt9O2EubWQuc2hhMjU2PWEubWQuYWxnb3JpdGhtcy5zaGEyNTY9bixuLmNyZWF0ZT1mdW5jdGlvbigpe3N8fChpPVN0cmluZy5mcm9tQ2hhckNvZGUoMTI4KSxpKz1hLnV0aWwuZmlsbFN0cmluZyhTdHJpbmcuZnJvbUNoYXJDb2RlKDApLDY0KSxvPVsxMTE2MzUyNDA4LDE4OTk0NDc0NDEsMzA0OTMyMzQ3MSwzOTIxMDA5NTczLDk2MTk4NzE2MywxNTA4OTcwOTkzLDI0NTM2MzU3NDgsMjg3MDc2MzIyMSwzNjI0MzgxMDgwLDMxMDU5ODQwMSw2MDcyMjUyNzgsMTQyNjg4MTk4NywxOTI1MDc4Mzg4LDIxNjIwNzgyMDYsMjYxNDg4ODEwMywzMjQ4MjIyNTgwLDM4MzUzOTA0MDEsNDAyMjIyNDc3NCwyNjQzNDcwNzgsNjA0ODA3NjI4LDc3MDI1NTk4MywxMjQ5MTUwMTIyLDE1NTUwODE2OTIsMTk5NjA2NDk4NiwyNTU0MjIwODgyLDI4MjE4MzQzNDksMjk1Mjk5NjgwOCwzMjEwMzEzNjcxLDMzMzY1NzE4OTEsMzU4NDUyODcxMSwxMTM5MjY5OTMsMzM4MjQxODk1LDY2NjMwNzIwNSw3NzM1Mjk5MTIsMTI5NDc1NzM3MiwxMzk2MTgyMjkxLDE2OTUxODM3MDAsMTk4NjY2MTA1MSwyMTc3MDI2MzUwLDI0NTY5NTYwMzcsMjczMDQ4NTkyMSwyODIwMzAyNDExLDMyNTk3MzA4MDAsMzM0NTc2NDc3MSwzNTE2MDY1ODE3LDM2MDAzNTI4MDQsNDA5NDU3MTkwOSwyNzU0MjMzNDQsNDMwMjI3NzM0LDUwNjk0ODYxNiw2NTkwNjA1NTYsODgzOTk3ODc3LDk1ODEzOTU3MSwxMzIyODIyMjE4LDE1MzcwMDIwNjMsMTc0Nzg3Mzc3OSwxOTU1NTYyMjIyLDIwMjQxMDQ4MTUsMjIyNzczMDQ1MiwyMzYxODUyNDI0LDI0Mjg0MzY0NzQsMjc1NjczNDE4NywzMjA0MDMxNDc5LDMzMjkzMjUyOThdLHM9ITApO3ZhciBlPW51bGwsdD1hLnV0aWwuY3JlYXRlQnVmZmVyKCkscj1uZXcgQXJyYXkoNjQpLG49e2FsZ29yaXRobToic2hhMjU2IixibG9ja0xlbmd0aDo2NCxkaWdlc3RMZW5ndGg6MzIsbWVzc2FnZUxlbmd0aDowLGZ1bGxNZXNzYWdlTGVuZ3RoOm51bGwsbWVzc2FnZUxlbmd0aFNpemU6OCxzdGFydDpmdW5jdGlvbigpe24ubWVzc2FnZUxlbmd0aD0wLG4uZnVsbE1lc3NhZ2VMZW5ndGg9bi5tZXNzYWdlTGVuZ3RoNjQ9W107Zm9yKHZhciByPW4ubWVzc2FnZUxlbmd0aFNpemUvNCxpPTA7aTxyOysraSluLmZ1bGxNZXNzYWdlTGVuZ3RoLnB1c2goMCk7cmV0dXJuIHQ9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpLGU9e2gwOjE3NzkwMzM3MDMsaDE6MzE0NDEzNDI3NyxoMjoxMDEzOTA0MjQyLGgzOjI3NzM0ODA3NjIsaDQ6MTM1OTg5MzExOSxoNToyNjAwODIyOTI0LGg2OjUyODczNDYzNSxoNzoxNTQxNDU5MjI1fSxufX07cmV0dXJuIG4uc3RhcnQoKSxuLnVwZGF0ZT1mdW5jdGlvbihpLHMpeyJ1dGY4Ij09PXMmJihpPWEudXRpbC5lbmNvZGVVdGY4KGkpKTt2YXIgbz1pLmxlbmd0aDtuLm1lc3NhZ2VMZW5ndGgrPW8sbz1bby80Mjk0OTY3Mjk2Pj4+MCxvPj4+MF07Zm9yKHZhciB1PW4uZnVsbE1lc3NhZ2VMZW5ndGgubGVuZ3RoLTE7dT49MDstLXUpbi5mdWxsTWVzc2FnZUxlbmd0aFt1XSs9b1sxXSxvWzFdPW9bMF0rKG4uZnVsbE1lc3NhZ2VMZW5ndGhbdV0vNDI5NDk2NzI5Nj4+PjApLG4uZnVsbE1lc3NhZ2VMZW5ndGhbdV09bi5mdWxsTWVzc2FnZUxlbmd0aFt1XT4+PjAsb1swXT1vWzFdLzQyOTQ5NjcyOTY+Pj4wO3JldHVybiB0LnB1dEJ5dGVzKGkpLGMoZSxyLHQpLCh0LnJlYWQ+MjA0OHx8MD09PXQubGVuZ3RoKCkpJiZ0LmNvbXBhY3QoKSxufSxuLmRpZ2VzdD1mdW5jdGlvbigpe3ZhciBzPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtzLnB1dEJ5dGVzKHQuYnl0ZXMoKSk7dmFyIG8sdT1uLmZ1bGxNZXNzYWdlTGVuZ3RoW24uZnVsbE1lc3NhZ2VMZW5ndGgubGVuZ3RoLTFdK24ubWVzc2FnZUxlbmd0aFNpemUmbi5ibG9ja0xlbmd0aC0xO3MucHV0Qnl0ZXMoaS5zdWJzdHIoMCxuLmJsb2NrTGVuZ3RoLXUpKTtmb3IodmFyIGw9OCpuLmZ1bGxNZXNzYWdlTGVuZ3RoWzBdLHA9MDtwPG4uZnVsbE1lc3NhZ2VMZW5ndGgubGVuZ3RoLTE7KytwKWwrPShvPTgqbi5mdWxsTWVzc2FnZUxlbmd0aFtwKzFdKS80Mjk0OTY3Mjk2Pj4+MCxzLnB1dEludDMyKGw+Pj4wKSxsPW8+Pj4wO3MucHV0SW50MzIobCk7dmFyIGY9e2gwOmUuaDAsaDE6ZS5oMSxoMjplLmgyLGgzOmUuaDMsaDQ6ZS5oNCxoNTplLmg1LGg2OmUuaDYsaDc6ZS5oN307YyhmLHIscyk7dmFyIGg9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO3JldHVybiBoLnB1dEludDMyKGYuaDApLGgucHV0SW50MzIoZi5oMSksaC5wdXRJbnQzMihmLmgyKSxoLnB1dEludDMyKGYuaDMpLGgucHV0SW50MzIoZi5oNCksaC5wdXRJbnQzMihmLmg1KSxoLnB1dEludDMyKGYuaDYpLGgucHV0SW50MzIoZi5oNyksaH0sbn07dmFyIGk9bnVsbCxzPSExLG89bnVsbDtmdW5jdGlvbiBjKGUsdCxyKXtmb3IodmFyIGEsbixpLHMsYyx1LGwscCxmLGgsZCx5LGcsbT1yLmxlbmd0aCgpO20+PTY0Oyl7Zm9yKGM9MDtjPDE2OysrYyl0W2NdPXIuZ2V0SW50MzIoKTtmb3IoO2M8NjQ7KytjKWE9KChhPXRbYy0yXSk+Pj4xN3xhPDwxNSleKGE+Pj4xOXxhPDwxMyleYT4+PjEwLG49KChuPXRbYy0xNV0pPj4+N3xuPDwyNSleKG4+Pj4xOHxuPDwxNClebj4+PjMsdFtjXT1hK3RbYy03XStuK3RbYy0xNl18MDtmb3IodT1lLmgwLGw9ZS5oMSxwPWUuaDIsZj1lLmgzLGg9ZS5oNCxkPWUuaDUseT1lLmg2LGc9ZS5oNyxjPTA7Yzw2NDsrK2MpaT0odT4+PjJ8dTw8MzApXih1Pj4+MTN8dTw8MTkpXih1Pj4+MjJ8dTw8MTApLHM9dSZsfHAmKHVebCksYT1nKygoaD4+PjZ8aDw8MjYpXihoPj4+MTF8aDw8MjEpXihoPj4+MjV8aDw8NykpKyh5XmgmKGReeSkpK29bY10rdFtjXSxnPXkseT1kLGQ9aCxoPWYrYT4+PjAsZj1wLHA9bCxsPXUsdT1hKyhuPWkrcyk+Pj4wO2UuaDA9ZS5oMCt1fDAsZS5oMT1lLmgxK2x8MCxlLmgyPWUuaDIrcHwwLGUuaDM9ZS5oMytmfDAsZS5oND1lLmg0K2h8MCxlLmg1PWUuaDUrZHwwLGUuaDY9ZS5oNit5fDAsZS5oNz1lLmg3K2d8MCxtLT02NH19fSxmdW5jdGlvbihlLHQscil7dmFyIGE9cigwKTtyKDEpO3ZhciBuPW51bGw7IWEudXRpbC5pc05vZGVqc3x8YS5vcHRpb25zLnVzZVB1cmVKYXZhU2NyaXB0fHxwcm9jZXNzLnZlcnNpb25zWyJub2RlLXdlYmtpdCJdfHwobj1yKDE2KSksKGUuZXhwb3J0cz1hLnBybmc9YS5wcm5nfHx7fSkuY3JlYXRlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD17cGx1Z2luOmUsa2V5Om51bGwsc2VlZDpudWxsLHRpbWU6bnVsbCxyZXNlZWRzOjAsZ2VuZXJhdGVkOjAsa2V5Qnl0ZXM6IiJ9LHI9ZS5tZCxpPW5ldyBBcnJheSgzMikscz0wO3M8MzI7KytzKWlbc109ci5jcmVhdGUoKTtmdW5jdGlvbiBvKCl7aWYodC5wb29sc1swXS5tZXNzYWdlTGVuZ3RoPj0zMilyZXR1cm4gYygpO3ZhciBlPTMyLXQucG9vbHNbMF0ubWVzc2FnZUxlbmd0aDw8NTt0LmNvbGxlY3QodC5zZWVkRmlsZVN5bmMoZSkpLGMoKX1mdW5jdGlvbiBjKCl7dC5yZXNlZWRzPTQyOTQ5NjcyOTU9PT10LnJlc2VlZHM/MDp0LnJlc2VlZHMrMTt2YXIgZT10LnBsdWdpbi5tZC5jcmVhdGUoKTtlLnVwZGF0ZSh0LmtleUJ5dGVzKTtmb3IodmFyIHI9MSxhPTA7YTwzMjsrK2EpdC5yZXNlZWRzJXI9PTAmJihlLnVwZGF0ZSh0LnBvb2xzW2FdLmRpZ2VzdCgpLmdldEJ5dGVzKCkpLHQucG9vbHNbYV0uc3RhcnQoKSkscjw8PTE7dC5rZXlCeXRlcz1lLmRpZ2VzdCgpLmdldEJ5dGVzKCksZS5zdGFydCgpLGUudXBkYXRlKHQua2V5Qnl0ZXMpO3ZhciBuPWUuZGlnZXN0KCkuZ2V0Qnl0ZXMoKTt0LmtleT10LnBsdWdpbi5mb3JtYXRLZXkodC5rZXlCeXRlcyksdC5zZWVkPXQucGx1Z2luLmZvcm1hdFNlZWQobiksdC5nZW5lcmF0ZWQ9MH1mdW5jdGlvbiB1KGUpe3ZhciB0PW51bGwscj1hLnV0aWwuZ2xvYmFsU2NvcGUsbj1yLmNyeXB0b3x8ci5tc0NyeXB0bztuJiZuLmdldFJhbmRvbVZhbHVlcyYmKHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIG4uZ2V0UmFuZG9tVmFsdWVzKGUpfSk7dmFyIGk9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO2lmKHQpZm9yKDtpLmxlbmd0aCgpPGU7KXt2YXIgcz1NYXRoLm1heCgxLE1hdGgubWluKGUtaS5sZW5ndGgoKSw2NTUzNikvNCksbz1uZXcgVWludDMyQXJyYXkoTWF0aC5mbG9vcihzKSk7dHJ5e3Qobyk7Zm9yKHZhciBjPTA7YzxvLmxlbmd0aDsrK2MpaS5wdXRJbnQzMihvW2NdKX1jYXRjaChlKXtpZighKCJ1bmRlZmluZWQiIT10eXBlb2YgUXVvdGFFeGNlZWRlZEVycm9yJiZlIGluc3RhbmNlb2YgUXVvdGFFeGNlZWRlZEVycm9yKSl0aHJvdyBlfX1pZihpLmxlbmd0aCgpPGUpZm9yKHZhciB1LGwscCxmPU1hdGguZmxvb3IoNjU1MzYqTWF0aC5yYW5kb20oKSk7aS5sZW5ndGgoKTxlOyl7bD0xNjgwNyooNjU1MzUmZiksbCs9KDMyNzY3Jih1PTE2ODA3KihmPj4xNikpKTw8MTYsZj00Mjk0OTY3Mjk1JihsPSgyMTQ3NDgzNjQ3JihsKz11Pj4xNSkpKyhsPj4zMSkpO2ZvcihjPTA7YzwzOysrYylwPWY+Pj4oYzw8MykscF49TWF0aC5mbG9vcigyNTYqTWF0aC5yYW5kb20oKSksaS5wdXRCeXRlKFN0cmluZy5mcm9tQ2hhckNvZGUoMjU1JnApKX1yZXR1cm4gaS5nZXRCeXRlcyhlKX1yZXR1cm4gdC5wb29scz1pLHQucG9vbD0wLHQuZ2VuZXJhdGU9ZnVuY3Rpb24oZSxyKXtpZighcilyZXR1cm4gdC5nZW5lcmF0ZVN5bmMoZSk7dmFyIG49dC5wbHVnaW4uY2lwaGVyLGk9dC5wbHVnaW4uaW5jcmVtZW50LHM9dC5wbHVnaW4uZm9ybWF0S2V5LG89dC5wbHVnaW4uZm9ybWF0U2VlZCx1PWEudXRpbC5jcmVhdGVCdWZmZXIoKTt0LmtleT1udWxsLGZ1bmN0aW9uIGwocCl7aWYocClyZXR1cm4gcihwKTtpZih1Lmxlbmd0aCgpPj1lKXJldHVybiByKG51bGwsdS5nZXRCeXRlcyhlKSk7dC5nZW5lcmF0ZWQ+MTA0ODU3NSYmKHQua2V5PW51bGwpO2lmKG51bGw9PT10LmtleSlyZXR1cm4gYS51dGlsLm5leHRUaWNrKChmdW5jdGlvbigpeyFmdW5jdGlvbihlKXtpZih0LnBvb2xzWzBdLm1lc3NhZ2VMZW5ndGg+PTMyKXJldHVybiBjKCksZSgpO3ZhciByPTMyLXQucG9vbHNbMF0ubWVzc2FnZUxlbmd0aDw8NTt0LnNlZWRGaWxlKHIsKGZ1bmN0aW9uKHIsYSl7aWYocilyZXR1cm4gZShyKTt0LmNvbGxlY3QoYSksYygpLGUoKX0pKX0obCl9KSk7dmFyIGY9bih0LmtleSx0LnNlZWQpO3QuZ2VuZXJhdGVkKz1mLmxlbmd0aCx1LnB1dEJ5dGVzKGYpLHQua2V5PXMobih0LmtleSxpKHQuc2VlZCkpKSx0LnNlZWQ9byhuKHQua2V5LHQuc2VlZCkpLGEudXRpbC5zZXRJbW1lZGlhdGUobCl9KCl9LHQuZ2VuZXJhdGVTeW5jPWZ1bmN0aW9uKGUpe3ZhciByPXQucGx1Z2luLmNpcGhlcixuPXQucGx1Z2luLmluY3JlbWVudCxpPXQucGx1Z2luLmZvcm1hdEtleSxzPXQucGx1Z2luLmZvcm1hdFNlZWQ7dC5rZXk9bnVsbDtmb3IodmFyIGM9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO2MubGVuZ3RoKCk8ZTspe3QuZ2VuZXJhdGVkPjEwNDg1NzUmJih0LmtleT1udWxsKSxudWxsPT09dC5rZXkmJm8oKTt2YXIgdT1yKHQua2V5LHQuc2VlZCk7dC5nZW5lcmF0ZWQrPXUubGVuZ3RoLGMucHV0Qnl0ZXModSksdC5rZXk9aShyKHQua2V5LG4odC5zZWVkKSkpLHQuc2VlZD1zKHIodC5rZXksdC5zZWVkKSl9cmV0dXJuIGMuZ2V0Qnl0ZXMoZSl9LG4/KHQuc2VlZEZpbGU9ZnVuY3Rpb24oZSx0KXtuLnJhbmRvbUJ5dGVzKGUsKGZ1bmN0aW9uKGUscil7aWYoZSlyZXR1cm4gdChlKTt0KG51bGwsci50b1N0cmluZygpKX0pKX0sdC5zZWVkRmlsZVN5bmM9ZnVuY3Rpb24oZSl7cmV0dXJuIG4ucmFuZG9tQnl0ZXMoZSkudG9TdHJpbmcoKX0pOih0LnNlZWRGaWxlPWZ1bmN0aW9uKGUsdCl7dHJ5e3QobnVsbCx1KGUpKX1jYXRjaChlKXt0KGUpfX0sdC5zZWVkRmlsZVN5bmM9dSksdC5jb2xsZWN0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgcj1lLmxlbmd0aCxhPTA7YTxyOysrYSl0LnBvb2xzW3QucG9vbF0udXBkYXRlKGUuc3Vic3RyKGEsMSkpLHQucG9vbD0zMT09PXQucG9vbD8wOnQucG9vbCsxfSx0LmNvbGxlY3RJbnQ9ZnVuY3Rpb24oZSxyKXtmb3IodmFyIGE9IiIsbj0wO248cjtuKz04KWErPVN0cmluZy5mcm9tQ2hhckNvZGUoZT4+biYyNTUpO3QuY29sbGVjdChhKX0sdC5yZWdpc3Rlcldvcmtlcj1mdW5jdGlvbihlKXtpZihlPT09c2VsZil0LnNlZWRGaWxlPWZ1bmN0aW9uKGUsdCl7c2VsZi5hZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZnVuY3Rpb24gZShyKXt2YXIgYT1yLmRhdGE7YS5mb3JnZSYmYS5mb3JnZS5wcm5nJiYoc2VsZi5yZW1vdmVFdmVudExpc3RlbmVyKCJtZXNzYWdlIixlKSx0KGEuZm9yZ2UucHJuZy5lcnIsYS5mb3JnZS5wcm5nLmJ5dGVzKSl9KSksc2VsZi5wb3N0TWVzc2FnZSh7Zm9yZ2U6e3Bybmc6e25lZWRlZDplfX19KX07ZWxzZXtlLmFkZEV2ZW50TGlzdGVuZXIoIm1lc3NhZ2UiLChmdW5jdGlvbihyKXt2YXIgYT1yLmRhdGE7YS5mb3JnZSYmYS5mb3JnZS5wcm5nJiZ0LnNlZWRGaWxlKGEuZm9yZ2UucHJuZy5uZWVkZWQsKGZ1bmN0aW9uKHQscil7ZS5wb3N0TWVzc2FnZSh7Zm9yZ2U6e3Bybmc6e2Vycjp0LGJ5dGVzOnJ9fX0pfSkpfSkpfX0sdH19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO3IoMSk7dmFyIG49WzIxNywxMjAsMjQ5LDE5NiwyNSwyMjEsMTgxLDIzNyw0MCwyMzMsMjUzLDEyMSw3NCwxNjAsMjE2LDE1NywxOTgsMTI2LDU1LDEzMSw0MywxMTgsODMsMTQyLDk4LDc2LDEwMCwxMzYsNjgsMTM5LDI1MSwxNjIsMjMsMTU0LDg5LDI0NSwxMzUsMTc5LDc5LDE5LDk3LDY5LDEwOSwxNDEsOSwxMjksMTI1LDUwLDE4OSwxNDMsNjQsMjM1LDEzNCwxODMsMTIzLDExLDI0MCwxNDksMzMsMzQsOTIsMTA3LDc4LDEzMCw4NCwyMTQsMTAxLDE0NywyMDYsOTYsMTc4LDI4LDExNSw4NiwxOTIsMjAsMTY3LDE0MCwyNDEsMjIwLDE4LDExNywyMDIsMzEsNTksMTkwLDIyOCwyMDksNjYsNjEsMjEyLDQ4LDE2Myw2MCwxODIsMzgsMTExLDE5MSwxNCwyMTgsNzAsMTA1LDcsODcsMzksMjQyLDI5LDE1NSwxODgsMTQ4LDY3LDMsMjQ4LDE3LDE5OSwyNDYsMTQ0LDIzOSw2MiwyMzEsNiwxOTUsMjEzLDQ3LDIwMCwxMDIsMzAsMjE1LDgsMjMyLDIzNCwyMjIsMTI4LDgyLDIzOCwyNDcsMTMyLDE3MCwxMTQsMTcyLDUzLDc3LDEwNiw0MiwxNTAsMjYsMjEwLDExMyw5MCwyMSw3MywxMTYsNzUsMTU5LDIwOCw5NCw0LDI0LDE2NCwyMzYsMTk0LDIyNCw2NSwxMTAsMTUsODEsMjAzLDIwNCwzNiwxNDUsMTc1LDgwLDE2MSwyNDQsMTEyLDU3LDE1MywxMjQsNTgsMTMzLDM1LDE4NCwxODAsMTIyLDI1MiwyLDU0LDkxLDM3LDg1LDE1MSw0OSw0NSw5MywyNTAsMTUyLDIyNywxMzgsMTQ2LDE3NCw1LDIyMyw0MSwxNiwxMDMsMTA4LDE4NiwyMDEsMjExLDAsMjMwLDIwNywyMjUsMTU4LDE2OCw0NCw5OSwyMiwxLDYzLDg4LDIyNiwxMzcsMTY5LDEzLDU2LDUyLDI3LDE3MSw1MSwyNTUsMTc2LDE4Nyw3MiwxMiw5NSwxODUsMTc3LDIwNSw0NiwxOTcsMjQzLDIxOSw3MSwyMjksMTY1LDE1NiwxMTksMTAsMTY2LDMyLDEwNCwyNTQsMTI3LDE5MywxNzNdLGk9WzEsMiwzLDVdLHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZTw8dCY2NTUzNXwoNjU1MzUmZSk+PjE2LXR9LG89ZnVuY3Rpb24oZSx0KXtyZXR1cm4oNjU1MzUmZSk+PnR8ZTw8MTYtdCY2NTUzNX07ZS5leHBvcnRzPWEucmMyPWEucmMyfHx7fSxhLnJjMi5leHBhbmRLZXk9ZnVuY3Rpb24oZSx0KXsic3RyaW5nIj09dHlwZW9mIGUmJihlPWEudXRpbC5jcmVhdGVCdWZmZXIoZSkpLHQ9dHx8MTI4O3ZhciByLGk9ZSxzPWUubGVuZ3RoKCksbz10LGM9TWF0aC5jZWlsKG8vOCksdT0yNTU+Pig3Jm8pO2ZvcihyPXM7cjwxMjg7cisrKWkucHV0Qnl0ZShuW2kuYXQoci0xKStpLmF0KHItcykmMjU1XSk7Zm9yKGkuc2V0QXQoMTI4LWMsbltpLmF0KDEyOC1jKSZ1XSkscj0xMjctYztyPj0wO3ItLSlpLnNldEF0KHIsbltpLmF0KHIrMSleaS5hdChyK2MpXSk7cmV0dXJuIGl9O3ZhciBjPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbixjLHUsbCxwPSExLGY9bnVsbCxoPW51bGwsZD1udWxsLHk9W107Zm9yKGU9YS5yYzIuZXhwYW5kS2V5KGUsdCksdT0wO3U8NjQ7dSsrKXkucHVzaChlLmdldEludDE2TGUoKSk7cj8obj1mdW5jdGlvbihlKXtmb3IodT0wO3U8NDt1KyspZVt1XSs9eVtsXSsoZVsodSszKSU0XSZlWyh1KzIpJTRdKSsofmVbKHUrMyklNF0mZVsodSsxKSU0XSksZVt1XT1zKGVbdV0saVt1XSksbCsrfSxjPWZ1bmN0aW9uKGUpe2Zvcih1PTA7dTw0O3UrKyllW3VdKz15WzYzJmVbKHUrMyklNF1dfSk6KG49ZnVuY3Rpb24oZSl7Zm9yKHU9Mzt1Pj0wO3UtLSllW3VdPW8oZVt1XSxpW3VdKSxlW3VdLT15W2xdKyhlWyh1KzMpJTRdJmVbKHUrMiklNF0pKyh+ZVsodSszKSU0XSZlWyh1KzEpJTRdKSxsLS19LGM9ZnVuY3Rpb24oZSl7Zm9yKHU9Mzt1Pj0wO3UtLSllW3VdLT15WzYzJmVbKHUrMyklNF1dfSk7dmFyIGc9ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHU9MDt1PDQ7dSsrKXt2YXIgYT1mLmdldEludDE2TGUoKTtudWxsIT09ZCYmKHI/YV49ZC5nZXRJbnQxNkxlKCk6ZC5wdXRJbnQxNkxlKGEpKSx0LnB1c2goNjU1MzUmYSl9bD1yPzA6NjM7Zm9yKHZhciBuPTA7bjxlLmxlbmd0aDtuKyspZm9yKHZhciBpPTA7aTxlW25dWzBdO2krKyllW25dWzFdKHQpO2Zvcih1PTA7dTw0O3UrKyludWxsIT09ZCYmKHI/ZC5wdXRJbnQxNkxlKHRbdV0pOnRbdV1ePWQuZ2V0SW50MTZMZSgpKSxoLnB1dEludDE2TGUodFt1XSl9LG09bnVsbDtyZXR1cm4gbT17c3RhcnQ6ZnVuY3Rpb24oZSx0KXtlJiYic3RyaW5nIj09dHlwZW9mIGUmJihlPWEudXRpbC5jcmVhdGVCdWZmZXIoZSkpLHA9ITEsZj1hLnV0aWwuY3JlYXRlQnVmZmVyKCksaD10fHxuZXcgYS51dGlsLmNyZWF0ZUJ1ZmZlcixkPWUsbS5vdXRwdXQ9aH0sdXBkYXRlOmZ1bmN0aW9uKGUpe2ZvcihwfHxmLnB1dEJ1ZmZlcihlKTtmLmxlbmd0aCgpPj04OylnKFtbNSxuXSxbMSxjXSxbNixuXSxbMSxjXSxbNSxuXV0pfSxmaW5pc2g6ZnVuY3Rpb24oZSl7dmFyIHQ9ITA7aWYocilpZihlKXQ9ZSg4LGYsIXIpO2Vsc2V7dmFyIGE9OD09PWYubGVuZ3RoKCk/ODo4LWYubGVuZ3RoKCk7Zi5maWxsV2l0aEJ5dGUoYSxhKX1pZih0JiYocD0hMCxtLnVwZGF0ZSgpKSwhciYmKHQ9MD09PWYubGVuZ3RoKCkpKWlmKGUpdD1lKDgsaCwhcik7ZWxzZXt2YXIgbj1oLmxlbmd0aCgpLGk9aC5hdChuLTEpO2k+bj90PSExOmgudHJ1bmNhdGUoaSl9cmV0dXJuIHR9fX07YS5yYzIuc3RhcnRFbmNyeXB0aW5nPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1hLnJjMi5jcmVhdGVFbmNyeXB0aW9uQ2lwaGVyKGUsMTI4KTtyZXR1cm4gbi5zdGFydCh0LHIpLG59LGEucmMyLmNyZWF0ZUVuY3J5cHRpb25DaXBoZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYyhlLHQsITApfSxhLnJjMi5zdGFydERlY3J5cHRpbmc9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuPWEucmMyLmNyZWF0ZURlY3J5cHRpb25DaXBoZXIoZSwxMjgpO3JldHVybiBuLnN0YXJ0KHQsciksbn0sYS5yYzIuY3JlYXRlRGVjcnlwdGlvbkNpcGhlcj1mdW5jdGlvbihlLHQpe3JldHVybiBjKGUsdCwhMSl9fSxmdW5jdGlvbihlLHQscil7dmFyIGE9cigwKTtyKDEpLHIoMikscig5KTt2YXIgbj1lLmV4cG9ydHM9YS5wa2NzMT1hLnBrY3MxfHx7fTtmdW5jdGlvbiBpKGUsdCxyKXtyfHwocj1hLm1kLnNoYTEuY3JlYXRlKCkpO2Zvcih2YXIgbj0iIixpPU1hdGguY2VpbCh0L3IuZGlnZXN0TGVuZ3RoKSxzPTA7czxpOysrcyl7dmFyIG89U3RyaW5nLmZyb21DaGFyQ29kZShzPj4yNCYyNTUscz4+MTYmMjU1LHM+PjgmMjU1LDI1NSZzKTtyLnN0YXJ0KCksci51cGRhdGUoZStvKSxuKz1yLmRpZ2VzdCgpLmdldEJ5dGVzKCl9cmV0dXJuIG4uc3Vic3RyaW5nKDAsdCl9bi5lbmNvZGVfcnNhX29hZXA9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLHMsbyxjOyJzdHJpbmciPT10eXBlb2Ygcj8obj1yLHM9YXJndW1lbnRzWzNdfHx2b2lkIDAsbz1hcmd1bWVudHNbNF18fHZvaWQgMCk6ciYmKG49ci5sYWJlbHx8dm9pZCAwLHM9ci5zZWVkfHx2b2lkIDAsbz1yLm1kfHx2b2lkIDAsci5tZ2YxJiZyLm1nZjEubWQmJihjPXIubWdmMS5tZCkpLG8/by5zdGFydCgpOm89YS5tZC5zaGExLmNyZWF0ZSgpLGN8fChjPW8pO3ZhciB1PU1hdGguY2VpbChlLm4uYml0TGVuZ3RoKCkvOCksbD11LTIqby5kaWdlc3RMZW5ndGgtMjtpZih0Lmxlbmd0aD5sKXRocm93KGc9bmV3IEVycm9yKCJSU0FFUy1PQUVQIGlucHV0IG1lc3NhZ2UgbGVuZ3RoIGlzIHRvbyBsb25nLiIpKS5sZW5ndGg9dC5sZW5ndGgsZy5tYXhMZW5ndGg9bCxnO258fChuPSIiKSxvLnVwZGF0ZShuLCJyYXciKTtmb3IodmFyIHA9by5kaWdlc3QoKSxmPSIiLGg9bC10Lmxlbmd0aCxkPTA7ZDxoO2QrKylmKz0iXDAiO3ZhciB5PXAuZ2V0Qnl0ZXMoKStmKyIBIit0O2lmKHMpe2lmKHMubGVuZ3RoIT09by5kaWdlc3RMZW5ndGgpe3ZhciBnO3Rocm93KGc9bmV3IEVycm9yKCJJbnZhbGlkIFJTQUVTLU9BRVAgc2VlZC4gVGhlIHNlZWQgbGVuZ3RoIG11c3QgbWF0Y2ggdGhlIGRpZ2VzdCBsZW5ndGguIikpLnNlZWRMZW5ndGg9cy5sZW5ndGgsZy5kaWdlc3RMZW5ndGg9by5kaWdlc3RMZW5ndGgsZ319ZWxzZSBzPWEucmFuZG9tLmdldEJ5dGVzKG8uZGlnZXN0TGVuZ3RoKTt2YXIgbT1pKHMsdS1vLmRpZ2VzdExlbmd0aC0xLGMpLHY9YS51dGlsLnhvckJ5dGVzKHksbSx5Lmxlbmd0aCksQz1pKHYsby5kaWdlc3RMZW5ndGgsYyksRT1hLnV0aWwueG9yQnl0ZXMocyxDLHMubGVuZ3RoKTtyZXR1cm4iXDAiK0Urdn0sbi5kZWNvZGVfcnNhX29hZXA9ZnVuY3Rpb24oZSx0LHIpe3ZhciBuLHMsbzsic3RyaW5nIj09dHlwZW9mIHI/KG49cixzPWFyZ3VtZW50c1szXXx8dm9pZCAwKTpyJiYobj1yLmxhYmVsfHx2b2lkIDAscz1yLm1kfHx2b2lkIDAsci5tZ2YxJiZyLm1nZjEubWQmJihvPXIubWdmMS5tZCkpO3ZhciBjPU1hdGguY2VpbChlLm4uYml0TGVuZ3RoKCkvOCk7aWYodC5sZW5ndGghPT1jKXRocm93KHY9bmV3IEVycm9yKCJSU0FFUy1PQUVQIGVuY29kZWQgbWVzc2FnZSBsZW5ndGggaXMgaW52YWxpZC4iKSkubGVuZ3RoPXQubGVuZ3RoLHYuZXhwZWN0ZWRMZW5ndGg9Yyx2O2lmKHZvaWQgMD09PXM/cz1hLm1kLnNoYTEuY3JlYXRlKCk6cy5zdGFydCgpLG98fChvPXMpLGM8MipzLmRpZ2VzdExlbmd0aCsyKXRocm93IG5ldyBFcnJvcigiUlNBRVMtT0FFUCBrZXkgaXMgdG9vIHNob3J0IGZvciB0aGUgaGFzaCBmdW5jdGlvbi4iKTtufHwobj0iIikscy51cGRhdGUobiwicmF3Iik7Zm9yKHZhciB1PXMuZGlnZXN0KCkuZ2V0Qnl0ZXMoKSxsPXQuY2hhckF0KDApLHA9dC5zdWJzdHJpbmcoMSxzLmRpZ2VzdExlbmd0aCsxKSxmPXQuc3Vic3RyaW5nKDErcy5kaWdlc3RMZW5ndGgpLGg9aShmLHMuZGlnZXN0TGVuZ3RoLG8pLGQ9YS51dGlsLnhvckJ5dGVzKHAsaCxwLmxlbmd0aCkseT1pKGQsYy1zLmRpZ2VzdExlbmd0aC0xLG8pLGc9YS51dGlsLnhvckJ5dGVzKGYseSxmLmxlbmd0aCksbT1nLnN1YnN0cmluZygwLHMuZGlnZXN0TGVuZ3RoKSx2PSJcMCIhPT1sLEM9MDtDPHMuZGlnZXN0TGVuZ3RoOysrQyl2fD11LmNoYXJBdChDKSE9PW0uY2hhckF0KEMpO2Zvcih2YXIgRT0xLFM9cy5kaWdlc3RMZW5ndGgsVD1zLmRpZ2VzdExlbmd0aDtUPGcubGVuZ3RoO1QrKyl7dmFyIEk9Zy5jaGFyQ29kZUF0KFQpLGI9MSZJXjEsQT1FPzY1NTM0OjA7dnw9SSZBLFMrPUUmPWJ9aWYodnx8MSE9PWcuY2hhckNvZGVBdChTKSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgUlNBRVMtT0FFUCBwYWRkaW5nLiIpO3JldHVybiBnLnN1YnN0cmluZyhTKzEpfX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXIoMCk7cigxKSxyKDEyKSxyKDIpLGZ1bmN0aW9uKCl7aWYoYS5wcmltZSllLmV4cG9ydHM9YS5wcmltZTtlbHNle3ZhciB0PWUuZXhwb3J0cz1hLnByaW1lPWEucHJpbWV8fHt9LHI9YS5qc2JuLkJpZ0ludGVnZXIsbj1bNiw0LDIsNCwyLDQsNiwyXSxpPW5ldyByKG51bGwpO2kuZnJvbUludCgzMCk7dmFyIHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZXx0fTt0LmdlbmVyYXRlUHJvYmFibGVQcmltZT1mdW5jdGlvbihlLHQsbil7ImZ1bmN0aW9uIj09dHlwZW9mIHQmJihuPXQsdD17fSk7dmFyIGk9KHQ9dHx8e30pLmFsZ29yaXRobXx8IlBSSU1FSU5DIjsic3RyaW5nIj09dHlwZW9mIGkmJihpPXtuYW1lOml9KSxpLm9wdGlvbnM9aS5vcHRpb25zfHx7fTt2YXIgcz10LnBybmd8fGEucmFuZG9tLHU9e25leHRCeXRlczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9cy5nZXRCeXRlc1N5bmMoZS5sZW5ndGgpLHI9MDtyPGUubGVuZ3RoOysrcillW3JdPXQuY2hhckNvZGVBdChyKX19O2lmKCJQUklNRUlOQyI9PT1pLm5hbWUpcmV0dXJuIGZ1bmN0aW9uKGUsdCxuLGkpe2lmKCJ3b3JrZXJzImluIG4pcmV0dXJuIGZ1bmN0aW9uKGUsdCxuLGkpe2lmKCJ1bmRlZmluZWQiPT10eXBlb2YgV29ya2VyKXJldHVybiBvKGUsdCxuLGkpO3ZhciBzPWMoZSx0KSx1PW4ud29ya2VycyxsPW4ud29ya0xvYWR8fDEwMCxwPTMwKmwvOCxmPW4ud29ya2VyU2NyaXB0fHwiZm9yZ2UvcHJpbWUud29ya2VyLmpzIjtpZigtMT09PXUpcmV0dXJuIGEudXRpbC5lc3RpbWF0ZUNvcmVzKChmdW5jdGlvbihlLHQpe2UmJih0PTIpLHU9dC0xLGgoKX0pKTtmdW5jdGlvbiBoKCl7dT1NYXRoLm1heCgxLHUpO2Zvcih2YXIgYT1bXSxuPTA7bjx1OysrbilhW25dPW5ldyBXb3JrZXIoZik7Zm9yKG49MDtuPHU7KytuKWFbbl0uYWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsaCk7dmFyIG89ITE7ZnVuY3Rpb24gaChuKXtpZighbyl7MDt2YXIgdT1uLmRhdGE7aWYodS5mb3VuZCl7Zm9yKHZhciBmPTA7ZjxhLmxlbmd0aDsrK2YpYVtmXS50ZXJtaW5hdGUoKTtyZXR1cm4gbz0hMCxpKG51bGwsbmV3IHIodS5wcmltZSwxNikpfXMuYml0TGVuZ3RoKCk+ZSYmKHM9YyhlLHQpKTt2YXIgaD1zLnRvU3RyaW5nKDE2KTtuLnRhcmdldC5wb3N0TWVzc2FnZSh7aGV4Omgsd29ya0xvYWQ6bH0pLHMuZEFkZE9mZnNldChwLDApfX19aCgpfShlLHQsbixpKTtyZXR1cm4gbyhlLHQsbixpKX0oZSx1LGkub3B0aW9ucyxuKTt0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgcHJpbWUgZ2VuZXJhdGlvbiBhbGdvcml0aG06ICIraS5uYW1lKX19ZnVuY3Rpb24gbyhlLHQscixpKXt2YXIgcz1jKGUsdCksbz1mdW5jdGlvbihlKXtyZXR1cm4gZTw9MTAwPzI3OmU8PTE1MD8xODplPD0yMDA/MTU6ZTw9MjUwPzEyOmU8PTMwMD85OmU8PTM1MD84OmU8PTQwMD83OmU8PTUwMD82OmU8PTYwMD81OmU8PTgwMD80OmU8PTEyNTA/MzoyfShzLmJpdExlbmd0aCgpKTsibWlsbGVyUmFiaW5UZXN0cyJpbiByJiYobz1yLm1pbGxlclJhYmluVGVzdHMpO3ZhciB1PTEwOyJtYXhCbG9ja1RpbWUiaW4gciYmKHU9ci5tYXhCbG9ja1RpbWUpLGZ1bmN0aW9uIGUodCxyLGkscyxvLHUsbCl7dmFyIHA9K25ldyBEYXRlO2Rve2lmKHQuYml0TGVuZ3RoKCk+ciYmKHQ9YyhyLGkpKSx0LmlzUHJvYmFibGVQcmltZShvKSlyZXR1cm4gbChudWxsLHQpO3QuZEFkZE9mZnNldChuW3MrKyU4XSwwKX13aGlsZSh1PDB8fCtuZXcgRGF0ZS1wPHUpO2EudXRpbC5zZXRJbW1lZGlhdGUoKGZ1bmN0aW9uKCl7ZSh0LHIsaSxzLG8sdSxsKX0pKX0ocyxlLHQsMCxvLHUsaSl9ZnVuY3Rpb24gYyhlLHQpe3ZhciBhPW5ldyByKGUsdCksbj1lLTE7cmV0dXJuIGEudGVzdEJpdChuKXx8YS5iaXR3aXNlVG8oci5PTkUuc2hpZnRMZWZ0KG4pLHMsYSksYS5kQWRkT2Zmc2V0KDMxLWEubW9kKGkpLmJ5dGVWYWx1ZSgpLDApLGF9fSgpfSxmdW5jdGlvbihlLHQscil7dmFyIGE9cigwKTtyKDMpLHIoOCkscig2KSxyKDI5KSxyKDIyKSxyKDIpLHIoMTEpLHIoOSkscigxKSxyKDE3KTt2YXIgbj1hLmFzbjEsaT1hLnBraSxzPWUuZXhwb3J0cz1hLnBrY3MxMj1hLnBrY3MxMnx8e30sbz17bmFtZToiQ29udGVudEluZm8iLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiQ29udGVudEluZm8uY29udGVudFR5cGUiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLk9JRCxjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJjb250ZW50VHlwZSJ9LHtuYW1lOiJDb250ZW50SW5mby5jb250ZW50Iix0YWdDbGFzczpuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsY29uc3RydWN0ZWQ6ITAsY2FwdHVyZUFzbjE6ImNvbnRlbnQifV19LGM9e25hbWU6IlBGWCIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsdmFsdWU6W3tuYW1lOiJQRlgudmVyc2lvbiIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJ2ZXJzaW9uIn0sbyx7bmFtZToiUEZYLm1hY0RhdGEiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLG9wdGlvbmFsOiEwLGNhcHR1cmVBc24xOiJtYWMiLHZhbHVlOlt7bmFtZToiUEZYLm1hY0RhdGEubWFjIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCx2YWx1ZTpbe25hbWU6IlBGWC5tYWNEYXRhLm1hYy5kaWdlc3RBbGdvcml0aG0iLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiUEZYLm1hY0RhdGEubWFjLmRpZ2VzdEFsZ29yaXRobS5hbGdvcml0aG0iLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLk9JRCxjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJtYWNBbGdvcml0aG0ifSx7bmFtZToiUEZYLm1hY0RhdGEubWFjLmRpZ2VzdEFsZ29yaXRobS5wYXJhbWV0ZXJzIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCxjYXB0dXJlQXNuMToibWFjQWxnb3JpdGhtUGFyYW1ldGVycyJ9XX0se25hbWU6IlBGWC5tYWNEYXRhLm1hYy5kaWdlc3QiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLk9DVEVUU1RSSU5HLGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6Im1hY0RpZ2VzdCJ9XX0se25hbWU6IlBGWC5tYWNEYXRhLm1hY1NhbHQiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLk9DVEVUU1RSSU5HLGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6Im1hY1NhbHQifSx7bmFtZToiUEZYLm1hY0RhdGEuaXRlcmF0aW9ucyIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxvcHRpb25hbDohMCxjYXB0dXJlOiJtYWNJdGVyYXRpb25zIn1dfV19LHU9e25hbWU6IlNhZmVCYWciLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiU2FmZUJhZy5iYWdJZCIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuT0lELGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6ImJhZ0lkIn0se25hbWU6IlNhZmVCYWcuYmFnVmFsdWUiLHRhZ0NsYXNzOm4uQ2xhc3MuQ09OVEVYVF9TUEVDSUZJQyxjb25zdHJ1Y3RlZDohMCxjYXB0dXJlQXNuMToiYmFnVmFsdWUifSx7bmFtZToiU2FmZUJhZy5iYWdBdHRyaWJ1dGVzIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVQsY29uc3RydWN0ZWQ6ITAsb3B0aW9uYWw6ITAsY2FwdHVyZToiYmFnQXR0cmlidXRlcyJ9XX0sbD17bmFtZToiQXR0cmlidXRlIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCx2YWx1ZTpbe25hbWU6IkF0dHJpYnV0ZS5hdHRySWQiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLk9JRCxjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJvaWQifSx7bmFtZToiQXR0cmlidXRlLmF0dHJWYWx1ZXMiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFVCxjb25zdHJ1Y3RlZDohMCxjYXB0dXJlOiJ2YWx1ZXMifV19LHA9e25hbWU6IkNlcnRCYWciLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiQ2VydEJhZy5jZXJ0SWQiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLk9JRCxjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJjZXJ0SWQifSx7bmFtZToiQ2VydEJhZy5jZXJ0VmFsdWUiLHRhZ0NsYXNzOm4uQ2xhc3MuQ09OVEVYVF9TUEVDSUZJQyxjb25zdHJ1Y3RlZDohMCx2YWx1ZTpbe25hbWU6IkNlcnRCYWcuY2VydFZhbHVlWzBdIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uQ2xhc3MuT0NURVRTVFJJTkcsY29uc3RydWN0ZWQ6ITEsY2FwdHVyZToiY2VydCJ9XX1dfTtmdW5jdGlvbiBmKGUsdCxyLGEpe2Zvcih2YXIgbj1bXSxpPTA7aTxlLmxlbmd0aDtpKyspZm9yKHZhciBzPTA7czxlW2ldLnNhZmVCYWdzLmxlbmd0aDtzKyspe3ZhciBvPWVbaV0uc2FmZUJhZ3Nbc107dm9pZCAwIT09YSYmby50eXBlIT09YXx8KG51bGwhPT10P3ZvaWQgMCE9PW8uYXR0cmlidXRlc1t0XSYmby5hdHRyaWJ1dGVzW3RdLmluZGV4T2Yocik+PTAmJm4ucHVzaChvKTpuLnB1c2gobykpfXJldHVybiBufWZ1bmN0aW9uIGgoZSl7aWYoZS5jb21wb3NlZHx8ZS5jb25zdHJ1Y3RlZCl7Zm9yKHZhciB0PWEudXRpbC5jcmVhdGVCdWZmZXIoKSxyPTA7cjxlLnZhbHVlLmxlbmd0aDsrK3IpdC5wdXRCeXRlcyhlLnZhbHVlW3JdLnZhbHVlKTtlLmNvbXBvc2VkPWUuY29uc3RydWN0ZWQ9ITEsZS52YWx1ZT10LmdldEJ5dGVzKCl9cmV0dXJuIGV9ZnVuY3Rpb24gZChlLHQpe3ZhciByPXt9LHM9W107aWYoIW4udmFsaWRhdGUoZSxhLnBrY3M3LmFzbjEuZW5jcnlwdGVkRGF0YVZhbGlkYXRvcixyLHMpKXRocm93KG89bmV3IEVycm9yKCJDYW5ub3QgcmVhZCBFbmNyeXB0ZWRDb250ZW50SW5mby4iKSkuZXJyb3JzPXMsbzt2YXIgbyxjPW4uZGVyVG9PaWQoci5jb250ZW50VHlwZSk7aWYoYyE9PWkub2lkcy5kYXRhKXRocm93KG89bmV3IEVycm9yKCJQS0NTIzEyIEVuY3J5cHRlZENvbnRlbnRJbmZvIENvbnRlbnRUeXBlIGlzIG5vdCBEYXRhLiIpKS5vaWQ9YyxvO2M9bi5kZXJUb09pZChyLmVuY0FsZ29yaXRobSk7dmFyIHU9aS5wYmUuZ2V0Q2lwaGVyKGMsci5lbmNQYXJhbWV0ZXIsdCksbD1oKHIuZW5jcnlwdGVkQ29udGVudEFzbjEpLHA9YS51dGlsLmNyZWF0ZUJ1ZmZlcihsLnZhbHVlKTtpZih1LnVwZGF0ZShwKSwhdS5maW5pc2goKSl0aHJvdyBuZXcgRXJyb3IoIkZhaWxlZCB0byBkZWNyeXB0IFBLQ1MjMTIgU2FmZUNvbnRlbnRzLiIpO3JldHVybiB1Lm91dHB1dC5nZXRCeXRlcygpfWZ1bmN0aW9uIHkoZSx0LHIpe2lmKCF0JiYwPT09ZS5sZW5ndGgpcmV0dXJuW107aWYoKGU9bi5mcm9tRGVyKGUsdCkpLnRhZ0NsYXNzIT09bi5DbGFzcy5VTklWRVJTQUx8fGUudHlwZSE9PW4uVHlwZS5TRVFVRU5DRXx8ITAhPT1lLmNvbnN0cnVjdGVkKXRocm93IG5ldyBFcnJvcigiUEtDUyMxMiBTYWZlQ29udGVudHMgZXhwZWN0ZWQgdG8gYmUgYSBTRVFVRU5DRSBPRiBTYWZlQmFnLiIpO2Zvcih2YXIgYT1bXSxzPTA7czxlLnZhbHVlLmxlbmd0aDtzKyspe3ZhciBvPWUudmFsdWVbc10sYz17fSxsPVtdO2lmKCFuLnZhbGlkYXRlKG8sdSxjLGwpKXRocm93KG09bmV3IEVycm9yKCJDYW5ub3QgcmVhZCBTYWZlQmFnLiIpKS5lcnJvcnM9bCxtO3ZhciBmLGgsZD17dHlwZTpuLmRlclRvT2lkKGMuYmFnSWQpLGF0dHJpYnV0ZXM6ZyhjLmJhZ0F0dHJpYnV0ZXMpfTthLnB1c2goZCk7dmFyIHk9Yy5iYWdWYWx1ZS52YWx1ZVswXTtzd2l0Y2goZC50eXBlKXtjYXNlIGkub2lkcy5wa2NzOFNocm91ZGVkS2V5QmFnOmlmKG51bGw9PT0oeT1pLmRlY3J5cHRQcml2YXRlS2V5SW5mbyh5LHIpKSl0aHJvdyBuZXcgRXJyb3IoIlVuYWJsZSB0byBkZWNyeXB0IFBLQ1MjOCBTaHJvdWRlZEtleUJhZywgd3JvbmcgcGFzc3dvcmQ/Iik7Y2FzZSBpLm9pZHMua2V5QmFnOnRyeXtkLmtleT1pLnByaXZhdGVLZXlGcm9tQXNuMSh5KX1jYXRjaChlKXtkLmtleT1udWxsLGQuYXNuMT15fWNvbnRpbnVlO2Nhc2UgaS5vaWRzLmNlcnRCYWc6Zj1wLGg9ZnVuY3Rpb24oKXtpZihuLmRlclRvT2lkKGMuY2VydElkKSE9PWkub2lkcy54NTA5Q2VydGlmaWNhdGUpe3ZhciBlPW5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgY2VydGlmaWNhdGUgdHlwZSwgb25seSBYLjUwOSBzdXBwb3J0ZWQuIik7dGhyb3cgZS5vaWQ9bi5kZXJUb09pZChjLmNlcnRJZCksZX12YXIgcj1uLmZyb21EZXIoYy5jZXJ0LHQpO3RyeXtkLmNlcnQ9aS5jZXJ0aWZpY2F0ZUZyb21Bc24xKHIsITApfWNhdGNoKGUpe2QuY2VydD1udWxsLGQuYXNuMT1yfX07YnJlYWs7ZGVmYXVsdDp2YXIgbTt0aHJvdyhtPW5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgUEtDUyMxMiBTYWZlQmFnIHR5cGUuIikpLm9pZD1kLnR5cGUsbX1pZih2b2lkIDAhPT1mJiYhbi52YWxpZGF0ZSh5LGYsYyxsKSl0aHJvdyhtPW5ldyBFcnJvcigiQ2Fubm90IHJlYWQgUEtDUyMxMiAiK2YubmFtZSkpLmVycm9ycz1sLG07aCgpfXJldHVybiBhfWZ1bmN0aW9uIGcoZSl7dmFyIHQ9e307aWYodm9pZCAwIT09ZSlmb3IodmFyIHI9MDtyPGUubGVuZ3RoOysrcil7dmFyIGE9e30scz1bXTtpZighbi52YWxpZGF0ZShlW3JdLGwsYSxzKSl7dmFyIG89bmV3IEVycm9yKCJDYW5ub3QgcmVhZCBQS0NTIzEyIEJhZ0F0dHJpYnV0ZS4iKTt0aHJvdyBvLmVycm9ycz1zLG99dmFyIGM9bi5kZXJUb09pZChhLm9pZCk7aWYodm9pZCAwIT09aS5vaWRzW2NdKXt0W2kub2lkc1tjXV09W107Zm9yKHZhciB1PTA7dTxhLnZhbHVlcy5sZW5ndGg7Kyt1KXRbaS5vaWRzW2NdXS5wdXNoKGEudmFsdWVzW3VdLnZhbHVlKX19cmV0dXJuIHR9cy5wa2NzMTJGcm9tQXNuMT1mdW5jdGlvbihlLHQscil7InN0cmluZyI9PXR5cGVvZiB0PyhyPXQsdD0hMCk6dm9pZCAwPT09dCYmKHQ9ITApO3ZhciB1PXt9O2lmKCFuLnZhbGlkYXRlKGUsYyx1LFtdKSl0aHJvdyhsPW5ldyBFcnJvcigiQ2Fubm90IHJlYWQgUEtDUyMxMiBQRlguIEFTTi4xIG9iamVjdCBpcyBub3QgYW4gUEtDUyMxMiBQRlguIikpLmVycm9ycz1sLGw7dmFyIGwscD17dmVyc2lvbjp1LnZlcnNpb24uY2hhckNvZGVBdCgwKSxzYWZlQ29udGVudHM6W10sZ2V0QmFnczpmdW5jdGlvbihlKXt2YXIgdCxyPXt9O3JldHVybiJsb2NhbEtleUlkImluIGU/dD1lLmxvY2FsS2V5SWQ6ImxvY2FsS2V5SWRIZXgiaW4gZSYmKHQ9YS51dGlsLmhleFRvQnl0ZXMoZS5sb2NhbEtleUlkSGV4KSksdm9pZCAwPT09dCYmISgiZnJpZW5kbHlOYW1lImluIGUpJiYiYmFnVHlwZSJpbiBlJiYocltlLmJhZ1R5cGVdPWYocC5zYWZlQ29udGVudHMsbnVsbCxudWxsLGUuYmFnVHlwZSkpLHZvaWQgMCE9PXQmJihyLmxvY2FsS2V5SWQ9ZihwLnNhZmVDb250ZW50cywibG9jYWxLZXlJZCIsdCxlLmJhZ1R5cGUpKSwiZnJpZW5kbHlOYW1lImluIGUmJihyLmZyaWVuZGx5TmFtZT1mKHAuc2FmZUNvbnRlbnRzLCJmcmllbmRseU5hbWUiLGUuZnJpZW5kbHlOYW1lLGUuYmFnVHlwZSkpLHJ9LGdldEJhZ3NCeUZyaWVuZGx5TmFtZTpmdW5jdGlvbihlLHQpe3JldHVybiBmKHAuc2FmZUNvbnRlbnRzLCJmcmllbmRseU5hbWUiLGUsdCl9LGdldEJhZ3NCeUxvY2FsS2V5SWQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZihwLnNhZmVDb250ZW50cywibG9jYWxLZXlJZCIsZSx0KX19O2lmKDMhPT11LnZlcnNpb24uY2hhckNvZGVBdCgwKSl0aHJvdyhsPW5ldyBFcnJvcigiUEtDUyMxMiBQRlggb2YgdmVyc2lvbiBvdGhlciB0aGFuIDMgbm90IHN1cHBvcnRlZC4iKSkudmVyc2lvbj11LnZlcnNpb24uY2hhckNvZGVBdCgwKSxsO2lmKG4uZGVyVG9PaWQodS5jb250ZW50VHlwZSkhPT1pLm9pZHMuZGF0YSl0aHJvdyhsPW5ldyBFcnJvcigiT25seSBQS0NTIzEyIFBGWCBpbiBwYXNzd29yZCBpbnRlZ3JpdHkgbW9kZSBzdXBwb3J0ZWQuIikpLm9pZD1uLmRlclRvT2lkKHUuY29udGVudFR5cGUpLGw7dmFyIGc9dS5jb250ZW50LnZhbHVlWzBdO2lmKGcudGFnQ2xhc3MhPT1uLkNsYXNzLlVOSVZFUlNBTHx8Zy50eXBlIT09bi5UeXBlLk9DVEVUU1RSSU5HKXRocm93IG5ldyBFcnJvcigiUEtDUyMxMiBhdXRoU2FmZSBjb250ZW50IGRhdGEgaXMgbm90IGFuIE9DVEVUIFNUUklORy4iKTtpZihnPWgoZyksdS5tYWMpe3ZhciBtPW51bGwsdj0wLEM9bi5kZXJUb09pZCh1Lm1hY0FsZ29yaXRobSk7c3dpdGNoKEMpe2Nhc2UgaS5vaWRzLnNoYTE6bT1hLm1kLnNoYTEuY3JlYXRlKCksdj0yMDticmVhaztjYXNlIGkub2lkcy5zaGEyNTY6bT1hLm1kLnNoYTI1Ni5jcmVhdGUoKSx2PTMyO2JyZWFrO2Nhc2UgaS5vaWRzLnNoYTM4NDptPWEubWQuc2hhMzg0LmNyZWF0ZSgpLHY9NDg7YnJlYWs7Y2FzZSBpLm9pZHMuc2hhNTEyOm09YS5tZC5zaGE1MTIuY3JlYXRlKCksdj02NDticmVhaztjYXNlIGkub2lkcy5tZDU6bT1hLm1kLm1kNS5jcmVhdGUoKSx2PTE2fWlmKG51bGw9PT1tKXRocm93IG5ldyBFcnJvcigiUEtDUyMxMiB1c2VzIHVuc3VwcG9ydGVkIE1BQyBhbGdvcml0aG06ICIrQyk7dmFyIEU9bmV3IGEudXRpbC5CeXRlQnVmZmVyKHUubWFjU2FsdCksUz0ibWFjSXRlcmF0aW9ucyJpbiB1P3BhcnNlSW50KGEudXRpbC5ieXRlc1RvSGV4KHUubWFjSXRlcmF0aW9ucyksMTYpOjEsVD1zLmdlbmVyYXRlS2V5KHIsRSwzLFMsdixtKSxJPWEuaG1hYy5jcmVhdGUoKTtpZihJLnN0YXJ0KG0sVCksSS51cGRhdGUoZy52YWx1ZSksSS5nZXRNYWMoKS5nZXRCeXRlcygpIT09dS5tYWNEaWdlc3QpdGhyb3cgbmV3IEVycm9yKCJQS0NTIzEyIE1BQyBjb3VsZCBub3QgYmUgdmVyaWZpZWQuIEludmFsaWQgcGFzc3dvcmQ/Iil9cmV0dXJuIGZ1bmN0aW9uKGUsdCxyLGEpe2lmKCh0PW4uZnJvbURlcih0LHIpKS50YWdDbGFzcyE9PW4uQ2xhc3MuVU5JVkVSU0FMfHx0LnR5cGUhPT1uLlR5cGUuU0VRVUVOQ0V8fCEwIT09dC5jb25zdHJ1Y3RlZCl0aHJvdyBuZXcgRXJyb3IoIlBLQ1MjMTIgQXV0aGVudGljYXRlZFNhZmUgZXhwZWN0ZWQgdG8gYmUgYSBTRVFVRU5DRSBPRiBDb250ZW50SW5mbyIpO2Zvcih2YXIgcz0wO3M8dC52YWx1ZS5sZW5ndGg7cysrKXt2YXIgYz10LnZhbHVlW3NdLHU9e30sbD1bXTtpZighbi52YWxpZGF0ZShjLG8sdSxsKSl0aHJvdyhtPW5ldyBFcnJvcigiQ2Fubm90IHJlYWQgQ29udGVudEluZm8uIikpLmVycm9ycz1sLG07dmFyIHA9e2VuY3J5cHRlZDohMX0sZj1udWxsLGc9dS5jb250ZW50LnZhbHVlWzBdO3N3aXRjaChuLmRlclRvT2lkKHUuY29udGVudFR5cGUpKXtjYXNlIGkub2lkcy5kYXRhOmlmKGcudGFnQ2xhc3MhPT1uLkNsYXNzLlVOSVZFUlNBTHx8Zy50eXBlIT09bi5UeXBlLk9DVEVUU1RSSU5HKXRocm93IG5ldyBFcnJvcigiUEtDUyMxMiBTYWZlQ29udGVudHMgRGF0YSBpcyBub3QgYW4gT0NURVQgU1RSSU5HLiIpO2Y9aChnKS52YWx1ZTticmVhaztjYXNlIGkub2lkcy5lbmNyeXB0ZWREYXRhOmY9ZChnLGEpLHAuZW5jcnlwdGVkPSEwO2JyZWFrO2RlZmF1bHQ6dmFyIG07dGhyb3cobT1uZXcgRXJyb3IoIlVuc3VwcG9ydGVkIFBLQ1MjMTIgY29udGVudFR5cGUuIikpLmNvbnRlbnRUeXBlPW4uZGVyVG9PaWQodS5jb250ZW50VHlwZSksbX1wLnNhZmVCYWdzPXkoZixyLGEpLGUuc2FmZUNvbnRlbnRzLnB1c2gocCl9fShwLGcudmFsdWUsdCxyKSxwfSxzLnRvUGtjczEyQXNuMT1mdW5jdGlvbihlLHQscixvKXsobz1vfHx7fSkuc2FsdFNpemU9by5zYWx0U2l6ZXx8OCxvLmNvdW50PW8uY291bnR8fDIwNDgsby5hbGdvcml0aG09by5hbGdvcml0aG18fG8uZW5jQWxnb3JpdGhtfHwiYWVzMTI4IiwidXNlTWFjImluIG98fChvLnVzZU1hYz0hMCksImxvY2FsS2V5SWQiaW4gb3x8KG8ubG9jYWxLZXlJZD1udWxsKSwiZ2VuZXJhdGVMb2NhbEtleUlkImluIG98fChvLmdlbmVyYXRlTG9jYWxLZXlJZD0hMCk7dmFyIGMsdT1vLmxvY2FsS2V5SWQ7aWYobnVsbCE9PXUpdT1hLnV0aWwuaGV4VG9CeXRlcyh1KTtlbHNlIGlmKG8uZ2VuZXJhdGVMb2NhbEtleUlkKWlmKHQpe3ZhciBsPWEudXRpbC5pc0FycmF5KHQpP3RbMF06dDsic3RyaW5nIj09dHlwZW9mIGwmJihsPWkuY2VydGlmaWNhdGVGcm9tUGVtKGwpKSwoTj1hLm1kLnNoYTEuY3JlYXRlKCkpLnVwZGF0ZShuLnRvRGVyKGkuY2VydGlmaWNhdGVUb0FzbjEobCkpLmdldEJ5dGVzKCkpLHU9Ti5kaWdlc3QoKS5nZXRCeXRlcygpfWVsc2UgdT1hLnJhbmRvbS5nZXRCeXRlcygyMCk7dmFyIHA9W107bnVsbCE9PXUmJnAucHVzaChuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PSUQsITEsbi5vaWRUb0RlcihpLm9pZHMubG9jYWxLZXlJZCkuZ2V0Qnl0ZXMoKSksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFVCwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9DVEVUU1RSSU5HLCExLHUpXSldKSksImZyaWVuZGx5TmFtZSJpbiBvJiZwLnB1c2gobi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFtuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0lELCExLG4ub2lkVG9EZXIoaS5vaWRzLmZyaWVuZGx5TmFtZSkuZ2V0Qnl0ZXMoKSksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFVCwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLkJNUFNUUklORywhMSxvLmZyaWVuZGx5TmFtZSldKV0pKSxwLmxlbmd0aD4wJiYoYz1uLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VULCEwLHApKTt2YXIgZj1bXSxoPVtdO251bGwhPT10JiYoaD1hLnV0aWwuaXNBcnJheSh0KT90Olt0XSk7Zm9yKHZhciBkPVtdLHk9MDt5PGgubGVuZ3RoOysreSl7InN0cmluZyI9PXR5cGVvZih0PWhbeV0pJiYodD1pLmNlcnRpZmljYXRlRnJvbVBlbSh0KSk7dmFyIGc9MD09PXk/Yzp2b2lkIDAsbT1pLmNlcnRpZmljYXRlVG9Bc24xKHQpLHY9bi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFtuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0lELCExLG4ub2lkVG9EZXIoaS5vaWRzLmNlcnRCYWcpLmdldEJ5dGVzKCkpLG4uY3JlYXRlKG4uQ2xhc3MuQ09OVEVYVF9TUEVDSUZJQywwLCEwLFtuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PSUQsITEsbi5vaWRUb0RlcihpLm9pZHMueDUwOUNlcnRpZmljYXRlKS5nZXRCeXRlcygpKSxuLmNyZWF0ZShuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsMCwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9DVEVUU1RSSU5HLCExLG4udG9EZXIobSkuZ2V0Qnl0ZXMoKSldKV0pXSksZ10pO2QucHVzaCh2KX1pZihkLmxlbmd0aD4wKXt2YXIgQz1uLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsZCksRT1uLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PSUQsITEsbi5vaWRUb0RlcihpLm9pZHMuZGF0YSkuZ2V0Qnl0ZXMoKSksbi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLDAsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PQ1RFVFNUUklORywhMSxuLnRvRGVyKEMpLmdldEJ5dGVzKCkpXSldKTtmLnB1c2goRSl9dmFyIFM9bnVsbDtpZihudWxsIT09ZSl7dmFyIFQ9aS53cmFwUnNhUHJpdmF0ZUtleShpLnByaXZhdGVLZXlUb0FzbjEoZSkpO1M9bnVsbD09PXI/bi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFtuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0lELCExLG4ub2lkVG9EZXIoaS5vaWRzLmtleUJhZykuZ2V0Qnl0ZXMoKSksbi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLDAsITAsW1RdKSxjXSk6bi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFtuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0lELCExLG4ub2lkVG9EZXIoaS5vaWRzLnBrY3M4U2hyb3VkZWRLZXlCYWcpLmdldEJ5dGVzKCkpLG4uY3JlYXRlKG4uQ2xhc3MuQ09OVEVYVF9TUEVDSUZJQywwLCEwLFtpLmVuY3J5cHRQcml2YXRlS2V5SW5mbyhULHIsbyldKSxjXSk7dmFyIEk9bi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFtTXSksYj1uLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PSUQsITEsbi5vaWRUb0RlcihpLm9pZHMuZGF0YSkuZ2V0Qnl0ZXMoKSksbi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLDAsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PQ1RFVFNUUklORywhMSxuLnRvRGVyKEkpLmdldEJ5dGVzKCkpXSldKTtmLnB1c2goYil9dmFyIEEsQj1uLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsZik7aWYoby51c2VNYWMpe3ZhciBOPWEubWQuc2hhMS5jcmVhdGUoKSxrPW5ldyBhLnV0aWwuQnl0ZUJ1ZmZlcihhLnJhbmRvbS5nZXRCeXRlcyhvLnNhbHRTaXplKSksdz1vLmNvdW50LFI9KGU9cy5nZW5lcmF0ZUtleShyLGssMyx3LDIwKSxhLmhtYWMuY3JlYXRlKCkpO1Iuc3RhcnQoTixlKSxSLnVwZGF0ZShuLnRvRGVyKEIpLmdldEJ5dGVzKCkpO3ZhciBfPVIuZ2V0TWFjKCk7QT1uLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFtuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0lELCExLG4ub2lkVG9EZXIoaS5vaWRzLnNoYTEpLmdldEJ5dGVzKCkpLG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5OVUxMLCExLCIiKV0pLG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PQ1RFVFNUUklORywhMSxfLmdldEJ5dGVzKCkpXSksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9DVEVUU1RSSU5HLCExLGsuZ2V0Qnl0ZXMoKSksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLklOVEVHRVIsITEsbi5pbnRlZ2VyVG9EZXIodykuZ2V0Qnl0ZXMoKSldKX1yZXR1cm4gbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFtuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuSU5URUdFUiwhMSxuLmludGVnZXJUb0RlcigzKS5nZXRCeXRlcygpKSxuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PSUQsITEsbi5vaWRUb0RlcihpLm9pZHMuZGF0YSkuZ2V0Qnl0ZXMoKSksbi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLDAsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PQ1RFVFNUUklORywhMSxuLnRvRGVyKEIpLmdldEJ5dGVzKCkpXSldKSxBXSl9LHMuZ2VuZXJhdGVLZXk9YS5wYmUuZ2VuZXJhdGVQa2NzMTJLZXl9LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO3IoMykscigxKTt2YXIgbj1hLmFzbjEsaT1lLmV4cG9ydHM9YS5wa2NzN2FzbjE9YS5wa2NzN2FzbjF8fHt9O2EucGtjczc9YS5wa2NzN3x8e30sYS5wa2NzNy5hc24xPWk7dmFyIHM9e25hbWU6IkNvbnRlbnRJbmZvIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCx2YWx1ZTpbe25hbWU6IkNvbnRlbnRJbmZvLkNvbnRlbnRUeXBlIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5PSUQsY29uc3RydWN0ZWQ6ITEsY2FwdHVyZToiY29udGVudFR5cGUifSx7bmFtZToiQ29udGVudEluZm8uY29udGVudCIsdGFnQ2xhc3M6bi5DbGFzcy5DT05URVhUX1NQRUNJRklDLHR5cGU6MCxjb25zdHJ1Y3RlZDohMCxvcHRpb25hbDohMCxjYXB0dXJlQXNuMToiY29udGVudCJ9XX07aS5jb250ZW50SW5mb1ZhbGlkYXRvcj1zO3ZhciBvPXtuYW1lOiJFbmNyeXB0ZWRDb250ZW50SW5mbyIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsdmFsdWU6W3tuYW1lOiJFbmNyeXB0ZWRDb250ZW50SW5mby5jb250ZW50VHlwZSIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuT0lELGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6ImNvbnRlbnRUeXBlIn0se25hbWU6IkVuY3J5cHRlZENvbnRlbnRJbmZvLmNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCx2YWx1ZTpbe25hbWU6IkVuY3J5cHRlZENvbnRlbnRJbmZvLmNvbnRlbnRFbmNyeXB0aW9uQWxnb3JpdGhtLmFsZ29yaXRobSIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuT0lELGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6ImVuY0FsZ29yaXRobSJ9LHtuYW1lOiJFbmNyeXB0ZWRDb250ZW50SW5mby5jb250ZW50RW5jcnlwdGlvbkFsZ29yaXRobS5wYXJhbWV0ZXIiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLGNhcHR1cmVBc24xOiJlbmNQYXJhbWV0ZXIifV19LHtuYW1lOiJFbmNyeXB0ZWRDb250ZW50SW5mby5lbmNyeXB0ZWRDb250ZW50Iix0YWdDbGFzczpuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsdHlwZTowLGNhcHR1cmU6ImVuY3J5cHRlZENvbnRlbnQiLGNhcHR1cmVBc24xOiJlbmNyeXB0ZWRDb250ZW50QXNuMSJ9XX07aS5lbnZlbG9wZWREYXRhVmFsaWRhdG9yPXtuYW1lOiJFbnZlbG9wZWREYXRhIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCx2YWx1ZTpbe25hbWU6IkVudmVsb3BlZERhdGEuVmVyc2lvbiIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJ2ZXJzaW9uIn0se25hbWU6IkVudmVsb3BlZERhdGEuUmVjaXBpZW50SW5mb3MiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFVCxjb25zdHJ1Y3RlZDohMCxjYXB0dXJlQXNuMToicmVjaXBpZW50SW5mb3MifV0uY29uY2F0KG8pfSxpLmVuY3J5cHRlZERhdGFWYWxpZGF0b3I9e25hbWU6IkVuY3J5cHRlZERhdGEiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiRW5jcnlwdGVkRGF0YS5WZXJzaW9uIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5JTlRFR0VSLGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6InZlcnNpb24ifV0uY29uY2F0KG8pfTt2YXIgYz17bmFtZToiU2lnbmVySW5mbyIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsdmFsdWU6W3tuYW1lOiJTaWduZXJJbmZvLnZlcnNpb24iLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLklOVEVHRVIsY29uc3RydWN0ZWQ6ITF9LHtuYW1lOiJTaWduZXJJbmZvLmlzc3VlckFuZFNlcmlhbE51bWJlciIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsdmFsdWU6W3tuYW1lOiJTaWduZXJJbmZvLmlzc3VlckFuZFNlcmlhbE51bWJlci5pc3N1ZXIiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLGNhcHR1cmVBc24xOiJpc3N1ZXIifSx7bmFtZToiU2lnbmVySW5mby5pc3N1ZXJBbmRTZXJpYWxOdW1iZXIuc2VyaWFsTnVtYmVyIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5JTlRFR0VSLGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6InNlcmlhbCJ9XX0se25hbWU6IlNpZ25lckluZm8uZGlnZXN0QWxnb3JpdGhtIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCx2YWx1ZTpbe25hbWU6IlNpZ25lckluZm8uZGlnZXN0QWxnb3JpdGhtLmFsZ29yaXRobSIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuT0lELGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6ImRpZ2VzdEFsZ29yaXRobSJ9LHtuYW1lOiJTaWduZXJJbmZvLmRpZ2VzdEFsZ29yaXRobS5wYXJhbWV0ZXIiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLGNvbnN0cnVjdGVkOiExLGNhcHR1cmVBc24xOiJkaWdlc3RQYXJhbWV0ZXIiLG9wdGlvbmFsOiEwfV19LHtuYW1lOiJTaWduZXJJbmZvLmF1dGhlbnRpY2F0ZWRBdHRyaWJ1dGVzIix0YWdDbGFzczpuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsdHlwZTowLGNvbnN0cnVjdGVkOiEwLG9wdGlvbmFsOiEwLGNhcHR1cmU6ImF1dGhlbnRpY2F0ZWRBdHRyaWJ1dGVzIn0se25hbWU6IlNpZ25lckluZm8uZGlnZXN0RW5jcnlwdGlvbkFsZ29yaXRobSIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsY2FwdHVyZToic2lnbmF0dXJlQWxnb3JpdGhtIn0se25hbWU6IlNpZ25lckluZm8uZW5jcnlwdGVkRGlnZXN0Iix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5PQ1RFVFNUUklORyxjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJzaWduYXR1cmUifSx7bmFtZToiU2lnbmVySW5mby51bmF1dGhlbnRpY2F0ZWRBdHRyaWJ1dGVzIix0YWdDbGFzczpuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsdHlwZToxLGNvbnN0cnVjdGVkOiEwLG9wdGlvbmFsOiEwLGNhcHR1cmU6InVuYXV0aGVudGljYXRlZEF0dHJpYnV0ZXMifV19O2kuc2lnbmVkRGF0YVZhbGlkYXRvcj17bmFtZToiU2lnbmVkRGF0YSIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuU0VRVUVOQ0UsY29uc3RydWN0ZWQ6ITAsdmFsdWU6W3tuYW1lOiJTaWduZWREYXRhLlZlcnNpb24iLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLklOVEVHRVIsY29uc3RydWN0ZWQ6ITEsY2FwdHVyZToidmVyc2lvbiJ9LHtuYW1lOiJTaWduZWREYXRhLkRpZ2VzdEFsZ29yaXRobXMiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFVCxjb25zdHJ1Y3RlZDohMCxjYXB0dXJlQXNuMToiZGlnZXN0QWxnb3JpdGhtcyJ9LHMse25hbWU6IlNpZ25lZERhdGEuQ2VydGlmaWNhdGVzIix0YWdDbGFzczpuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsdHlwZTowLG9wdGlvbmFsOiEwLGNhcHR1cmVBc24xOiJjZXJ0aWZpY2F0ZXMifSx7bmFtZToiU2lnbmVkRGF0YS5DZXJ0aWZpY2F0ZVJldm9jYXRpb25MaXN0cyIsdGFnQ2xhc3M6bi5DbGFzcy5DT05URVhUX1NQRUNJRklDLHR5cGU6MSxvcHRpb25hbDohMCxjYXB0dXJlQXNuMToiY3JscyJ9LHtuYW1lOiJTaWduZWREYXRhLlNpZ25lckluZm9zIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVQsY2FwdHVyZToic2lnbmVySW5mb3MiLG9wdGlvbmFsOiEwLHZhbHVlOltjXX1dfSxpLnJlY2lwaWVudEluZm9WYWxpZGF0b3I9e25hbWU6IlJlY2lwaWVudEluZm8iLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiUmVjaXBpZW50SW5mby52ZXJzaW9uIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5JTlRFR0VSLGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6InZlcnNpb24ifSx7bmFtZToiUmVjaXBpZW50SW5mby5pc3N1ZXJBbmRTZXJpYWwiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiUmVjaXBpZW50SW5mby5pc3N1ZXJBbmRTZXJpYWwuaXNzdWVyIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCxjYXB0dXJlQXNuMToiaXNzdWVyIn0se25hbWU6IlJlY2lwaWVudEluZm8uaXNzdWVyQW5kU2VyaWFsLnNlcmlhbE51bWJlciIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJzZXJpYWwifV19LHtuYW1lOiJSZWNpcGllbnRJbmZvLmtleUVuY3J5cHRpb25BbGdvcml0aG0iLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiUmVjaXBpZW50SW5mby5rZXlFbmNyeXB0aW9uQWxnb3JpdGhtLmFsZ29yaXRobSIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuT0lELGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6ImVuY0FsZ29yaXRobSJ9LHtuYW1lOiJSZWNpcGllbnRJbmZvLmtleUVuY3J5cHRpb25BbGdvcml0aG0ucGFyYW1ldGVyIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCxjb25zdHJ1Y3RlZDohMSxjYXB0dXJlQXNuMToiZW5jUGFyYW1ldGVyIn1dfSx7bmFtZToiUmVjaXBpZW50SW5mby5lbmNyeXB0ZWRLZXkiLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLk9DVEVUU1RSSU5HLGNvbnN0cnVjdGVkOiExLGNhcHR1cmU6ImVuY0tleSJ9XX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO3IoMSksYS5tZ2Y9YS5tZ2Z8fHt9LChlLmV4cG9ydHM9YS5tZ2YubWdmMT1hLm1nZjE9YS5tZ2YxfHx7fSkuY3JlYXRlPWZ1bmN0aW9uKGUpe3JldHVybntnZW5lcmF0ZTpmdW5jdGlvbih0LHIpe2Zvcih2YXIgbj1uZXcgYS51dGlsLkJ5dGVCdWZmZXIsaT1NYXRoLmNlaWwoci9lLmRpZ2VzdExlbmd0aCkscz0wO3M8aTtzKyspe3ZhciBvPW5ldyBhLnV0aWwuQnl0ZUJ1ZmZlcjtvLnB1dEludDMyKHMpLGUuc3RhcnQoKSxlLnVwZGF0ZSh0K28uZ2V0Qnl0ZXMoKSksbi5wdXRCdWZmZXIoZS5kaWdlc3QoKSl9cmV0dXJuIG4udHJ1bmNhdGUobi5sZW5ndGgoKS1yKSxuLmdldEJ5dGVzKCl9fX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO2UuZXhwb3J0cz1hLmRlYnVnPWEuZGVidWd8fHt9LGEuZGVidWcuc3RvcmFnZT17fSxhLmRlYnVnLmdldD1mdW5jdGlvbihlLHQpe3ZhciByO3JldHVybiB2b2lkIDA9PT1lP3I9YS5kZWJ1Zy5zdG9yYWdlOmUgaW4gYS5kZWJ1Zy5zdG9yYWdlJiYocj12b2lkIDA9PT10P2EuZGVidWcuc3RvcmFnZVtlXTphLmRlYnVnLnN0b3JhZ2VbZV1bdF0pLHJ9LGEuZGVidWcuc2V0PWZ1bmN0aW9uKGUsdCxyKXtlIGluIGEuZGVidWcuc3RvcmFnZXx8KGEuZGVidWcuc3RvcmFnZVtlXT17fSksYS5kZWJ1Zy5zdG9yYWdlW2VdW3RdPXJ9LGEuZGVidWcuY2xlYXI9ZnVuY3Rpb24oZSx0KXt2b2lkIDA9PT1lP2EuZGVidWcuc3RvcmFnZT17fTplIGluIGEuZGVidWcuc3RvcmFnZSYmKHZvaWQgMD09PXQ/ZGVsZXRlIGEuZGVidWcuc3RvcmFnZVtlXTpkZWxldGUgYS5kZWJ1Zy5zdG9yYWdlW2VdW3RdKX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO3IoNCkscigxKTt2YXIgbj1lLmV4cG9ydHM9YS5zaGE1MTI9YS5zaGE1MTJ8fHt9O2EubWQuc2hhNTEyPWEubWQuYWxnb3JpdGhtcy5zaGE1MTI9bjt2YXIgaT1hLnNoYTM4ND1hLnNoYTUxMi5zaGEzODQ9YS5zaGE1MTIuc2hhMzg0fHx7fTtpLmNyZWF0ZT1mdW5jdGlvbigpe3JldHVybiBuLmNyZWF0ZSgiU0hBLTM4NCIpfSxhLm1kLnNoYTM4ND1hLm1kLmFsZ29yaXRobXMuc2hhMzg0PWksYS5zaGE1MTIuc2hhMjU2PWEuc2hhNTEyLnNoYTI1Nnx8e2NyZWF0ZTpmdW5jdGlvbigpe3JldHVybiBuLmNyZWF0ZSgiU0hBLTUxMi8yNTYiKX19LGEubWRbInNoYTUxMi8yNTYiXT1hLm1kLmFsZ29yaXRobXNbInNoYTUxMi8yNTYiXT1hLnNoYTUxMi5zaGEyNTYsYS5zaGE1MTIuc2hhMjI0PWEuc2hhNTEyLnNoYTIyNHx8e2NyZWF0ZTpmdW5jdGlvbigpe3JldHVybiBuLmNyZWF0ZSgiU0hBLTUxMi8yMjQiKX19LGEubWRbInNoYTUxMi8yMjQiXT1hLm1kLmFsZ29yaXRobXNbInNoYTUxMi8yMjQiXT1hLnNoYTUxMi5zaGEyMjQsbi5jcmVhdGU9ZnVuY3Rpb24oZSl7aWYob3x8KHM9U3RyaW5nLmZyb21DaGFyQ29kZSgxMjgpLHMrPWEudXRpbC5maWxsU3RyaW5nKFN0cmluZy5mcm9tQ2hhckNvZGUoMCksMTI4KSxjPVtbMTExNjM1MjQwOCwzNjA5NzY3NDU4XSxbMTg5OTQ0NzQ0MSw2MDI4OTE3MjVdLFszMDQ5MzIzNDcxLDM5NjQ0ODQzOTldLFszOTIxMDA5NTczLDIxNzMyOTU1NDhdLFs5NjE5ODcxNjMsNDA4MTYyODQ3Ml0sWzE1MDg5NzA5OTMsMzA1MzgzNDI2NV0sWzI0NTM2MzU3NDgsMjkzNzY3MTU3OV0sWzI4NzA3NjMyMjEsMzY2NDYwOTU2MF0sWzM2MjQzODEwODAsMjczNDg4MzM5NF0sWzMxMDU5ODQwMSwxMTY0OTk2NTQyXSxbNjA3MjI1Mjc4LDEzMjM2MTA3NjRdLFsxNDI2ODgxOTg3LDM1OTAzMDQ5OTRdLFsxOTI1MDc4Mzg4LDQwNjgxODIzODNdLFsyMTYyMDc4MjA2LDk5MTMzNjExM10sWzI2MTQ4ODgxMDMsNjMzODAzMzE3XSxbMzI0ODIyMjU4MCwzNDc5Nzc0ODY4XSxbMzgzNTM5MDQwMSwyNjY2NjEzNDU4XSxbNDAyMjIyNDc3NCw5NDQ3MTExMzldLFsyNjQzNDcwNzgsMjM0MTI2Mjc3M10sWzYwNDgwNzYyOCwyMDA3ODAwOTMzXSxbNzcwMjU1OTgzLDE0OTU5OTA5MDFdLFsxMjQ5MTUwMTIyLDE4NTY0MzEyMzVdLFsxNTU1MDgxNjkyLDMxNzUyMTgxMzJdLFsxOTk2MDY0OTg2LDIxOTg5NTA4MzddLFsyNTU0MjIwODgyLDM5OTk3MTkzMzldLFsyODIxODM0MzQ5LDc2Njc4NDAxNl0sWzI5NTI5OTY4MDgsMjU2NjU5NDg3OV0sWzMyMTAzMTM2NzEsMzIwMzMzNzk1Nl0sWzMzMzY1NzE4OTEsMTAzNDQ1NzAyNl0sWzM1ODQ1Mjg3MTEsMjQ2Njk0ODkwMV0sWzExMzkyNjk5MywzNzU4MzI2MzgzXSxbMzM4MjQxODk1LDE2ODcxNzkzNl0sWzY2NjMwNzIwNSwxMTg4MTc5OTY0XSxbNzczNTI5OTEyLDE1NDYwNDU3MzRdLFsxMjk0NzU3MzcyLDE1MjI4MDU0ODVdLFsxMzk2MTgyMjkxLDI2NDM4MzM4MjNdLFsxNjk1MTgzNzAwLDIzNDM1MjczOTBdLFsxOTg2NjYxMDUxLDEwMTQ0Nzc0ODBdLFsyMTc3MDI2MzUwLDEyMDY3NTkxNDJdLFsyNDU2OTU2MDM3LDM0NDA3NzYyN10sWzI3MzA0ODU5MjEsMTI5MDg2MzQ2MF0sWzI4MjAzMDI0MTEsMzE1ODQ1NDI3M10sWzMyNTk3MzA4MDAsMzUwNTk1MjY1N10sWzMzNDU3NjQ3NzEsMTA2MjE3MDA4XSxbMzUxNjA2NTgxNywzNjA2MDA4MzQ0XSxbMzYwMDM1MjgwNCwxNDMyNzI1Nzc2XSxbNDA5NDU3MTkwOSwxNDY3MDMxNTk0XSxbMjc1NDIzMzQ0LDg1MTE2OTcyMF0sWzQzMDIyNzczNCwzMTAwODIzNzUyXSxbNTA2OTQ4NjE2LDEzNjMyNTgxOTVdLFs2NTkwNjA1NTYsMzc1MDY4NTU5M10sWzg4Mzk5Nzg3NywzNzg1MDUwMjgwXSxbOTU4MTM5NTcxLDMzMTgzMDc0MjddLFsxMzIyODIyMjE4LDM4MTI3MjM0MDNdLFsxNTM3MDAyMDYzLDIwMDMwMzQ5OTVdLFsxNzQ3ODczNzc5LDM2MDIwMzY4OTldLFsxOTU1NTYyMjIyLDE1NzU5OTAwMTJdLFsyMDI0MTA0ODE1LDExMjU1OTI5MjhdLFsyMjI3NzMwNDUyLDI3MTY5MDQzMDZdLFsyMzYxODUyNDI0LDQ0Mjc3NjA0NF0sWzI0Mjg0MzY0NzQsNTkzNjk4MzQ0XSxbMjc1NjczNDE4NywzNzMzMTEwMjQ5XSxbMzIwNDAzMTQ3OSwyOTk5MzUxNTczXSxbMzMyOTMyNTI5OCwzODE1OTIwNDI3XSxbMzM5MTU2OTYxNCwzOTI4MzgzOTAwXSxbMzUxNTI2NzI3MSw1NjYyODA3MTFdLFszOTQwMTg3NjA2LDM0NTQwNjk1MzRdLFs0MTE4NjMwMjcxLDQwMDAyMzk5OTJdLFsxMTY0MTg0NzQsMTkxNDEzODU1NF0sWzE3NDI5MjQyMSwyNzMxMDU1MjcwXSxbMjg5MzgwMzU2LDMyMDM5OTMwMDZdLFs0NjAzOTMyNjksMzIwNjIwMzE1XSxbNjg1NDcxNzMzLDU4NzQ5NjgzNl0sWzg1MjE0Mjk3MSwxMDg2NzkyODUxXSxbMTAxNzAzNjI5OCwzNjU1NDMxMDBdLFsxMTI2MDAwNTgwLDI2MTgyOTc2NzZdLFsxMjg4MDMzNDcwLDM0MDk4NTUxNThdLFsxNTAxNTA1OTQ4LDQyMzQ1MDk4NjZdLFsxNjA3MTY3OTE1LDk4NzE2NzQ2OF0sWzE4MTY0MDIzMTYsMTI0NjE4OTU5MV1dLCh1PXt9KVsiU0hBLTUxMiJdPVtbMTc3OTAzMzcwMyw0MDg5MjM1NzIwXSxbMzE0NDEzNDI3NywyMjI3ODczNTk1XSxbMTAxMzkwNDI0Miw0MjcxMTc1NzIzXSxbMjc3MzQ4MDc2MiwxNTk1NzUwMTI5XSxbMTM1OTg5MzExOSwyOTE3NTY1MTM3XSxbMjYwMDgyMjkyNCw3MjU1MTExOTldLFs1Mjg3MzQ2MzUsNDIxNTM4OTU0N10sWzE1NDE0NTkyMjUsMzI3MDMzMjA5XV0sdVsiU0hBLTM4NCJdPVtbMzQxODA3MDM2NSwzMjM4MzcxMDMyXSxbMTY1NDI3MDI1MCw5MTQxNTA2NjNdLFsyNDM4NTI5MzcwLDgxMjcwMjk5OV0sWzM1NTQ2MjM2MCw0MTQ0OTEyNjk3XSxbMTczMTQwNTQxNSw0MjkwNzc1ODU3XSxbMjM5NDE4MDIzMSwxNzUwNjAzMDI1XSxbMzY3NTAwODUyNSwxNjk0MDc2ODM5XSxbMTIwMzA2MjgxMywzMjA0MDc1NDI4XV0sdVsiU0hBLTUxMi8yNTYiXT1bWzU3MzY0NTIwNCw0MjMwNzM5NzU2XSxbMjY3MzE3MjM4NywzMzYwNDQ5NzMwXSxbNTk2ODgzNTYzLDE4Njc3NTU4NTddLFsyNTIwMjgyOTA1LDE0OTc0MjY2MjFdLFsyNTE5MjE5OTM4LDI4Mjc5NDM5MDddLFszMTkzODM5MTQxLDE0MDEzMDU0OTBdLFs3MjE1MjUyNDQsNzQ2OTYxMDY2XSxbMjQ2ODg1ODUyLDIxNzcxODI4ODJdXSx1WyJTSEEtNTEyLzIyNCJdPVtbMjM1MjgyMjIxNiw0MjQ5NTUyOThdLFsxOTQ0MTY0NzEwLDIzMTI5NTA5OThdLFs1MDI5NzAyODYsODU1NjEyNTQ2XSxbMTczODM5Njk0OCwxNDc5NTE2MTExXSxbMjU4ODEyNzc3LDIwNzc1MTEwODBdLFsyMDExMzkzOTA3LDc5OTg5MDU4XSxbMTA2NzI4Nzk3NiwxNzgwMjk5NDY0XSxbMjg2NDUxMzczLDI0NDY3NTg1NjFdXSxvPSEwKSx2b2lkIDA9PT1lJiYoZT0iU0hBLTUxMiIpLCEoZSBpbiB1KSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgU0hBLTUxMiBhbGdvcml0aG06ICIrZSk7Zm9yKHZhciB0PXVbZV0scj1udWxsLG49YS51dGlsLmNyZWF0ZUJ1ZmZlcigpLGk9bmV3IEFycmF5KDgwKSxwPTA7cDw4MDsrK3ApaVtwXT1uZXcgQXJyYXkoMik7dmFyIGY9NjQ7c3dpdGNoKGUpe2Nhc2UiU0hBLTM4NCI6Zj00ODticmVhaztjYXNlIlNIQS01MTIvMjU2IjpmPTMyO2JyZWFrO2Nhc2UiU0hBLTUxMi8yMjQiOmY9Mjh9dmFyIGg9e2FsZ29yaXRobTplLnJlcGxhY2UoIi0iLCIiKS50b0xvd2VyQ2FzZSgpLGJsb2NrTGVuZ3RoOjEyOCxkaWdlc3RMZW5ndGg6ZixtZXNzYWdlTGVuZ3RoOjAsZnVsbE1lc3NhZ2VMZW5ndGg6bnVsbCxtZXNzYWdlTGVuZ3RoU2l6ZToxNixzdGFydDpmdW5jdGlvbigpe2gubWVzc2FnZUxlbmd0aD0wLGguZnVsbE1lc3NhZ2VMZW5ndGg9aC5tZXNzYWdlTGVuZ3RoMTI4PVtdO2Zvcih2YXIgZT1oLm1lc3NhZ2VMZW5ndGhTaXplLzQsaT0wO2k8ZTsrK2kpaC5mdWxsTWVzc2FnZUxlbmd0aC5wdXNoKDApO249YS51dGlsLmNyZWF0ZUJ1ZmZlcigpLHI9bmV3IEFycmF5KHQubGVuZ3RoKTtmb3IoaT0wO2k8dC5sZW5ndGg7KytpKXJbaV09dFtpXS5zbGljZSgwKTtyZXR1cm4gaH19O3JldHVybiBoLnN0YXJ0KCksaC51cGRhdGU9ZnVuY3Rpb24oZSx0KXsidXRmOCI9PT10JiYoZT1hLnV0aWwuZW5jb2RlVXRmOChlKSk7dmFyIHM9ZS5sZW5ndGg7aC5tZXNzYWdlTGVuZ3RoKz1zLHM9W3MvNDI5NDk2NzI5Nj4+PjAscz4+PjBdO2Zvcih2YXIgbz1oLmZ1bGxNZXNzYWdlTGVuZ3RoLmxlbmd0aC0xO28+PTA7LS1vKWguZnVsbE1lc3NhZ2VMZW5ndGhbb10rPXNbMV0sc1sxXT1zWzBdKyhoLmZ1bGxNZXNzYWdlTGVuZ3RoW29dLzQyOTQ5NjcyOTY+Pj4wKSxoLmZ1bGxNZXNzYWdlTGVuZ3RoW29dPWguZnVsbE1lc3NhZ2VMZW5ndGhbb10+Pj4wLHNbMF09c1sxXS80Mjk0OTY3Mjk2Pj4+MDtyZXR1cm4gbi5wdXRCeXRlcyhlKSxsKHIsaSxuKSwobi5yZWFkPjIwNDh8fDA9PT1uLmxlbmd0aCgpKSYmbi5jb21wYWN0KCksaH0saC5kaWdlc3Q9ZnVuY3Rpb24oKXt2YXIgdD1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7dC5wdXRCeXRlcyhuLmJ5dGVzKCkpO3ZhciBvLGM9aC5mdWxsTWVzc2FnZUxlbmd0aFtoLmZ1bGxNZXNzYWdlTGVuZ3RoLmxlbmd0aC0xXStoLm1lc3NhZ2VMZW5ndGhTaXplJmguYmxvY2tMZW5ndGgtMTt0LnB1dEJ5dGVzKHMuc3Vic3RyKDAsaC5ibG9ja0xlbmd0aC1jKSk7Zm9yKHZhciB1PTgqaC5mdWxsTWVzc2FnZUxlbmd0aFswXSxwPTA7cDxoLmZ1bGxNZXNzYWdlTGVuZ3RoLmxlbmd0aC0xOysrcCl1Kz0obz04KmguZnVsbE1lc3NhZ2VMZW5ndGhbcCsxXSkvNDI5NDk2NzI5Nj4+PjAsdC5wdXRJbnQzMih1Pj4+MCksdT1vPj4+MDt0LnB1dEludDMyKHUpO3ZhciBmPW5ldyBBcnJheShyLmxlbmd0aCk7Zm9yKHA9MDtwPHIubGVuZ3RoOysrcClmW3BdPXJbcF0uc2xpY2UoMCk7bChmLGksdCk7dmFyIGQseT1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7ZD0iU0hBLTUxMiI9PT1lP2YubGVuZ3RoOiJTSEEtMzg0Ij09PWU/Zi5sZW5ndGgtMjpmLmxlbmd0aC00O2ZvcihwPTA7cDxkOysrcCl5LnB1dEludDMyKGZbcF1bMF0pLHA9PT1kLTEmJiJTSEEtNTEyLzIyNCI9PT1lfHx5LnB1dEludDMyKGZbcF1bMV0pO3JldHVybiB5fSxofTt2YXIgcz1udWxsLG89ITEsYz1udWxsLHU9bnVsbDtmdW5jdGlvbiBsKGUsdCxyKXtmb3IodmFyIGEsbixpLHMsbyx1LGwscCxmLGgsZCx5LGcsbSx2LEMsRSxTLFQsSSxiLEEsQixOLGssdyxSLF8sTCxVLEQsUCxWLE89ci5sZW5ndGgoKTtPPj0xMjg7KXtmb3IoUj0wO1I8MTY7KytSKXRbUl1bMF09ci5nZXRJbnQzMigpPj4+MCx0W1JdWzFdPXIuZ2V0SW50MzIoKT4+PjA7Zm9yKDtSPDgwOysrUilhPSgoKF89KFU9dFtSLTJdKVswXSk+Pj4xOXwoTD1VWzFdKTw8MTMpXihMPj4+Mjl8Xzw8MyleXz4+PjYpPj4+MCxuPSgoXzw8MTN8TD4+PjE5KV4oTDw8M3xfPj4+MjkpXihfPDwyNnxMPj4+NikpPj4+MCxpPSgoKF89KFA9dFtSLTE1XSlbMF0pPj4+MXwoTD1QWzFdKTw8MzEpXihfPj4+OHxMPDwyNCleXz4+PjcpPj4+MCxzPSgoXzw8MzF8TD4+PjEpXihfPDwyNHxMPj4+OCleKF88PDI1fEw+Pj43KSk+Pj4wLEQ9dFtSLTddLFY9dFtSLTE2XSxMPW4rRFsxXStzK1ZbMV0sdFtSXVswXT1hK0RbMF0raStWWzBdKyhMLzQyOTQ5NjcyOTY+Pj4wKT4+PjAsdFtSXVsxXT1MPj4+MDtmb3IoZD1lWzBdWzBdLHk9ZVswXVsxXSxnPWVbMV1bMF0sbT1lWzFdWzFdLHY9ZVsyXVswXSxDPWVbMl1bMV0sRT1lWzNdWzBdLFM9ZVszXVsxXSxUPWVbNF1bMF0sST1lWzRdWzFdLGI9ZVs1XVswXSxBPWVbNV1bMV0sQj1lWzZdWzBdLE49ZVs2XVsxXSxrPWVbN11bMF0sdz1lWzddWzFdLFI9MDtSPDgwOysrUilsPSgoVD4+PjE0fEk8PDE4KV4oVD4+PjE4fEk8PDE0KV4oST4+Pjl8VDw8MjMpKT4+PjAscD0oQl5UJihiXkIpKT4+PjAsbz0oKGQ+Pj4yOHx5PDw0KV4oeT4+PjJ8ZDw8MzApXih5Pj4+N3xkPDwyNSkpPj4+MCx1PSgoZDw8NHx5Pj4+MjgpXih5PDwzMHxkPj4+MileKHk8PDI1fGQ+Pj43KSk+Pj4wLGY9KGQmZ3x2JihkXmcpKT4+PjAsaD0oeSZtfEMmKHlebSkpPj4+MCxMPXcrKCgoVDw8MTh8ST4+PjE0KV4oVDw8MTR8ST4+PjE4KV4oSTw8MjN8VD4+PjkpKT4+PjApKygoTl5JJihBXk4pKT4+PjApK2NbUl1bMV0rdFtSXVsxXSxhPWsrbCtwK2NbUl1bMF0rdFtSXVswXSsoTC80Mjk0OTY3Mjk2Pj4+MCk+Pj4wLG49TD4+PjAsaT1vK2YrKChMPXUraCkvNDI5NDk2NzI5Nj4+PjApPj4+MCxzPUw+Pj4wLGs9Qix3PU4sQj1iLE49QSxiPVQsQT1JLFQ9RSthKygoTD1TK24pLzQyOTQ5NjcyOTY+Pj4wKT4+PjAsST1MPj4+MCxFPXYsUz1DLHY9ZyxDPW0sZz1kLG09eSxkPWEraSsoKEw9bitzKS80Mjk0OTY3Mjk2Pj4+MCk+Pj4wLHk9TD4+PjA7TD1lWzBdWzFdK3ksZVswXVswXT1lWzBdWzBdK2QrKEwvNDI5NDk2NzI5Nj4+PjApPj4+MCxlWzBdWzFdPUw+Pj4wLEw9ZVsxXVsxXSttLGVbMV1bMF09ZVsxXVswXStnKyhMLzQyOTQ5NjcyOTY+Pj4wKT4+PjAsZVsxXVsxXT1MPj4+MCxMPWVbMl1bMV0rQyxlWzJdWzBdPWVbMl1bMF0rdisoTC80Mjk0OTY3Mjk2Pj4+MCk+Pj4wLGVbMl1bMV09TD4+PjAsTD1lWzNdWzFdK1MsZVszXVswXT1lWzNdWzBdK0UrKEwvNDI5NDk2NzI5Nj4+PjApPj4+MCxlWzNdWzFdPUw+Pj4wLEw9ZVs0XVsxXStJLGVbNF1bMF09ZVs0XVswXStUKyhMLzQyOTQ5NjcyOTY+Pj4wKT4+PjAsZVs0XVsxXT1MPj4+MCxMPWVbNV1bMV0rQSxlWzVdWzBdPWVbNV1bMF0rYisoTC80Mjk0OTY3Mjk2Pj4+MCk+Pj4wLGVbNV1bMV09TD4+PjAsTD1lWzZdWzFdK04sZVs2XVswXT1lWzZdWzBdK0IrKEwvNDI5NDk2NzI5Nj4+PjApPj4+MCxlWzZdWzFdPUw+Pj4wLEw9ZVs3XVsxXSt3LGVbN11bMF09ZVs3XVswXStrKyhMLzQyOTQ5NjcyOTY+Pj4wKT4+PjAsZVs3XVsxXT1MPj4+MCxPLT0xMjh9fX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXIoMCk7cigxKSxlLmV4cG9ydHM9YS5sb2c9YS5sb2d8fHt9LGEubG9nLmxldmVscz1bIm5vbmUiLCJlcnJvciIsIndhcm5pbmciLCJpbmZvIiwiZGVidWciLCJ2ZXJib3NlIiwibWF4Il07dmFyIG49e30saT1bXSxzPW51bGw7YS5sb2cuTEVWRUxfTE9DS0VEPTIsYS5sb2cuTk9fTEVWRUxfQ0hFQ0s9NCxhLmxvZy5JTlRFUlBPTEFURT04O2Zvcih2YXIgbz0wO288YS5sb2cubGV2ZWxzLmxlbmd0aDsrK28pe3ZhciBjPWEubG9nLmxldmVsc1tvXTtuW2NdPXtpbmRleDpvLG5hbWU6Yy50b1VwcGVyQ2FzZSgpfX1hLmxvZy5sb2dNZXNzYWdlPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uW2UubGV2ZWxdLmluZGV4LHI9MDtyPGkubGVuZ3RoOysrcil7dmFyIHM9aVtyXTtpZihzLmZsYWdzJmEubG9nLk5PX0xFVkVMX0NIRUNLKXMuZihlKTtlbHNlIHQ8PW5bcy5sZXZlbF0uaW5kZXgmJnMuZihzLGUpfX0sYS5sb2cucHJlcGFyZVN0YW5kYXJkPWZ1bmN0aW9uKGUpeyJzdGFuZGFyZCJpbiBlfHwoZS5zdGFuZGFyZD1uW2UubGV2ZWxdLm5hbWUrIiBbIitlLmNhdGVnb3J5KyJdICIrZS5tZXNzYWdlKX0sYS5sb2cucHJlcGFyZUZ1bGw9ZnVuY3Rpb24oZSl7aWYoISgiZnVsbCJpbiBlKSl7dmFyIHQ9W2UubWVzc2FnZV07dD10LmNvbmNhdChbXXx8ITEpLGUuZnVsbD1hLnV0aWwuZm9ybWF0LmFwcGx5KHRoaXMsdCl9fSxhLmxvZy5wcmVwYXJlU3RhbmRhcmRGdWxsPWZ1bmN0aW9uKGUpeyJzdGFuZGFyZEZ1bGwiaW4gZXx8KGEubG9nLnByZXBhcmVTdGFuZGFyZChlKSxlLnN0YW5kYXJkRnVsbD1lLnN0YW5kYXJkKX07dmFyIHU9WyJlcnJvciIsIndhcm5pbmciLCJpbmZvIiwiZGVidWciLCJ2ZXJib3NlIl07Zm9yKG89MDtvPHUubGVuZ3RoOysrbykhZnVuY3Rpb24oZSl7YS5sb2dbZV09ZnVuY3Rpb24odCxyKXt2YXIgbj1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpLnNsaWNlKDIpLGk9e3RpbWVzdGFtcDpuZXcgRGF0ZSxsZXZlbDplLGNhdGVnb3J5OnQsbWVzc2FnZTpyLGFyZ3VtZW50czpufTthLmxvZy5sb2dNZXNzYWdlKGkpfX0odVtvXSk7aWYoYS5sb2cubWFrZUxvZ2dlcj1mdW5jdGlvbihlKXt2YXIgdD17ZmxhZ3M6MCxmOmV9O3JldHVybiBhLmxvZy5zZXRMZXZlbCh0LCJub25lIiksdH0sYS5sb2cuc2V0TGV2ZWw9ZnVuY3Rpb24oZSx0KXt2YXIgcj0hMTtpZihlJiYhKGUuZmxhZ3MmYS5sb2cuTEVWRUxfTE9DS0VEKSlmb3IodmFyIG49MDtuPGEubG9nLmxldmVscy5sZW5ndGg7KytuKXtpZih0PT1hLmxvZy5sZXZlbHNbbl0pe2UubGV2ZWw9dCxyPSEwO2JyZWFrfX1yZXR1cm4gcn0sYS5sb2cubG9jaz1mdW5jdGlvbihlLHQpe3ZvaWQgMD09PXR8fHQ/ZS5mbGFnc3w9YS5sb2cuTEVWRUxfTE9DS0VEOmUuZmxhZ3MmPX5hLmxvZy5MRVZFTF9MT0NLRUR9LGEubG9nLmFkZExvZ2dlcj1mdW5jdGlvbihlKXtpLnB1c2goZSl9LCJ1bmRlZmluZWQiIT10eXBlb2YgY29uc29sZSYmImxvZyJpbiBjb25zb2xlKXt2YXIgbDtpZihjb25zb2xlLmVycm9yJiZjb25zb2xlLndhcm4mJmNvbnNvbGUuaW5mbyYmY29uc29sZS5kZWJ1Zyl7dmFyIHA9e2Vycm9yOmNvbnNvbGUuZXJyb3Isd2FybmluZzpjb25zb2xlLndhcm4saW5mbzpjb25zb2xlLmluZm8sZGVidWc6Y29uc29sZS5kZWJ1Zyx2ZXJib3NlOmNvbnNvbGUuZGVidWd9LGY9ZnVuY3Rpb24oZSx0KXthLmxvZy5wcmVwYXJlU3RhbmRhcmQodCk7dmFyIHI9cFt0LmxldmVsXSxuPVt0LnN0YW5kYXJkXTtuPW4uY29uY2F0KHQuYXJndW1lbnRzLnNsaWNlKCkpLHIuYXBwbHkoY29uc29sZSxuKX07bD1hLmxvZy5tYWtlTG9nZ2VyKGYpfWVsc2V7Zj1mdW5jdGlvbihlLHQpe2EubG9nLnByZXBhcmVTdGFuZGFyZEZ1bGwodCksY29uc29sZS5sb2codC5zdGFuZGFyZEZ1bGwpfTtsPWEubG9nLm1ha2VMb2dnZXIoZil9YS5sb2cuc2V0TGV2ZWwobCwiZGVidWciKSxhLmxvZy5hZGRMb2dnZXIobCkscz1sfWVsc2UgY29uc29sZT17bG9nOmZ1bmN0aW9uKCl7fX07aWYobnVsbCE9PXMpe3ZhciBoPWEudXRpbC5nZXRRdWVyeVZhcmlhYmxlcygpO2lmKCJjb25zb2xlLmxldmVsImluIGgmJmEubG9nLnNldExldmVsKHMsaFsiY29uc29sZS5sZXZlbCJdLnNsaWNlKC0xKVswXSksImNvbnNvbGUubG9jayJpbiBoKSJ0cnVlIj09aFsiY29uc29sZS5sb2NrIl0uc2xpY2UoLTEpWzBdJiZhLmxvZy5sb2NrKHMpfWEubG9nLmNvbnNvbGVMb2dnZXI9c30sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz1yKDM1KX0sZnVuY3Rpb24oZSx0LHIpe2UuZXhwb3J0cz1yKDApLHIoNSkscigzOCkscigzKSxyKDEzKSxyKDMxKSxyKDEwKSxyKDQwKSxyKDgpLHIoNDIpLHIoMzMpLHIoNDMpLHIoMzApLHIoMTUpLHIoNykscigyNikscigyOCkscig0NCkscigyMSkscigyNykscigyNCkscigxOCkscigyKSxyKDI1KSxyKDQ1KSxyKDQ2KSxyKDIwKSxyKDEpfSxmdW5jdGlvbihlLHQpe3ZhciByO3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKTt0cnl7cj1yfHxuZXcgRnVuY3Rpb24oInJldHVybiB0aGlzIikoKX1jYXRjaChlKXsib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmKHI9d2luZG93KX1lLmV4cG9ydHM9cn0sZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtlLmV4cG9ydHM9cjt2YXIgYT17fTtyLmVuY29kZT1mdW5jdGlvbihlLHQscil7aWYoInN0cmluZyIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoJyJhbHBoYWJldCIgbXVzdCBiZSBhIHN0cmluZy4nKTtpZih2b2lkIDAhPT1yJiYibnVtYmVyIiE9dHlwZW9mIHIpdGhyb3cgbmV3IFR5cGVFcnJvcignIm1heGxpbmUiIG11c3QgYmUgYSBudW1iZXIuJyk7dmFyIGE9IiI7aWYoZSBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkpe3ZhciBuPTAsaT10Lmxlbmd0aCxzPXQuY2hhckF0KDApLG89WzBdO2ZvcihuPTA7bjxlLmxlbmd0aDsrK24pe2Zvcih2YXIgYz0wLHU9ZVtuXTtjPG8ubGVuZ3RoOysrYyl1Kz1vW2NdPDw4LG9bY109dSVpLHU9dS9pfDA7Zm9yKDt1PjA7KW8ucHVzaCh1JWkpLHU9dS9pfDB9Zm9yKG49MDswPT09ZVtuXSYmbjxlLmxlbmd0aC0xOysrbilhKz1zO2ZvcihuPW8ubGVuZ3RoLTE7bj49MDstLW4pYSs9dFtvW25dXX1lbHNlIGE9ZnVuY3Rpb24oZSx0KXt2YXIgcj0wLGE9dC5sZW5ndGgsbj10LmNoYXJBdCgwKSxpPVswXTtmb3Iocj0wO3I8ZS5sZW5ndGgoKTsrK3Ipe2Zvcih2YXIgcz0wLG89ZS5hdChyKTtzPGkubGVuZ3RoOysrcylvKz1pW3NdPDw4LGlbc109byVhLG89by9hfDA7Zm9yKDtvPjA7KWkucHVzaChvJWEpLG89by9hfDB9dmFyIGM9IiI7Zm9yKHI9MDswPT09ZS5hdChyKSYmcjxlLmxlbmd0aCgpLTE7KytyKWMrPW47Zm9yKHI9aS5sZW5ndGgtMTtyPj0wOy0tciljKz10W2lbcl1dO3JldHVybiBjfShlLHQpO2lmKHIpe3ZhciBsPW5ldyBSZWdFeHAoIi57MSwiK3IrIn0iLCJnIik7YT1hLm1hdGNoKGwpLmpvaW4oIlxyXG4iKX1yZXR1cm4gYX0sci5kZWNvZGU9ZnVuY3Rpb24oZSx0KXtpZigic3RyaW5nIiE9dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcignImlucHV0IiBtdXN0IGJlIGEgc3RyaW5nLicpO2lmKCJzdHJpbmciIT10eXBlb2YgdCl0aHJvdyBuZXcgVHlwZUVycm9yKCciYWxwaGFiZXQiIG11c3QgYmUgYSBzdHJpbmcuJyk7dmFyIHI9YVt0XTtpZighcil7cj1hW3RdPVtdO2Zvcih2YXIgbj0wO248dC5sZW5ndGg7KytuKXJbdC5jaGFyQ29kZUF0KG4pXT1ufWU9ZS5yZXBsYWNlKC9ccy9nLCIiKTt2YXIgaT10Lmxlbmd0aCxzPXQuY2hhckF0KDApLG89WzBdO2ZvcihuPTA7bjxlLmxlbmd0aDtuKyspe3ZhciBjPXJbZS5jaGFyQ29kZUF0KG4pXTtpZih2b2lkIDA9PT1jKXJldHVybjtmb3IodmFyIHU9MCxsPWM7dTxvLmxlbmd0aDsrK3UpbCs9b1t1XSppLG9bdV09MjU1JmwsbD4+PTg7Zm9yKDtsPjA7KW8ucHVzaCgyNTUmbCksbD4+PTh9Zm9yKHZhciBwPTA7ZVtwXT09PXMmJnA8ZS5sZW5ndGgtMTsrK3Apby5wdXNoKDApO3JldHVybiJ1bmRlZmluZWQiIT10eXBlb2YgQnVmZmVyP0J1ZmZlci5mcm9tKG8ucmV2ZXJzZSgpKTpuZXcgVWludDhBcnJheShvLnJldmVyc2UoKSl9fSxmdW5jdGlvbihlLHQscil7dmFyIGE9cigwKTtyKDUpLHIoMjApO3ZhciBuPWUuZXhwb3J0cz1hLnRscztmdW5jdGlvbiBpKGUsdCxyKXt2YXIgaT10LmVudGl0eT09PWEudGxzLkNvbm5lY3Rpb25FbmQuY2xpZW50O2UucmVhZC5jaXBoZXJTdGF0ZT17aW5pdDohMSxjaXBoZXI6YS5jaXBoZXIuY3JlYXRlRGVjaXBoZXIoIkFFUy1DQkMiLGk/ci5rZXlzLnNlcnZlcl93cml0ZV9rZXk6ci5rZXlzLmNsaWVudF93cml0ZV9rZXkpLGl2Omk/ci5rZXlzLnNlcnZlcl93cml0ZV9JVjpyLmtleXMuY2xpZW50X3dyaXRlX0lWfSxlLndyaXRlLmNpcGhlclN0YXRlPXtpbml0OiExLGNpcGhlcjphLmNpcGhlci5jcmVhdGVDaXBoZXIoIkFFUy1DQkMiLGk/ci5rZXlzLmNsaWVudF93cml0ZV9rZXk6ci5rZXlzLnNlcnZlcl93cml0ZV9rZXkpLGl2Omk/ci5rZXlzLmNsaWVudF93cml0ZV9JVjpyLmtleXMuc2VydmVyX3dyaXRlX0lWfSxlLnJlYWQuY2lwaGVyRnVuY3Rpb249dSxlLndyaXRlLmNpcGhlckZ1bmN0aW9uPXMsZS5yZWFkLm1hY0xlbmd0aD1lLndyaXRlLm1hY0xlbmd0aD1yLm1hY19sZW5ndGgsZS5yZWFkLm1hY0Z1bmN0aW9uPWUud3JpdGUubWFjRnVuY3Rpb249bi5obWFjX3NoYTF9ZnVuY3Rpb24gcyhlLHQpe3ZhciByLGk9ITEscz10Lm1hY0Z1bmN0aW9uKHQubWFjS2V5LHQuc2VxdWVuY2VOdW1iZXIsZSk7ZS5mcmFnbWVudC5wdXRCeXRlcyhzKSx0LnVwZGF0ZVNlcXVlbmNlTnVtYmVyKCkscj1lLnZlcnNpb24ubWlub3I9PT1uLlZlcnNpb25zLlRMU18xXzAubWlub3I/dC5jaXBoZXJTdGF0ZS5pbml0P251bGw6dC5jaXBoZXJTdGF0ZS5pdjphLnJhbmRvbS5nZXRCeXRlc1N5bmMoMTYpLHQuY2lwaGVyU3RhdGUuaW5pdD0hMDt2YXIgYz10LmNpcGhlclN0YXRlLmNpcGhlcjtyZXR1cm4gYy5zdGFydCh7aXY6cn0pLGUudmVyc2lvbi5taW5vcj49bi5WZXJzaW9ucy5UTFNfMV8xLm1pbm9yJiZjLm91dHB1dC5wdXRCeXRlcyhyKSxjLnVwZGF0ZShlLmZyYWdtZW50KSxjLmZpbmlzaChvKSYmKGUuZnJhZ21lbnQ9Yy5vdXRwdXQsZS5sZW5ndGg9ZS5mcmFnbWVudC5sZW5ndGgoKSxpPSEwKSxpfWZ1bmN0aW9uIG8oZSx0LHIpe2lmKCFyKXt2YXIgYT1lLXQubGVuZ3RoKCklZTt0LmZpbGxXaXRoQnl0ZShhLTEsYSl9cmV0dXJuITB9ZnVuY3Rpb24gYyhlLHQscil7dmFyIGE9ITA7aWYocil7Zm9yKHZhciBuPXQubGVuZ3RoKCksaT10Lmxhc3QoKSxzPW4tMS1pO3M8bi0xOysrcylhPWEmJnQuYXQocyk9PWk7YSYmdC50cnVuY2F0ZShpKzEpfXJldHVybiBhfWZ1bmN0aW9uIHUoZSx0KXt2YXIgcixpPSExO3I9ZS52ZXJzaW9uLm1pbm9yPT09bi5WZXJzaW9ucy5UTFNfMV8wLm1pbm9yP3QuY2lwaGVyU3RhdGUuaW5pdD9udWxsOnQuY2lwaGVyU3RhdGUuaXY6ZS5mcmFnbWVudC5nZXRCeXRlcygxNiksdC5jaXBoZXJTdGF0ZS5pbml0PSEwO3ZhciBzPXQuY2lwaGVyU3RhdGUuY2lwaGVyO3Muc3RhcnQoe2l2OnJ9KSxzLnVwZGF0ZShlLmZyYWdtZW50KSxpPXMuZmluaXNoKGMpO3ZhciBvPXQubWFjTGVuZ3RoLHU9YS5yYW5kb20uZ2V0Qnl0ZXNTeW5jKG8pLGw9cy5vdXRwdXQubGVuZ3RoKCk7bD49bz8oZS5mcmFnbWVudD1zLm91dHB1dC5nZXRCeXRlcyhsLW8pLHU9cy5vdXRwdXQuZ2V0Qnl0ZXMobykpOmUuZnJhZ21lbnQ9cy5vdXRwdXQuZ2V0Qnl0ZXMoKSxlLmZyYWdtZW50PWEudXRpbC5jcmVhdGVCdWZmZXIoZS5mcmFnbWVudCksZS5sZW5ndGg9ZS5mcmFnbWVudC5sZW5ndGgoKTt2YXIgcD10Lm1hY0Z1bmN0aW9uKHQubWFjS2V5LHQuc2VxdWVuY2VOdW1iZXIsZSk7cmV0dXJuIHQudXBkYXRlU2VxdWVuY2VOdW1iZXIoKSxpPWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj1hLmhtYWMuY3JlYXRlKCk7cmV0dXJuIG4uc3RhcnQoIlNIQTEiLGUpLG4udXBkYXRlKHQpLHQ9bi5kaWdlc3QoKS5nZXRCeXRlcygpLG4uc3RhcnQobnVsbCxudWxsKSxuLnVwZGF0ZShyKSxyPW4uZGlnZXN0KCkuZ2V0Qnl0ZXMoKSx0PT09cn0odC5tYWNLZXksdSxwKSYmaX1uLkNpcGhlclN1aXRlcy5UTFNfUlNBX1dJVEhfQUVTXzEyOF9DQkNfU0hBPXtpZDpbMCw0N10sbmFtZToiVExTX1JTQV9XSVRIX0FFU18xMjhfQ0JDX1NIQSIsaW5pdFNlY3VyaXR5UGFyYW1ldGVyczpmdW5jdGlvbihlKXtlLmJ1bGtfY2lwaGVyX2FsZ29yaXRobT1uLkJ1bGtDaXBoZXJBbGdvcml0aG0uYWVzLGUuY2lwaGVyX3R5cGU9bi5DaXBoZXJUeXBlLmJsb2NrLGUuZW5jX2tleV9sZW5ndGg9MTYsZS5ibG9ja19sZW5ndGg9MTYsZS5maXhlZF9pdl9sZW5ndGg9MTYsZS5yZWNvcmRfaXZfbGVuZ3RoPTE2LGUubWFjX2FsZ29yaXRobT1uLk1BQ0FsZ29yaXRobS5obWFjX3NoYTEsZS5tYWNfbGVuZ3RoPTIwLGUubWFjX2tleV9sZW5ndGg9MjB9LGluaXRDb25uZWN0aW9uU3RhdGU6aX0sbi5DaXBoZXJTdWl0ZXMuVExTX1JTQV9XSVRIX0FFU18yNTZfQ0JDX1NIQT17aWQ6WzAsNTNdLG5hbWU6IlRMU19SU0FfV0lUSF9BRVNfMjU2X0NCQ19TSEEiLGluaXRTZWN1cml0eVBhcmFtZXRlcnM6ZnVuY3Rpb24oZSl7ZS5idWxrX2NpcGhlcl9hbGdvcml0aG09bi5CdWxrQ2lwaGVyQWxnb3JpdGhtLmFlcyxlLmNpcGhlcl90eXBlPW4uQ2lwaGVyVHlwZS5ibG9jayxlLmVuY19rZXlfbGVuZ3RoPTMyLGUuYmxvY2tfbGVuZ3RoPTE2LGUuZml4ZWRfaXZfbGVuZ3RoPTE2LGUucmVjb3JkX2l2X2xlbmd0aD0xNixlLm1hY19hbGdvcml0aG09bi5NQUNBbGdvcml0aG0uaG1hY19zaGExLGUubWFjX2xlbmd0aD0yMCxlLm1hY19rZXlfbGVuZ3RoPTIwfSxpbml0Q29ubmVjdGlvblN0YXRlOml9fSxmdW5jdGlvbihlLHQscil7dmFyIGE9cigwKTtyKDMwKSxlLmV4cG9ydHM9YS5tZ2Y9YS5tZ2Z8fHt9LGEubWdmLm1nZjE9YS5tZ2YxfSxmdW5jdGlvbihlLHQscil7dmFyIGE9cigwKTtyKDEyKSxyKDIpLHIoMzIpLHIoMSk7dmFyIG49cig0MSksaT1uLnB1YmxpY0tleVZhbGlkYXRvcixzPW4ucHJpdmF0ZUtleVZhbGlkYXRvcjtpZih2b2lkIDA9PT1vKXZhciBvPWEuanNibi5CaWdJbnRlZ2VyO3ZhciBjPWEudXRpbC5CeXRlQnVmZmVyLHU9InVuZGVmaW5lZCI9PXR5cGVvZiBCdWZmZXI/VWludDhBcnJheTpCdWZmZXI7YS5wa2k9YS5wa2l8fHt9LGUuZXhwb3J0cz1hLnBraS5lZDI1NTE5PWEuZWQyNTUxOT1hLmVkMjU1MTl8fHt9O3ZhciBsPWEuZWQyNTUxOTtmdW5jdGlvbiBwKGUpe3ZhciB0PWUubWVzc2FnZTtpZih0IGluc3RhbmNlb2YgVWludDhBcnJheXx8dCBpbnN0YW5jZW9mIHUpcmV0dXJuIHQ7dmFyIHI9ZS5lbmNvZGluZztpZih2b2lkIDA9PT10KXtpZighZS5tZCl0aHJvdyBuZXcgVHlwZUVycm9yKCcib3B0aW9ucy5tZXNzYWdlIiBvciAib3B0aW9ucy5tZCIgbm90IHNwZWNpZmllZC4nKTt0PWUubWQuZGlnZXN0KCkuZ2V0Qnl0ZXMoKSxyPSJiaW5hcnkifWlmKCJzdHJpbmciPT10eXBlb2YgdCYmIXIpdGhyb3cgbmV3IFR5cGVFcnJvcignIm9wdGlvbnMuZW5jb2RpbmciIG11c3QgYmUgImJpbmFyeSIgb3IgInV0ZjgiLicpO2lmKCJzdHJpbmciPT10eXBlb2YgdCl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBCdWZmZXIpcmV0dXJuIEJ1ZmZlci5mcm9tKHQscik7dD1uZXcgYyh0LHIpfWVsc2UgaWYoISh0IGluc3RhbmNlb2YgYykpdGhyb3cgbmV3IFR5cGVFcnJvcignIm9wdGlvbnMubWVzc2FnZSIgbXVzdCBiZSBhIG5vZGUuanMgQnVmZmVyLCBhIFVpbnQ4QXJyYXksIGEgZm9yZ2UgQnl0ZUJ1ZmZlciwgb3IgYSBzdHJpbmcgd2l0aCAib3B0aW9ucy5lbmNvZGluZyIgc3BlY2lmeWluZyBpdHMgZW5jb2RpbmcuJyk7Zm9yKHZhciBhPW5ldyB1KHQubGVuZ3RoKCkpLG49MDtuPGEubGVuZ3RoOysrbilhW25dPXQuYXQobik7cmV0dXJuIGF9bC5jb25zdGFudHM9e30sbC5jb25zdGFudHMuUFVCTElDX0tFWV9CWVRFX0xFTkdUSD0zMixsLmNvbnN0YW50cy5QUklWQVRFX0tFWV9CWVRFX0xFTkdUSD02NCxsLmNvbnN0YW50cy5TRUVEX0JZVEVfTEVOR1RIPTMyLGwuY29uc3RhbnRzLlNJR05fQllURV9MRU5HVEg9NjQsbC5jb25zdGFudHMuSEFTSF9CWVRFX0xFTkdUSD02NCxsLmdlbmVyYXRlS2V5UGFpcj1mdW5jdGlvbihlKXt2YXIgdD0oZT1lfHx7fSkuc2VlZDtpZih2b2lkIDA9PT10KXQ9YS5yYW5kb20uZ2V0Qnl0ZXNTeW5jKGwuY29uc3RhbnRzLlNFRURfQllURV9MRU5HVEgpO2Vsc2UgaWYoInN0cmluZyI9PXR5cGVvZiB0KXtpZih0Lmxlbmd0aCE9PWwuY29uc3RhbnRzLlNFRURfQllURV9MRU5HVEgpdGhyb3cgbmV3IFR5cGVFcnJvcignInNlZWQiIG11c3QgYmUgJytsLmNvbnN0YW50cy5TRUVEX0JZVEVfTEVOR1RIKyIgYnl0ZXMgaW4gbGVuZ3RoLiIpfWVsc2UgaWYoISh0IGluc3RhbmNlb2YgVWludDhBcnJheSkpdGhyb3cgbmV3IFR5cGVFcnJvcignInNlZWQiIG11c3QgYmUgYSBub2RlLmpzIEJ1ZmZlciwgVWludDhBcnJheSwgb3IgYSBiaW5hcnkgc3RyaW5nLicpO3Q9cCh7bWVzc2FnZTp0LGVuY29kaW5nOiJiaW5hcnkifSk7Zm9yKHZhciByPW5ldyB1KGwuY29uc3RhbnRzLlBVQkxJQ19LRVlfQllURV9MRU5HVEgpLG49bmV3IHUobC5jb25zdGFudHMuUFJJVkFURV9LRVlfQllURV9MRU5HVEgpLGk9MDtpPDMyOysraSluW2ldPXRbaV07cmV0dXJuIGZ1bmN0aW9uKGUsdCl7dmFyIHIsYT1bUCgpLFAoKSxQKCksUCgpXSxuPUUodCwzMik7Zm9yKG5bMF0mPTI0OCxuWzMxXSY9MTI3LG5bMzFdfD02NCxfKGEsbiksQShlLGEpLHI9MDtyPDMyOysrcil0W3IrMzJdPWVbcl19KHIsbikse3B1YmxpY0tleTpyLHByaXZhdGVLZXk6bn19LGwucHJpdmF0ZUtleUZyb21Bc24xPWZ1bmN0aW9uKGUpe3ZhciB0PXt9LHI9W107aWYoIWEuYXNuMS52YWxpZGF0ZShlLHMsdCxyKSl7dmFyIG49bmV3IEVycm9yKCJJbnZhbGlkIEtleS4iKTt0aHJvdyBuLmVycm9ycz1yLG59dmFyIGk9YS5hc24xLmRlclRvT2lkKHQucHJpdmF0ZUtleU9pZCksbz1hLm9pZHMuRWREU0EyNTUxOTtpZihpIT09byl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgT0lEICInK2krJyI7IE9JRCBtdXN0IGJlICInK28rJyIuJyk7dmFyIGM9dC5wcml2YXRlS2V5O3JldHVybntwcml2YXRlS2V5Qnl0ZXM6cCh7bWVzc2FnZTphLmFzbjEuZnJvbURlcihjKS52YWx1ZSxlbmNvZGluZzoiYmluYXJ5In0pfX0sbC5wdWJsaWNLZXlGcm9tQXNuMT1mdW5jdGlvbihlKXt2YXIgdD17fSxyPVtdO2lmKCFhLmFzbjEudmFsaWRhdGUoZSxpLHQscikpe3ZhciBuPW5ldyBFcnJvcigiSW52YWxpZCBLZXkuIik7dGhyb3cgbi5lcnJvcnM9cixufXZhciBzPWEuYXNuMS5kZXJUb09pZCh0LnB1YmxpY0tleU9pZCksbz1hLm9pZHMuRWREU0EyNTUxOTtpZihzIT09byl0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgT0lEICInK3MrJyI7IE9JRCBtdXN0IGJlICInK28rJyIuJyk7dmFyIGM9dC5lZDI1NTE5UHVibGljS2V5O2lmKGMubGVuZ3RoIT09bC5jb25zdGFudHMuUFVCTElDX0tFWV9CWVRFX0xFTkdUSCl0aHJvdyBuZXcgRXJyb3IoIktleSBsZW5ndGggaXMgaW52YWxpZC4iKTtyZXR1cm4gcCh7bWVzc2FnZTpjLGVuY29kaW5nOiJiaW5hcnkifSl9LGwucHVibGljS2V5RnJvbVByaXZhdGVLZXk9ZnVuY3Rpb24oZSl7dmFyIHQ9cCh7bWVzc2FnZTooZT1lfHx7fSkucHJpdmF0ZUtleSxlbmNvZGluZzoiYmluYXJ5In0pO2lmKHQubGVuZ3RoIT09bC5jb25zdGFudHMuUFJJVkFURV9LRVlfQllURV9MRU5HVEgpdGhyb3cgbmV3IFR5cGVFcnJvcignIm9wdGlvbnMucHJpdmF0ZUtleSIgbXVzdCBoYXZlIGEgYnl0ZSBsZW5ndGggb2YgJytsLmNvbnN0YW50cy5QUklWQVRFX0tFWV9CWVRFX0xFTkdUSCk7Zm9yKHZhciByPW5ldyB1KGwuY29uc3RhbnRzLlBVQkxJQ19LRVlfQllURV9MRU5HVEgpLGE9MDthPHIubGVuZ3RoOysrYSlyW2FdPXRbMzIrYV07cmV0dXJuIHJ9LGwuc2lnbj1mdW5jdGlvbihlKXt2YXIgdD1wKGU9ZXx8e30pLHI9cCh7bWVzc2FnZTplLnByaXZhdGVLZXksZW5jb2Rpbmc6ImJpbmFyeSJ9KTtpZihyLmxlbmd0aD09PWwuY29uc3RhbnRzLlNFRURfQllURV9MRU5HVEgpcj1sLmdlbmVyYXRlS2V5UGFpcih7c2VlZDpyfSkucHJpdmF0ZUtleTtlbHNlIGlmKHIubGVuZ3RoIT09bC5jb25zdGFudHMuUFJJVkFURV9LRVlfQllURV9MRU5HVEgpdGhyb3cgbmV3IFR5cGVFcnJvcignIm9wdGlvbnMucHJpdmF0ZUtleSIgbXVzdCBoYXZlIGEgYnl0ZSBsZW5ndGggb2YgJytsLmNvbnN0YW50cy5TRUVEX0JZVEVfTEVOR1RIKyIgb3IgIitsLmNvbnN0YW50cy5QUklWQVRFX0tFWV9CWVRFX0xFTkdUSCk7dmFyIGE9bmV3IHUobC5jb25zdGFudHMuU0lHTl9CWVRFX0xFTkdUSCt0Lmxlbmd0aCk7IWZ1bmN0aW9uKGUsdCxyLGEpe3ZhciBuLGkscz1uZXcgRmxvYXQ2NEFycmF5KDY0KSxvPVtQKCksUCgpLFAoKSxQKCldLGM9RShhLDMyKTtjWzBdJj0yNDgsY1szMV0mPTEyNyxjWzMxXXw9NjQ7dmFyIHU9cis2NDtmb3Iobj0wO248cjsrK24pZVs2NCtuXT10W25dO2ZvcihuPTA7bjwzMjsrK24pZVszMituXT1jWzMyK25dO3ZhciBsPUUoZS5zdWJhcnJheSgzMiksciszMik7Zm9yKFQobCksXyhvLGwpLEEoZSxvKSxuPTMyO248NjQ7KytuKWVbbl09YVtuXTt2YXIgcD1FKGUscis2NCk7Zm9yKFQocCksbj0zMjtuPDY0OysrbilzW25dPTA7Zm9yKG49MDtuPDMyOysrbilzW25dPWxbbl07Zm9yKG49MDtuPDMyOysrbilmb3IoaT0wO2k8MzI7aSsrKXNbbitpXSs9cFtuXSpjW2ldO1MoZS5zdWJhcnJheSgzMikscyl9KGEsdCx0Lmxlbmd0aCxyKTtmb3IodmFyIG49bmV3IHUobC5jb25zdGFudHMuU0lHTl9CWVRFX0xFTkdUSCksaT0wO2k8bi5sZW5ndGg7KytpKW5baV09YVtpXTtyZXR1cm4gbn0sbC52ZXJpZnk9ZnVuY3Rpb24oZSl7dmFyIHQ9cChlPWV8fHt9KTtpZih2b2lkIDA9PT1lLnNpZ25hdHVyZSl0aHJvdyBuZXcgVHlwZUVycm9yKCcib3B0aW9ucy5zaWduYXR1cmUiIG11c3QgYmUgYSBub2RlLmpzIEJ1ZmZlciwgYSBVaW50OEFycmF5LCBhIGZvcmdlIEJ5dGVCdWZmZXIsIG9yIGEgYmluYXJ5IHN0cmluZy4nKTt2YXIgcj1wKHttZXNzYWdlOmUuc2lnbmF0dXJlLGVuY29kaW5nOiJiaW5hcnkifSk7aWYoci5sZW5ndGghPT1sLmNvbnN0YW50cy5TSUdOX0JZVEVfTEVOR1RIKXRocm93IG5ldyBUeXBlRXJyb3IoJyJvcHRpb25zLnNpZ25hdHVyZSIgbXVzdCBoYXZlIGEgYnl0ZSBsZW5ndGggb2YgJytsLmNvbnN0YW50cy5TSUdOX0JZVEVfTEVOR1RIKTt2YXIgYT1wKHttZXNzYWdlOmUucHVibGljS2V5LGVuY29kaW5nOiJiaW5hcnkifSk7aWYoYS5sZW5ndGghPT1sLmNvbnN0YW50cy5QVUJMSUNfS0VZX0JZVEVfTEVOR1RIKXRocm93IG5ldyBUeXBlRXJyb3IoJyJvcHRpb25zLnB1YmxpY0tleSIgbXVzdCBoYXZlIGEgYnl0ZSBsZW5ndGggb2YgJytsLmNvbnN0YW50cy5QVUJMSUNfS0VZX0JZVEVfTEVOR1RIKTt2YXIgbixpPW5ldyB1KGwuY29uc3RhbnRzLlNJR05fQllURV9MRU5HVEgrdC5sZW5ndGgpLHM9bmV3IHUobC5jb25zdGFudHMuU0lHTl9CWVRFX0xFTkdUSCt0Lmxlbmd0aCk7Zm9yKG49MDtuPGwuY29uc3RhbnRzLlNJR05fQllURV9MRU5HVEg7KytuKWlbbl09cltuXTtmb3Iobj0wO248dC5sZW5ndGg7KytuKWlbbitsLmNvbnN0YW50cy5TSUdOX0JZVEVfTEVOR1RIXT10W25dO3JldHVybiBmdW5jdGlvbihlLHQscixhKXt2YXIgbixpPW5ldyB1KDMyKSxzPVtQKCksUCgpLFAoKSxQKCldLG89W1AoKSxQKCksUCgpLFAoKV07aWYoLTEscjw2NClyZXR1cm4tMTtpZihmdW5jdGlvbihlLHQpe3ZhciByPVAoKSxhPVAoKSxuPVAoKSxpPVAoKSxzPVAoKSxvPVAoKSxjPVAoKTtMKGVbMl0saCksZnVuY3Rpb24oZSx0KXt2YXIgcjtmb3Iocj0wO3I8MTY7KytyKWVbcl09dFsyKnJdKyh0WzIqcisxXTw8OCk7ZVsxNV0mPTMyNzY3fShlWzFdLHQpLEsobixlWzFdKSx4KGksbixkKSxPKG4sbixlWzJdKSxWKGksZVsyXSxpKSxLKHMsaSksSyhvLHMpLHgoYyxvLHMpLHgocixjLG4pLHgocixyLGkpLGZ1bmN0aW9uKGUsdCl7dmFyIHIsYT1QKCk7Zm9yKHI9MDtyPDE2OysrcilhW3JdPXRbcl07Zm9yKHI9MjUwO3I+PTA7LS1yKUsoYSxhKSwxIT09ciYmeChhLGEsdCk7Zm9yKHI9MDtyPDE2OysrcillW3JdPWFbcl19KHIscikseChyLHIsbikseChyLHIsaSkseChyLHIsaSkseChlWzBdLHIsaSksSyhhLGVbMF0pLHgoYSxhLGkpLE4oYSxuKSYmeChlWzBdLGVbMF0sQyk7aWYoSyhhLGVbMF0pLHgoYSxhLGkpLE4oYSxuKSlyZXR1cm4tMTt3KGVbMF0pPT09dFszMV0+PjcmJk8oZVswXSxmLGVbMF0pO3JldHVybiB4KGVbM10sZVswXSxlWzFdKSwwfShvLGEpKXJldHVybi0xO2ZvcihuPTA7bjxyOysrbillW25dPXRbbl07Zm9yKG49MDtuPDMyOysrbillW24rMzJdPWFbbl07dmFyIGM9RShlLHIpO2lmKFQoYyksUihzLG8sYyksXyhvLHQuc3ViYXJyYXkoMzIpKSxJKHMsbyksQShpLHMpLHItPTY0LGsodCwwLGksMCkpe2ZvcihuPTA7bjxyOysrbillW25dPTA7cmV0dXJuLTF9Zm9yKG49MDtuPHI7KytuKWVbbl09dFtuKzY0XTtyZXR1cm4gcn0ocyxpLGkubGVuZ3RoLGEpPj0wfTt2YXIgZj1QKCksaD1QKFsxXSksZD1QKFszMDg4Myw0OTUzLDE5OTE0LDMwMTg3LDU1NDY3LDE2NzA1LDI2MzcsMTEyLDU5NTQ0LDMwNTg1LDE2NTA1LDM2MDM5LDY1MTM5LDExMTE5LDI3ODg2LDIwOTk1XSkseT1QKFs2MTc4NSw5OTA2LDM5ODI4LDYwMzc0LDQ1Mzk4LDMzNDExLDUyNzQsMjI0LDUzNTUyLDYxMTcxLDMzMDEwLDY1NDIsNjQ3NDMsMjIyMzksNTU3NzIsOTIyMl0pLGc9UChbNTQ1NTQsMzY2NDUsMTE2MTYsNTE1NDIsNDI5MzAsMzgxODEsNTEwNDAsMjY5MjQsNTY0MTIsNjQ5ODIsNTc5MDUsNDkzMTYsMjE1MDIsNTI1OTAsMTQwMzUsODU1M10pLG09UChbMjYyMDAsMjYyMTQsMjYyMTQsMjYyMTQsMjYyMTQsMjYyMTQsMjYyMTQsMjYyMTQsMjYyMTQsMjYyMTQsMjYyMTQsMjYyMTQsMjYyMTQsMjYyMTQsMjYyMTQsMjYyMTRdKSx2PW5ldyBGbG9hdDY0QXJyYXkoWzIzNywyMTEsMjQ1LDkyLDI2LDk5LDE4LDg4LDIxNCwxNTYsMjQ3LDE2MiwyMjIsMjQ5LDIyMiwyMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCwxNl0pLEM9UChbNDExMzYsMTg5NTgsNjk1MSw1MDQxNCw1ODQ4OCw0NDMzNSw2MTUwLDEyMDk5LDU1MjA3LDE1ODY3LDE1MywxMTA4NSw1NzA5OSwyMDQxNyw5MzQ0LDExMTM5XSk7ZnVuY3Rpb24gRShlLHQpe3ZhciByPWEubWQuc2hhNTEyLmNyZWF0ZSgpLG49bmV3IGMoZSk7ci51cGRhdGUobi5nZXRCeXRlcyh0KSwiYmluYXJ5Iik7dmFyIGk9ci5kaWdlc3QoKS5nZXRCeXRlcygpO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgQnVmZmVyKXJldHVybiBCdWZmZXIuZnJvbShpLCJiaW5hcnkiKTtmb3IodmFyIHM9bmV3IHUobC5jb25zdGFudHMuSEFTSF9CWVRFX0xFTkdUSCksbz0wO288NjQ7KytvKXNbb109aS5jaGFyQ29kZUF0KG8pO3JldHVybiBzfWZ1bmN0aW9uIFMoZSx0KXt2YXIgcixhLG4saTtmb3IoYT02MzthPj0zMjstLWEpe2ZvcihyPTAsbj1hLTMyLGk9YS0xMjtuPGk7KytuKXRbbl0rPXItMTYqdFthXSp2W24tKGEtMzIpXSxyPXRbbl0rMTI4Pj44LHRbbl0tPTI1NipyO3Rbbl0rPXIsdFthXT0wfWZvcihyPTAsbj0wO248MzI7KytuKXRbbl0rPXItKHRbMzFdPj40KSp2W25dLHI9dFtuXT4+OCx0W25dJj0yNTU7Zm9yKG49MDtuPDMyOysrbil0W25dLT1yKnZbbl07Zm9yKGE9MDthPDMyOysrYSl0W2ErMV0rPXRbYV0+PjgsZVthXT0yNTUmdFthXX1mdW5jdGlvbiBUKGUpe2Zvcih2YXIgdD1uZXcgRmxvYXQ2NEFycmF5KDY0KSxyPTA7cjw2NDsrK3IpdFtyXT1lW3JdLGVbcl09MDtTKGUsdCl9ZnVuY3Rpb24gSShlLHQpe3ZhciByPVAoKSxhPVAoKSxuPVAoKSxpPVAoKSxzPVAoKSxvPVAoKSxjPVAoKSx1PVAoKSxsPVAoKTtPKHIsZVsxXSxlWzBdKSxPKGwsdFsxXSx0WzBdKSx4KHIscixsKSxWKGEsZVswXSxlWzFdKSxWKGwsdFswXSx0WzFdKSx4KGEsYSxsKSx4KG4sZVszXSx0WzNdKSx4KG4sbix5KSx4KGksZVsyXSx0WzJdKSxWKGksaSxpKSxPKHMsYSxyKSxPKG8saSxuKSxWKGMsaSxuKSxWKHUsYSxyKSx4KGVbMF0scyxvKSx4KGVbMV0sdSxjKSx4KGVbMl0sYyxvKSx4KGVbM10scyx1KX1mdW5jdGlvbiBiKGUsdCxyKXtmb3IodmFyIGE9MDthPDQ7KythKUQoZVthXSx0W2FdLHIpfWZ1bmN0aW9uIEEoZSx0KXt2YXIgcj1QKCksYT1QKCksbj1QKCk7IWZ1bmN0aW9uKGUsdCl7dmFyIHIsYT1QKCk7Zm9yKHI9MDtyPDE2OysrcilhW3JdPXRbcl07Zm9yKHI9MjUzO3I+PTA7LS1yKUsoYSxhKSwyIT09ciYmNCE9PXImJngoYSxhLHQpO2ZvcihyPTA7cjwxNjsrK3IpZVtyXT1hW3JdfShuLHRbMl0pLHgocix0WzBdLG4pLHgoYSx0WzFdLG4pLEIoZSxhKSxlWzMxXV49dyhyKTw8N31mdW5jdGlvbiBCKGUsdCl7dmFyIHIsYSxuLGk9UCgpLHM9UCgpO2ZvcihyPTA7cjwxNjsrK3Ipc1tyXT10W3JdO2ZvcihVKHMpLFUocyksVShzKSxhPTA7YTwyOysrYSl7Zm9yKGlbMF09c1swXS02NTUxNyxyPTE7cjwxNTsrK3IpaVtyXT1zW3JdLTY1NTM1LShpW3ItMV0+PjE2JjEpLGlbci0xXSY9NjU1MzU7aVsxNV09c1sxNV0tMzI3NjctKGlbMTRdPj4xNiYxKSxuPWlbMTVdPj4xNiYxLGlbMTRdJj02NTUzNSxEKHMsaSwxLW4pfWZvcihyPTA7cjwxNjtyKyspZVsyKnJdPTI1NSZzW3JdLGVbMipyKzFdPXNbcl0+Pjh9ZnVuY3Rpb24gTihlLHQpe3ZhciByPW5ldyB1KDMyKSxhPW5ldyB1KDMyKTtyZXR1cm4gQihyLGUpLEIoYSx0KSxrKHIsMCxhLDApfWZ1bmN0aW9uIGsoZSx0LHIsYSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxyLGEsbil7dmFyIGkscz0wO2ZvcihpPTA7aTxuOysraSlzfD1lW3QraV1eclthK2ldO3JldHVybigxJnMtMT4+PjgpLTF9KGUsdCxyLGEsMzIpfWZ1bmN0aW9uIHcoZSl7dmFyIHQ9bmV3IHUoMzIpO3JldHVybiBCKHQsZSksMSZ0WzBdfWZ1bmN0aW9uIFIoZSx0LHIpe3ZhciBhLG47Zm9yKEwoZVswXSxmKSxMKGVbMV0saCksTChlWzJdLGgpLEwoZVszXSxmKSxuPTI1NTtuPj0wOy0tbiliKGUsdCxhPXJbbi84fDBdPj4oNyZuKSYxKSxJKHQsZSksSShlLGUpLGIoZSx0LGEpfWZ1bmN0aW9uIF8oZSx0KXt2YXIgcj1bUCgpLFAoKSxQKCksUCgpXTtMKHJbMF0sZyksTChyWzFdLG0pLEwoclsyXSxoKSx4KHJbM10sZyxtKSxSKGUscix0KX1mdW5jdGlvbiBMKGUsdCl7dmFyIHI7Zm9yKHI9MDtyPDE2O3IrKyllW3JdPTB8dFtyXX1mdW5jdGlvbiBVKGUpe3ZhciB0LHIsYT0xO2Zvcih0PTA7dDwxNjsrK3Qpcj1lW3RdK2ErNjU1MzUsYT1NYXRoLmZsb29yKHIvNjU1MzYpLGVbdF09ci02NTUzNiphO2VbMF0rPWEtMSszNyooYS0xKX1mdW5jdGlvbiBEKGUsdCxyKXtmb3IodmFyIGEsbj1+KHItMSksaT0wO2k8MTY7KytpKWE9biYoZVtpXV50W2ldKSxlW2ldXj1hLHRbaV1ePWF9ZnVuY3Rpb24gUChlKXt2YXIgdCxyPW5ldyBGbG9hdDY0QXJyYXkoMTYpO2lmKGUpZm9yKHQ9MDt0PGUubGVuZ3RoOysrdClyW3RdPWVbdF07cmV0dXJuIHJ9ZnVuY3Rpb24gVihlLHQscil7Zm9yKHZhciBhPTA7YTwxNjsrK2EpZVthXT10W2FdK3JbYV19ZnVuY3Rpb24gTyhlLHQscil7Zm9yKHZhciBhPTA7YTwxNjsrK2EpZVthXT10W2FdLXJbYV19ZnVuY3Rpb24gSyhlLHQpe3goZSx0LHQpfWZ1bmN0aW9uIHgoZSx0LHIpe3ZhciBhLG4saT0wLHM9MCxvPTAsYz0wLHU9MCxsPTAscD0wLGY9MCxoPTAsZD0wLHk9MCxnPTAsbT0wLHY9MCxDPTAsRT0wLFM9MCxUPTAsST0wLGI9MCxBPTAsQj0wLE49MCxrPTAsdz0wLFI9MCxfPTAsTD0wLFU9MCxEPTAsUD0wLFY9clswXSxPPXJbMV0sSz1yWzJdLHg9clszXSxNPXJbNF0sRj1yWzVdLGo9cls2XSxxPXJbN10sRz1yWzhdLEg9cls5XSxRPXJbMTBdLHo9clsxMV0sWT1yWzEyXSxXPXJbMTNdLFg9clsxNF0sWj1yWzE1XTtpKz0oYT10WzBdKSpWLHMrPWEqTyxvKz1hKkssYys9YSp4LHUrPWEqTSxsKz1hKkYscCs9YSpqLGYrPWEqcSxoKz1hKkcsZCs9YSpILHkrPWEqUSxnKz1hKnosbSs9YSpZLHYrPWEqVyxDKz1hKlgsRSs9YSpaLHMrPShhPXRbMV0pKlYsbys9YSpPLGMrPWEqSyx1Kz1hKngsbCs9YSpNLHArPWEqRixmKz1hKmosaCs9YSpxLGQrPWEqRyx5Kz1hKkgsZys9YSpRLG0rPWEqeix2Kz1hKlksQys9YSpXLEUrPWEqWCxTKz1hKlosbys9KGE9dFsyXSkqVixjKz1hKk8sdSs9YSpLLGwrPWEqeCxwKz1hKk0sZis9YSpGLGgrPWEqaixkKz1hKnEseSs9YSpHLGcrPWEqSCxtKz1hKlEsdis9YSp6LEMrPWEqWSxFKz1hKlcsUys9YSpYLFQrPWEqWixjKz0oYT10WzNdKSpWLHUrPWEqTyxsKz1hKksscCs9YSp4LGYrPWEqTSxoKz1hKkYsZCs9YSpqLHkrPWEqcSxnKz1hKkcsbSs9YSpILHYrPWEqUSxDKz1hKnosRSs9YSpZLFMrPWEqVyxUKz1hKlgsSSs9YSpaLHUrPShhPXRbNF0pKlYsbCs9YSpPLHArPWEqSyxmKz1hKngsaCs9YSpNLGQrPWEqRix5Kz1hKmosZys9YSpxLG0rPWEqRyx2Kz1hKkgsQys9YSpRLEUrPWEqeixTKz1hKlksVCs9YSpXLEkrPWEqWCxiKz1hKlosbCs9KGE9dFs1XSkqVixwKz1hKk8sZis9YSpLLGgrPWEqeCxkKz1hKk0seSs9YSpGLGcrPWEqaixtKz1hKnEsdis9YSpHLEMrPWEqSCxFKz1hKlEsUys9YSp6LFQrPWEqWSxJKz1hKlcsYis9YSpYLEErPWEqWixwKz0oYT10WzZdKSpWLGYrPWEqTyxoKz1hKkssZCs9YSp4LHkrPWEqTSxnKz1hKkYsbSs9YSpqLHYrPWEqcSxDKz1hKkcsRSs9YSpILFMrPWEqUSxUKz1hKnosSSs9YSpZLGIrPWEqVyxBKz1hKlgsQis9YSpaLGYrPShhPXRbN10pKlYsaCs9YSpPLGQrPWEqSyx5Kz1hKngsZys9YSpNLG0rPWEqRix2Kz1hKmosQys9YSpxLEUrPWEqRyxTKz1hKkgsVCs9YSpRLEkrPWEqeixiKz1hKlksQSs9YSpXLEIrPWEqWCxOKz1hKlosaCs9KGE9dFs4XSkqVixkKz1hKk8seSs9YSpLLGcrPWEqeCxtKz1hKk0sdis9YSpGLEMrPWEqaixFKz1hKnEsUys9YSpHLFQrPWEqSCxJKz1hKlEsYis9YSp6LEErPWEqWSxCKz1hKlcsTis9YSpYLGsrPWEqWixkKz0oYT10WzldKSpWLHkrPWEqTyxnKz1hKkssbSs9YSp4LHYrPWEqTSxDKz1hKkYsRSs9YSpqLFMrPWEqcSxUKz1hKkcsSSs9YSpILGIrPWEqUSxBKz1hKnosQis9YSpZLE4rPWEqVyxrKz1hKlgsdys9YSpaLHkrPShhPXRbMTBdKSpWLGcrPWEqTyxtKz1hKkssdis9YSp4LEMrPWEqTSxFKz1hKkYsUys9YSpqLFQrPWEqcSxJKz1hKkcsYis9YSpILEErPWEqUSxCKz1hKnosTis9YSpZLGsrPWEqVyx3Kz1hKlgsUis9YSpaLGcrPShhPXRbMTFdKSpWLG0rPWEqTyx2Kz1hKkssQys9YSp4LEUrPWEqTSxTKz1hKkYsVCs9YSpqLEkrPWEqcSxiKz1hKkcsQSs9YSpILEIrPWEqUSxOKz1hKnosays9YSpZLHcrPWEqVyxSKz1hKlgsXys9YSpaLG0rPShhPXRbMTJdKSpWLHYrPWEqTyxDKz1hKkssRSs9YSp4LFMrPWEqTSxUKz1hKkYsSSs9YSpqLGIrPWEqcSxBKz1hKkcsQis9YSpILE4rPWEqUSxrKz1hKnosdys9YSpZLFIrPWEqVyxfKz1hKlgsTCs9YSpaLHYrPShhPXRbMTNdKSpWLEMrPWEqTyxFKz1hKkssUys9YSp4LFQrPWEqTSxJKz1hKkYsYis9YSpqLEErPWEqcSxCKz1hKkcsTis9YSpILGsrPWEqUSx3Kz1hKnosUis9YSpZLF8rPWEqVyxMKz1hKlgsVSs9YSpaLEMrPShhPXRbMTRdKSpWLEUrPWEqTyxTKz1hKkssVCs9YSp4LEkrPWEqTSxiKz1hKkYsQSs9YSpqLEIrPWEqcSxOKz1hKkcsays9YSpILHcrPWEqUSxSKz1hKnosXys9YSpZLEwrPWEqVyxVKz1hKlgsRCs9YSpaLEUrPShhPXRbMTVdKSpWLHMrPTM4KihUKz1hKkspLG8rPTM4KihJKz1hKngpLGMrPTM4KihiKz1hKk0pLHUrPTM4KihBKz1hKkYpLGwrPTM4KihCKz1hKmopLHArPTM4KihOKz1hKnEpLGYrPTM4KihrKz1hKkcpLGgrPTM4Kih3Kz1hKkgpLGQrPTM4KihSKz1hKlEpLHkrPTM4KihfKz1hKnopLGcrPTM4KihMKz1hKlkpLG0rPTM4KihVKz1hKlcpLHYrPTM4KihEKz1hKlgpLEMrPTM4KihQKz1hKlopLGk9KGE9KGkrPTM4KihTKz1hKk8pKSsobj0xKSs2NTUzNSktNjU1MzYqKG49TWF0aC5mbG9vcihhLzY1NTM2KSkscz0oYT1zK24rNjU1MzUpLTY1NTM2KihuPU1hdGguZmxvb3IoYS82NTUzNikpLG89KGE9bytuKzY1NTM1KS02NTUzNioobj1NYXRoLmZsb29yKGEvNjU1MzYpKSxjPShhPWMrbis2NTUzNSktNjU1MzYqKG49TWF0aC5mbG9vcihhLzY1NTM2KSksdT0oYT11K24rNjU1MzUpLTY1NTM2KihuPU1hdGguZmxvb3IoYS82NTUzNikpLGw9KGE9bCtuKzY1NTM1KS02NTUzNioobj1NYXRoLmZsb29yKGEvNjU1MzYpKSxwPShhPXArbis2NTUzNSktNjU1MzYqKG49TWF0aC5mbG9vcihhLzY1NTM2KSksZj0oYT1mK24rNjU1MzUpLTY1NTM2KihuPU1hdGguZmxvb3IoYS82NTUzNikpLGg9KGE9aCtuKzY1NTM1KS02NTUzNioobj1NYXRoLmZsb29yKGEvNjU1MzYpKSxkPShhPWQrbis2NTUzNSktNjU1MzYqKG49TWF0aC5mbG9vcihhLzY1NTM2KSkseT0oYT15K24rNjU1MzUpLTY1NTM2KihuPU1hdGguZmxvb3IoYS82NTUzNikpLGc9KGE9ZytuKzY1NTM1KS02NTUzNioobj1NYXRoLmZsb29yKGEvNjU1MzYpKSxtPShhPW0rbis2NTUzNSktNjU1MzYqKG49TWF0aC5mbG9vcihhLzY1NTM2KSksdj0oYT12K24rNjU1MzUpLTY1NTM2KihuPU1hdGguZmxvb3IoYS82NTUzNikpLEM9KGE9QytuKzY1NTM1KS02NTUzNioobj1NYXRoLmZsb29yKGEvNjU1MzYpKSxFPShhPUUrbis2NTUzNSktNjU1MzYqKG49TWF0aC5mbG9vcihhLzY1NTM2KSksaT0oYT0oaSs9bi0xKzM3KihuLTEpKSsobj0xKSs2NTUzNSktNjU1MzYqKG49TWF0aC5mbG9vcihhLzY1NTM2KSkscz0oYT1zK24rNjU1MzUpLTY1NTM2KihuPU1hdGguZmxvb3IoYS82NTUzNikpLG89KGE9bytuKzY1NTM1KS02NTUzNioobj1NYXRoLmZsb29yKGEvNjU1MzYpKSxjPShhPWMrbis2NTUzNSktNjU1MzYqKG49TWF0aC5mbG9vcihhLzY1NTM2KSksdT0oYT11K24rNjU1MzUpLTY1NTM2KihuPU1hdGguZmxvb3IoYS82NTUzNikpLGw9KGE9bCtuKzY1NTM1KS02NTUzNioobj1NYXRoLmZsb29yKGEvNjU1MzYpKSxwPShhPXArbis2NTUzNSktNjU1MzYqKG49TWF0aC5mbG9vcihhLzY1NTM2KSksZj0oYT1mK24rNjU1MzUpLTY1NTM2KihuPU1hdGguZmxvb3IoYS82NTUzNikpLGg9KGE9aCtuKzY1NTM1KS02NTUzNioobj1NYXRoLmZsb29yKGEvNjU1MzYpKSxkPShhPWQrbis2NTUzNSktNjU1MzYqKG49TWF0aC5mbG9vcihhLzY1NTM2KSkseT0oYT15K24rNjU1MzUpLTY1NTM2KihuPU1hdGguZmxvb3IoYS82NTUzNikpLGc9KGE9ZytuKzY1NTM1KS02NTUzNioobj1NYXRoLmZsb29yKGEvNjU1MzYpKSxtPShhPW0rbis2NTUzNSktNjU1MzYqKG49TWF0aC5mbG9vcihhLzY1NTM2KSksdj0oYT12K24rNjU1MzUpLTY1NTM2KihuPU1hdGguZmxvb3IoYS82NTUzNikpLEM9KGE9QytuKzY1NTM1KS02NTUzNioobj1NYXRoLmZsb29yKGEvNjU1MzYpKSxFPShhPUUrbis2NTUzNSktNjU1MzYqKG49TWF0aC5mbG9vcihhLzY1NTM2KSksaSs9bi0xKzM3KihuLTEpLGVbMF09aSxlWzFdPXMsZVsyXT1vLGVbM109YyxlWzRdPXUsZVs1XT1sLGVbNl09cCxlWzddPWYsZVs4XT1oLGVbOV09ZCxlWzEwXT15LGVbMTFdPWcsZVsxMl09bSxlWzEzXT12LGVbMTRdPUMsZVsxNV09RX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO3IoMyk7dmFyIG49YS5hc24xO3QucHJpdmF0ZUtleVZhbGlkYXRvcj17bmFtZToiUHJpdmF0ZUtleUluZm8iLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLHZhbHVlOlt7bmFtZToiUHJpdmF0ZUtleUluZm8udmVyc2lvbiIsdGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuSU5URUdFUixjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJwcml2YXRlS2V5VmVyc2lvbiJ9LHtuYW1lOiJQcml2YXRlS2V5SW5mby5wcml2YXRlS2V5QWxnb3JpdGhtIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCx2YWx1ZTpbe25hbWU6IkFsZ29yaXRobUlkZW50aWZpZXIuYWxnb3JpdGhtIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5PSUQsY29uc3RydWN0ZWQ6ITEsY2FwdHVyZToicHJpdmF0ZUtleU9pZCJ9XX0se25hbWU6IlByaXZhdGVLZXlJbmZvIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5PQ1RFVFNUUklORyxjb25zdHJ1Y3RlZDohMSxjYXB0dXJlOiJwcml2YXRlS2V5In1dfSx0LnB1YmxpY0tleVZhbGlkYXRvcj17bmFtZToiU3ViamVjdFB1YmxpY0tleUluZm8iLHRhZ0NsYXNzOm4uQ2xhc3MuVU5JVkVSU0FMLHR5cGU6bi5UeXBlLlNFUVVFTkNFLGNvbnN0cnVjdGVkOiEwLGNhcHR1cmVBc24xOiJzdWJqZWN0UHVibGljS2V5SW5mbyIsdmFsdWU6W3tuYW1lOiJTdWJqZWN0UHVibGljS2V5SW5mby5BbGdvcml0aG1JZGVudGlmaWVyIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5TRVFVRU5DRSxjb25zdHJ1Y3RlZDohMCx2YWx1ZTpbe25hbWU6IkFsZ29yaXRobUlkZW50aWZpZXIuYWxnb3JpdGhtIix0YWdDbGFzczpuLkNsYXNzLlVOSVZFUlNBTCx0eXBlOm4uVHlwZS5PSUQsY29uc3RydWN0ZWQ6ITEsY2FwdHVyZToicHVibGljS2V5T2lkIn1dfSx7dGFnQ2xhc3M6bi5DbGFzcy5VTklWRVJTQUwsdHlwZTpuLlR5cGUuQklUU1RSSU5HLGNvbnN0cnVjdGVkOiExLGNvbXBvc2VkOiEwLGNhcHR1cmVCaXRTdHJpbmdWYWx1ZToiZWQyNTUxOVB1YmxpY0tleSJ9XX19LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO3IoMSkscigyKSxyKDEyKSxlLmV4cG9ydHM9YS5rZW09YS5rZW18fHt9O3ZhciBuPWEuanNibi5CaWdJbnRlZ2VyO2Z1bmN0aW9uIGkoZSx0LHIsbil7ZS5nZW5lcmF0ZT1mdW5jdGlvbihlLGkpe2Zvcih2YXIgcz1uZXcgYS51dGlsLkJ5dGVCdWZmZXIsbz1NYXRoLmNlaWwoaS9uKStyLGM9bmV3IGEudXRpbC5CeXRlQnVmZmVyLHU9cjt1PG87Kyt1KXtjLnB1dEludDMyKHUpLHQuc3RhcnQoKSx0LnVwZGF0ZShlK2MuZ2V0Qnl0ZXMoKSk7dmFyIGw9dC5kaWdlc3QoKTtzLnB1dEJ5dGVzKGwuZ2V0Qnl0ZXMobikpfXJldHVybiBzLnRydW5jYXRlKHMubGVuZ3RoKCktaSkscy5nZXRCeXRlcygpfX1hLmtlbS5yc2E9e30sYS5rZW0ucnNhLmNyZWF0ZT1mdW5jdGlvbihlLHQpe3ZhciByPSh0PXR8fHt9KS5wcm5nfHxhLnJhbmRvbSxpPXtlbmNyeXB0OmZ1bmN0aW9uKHQsaSl7dmFyIHMsbz1NYXRoLmNlaWwodC5uLmJpdExlbmd0aCgpLzgpO2Rve3M9bmV3IG4oYS51dGlsLmJ5dGVzVG9IZXgoci5nZXRCeXRlc1N5bmMobykpLDE2KS5tb2QodC5uKX13aGlsZShzLmNvbXBhcmVUbyhuLk9ORSk8PTApO3ZhciBjPW8tKHM9YS51dGlsLmhleFRvQnl0ZXMocy50b1N0cmluZygxNikpKS5sZW5ndGg7cmV0dXJuIGM+MCYmKHM9YS51dGlsLmZpbGxTdHJpbmcoU3RyaW5nLmZyb21DaGFyQ29kZSgwKSxjKStzKSx7ZW5jYXBzdWxhdGlvbjp0LmVuY3J5cHQocywiTk9ORSIpLGtleTplLmdlbmVyYXRlKHMsaSl9fSxkZWNyeXB0OmZ1bmN0aW9uKHQscixhKXt2YXIgbj10LmRlY3J5cHQociwiTk9ORSIpO3JldHVybiBlLmdlbmVyYXRlKG4sYSl9fTtyZXR1cm4gaX0sYS5rZW0ua2RmMT1mdW5jdGlvbihlLHQpe2kodGhpcyxlLDAsdHx8ZS5kaWdlc3RMZW5ndGgpfSxhLmtlbS5rZGYyPWZ1bmN0aW9uKGUsdCl7aSh0aGlzLGUsMSx0fHxlLmRpZ2VzdExlbmd0aCl9fSxmdW5jdGlvbihlLHQscil7ZS5leHBvcnRzPXIoNCkscigxNCkscig5KSxyKDIzKSxyKDMyKX0sZnVuY3Rpb24oZSx0LHIpe3ZhciBhPXIoMCk7cig1KSxyKDMpLHIoMTApLHIoNikscig3KSxyKDI5KSxyKDIpLHIoMSkscigxNyk7dmFyIG49YS5hc24xLGk9ZS5leHBvcnRzPWEucGtjczc9YS5wa2NzN3x8e307ZnVuY3Rpb24gcyhlKXt2YXIgdD17fSxyPVtdO2lmKCFuLnZhbGlkYXRlKGUsaS5hc24xLnJlY2lwaWVudEluZm9WYWxpZGF0b3IsdCxyKSl7dmFyIHM9bmV3IEVycm9yKCJDYW5ub3QgcmVhZCBQS0NTIzcgUmVjaXBpZW50SW5mby4gQVNOLjEgb2JqZWN0IGlzIG5vdCBhbiBQS0NTIzcgUmVjaXBpZW50SW5mby4iKTt0aHJvdyBzLmVycm9ycz1yLHN9cmV0dXJue3ZlcnNpb246dC52ZXJzaW9uLmNoYXJDb2RlQXQoMCksaXNzdWVyOmEucGtpLlJETkF0dHJpYnV0ZXNBc0FycmF5KHQuaXNzdWVyKSxzZXJpYWxOdW1iZXI6YS51dGlsLmNyZWF0ZUJ1ZmZlcih0LnNlcmlhbCkudG9IZXgoKSxlbmNyeXB0ZWRDb250ZW50OnthbGdvcml0aG06bi5kZXJUb09pZCh0LmVuY0FsZ29yaXRobSkscGFyYW1ldGVyOnQuZW5jUGFyYW1ldGVyLnZhbHVlLGNvbnRlbnQ6dC5lbmNLZXl9fX1mdW5jdGlvbiBvKGUpe2Zvcih2YXIgdCxyPVtdLGk9MDtpPGUubGVuZ3RoOysraSlyLnB1c2goKHQ9ZVtpXSxuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5JTlRFR0VSLCExLG4uaW50ZWdlclRvRGVyKHQudmVyc2lvbikuZ2V0Qnl0ZXMoKSksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFthLnBraS5kaXN0aW5ndWlzaGVkTmFtZVRvQXNuMSh7YXR0cmlidXRlczp0Lmlzc3Vlcn0pLG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5JTlRFR0VSLCExLGEudXRpbC5oZXhUb0J5dGVzKHQuc2VyaWFsTnVtYmVyKSldKSxuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PSUQsITEsbi5vaWRUb0Rlcih0LmVuY3J5cHRlZENvbnRlbnQuYWxnb3JpdGhtKS5nZXRCeXRlcygpKSxuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuTlVMTCwhMSwiIildKSxuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0NURVRTVFJJTkcsITEsdC5lbmNyeXB0ZWRDb250ZW50LmNvbnRlbnQpXSkpKTtyZXR1cm4gcn1mdW5jdGlvbiBjKGUpe3ZhciB0PW4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLklOVEVHRVIsITEsbi5pbnRlZ2VyVG9EZXIoZS52ZXJzaW9uKS5nZXRCeXRlcygpKSxuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW2EucGtpLmRpc3Rpbmd1aXNoZWROYW1lVG9Bc24xKHthdHRyaWJ1dGVzOmUuaXNzdWVyfSksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLklOVEVHRVIsITEsYS51dGlsLmhleFRvQnl0ZXMoZS5zZXJpYWxOdW1iZXIpKV0pLG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9JRCwhMSxuLm9pZFRvRGVyKGUuZGlnZXN0QWxnb3JpdGhtKS5nZXRCeXRlcygpKSxuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuTlVMTCwhMSwiIildKV0pO2lmKGUuYXV0aGVudGljYXRlZEF0dHJpYnV0ZXNBc24xJiZ0LnZhbHVlLnB1c2goZS5hdXRoZW50aWNhdGVkQXR0cmlidXRlc0FzbjEpLHQudmFsdWUucHVzaChuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PSUQsITEsbi5vaWRUb0RlcihlLnNpZ25hdHVyZUFsZ29yaXRobSkuZ2V0Qnl0ZXMoKSksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk5VTEwsITEsIiIpXSkpLHQudmFsdWUucHVzaChuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0NURVRTVFJJTkcsITEsZS5zaWduYXR1cmUpKSxlLnVuYXV0aGVudGljYXRlZEF0dHJpYnV0ZXMubGVuZ3RoPjApe2Zvcih2YXIgcj1uLmNyZWF0ZShuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsMSwhMCxbXSksaT0wO2k8ZS51bmF1dGhlbnRpY2F0ZWRBdHRyaWJ1dGVzLmxlbmd0aDsrK2kpe3ZhciBzPWUudW5hdXRoZW50aWNhdGVkQXR0cmlidXRlc1tpXTtyLnZhbHVlcy5wdXNoKHUocykpfXQudmFsdWUucHVzaChyKX1yZXR1cm4gdH1mdW5jdGlvbiB1KGUpe3ZhciB0O2lmKGUudHlwZT09PWEucGtpLm9pZHMuY29udGVudFR5cGUpdD1uLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0lELCExLG4ub2lkVG9EZXIoZS52YWx1ZSkuZ2V0Qnl0ZXMoKSk7ZWxzZSBpZihlLnR5cGU9PT1hLnBraS5vaWRzLm1lc3NhZ2VEaWdlc3QpdD1uLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0NURVRTVFJJTkcsITEsZS52YWx1ZS5ieXRlcygpKTtlbHNlIGlmKGUudHlwZT09PWEucGtpLm9pZHMuc2lnbmluZ1RpbWUpe3ZhciByPW5ldyBEYXRlKCIxOTUwLTAxLTAxVDAwOjAwOjAwWiIpLGk9bmV3IERhdGUoIjIwNTAtMDEtMDFUMDA6MDA6MDBaIikscz1lLnZhbHVlO2lmKCJzdHJpbmciPT10eXBlb2Ygcyl7dmFyIG89RGF0ZS5wYXJzZShzKTtzPWlzTmFOKG8pPzEzPT09cy5sZW5ndGg/bi51dGNUaW1lVG9EYXRlKHMpOm4uZ2VuZXJhbGl6ZWRUaW1lVG9EYXRlKHMpOm5ldyBEYXRlKG8pfXQ9cz49ciYmczxpP24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5VVENUSU1FLCExLG4uZGF0ZVRvVXRjVGltZShzKSk6bi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLkdFTkVSQUxJWkVEVElNRSwhMSxuLmRhdGVUb0dlbmVyYWxpemVkVGltZShzKSl9cmV0dXJuIG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9JRCwhMSxuLm9pZFRvRGVyKGUudHlwZSkuZ2V0Qnl0ZXMoKSksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFVCwhMCxbdF0pXSl9ZnVuY3Rpb24gbChlLHQscil7dmFyIGk9e307aWYoIW4udmFsaWRhdGUodCxyLGksW10pKXt2YXIgcz1uZXcgRXJyb3IoIkNhbm5vdCByZWFkIFBLQ1MjNyBtZXNzYWdlLiBBU04uMSBvYmplY3QgaXMgbm90IGEgc3VwcG9ydGVkIFBLQ1MjNyBtZXNzYWdlLiIpO3Rocm93IHMuZXJyb3JzPXMsc31pZihuLmRlclRvT2lkKGkuY29udGVudFR5cGUpIT09YS5wa2kub2lkcy5kYXRhKXRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgUEtDUyM3IG1lc3NhZ2UuIE9ubHkgd3JhcHBlZCBDb250ZW50VHlwZSBEYXRhIHN1cHBvcnRlZC4iKTtpZihpLmVuY3J5cHRlZENvbnRlbnQpe3ZhciBvPSIiO2lmKGEudXRpbC5pc0FycmF5KGkuZW5jcnlwdGVkQ29udGVudCkpZm9yKHZhciBjPTA7YzxpLmVuY3J5cHRlZENvbnRlbnQubGVuZ3RoOysrYyl7aWYoaS5lbmNyeXB0ZWRDb250ZW50W2NdLnR5cGUhPT1uLlR5cGUuT0NURVRTVFJJTkcpdGhyb3cgbmV3IEVycm9yKCJNYWxmb3JtZWQgUEtDUyM3IG1lc3NhZ2UsIGV4cGVjdGluZyBlbmNyeXB0ZWQgY29udGVudCBjb25zdHJ1Y3RlZCBvZiBvbmx5IE9DVEVUIFNUUklORyBvYmplY3RzLiIpO28rPWkuZW5jcnlwdGVkQ29udGVudFtjXS52YWx1ZX1lbHNlIG89aS5lbmNyeXB0ZWRDb250ZW50O2UuZW5jcnlwdGVkQ29udGVudD17YWxnb3JpdGhtOm4uZGVyVG9PaWQoaS5lbmNBbGdvcml0aG0pLHBhcmFtZXRlcjphLnV0aWwuY3JlYXRlQnVmZmVyKGkuZW5jUGFyYW1ldGVyLnZhbHVlKSxjb250ZW50OmEudXRpbC5jcmVhdGVCdWZmZXIobyl9fWlmKGkuY29udGVudCl7bz0iIjtpZihhLnV0aWwuaXNBcnJheShpLmNvbnRlbnQpKWZvcihjPTA7YzxpLmNvbnRlbnQubGVuZ3RoOysrYyl7aWYoaS5jb250ZW50W2NdLnR5cGUhPT1uLlR5cGUuT0NURVRTVFJJTkcpdGhyb3cgbmV3IEVycm9yKCJNYWxmb3JtZWQgUEtDUyM3IG1lc3NhZ2UsIGV4cGVjdGluZyBjb250ZW50IGNvbnN0cnVjdGVkIG9mIG9ubHkgT0NURVQgU1RSSU5HIG9iamVjdHMuIik7bys9aS5jb250ZW50W2NdLnZhbHVlfWVsc2Ugbz1pLmNvbnRlbnQ7ZS5jb250ZW50PWEudXRpbC5jcmVhdGVCdWZmZXIobyl9cmV0dXJuIGUudmVyc2lvbj1pLnZlcnNpb24uY2hhckNvZGVBdCgwKSxlLnJhd0NhcHR1cmU9aSxpfWZ1bmN0aW9uIHAoZSl7aWYodm9pZCAwPT09ZS5lbmNyeXB0ZWRDb250ZW50LmtleSl0aHJvdyBuZXcgRXJyb3IoIlN5bW1ldHJpYyBrZXkgbm90IGF2YWlsYWJsZS4iKTtpZih2b2lkIDA9PT1lLmNvbnRlbnQpe3ZhciB0O3N3aXRjaChlLmVuY3J5cHRlZENvbnRlbnQuYWxnb3JpdGhtKXtjYXNlIGEucGtpLm9pZHNbImFlczEyOC1DQkMiXTpjYXNlIGEucGtpLm9pZHNbImFlczE5Mi1DQkMiXTpjYXNlIGEucGtpLm9pZHNbImFlczI1Ni1DQkMiXTp0PWEuYWVzLmNyZWF0ZURlY3J5cHRpb25DaXBoZXIoZS5lbmNyeXB0ZWRDb250ZW50LmtleSk7YnJlYWs7Y2FzZSBhLnBraS5vaWRzLmRlc0NCQzpjYXNlIGEucGtpLm9pZHNbImRlcy1FREUzLUNCQyJdOnQ9YS5kZXMuY3JlYXRlRGVjcnlwdGlvbkNpcGhlcihlLmVuY3J5cHRlZENvbnRlbnQua2V5KTticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgc3ltbWV0cmljIGNpcGhlciwgT0lEICIrZS5lbmNyeXB0ZWRDb250ZW50LmFsZ29yaXRobSl9aWYodC5zdGFydChlLmVuY3J5cHRlZENvbnRlbnQucGFyYW1ldGVyKSx0LnVwZGF0ZShlLmVuY3J5cHRlZENvbnRlbnQuY29udGVudCksIXQuZmluaXNoKCkpdGhyb3cgbmV3IEVycm9yKCJTeW1tZXRyaWMgZGVjcnlwdGlvbiBmYWlsZWQuIik7ZS5jb250ZW50PXQub3V0cHV0fX1pLm1lc3NhZ2VGcm9tUGVtPWZ1bmN0aW9uKGUpe3ZhciB0PWEucGVtLmRlY29kZShlKVswXTtpZigiUEtDUzciIT09dC50eXBlKXt2YXIgcj1uZXcgRXJyb3IoJ0NvdWxkIG5vdCBjb252ZXJ0IFBLQ1MjNyBtZXNzYWdlIGZyb20gUEVNOyBQRU0gaGVhZGVyIHR5cGUgaXMgbm90ICJQS0NTIzciLicpO3Rocm93IHIuaGVhZGVyVHlwZT10LnR5cGUscn1pZih0LnByb2NUeXBlJiYiRU5DUllQVEVEIj09PXQucHJvY1R5cGUudHlwZSl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBjb252ZXJ0IFBLQ1MjNyBtZXNzYWdlIGZyb20gUEVNOyBQRU0gaXMgZW5jcnlwdGVkLiIpO3ZhciBzPW4uZnJvbURlcih0LmJvZHkpO3JldHVybiBpLm1lc3NhZ2VGcm9tQXNuMShzKX0saS5tZXNzYWdlVG9QZW09ZnVuY3Rpb24oZSx0KXt2YXIgcj17dHlwZToiUEtDUzciLGJvZHk6bi50b0RlcihlLnRvQXNuMSgpKS5nZXRCeXRlcygpfTtyZXR1cm4gYS5wZW0uZW5jb2RlKHIse21heGxpbmU6dH0pfSxpLm1lc3NhZ2VGcm9tQXNuMT1mdW5jdGlvbihlKXt2YXIgdD17fSxyPVtdO2lmKCFuLnZhbGlkYXRlKGUsaS5hc24xLmNvbnRlbnRJbmZvVmFsaWRhdG9yLHQscikpe3ZhciBzPW5ldyBFcnJvcigiQ2Fubm90IHJlYWQgUEtDUyM3IG1lc3NhZ2UuIEFTTi4xIG9iamVjdCBpcyBub3QgYW4gUEtDUyM3IENvbnRlbnRJbmZvLiIpO3Rocm93IHMuZXJyb3JzPXIsc312YXIgbyxjPW4uZGVyVG9PaWQodC5jb250ZW50VHlwZSk7c3dpdGNoKGMpe2Nhc2UgYS5wa2kub2lkcy5lbnZlbG9wZWREYXRhOm89aS5jcmVhdGVFbnZlbG9wZWREYXRhKCk7YnJlYWs7Y2FzZSBhLnBraS5vaWRzLmVuY3J5cHRlZERhdGE6bz1pLmNyZWF0ZUVuY3J5cHRlZERhdGEoKTticmVhaztjYXNlIGEucGtpLm9pZHMuc2lnbmVkRGF0YTpvPWkuY3JlYXRlU2lnbmVkRGF0YSgpO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgcmVhZCBQS0NTIzcgbWVzc2FnZS4gQ29udGVudFR5cGUgd2l0aCBPSUQgIitjKyIgaXMgbm90ICh5ZXQpIHN1cHBvcnRlZC4iKX1yZXR1cm4gby5mcm9tQXNuMSh0LmNvbnRlbnQudmFsdWVbMF0pLG99LGkuY3JlYXRlU2lnbmVkRGF0YT1mdW5jdGlvbigpe3ZhciBlPW51bGw7cmV0dXJuIGU9e3R5cGU6YS5wa2kub2lkcy5zaWduZWREYXRhLHZlcnNpb246MSxjZXJ0aWZpY2F0ZXM6W10sY3JsczpbXSxzaWduZXJzOltdLGRpZ2VzdEFsZ29yaXRobUlkZW50aWZpZXJzOltdLGNvbnRlbnRJbmZvOm51bGwsc2lnbmVySW5mb3M6W10sZnJvbUFzbjE6ZnVuY3Rpb24odCl7aWYobChlLHQsaS5hc24xLnNpZ25lZERhdGFWYWxpZGF0b3IpLGUuY2VydGlmaWNhdGVzPVtdLGUuY3Jscz1bXSxlLmRpZ2VzdEFsZ29yaXRobUlkZW50aWZpZXJzPVtdLGUuY29udGVudEluZm89bnVsbCxlLnNpZ25lckluZm9zPVtdLGUucmF3Q2FwdHVyZS5jZXJ0aWZpY2F0ZXMpZm9yKHZhciByPWUucmF3Q2FwdHVyZS5jZXJ0aWZpY2F0ZXMudmFsdWUsbj0wO248ci5sZW5ndGg7KytuKWUuY2VydGlmaWNhdGVzLnB1c2goYS5wa2kuY2VydGlmaWNhdGVGcm9tQXNuMShyW25dKSl9LHRvQXNuMTpmdW5jdGlvbigpe2UuY29udGVudEluZm98fGUuc2lnbigpO2Zvcih2YXIgdD1bXSxyPTA7cjxlLmNlcnRpZmljYXRlcy5sZW5ndGg7KytyKXQucHVzaChhLnBraS5jZXJ0aWZpY2F0ZVRvQXNuMShlLmNlcnRpZmljYXRlc1tyXSkpO3ZhciBpPVtdLHM9bi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLDAsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLklOVEVHRVIsITEsbi5pbnRlZ2VyVG9EZXIoZS52ZXJzaW9uKS5nZXRCeXRlcygpKSxuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VULCEwLGUuZGlnZXN0QWxnb3JpdGhtSWRlbnRpZmllcnMpLGUuY29udGVudEluZm9dKV0pO3JldHVybiB0Lmxlbmd0aD4wJiZzLnZhbHVlWzBdLnZhbHVlLnB1c2gobi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLDAsITAsdCkpLGkubGVuZ3RoPjAmJnMudmFsdWVbMF0udmFsdWUucHVzaChuLmNyZWF0ZShuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsMSwhMCxpKSkscy52YWx1ZVswXS52YWx1ZS5wdXNoKG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVQsITAsZS5zaWduZXJJbmZvcykpLG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9JRCwhMSxuLm9pZFRvRGVyKGUudHlwZSkuZ2V0Qnl0ZXMoKSksc10pfSxhZGRTaWduZXI6ZnVuY3Rpb24odCl7dmFyIHI9dC5pc3N1ZXIsbj10LnNlcmlhbE51bWJlcjtpZih0LmNlcnRpZmljYXRlKXt2YXIgaT10LmNlcnRpZmljYXRlOyJzdHJpbmciPT10eXBlb2YgaSYmKGk9YS5wa2kuY2VydGlmaWNhdGVGcm9tUGVtKGkpKSxyPWkuaXNzdWVyLmF0dHJpYnV0ZXMsbj1pLnNlcmlhbE51bWJlcn12YXIgcz10LmtleTtpZighcyl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBhZGQgUEtDUyM3IHNpZ25lcjsgbm8gcHJpdmF0ZSBrZXkgc3BlY2lmaWVkLiIpOyJzdHJpbmciPT10eXBlb2YgcyYmKHM9YS5wa2kucHJpdmF0ZUtleUZyb21QZW0ocykpO3ZhciBvPXQuZGlnZXN0QWxnb3JpdGhtfHxhLnBraS5vaWRzLnNoYTE7c3dpdGNoKG8pe2Nhc2UgYS5wa2kub2lkcy5zaGExOmNhc2UgYS5wa2kub2lkcy5zaGEyNTY6Y2FzZSBhLnBraS5vaWRzLnNoYTM4NDpjYXNlIGEucGtpLm9pZHMuc2hhNTEyOmNhc2UgYS5wa2kub2lkcy5tZDU6YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIkNvdWxkIG5vdCBhZGQgUEtDUyM3IHNpZ25lcjsgdW5rbm93biBtZXNzYWdlIGRpZ2VzdCBhbGdvcml0aG06ICIrbyl9dmFyIGM9dC5hdXRoZW50aWNhdGVkQXR0cmlidXRlc3x8W107aWYoYy5sZW5ndGg+MCl7Zm9yKHZhciB1PSExLGw9ITEscD0wO3A8Yy5sZW5ndGg7KytwKXt2YXIgZj1jW3BdO2lmKHV8fGYudHlwZSE9PWEucGtpLm9pZHMuY29udGVudFR5cGUpe2lmKGx8fGYudHlwZSE9PWEucGtpLm9pZHMubWVzc2FnZURpZ2VzdCk7ZWxzZSBpZihsPSEwLHUpYnJlYWt9ZWxzZSBpZih1PSEwLGwpYnJlYWt9aWYoIXV8fCFsKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzaWduZXIuYXV0aGVudGljYXRlZEF0dHJpYnV0ZXMuIElmIHNpZ25lci5hdXRoZW50aWNhdGVkQXR0cmlidXRlcyBpcyBzcGVjaWZpZWQsIHRoZW4gaXQgbXVzdCBjb250YWluIGF0IGxlYXN0IHR3byBhdHRyaWJ1dGVzLCBQS0NTICM5IGNvbnRlbnQtdHlwZSBhbmQgUEtDUyAjOSBtZXNzYWdlLWRpZ2VzdC4iKX1lLnNpZ25lcnMucHVzaCh7a2V5OnMsdmVyc2lvbjoxLGlzc3VlcjpyLHNlcmlhbE51bWJlcjpuLGRpZ2VzdEFsZ29yaXRobTpvLHNpZ25hdHVyZUFsZ29yaXRobTphLnBraS5vaWRzLnJzYUVuY3J5cHRpb24sc2lnbmF0dXJlOm51bGwsYXV0aGVudGljYXRlZEF0dHJpYnV0ZXM6Yyx1bmF1dGhlbnRpY2F0ZWRBdHRyaWJ1dGVzOltdfSl9LHNpZ246ZnVuY3Rpb24odCl7dmFyIHI7KHQ9dHx8e30sIm9iamVjdCIhPXR5cGVvZiBlLmNvbnRlbnR8fG51bGw9PT1lLmNvbnRlbnRJbmZvKSYmKGUuY29udGVudEluZm89bi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFUVVFTkNFLCEwLFtuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0lELCExLG4ub2lkVG9EZXIoYS5wa2kub2lkcy5kYXRhKS5nZXRCeXRlcygpKV0pLCJjb250ZW50ImluIGUmJihlLmNvbnRlbnQgaW5zdGFuY2VvZiBhLnV0aWwuQnl0ZUJ1ZmZlcj9yPWUuY29udGVudC5ieXRlcygpOiJzdHJpbmciPT10eXBlb2YgZS5jb250ZW50JiYocj1hLnV0aWwuZW5jb2RlVXRmOChlLmNvbnRlbnQpKSx0LmRldGFjaGVkP2UuZGV0YWNoZWRDb250ZW50PW4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PQ1RFVFNUUklORywhMSxyKTplLmNvbnRlbnRJbmZvLnZhbHVlLnB1c2gobi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLDAsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PQ1RFVFNUUklORywhMSxyKV0pKSkpOzAhPT1lLnNpZ25lcnMubGVuZ3RoJiZmdW5jdGlvbih0KXt2YXIgcjtyPWUuZGV0YWNoZWRDb250ZW50P2UuZGV0YWNoZWRDb250ZW50OihyPWUuY29udGVudEluZm8udmFsdWVbMV0pLnZhbHVlWzBdO2lmKCFyKXRocm93IG5ldyBFcnJvcigiQ291bGQgbm90IHNpZ24gUEtDUyM3IG1lc3NhZ2U7IHRoZXJlIGlzIG5vIGNvbnRlbnQgdG8gc2lnbi4iKTt2YXIgaT1uLmRlclRvT2lkKGUuY29udGVudEluZm8udmFsdWVbMF0udmFsdWUpLHM9bi50b0RlcihyKTtmb3IodmFyIG8gaW4gcy5nZXRCeXRlKCksbi5nZXRCZXJWYWx1ZUxlbmd0aChzKSxzPXMuZ2V0Qnl0ZXMoKSx0KXRbb10uc3RhcnQoKS51cGRhdGUocyk7Zm9yKHZhciBsPW5ldyBEYXRlLHA9MDtwPGUuc2lnbmVycy5sZW5ndGg7KytwKXt2YXIgZj1lLnNpZ25lcnNbcF07aWYoMD09PWYuYXV0aGVudGljYXRlZEF0dHJpYnV0ZXMubGVuZ3RoKXtpZihpIT09YS5wa2kub2lkcy5kYXRhKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBzaWduZXI7IGF1dGhlbnRpY2F0ZWRBdHRyaWJ1dGVzIG11c3QgYmUgcHJlc2VudCB3aGVuIHRoZSBDb250ZW50SW5mbyBjb250ZW50IHR5cGUgaXMgbm90IFBLQ1MjNyBEYXRhLiIpfWVsc2V7Zi5hdXRoZW50aWNhdGVkQXR0cmlidXRlc0FzbjE9bi5jcmVhdGUobi5DbGFzcy5DT05URVhUX1NQRUNJRklDLDAsITAsW10pO2Zvcih2YXIgaD1uLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VULCEwLFtdKSxkPTA7ZDxmLmF1dGhlbnRpY2F0ZWRBdHRyaWJ1dGVzLmxlbmd0aDsrK2Qpe3ZhciB5PWYuYXV0aGVudGljYXRlZEF0dHJpYnV0ZXNbZF07eS50eXBlPT09YS5wa2kub2lkcy5tZXNzYWdlRGlnZXN0P3kudmFsdWU9dFtmLmRpZ2VzdEFsZ29yaXRobV0uZGlnZXN0KCk6eS50eXBlPT09YS5wa2kub2lkcy5zaWduaW5nVGltZSYmKHkudmFsdWV8fCh5LnZhbHVlPWwpKSxoLnZhbHVlLnB1c2godSh5KSksZi5hdXRoZW50aWNhdGVkQXR0cmlidXRlc0FzbjEudmFsdWUucHVzaCh1KHkpKX1zPW4udG9EZXIoaCkuZ2V0Qnl0ZXMoKSxmLm1kLnN0YXJ0KCkudXBkYXRlKHMpfWYuc2lnbmF0dXJlPWYua2V5LnNpZ24oZi5tZCwiUlNBU1NBLVBLQ1MxLVYxXzUiKX1lLnNpZ25lckluZm9zPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxyPTA7cjxlLmxlbmd0aDsrK3IpdC5wdXNoKGMoZVtyXSkpO3JldHVybiB0fShlLnNpZ25lcnMpfShmdW5jdGlvbigpe2Zvcih2YXIgdD17fSxyPTA7cjxlLnNpZ25lcnMubGVuZ3RoOysrcil7dmFyIGk9ZS5zaWduZXJzW3JdOyhzPWkuZGlnZXN0QWxnb3JpdGhtKWluIHR8fCh0W3NdPWEubWRbYS5wa2kub2lkc1tzXV0uY3JlYXRlKCkpLDA9PT1pLmF1dGhlbnRpY2F0ZWRBdHRyaWJ1dGVzLmxlbmd0aD9pLm1kPXRbc106aS5tZD1hLm1kW2EucGtpLm9pZHNbc11dLmNyZWF0ZSgpfWZvcih2YXIgcyBpbiBlLmRpZ2VzdEFsZ29yaXRobUlkZW50aWZpZXJzPVtdLHQpZS5kaWdlc3RBbGdvcml0aG1JZGVudGlmaWVycy5wdXNoKG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9JRCwhMSxuLm9pZFRvRGVyKHMpLmdldEJ5dGVzKCkpLG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5OVUxMLCExLCIiKV0pKTtyZXR1cm4gdH0oKSl9LHZlcmlmeTpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcigiUEtDUyM3IHNpZ25hdHVyZSB2ZXJpZmljYXRpb24gbm90IHlldCBpbXBsZW1lbnRlZC4iKX0sYWRkQ2VydGlmaWNhdGU6ZnVuY3Rpb24odCl7InN0cmluZyI9PXR5cGVvZiB0JiYodD1hLnBraS5jZXJ0aWZpY2F0ZUZyb21QZW0odCkpLGUuY2VydGlmaWNhdGVzLnB1c2godCl9LGFkZENlcnRpZmljYXRlUmV2b2thdGlvbkxpc3Q6ZnVuY3Rpb24oZSl7dGhyb3cgbmV3IEVycm9yKCJQS0NTIzcgQ1JMIHN1cHBvcnQgbm90IHlldCBpbXBsZW1lbnRlZC4iKX19fSxpLmNyZWF0ZUVuY3J5cHRlZERhdGE9ZnVuY3Rpb24oKXt2YXIgZT1udWxsO3JldHVybiBlPXt0eXBlOmEucGtpLm9pZHMuZW5jcnlwdGVkRGF0YSx2ZXJzaW9uOjAsZW5jcnlwdGVkQ29udGVudDp7YWxnb3JpdGhtOmEucGtpLm9pZHNbImFlczI1Ni1DQkMiXX0sZnJvbUFzbjE6ZnVuY3Rpb24odCl7bChlLHQsaS5hc24xLmVuY3J5cHRlZERhdGFWYWxpZGF0b3IpfSxkZWNyeXB0OmZ1bmN0aW9uKHQpe3ZvaWQgMCE9PXQmJihlLmVuY3J5cHRlZENvbnRlbnQua2V5PXQpLHAoZSl9fX0saS5jcmVhdGVFbnZlbG9wZWREYXRhPWZ1bmN0aW9uKCl7dmFyIGU9bnVsbDtyZXR1cm4gZT17dHlwZTphLnBraS5vaWRzLmVudmVsb3BlZERhdGEsdmVyc2lvbjowLHJlY2lwaWVudHM6W10sZW5jcnlwdGVkQ29udGVudDp7YWxnb3JpdGhtOmEucGtpLm9pZHNbImFlczI1Ni1DQkMiXX0sZnJvbUFzbjE6ZnVuY3Rpb24odCl7dmFyIHI9bChlLHQsaS5hc24xLmVudmVsb3BlZERhdGFWYWxpZGF0b3IpO2UucmVjaXBpZW50cz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9W10scj0wO3I8ZS5sZW5ndGg7KytyKXQucHVzaChzKGVbcl0pKTtyZXR1cm4gdH0oci5yZWNpcGllbnRJbmZvcy52YWx1ZSl9LHRvQXNuMTpmdW5jdGlvbigpe3JldHVybiBuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PSUQsITEsbi5vaWRUb0RlcihlLnR5cGUpLmdldEJ5dGVzKCkpLG4uY3JlYXRlKG4uQ2xhc3MuQ09OVEVYVF9TUEVDSUZJQywwLCEwLFtuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuU0VRVUVOQ0UsITAsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5JTlRFR0VSLCExLG4uaW50ZWdlclRvRGVyKGUudmVyc2lvbikuZ2V0Qnl0ZXMoKSksbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLlNFVCwhMCxvKGUucmVjaXBpZW50cykpLG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCwodD1lLmVuY3J5cHRlZENvbnRlbnQsW24uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5PSUQsITEsbi5vaWRUb0RlcihhLnBraS5vaWRzLmRhdGEpLmdldEJ5dGVzKCkpLG4uY3JlYXRlKG4uQ2xhc3MuVU5JVkVSU0FMLG4uVHlwZS5TRVFVRU5DRSwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9JRCwhMSxuLm9pZFRvRGVyKHQuYWxnb3JpdGhtKS5nZXRCeXRlcygpKSxuLmNyZWF0ZShuLkNsYXNzLlVOSVZFUlNBTCxuLlR5cGUuT0NURVRTVFJJTkcsITEsdC5wYXJhbWV0ZXIuZ2V0Qnl0ZXMoKSldKSxuLmNyZWF0ZShuLkNsYXNzLkNPTlRFWFRfU1BFQ0lGSUMsMCwhMCxbbi5jcmVhdGUobi5DbGFzcy5VTklWRVJTQUwsbi5UeXBlLk9DVEVUU1RSSU5HLCExLHQuY29udGVudC5nZXRCeXRlcygpKV0pXSkpXSldKV0pO3ZhciB0fSxmaW5kUmVjaXBpZW50OmZ1bmN0aW9uKHQpe2Zvcih2YXIgcj10Lmlzc3Vlci5hdHRyaWJ1dGVzLGE9MDthPGUucmVjaXBpZW50cy5sZW5ndGg7KythKXt2YXIgbj1lLnJlY2lwaWVudHNbYV0saT1uLmlzc3VlcjtpZihuLnNlcmlhbE51bWJlcj09PXQuc2VyaWFsTnVtYmVyJiZpLmxlbmd0aD09PXIubGVuZ3RoKXtmb3IodmFyIHM9ITAsbz0wO288ci5sZW5ndGg7KytvKWlmKGlbb10udHlwZSE9PXJbb10udHlwZXx8aVtvXS52YWx1ZSE9PXJbb10udmFsdWUpe3M9ITE7YnJlYWt9aWYocylyZXR1cm4gbn19cmV0dXJuIG51bGx9LGRlY3J5cHQ6ZnVuY3Rpb24odCxyKXtpZih2b2lkIDA9PT1lLmVuY3J5cHRlZENvbnRlbnQua2V5JiZ2b2lkIDAhPT10JiZ2b2lkIDAhPT1yKXN3aXRjaCh0LmVuY3J5cHRlZENvbnRlbnQuYWxnb3JpdGhtKXtjYXNlIGEucGtpLm9pZHMucnNhRW5jcnlwdGlvbjpjYXNlIGEucGtpLm9pZHMuZGVzQ0JDOnZhciBuPXIuZGVjcnlwdCh0LmVuY3J5cHRlZENvbnRlbnQuY29udGVudCk7ZS5lbmNyeXB0ZWRDb250ZW50LmtleT1hLnV0aWwuY3JlYXRlQnVmZmVyKG4pO2JyZWFrO2RlZmF1bHQ6dGhyb3cgbmV3IEVycm9yKCJVbnN1cHBvcnRlZCBhc3ltbWV0cmljIGNpcGhlciwgT0lEICIrdC5lbmNyeXB0ZWRDb250ZW50LmFsZ29yaXRobSl9cChlKX0sYWRkUmVjaXBpZW50OmZ1bmN0aW9uKHQpe2UucmVjaXBpZW50cy5wdXNoKHt2ZXJzaW9uOjAsaXNzdWVyOnQuaXNzdWVyLmF0dHJpYnV0ZXMsc2VyaWFsTnVtYmVyOnQuc2VyaWFsTnVtYmVyLGVuY3J5cHRlZENvbnRlbnQ6e2FsZ29yaXRobTphLnBraS5vaWRzLnJzYUVuY3J5cHRpb24sa2V5OnQucHVibGljS2V5fX0pfSxlbmNyeXB0OmZ1bmN0aW9uKHQscil7aWYodm9pZCAwPT09ZS5lbmNyeXB0ZWRDb250ZW50LmNvbnRlbnQpe3ZhciBuLGkscztzd2l0Y2gocj1yfHxlLmVuY3J5cHRlZENvbnRlbnQuYWxnb3JpdGhtLHQ9dHx8ZS5lbmNyeXB0ZWRDb250ZW50LmtleSxyKXtjYXNlIGEucGtpLm9pZHNbImFlczEyOC1DQkMiXTpuPTE2LGk9MTYscz1hLmFlcy5jcmVhdGVFbmNyeXB0aW9uQ2lwaGVyO2JyZWFrO2Nhc2UgYS5wa2kub2lkc1siYWVzMTkyLUNCQyJdOm49MjQsaT0xNixzPWEuYWVzLmNyZWF0ZUVuY3J5cHRpb25DaXBoZXI7YnJlYWs7Y2FzZSBhLnBraS5vaWRzWyJhZXMyNTYtQ0JDIl06bj0zMixpPTE2LHM9YS5hZXMuY3JlYXRlRW5jcnlwdGlvbkNpcGhlcjticmVhaztjYXNlIGEucGtpLm9pZHNbImRlcy1FREUzLUNCQyJdOm49MjQsaT04LHM9YS5kZXMuY3JlYXRlRW5jcnlwdGlvbkNpcGhlcjticmVhaztkZWZhdWx0OnRocm93IG5ldyBFcnJvcigiVW5zdXBwb3J0ZWQgc3ltbWV0cmljIGNpcGhlciwgT0lEICIrcil9aWYodm9pZCAwPT09dCl0PWEudXRpbC5jcmVhdGVCdWZmZXIoYS5yYW5kb20uZ2V0Qnl0ZXMobikpO2Vsc2UgaWYodC5sZW5ndGgoKSE9bil0aHJvdyBuZXcgRXJyb3IoIlN5bW1ldHJpYyBrZXkgaGFzIHdyb25nIGxlbmd0aDsgZ290ICIrdC5sZW5ndGgoKSsiIGJ5dGVzLCBleHBlY3RlZCAiK24rIi4iKTtlLmVuY3J5cHRlZENvbnRlbnQuYWxnb3JpdGhtPXIsZS5lbmNyeXB0ZWRDb250ZW50LmtleT10LGUuZW5jcnlwdGVkQ29udGVudC5wYXJhbWV0ZXI9YS51dGlsLmNyZWF0ZUJ1ZmZlcihhLnJhbmRvbS5nZXRCeXRlcyhpKSk7dmFyIG89cyh0KTtpZihvLnN0YXJ0KGUuZW5jcnlwdGVkQ29udGVudC5wYXJhbWV0ZXIuY29weSgpKSxvLnVwZGF0ZShlLmNvbnRlbnQpLCFvLmZpbmlzaCgpKXRocm93IG5ldyBFcnJvcigiU3ltbWV0cmljIGVuY3J5cHRpb24gZmFpbGVkLiIpO2UuZW5jcnlwdGVkQ29udGVudC5jb250ZW50PW8ub3V0cHV0fWZvcih2YXIgYz0wO2M8ZS5yZWNpcGllbnRzLmxlbmd0aDsrK2Mpe3ZhciB1PWUucmVjaXBpZW50c1tjXTtpZih2b2lkIDA9PT11LmVuY3J5cHRlZENvbnRlbnQuY29udGVudClzd2l0Y2godS5lbmNyeXB0ZWRDb250ZW50LmFsZ29yaXRobSl7Y2FzZSBhLnBraS5vaWRzLnJzYUVuY3J5cHRpb246dS5lbmNyeXB0ZWRDb250ZW50LmNvbnRlbnQ9dS5lbmNyeXB0ZWRDb250ZW50LmtleS5lbmNyeXB0KGUuZW5jcnlwdGVkQ29udGVudC5rZXkuZGF0YSk7YnJlYWs7ZGVmYXVsdDp0aHJvdyBuZXcgRXJyb3IoIlVuc3VwcG9ydGVkIGFzeW1tZXRyaWMgY2lwaGVyLCBPSUQgIit1LmVuY3J5cHRlZENvbnRlbnQuYWxnb3JpdGhtKX19fX19fSxmdW5jdGlvbihlLHQscil7dmFyIGE9cigwKTtyKDUpLHIoOCkscigxNCkscig5KSxyKDEpO3ZhciBuPWUuZXhwb3J0cz1hLnNzaD1hLnNzaHx8e307ZnVuY3Rpb24gaShlLHQpe3ZhciByPXQudG9TdHJpbmcoMTYpO3JbMF0+PSI4IiYmKHI9IjAwIityKTt2YXIgbj1hLnV0aWwuaGV4VG9CeXRlcyhyKTtlLnB1dEludDMyKG4ubGVuZ3RoKSxlLnB1dEJ5dGVzKG4pfWZ1bmN0aW9uIHMoZSx0KXtlLnB1dEludDMyKHQubGVuZ3RoKSxlLnB1dFN0cmluZyh0KX1mdW5jdGlvbiBvKCl7Zm9yKHZhciBlPWEubWQuc2hhMS5jcmVhdGUoKSx0PWFyZ3VtZW50cy5sZW5ndGgscj0wO3I8dDsrK3IpZS51cGRhdGUoYXJndW1lbnRzW3JdKTtyZXR1cm4gZS5kaWdlc3QoKX1uLnByaXZhdGVLZXlUb1B1dHR5PWZ1bmN0aW9uKGUsdCxyKXt2YXIgbj0iIj09PSh0PXR8fCIiKT8ibm9uZSI6ImFlczI1Ni1jYmMiLGM9IlB1VFRZLVVzZXItS2V5LUZpbGUtMjogc3NoLXJzYVxyXG4iO2MrPSJFbmNyeXB0aW9uOiAiK24rIlxyXG4iLGMrPSJDb21tZW50OiAiKyhyPXJ8fCIiKSsiXHJcbiI7dmFyIHU9YS51dGlsLmNyZWF0ZUJ1ZmZlcigpO3ModSwic3NoLXJzYSIpLGkodSxlLmUpLGkodSxlLm4pO3ZhciBsPWEudXRpbC5lbmNvZGU2NCh1LmJ5dGVzKCksNjQpLHA9TWF0aC5mbG9vcihsLmxlbmd0aC82NikrMTtjKz0iUHVibGljLUxpbmVzOiAiK3ArIlxyXG4iLGMrPWw7dmFyIGYsaD1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7aWYoaShoLGUuZCksaShoLGUucCksaShoLGUucSksaShoLGUucUludiksdCl7dmFyIGQ9aC5sZW5ndGgoKSsxNi0xO2QtPWQlMTY7dmFyIHk9byhoLmJ5dGVzKCkpO3kudHJ1bmNhdGUoeS5sZW5ndGgoKS1kK2gubGVuZ3RoKCkpLGgucHV0QnVmZmVyKHkpO3ZhciBnPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtnLnB1dEJ1ZmZlcihvKCJcMFwwXDBcMCIsdCkpLGcucHV0QnVmZmVyKG8oIlwwXDBcMAEiLHQpKTt2YXIgbT1hLmFlcy5jcmVhdGVFbmNyeXB0aW9uQ2lwaGVyKGcudHJ1bmNhdGUoOCksIkNCQyIpO20uc3RhcnQoYS51dGlsLmNyZWF0ZUJ1ZmZlcigpLmZpbGxXaXRoQnl0ZSgwLDE2KSksbS51cGRhdGUoaC5jb3B5KCkpLG0uZmluaXNoKCk7dmFyIHY9bS5vdXRwdXQ7di50cnVuY2F0ZSgxNiksZj1hLnV0aWwuZW5jb2RlNjQodi5ieXRlcygpLDY0KX1lbHNlIGY9YS51dGlsLmVuY29kZTY0KGguYnl0ZXMoKSw2NCk7Yys9IlxyXG5Qcml2YXRlLUxpbmVzOiAiKyhwPU1hdGguZmxvb3IoZi5sZW5ndGgvNjYpKzEpKyJcclxuIixjKz1mO3ZhciBDPW8oInB1dHR5LXByaXZhdGUta2V5LWZpbGUtbWFjLWtleSIsdCksRT1hLnV0aWwuY3JlYXRlQnVmZmVyKCk7cyhFLCJzc2gtcnNhIikscyhFLG4pLHMoRSxyKSxFLnB1dEludDMyKHUubGVuZ3RoKCkpLEUucHV0QnVmZmVyKHUpLEUucHV0SW50MzIoaC5sZW5ndGgoKSksRS5wdXRCdWZmZXIoaCk7dmFyIFM9YS5obWFjLmNyZWF0ZSgpO3JldHVybiBTLnN0YXJ0KCJzaGExIixDKSxTLnVwZGF0ZShFLmJ5dGVzKCkpLGMrPSJcclxuUHJpdmF0ZS1NQUM6ICIrUy5kaWdlc3QoKS50b0hleCgpKyJcclxuIn0sbi5wdWJsaWNLZXlUb09wZW5TU0g9ZnVuY3Rpb24oZSx0KXt0PXR8fCIiO3ZhciByPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtyZXR1cm4gcyhyLCJzc2gtcnNhIiksaShyLGUuZSksaShyLGUubiksInNzaC1yc2EgIithLnV0aWwuZW5jb2RlNjQoci5ieXRlcygpKSsiICIrdH0sbi5wcml2YXRlS2V5VG9PcGVuU1NIPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQ/YS5wa2kuZW5jcnlwdFJzYVByaXZhdGVLZXkoZSx0LHtsZWdhY3k6ITAsYWxnb3JpdGhtOiJhZXMxMjgifSk6YS5wa2kucHJpdmF0ZUtleVRvUGVtKGUpfSxuLmdldFB1YmxpY0tleUZpbmdlcnByaW50PWZ1bmN0aW9uKGUsdCl7dmFyIHI9KHQ9dHx8e30pLm1kfHxhLm1kLm1kNS5jcmVhdGUoKSxuPWEudXRpbC5jcmVhdGVCdWZmZXIoKTtzKG4sInNzaC1yc2EiKSxpKG4sZS5lKSxpKG4sZS5uKSxyLnN0YXJ0KCksci51cGRhdGUobi5nZXRCeXRlcygpKTt2YXIgbz1yLmRpZ2VzdCgpO2lmKCJoZXgiPT09dC5lbmNvZGluZyl7dmFyIGM9by50b0hleCgpO3JldHVybiB0LmRlbGltaXRlcj9jLm1hdGNoKC8uezJ9L2cpLmpvaW4odC5kZWxpbWl0ZXIpOmN9aWYoImJpbmFyeSI9PT10LmVuY29kaW5nKXJldHVybiBvLmdldEJ5dGVzKCk7aWYodC5lbmNvZGluZyl0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gZW5jb2RpbmcgIicrdC5lbmNvZGluZysnIi4nKTtyZXR1cm4gb319LGZ1bmN0aW9uKGUsdCxyKXt2YXIgYT1yKDApO3IoMzEpLHIoMzMpLHIoMSk7dmFyIG49ImZvcmdlLnRhc2siLGk9e30scz0wO2EuZGVidWcuc2V0KG4sInRhc2tzIixpKTt2YXIgbz17fTthLmRlYnVnLnNldChuLCJxdWV1ZXMiLG8pO3ZhciBjPSJyZWFkeSIsdT0icnVubmluZyIsbD0iYmxvY2tlZCIscD0ic2xlZXBpbmciLGY9ImRvbmUiLGg9ImVycm9yIixkPSJzdG9wIix5PSJzdGFydCIsZz17cmVhZHk6e319O2dbY11bZF09YyxnW2NdW3ldPXUsZ1tjXS5jYW5jZWw9ZixnW2NdLmZhaWw9aCxnW3VdPXt9LGdbdV1bZF09YyxnW3VdW3ldPXUsZ1t1XS5ibG9jaz1sLGdbdV0udW5ibG9jaz11LGdbdV0uc2xlZXA9cCxnW3VdLndha2V1cD11LGdbdV0uY2FuY2VsPWYsZ1t1XS5mYWlsPWgsZ1tsXT17fSxnW2xdW2RdPWwsZ1tsXVt5XT1sLGdbbF0uYmxvY2s9bCxnW2xdLnVuYmxvY2s9bCxnW2xdLnNsZWVwPWwsZ1tsXS53YWtldXA9bCxnW2xdLmNhbmNlbD1mLGdbbF0uZmFpbD1oLGdbcF09e30sZ1twXVtkXT1wLGdbcF1beV09cCxnW3BdLmJsb2NrPXAsZ1twXS51bmJsb2NrPXAsZ1twXS5zbGVlcD1wLGdbcF0ud2FrZXVwPXAsZ1twXS5jYW5jZWw9ZixnW3BdLmZhaWw9aCxnW2ZdPXt9LGdbZl1bZF09ZixnW2ZdW3ldPWYsZ1tmXS5ibG9jaz1mLGdbZl0udW5ibG9jaz1mLGdbZl0uc2xlZXA9ZixnW2ZdLndha2V1cD1mLGdbZl0uY2FuY2VsPWYsZ1tmXS5mYWlsPWgsZ1toXT17fSxnW2hdW2RdPWgsZ1toXVt5XT1oLGdbaF0uYmxvY2s9aCxnW2hdLnVuYmxvY2s9aCxnW2hdLnNsZWVwPWgsZ1toXS53YWtldXA9aCxnW2hdLmNhbmNlbD1oLGdbaF0uZmFpbD1oO3ZhciBtPWZ1bmN0aW9uKGUpe3RoaXMuaWQ9LTEsdGhpcy5uYW1lPWUubmFtZXx8Ij8iLHRoaXMucGFyZW50PWUucGFyZW50fHxudWxsLHRoaXMucnVuPWUucnVuLHRoaXMuc3VidGFza3M9W10sdGhpcy5lcnJvcj0hMSx0aGlzLnN0YXRlPWMsdGhpcy5ibG9ja3M9MCx0aGlzLnRpbWVvdXRJZD1udWxsLHRoaXMuc3dhcFRpbWU9bnVsbCx0aGlzLnVzZXJEYXRhPW51bGwsdGhpcy5pZD1zKyssaVt0aGlzLmlkXT10aGlzfTttLnByb3RvdHlwZS5kZWJ1Zz1mdW5jdGlvbihlKXtlPWV8fCIiLGEubG9nLmRlYnVnKG4sZSwiWyVzXVslc10gdGFzazoiLHRoaXMuaWQsdGhpcy5uYW1lLHRoaXMsInN1YnRhc2tzOiIsdGhpcy5zdWJ0YXNrcy5sZW5ndGgsInF1ZXVlOiIsbyl9LG0ucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oZSx0KXsiZnVuY3Rpb24iPT10eXBlb2YgZSYmKHQ9ZSxlPXRoaXMubmFtZSk7dmFyIHI9bmV3IG0oe3J1bjp0LG5hbWU6ZSxwYXJlbnQ6dGhpc30pO3JldHVybiByLnN0YXRlPXUsci50eXBlPXRoaXMudHlwZSxyLnN1Y2Nlc3NDYWxsYmFjaz10aGlzLnN1Y2Nlc3NDYWxsYmFja3x8bnVsbCxyLmZhaWx1cmVDYWxsYmFjaz10aGlzLmZhaWx1cmVDYWxsYmFja3x8bnVsbCx0aGlzLnN1YnRhc2tzLnB1c2gociksdGhpc30sbS5wcm90b3R5cGUucGFyYWxsZWw9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYS51dGlsLmlzQXJyYXkoZSkmJih0PWUsZT10aGlzLm5hbWUpLHRoaXMubmV4dChlLChmdW5jdGlvbihyKXt2YXIgbj1yO24uYmxvY2sodC5sZW5ndGgpO2Zvcih2YXIgaT1mdW5jdGlvbihlLHIpe2EudGFzay5zdGFydCh7dHlwZTplLHJ1bjpmdW5jdGlvbihlKXt0W3JdKGUpfSxzdWNjZXNzOmZ1bmN0aW9uKGUpe24udW5ibG9jaygpfSxmYWlsdXJlOmZ1bmN0aW9uKGUpe24udW5ibG9jaygpfX0pfSxzPTA7czx0Lmxlbmd0aDtzKyspe2koZSsiX19wYXJhbGxlbC0iK3IuaWQrIi0iK3Mscyl9fSkpfSxtLnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT1nW3RoaXMuc3RhdGVdW2RdfSxtLnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuZXJyb3I9ITEsdGhpcy5zdGF0ZT1nW3RoaXMuc3RhdGVdW3ldLHRoaXMuc3RhdGU9PT11JiYodGhpcy5zdGFydD1uZXcgRGF0ZSx0aGlzLnJ1bih0aGlzKSx2KHRoaXMsMCkpfSxtLnByb3RvdHlwZS5ibG9jaz1mdW5jdGlvbihlKXtlPXZvaWQgMD09PWU/MTplLHRoaXMuYmxvY2tzKz1lLHRoaXMuYmxvY2tzPjAmJih0aGlzLnN0YXRlPWdbdGhpcy5zdGF0ZV0uYmxvY2spfSxtLnByb3RvdHlwZS51bmJsb2NrPWZ1bmN0aW9uKGUpe3JldHVybiBlPXZvaWQgMD09PWU/MTplLHRoaXMuYmxvY2tzLT1lLDA9PT10aGlzLmJsb2NrcyYmdGhpcy5zdGF0ZSE9PWYmJih0aGlzLnN0YXRlPXUsdih0aGlzLDApKSx0aGlzLmJsb2Nrc30sbS5wcm90b3R5cGUuc2xlZXA9ZnVuY3Rpb24oZSl7ZT12b2lkIDA9PT1lPzA6ZSx0aGlzLnN0YXRlPWdbdGhpcy5zdGF0ZV0uc2xlZXA7dmFyIHQ9dGhpczt0aGlzLnRpbWVvdXRJZD1zZXRUaW1lb3V0KChmdW5jdGlvbigpe3QudGltZW91dElkPW51bGwsdC5zdGF0ZT11LHYodCwwKX0pLGUpfSxtLnByb3RvdHlwZS53YWl0PWZ1bmN0aW9uKGUpe2Uud2FpdCh0aGlzKX0sbS5wcm90b3R5cGUud2FrZXVwPWZ1bmN0aW9uKCl7dGhpcy5zdGF0ZT09PXAmJihjYW5jZWxUaW1lb3V0KHRoaXMudGltZW91dElkKSx0aGlzLnRpbWVvdXRJZD1udWxsLHRoaXMuc3RhdGU9dSx2KHRoaXMsMCkpfSxtLnByb3RvdHlwZS5jYW5jZWw9ZnVuY3Rpb24oKXt0aGlzLnN0YXRlPWdbdGhpcy5zdGF0ZV0uY2FuY2VsLHRoaXMucGVybWl0c05lZWRlZD0wLG51bGwhPT10aGlzLnRpbWVvdXRJZCYmKGNhbmNlbFRpbWVvdXQodGhpcy50aW1lb3V0SWQpLHRoaXMudGltZW91dElkPW51bGwpLHRoaXMuc3VidGFza3M9W119LG0ucHJvdG90eXBlLmZhaWw9ZnVuY3Rpb24oZSl7aWYodGhpcy5lcnJvcj0hMCxDKHRoaXMsITApLGUpZS5lcnJvcj10aGlzLmVycm9yLGUuc3dhcFRpbWU9dGhpcy5zd2FwVGltZSxlLnVzZXJEYXRhPXRoaXMudXNlckRhdGEsdihlLDApO2Vsc2V7aWYobnVsbCE9PXRoaXMucGFyZW50KXtmb3IodmFyIHQ9dGhpcy5wYXJlbnQ7bnVsbCE9PXQucGFyZW50Oyl0LmVycm9yPXRoaXMuZXJyb3IsdC5zd2FwVGltZT10aGlzLnN3YXBUaW1lLHQudXNlckRhdGE9dGhpcy51c2VyRGF0YSx0PXQucGFyZW50O0ModCwhMCl9dGhpcy5mYWlsdXJlQ2FsbGJhY2smJnRoaXMuZmFpbHVyZUNhbGxiYWNrKHRoaXMpfX07dmFyIHY9ZnVuY3Rpb24oZSx0KXt2YXIgcj10PjMwfHwrbmV3IERhdGUtZS5zd2FwVGltZT4yMCxhPWZ1bmN0aW9uKHQpe2lmKHQrKyxlLnN0YXRlPT09dSlpZihyJiYoZS5zd2FwVGltZT0rbmV3IERhdGUpLGUuc3VidGFza3MubGVuZ3RoPjApe3ZhciBhPWUuc3VidGFza3Muc2hpZnQoKTthLmVycm9yPWUuZXJyb3IsYS5zd2FwVGltZT1lLnN3YXBUaW1lLGEudXNlckRhdGE9ZS51c2VyRGF0YSxhLnJ1bihhKSxhLmVycm9yfHx2KGEsdCl9ZWxzZSBDKGUpLGUuZXJyb3J8fG51bGwhPT1lLnBhcmVudCYmKGUucGFyZW50LmVycm9yPWUuZXJyb3IsZS5wYXJlbnQuc3dhcFRpbWU9ZS5zd2FwVGltZSxlLnBhcmVudC51c2VyRGF0YT1lLnVzZXJEYXRhLHYoZS5wYXJlbnQsdCkpfTtyP3NldFRpbWVvdXQoYSwwKTphKHQpfSxDPWZ1bmN0aW9uKGUsdCl7ZS5zdGF0ZT1mLGRlbGV0ZSBpW2UuaWRdLG51bGw9PT1lLnBhcmVudCYmKGUudHlwZSBpbiBvPzA9PT1vW2UudHlwZV0ubGVuZ3RoP2EubG9nLmVycm9yKG4sIlslc11bJXNdIHRhc2sgcXVldWUgZW1wdHkgWyVzXSIsZS5pZCxlLm5hbWUsZS50eXBlKTpvW2UudHlwZV1bMF0hPT1lP2EubG9nLmVycm9yKG4sIlslc11bJXNdIHRhc2sgbm90IGZpcnN0IGluIHF1ZXVlIFslc10iLGUuaWQsZS5uYW1lLGUudHlwZSk6KG9bZS50eXBlXS5zaGlmdCgpLDA9PT1vW2UudHlwZV0ubGVuZ3RoP2RlbGV0ZSBvW2UudHlwZV06b1tlLnR5cGVdWzBdLnN0YXJ0KCkpOmEubG9nLmVycm9yKG4sIlslc11bJXNdIHRhc2sgcXVldWUgbWlzc2luZyBbJXNdIixlLmlkLGUubmFtZSxlLnR5cGUpLHR8fChlLmVycm9yJiZlLmZhaWx1cmVDYWxsYmFjaz9lLmZhaWx1cmVDYWxsYmFjayhlKTohZS5lcnJvciYmZS5zdWNjZXNzQ2FsbGJhY2smJmUuc3VjY2Vzc0NhbGxiYWNrKGUpKSl9O2UuZXhwb3J0cz1hLnRhc2s9YS50YXNrfHx7fSxhLnRhc2suc3RhcnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IG0oe3J1bjplLnJ1bixuYW1lOmUubmFtZXx8Ij8ifSk7dC50eXBlPWUudHlwZSx0LnN1Y2Nlc3NDYWxsYmFjaz1lLnN1Y2Nlc3N8fG51bGwsdC5mYWlsdXJlQ2FsbGJhY2s9ZS5mYWlsdXJlfHxudWxsLHQudHlwZSBpbiBvP29bZS50eXBlXS5wdXNoKHQpOihvW3QudHlwZV09W3RdLGZ1bmN0aW9uKGUpe2UuZXJyb3I9ITEsZS5zdGF0ZT1nW2Uuc3RhdGVdW3ldLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7ZS5zdGF0ZT09PXUmJihlLnN3YXBUaW1lPStuZXcgRGF0ZSxlLnJ1bihlKSx2KGUsMCkpfSksMCl9KHQpKX0sYS50YXNrLmNhbmNlbD1mdW5jdGlvbihlKXtlIGluIG8mJihvW2VdPVtvW2VdWzBdXSl9LGEudGFzay5jcmVhdGVDb25kaXRpb249ZnVuY3Rpb24oKXt2YXIgZT17dGFza3M6e30sd2FpdDpmdW5jdGlvbih0KXt0LmlkIGluIGUudGFza3N8fCh0LmJsb2NrKCksZS50YXNrc1t0LmlkXT10KX0sbm90aWZ5OmZ1bmN0aW9uKCl7dmFyIHQ9ZS50YXNrcztmb3IodmFyIHIgaW4gZS50YXNrcz17fSx0KXRbcl0udW5ibG9jaygpfX07cmV0dXJuIGV9fV0pfSkpOwovLyMgc291cmNlTWFwcGluZ1VSTD1mb3JnZS5taW4uanMubWFw"},{"meta":{"name":"emoutils.min.js","url":"https://unpkg.com/emoutils@2.0.0/dist/umd/emoutils.min.js","ts":1670371893027,"mimetype":"text/javascript"},"source":"IWZ1bmN0aW9uKHUsZSl7Im9iamVjdCI9PXR5cGVvZiBleHBvcnRzJiYidW5kZWZpbmVkIiE9dHlwZW9mIG1vZHVsZT9lKGV4cG9ydHMpOiJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFsiZXhwb3J0cyJdLGUpOmUodS5lbW9qaVV0aWxzPXt9KX0odGhpcyxmdW5jdGlvbih1KXsidXNlIHN0cmljdCI7dmFyIGU9Wy9cdWZlMGUvLC9cdWZlMGYvLC9cdTIwZTMvXSx0PVsvXHVkODNjW1x1ZGRlNi1cdWRkZmZdXHVkODNjW1x1ZGRlNi1cdWRkZmZdLywvXHVkODNjXHVkZmY0KD86XHVkYjQwW1x1ZGMyMC1cdWRjN2VdKSs/XHVkYjQwXHVkYzdmLywvW1x1ZDgwMC1cdWRiZmZdW1x1ZGMwMC1cdWRmZmZdLyxuZXcgUmVnRXhwKCIuKD86IitlLm1hcChmdW5jdGlvbih1KXtyZXR1cm4gdS5zb3VyY2V9KS5qb2luKCJ8IikrIikrIiksL1tcdTIzMUFcdTIzMUJcdTIzRTktXHUyM0VDXHUyM0YwXHUyM0YzXHUyNUZEXHUyNUZFXHUyNjE0XHUyNjE1XHUyNjQ4LVx1MjY1M1x1MjY3Rlx1MjY5M1x1MjZBMVx1MjZBQVx1MjZBQlx1MjZCRFx1MjZCRVx1MjZDNFx1MjZDNVx1MjZDRVx1MjZENFx1MjZFQVx1MjZGMlx1MjZGM1x1MjZGNVx1MjZGQVx1MjZGRFx1MjcwNVx1MjcwQVx1MjcwQlx1MjcyOFx1Mjc0Q1x1Mjc0RVx1Mjc1My1cdTI3NTVcdTI3NTdcdTI3OTUtXHUyNzk3XHUyN0IwXHUyN0JGXHUyQjFCXHUyQjFDXHUyQjUwXHUyQjU1XHUwMEE5XHUwMEFFXHUyMDNDXHUyMDQ5XHUyMTIyXHUyMTM5XHUyMTk0XHUyMTk1XHUyMTk2XHUyMTk3XHUyMTk4XHUyMTk5XHUyMUE5XHUyMUFBXHUyMzI4XHUyM0NGXHUyM0VELVx1MjNFRlx1MjNGMVx1MjNGMlx1MjNGOC1cdTIzRkFcdTI0QzJcdTI1QUFcdTI1QUJcdTI1QjZcdTI1QzBcdTI1RkJcdTI1RkNcdTI2MDAtXHUyNjA0XHUyNjBFXHUyNjExXHUyNjE4XHUyNjFEXHUyNjIwXHUyNjIyXHUyNjIzXHUyNjI2XHUyNjJBXHUyNjJFXHUyNjJGXHUyNjM4LVx1MjYzYVx1MjY0MFx1MjY0Mlx1MjY1Rlx1MjY2MFx1MjY2M1x1MjY2NVx1MjY2Nlx1MjY2OFx1MjY3Qlx1MjY3RVx1MjY5Mlx1MjY5NC1cdTI2OTdcdTI2OTlcdTI2OUJcdTI2OUNcdTI2QTBcdTI2QTdcdTI2QjBcdTI2QjFcdTI2QzhcdTI2Q0ZcdTI2RDFcdTI2RDNcdTI2RTlcdTI2RjBcdTI2RjFcdTI2RjRcdTI2RjdcdTI2RjhcdTI2RjlcdTI3MDJcdTI3MDhcdTI3MDlcdTI3MENcdTI3MERcdTI3MEZcdTI3MTJcdTI3MTRcdTI3MTZcdTI3MURcdTI3MjFcdTI3MzNcdTI3MzRcdTI3NDRcdTI3NDdcdTI3NjNcdTI3NjRcdTI3QTFcdTI5MzRcdTI5MzVcdTJCMDUtXHUyYjA3XHUzMDMwXHUzMDNEXHUzMjk3XHUzMjk5XHUyNjFEXHUyNkY5XHUyNzBBLVx1MjcwZF0vXSxlPVsvXHVkODNjW1x1ZGZmYi1cdWRmZmZdL10uY29uY2F0KGUpLG89InRleHQiLGk9Im90aGVyIixyPW5ldyBSZWdFeHAoIl4iKy9cdTIwMGQvLnNvdXJjZSksYz1uZXcgUmVnRXhwKCJeKD86Iit0Lm1hcChmdW5jdGlvbih1KXtyZXR1cm4gdS5zb3VyY2V9KS5qb2luKCJ8IikrIikiKSxmPW5ldyBSZWdFeHAoIig/OiIrdC5tYXAoZnVuY3Rpb24odSl7cmV0dXJuIHUuc291cmNlfSkuam9pbigifCIpKyIpIiksZD1uZXcgUmVnRXhwKGMuc291cmNlKyIoPzoiK2UubWFwKGZ1bmN0aW9uKHUpe3JldHVybiIoPzoiK3Uuc291cmNlKyIpIn0pLmpvaW4oInwiKSsiKSoiKSxzPW5ldyBSZWdFeHAoZi5zb3VyY2UrIig/OiIrZS5tYXAoZnVuY3Rpb24odSl7cmV0dXJuIig/OiIrdS5zb3VyY2UrIikifSkuam9pbigifCIpKyIpKiIpO2Z1bmN0aW9uIGgodSl7dmFyIGUsdD0hKDE8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzFdKXx8YXJndW1lbnRzWzFdLG49IiI7cmV0dXJuKHQ/YzpmKS50ZXN0KHUpJiYobis9KGU9dS5tYXRjaCh0P2Q6cykpWzBdLHU9dS5zdWJzdHIodS5pbmRleE9mKG4pK2VbMF0ubGVuZ3RoKSxuKz0odD0iIiwodT0oZT11KS5tYXRjaChyKSkmJih0Kz11WzBdLHQrPWgoZT1lLnN1YnN0cih1WzBdLmxlbmd0aCkpKSx0KSksbn1mdW5jdGlvbiBuKHUpe2Zvcih2YXIgZT0wPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PXU/dToiIix0PVtdOzA8ZS5sZW5ndGg7KXZhciBuLHI9aChlLCExKSxlPXI/KDA8KG49ZS5pbmRleE9mKHIpKSYmdC5wdXNoKHt0ZXh0OmUuc2xpY2UoMCxuKSx0eXBlOm99KSx0LnB1c2goe3RleHQ6cix0eXBlOml9KSxlLnNsaWNlKG4rci5sZW5ndGgpKToodC5wdXNoKHt0ZXh0OmUsdHlwZTpvfSksIiIpO3JldHVybiB0fWZ1bmN0aW9uIGwoKXt2YXIgdSxlPTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXToiIix0PSExO3JldHVybiB0PTA8ZS5sZW5ndGg/KHU9aChlKSkmJnUubGVuZ3RoPT09ZS5sZW5ndGg6dH1mdW5jdGlvbiBnKCl7Zm9yKHZhciB1PTA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXToiIjswPHUubGVuZ3RoOyl7dmFyIGU9aCh1KTtpZihlKXJldHVybiEwO2U9ZS5sZW5ndGh8fDEsdT11LnN1YnN0cihlKX1yZXR1cm4hMX1mdW5jdGlvbiBhKCl7cmV0dXJuKDA8YXJndW1lbnRzLmxlbmd0aCYmdm9pZCAwIT09YXJndW1lbnRzWzBdP2FyZ3VtZW50c1swXToiIikuc3BsaXQoIiIpLm1hcChmdW5jdGlvbih1KXtyZXR1cm4iXFx1IisoZT11LmNoYXJDb2RlQXQoMCkudG9TdHJpbmcoMTYpLHQ9NCx1PSIwIix0Pj49MCx1PVN0cmluZyh2b2lkIDAhPT11P3U6IiAiKSxlLmxlbmd0aD50P2U6KCh0LT1lLmxlbmd0aCk+dS5sZW5ndGgmJih1Kz11LnJlcGVhdCh0L3UubGVuZ3RoKSksdS5zbGljZSgwLHQpK2UpKTt2YXIgZSx0fSl9ZnVuY3Rpb24gcCgpe2Zvcih2YXIgdT0wLGU9bigwPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06IiIpLHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdLnR5cGU9PT1vP3UrPWVbdF0udGV4dC5sZW5ndGg6dSs9MTtyZXR1cm4gdX1mdW5jdGlvbiBGKCl7dmFyIHU9MDxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMF0/YXJndW1lbnRzWzBdOiIiLGU9MTxhcmd1bWVudHMubGVuZ3RoJiZ2b2lkIDAhPT1hcmd1bWVudHNbMV0/YXJndW1lbnRzWzFdOjAsdD0yPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1syXT9hcmd1bWVudHNbMl06MS8wLHU9QSh1KTtyZXR1cm4gZTwwJiYoZT11Lmxlbmd0aCtlKSx1LnNsaWNlKGUsZSt0KS5qb2luKCIiKX1mdW5jdGlvbiBBKCl7Zm9yKHZhciB1PVtdLGU9bigwPGFyZ3VtZW50cy5sZW5ndGgmJnZvaWQgMCE9PWFyZ3VtZW50c1swXT9hcmd1bWVudHNbMF06IiIpLHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdLnR5cGU9PT1vP3U9dS5jb25jYXQoZVt0XS50ZXh0LnNwbGl0KCIiKSk6dS5wdXNoKGVbdF0udGV4dCk7cmV0dXJuIHV9ZT17aXNFbW9qaTpsLGNvbnRhaW5zRW1vamk6ZyxzdHIydW5pY29kZUFycmF5OmEsbGVuZ3RoOnAsc3Vic3RyOkYsbWF0Y2hPbmVFbW9qaTpoLHRvQXJyYXk6QX07dS5tYXRjaE9uZUVtb2ppPWgsdS5pc0Vtb2ppPWwsdS5jb250YWluc0Vtb2ppPWcsdS5zdHIydW5pY29kZUFycmF5PWEsdS5sZW5ndGg9cCx1LnN1YnN0cj1GLHUudG9BcnJheT1BLHUuZGVmYXVsdD1lLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh1LCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KX0pOwovLyMgc291cmNlTWFwcGluZ1VSTD1lbW91dGlscy5taW4uanMubWFwCg=="},{"meta":{"name":"md5.min.js","url":"https://cdn.bootcss.com/blueimp-md5/2.10.0/js/md5.min.js","ts":1670371893028,"mimetype":"text/javascript"},"source":"IWZ1bmN0aW9uKG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiB0KG4sdCl7dmFyIHI9KDY1NTM1Jm4pKyg2NTUzNSZ0KTtyZXR1cm4obj4+MTYpKyh0Pj4xNikrKHI+PjE2KTw8MTZ8NjU1MzUmcn1mdW5jdGlvbiByKG4sdCl7cmV0dXJuIG48PHR8bj4+PjMyLXR9ZnVuY3Rpb24gZShuLGUsbyx1LGMsZil7cmV0dXJuIHQocih0KHQoZSxuKSx0KHUsZikpLGMpLG8pfWZ1bmN0aW9uIG8obix0LHIsbyx1LGMsZil7cmV0dXJuIGUodCZyfH50Jm8sbix0LHUsYyxmKX1mdW5jdGlvbiB1KG4sdCxyLG8sdSxjLGYpe3JldHVybiBlKHQmb3xyJn5vLG4sdCx1LGMsZil9ZnVuY3Rpb24gYyhuLHQscixvLHUsYyxmKXtyZXR1cm4gZSh0XnJebyxuLHQsdSxjLGYpfWZ1bmN0aW9uIGYobix0LHIsbyx1LGMsZil7cmV0dXJuIGUocl4odHx+byksbix0LHUsYyxmKX1mdW5jdGlvbiBpKG4scil7bltyPj41XXw9MTI4PDxyJTMyLG5bMTQrKHIrNjQ+Pj45PDw0KV09cjt2YXIgZSxpLGEsZCxoLGw9MTczMjU4NDE5MyxnPS0yNzE3MzM4Nzksdj0tMTczMjU4NDE5NCxtPTI3MTczMzg3ODtmb3IoZT0wO2U8bi5sZW5ndGg7ZSs9MTYpaT1sLGE9ZyxkPXYsaD1tLGc9ZihnPWYoZz1mKGc9ZihnPWMoZz1jKGc9YyhnPWMoZz11KGc9dShnPXUoZz11KGc9byhnPW8oZz1vKGc9byhnLHY9byh2LG09byhtLGw9byhsLGcsdixtLG5bZV0sNywtNjgwODc2OTM2KSxnLHYsbltlKzFdLDEyLC0zODk1NjQ1ODYpLGwsZyxuW2UrMl0sMTcsNjA2MTA1ODE5KSxtLGwsbltlKzNdLDIyLC0xMDQ0NTI1MzMwKSx2PW8odixtPW8obSxsPW8obCxnLHYsbSxuW2UrNF0sNywtMTc2NDE4ODk3KSxnLHYsbltlKzVdLDEyLDEyMDAwODA0MjYpLGwsZyxuW2UrNl0sMTcsLTE0NzMyMzEzNDEpLG0sbCxuW2UrN10sMjIsLTQ1NzA1OTgzKSx2PW8odixtPW8obSxsPW8obCxnLHYsbSxuW2UrOF0sNywxNzcwMDM1NDE2KSxnLHYsbltlKzldLDEyLC0xOTU4NDE0NDE3KSxsLGcsbltlKzEwXSwxNywtNDIwNjMpLG0sbCxuW2UrMTFdLDIyLC0xOTkwNDA0MTYyKSx2PW8odixtPW8obSxsPW8obCxnLHYsbSxuW2UrMTJdLDcsMTgwNDYwMzY4MiksZyx2LG5bZSsxM10sMTIsLTQwMzQxMTAxKSxsLGcsbltlKzE0XSwxNywtMTUwMjAwMjI5MCksbSxsLG5bZSsxNV0sMjIsMTIzNjUzNTMyOSksdj11KHYsbT11KG0sbD11KGwsZyx2LG0sbltlKzFdLDUsLTE2NTc5NjUxMCksZyx2LG5bZSs2XSw5LC0xMDY5NTAxNjMyKSxsLGcsbltlKzExXSwxNCw2NDM3MTc3MTMpLG0sbCxuW2VdLDIwLC0zNzM4OTczMDIpLHY9dSh2LG09dShtLGw9dShsLGcsdixtLG5bZSs1XSw1LC03MDE1NTg2OTEpLGcsdixuW2UrMTBdLDksMzgwMTYwODMpLGwsZyxuW2UrMTVdLDE0LC02NjA0NzgzMzUpLG0sbCxuW2UrNF0sMjAsLTQwNTUzNzg0OCksdj11KHYsbT11KG0sbD11KGwsZyx2LG0sbltlKzldLDUsNTY4NDQ2NDM4KSxnLHYsbltlKzE0XSw5LC0xMDE5ODAzNjkwKSxsLGcsbltlKzNdLDE0LC0xODczNjM5NjEpLG0sbCxuW2UrOF0sMjAsMTE2MzUzMTUwMSksdj11KHYsbT11KG0sbD11KGwsZyx2LG0sbltlKzEzXSw1LC0xNDQ0NjgxNDY3KSxnLHYsbltlKzJdLDksLTUxNDAzNzg0KSxsLGcsbltlKzddLDE0LDE3MzUzMjg0NzMpLG0sbCxuW2UrMTJdLDIwLC0xOTI2NjA3NzM0KSx2PWModixtPWMobSxsPWMobCxnLHYsbSxuW2UrNV0sNCwtMzc4NTU4KSxnLHYsbltlKzhdLDExLC0yMDIyNTc0NDYzKSxsLGcsbltlKzExXSwxNiwxODM5MDMwNTYyKSxtLGwsbltlKzE0XSwyMywtMzUzMDk1NTYpLHY9Yyh2LG09YyhtLGw9YyhsLGcsdixtLG5bZSsxXSw0LC0xNTMwOTkyMDYwKSxnLHYsbltlKzRdLDExLDEyNzI4OTMzNTMpLGwsZyxuW2UrN10sMTYsLTE1NTQ5NzYzMiksbSxsLG5bZSsxMF0sMjMsLTEwOTQ3MzA2NDApLHY9Yyh2LG09YyhtLGw9YyhsLGcsdixtLG5bZSsxM10sNCw2ODEyNzkxNzQpLGcsdixuW2VdLDExLC0zNTg1MzcyMjIpLGwsZyxuW2UrM10sMTYsLTcyMjUyMTk3OSksbSxsLG5bZSs2XSwyMyw3NjAyOTE4OSksdj1jKHYsbT1jKG0sbD1jKGwsZyx2LG0sbltlKzldLDQsLTY0MDM2NDQ4NyksZyx2LG5bZSsxMl0sMTEsLTQyMTgxNTgzNSksbCxnLG5bZSsxNV0sMTYsNTMwNzQyNTIwKSxtLGwsbltlKzJdLDIzLC05OTUzMzg2NTEpLHY9Zih2LG09ZihtLGw9ZihsLGcsdixtLG5bZV0sNiwtMTk4NjMwODQ0KSxnLHYsbltlKzddLDEwLDExMjY4OTE0MTUpLGwsZyxuW2UrMTRdLDE1LC0xNDE2MzU0OTA1KSxtLGwsbltlKzVdLDIxLC01NzQzNDA1NSksdj1mKHYsbT1mKG0sbD1mKGwsZyx2LG0sbltlKzEyXSw2LDE3MDA0ODU1NzEpLGcsdixuW2UrM10sMTAsLTE4OTQ5ODY2MDYpLGwsZyxuW2UrMTBdLDE1LC0xMDUxNTIzKSxtLGwsbltlKzFdLDIxLC0yMDU0OTIyNzk5KSx2PWYodixtPWYobSxsPWYobCxnLHYsbSxuW2UrOF0sNiwxODczMzEzMzU5KSxnLHYsbltlKzE1XSwxMCwtMzA2MTE3NDQpLGwsZyxuW2UrNl0sMTUsLTE1NjAxOTgzODApLG0sbCxuW2UrMTNdLDIxLDEzMDkxNTE2NDkpLHY9Zih2LG09ZihtLGw9ZihsLGcsdixtLG5bZSs0XSw2LC0xNDU1MjMwNzApLGcsdixuW2UrMTFdLDEwLC0xMTIwMjEwMzc5KSxsLGcsbltlKzJdLDE1LDcxODc4NzI1OSksbSxsLG5bZSs5XSwyMSwtMzQzNDg1NTUxKSxsPXQobCxpKSxnPXQoZyxhKSx2PXQodixkKSxtPXQobSxoKTtyZXR1cm5bbCxnLHYsbV19ZnVuY3Rpb24gYShuKXt2YXIgdCxyPSIiLGU9MzIqbi5sZW5ndGg7Zm9yKHQ9MDt0PGU7dCs9OClyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKG5bdD4+NV0+Pj50JTMyJjI1NSk7cmV0dXJuIHJ9ZnVuY3Rpb24gZChuKXt2YXIgdCxyPVtdO2ZvcihyWyhuLmxlbmd0aD4+MiktMV09dm9pZCAwLHQ9MDt0PHIubGVuZ3RoO3QrPTEpclt0XT0wO3ZhciBlPTgqbi5sZW5ndGg7Zm9yKHQ9MDt0PGU7dCs9OClyW3Q+PjVdfD0oMjU1Jm4uY2hhckNvZGVBdCh0LzgpKTw8dCUzMjtyZXR1cm4gcn1mdW5jdGlvbiBoKG4pe3JldHVybiBhKGkoZChuKSw4Km4ubGVuZ3RoKSl9ZnVuY3Rpb24gbChuLHQpe3ZhciByLGUsbz1kKG4pLHU9W10sYz1bXTtmb3IodVsxNV09Y1sxNV09dm9pZCAwLG8ubGVuZ3RoPjE2JiYobz1pKG8sOCpuLmxlbmd0aCkpLHI9MDtyPDE2O3IrPTEpdVtyXT05MDk1MjI0ODZeb1tyXSxjW3JdPTE1NDk1NTY4Mjheb1tyXTtyZXR1cm4gZT1pKHUuY29uY2F0KGQodCkpLDUxMis4KnQubGVuZ3RoKSxhKGkoYy5jb25jYXQoZSksNjQwKSl9ZnVuY3Rpb24gZyhuKXt2YXIgdCxyLGU9IiI7Zm9yKHI9MDtyPG4ubGVuZ3RoO3IrPTEpdD1uLmNoYXJDb2RlQXQociksZSs9IjAxMjM0NTY3ODlhYmNkZWYiLmNoYXJBdCh0Pj4+NCYxNSkrIjAxMjM0NTY3ODlhYmNkZWYiLmNoYXJBdCgxNSZ0KTtyZXR1cm4gZX1mdW5jdGlvbiB2KG4pe3JldHVybiB1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQobikpfWZ1bmN0aW9uIG0obil7cmV0dXJuIGgodihuKSl9ZnVuY3Rpb24gcChuKXtyZXR1cm4gZyhtKG4pKX1mdW5jdGlvbiBzKG4sdCl7cmV0dXJuIGwodihuKSx2KHQpKX1mdW5jdGlvbiBDKG4sdCl7cmV0dXJuIGcocyhuLHQpKX1mdW5jdGlvbiBBKG4sdCxyKXtyZXR1cm4gdD9yP3ModCxuKTpDKHQsbik6cj9tKG4pOnAobil9ImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoZnVuY3Rpb24oKXtyZXR1cm4gQX0pOiJvYmplY3QiPT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuZXhwb3J0cz9tb2R1bGUuZXhwb3J0cz1BOm4ubWQ1PUF9KHRoaXMpOwovLyMgc291cmNlTWFwcGluZ1VSTD1tZDUubWluLmpzLm1hcA=="},{"meta":{"name":"BigInteger.min.js","url":"https://peterolson.github.io/BigInteger.js/BigInteger.min.js","ts":1670371893035,"mimetype":"text/javascript"},"source":"dmFyIGJpZ0ludD1mdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9MWU3LHI9OTAwNzE5OTI1NDc0MDk5MixvPWYociksbj0iMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6IixpPSJmdW5jdGlvbiI9PXR5cGVvZiBCaWdJbnQ7ZnVuY3Rpb24gdSh0LGUscixvKXtyZXR1cm4gdm9pZCAwPT09dD91WzBdOnZvaWQgMCE9PWUmJigxMCE9K2V8fHIpP18odCxlLHIsbyk6Syh0KX1mdW5jdGlvbiBwKHQsZSl7dGhpcy52YWx1ZT10LHRoaXMuc2lnbj1lLHRoaXMuaXNTbWFsbD0hMX1mdW5jdGlvbiBhKHQpe3RoaXMudmFsdWU9dCx0aGlzLnNpZ249dDwwLHRoaXMuaXNTbWFsbD0hMH1mdW5jdGlvbiBzKHQpe3RoaXMudmFsdWU9dH1mdW5jdGlvbiBsKHQpe3JldHVybi1yPHQmJnQ8cn1mdW5jdGlvbiBmKHQpe3JldHVybiB0PDFlNz9bdF06dDwxZTE0P1t0JTFlNyxNYXRoLmZsb29yKHQvMWU3KV06W3QlMWU3LE1hdGguZmxvb3IodC8xZTcpJTFlNyxNYXRoLmZsb29yKHQvMWUxNCldfWZ1bmN0aW9uIHYodCl7aCh0KTt2YXIgcj10Lmxlbmd0aDtpZihyPDQmJkEodCxvKTwwKXN3aXRjaChyKXtjYXNlIDA6cmV0dXJuIDA7Y2FzZSAxOnJldHVybiB0WzBdO2Nhc2UgMjpyZXR1cm4gdFswXSt0WzFdKmU7ZGVmYXVsdDpyZXR1cm4gdFswXSsodFsxXSt0WzJdKmUpKmV9cmV0dXJuIHR9ZnVuY3Rpb24gaCh0KXtmb3IodmFyIGU9dC5sZW5ndGg7MD09PXRbLS1lXTspO3QubGVuZ3RoPWUrMX1mdW5jdGlvbiB5KHQpe2Zvcih2YXIgZT1uZXcgQXJyYXkodCkscj0tMTsrK3I8dDspZVtyXT0wO3JldHVybiBlfWZ1bmN0aW9uIGcodCl7cmV0dXJuIHQ+MD9NYXRoLmZsb29yKHQpOk1hdGguY2VpbCh0KX1mdW5jdGlvbiBjKHQscil7dmFyIG8sbixpPXQubGVuZ3RoLHU9ci5sZW5ndGgscD1uZXcgQXJyYXkoaSksYT0wLHM9ZTtmb3Iobj0wO248dTtuKyspYT0obz10W25dK3Jbbl0rYSk+PXM/MTowLHBbbl09by1hKnM7Zm9yKDtuPGk7KWE9KG89dFtuXSthKT09PXM/MTowLHBbbisrXT1vLWEqcztyZXR1cm4gYT4wJiZwLnB1c2goYSkscH1mdW5jdGlvbiBtKHQsZSl7cmV0dXJuIHQubGVuZ3RoPj1lLmxlbmd0aD9jKHQsZSk6YyhlLHQpfWZ1bmN0aW9uIGQodCxyKXt2YXIgbyxuLGk9dC5sZW5ndGgsdT1uZXcgQXJyYXkoaSkscD1lO2ZvcihuPTA7bjxpO24rKylvPXRbbl0tcCtyLHI9TWF0aC5mbG9vcihvL3ApLHVbbl09by1yKnAscis9MTtmb3IoO3I+MDspdVtuKytdPXIlcCxyPU1hdGguZmxvb3Ioci9wKTtyZXR1cm4gdX1mdW5jdGlvbiBiKHQscil7dmFyIG8sbixpPXQubGVuZ3RoLHU9ci5sZW5ndGgscD1uZXcgQXJyYXkoaSksYT0wLHM9ZTtmb3Iobz0wO288dTtvKyspKG49dFtvXS1hLXJbb10pPDA/KG4rPXMsYT0xKTphPTAscFtvXT1uO2ZvcihvPXU7bzxpO28rKyl7aWYoISgobj10W29dLWEpPDApKXtwW28rK109bjticmVha31uKz1zLHBbb109bn1mb3IoO288aTtvKyspcFtvXT10W29dO3JldHVybiBoKHApLHB9ZnVuY3Rpb24gdyh0LHIsbyl7dmFyIG4saSx1PXQubGVuZ3RoLHM9bmV3IEFycmF5KHUpLGw9LXIsZj1lO2ZvcihuPTA7bjx1O24rKylpPXRbbl0rbCxsPU1hdGguZmxvb3IoaS9mKSxpJT1mLHNbbl09aTwwP2krZjppO3JldHVybiJudW1iZXIiPT10eXBlb2Yocz12KHMpKT8obyYmKHM9LXMpLG5ldyBhKHMpKTpuZXcgcChzLG8pfWZ1bmN0aW9uIFModCxyKXt2YXIgbyxuLGksdSxwPXQubGVuZ3RoLGE9ci5sZW5ndGgscz15KHArYSksbD1lO2ZvcihpPTA7aTxwOysraSl7dT10W2ldO2Zvcih2YXIgZj0wO2Y8YTsrK2Ypbz11KnJbZl0rc1tpK2ZdLG49TWF0aC5mbG9vcihvL2wpLHNbaStmXT1vLW4qbCxzW2krZisxXSs9bn1yZXR1cm4gaChzKSxzfWZ1bmN0aW9uIEkodCxyKXt2YXIgbyxuLGk9dC5sZW5ndGgsdT1uZXcgQXJyYXkoaSkscD1lLGE9MDtmb3Iobj0wO248aTtuKyspbz10W25dKnIrYSxhPU1hdGguZmxvb3Ioby9wKSx1W25dPW8tYSpwO2Zvcig7YT4wOyl1W24rK109YSVwLGE9TWF0aC5mbG9vcihhL3ApO3JldHVybiB1fWZ1bmN0aW9uIHEodCxlKXtmb3IodmFyIHI9W107ZS0tID4wOylyLnB1c2goMCk7cmV0dXJuIHIuY29uY2F0KHQpfWZ1bmN0aW9uIE0odCxlKXt2YXIgcj1NYXRoLm1heCh0Lmxlbmd0aCxlLmxlbmd0aCk7aWYocjw9MzApcmV0dXJuIFModCxlKTtyPU1hdGguY2VpbChyLzIpO3ZhciBvPXQuc2xpY2Uociksbj10LnNsaWNlKDAsciksaT1lLnNsaWNlKHIpLHU9ZS5zbGljZSgwLHIpLHA9TShuLHUpLGE9TShvLGkpLHM9TShtKG4sbyksbSh1LGkpKSxsPW0obShwLHEoYihiKHMscCksYSkscikpLHEoYSwyKnIpKTtyZXR1cm4gaChsKSxsfWZ1bmN0aW9uIE4odCxyLG8pe3JldHVybiBuZXcgcCh0PGU/SShyLHQpOlMocixmKHQpKSxvKX1mdW5jdGlvbiBFKHQpe3ZhciByLG8sbixpLHU9dC5sZW5ndGgscD15KHUrdSksYT1lO2ZvcihuPTA7bjx1O24rKyl7bz0wLShpPXRbbl0pKmk7Zm9yKHZhciBzPW47czx1O3MrKylyPWkqdFtzXSoyK3BbbitzXStvLG89TWF0aC5mbG9vcihyL2EpLHBbbitzXT1yLW8qYTtwW24rdV09b31yZXR1cm4gaChwKSxwfWZ1bmN0aW9uIE8odCxlKXt2YXIgcixvLG4saSx1PXQubGVuZ3RoLHA9eSh1KTtmb3Iobj0wLHI9dS0xO3I+PTA7LS1yKW49KGk9MWU3Km4rdFtyXSktKG89ZyhpL2UpKSplLHBbcl09MHxvO3JldHVybltwLDB8bl19ZnVuY3Rpb24gQih0LHIpe3ZhciBvLG49SyhyKTtpZihpKXJldHVybltuZXcgcyh0LnZhbHVlL24udmFsdWUpLG5ldyBzKHQudmFsdWUlbi52YWx1ZSldO3ZhciBsLGM9dC52YWx1ZSxtPW4udmFsdWU7aWYoMD09PW0pdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgZGl2aWRlIGJ5IHplcm8iKTtpZih0LmlzU21hbGwpcmV0dXJuIG4uaXNTbWFsbD9bbmV3IGEoZyhjL20pKSxuZXcgYShjJW0pXTpbdVswXSx0XTtpZihuLmlzU21hbGwpe2lmKDE9PT1tKXJldHVyblt0LHVbMF1dO2lmKC0xPT1tKXJldHVyblt0Lm5lZ2F0ZSgpLHVbMF1dO3ZhciBkPU1hdGguYWJzKG0pO2lmKGQ8ZSl7bD12KChvPU8oYyxkKSlbMF0pO3ZhciB3PW9bMV07cmV0dXJuIHQuc2lnbiYmKHc9LXcpLCJudW1iZXIiPT10eXBlb2YgbD8odC5zaWduIT09bi5zaWduJiYobD0tbCksW25ldyBhKGwpLG5ldyBhKHcpXSk6W25ldyBwKGwsdC5zaWduIT09bi5zaWduKSxuZXcgYSh3KV19bT1mKGQpfXZhciBTPUEoYyxtKTtpZigtMT09PVMpcmV0dXJuW3VbMF0sdF07aWYoMD09PVMpcmV0dXJuW3VbdC5zaWduPT09bi5zaWduPzE6LTFdLHVbMF1dO289Yy5sZW5ndGgrbS5sZW5ndGg8PTIwMD9mdW5jdGlvbih0LHIpe3ZhciBvLG4saSx1LHAsYSxzLGw9dC5sZW5ndGgsZj1yLmxlbmd0aCxoPWUsZz15KHIubGVuZ3RoKSxjPXJbZi0xXSxtPU1hdGguY2VpbChoLygyKmMpKSxkPUkodCxtKSxiPUkocixtKTtmb3IoZC5sZW5ndGg8PWwmJmQucHVzaCgwKSxiLnB1c2goMCksYz1iW2YtMV0sbj1sLWY7bj49MDtuLS0pe2ZvcihvPWgtMSxkW24rZl0hPT1jJiYobz1NYXRoLmZsb29yKChkW24rZl0qaCtkW24rZi0xXSkvYykpLGk9MCx1PTAsYT1iLmxlbmd0aCxwPTA7cDxhO3ArKylpKz1vKmJbcF0scz1NYXRoLmZsb29yKGkvaCksdSs9ZFtuK3BdLShpLXMqaCksaT1zLHU8MD8oZFtuK3BdPXUraCx1PS0xKTooZFtuK3BdPXUsdT0wKTtmb3IoOzAhPT11Oyl7Zm9yKG8tPTEsaT0wLHA9MDtwPGE7cCsrKShpKz1kW24rcF0taCtiW3BdKTwwPyhkW24rcF09aStoLGk9MCk6KGRbbitwXT1pLGk9MSk7dSs9aX1nW25dPW99cmV0dXJuIGQ9TyhkLG0pWzBdLFt2KGcpLHYoZCldfShjLG0pOmZ1bmN0aW9uKHQscil7Zm9yKHZhciBvLG4saSx1LHAsYT10Lmxlbmd0aCxzPXIubGVuZ3RoLGw9W10sZj1bXSx5PWU7YTspaWYoZi51bnNoaWZ0KHRbLS1hXSksaChmKSxBKGYscik8MClsLnB1c2goMCk7ZWxzZXtpPWZbKG49Zi5sZW5ndGgpLTFdKnkrZltuLTJdLHU9cltzLTFdKnkrcltzLTJdLG4+cyYmKGk9KGkrMSkqeSksbz1NYXRoLmNlaWwoaS91KTtkb3tpZihBKHA9SShyLG8pLGYpPD0wKWJyZWFrO28tLX13aGlsZShvKTtsLnB1c2gobyksZj1iKGYscCl9cmV0dXJuIGwucmV2ZXJzZSgpLFt2KGwpLHYoZildfShjLG0pLGw9b1swXTt2YXIgcT10LnNpZ24hPT1uLnNpZ24sTT1vWzFdLE49dC5zaWduO3JldHVybiJudW1iZXIiPT10eXBlb2YgbD8ocSYmKGw9LWwpLGw9bmV3IGEobCkpOmw9bmV3IHAobCxxKSwibnVtYmVyIj09dHlwZW9mIE0/KE4mJihNPS1NKSxNPW5ldyBhKE0pKTpNPW5ldyBwKE0sTiksW2wsTV19ZnVuY3Rpb24gQSh0LGUpe2lmKHQubGVuZ3RoIT09ZS5sZW5ndGgpcmV0dXJuIHQubGVuZ3RoPmUubGVuZ3RoPzE6LTE7Zm9yKHZhciByPXQubGVuZ3RoLTE7cj49MDtyLS0paWYodFtyXSE9PWVbcl0pcmV0dXJuIHRbcl0+ZVtyXT8xOi0xO3JldHVybiAwfWZ1bmN0aW9uIFAodCl7dmFyIGU9dC5hYnMoKTtyZXR1cm4hZS5pc1VuaXQoKSYmKCEhKGUuZXF1YWxzKDIpfHxlLmVxdWFscygzKXx8ZS5lcXVhbHMoNSkpfHwhKGUuaXNFdmVuKCl8fGUuaXNEaXZpc2libGVCeSgzKXx8ZS5pc0RpdmlzaWJsZUJ5KDUpKSYmKCEhZS5sZXNzZXIoNDkpfHx2b2lkIDApKX1mdW5jdGlvbiBaKHQsZSl7Zm9yKHZhciByLG8sbixpPXQucHJldigpLHU9aSxwPTA7dS5pc0V2ZW4oKTspdT11LmRpdmlkZSgyKSxwKys7dDpmb3Iobz0wO288ZS5sZW5ndGg7bysrKWlmKCF0Lmxlc3NlcihlW29dKSYmIShuPWJpZ0ludChlW29dKS5tb2RQb3codSx0KSkuaXNVbml0KCkmJiFuLmVxdWFscyhpKSl7Zm9yKHI9cC0xOzAhPXI7ci0tKXtpZigobj1uLnNxdWFyZSgpLm1vZCh0KSkuaXNVbml0KCkpcmV0dXJuITE7aWYobi5lcXVhbHMoaSkpY29udGludWUgdH1yZXR1cm4hMX1yZXR1cm4hMH1wLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHUucHJvdG90eXBlKSxhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHUucHJvdG90eXBlKSxzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHUucHJvdG90eXBlKSxwLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7dmFyIGU9Syh0KTtpZih0aGlzLnNpZ24hPT1lLnNpZ24pcmV0dXJuIHRoaXMuc3VidHJhY3QoZS5uZWdhdGUoKSk7dmFyIHI9dGhpcy52YWx1ZSxvPWUudmFsdWU7cmV0dXJuIGUuaXNTbWFsbD9uZXcgcChkKHIsTWF0aC5hYnMobykpLHRoaXMuc2lnbik6bmV3IHAobShyLG8pLHRoaXMuc2lnbil9LHAucHJvdG90eXBlLnBsdXM9cC5wcm90b3R5cGUuYWRkLGEucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt2YXIgZT1LKHQpLHI9dGhpcy52YWx1ZTtpZihyPDAhPT1lLnNpZ24pcmV0dXJuIHRoaXMuc3VidHJhY3QoZS5uZWdhdGUoKSk7dmFyIG89ZS52YWx1ZTtpZihlLmlzU21hbGwpe2lmKGwocitvKSlyZXR1cm4gbmV3IGEocitvKTtvPWYoTWF0aC5hYnMobykpfXJldHVybiBuZXcgcChkKG8sTWF0aC5hYnMocikpLHI8MCl9LGEucHJvdG90eXBlLnBsdXM9YS5wcm90b3R5cGUuYWRkLHMucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHModGhpcy52YWx1ZStLKHQpLnZhbHVlKX0scy5wcm90b3R5cGUucGx1cz1zLnByb3RvdHlwZS5hZGQscC5wcm90b3R5cGUuc3VidHJhY3Q9ZnVuY3Rpb24odCl7dmFyIGU9Syh0KTtpZih0aGlzLnNpZ24hPT1lLnNpZ24pcmV0dXJuIHRoaXMuYWRkKGUubmVnYXRlKCkpO3ZhciByPXRoaXMudmFsdWUsbz1lLnZhbHVlO3JldHVybiBlLmlzU21hbGw/dyhyLE1hdGguYWJzKG8pLHRoaXMuc2lnbik6ZnVuY3Rpb24odCxlLHIpe3ZhciBvO3JldHVybiBBKHQsZSk+PTA/bz1iKHQsZSk6KG89YihlLHQpLHI9IXIpLCJudW1iZXIiPT10eXBlb2Yobz12KG8pKT8ociYmKG89LW8pLG5ldyBhKG8pKTpuZXcgcChvLHIpfShyLG8sdGhpcy5zaWduKX0scC5wcm90b3R5cGUubWludXM9cC5wcm90b3R5cGUuc3VidHJhY3QsYS5wcm90b3R5cGUuc3VidHJhY3Q9ZnVuY3Rpb24odCl7dmFyIGU9Syh0KSxyPXRoaXMudmFsdWU7aWYocjwwIT09ZS5zaWduKXJldHVybiB0aGlzLmFkZChlLm5lZ2F0ZSgpKTt2YXIgbz1lLnZhbHVlO3JldHVybiBlLmlzU21hbGw/bmV3IGEoci1vKTp3KG8sTWF0aC5hYnMocikscj49MCl9LGEucHJvdG90eXBlLm1pbnVzPWEucHJvdG90eXBlLnN1YnRyYWN0LHMucHJvdG90eXBlLnN1YnRyYWN0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcyh0aGlzLnZhbHVlLUsodCkudmFsdWUpfSxzLnByb3RvdHlwZS5taW51cz1zLnByb3RvdHlwZS5zdWJ0cmFjdCxwLnByb3RvdHlwZS5uZWdhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHAodGhpcy52YWx1ZSwhdGhpcy5zaWduKX0sYS5wcm90b3R5cGUubmVnYXRlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zaWduLGU9bmV3IGEoLXRoaXMudmFsdWUpO3JldHVybiBlLnNpZ249IXQsZX0scy5wcm90b3R5cGUubmVnYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBzKC10aGlzLnZhbHVlKX0scC5wcm90b3R5cGUuYWJzPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBwKHRoaXMudmFsdWUsITEpfSxhLnByb3RvdHlwZS5hYnM9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGEoTWF0aC5hYnModGhpcy52YWx1ZSkpfSxzLnByb3RvdHlwZS5hYnM9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHModGhpcy52YWx1ZT49MD90aGlzLnZhbHVlOi10aGlzLnZhbHVlKX0scC5wcm90b3R5cGUubXVsdGlwbHk9ZnVuY3Rpb24odCl7dmFyIHIsbyxuLGk9Syh0KSxhPXRoaXMudmFsdWUscz1pLnZhbHVlLGw9dGhpcy5zaWduIT09aS5zaWduO2lmKGkuaXNTbWFsbCl7aWYoMD09PXMpcmV0dXJuIHVbMF07aWYoMT09PXMpcmV0dXJuIHRoaXM7aWYoLTE9PT1zKXJldHVybiB0aGlzLm5lZ2F0ZSgpO2lmKChyPU1hdGguYWJzKHMpKTxlKXJldHVybiBuZXcgcChJKGEsciksbCk7cz1mKHIpfXJldHVybiBvPWEubGVuZ3RoLG49cy5sZW5ndGgsbmV3IHAoLS4wMTIqby0uMDEyKm4rMTVlLTYqbypuPjA/TShhLHMpOlMoYSxzKSxsKX0scC5wcm90b3R5cGUudGltZXM9cC5wcm90b3R5cGUubXVsdGlwbHksYS5wcm90b3R5cGUuX211bHRpcGx5QnlTbWFsbD1mdW5jdGlvbih0KXtyZXR1cm4gbCh0LnZhbHVlKnRoaXMudmFsdWUpP25ldyBhKHQudmFsdWUqdGhpcy52YWx1ZSk6TihNYXRoLmFicyh0LnZhbHVlKSxmKE1hdGguYWJzKHRoaXMudmFsdWUpKSx0aGlzLnNpZ24hPT10LnNpZ24pfSxwLnByb3RvdHlwZS5fbXVsdGlwbHlCeVNtYWxsPWZ1bmN0aW9uKHQpe3JldHVybiAwPT09dC52YWx1ZT91WzBdOjE9PT10LnZhbHVlP3RoaXM6LTE9PT10LnZhbHVlP3RoaXMubmVnYXRlKCk6TihNYXRoLmFicyh0LnZhbHVlKSx0aGlzLnZhbHVlLHRoaXMuc2lnbiE9PXQuc2lnbil9LGEucHJvdG90eXBlLm11bHRpcGx5PWZ1bmN0aW9uKHQpe3JldHVybiBLKHQpLl9tdWx0aXBseUJ5U21hbGwodGhpcyl9LGEucHJvdG90eXBlLnRpbWVzPWEucHJvdG90eXBlLm11bHRpcGx5LHMucHJvdG90eXBlLm11bHRpcGx5PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcyh0aGlzLnZhbHVlKksodCkudmFsdWUpfSxzLnByb3RvdHlwZS50aW1lcz1zLnByb3RvdHlwZS5tdWx0aXBseSxwLnByb3RvdHlwZS5zcXVhcmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHAoRSh0aGlzLnZhbHVlKSwhMSl9LGEucHJvdG90eXBlLnNxdWFyZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMudmFsdWUqdGhpcy52YWx1ZTtyZXR1cm4gbCh0KT9uZXcgYSh0KTpuZXcgcChFKGYoTWF0aC5hYnModGhpcy52YWx1ZSkpKSwhMSl9LHMucHJvdG90eXBlLnNxdWFyZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHModGhpcy52YWx1ZSp0aGlzLnZhbHVlKX0scC5wcm90b3R5cGUuZGl2bW9kPWZ1bmN0aW9uKHQpe3ZhciBlPUIodGhpcyx0KTtyZXR1cm57cXVvdGllbnQ6ZVswXSxyZW1haW5kZXI6ZVsxXX19LHMucHJvdG90eXBlLmRpdm1vZD1hLnByb3RvdHlwZS5kaXZtb2Q9cC5wcm90b3R5cGUuZGl2bW9kLHAucHJvdG90eXBlLmRpdmlkZT1mdW5jdGlvbih0KXtyZXR1cm4gQih0aGlzLHQpWzBdfSxzLnByb3RvdHlwZS5vdmVyPXMucHJvdG90eXBlLmRpdmlkZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHModGhpcy52YWx1ZS9LKHQpLnZhbHVlKX0sYS5wcm90b3R5cGUub3Zlcj1hLnByb3RvdHlwZS5kaXZpZGU9cC5wcm90b3R5cGUub3Zlcj1wLnByb3RvdHlwZS5kaXZpZGUscC5wcm90b3R5cGUubW9kPWZ1bmN0aW9uKHQpe3JldHVybiBCKHRoaXMsdClbMV19LHMucHJvdG90eXBlLm1vZD1zLnByb3RvdHlwZS5yZW1haW5kZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzKHRoaXMudmFsdWUlSyh0KS52YWx1ZSl9LGEucHJvdG90eXBlLnJlbWFpbmRlcj1hLnByb3RvdHlwZS5tb2Q9cC5wcm90b3R5cGUucmVtYWluZGVyPXAucHJvdG90eXBlLm1vZCxwLnByb3RvdHlwZS5wb3c9ZnVuY3Rpb24odCl7dmFyIGUscixvLG49Syh0KSxpPXRoaXMudmFsdWUscD1uLnZhbHVlO2lmKDA9PT1wKXJldHVybiB1WzFdO2lmKDA9PT1pKXJldHVybiB1WzBdO2lmKDE9PT1pKXJldHVybiB1WzFdO2lmKC0xPT09aSlyZXR1cm4gbi5pc0V2ZW4oKT91WzFdOnVbLTFdO2lmKG4uc2lnbilyZXR1cm4gdVswXTtpZighbi5pc1NtYWxsKXRocm93IG5ldyBFcnJvcigiVGhlIGV4cG9uZW50ICIrbi50b1N0cmluZygpKyIgaXMgdG9vIGxhcmdlLiIpO2lmKHRoaXMuaXNTbWFsbCYmbChlPU1hdGgucG93KGkscCkpKXJldHVybiBuZXcgYShnKGUpKTtmb3Iocj10aGlzLG89dVsxXTshMCZwJiYobz1vLnRpbWVzKHIpLC0tcCksMCE9PXA7KXAvPTIscj1yLnNxdWFyZSgpO3JldHVybiBvfSxhLnByb3RvdHlwZS5wb3c9cC5wcm90b3R5cGUucG93LHMucHJvdG90eXBlLnBvdz1mdW5jdGlvbih0KXt2YXIgZT1LKHQpLHI9dGhpcy52YWx1ZSxvPWUudmFsdWUsbj1CaWdJbnQoMCksaT1CaWdJbnQoMSkscD1CaWdJbnQoMik7aWYobz09PW4pcmV0dXJuIHVbMV07aWYocj09PW4pcmV0dXJuIHVbMF07aWYocj09PWkpcmV0dXJuIHVbMV07aWYocj09PUJpZ0ludCgtMSkpcmV0dXJuIGUuaXNFdmVuKCk/dVsxXTp1Wy0xXTtpZihlLmlzTmVnYXRpdmUoKSlyZXR1cm4gbmV3IHMobik7Zm9yKHZhciBhPXRoaXMsbD11WzFdOyhvJmkpPT09aSYmKGw9bC50aW1lcyhhKSwtLW8pLG8hPT1uOylvLz1wLGE9YS5zcXVhcmUoKTtyZXR1cm4gbH0scC5wcm90b3R5cGUubW9kUG93PWZ1bmN0aW9uKHQsZSl7aWYodD1LKHQpLChlPUsoZSkpLmlzWmVybygpKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IHRha2UgbW9kUG93IHdpdGggbW9kdWx1cyAwIik7dmFyIHI9dVsxXSxvPXRoaXMubW9kKGUpO2Zvcih0LmlzTmVnYXRpdmUoKSYmKHQ9dC5tdWx0aXBseSh1Wy0xXSksbz1vLm1vZEludihlKSk7dC5pc1Bvc2l0aXZlKCk7KXtpZihvLmlzWmVybygpKXJldHVybiB1WzBdO3QuaXNPZGQoKSYmKHI9ci5tdWx0aXBseShvKS5tb2QoZSkpLHQ9dC5kaXZpZGUoMiksbz1vLnNxdWFyZSgpLm1vZChlKX1yZXR1cm4gcn0scy5wcm90b3R5cGUubW9kUG93PWEucHJvdG90eXBlLm1vZFBvdz1wLnByb3RvdHlwZS5tb2RQb3cscC5wcm90b3R5cGUuY29tcGFyZUFicz1mdW5jdGlvbih0KXt2YXIgZT1LKHQpLHI9dGhpcy52YWx1ZSxvPWUudmFsdWU7cmV0dXJuIGUuaXNTbWFsbD8xOkEocixvKX0sYS5wcm90b3R5cGUuY29tcGFyZUFicz1mdW5jdGlvbih0KXt2YXIgZT1LKHQpLHI9TWF0aC5hYnModGhpcy52YWx1ZSksbz1lLnZhbHVlO3JldHVybiBlLmlzU21hbGw/cj09PShvPU1hdGguYWJzKG8pKT8wOnI+bz8xOi0xOi0xfSxzLnByb3RvdHlwZS5jb21wYXJlQWJzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudmFsdWUscj1LKHQpLnZhbHVlO3JldHVybihlPWU+PTA/ZTotZSk9PT0ocj1yPj0wP3I6LXIpPzA6ZT5yPzE6LTF9LHAucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24odCl7aWYodD09PTEvMClyZXR1cm4tMTtpZih0PT09LTEvMClyZXR1cm4gMTt2YXIgZT1LKHQpLHI9dGhpcy52YWx1ZSxvPWUudmFsdWU7cmV0dXJuIHRoaXMuc2lnbiE9PWUuc2lnbj9lLnNpZ24/MTotMTplLmlzU21hbGw/dGhpcy5zaWduPy0xOjE6QShyLG8pKih0aGlzLnNpZ24/LTE6MSl9LHAucHJvdG90eXBlLmNvbXBhcmVUbz1wLnByb3RvdHlwZS5jb21wYXJlLGEucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24odCl7aWYodD09PTEvMClyZXR1cm4tMTtpZih0PT09LTEvMClyZXR1cm4gMTt2YXIgZT1LKHQpLHI9dGhpcy52YWx1ZSxvPWUudmFsdWU7cmV0dXJuIGUuaXNTbWFsbD9yPT1vPzA6cj5vPzE6LTE6cjwwIT09ZS5zaWduP3I8MD8tMToxOnI8MD8xOi0xfSxhLnByb3RvdHlwZS5jb21wYXJlVG89YS5wcm90b3R5cGUuY29tcGFyZSxzLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKHQpe2lmKHQ9PT0xLzApcmV0dXJuLTE7aWYodD09PS0xLzApcmV0dXJuIDE7dmFyIGU9dGhpcy52YWx1ZSxyPUsodCkudmFsdWU7cmV0dXJuIGU9PT1yPzA6ZT5yPzE6LTF9LHMucHJvdG90eXBlLmNvbXBhcmVUbz1zLnByb3RvdHlwZS5jb21wYXJlLHAucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbih0KXtyZXR1cm4gMD09PXRoaXMuY29tcGFyZSh0KX0scy5wcm90b3R5cGUuZXE9cy5wcm90b3R5cGUuZXF1YWxzPWEucHJvdG90eXBlLmVxPWEucHJvdG90eXBlLmVxdWFscz1wLnByb3RvdHlwZS5lcT1wLnByb3RvdHlwZS5lcXVhbHMscC5wcm90b3R5cGUubm90RXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiAwIT09dGhpcy5jb21wYXJlKHQpfSxzLnByb3RvdHlwZS5uZXE9cy5wcm90b3R5cGUubm90RXF1YWxzPWEucHJvdG90eXBlLm5lcT1hLnByb3RvdHlwZS5ub3RFcXVhbHM9cC5wcm90b3R5cGUubmVxPXAucHJvdG90eXBlLm5vdEVxdWFscyxwLnByb3RvdHlwZS5ncmVhdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXBhcmUodCk+MH0scy5wcm90b3R5cGUuZ3Q9cy5wcm90b3R5cGUuZ3JlYXRlcj1hLnByb3RvdHlwZS5ndD1hLnByb3RvdHlwZS5ncmVhdGVyPXAucHJvdG90eXBlLmd0PXAucHJvdG90eXBlLmdyZWF0ZXIscC5wcm90b3R5cGUubGVzc2VyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXBhcmUodCk8MH0scy5wcm90b3R5cGUubHQ9cy5wcm90b3R5cGUubGVzc2VyPWEucHJvdG90eXBlLmx0PWEucHJvdG90eXBlLmxlc3Nlcj1wLnByb3RvdHlwZS5sdD1wLnByb3RvdHlwZS5sZXNzZXIscC5wcm90b3R5cGUuZ3JlYXRlck9yRXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXBhcmUodCk+PTB9LHMucHJvdG90eXBlLmdlcT1zLnByb3RvdHlwZS5ncmVhdGVyT3JFcXVhbHM9YS5wcm90b3R5cGUuZ2VxPWEucHJvdG90eXBlLmdyZWF0ZXJPckVxdWFscz1wLnByb3RvdHlwZS5nZXE9cC5wcm90b3R5cGUuZ3JlYXRlck9yRXF1YWxzLHAucHJvdG90eXBlLmxlc3Nlck9yRXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXBhcmUodCk8PTB9LHMucHJvdG90eXBlLmxlcT1zLnByb3RvdHlwZS5sZXNzZXJPckVxdWFscz1hLnByb3RvdHlwZS5sZXE9YS5wcm90b3R5cGUubGVzc2VyT3JFcXVhbHM9cC5wcm90b3R5cGUubGVxPXAucHJvdG90eXBlLmxlc3Nlck9yRXF1YWxzLHAucHJvdG90eXBlLmlzRXZlbj1mdW5jdGlvbigpe3JldHVybiAwPT0oMSZ0aGlzLnZhbHVlWzBdKX0sYS5wcm90b3R5cGUuaXNFdmVuPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PSgxJnRoaXMudmFsdWUpfSxzLnByb3RvdHlwZS5pc0V2ZW49ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy52YWx1ZSZCaWdJbnQoMSkpPT09QmlnSW50KDApfSxwLnByb3RvdHlwZS5pc09kZD1mdW5jdGlvbigpe3JldHVybiAxPT0oMSZ0aGlzLnZhbHVlWzBdKX0sYS5wcm90b3R5cGUuaXNPZGQ9ZnVuY3Rpb24oKXtyZXR1cm4gMT09KDEmdGhpcy52YWx1ZSl9LHMucHJvdG90eXBlLmlzT2RkPWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMudmFsdWUmQmlnSW50KDEpKT09PUJpZ0ludCgxKX0scC5wcm90b3R5cGUuaXNQb3NpdGl2ZT1mdW5jdGlvbigpe3JldHVybiF0aGlzLnNpZ259LGEucHJvdG90eXBlLmlzUG9zaXRpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZT4wfSxzLnByb3RvdHlwZS5pc1Bvc2l0aXZlPWEucHJvdG90eXBlLmlzUG9zaXRpdmUscC5wcm90b3R5cGUuaXNOZWdhdGl2ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpZ259LGEucHJvdG90eXBlLmlzTmVnYXRpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZTwwfSxzLnByb3RvdHlwZS5pc05lZ2F0aXZlPWEucHJvdG90eXBlLmlzTmVnYXRpdmUscC5wcm90b3R5cGUuaXNVbml0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LGEucHJvdG90eXBlLmlzVW5pdD1mdW5jdGlvbigpe3JldHVybiAxPT09TWF0aC5hYnModGhpcy52YWx1ZSl9LHMucHJvdG90eXBlLmlzVW5pdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFicygpLnZhbHVlPT09QmlnSW50KDEpfSxwLnByb3RvdHlwZS5pc1plcm89ZnVuY3Rpb24oKXtyZXR1cm4hMX0sYS5wcm90b3R5cGUuaXNaZXJvPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLnZhbHVlfSxzLnByb3RvdHlwZS5pc1plcm89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZT09PUJpZ0ludCgwKX0scC5wcm90b3R5cGUuaXNEaXZpc2libGVCeT1mdW5jdGlvbih0KXt2YXIgZT1LKHQpO3JldHVybiFlLmlzWmVybygpJiYoISFlLmlzVW5pdCgpfHwoMD09PWUuY29tcGFyZUFicygyKT90aGlzLmlzRXZlbigpOnRoaXMubW9kKGUpLmlzWmVybygpKSl9LHMucHJvdG90eXBlLmlzRGl2aXNpYmxlQnk9YS5wcm90b3R5cGUuaXNEaXZpc2libGVCeT1wLnByb3RvdHlwZS5pc0RpdmlzaWJsZUJ5LHAucHJvdG90eXBlLmlzUHJpbWU9ZnVuY3Rpb24oZSl7dmFyIHI9UCh0aGlzKTtpZihyIT09dClyZXR1cm4gcjt2YXIgbz10aGlzLmFicygpLG49by5iaXRMZW5ndGgoKTtpZihuPD02NClyZXR1cm4gWihvLFsyLDMsNSw3LDExLDEzLDE3LDE5LDIzLDI5LDMxLDM3XSk7Zm9yKHZhciBpPU1hdGgubG9nKDIpKm4udG9KU051bWJlcigpLHU9TWF0aC5jZWlsKCEwPT09ZT8yKk1hdGgucG93KGksMik6aSkscD1bXSxhPTA7YTx1O2ErKylwLnB1c2goYmlnSW50KGErMikpO3JldHVybiBaKG8scCl9LHMucHJvdG90eXBlLmlzUHJpbWU9YS5wcm90b3R5cGUuaXNQcmltZT1wLnByb3RvdHlwZS5pc1ByaW1lLHAucHJvdG90eXBlLmlzUHJvYmFibGVQcmltZT1mdW5jdGlvbihlLHIpe3ZhciBvPVAodGhpcyk7aWYobyE9PXQpcmV0dXJuIG87Zm9yKHZhciBuPXRoaXMuYWJzKCksaT1lPT09dD81OmUsdT1bXSxwPTA7cDxpO3ArKyl1LnB1c2goYmlnSW50LnJhbmRCZXR3ZWVuKDIsbi5taW51cygyKSxyKSk7cmV0dXJuIFoobix1KX0scy5wcm90b3R5cGUuaXNQcm9iYWJsZVByaW1lPWEucHJvdG90eXBlLmlzUHJvYmFibGVQcmltZT1wLnByb3RvdHlwZS5pc1Byb2JhYmxlUHJpbWUscC5wcm90b3R5cGUubW9kSW52PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyLG8sbj1iaWdJbnQuemVybyxpPWJpZ0ludC5vbmUsdT1LKHQpLHA9dGhpcy5hYnMoKTshcC5pc1plcm8oKTspZT11LmRpdmlkZShwKSxyPW4sbz11LG49aSx1PXAsaT1yLnN1YnRyYWN0KGUubXVsdGlwbHkoaSkpLHA9by5zdWJ0cmFjdChlLm11bHRpcGx5KHApKTtpZighdS5pc1VuaXQoKSl0aHJvdyBuZXcgRXJyb3IodGhpcy50b1N0cmluZygpKyIgYW5kICIrdC50b1N0cmluZygpKyIgYXJlIG5vdCBjby1wcmltZSIpO3JldHVybi0xPT09bi5jb21wYXJlKDApJiYobj1uLmFkZCh0KSksdGhpcy5pc05lZ2F0aXZlKCk/bi5uZWdhdGUoKTpufSxzLnByb3RvdHlwZS5tb2RJbnY9YS5wcm90b3R5cGUubW9kSW52PXAucHJvdG90eXBlLm1vZEludixwLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy52YWx1ZTtyZXR1cm4gdGhpcy5zaWduP3codCwxLHRoaXMuc2lnbik6bmV3IHAoZCh0LDEpLHRoaXMuc2lnbil9LGEucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnZhbHVlO3JldHVybiB0KzE8cj9uZXcgYSh0KzEpOm5ldyBwKG8sITEpfSxzLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBzKHRoaXMudmFsdWUrQmlnSW50KDEpKX0scC5wcm90b3R5cGUucHJldj1mdW5jdGlvbigpe3ZhciB0PXRoaXMudmFsdWU7cmV0dXJuIHRoaXMuc2lnbj9uZXcgcChkKHQsMSksITApOncodCwxLHRoaXMuc2lnbil9LGEucHJvdG90eXBlLnByZXY9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnZhbHVlO3JldHVybiB0LTE+LXI/bmV3IGEodC0xKTpuZXcgcChvLCEwKX0scy5wcm90b3R5cGUucHJldj1mdW5jdGlvbigpe3JldHVybiBuZXcgcyh0aGlzLnZhbHVlLUJpZ0ludCgxKSl9O2Zvcih2YXIgeD1bMV07Mip4W3gubGVuZ3RoLTFdPD1lOyl4LnB1c2goMip4W3gubGVuZ3RoLTFdKTt2YXIgSj14Lmxlbmd0aCxMPXhbSi0xXTtmdW5jdGlvbiBVKHQpe3JldHVybiBNYXRoLmFicyh0KTw9ZX1mdW5jdGlvbiBUKHQsZSxyKXtlPUsoZSk7Zm9yKHZhciBvPXQuaXNOZWdhdGl2ZSgpLG49ZS5pc05lZ2F0aXZlKCksaT1vP3Qubm90KCk6dCx1PW4/ZS5ub3QoKTplLHA9MCxhPTAscz1udWxsLGw9bnVsbCxmPVtdOyFpLmlzWmVybygpfHwhdS5pc1plcm8oKTspcD0ocz1CKGksTCkpWzFdLnRvSlNOdW1iZXIoKSxvJiYocD1MLTEtcCksYT0obD1CKHUsTCkpWzFdLnRvSlNOdW1iZXIoKSxuJiYoYT1MLTEtYSksaT1zWzBdLHU9bFswXSxmLnB1c2gocihwLGEpKTtmb3IodmFyIHY9MCE9PXIobz8xOjAsbj8xOjApP2JpZ0ludCgtMSk6YmlnSW50KDApLGg9Zi5sZW5ndGgtMTtoPj0wO2gtPTEpdj12Lm11bHRpcGx5KEwpLmFkZChiaWdJbnQoZltoXSkpO3JldHVybiB2fXAucHJvdG90eXBlLnNoaWZ0TGVmdD1mdW5jdGlvbih0KXt2YXIgZT1LKHQpLnRvSlNOdW1iZXIoKTtpZighVShlKSl0aHJvdyBuZXcgRXJyb3IoU3RyaW5nKGUpKyIgaXMgdG9vIGxhcmdlIGZvciBzaGlmdGluZy4iKTtpZihlPDApcmV0dXJuIHRoaXMuc2hpZnRSaWdodCgtZSk7dmFyIHI9dGhpcztpZihyLmlzWmVybygpKXJldHVybiByO2Zvcig7ZT49Sjspcj1yLm11bHRpcGx5KEwpLGUtPUotMTtyZXR1cm4gci5tdWx0aXBseSh4W2VdKX0scy5wcm90b3R5cGUuc2hpZnRMZWZ0PWEucHJvdG90eXBlLnNoaWZ0TGVmdD1wLnByb3RvdHlwZS5zaGlmdExlZnQscC5wcm90b3R5cGUuc2hpZnRSaWdodD1mdW5jdGlvbih0KXt2YXIgZSxyPUsodCkudG9KU051bWJlcigpO2lmKCFVKHIpKXRocm93IG5ldyBFcnJvcihTdHJpbmcocikrIiBpcyB0b28gbGFyZ2UgZm9yIHNoaWZ0aW5nLiIpO2lmKHI8MClyZXR1cm4gdGhpcy5zaGlmdExlZnQoLXIpO2Zvcih2YXIgbz10aGlzO3I+PUo7KXtpZihvLmlzWmVybygpfHxvLmlzTmVnYXRpdmUoKSYmby5pc1VuaXQoKSlyZXR1cm4gbztvPShlPUIobyxMKSlbMV0uaXNOZWdhdGl2ZSgpP2VbMF0ucHJldigpOmVbMF0sci09Si0xfXJldHVybihlPUIobyx4W3JdKSlbMV0uaXNOZWdhdGl2ZSgpP2VbMF0ucHJldigpOmVbMF19LHMucHJvdG90eXBlLnNoaWZ0UmlnaHQ9YS5wcm90b3R5cGUuc2hpZnRSaWdodD1wLnByb3RvdHlwZS5zaGlmdFJpZ2h0LHAucHJvdG90eXBlLm5vdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5lZ2F0ZSgpLnByZXYoKX0scy5wcm90b3R5cGUubm90PWEucHJvdG90eXBlLm5vdD1wLnByb3RvdHlwZS5ub3QscC5wcm90b3R5cGUuYW5kPWZ1bmN0aW9uKHQpe3JldHVybiBUKHRoaXMsdCwoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCZlfSkpfSxzLnByb3RvdHlwZS5hbmQ9YS5wcm90b3R5cGUuYW5kPXAucHJvdG90eXBlLmFuZCxwLnByb3RvdHlwZS5vcj1mdW5jdGlvbih0KXtyZXR1cm4gVCh0aGlzLHQsKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHR8ZX0pKX0scy5wcm90b3R5cGUub3I9YS5wcm90b3R5cGUub3I9cC5wcm90b3R5cGUub3IscC5wcm90b3R5cGUueG9yPWZ1bmN0aW9uKHQpe3JldHVybiBUKHRoaXMsdCwoZnVuY3Rpb24odCxlKXtyZXR1cm4gdF5lfSkpfSxzLnByb3RvdHlwZS54b3I9YS5wcm90b3R5cGUueG9yPXAucHJvdG90eXBlLnhvcjt2YXIgaj0xPDwzMDtmdW5jdGlvbiBDKHQpe3ZhciByPXQudmFsdWUsbz0ibnVtYmVyIj09dHlwZW9mIHI/cnxqOiJiaWdpbnQiPT10eXBlb2Ygcj9yfEJpZ0ludChqKTpyWzBdK3JbMV0qZXwxMDczNzU4MjA4O3JldHVybiBvJi1vfWZ1bmN0aW9uIEQodCxlKXtpZihlLmNvbXBhcmVUbyh0KTw9MCl7dmFyIHI9RCh0LGUuc3F1YXJlKGUpKSxvPXIucCxuPXIuZSxpPW8ubXVsdGlwbHkoZSk7cmV0dXJuIGkuY29tcGFyZVRvKHQpPD0wP3twOmksZToyKm4rMX06e3A6byxlOjIqbn19cmV0dXJue3A6YmlnSW50KDEpLGU6MH19ZnVuY3Rpb24geih0LGUpe3JldHVybiB0PUsodCksZT1LKGUpLHQuZ3JlYXRlcihlKT90OmV9ZnVuY3Rpb24gUih0LGUpe3JldHVybiB0PUsodCksZT1LKGUpLHQubGVzc2VyKGUpP3Q6ZX1mdW5jdGlvbiBrKHQsZSl7aWYodD1LKHQpLmFicygpLGU9SyhlKS5hYnMoKSx0LmVxdWFscyhlKSlyZXR1cm4gdDtpZih0LmlzWmVybygpKXJldHVybiBlO2lmKGUuaXNaZXJvKCkpcmV0dXJuIHQ7Zm9yKHZhciByLG8sbj11WzFdO3QuaXNFdmVuKCkmJmUuaXNFdmVuKCk7KXI9UihDKHQpLEMoZSkpLHQ9dC5kaXZpZGUociksZT1lLmRpdmlkZShyKSxuPW4ubXVsdGlwbHkocik7Zm9yKDt0LmlzRXZlbigpOyl0PXQuZGl2aWRlKEModCkpO2Rve2Zvcig7ZS5pc0V2ZW4oKTspZT1lLmRpdmlkZShDKGUpKTt0LmdyZWF0ZXIoZSkmJihvPWUsZT10LHQ9byksZT1lLnN1YnRyYWN0KHQpfXdoaWxlKCFlLmlzWmVybygpKTtyZXR1cm4gbi5pc1VuaXQoKT90OnQubXVsdGlwbHkobil9cC5wcm90b3R5cGUuYml0TGVuZ3RoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdC5jb21wYXJlVG8oYmlnSW50KDApKTwwJiYodD10Lm5lZ2F0ZSgpLnN1YnRyYWN0KGJpZ0ludCgxKSkpLDA9PT10LmNvbXBhcmVUbyhiaWdJbnQoMCkpP2JpZ0ludCgwKTpiaWdJbnQoRCh0LGJpZ0ludCgyKSkuZSkuYWRkKGJpZ0ludCgxKSl9LHMucHJvdG90eXBlLmJpdExlbmd0aD1hLnByb3RvdHlwZS5iaXRMZW5ndGg9cC5wcm90b3R5cGUuYml0TGVuZ3RoO3ZhciBfPWZ1bmN0aW9uKHQsZSxyLG8pe3I9cnx8bix0PVN0cmluZyh0KSxvfHwodD10LnRvTG93ZXJDYXNlKCkscj1yLnRvTG93ZXJDYXNlKCkpO3ZhciBpLHU9dC5sZW5ndGgscD1NYXRoLmFicyhlKSxhPXt9O2ZvcihpPTA7aTxyLmxlbmd0aDtpKyspYVtyW2ldXT1pO2ZvcihpPTA7aTx1O2krKyl7aWYoIi0iIT09KGY9dFtpXSkmJihmIGluIGEmJmFbZl0+PXApKXtpZigiMSI9PT1mJiYxPT09cCljb250aW51ZTt0aHJvdyBuZXcgRXJyb3IoZisiIGlzIG5vdCBhIHZhbGlkIGRpZ2l0IGluIGJhc2UgIitlKyIuIil9fWU9SyhlKTt2YXIgcz1bXSxsPSItIj09PXRbMF07Zm9yKGk9bD8xOjA7aTx0Lmxlbmd0aDtpKyspe3ZhciBmO2lmKChmPXRbaV0paW4gYSlzLnB1c2goSyhhW2ZdKSk7ZWxzZXtpZigiPCIhPT1mKXRocm93IG5ldyBFcnJvcihmKyIgaXMgbm90IGEgdmFsaWQgY2hhcmFjdGVyIik7dmFyIHY9aTtkb3tpKyt9d2hpbGUoIj4iIT09dFtpXSYmaTx0Lmxlbmd0aCk7cy5wdXNoKEsodC5zbGljZSh2KzEsaSkpKX19cmV0dXJuICQocyxlLGwpfTtmdW5jdGlvbiAkKHQsZSxyKXt2YXIgbyxuPXVbMF0saT11WzFdO2ZvcihvPXQubGVuZ3RoLTE7bz49MDtvLS0pbj1uLmFkZCh0W29dLnRpbWVzKGkpKSxpPWkudGltZXMoZSk7cmV0dXJuIHI/bi5uZWdhdGUoKTpufWZ1bmN0aW9uIEYodCxlKXtpZigoZT1iaWdJbnQoZSkpLmlzWmVybygpKXtpZih0LmlzWmVybygpKXJldHVybnt2YWx1ZTpbMF0saXNOZWdhdGl2ZTohMX07dGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgY29udmVydCBub256ZXJvIG51bWJlcnMgdG8gYmFzZSAwLiIpfWlmKGUuZXF1YWxzKC0xKSl7aWYodC5pc1plcm8oKSlyZXR1cm57dmFsdWU6WzBdLGlzTmVnYXRpdmU6ITF9O2lmKHQuaXNOZWdhdGl2ZSgpKXJldHVybnt2YWx1ZTpbXS5jb25jYXQuYXBwbHkoW10sQXJyYXkuYXBwbHkobnVsbCxBcnJheSgtdC50b0pTTnVtYmVyKCkpKS5tYXAoQXJyYXkucHJvdG90eXBlLnZhbHVlT2YsWzEsMF0pKSxpc05lZ2F0aXZlOiExfTt2YXIgcj1BcnJheS5hcHBseShudWxsLEFycmF5KHQudG9KU051bWJlcigpLTEpKS5tYXAoQXJyYXkucHJvdG90eXBlLnZhbHVlT2YsWzAsMV0pO3JldHVybiByLnVuc2hpZnQoWzFdKSx7dmFsdWU6W10uY29uY2F0LmFwcGx5KFtdLHIpLGlzTmVnYXRpdmU6ITF9fXZhciBvPSExO2lmKHQuaXNOZWdhdGl2ZSgpJiZlLmlzUG9zaXRpdmUoKSYmKG89ITAsdD10LmFicygpKSxlLmlzVW5pdCgpKXJldHVybiB0LmlzWmVybygpP3t2YWx1ZTpbMF0saXNOZWdhdGl2ZTohMX06e3ZhbHVlOkFycmF5LmFwcGx5KG51bGwsQXJyYXkodC50b0pTTnVtYmVyKCkpKS5tYXAoTnVtYmVyLnByb3RvdHlwZS52YWx1ZU9mLDEpLGlzTmVnYXRpdmU6b307Zm9yKHZhciBuLGk9W10sdT10O3UuaXNOZWdhdGl2ZSgpfHx1LmNvbXBhcmVBYnMoZSk+PTA7KXtuPXUuZGl2bW9kKGUpLHU9bi5xdW90aWVudDt2YXIgcD1uLnJlbWFpbmRlcjtwLmlzTmVnYXRpdmUoKSYmKHA9ZS5taW51cyhwKS5hYnMoKSx1PXUubmV4dCgpKSxpLnB1c2gocC50b0pTTnVtYmVyKCkpfXJldHVybiBpLnB1c2godS50b0pTTnVtYmVyKCkpLHt2YWx1ZTppLnJldmVyc2UoKSxpc05lZ2F0aXZlOm99fWZ1bmN0aW9uIEcodCxlLHIpe3ZhciBvPUYodCxlKTtyZXR1cm4oby5pc05lZ2F0aXZlPyItIjoiIikrby52YWx1ZS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih0LGUpe3JldHVybiB0PChlPWV8fG4pLmxlbmd0aD9lW3RdOiI8Iit0KyI+In0odCxyKX0pKS5qb2luKCIiKX1mdW5jdGlvbiBIKHQpe2lmKGwoK3QpKXt2YXIgZT0rdDtpZihlPT09ZyhlKSlyZXR1cm4gaT9uZXcgcyhCaWdJbnQoZSkpOm5ldyBhKGUpO3Rocm93IG5ldyBFcnJvcigiSW52YWxpZCBpbnRlZ2VyOiAiK3QpfXZhciByPSItIj09PXRbMF07ciYmKHQ9dC5zbGljZSgxKSk7dmFyIG89dC5zcGxpdCgvZS9pKTtpZihvLmxlbmd0aD4yKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBpbnRlZ2VyOiAiK28uam9pbigiZSIpKTtpZigyPT09by5sZW5ndGgpe3ZhciBuPW9bMV07aWYoIisiPT09blswXSYmKG49bi5zbGljZSgxKSksKG49K24pIT09ZyhuKXx8IWwobikpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGludGVnZXI6ICIrbisiIGlzIG5vdCBhIHZhbGlkIGV4cG9uZW50LiIpO3ZhciB1PW9bMF0sZj11LmluZGV4T2YoIi4iKTtpZihmPj0wJiYobi09dS5sZW5ndGgtZi0xLHU9dS5zbGljZSgwLGYpK3Uuc2xpY2UoZisxKSksbjwwKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IGluY2x1ZGUgbmVnYXRpdmUgZXhwb25lbnQgcGFydCBmb3IgaW50ZWdlcnMiKTt0PXUrPW5ldyBBcnJheShuKzEpLmpvaW4oIjAiKX1pZighL14oWzAtOV1bMC05XSopJC8udGVzdCh0KSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgaW50ZWdlcjogIit0KTtpZihpKXJldHVybiBuZXcgcyhCaWdJbnQocj8iLSIrdDp0KSk7Zm9yKHZhciB2PVtdLHk9dC5sZW5ndGgsYz15LTc7eT4wOyl2LnB1c2goK3Quc2xpY2UoYyx5KSksKGMtPTcpPDAmJihjPTApLHktPTc7cmV0dXJuIGgodiksbmV3IHAodixyKX1mdW5jdGlvbiBLKHQpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdD9mdW5jdGlvbih0KXtpZihpKXJldHVybiBuZXcgcyhCaWdJbnQodCkpO2lmKGwodCkpe2lmKHQhPT1nKHQpKXRocm93IG5ldyBFcnJvcih0KyIgaXMgbm90IGFuIGludGVnZXIuIik7cmV0dXJuIG5ldyBhKHQpfXJldHVybiBIKHQudG9TdHJpbmcoKSl9KHQpOiJzdHJpbmciPT10eXBlb2YgdD9IKHQpOiJiaWdpbnQiPT10eXBlb2YgdD9uZXcgcyh0KTp0fXAucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24odCl7cmV0dXJuIEYodGhpcyx0KX0sYS5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbih0KXtyZXR1cm4gRih0aGlzLHQpfSxzLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uKHQpe3JldHVybiBGKHRoaXMsdCl9LHAucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKGUscil7aWYoZT09PXQmJihlPTEwKSwxMCE9PWUpcmV0dXJuIEcodGhpcyxlLHIpO2Zvcih2YXIgbyxuPXRoaXMudmFsdWUsaT1uLmxlbmd0aCx1PVN0cmluZyhuWy0taV0pOy0taT49MDspbz1TdHJpbmcobltpXSksdSs9IjAwMDAwMDAiLnNsaWNlKG8ubGVuZ3RoKStvO3JldHVybih0aGlzLnNpZ24/Ii0iOiIiKSt1fSxhLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbihlLHIpe3JldHVybiBlPT09dCYmKGU9MTApLDEwIT1lP0codGhpcyxlLHIpOlN0cmluZyh0aGlzLnZhbHVlKX0scy5wcm90b3R5cGUudG9TdHJpbmc9YS5wcm90b3R5cGUudG9TdHJpbmcscy5wcm90b3R5cGUudG9KU09OPXAucHJvdG90eXBlLnRvSlNPTj1hLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1N0cmluZygpfSxwLnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMudG9TdHJpbmcoKSwxMCl9LHAucHJvdG90eXBlLnRvSlNOdW1iZXI9cC5wcm90b3R5cGUudmFsdWVPZixhLnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV9LGEucHJvdG90eXBlLnRvSlNOdW1iZXI9YS5wcm90b3R5cGUudmFsdWVPZixzLnByb3RvdHlwZS52YWx1ZU9mPXMucHJvdG90eXBlLnRvSlNOdW1iZXI9ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VJbnQodGhpcy50b1N0cmluZygpLDEwKX07Zm9yKHZhciBRPTA7UTwxZTM7USsrKXVbUV09SyhRKSxRPjAmJih1Wy1RXT1LKC1RKSk7cmV0dXJuIHUub25lPXVbMV0sdS56ZXJvPXVbMF0sdS5taW51c09uZT11Wy0xXSx1Lm1heD16LHUubWluPVIsdS5nY2Q9ayx1LmxjbT1mdW5jdGlvbih0LGUpe3JldHVybiB0PUsodCkuYWJzKCksZT1LKGUpLmFicygpLHQuZGl2aWRlKGsodCxlKSkubXVsdGlwbHkoZSl9LHUuaXNJbnN0YW5jZT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHB8fHQgaW5zdGFuY2VvZiBhfHx0IGluc3RhbmNlb2Ygc30sdS5yYW5kQmV0d2Vlbj1mdW5jdGlvbih0LHIsbyl7dD1LKHQpLHI9SyhyKTt2YXIgbj1vfHxNYXRoLnJhbmRvbSxpPVIodCxyKSxwPXoodCxyKS5zdWJ0cmFjdChpKS5hZGQoMSk7aWYocC5pc1NtYWxsKXJldHVybiBpLmFkZChNYXRoLmZsb29yKG4oKSpwKSk7Zm9yKHZhciBhPUYocCxlKS52YWx1ZSxzPVtdLGw9ITAsZj0wO2Y8YS5sZW5ndGg7ZisrKXt2YXIgdj1sP2FbZl0rKGYrMTxhLmxlbmd0aD9hW2YrMV0vZTowKTplLGg9ZyhuKCkqdik7cy5wdXNoKGgpLGg8YVtmXSYmKGw9ITEpfXJldHVybiBpLmFkZCh1LmZyb21BcnJheShzLGUsITEpKX0sdS5mcm9tQXJyYXk9ZnVuY3Rpb24odCxlLHIpe3JldHVybiAkKHQubWFwKEspLEsoZXx8MTApLHIpfSx1fSgpOyJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuaGFzT3duUHJvcGVydHkoImV4cG9ydHMiKSYmKG1vZHVsZS5leHBvcnRzPWJpZ0ludCksImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKChmdW5jdGlvbigpe3JldHVybiBiaWdJbnR9KSk7Cg=="}]},{"name":"fake 115Browser download","options":{"check_for_updates":true,"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_prototypes":false,"compat_powerful_this":null,"noframes":null,"unwrap":null,"run_at":null,"tab_types":null,"override":{"use_includes":[],"orig_includes":[],"merge_includes":true,"use_matches":[],"orig_matches":["*://115.com/*","*://v.anxia.com/*"],"merge_matches":true,"use_excludes":[],"orig_excludes":[],"merge_excludes":true,"use_connects":[],"orig_connects":["proapi.115.com"],"merge_connects":true,"use_blockers":[],"orig_run_at":"document-start","orig_noframes":null}},"storage":{"ts":1670371893078,"data":{}},"enabled":true,"position":2,"uuid":"ddce0468-3829-4311-bb30-15ea978f3eb1","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBmYWtlIDExNUJyb3dzZXIgZG93bmxvYWQKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vZ2l0aHViLmNvbS9ra0hBSUtFL2Zha2UxMTUKLy8gQHZlcnNpb24gICAgICAxLjAuMwovLyBAZGVzY3JpcHRpb24gIOS8quijhTExNea1j+iniOWZqOS4i+i9vQovLyBAYXV0aG9yICAgICAgIGtraGFpa2UKLy8gQG1hdGNoICAgICAgICAqOi8vMTE1LmNvbS8qCi8vIEBtYXRjaCAgICAgICAgKjovL3YuYW54aWEuY29tLyoKLy8gQGdyYW50ICAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyBAZ3JhbnQgICAgICAgIHVuc2FmZVdpbmRvdwovLyBAZ3JhbnQgICAgICAgIEdNX2xvZwovLyBAZ3JhbnQgICAgICAgIEdNX3NldENsaXBib2FyZAovLyBAY29ubmVjdCAgICAgIHByb2FwaS4xMTUuY29tCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9wZXRlcm9sc29uLmdpdGh1Yi5pby9CaWdJbnRlZ2VyLmpzL0JpZ0ludGVnZXIubWluLmpzCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9jZG4uYm9vdGNkbi5uZXQvYWpheC9saWJzL2JsdWVpbXAtbWQ1LzIuMTguMC9qcy9tZDUubWluLmpzCi8vIEBydW4tYXQgICAgICAgZG9jdW1lbnQtc3RhcnQKLy8gPT0vVXNlclNjcmlwdD09CihmdW5jdGlvbigpIHsKICAgICd1c2Ugc3RyaWN0JzsKdmFyIENyZWF0ZURvd25sb2FkVGFzaywgQ3JlYXRlRG93bmxvYWRUYXNrXywgYnJvd3NlckludGVyZmFjZSwgYnl0ZXNUb1N0cmluZywgY2xvbmVJbnRvLCBnX2tleV9sLCBnX2tleV9zLCBnX2t0cywgbTExNV9hc3ltX2RlY29kZSwgbTExNV9hc3ltX2VuY29kZSwgbTExNV9kZWNvZGUsIG0xMTVfZW5jb2RlLCBtMTE1X2dldGtleSwgbTExNV9zeW1fZGVjb2RlLCBtMTE1X3N5bV9lbmNvZGUsIHJlZiwgc3RyaW5nVG9CeXRlcywgeG9yMTE1X2VuYzsKCmNsYXNzIE15UnNhIHsKICBjb25zdHJ1Y3RvciAoKSB7CiAgICAvLyB0aGlzLm4gPSBCaWdJbnQoJzB4ODY4Njk4MGMwZjVhMjRjNGI5ZDQzMDIwY2QyYzIyNzAzZmYzZjQ1MDc1NjUyOTA1OGIxY2Y4OGYwOWI4NjAyMTM2NDc3MTk4YTZlMjY4MzE0OTY1OWJkMTIyYzMzNTkyZmRiNWFkNDc5NDRhZDFlYTRkMzZjNmIxNzJhYWQ2MzM4YzNiYjZhYzYyMjc1MDJkMDEwOTkzYWM5NjdkMWFlZjAwZjBjOGUwMzhkZTJlNGQzYmMyZWMzNjhhZjJlOWYxMGE2ZjFlZGE0ZjcyNjJmMTM2NDIwYzA3YzMzMWI4NzFiZjEzOWY3NGYzMDEwZTNjNGZlNTdkZjNhZmI3MTY4MycpCiAgICAvLyB0aGlzLmUgPSBCaWdJbnQoJzB4MTAwMDEnKQogICAgdGhpcy5uID0gYmlnSW50KCc4Njg2OTgwYzBmNWEyNGM0YjlkNDMwMjBjZDJjMjI3MDNmZjNmNDUwNzU2NTI5MDU4YjFjZjg4ZjA5Yjg2MDIxMzY0NzcxOThhNmUyNjgzMTQ5NjU5YmQxMjJjMzM1OTJmZGI1YWQ0Nzk0NGFkMWVhNGQzNmM2YjE3MmFhZDYzMzhjM2JiNmFjNjIyNzUwMmQwMTA5OTNhYzk2N2QxYWVmMDBmMGM4ZTAzOGRlMmU0ZDNiYzJlYzM2OGFmMmU5ZjEwYTZmMWVkYTRmNzI2MmYxMzY0MjBjMDdjMzMxYjg3MWJmMTM5Zjc0ZjMwMTBlM2M0ZmU1N2RmM2FmYjcxNjgzJywgMTYpCiAgICB0aGlzLmUgPSBiaWdJbnQoJzEwMDAxJywgMTYpCiAgfTsKCiAgYTJoZXggKGJ5dGVBcnJheSkgewogICAgdmFyIGhleFN0cmluZyA9ICcnCiAgICB2YXIgbmV4dEhleEJ5dGUKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYnl0ZUFycmF5Lmxlbmd0aDsgaSsrKSB7CiAgICAgIG5leHRIZXhCeXRlID0gYnl0ZUFycmF5W2ldLnRvU3RyaW5nKDE2KQogICAgICBpZiAobmV4dEhleEJ5dGUubGVuZ3RoIDwgMikgewogICAgICAgIG5leHRIZXhCeXRlID0gJzAnICsgbmV4dEhleEJ5dGUKICAgICAgfQogICAgICBoZXhTdHJpbmcgKz0gbmV4dEhleEJ5dGUKICAgIH0KICAgIHJldHVybiBoZXhTdHJpbmcKICB9CgogIGhleDJhIChoZXgpIHsKICAgIHZhciBzdHIgPSAnJwogICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZXgubGVuZ3RoOyBpICs9IDIpIHsKICAgICAgc3RyICs9IFN0cmluZy5mcm9tQ2hhckNvZGUocGFyc2VJbnQoaGV4LnN1YnN0cihpLCAyKSwgMTYpKQogICAgfQogICAgcmV0dXJuIHN0cgogIH0KCiAgcGtjczFwYWQyIChzLCBuKSB7CiAgICBpZiAobiA8IHMubGVuZ3RoICsgMTEpIHsKICAgICAgcmV0dXJuIG51bGwKICAgIH0KICAgIHZhciBiYSA9IFtdCiAgICB2YXIgaSA9IHMubGVuZ3RoIC0gMQogICAgd2hpbGUgKGkgPj0gMCAmJiBuID4gMCkgewogICAgICBiYVstLW5dID0gcy5jaGFyQ29kZUF0KGktLSkKICAgIH0KICAgIGJhWy0tbl0gPSAwCiAgICB3aGlsZSAobiA+IDIpIHsgLy8gcmFuZG9tIG5vbi16ZXJvIHBhZAogICAgICBiYVstLW5dID0gMHhmZgogICAgfQogICAgYmFbLS1uXSA9IDIKICAgIGJhWy0tbl0gPSAwCiAgICB2YXIgYyA9IHRoaXMuYTJoZXgoYmEpCiAgICByZXR1cm4gYmlnSW50KGMsIDE2KQogIH0KCiAgcGtjczF1bnBhZDIgKGEpIHsKICAgIHZhciBiID0gYS50b1N0cmluZygxNikKICAgIGlmIChiLmxlbmd0aCAlIDIgIT09IDApIHsKICAgICAgYiA9ICcwJyArIGIKICAgIH0KICAgIHZhciBjID0gdGhpcy5oZXgyYShiKQogICAgdmFyIGkgPSAxCiAgICB3aGlsZSAoYy5jaGFyQ29kZUF0KGkpICE9PSAwKSB7CiAgICAgIGkrKwogICAgfQogICAgcmV0dXJuIGMuc2xpY2UoaSArIDEpCiAgfQoKICBlbmNyeXB0ICh0ZXh0KSB7CiAgICB2YXIgbSA9IHRoaXMucGtjczFwYWQyKHRleHQsIDB4ODApCiAgICB2YXIgYyA9IG0ubW9kUG93KHRoaXMuZSwgdGhpcy5uKQogICAgdmFyIGggPSBjLnRvU3RyaW5nKDE2KQogICAgd2hpbGUgKGgubGVuZ3RoIDwgMHg4MCAqIDIpIHsKICAgICAgaCA9ICcwJyArIGgKICAgIH0KICAgIHJldHVybiBoCiAgfTsKCiAgZGVjcnlwdCAodGV4dCkgewogICAgdmFyIGJhID0gW10KICAgIHZhciBpID0gMAogICAgd2hpbGUgKGkgPCB0ZXh0Lmxlbmd0aCkgewogICAgICBiYVtpXSA9IHRleHQuY2hhckNvZGVBdChpKQogICAgICBpICs9IDEKICAgIH0KICAgIHZhciBhID0gYmlnSW50KHRoaXMuYTJoZXgoYmEpLCAxNikKICAgIHZhciBjID0gYS5tb2RQb3codGhpcy5lLCB0aGlzLm4pCiAgICB2YXIgZCA9IHRoaXMucGtjczF1bnBhZDIoYykKICAgIHJldHVybiBkCiAgfTsKfQoKdmFyIG5ld19yc2EgPSBuZXcgTXlSc2EoKQoKZ19rdHMgPSBbMjQwLCAyMjksIDEwNSwgMTc0LCAxOTEsIDIyMCwgMTkxLCAxMzgsIDI2LCA2OSwgMjMyLCAxOTAsIDEyNSwgMTY2LCAxMTUsIDE4NCwgMjIyLCAxNDMsIDIzMSwgMTk2LCA2OSwgMjE4LCAxMzQsIDE5NiwgMTU1LCAxMDAsIDEzOSwgMjAsIDEwNiwgMTgwLCAyNDEsIDE3MCwgNTYsIDEsIDUzLCAxNTgsIDM4LCAxMDUsIDQ0LCAxMzQsIDAsIDEwNywgNzksIDE2NSwgNTQsIDUyLCA5OCwgMTY2LCA0MiwgMTUwLCAxMDQsIDI0LCAyNDIsIDc0LCAyNTMsIDE4OSwgMTA3LCAxNTEsIDE0MywgNzcsIDE0MywgMTM3LCAxOSwgMTgzLCAxMDgsIDE0MiwgMTQ3LCAyMzcsIDE0LCAxMywgNzIsIDYyLCAyMTUsIDQ3LCAxMzYsIDIxNiwgMjU0LCAyNTQsIDEyNiwgMTM0LCA4MCwgMTQ5LCA3OSwgMjA5LCAyMzUsIDEzMSwgMzgsIDUyLCAyMTksIDEwMiwgMTIzLCAxNTYsIDEyNiwgMTU3LCAxMjIsIDEyOSwgNTAsIDIzNCwgMTgyLCA1MSwgMjIyLCA1OCwgMTY5LCA4OSwgNTIsIDEwMiwgNTksIDE3MCwgMTg2LCAxMjksIDk2LCA3MiwgMTg1LCAyMTMsIDEyOSwgMTU2LCAyNDgsIDEwOCwgMTMyLCAxMTksIDI1NSwgODQsIDEyMCwgMzgsIDk1LCAxOTAsIDIzMiwgMzAsIDU0LCAxNTksIDUyLCAxMjgsIDkyLCA2OSwgNDQsIDE1NSwgMTE4LCAyMTMsIDI3LCAxNDMsIDIwNCwgMTk1LCAxODQsIDI0NV07CgpnX2tleV9zID0gWzB4MjksIDB4MjMsIDB4MjEsIDB4NUVdOwoKZ19rZXlfbCA9IFsxMjAsIDYsIDE3MywgNzYsIDUxLCAxMzQsIDkzLCAyNCwgNzYsIDEsIDYzLCA3MF07CgptMTE1X2dldGtleSA9IGZ1bmN0aW9uKGxlbmd0aCwga2V5KSB7CiAgdmFyIGk7CiAgaWYgKGtleSAhPSBudWxsKSB7CiAgICByZXR1cm4gKGZ1bmN0aW9uKCkgewogICAgICB2YXIgaiwgcmVmLCByZXN1bHRzOwogICAgICByZXN1bHRzID0gW107CiAgICAgIGZvciAoaSA9IGogPSAwLCByZWYgPSBsZW5ndGg7ICgwIDw9IHJlZiA/IGogPCByZWYgOiBqID4gcmVmKTsgaSA9IDAgPD0gcmVmID8gKytqIDogLS1qKSB7CiAgICAgICAgcmVzdWx0cy5wdXNoKCgoa2V5W2ldICsgZ19rdHNbbGVuZ3RoICogaV0pICYgMHhmZikgXiBnX2t0c1tsZW5ndGggKiAobGVuZ3RoIC0gMSAtIGkpXSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJlc3VsdHM7CiAgICB9KSgpOwogIH0KICBpZiAobGVuZ3RoID09PSAxMikgewogICAgcmV0dXJuIGdfa2V5X2wuc2xpY2UoMCk7CiAgfQogIHJldHVybiBnX2tleV9zLnNsaWNlKDApOwp9OwoKeG9yMTE1X2VuYyA9IGZ1bmN0aW9uKHNyYywgc3JjbGVuLCBrZXksIGtleWxlbikgewogIHZhciBpLCBqLCBrLCBtb2Q0LCByZWYsIHJlZjEsIHJlZjIsIHJldDsKICBtb2Q0ID0gc3JjbGVuICUgNDsKICByZXQgPSBbXTsKICBpZiAobW9kNCAhPT0gMCkgewogICAgZm9yIChpID0gaiA9IDAsIHJlZiA9IG1vZDQ7ICgwIDw9IHJlZiA/IGogPCByZWYgOiBqID4gcmVmKTsgaSA9IDAgPD0gcmVmID8gKytqIDogLS1qKSB7CiAgICAgIHJldC5wdXNoKHNyY1tpXSBeIGtleVtpICUga2V5bGVuXSk7CiAgICB9CiAgfQogIGZvciAoaSA9IGsgPSByZWYxID0gbW9kNCwgcmVmMiA9IHNyY2xlbjsgKHJlZjEgPD0gcmVmMiA/IGsgPCByZWYyIDogayA+IHJlZjIpOyBpID0gcmVmMSA8PSByZWYyID8gKytrIDogLS1rKSB7CiAgICByZXQucHVzaChzcmNbaV0gXiBrZXlbKGkgLSBtb2Q0KSAlIGtleWxlbl0pOwogIH0KICByZXR1cm4gcmV0Owp9OwoKbTExNV9zeW1fZW5jb2RlID0gZnVuY3Rpb24oc3JjLCBzcmNsZW4sIGtleTEsIGtleTIpIHsKICB2YXIgazEsIGsyLCByZXQ7CiAgazEgPSBtMTE1X2dldGtleSg0LCBrZXkxKTsKICBrMiA9IG0xMTVfZ2V0a2V5KDEyLCBrZXkyKTsKICByZXQgPSB4b3IxMTVfZW5jKHNyYywgc3JjbGVuLCBrMSwgNCk7CiAgcmV0LnJldmVyc2UoKTsKICByZXQgPSB4b3IxMTVfZW5jKHJldCwgc3JjbGVuLCBrMiwgMTIpOwogIHJldHVybiByZXQ7Cn07CgptMTE1X3N5bV9kZWNvZGUgPSBmdW5jdGlvbihzcmMsIHNyY2xlbiwga2V5MSwga2V5MikgewogIHZhciBrMSwgazIsIHJldDsKICBrMSA9IG0xMTVfZ2V0a2V5KDQsIGtleTEpOwogIGsyID0gbTExNV9nZXRrZXkoMTIsIGtleTIpOwogIHJldCA9IHhvcjExNV9lbmMoc3JjLCBzcmNsZW4sIGsyLCAxMik7CiAgcmV0LnJldmVyc2UoKTsKICByZXQgPSB4b3IxMTVfZW5jKHJldCwgc3JjbGVuLCBrMSwgNCk7CiAgcmV0dXJuIHJldDsKfTsKCnN0cmluZ1RvQnl0ZXMgPSBmdW5jdGlvbihzKSB7CiAgdmFyIGksIGosIHJlZiwgcmV0OwogIHJldCA9IFtdOwogIGZvciAoaSA9IGogPSAwLCByZWYgPSBzLmxlbmd0aDsgKDAgPD0gcmVmID8gaiA8IHJlZiA6IGogPiByZWYpOyBpID0gMCA8PSByZWYgPyArK2ogOiAtLWopIHsKICAgIHJldC5wdXNoKHMuY2hhckNvZGVBdChpKSk7CiAgfQogIHJldHVybiByZXQ7Cn07CgpieXRlc1RvU3RyaW5nID0gZnVuY3Rpb24oYikgewogIHZhciBpLCBqLCBsZW4sIHJldDsKICByZXQgPSAnJzsKICBmb3IgKGogPSAwLCBsZW4gPSBiLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7CiAgICBpID0gYltqXTsKICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGkpOwogIH0KICByZXR1cm4gcmV0Owp9OwoKCm0xMTVfYXN5bV9lbmNvZGUgPSBmdW5jdGlvbihzcmMsIHNyY2xlbikgewogIHZhciBpLCBqLCBtLCByZWYsIHJldAogIG0gPSAxMjggLSAxMTsKICByZXQgPSAnJzsKICBmb3IgKGkgPSBqID0gMCwgcmVmID0gTWF0aC5mbG9vcigoc3JjbGVuICsgbSAtIDEpIC8gbSk7ICgwIDw9IHJlZiA/IGogPCByZWYgOiBqID4gcmVmKTsgaSA9IDAgPD0gcmVmID8gKytqIDogLS1qKSB7CiAgICByZXQgKz0gbmV3X3JzYS5lbmNyeXB0KGJ5dGVzVG9TdHJpbmcoc3JjLnNsaWNlKGkgKiBtLCBNYXRoLm1pbigoaSArIDEpICogbSwgc3JjbGVuKSkpKTsKICB9CiAgcmV0dXJuIHdpbmRvdy5idG9hKG5ld19yc2EuaGV4MmEocmV0KSk7Cn07CgptMTE1X2FzeW1fZGVjb2RlID0gZnVuY3Rpb24oc3JjLCBzcmNsZW4pIHsKICB2YXIgaSwgaiwgbSwgcmVmLCByZXQ7CiAgbSA9IDEyODsKICByZXQgPSAnJzsKICBmb3IgKGkgPSBqID0gMCwgcmVmID0gTWF0aC5mbG9vcigoc3JjbGVuICsgbSAtIDEpIC8gbSk7ICgwIDw9IHJlZiA/IGogPCByZWYgOiBqID4gcmVmKTsgaSA9IDAgPD0gcmVmID8gKytqIDogLS1qKSB7CiAgICByZXQgKz0gbmV3X3JzYS5kZWNyeXB0KGJ5dGVzVG9TdHJpbmcoc3JjLnNsaWNlKGkgKiBtLCBNYXRoLm1pbigoaSArIDEpICogbSwgc3JjbGVuKSkpKTsKICB9CiAgcmV0dXJuIHN0cmluZ1RvQnl0ZXMocmV0KTsKfTsKCm0xMTVfZW5jb2RlID0gZnVuY3Rpb24oc3JjLCB0bSkgewogIHZhciBrZXksIHRtcCwgeno7CiAga2V5ID0gc3RyaW5nVG9CeXRlcyhtZDUoYCFAIyMjQCMke3RtfURGRFJAI0AjYCkpOwogIHRtcCA9IHN0cmluZ1RvQnl0ZXMoc3JjKTsKICB0bXAgPSBtMTE1X3N5bV9lbmNvZGUodG1wLCB0bXAubGVuZ3RoLCBrZXksIG51bGwpOwogIHRtcCA9IGtleS5zbGljZSgwLCAxNikuY29uY2F0KHRtcCk7CiAgcmV0dXJuIHsKICAgIGRhdGE6IG0xMTVfYXN5bV9lbmNvZGUodG1wLCB0bXAubGVuZ3RoKSwKICAgIGtleQogIH07Cn07CgptMTE1X2RlY29kZSA9IGZ1bmN0aW9uKHNyYywga2V5KSB7CiAgdmFyIHRtcDsKICB0bXAgPSBzdHJpbmdUb0J5dGVzKHdpbmRvdy5hdG9iKHNyYykpOwogIHRtcCA9IG0xMTVfYXN5bV9kZWNvZGUodG1wLCB0bXAubGVuZ3RoKTsKICByZXR1cm4gYnl0ZXNUb1N0cmluZyhtMTE1X3N5bV9kZWNvZGUodG1wLnNsaWNlKDE2KSwgdG1wLmxlbmd0aCAtIDE2LCBrZXksIHRtcC5zbGljZSgwLCAxNikpKTsKfTsKCkNyZWF0ZURvd25sb2FkVGFza18gPSBmdW5jdGlvbihmLCBjYikgewogIHZhciBkYXRhLCBrZXksIHRtLCB0bXVzOwogIHRtdXMgPSAobmV3IERhdGUoKSkuZ2V0VGltZSgpOwogIHRtID0gTWF0aC5mbG9vcih0bXVzIC8gMTAwMCk7CiAgKHtkYXRhLCBrZXl9ID0gbTExNV9lbmNvZGUoSlNPTi5zdHJpbmdpZnkoewogICAgcGlja2NvZGU6IGYucGMKICB9KSwgdG0pKTsKICByZXR1cm4gR01feG1saHR0cFJlcXVlc3QoewogICAgbWV0aG9kOiAnUE9TVCcsCiAgICB1cmw6IGBodHRwOi8vcHJvYXBpLjExNS5jb20vYXBwL2Nocm9tZS9kb3dudXJsP3Q9JHt0bX1gLAogICAgZGF0YTogYGRhdGE9JHtlbmNvZGVVUklDb21wb25lbnQoZGF0YSl9YCwKICAgIGhlYWRlcnM6IHsKICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnCiAgICB9LAogICAgb25sb2FkOiBmdW5jdGlvbihyZXNwb25zZSkgewogICAgICB2YXIganNvbjsKICAgICAganNvbiA9IEpTT04ucGFyc2UocmVzcG9uc2UucmVzcG9uc2VUZXh0KTsKICAgICAgaWYgKCFqc29uLnN0YXRlKSB7CiAgICAgICAgcmV0dXJuIGFsZXJ0KGpzb24ubXNnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gY2IoSlNPTi5wYXJzZShtMTE1X2RlY29kZShqc29uLmRhdGEsIGtleSkpKTsKICAgICAgfQogICAgfQogIH0pOwp9OwoKQ3JlYXRlRG93bmxvYWRUYXNrID0gZnVuY3Rpb24obykgewogIHZhciBjYiwgZiwgaiwgbGVuLCBuLCByZWYsIHJlc3VsdHMsIHJzOwogIHJzID0gW107CiAgbiA9IDA7CiAgY2IgPSBmdW5jdGlvbihyKSB7CiAgICB2YXIgYnRuLCBjb24sIGYsIGosIGxlbiwgd2luLCB4OwogICAgZm9yICh4IGluIHIpIHsKICAgICAgcnMucHVzaChyW3hdKTsKICAgICAgYnJlYWs7CiAgICB9CiAgICBpZiAocnMubGVuZ3RoID09PSBuKSB7CiAgICAgIEdNX2xvZyhycyk7CiAgICAgIGNvbiA9ICQoJzx1bC8+Jyk7CiAgICAgIGlmIChuID4gMSkgewogICAgICAgIGJ0biA9ICQoJzxidXR0b24+5aSN5Yi25omA5pyJ6ZO+5o6lPC9idXR0b24+Jyk7CiAgICAgICAgY29uLmFwcGVuZCgnPGxpLz4nKTsKICAgICAgICBjb24uY2hpbGRyZW4oJzpmaXJzdCcpLmFwcGVuZChidG4pOwogICAgICAgIGJ0bi5jbGljayhmdW5jdGlvbigpIHsKICAgICAgICAgIHZhciBhbGwsIGYsIGosIGxlbjsKICAgICAgICAgIGFsbCA9ICcnOwogICAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcnMubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHsKICAgICAgICAgICAgZiA9IHJzW2pdOwogICAgICAgICAgICBhbGwgKz0gYCR7Zi51cmwudXJsfVxuYDsKICAgICAgICAgIH0KICAgICAgICAgIHJldHVybiBHTV9zZXRDbGlwYm9hcmQoYWxsKTsKICAgICAgICB9KTsKICAgICAgfQogICAgICBmb3IgKGogPSAwLCBsZW4gPSBycy5sZW5ndGg7IGogPCBsZW47IGorKykgewogICAgICAgIGYgPSByc1tqXTsKICAgICAgICBjb24uYXBwZW5kKGA8bGk+PGEgaHJlZj0nJHtmLnVybC51cmx9Jz4ke2YuZmlsZV9uYW1lfTwvYT48L2xpPmApOwogICAgICB9CiAgICAgIHdpbiA9IG5ldyBDb3JlLkRpYWxvZ0Jhc2UoewogICAgICAgIHRpdGxlOiAn5paH5Lu25LiL6L29JywKICAgICAgICBjb250ZW50OiBjb24sCiAgICAgICAgd2lkdGg6IDUzMAogICAgICB9KTsKICAgICAgcmV0dXJuIHdpbi5PcGVuKG51bGwpOwogICAgfQogIH07CiAgcmVmID0gby5saXN0OwogIHJlc3VsdHMgPSBbXTsKICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHsKICAgIGYgPSByZWZbal07CiAgICBpZiAoIWYuaXNfZGlyKSB7CiAgICAgIG4rKzsKICAgICAgcmVzdWx0cy5wdXNoKENyZWF0ZURvd25sb2FkVGFza18oZiwgY2IpKTsKICAgIH0gZWxzZSB7CiAgICAgIHJlc3VsdHMucHVzaCh2b2lkIDApOwogICAgfQogIH0KICByZXR1cm4gcmVzdWx0czsKfTsKCmJyb3dzZXJJbnRlcmZhY2UgPSAocmVmID0gdW5zYWZlV2luZG93LmJyb3dzZXJJbnRlcmZhY2UpICE9IG51bGwgPyByZWYgOiB7fTsKCmJyb3dzZXJJbnRlcmZhY2UuQ3JlYXRlRG93bmxvYWRUYXNrID0gZnVuY3Rpb24ocykgewogIHZhciBlcnJvcjsKICB0cnkgewogICAgcmV0dXJuIENyZWF0ZURvd25sb2FkVGFzayhKU09OLnBhcnNlKGRlY29kZVVSSUNvbXBvbmVudChzKSkpOwogIH0gY2F0Y2ggKGVycm9yMSkgewogICAgZXJyb3IgPSBlcnJvcjE7CiAgICByZXR1cm4gR01fbG9nKGAke2Vycm9yLm1lc3NhZ2V9XG4ke2Vycm9yLnN0YWNrfWApOwogIH0KfTsKCmJyb3dzZXJJbnRlcmZhY2UuR2V0QnJvd3NlclZlcnNpb24gPSBmdW5jdGlvbigpIHsKICByZXR1cm4gIjEwMC4wLjAiOyAvLyDnm67liY3vvIgyMDIxMDEwMu+8iemcgOimgeWkp+S6jjIzLjkuMwp9OwoKaWYgKHR5cGVvZiBjbG9uZUludG8gIT09ICdmdW5jdGlvbicpIHsKICBjbG9uZUludG8gPSBmdW5jdGlvbih4KSB7CiAgICByZXR1cm4geDsKICB9Owp9Cgp1bnNhZmVXaW5kb3cuYnJvd3NlckludGVyZmFjZSA9IGNsb25lSW50byhicm93c2VySW50ZXJmYWNlLCB1bnNhZmVXaW5kb3csIHsKICBjbG9uZUZ1bmN0aW9uczogdHJ1ZQp9KTsKCn0pKCk7Cg==","requires":[{"meta":{"name":"BigInteger.min.js","url":"https://peterolson.github.io/BigInteger.js/BigInteger.min.js","ts":1670371893075,"mimetype":"text/javascript"},"source":"dmFyIGJpZ0ludD1mdW5jdGlvbih0KXsidXNlIHN0cmljdCI7dmFyIGU9MWU3LHI9OTAwNzE5OTI1NDc0MDk5MixvPWYociksbj0iMDEyMzQ1Njc4OWFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6IixpPSJmdW5jdGlvbiI9PXR5cGVvZiBCaWdJbnQ7ZnVuY3Rpb24gdSh0LGUscixvKXtyZXR1cm4gdm9pZCAwPT09dD91WzBdOnZvaWQgMCE9PWUmJigxMCE9K2V8fHIpP18odCxlLHIsbyk6Syh0KX1mdW5jdGlvbiBwKHQsZSl7dGhpcy52YWx1ZT10LHRoaXMuc2lnbj1lLHRoaXMuaXNTbWFsbD0hMX1mdW5jdGlvbiBhKHQpe3RoaXMudmFsdWU9dCx0aGlzLnNpZ249dDwwLHRoaXMuaXNTbWFsbD0hMH1mdW5jdGlvbiBzKHQpe3RoaXMudmFsdWU9dH1mdW5jdGlvbiBsKHQpe3JldHVybi1yPHQmJnQ8cn1mdW5jdGlvbiBmKHQpe3JldHVybiB0PDFlNz9bdF06dDwxZTE0P1t0JTFlNyxNYXRoLmZsb29yKHQvMWU3KV06W3QlMWU3LE1hdGguZmxvb3IodC8xZTcpJTFlNyxNYXRoLmZsb29yKHQvMWUxNCldfWZ1bmN0aW9uIHYodCl7aCh0KTt2YXIgcj10Lmxlbmd0aDtpZihyPDQmJkEodCxvKTwwKXN3aXRjaChyKXtjYXNlIDA6cmV0dXJuIDA7Y2FzZSAxOnJldHVybiB0WzBdO2Nhc2UgMjpyZXR1cm4gdFswXSt0WzFdKmU7ZGVmYXVsdDpyZXR1cm4gdFswXSsodFsxXSt0WzJdKmUpKmV9cmV0dXJuIHR9ZnVuY3Rpb24gaCh0KXtmb3IodmFyIGU9dC5sZW5ndGg7MD09PXRbLS1lXTspO3QubGVuZ3RoPWUrMX1mdW5jdGlvbiB5KHQpe2Zvcih2YXIgZT1uZXcgQXJyYXkodCkscj0tMTsrK3I8dDspZVtyXT0wO3JldHVybiBlfWZ1bmN0aW9uIGcodCl7cmV0dXJuIHQ+MD9NYXRoLmZsb29yKHQpOk1hdGguY2VpbCh0KX1mdW5jdGlvbiBjKHQscil7dmFyIG8sbixpPXQubGVuZ3RoLHU9ci5sZW5ndGgscD1uZXcgQXJyYXkoaSksYT0wLHM9ZTtmb3Iobj0wO248dTtuKyspYT0obz10W25dK3Jbbl0rYSk+PXM/MTowLHBbbl09by1hKnM7Zm9yKDtuPGk7KWE9KG89dFtuXSthKT09PXM/MTowLHBbbisrXT1vLWEqcztyZXR1cm4gYT4wJiZwLnB1c2goYSkscH1mdW5jdGlvbiBtKHQsZSl7cmV0dXJuIHQubGVuZ3RoPj1lLmxlbmd0aD9jKHQsZSk6YyhlLHQpfWZ1bmN0aW9uIGQodCxyKXt2YXIgbyxuLGk9dC5sZW5ndGgsdT1uZXcgQXJyYXkoaSkscD1lO2ZvcihuPTA7bjxpO24rKylvPXRbbl0tcCtyLHI9TWF0aC5mbG9vcihvL3ApLHVbbl09by1yKnAscis9MTtmb3IoO3I+MDspdVtuKytdPXIlcCxyPU1hdGguZmxvb3Ioci9wKTtyZXR1cm4gdX1mdW5jdGlvbiBiKHQscil7dmFyIG8sbixpPXQubGVuZ3RoLHU9ci5sZW5ndGgscD1uZXcgQXJyYXkoaSksYT0wLHM9ZTtmb3Iobz0wO288dTtvKyspKG49dFtvXS1hLXJbb10pPDA/KG4rPXMsYT0xKTphPTAscFtvXT1uO2ZvcihvPXU7bzxpO28rKyl7aWYoISgobj10W29dLWEpPDApKXtwW28rK109bjticmVha31uKz1zLHBbb109bn1mb3IoO288aTtvKyspcFtvXT10W29dO3JldHVybiBoKHApLHB9ZnVuY3Rpb24gdyh0LHIsbyl7dmFyIG4saSx1PXQubGVuZ3RoLHM9bmV3IEFycmF5KHUpLGw9LXIsZj1lO2ZvcihuPTA7bjx1O24rKylpPXRbbl0rbCxsPU1hdGguZmxvb3IoaS9mKSxpJT1mLHNbbl09aTwwP2krZjppO3JldHVybiJudW1iZXIiPT10eXBlb2Yocz12KHMpKT8obyYmKHM9LXMpLG5ldyBhKHMpKTpuZXcgcChzLG8pfWZ1bmN0aW9uIFModCxyKXt2YXIgbyxuLGksdSxwPXQubGVuZ3RoLGE9ci5sZW5ndGgscz15KHArYSksbD1lO2ZvcihpPTA7aTxwOysraSl7dT10W2ldO2Zvcih2YXIgZj0wO2Y8YTsrK2Ypbz11KnJbZl0rc1tpK2ZdLG49TWF0aC5mbG9vcihvL2wpLHNbaStmXT1vLW4qbCxzW2krZisxXSs9bn1yZXR1cm4gaChzKSxzfWZ1bmN0aW9uIEkodCxyKXt2YXIgbyxuLGk9dC5sZW5ndGgsdT1uZXcgQXJyYXkoaSkscD1lLGE9MDtmb3Iobj0wO248aTtuKyspbz10W25dKnIrYSxhPU1hdGguZmxvb3Ioby9wKSx1W25dPW8tYSpwO2Zvcig7YT4wOyl1W24rK109YSVwLGE9TWF0aC5mbG9vcihhL3ApO3JldHVybiB1fWZ1bmN0aW9uIHEodCxlKXtmb3IodmFyIHI9W107ZS0tID4wOylyLnB1c2goMCk7cmV0dXJuIHIuY29uY2F0KHQpfWZ1bmN0aW9uIE0odCxlKXt2YXIgcj1NYXRoLm1heCh0Lmxlbmd0aCxlLmxlbmd0aCk7aWYocjw9MzApcmV0dXJuIFModCxlKTtyPU1hdGguY2VpbChyLzIpO3ZhciBvPXQuc2xpY2Uociksbj10LnNsaWNlKDAsciksaT1lLnNsaWNlKHIpLHU9ZS5zbGljZSgwLHIpLHA9TShuLHUpLGE9TShvLGkpLHM9TShtKG4sbyksbSh1LGkpKSxsPW0obShwLHEoYihiKHMscCksYSkscikpLHEoYSwyKnIpKTtyZXR1cm4gaChsKSxsfWZ1bmN0aW9uIE4odCxyLG8pe3JldHVybiBuZXcgcCh0PGU/SShyLHQpOlMocixmKHQpKSxvKX1mdW5jdGlvbiBFKHQpe3ZhciByLG8sbixpLHU9dC5sZW5ndGgscD15KHUrdSksYT1lO2ZvcihuPTA7bjx1O24rKyl7bz0wLShpPXRbbl0pKmk7Zm9yKHZhciBzPW47czx1O3MrKylyPWkqdFtzXSoyK3BbbitzXStvLG89TWF0aC5mbG9vcihyL2EpLHBbbitzXT1yLW8qYTtwW24rdV09b31yZXR1cm4gaChwKSxwfWZ1bmN0aW9uIE8odCxlKXt2YXIgcixvLG4saSx1PXQubGVuZ3RoLHA9eSh1KTtmb3Iobj0wLHI9dS0xO3I+PTA7LS1yKW49KGk9MWU3Km4rdFtyXSktKG89ZyhpL2UpKSplLHBbcl09MHxvO3JldHVybltwLDB8bl19ZnVuY3Rpb24gQih0LHIpe3ZhciBvLG49SyhyKTtpZihpKXJldHVybltuZXcgcyh0LnZhbHVlL24udmFsdWUpLG5ldyBzKHQudmFsdWUlbi52YWx1ZSldO3ZhciBsLGM9dC52YWx1ZSxtPW4udmFsdWU7aWYoMD09PW0pdGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgZGl2aWRlIGJ5IHplcm8iKTtpZih0LmlzU21hbGwpcmV0dXJuIG4uaXNTbWFsbD9bbmV3IGEoZyhjL20pKSxuZXcgYShjJW0pXTpbdVswXSx0XTtpZihuLmlzU21hbGwpe2lmKDE9PT1tKXJldHVyblt0LHVbMF1dO2lmKC0xPT1tKXJldHVyblt0Lm5lZ2F0ZSgpLHVbMF1dO3ZhciBkPU1hdGguYWJzKG0pO2lmKGQ8ZSl7bD12KChvPU8oYyxkKSlbMF0pO3ZhciB3PW9bMV07cmV0dXJuIHQuc2lnbiYmKHc9LXcpLCJudW1iZXIiPT10eXBlb2YgbD8odC5zaWduIT09bi5zaWduJiYobD0tbCksW25ldyBhKGwpLG5ldyBhKHcpXSk6W25ldyBwKGwsdC5zaWduIT09bi5zaWduKSxuZXcgYSh3KV19bT1mKGQpfXZhciBTPUEoYyxtKTtpZigtMT09PVMpcmV0dXJuW3VbMF0sdF07aWYoMD09PVMpcmV0dXJuW3VbdC5zaWduPT09bi5zaWduPzE6LTFdLHVbMF1dO289Yy5sZW5ndGgrbS5sZW5ndGg8PTIwMD9mdW5jdGlvbih0LHIpe3ZhciBvLG4saSx1LHAsYSxzLGw9dC5sZW5ndGgsZj1yLmxlbmd0aCxoPWUsZz15KHIubGVuZ3RoKSxjPXJbZi0xXSxtPU1hdGguY2VpbChoLygyKmMpKSxkPUkodCxtKSxiPUkocixtKTtmb3IoZC5sZW5ndGg8PWwmJmQucHVzaCgwKSxiLnB1c2goMCksYz1iW2YtMV0sbj1sLWY7bj49MDtuLS0pe2ZvcihvPWgtMSxkW24rZl0hPT1jJiYobz1NYXRoLmZsb29yKChkW24rZl0qaCtkW24rZi0xXSkvYykpLGk9MCx1PTAsYT1iLmxlbmd0aCxwPTA7cDxhO3ArKylpKz1vKmJbcF0scz1NYXRoLmZsb29yKGkvaCksdSs9ZFtuK3BdLShpLXMqaCksaT1zLHU8MD8oZFtuK3BdPXUraCx1PS0xKTooZFtuK3BdPXUsdT0wKTtmb3IoOzAhPT11Oyl7Zm9yKG8tPTEsaT0wLHA9MDtwPGE7cCsrKShpKz1kW24rcF0taCtiW3BdKTwwPyhkW24rcF09aStoLGk9MCk6KGRbbitwXT1pLGk9MSk7dSs9aX1nW25dPW99cmV0dXJuIGQ9TyhkLG0pWzBdLFt2KGcpLHYoZCldfShjLG0pOmZ1bmN0aW9uKHQscil7Zm9yKHZhciBvLG4saSx1LHAsYT10Lmxlbmd0aCxzPXIubGVuZ3RoLGw9W10sZj1bXSx5PWU7YTspaWYoZi51bnNoaWZ0KHRbLS1hXSksaChmKSxBKGYscik8MClsLnB1c2goMCk7ZWxzZXtpPWZbKG49Zi5sZW5ndGgpLTFdKnkrZltuLTJdLHU9cltzLTFdKnkrcltzLTJdLG4+cyYmKGk9KGkrMSkqeSksbz1NYXRoLmNlaWwoaS91KTtkb3tpZihBKHA9SShyLG8pLGYpPD0wKWJyZWFrO28tLX13aGlsZShvKTtsLnB1c2gobyksZj1iKGYscCl9cmV0dXJuIGwucmV2ZXJzZSgpLFt2KGwpLHYoZildfShjLG0pLGw9b1swXTt2YXIgcT10LnNpZ24hPT1uLnNpZ24sTT1vWzFdLE49dC5zaWduO3JldHVybiJudW1iZXIiPT10eXBlb2YgbD8ocSYmKGw9LWwpLGw9bmV3IGEobCkpOmw9bmV3IHAobCxxKSwibnVtYmVyIj09dHlwZW9mIE0/KE4mJihNPS1NKSxNPW5ldyBhKE0pKTpNPW5ldyBwKE0sTiksW2wsTV19ZnVuY3Rpb24gQSh0LGUpe2lmKHQubGVuZ3RoIT09ZS5sZW5ndGgpcmV0dXJuIHQubGVuZ3RoPmUubGVuZ3RoPzE6LTE7Zm9yKHZhciByPXQubGVuZ3RoLTE7cj49MDtyLS0paWYodFtyXSE9PWVbcl0pcmV0dXJuIHRbcl0+ZVtyXT8xOi0xO3JldHVybiAwfWZ1bmN0aW9uIFAodCl7dmFyIGU9dC5hYnMoKTtyZXR1cm4hZS5pc1VuaXQoKSYmKCEhKGUuZXF1YWxzKDIpfHxlLmVxdWFscygzKXx8ZS5lcXVhbHMoNSkpfHwhKGUuaXNFdmVuKCl8fGUuaXNEaXZpc2libGVCeSgzKXx8ZS5pc0RpdmlzaWJsZUJ5KDUpKSYmKCEhZS5sZXNzZXIoNDkpfHx2b2lkIDApKX1mdW5jdGlvbiBaKHQsZSl7Zm9yKHZhciByLG8sbixpPXQucHJldigpLHU9aSxwPTA7dS5pc0V2ZW4oKTspdT11LmRpdmlkZSgyKSxwKys7dDpmb3Iobz0wO288ZS5sZW5ndGg7bysrKWlmKCF0Lmxlc3NlcihlW29dKSYmIShuPWJpZ0ludChlW29dKS5tb2RQb3codSx0KSkuaXNVbml0KCkmJiFuLmVxdWFscyhpKSl7Zm9yKHI9cC0xOzAhPXI7ci0tKXtpZigobj1uLnNxdWFyZSgpLm1vZCh0KSkuaXNVbml0KCkpcmV0dXJuITE7aWYobi5lcXVhbHMoaSkpY29udGludWUgdH1yZXR1cm4hMX1yZXR1cm4hMH1wLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHUucHJvdG90eXBlKSxhLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHUucHJvdG90eXBlKSxzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHUucHJvdG90eXBlKSxwLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7dmFyIGU9Syh0KTtpZih0aGlzLnNpZ24hPT1lLnNpZ24pcmV0dXJuIHRoaXMuc3VidHJhY3QoZS5uZWdhdGUoKSk7dmFyIHI9dGhpcy52YWx1ZSxvPWUudmFsdWU7cmV0dXJuIGUuaXNTbWFsbD9uZXcgcChkKHIsTWF0aC5hYnMobykpLHRoaXMuc2lnbik6bmV3IHAobShyLG8pLHRoaXMuc2lnbil9LHAucHJvdG90eXBlLnBsdXM9cC5wcm90b3R5cGUuYWRkLGEucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXt2YXIgZT1LKHQpLHI9dGhpcy52YWx1ZTtpZihyPDAhPT1lLnNpZ24pcmV0dXJuIHRoaXMuc3VidHJhY3QoZS5uZWdhdGUoKSk7dmFyIG89ZS52YWx1ZTtpZihlLmlzU21hbGwpe2lmKGwocitvKSlyZXR1cm4gbmV3IGEocitvKTtvPWYoTWF0aC5hYnMobykpfXJldHVybiBuZXcgcChkKG8sTWF0aC5hYnMocikpLHI8MCl9LGEucHJvdG90eXBlLnBsdXM9YS5wcm90b3R5cGUuYWRkLHMucHJvdG90eXBlLmFkZD1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHModGhpcy52YWx1ZStLKHQpLnZhbHVlKX0scy5wcm90b3R5cGUucGx1cz1zLnByb3RvdHlwZS5hZGQscC5wcm90b3R5cGUuc3VidHJhY3Q9ZnVuY3Rpb24odCl7dmFyIGU9Syh0KTtpZih0aGlzLnNpZ24hPT1lLnNpZ24pcmV0dXJuIHRoaXMuYWRkKGUubmVnYXRlKCkpO3ZhciByPXRoaXMudmFsdWUsbz1lLnZhbHVlO3JldHVybiBlLmlzU21hbGw/dyhyLE1hdGguYWJzKG8pLHRoaXMuc2lnbik6ZnVuY3Rpb24odCxlLHIpe3ZhciBvO3JldHVybiBBKHQsZSk+PTA/bz1iKHQsZSk6KG89YihlLHQpLHI9IXIpLCJudW1iZXIiPT10eXBlb2Yobz12KG8pKT8ociYmKG89LW8pLG5ldyBhKG8pKTpuZXcgcChvLHIpfShyLG8sdGhpcy5zaWduKX0scC5wcm90b3R5cGUubWludXM9cC5wcm90b3R5cGUuc3VidHJhY3QsYS5wcm90b3R5cGUuc3VidHJhY3Q9ZnVuY3Rpb24odCl7dmFyIGU9Syh0KSxyPXRoaXMudmFsdWU7aWYocjwwIT09ZS5zaWduKXJldHVybiB0aGlzLmFkZChlLm5lZ2F0ZSgpKTt2YXIgbz1lLnZhbHVlO3JldHVybiBlLmlzU21hbGw/bmV3IGEoci1vKTp3KG8sTWF0aC5hYnMocikscj49MCl9LGEucHJvdG90eXBlLm1pbnVzPWEucHJvdG90eXBlLnN1YnRyYWN0LHMucHJvdG90eXBlLnN1YnRyYWN0PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcyh0aGlzLnZhbHVlLUsodCkudmFsdWUpfSxzLnByb3RvdHlwZS5taW51cz1zLnByb3RvdHlwZS5zdWJ0cmFjdCxwLnByb3RvdHlwZS5uZWdhdGU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHAodGhpcy52YWx1ZSwhdGhpcy5zaWduKX0sYS5wcm90b3R5cGUubmVnYXRlPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5zaWduLGU9bmV3IGEoLXRoaXMudmFsdWUpO3JldHVybiBlLnNpZ249IXQsZX0scy5wcm90b3R5cGUubmVnYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBzKC10aGlzLnZhbHVlKX0scC5wcm90b3R5cGUuYWJzPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBwKHRoaXMudmFsdWUsITEpfSxhLnByb3RvdHlwZS5hYnM9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IGEoTWF0aC5hYnModGhpcy52YWx1ZSkpfSxzLnByb3RvdHlwZS5hYnM9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHModGhpcy52YWx1ZT49MD90aGlzLnZhbHVlOi10aGlzLnZhbHVlKX0scC5wcm90b3R5cGUubXVsdGlwbHk9ZnVuY3Rpb24odCl7dmFyIHIsbyxuLGk9Syh0KSxhPXRoaXMudmFsdWUscz1pLnZhbHVlLGw9dGhpcy5zaWduIT09aS5zaWduO2lmKGkuaXNTbWFsbCl7aWYoMD09PXMpcmV0dXJuIHVbMF07aWYoMT09PXMpcmV0dXJuIHRoaXM7aWYoLTE9PT1zKXJldHVybiB0aGlzLm5lZ2F0ZSgpO2lmKChyPU1hdGguYWJzKHMpKTxlKXJldHVybiBuZXcgcChJKGEsciksbCk7cz1mKHIpfXJldHVybiBvPWEubGVuZ3RoLG49cy5sZW5ndGgsbmV3IHAoLS4wMTIqby0uMDEyKm4rMTVlLTYqbypuPjA/TShhLHMpOlMoYSxzKSxsKX0scC5wcm90b3R5cGUudGltZXM9cC5wcm90b3R5cGUubXVsdGlwbHksYS5wcm90b3R5cGUuX211bHRpcGx5QnlTbWFsbD1mdW5jdGlvbih0KXtyZXR1cm4gbCh0LnZhbHVlKnRoaXMudmFsdWUpP25ldyBhKHQudmFsdWUqdGhpcy52YWx1ZSk6TihNYXRoLmFicyh0LnZhbHVlKSxmKE1hdGguYWJzKHRoaXMudmFsdWUpKSx0aGlzLnNpZ24hPT10LnNpZ24pfSxwLnByb3RvdHlwZS5fbXVsdGlwbHlCeVNtYWxsPWZ1bmN0aW9uKHQpe3JldHVybiAwPT09dC52YWx1ZT91WzBdOjE9PT10LnZhbHVlP3RoaXM6LTE9PT10LnZhbHVlP3RoaXMubmVnYXRlKCk6TihNYXRoLmFicyh0LnZhbHVlKSx0aGlzLnZhbHVlLHRoaXMuc2lnbiE9PXQuc2lnbil9LGEucHJvdG90eXBlLm11bHRpcGx5PWZ1bmN0aW9uKHQpe3JldHVybiBLKHQpLl9tdWx0aXBseUJ5U21hbGwodGhpcyl9LGEucHJvdG90eXBlLnRpbWVzPWEucHJvdG90eXBlLm11bHRpcGx5LHMucHJvdG90eXBlLm11bHRpcGx5PWZ1bmN0aW9uKHQpe3JldHVybiBuZXcgcyh0aGlzLnZhbHVlKksodCkudmFsdWUpfSxzLnByb3RvdHlwZS50aW1lcz1zLnByb3RvdHlwZS5tdWx0aXBseSxwLnByb3RvdHlwZS5zcXVhcmU9ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IHAoRSh0aGlzLnZhbHVlKSwhMSl9LGEucHJvdG90eXBlLnNxdWFyZT1mdW5jdGlvbigpe3ZhciB0PXRoaXMudmFsdWUqdGhpcy52YWx1ZTtyZXR1cm4gbCh0KT9uZXcgYSh0KTpuZXcgcChFKGYoTWF0aC5hYnModGhpcy52YWx1ZSkpKSwhMSl9LHMucHJvdG90eXBlLnNxdWFyZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHModGhpcy52YWx1ZSp0aGlzLnZhbHVlKX0scC5wcm90b3R5cGUuZGl2bW9kPWZ1bmN0aW9uKHQpe3ZhciBlPUIodGhpcyx0KTtyZXR1cm57cXVvdGllbnQ6ZVswXSxyZW1haW5kZXI6ZVsxXX19LHMucHJvdG90eXBlLmRpdm1vZD1hLnByb3RvdHlwZS5kaXZtb2Q9cC5wcm90b3R5cGUuZGl2bW9kLHAucHJvdG90eXBlLmRpdmlkZT1mdW5jdGlvbih0KXtyZXR1cm4gQih0aGlzLHQpWzBdfSxzLnByb3RvdHlwZS5vdmVyPXMucHJvdG90eXBlLmRpdmlkZT1mdW5jdGlvbih0KXtyZXR1cm4gbmV3IHModGhpcy52YWx1ZS9LKHQpLnZhbHVlKX0sYS5wcm90b3R5cGUub3Zlcj1hLnByb3RvdHlwZS5kaXZpZGU9cC5wcm90b3R5cGUub3Zlcj1wLnByb3RvdHlwZS5kaXZpZGUscC5wcm90b3R5cGUubW9kPWZ1bmN0aW9uKHQpe3JldHVybiBCKHRoaXMsdClbMV19LHMucHJvdG90eXBlLm1vZD1zLnByb3RvdHlwZS5yZW1haW5kZXI9ZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBzKHRoaXMudmFsdWUlSyh0KS52YWx1ZSl9LGEucHJvdG90eXBlLnJlbWFpbmRlcj1hLnByb3RvdHlwZS5tb2Q9cC5wcm90b3R5cGUucmVtYWluZGVyPXAucHJvdG90eXBlLm1vZCxwLnByb3RvdHlwZS5wb3c9ZnVuY3Rpb24odCl7dmFyIGUscixvLG49Syh0KSxpPXRoaXMudmFsdWUscD1uLnZhbHVlO2lmKDA9PT1wKXJldHVybiB1WzFdO2lmKDA9PT1pKXJldHVybiB1WzBdO2lmKDE9PT1pKXJldHVybiB1WzFdO2lmKC0xPT09aSlyZXR1cm4gbi5pc0V2ZW4oKT91WzFdOnVbLTFdO2lmKG4uc2lnbilyZXR1cm4gdVswXTtpZighbi5pc1NtYWxsKXRocm93IG5ldyBFcnJvcigiVGhlIGV4cG9uZW50ICIrbi50b1N0cmluZygpKyIgaXMgdG9vIGxhcmdlLiIpO2lmKHRoaXMuaXNTbWFsbCYmbChlPU1hdGgucG93KGkscCkpKXJldHVybiBuZXcgYShnKGUpKTtmb3Iocj10aGlzLG89dVsxXTshMCZwJiYobz1vLnRpbWVzKHIpLC0tcCksMCE9PXA7KXAvPTIscj1yLnNxdWFyZSgpO3JldHVybiBvfSxhLnByb3RvdHlwZS5wb3c9cC5wcm90b3R5cGUucG93LHMucHJvdG90eXBlLnBvdz1mdW5jdGlvbih0KXt2YXIgZT1LKHQpLHI9dGhpcy52YWx1ZSxvPWUudmFsdWUsbj1CaWdJbnQoMCksaT1CaWdJbnQoMSkscD1CaWdJbnQoMik7aWYobz09PW4pcmV0dXJuIHVbMV07aWYocj09PW4pcmV0dXJuIHVbMF07aWYocj09PWkpcmV0dXJuIHVbMV07aWYocj09PUJpZ0ludCgtMSkpcmV0dXJuIGUuaXNFdmVuKCk/dVsxXTp1Wy0xXTtpZihlLmlzTmVnYXRpdmUoKSlyZXR1cm4gbmV3IHMobik7Zm9yKHZhciBhPXRoaXMsbD11WzFdOyhvJmkpPT09aSYmKGw9bC50aW1lcyhhKSwtLW8pLG8hPT1uOylvLz1wLGE9YS5zcXVhcmUoKTtyZXR1cm4gbH0scC5wcm90b3R5cGUubW9kUG93PWZ1bmN0aW9uKHQsZSl7aWYodD1LKHQpLChlPUsoZSkpLmlzWmVybygpKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IHRha2UgbW9kUG93IHdpdGggbW9kdWx1cyAwIik7dmFyIHI9dVsxXSxvPXRoaXMubW9kKGUpO2Zvcih0LmlzTmVnYXRpdmUoKSYmKHQ9dC5tdWx0aXBseSh1Wy0xXSksbz1vLm1vZEludihlKSk7dC5pc1Bvc2l0aXZlKCk7KXtpZihvLmlzWmVybygpKXJldHVybiB1WzBdO3QuaXNPZGQoKSYmKHI9ci5tdWx0aXBseShvKS5tb2QoZSkpLHQ9dC5kaXZpZGUoMiksbz1vLnNxdWFyZSgpLm1vZChlKX1yZXR1cm4gcn0scy5wcm90b3R5cGUubW9kUG93PWEucHJvdG90eXBlLm1vZFBvdz1wLnByb3RvdHlwZS5tb2RQb3cscC5wcm90b3R5cGUuY29tcGFyZUFicz1mdW5jdGlvbih0KXt2YXIgZT1LKHQpLHI9dGhpcy52YWx1ZSxvPWUudmFsdWU7cmV0dXJuIGUuaXNTbWFsbD8xOkEocixvKX0sYS5wcm90b3R5cGUuY29tcGFyZUFicz1mdW5jdGlvbih0KXt2YXIgZT1LKHQpLHI9TWF0aC5hYnModGhpcy52YWx1ZSksbz1lLnZhbHVlO3JldHVybiBlLmlzU21hbGw/cj09PShvPU1hdGguYWJzKG8pKT8wOnI+bz8xOi0xOi0xfSxzLnByb3RvdHlwZS5jb21wYXJlQWJzPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMudmFsdWUscj1LKHQpLnZhbHVlO3JldHVybihlPWU+PTA/ZTotZSk9PT0ocj1yPj0wP3I6LXIpPzA6ZT5yPzE6LTF9LHAucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24odCl7aWYodD09PTEvMClyZXR1cm4tMTtpZih0PT09LTEvMClyZXR1cm4gMTt2YXIgZT1LKHQpLHI9dGhpcy52YWx1ZSxvPWUudmFsdWU7cmV0dXJuIHRoaXMuc2lnbiE9PWUuc2lnbj9lLnNpZ24/MTotMTplLmlzU21hbGw/dGhpcy5zaWduPy0xOjE6QShyLG8pKih0aGlzLnNpZ24/LTE6MSl9LHAucHJvdG90eXBlLmNvbXBhcmVUbz1wLnByb3RvdHlwZS5jb21wYXJlLGEucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24odCl7aWYodD09PTEvMClyZXR1cm4tMTtpZih0PT09LTEvMClyZXR1cm4gMTt2YXIgZT1LKHQpLHI9dGhpcy52YWx1ZSxvPWUudmFsdWU7cmV0dXJuIGUuaXNTbWFsbD9yPT1vPzA6cj5vPzE6LTE6cjwwIT09ZS5zaWduP3I8MD8tMToxOnI8MD8xOi0xfSxhLnByb3RvdHlwZS5jb21wYXJlVG89YS5wcm90b3R5cGUuY29tcGFyZSxzLnByb3RvdHlwZS5jb21wYXJlPWZ1bmN0aW9uKHQpe2lmKHQ9PT0xLzApcmV0dXJuLTE7aWYodD09PS0xLzApcmV0dXJuIDE7dmFyIGU9dGhpcy52YWx1ZSxyPUsodCkudmFsdWU7cmV0dXJuIGU9PT1yPzA6ZT5yPzE6LTF9LHMucHJvdG90eXBlLmNvbXBhcmVUbz1zLnByb3RvdHlwZS5jb21wYXJlLHAucHJvdG90eXBlLmVxdWFscz1mdW5jdGlvbih0KXtyZXR1cm4gMD09PXRoaXMuY29tcGFyZSh0KX0scy5wcm90b3R5cGUuZXE9cy5wcm90b3R5cGUuZXF1YWxzPWEucHJvdG90eXBlLmVxPWEucHJvdG90eXBlLmVxdWFscz1wLnByb3RvdHlwZS5lcT1wLnByb3RvdHlwZS5lcXVhbHMscC5wcm90b3R5cGUubm90RXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiAwIT09dGhpcy5jb21wYXJlKHQpfSxzLnByb3RvdHlwZS5uZXE9cy5wcm90b3R5cGUubm90RXF1YWxzPWEucHJvdG90eXBlLm5lcT1hLnByb3RvdHlwZS5ub3RFcXVhbHM9cC5wcm90b3R5cGUubmVxPXAucHJvdG90eXBlLm5vdEVxdWFscyxwLnByb3RvdHlwZS5ncmVhdGVyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXBhcmUodCk+MH0scy5wcm90b3R5cGUuZ3Q9cy5wcm90b3R5cGUuZ3JlYXRlcj1hLnByb3RvdHlwZS5ndD1hLnByb3RvdHlwZS5ncmVhdGVyPXAucHJvdG90eXBlLmd0PXAucHJvdG90eXBlLmdyZWF0ZXIscC5wcm90b3R5cGUubGVzc2VyPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXBhcmUodCk8MH0scy5wcm90b3R5cGUubHQ9cy5wcm90b3R5cGUubGVzc2VyPWEucHJvdG90eXBlLmx0PWEucHJvdG90eXBlLmxlc3Nlcj1wLnByb3RvdHlwZS5sdD1wLnByb3RvdHlwZS5sZXNzZXIscC5wcm90b3R5cGUuZ3JlYXRlck9yRXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXBhcmUodCk+PTB9LHMucHJvdG90eXBlLmdlcT1zLnByb3RvdHlwZS5ncmVhdGVyT3JFcXVhbHM9YS5wcm90b3R5cGUuZ2VxPWEucHJvdG90eXBlLmdyZWF0ZXJPckVxdWFscz1wLnByb3RvdHlwZS5nZXE9cC5wcm90b3R5cGUuZ3JlYXRlck9yRXF1YWxzLHAucHJvdG90eXBlLmxlc3Nlck9yRXF1YWxzPWZ1bmN0aW9uKHQpe3JldHVybiB0aGlzLmNvbXBhcmUodCk8PTB9LHMucHJvdG90eXBlLmxlcT1zLnByb3RvdHlwZS5sZXNzZXJPckVxdWFscz1hLnByb3RvdHlwZS5sZXE9YS5wcm90b3R5cGUubGVzc2VyT3JFcXVhbHM9cC5wcm90b3R5cGUubGVxPXAucHJvdG90eXBlLmxlc3Nlck9yRXF1YWxzLHAucHJvdG90eXBlLmlzRXZlbj1mdW5jdGlvbigpe3JldHVybiAwPT0oMSZ0aGlzLnZhbHVlWzBdKX0sYS5wcm90b3R5cGUuaXNFdmVuPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PSgxJnRoaXMudmFsdWUpfSxzLnByb3RvdHlwZS5pc0V2ZW49ZnVuY3Rpb24oKXtyZXR1cm4odGhpcy52YWx1ZSZCaWdJbnQoMSkpPT09QmlnSW50KDApfSxwLnByb3RvdHlwZS5pc09kZD1mdW5jdGlvbigpe3JldHVybiAxPT0oMSZ0aGlzLnZhbHVlWzBdKX0sYS5wcm90b3R5cGUuaXNPZGQ9ZnVuY3Rpb24oKXtyZXR1cm4gMT09KDEmdGhpcy52YWx1ZSl9LHMucHJvdG90eXBlLmlzT2RkPWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMudmFsdWUmQmlnSW50KDEpKT09PUJpZ0ludCgxKX0scC5wcm90b3R5cGUuaXNQb3NpdGl2ZT1mdW5jdGlvbigpe3JldHVybiF0aGlzLnNpZ259LGEucHJvdG90eXBlLmlzUG9zaXRpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZT4wfSxzLnByb3RvdHlwZS5pc1Bvc2l0aXZlPWEucHJvdG90eXBlLmlzUG9zaXRpdmUscC5wcm90b3R5cGUuaXNOZWdhdGl2ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNpZ259LGEucHJvdG90eXBlLmlzTmVnYXRpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZTwwfSxzLnByb3RvdHlwZS5pc05lZ2F0aXZlPWEucHJvdG90eXBlLmlzTmVnYXRpdmUscC5wcm90b3R5cGUuaXNVbml0PWZ1bmN0aW9uKCl7cmV0dXJuITF9LGEucHJvdG90eXBlLmlzVW5pdD1mdW5jdGlvbigpe3JldHVybiAxPT09TWF0aC5hYnModGhpcy52YWx1ZSl9LHMucHJvdG90eXBlLmlzVW5pdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmFicygpLnZhbHVlPT09QmlnSW50KDEpfSxwLnByb3RvdHlwZS5pc1plcm89ZnVuY3Rpb24oKXtyZXR1cm4hMX0sYS5wcm90b3R5cGUuaXNaZXJvPWZ1bmN0aW9uKCl7cmV0dXJuIDA9PT10aGlzLnZhbHVlfSxzLnByb3RvdHlwZS5pc1plcm89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy52YWx1ZT09PUJpZ0ludCgwKX0scC5wcm90b3R5cGUuaXNEaXZpc2libGVCeT1mdW5jdGlvbih0KXt2YXIgZT1LKHQpO3JldHVybiFlLmlzWmVybygpJiYoISFlLmlzVW5pdCgpfHwoMD09PWUuY29tcGFyZUFicygyKT90aGlzLmlzRXZlbigpOnRoaXMubW9kKGUpLmlzWmVybygpKSl9LHMucHJvdG90eXBlLmlzRGl2aXNpYmxlQnk9YS5wcm90b3R5cGUuaXNEaXZpc2libGVCeT1wLnByb3RvdHlwZS5pc0RpdmlzaWJsZUJ5LHAucHJvdG90eXBlLmlzUHJpbWU9ZnVuY3Rpb24oZSl7dmFyIHI9UCh0aGlzKTtpZihyIT09dClyZXR1cm4gcjt2YXIgbz10aGlzLmFicygpLG49by5iaXRMZW5ndGgoKTtpZihuPD02NClyZXR1cm4gWihvLFsyLDMsNSw3LDExLDEzLDE3LDE5LDIzLDI5LDMxLDM3XSk7Zm9yKHZhciBpPU1hdGgubG9nKDIpKm4udG9KU051bWJlcigpLHU9TWF0aC5jZWlsKCEwPT09ZT8yKk1hdGgucG93KGksMik6aSkscD1bXSxhPTA7YTx1O2ErKylwLnB1c2goYmlnSW50KGErMikpO3JldHVybiBaKG8scCl9LHMucHJvdG90eXBlLmlzUHJpbWU9YS5wcm90b3R5cGUuaXNQcmltZT1wLnByb3RvdHlwZS5pc1ByaW1lLHAucHJvdG90eXBlLmlzUHJvYmFibGVQcmltZT1mdW5jdGlvbihlLHIpe3ZhciBvPVAodGhpcyk7aWYobyE9PXQpcmV0dXJuIG87Zm9yKHZhciBuPXRoaXMuYWJzKCksaT1lPT09dD81OmUsdT1bXSxwPTA7cDxpO3ArKyl1LnB1c2goYmlnSW50LnJhbmRCZXR3ZWVuKDIsbi5taW51cygyKSxyKSk7cmV0dXJuIFoobix1KX0scy5wcm90b3R5cGUuaXNQcm9iYWJsZVByaW1lPWEucHJvdG90eXBlLmlzUHJvYmFibGVQcmltZT1wLnByb3RvdHlwZS5pc1Byb2JhYmxlUHJpbWUscC5wcm90b3R5cGUubW9kSW52PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyLG8sbj1iaWdJbnQuemVybyxpPWJpZ0ludC5vbmUsdT1LKHQpLHA9dGhpcy5hYnMoKTshcC5pc1plcm8oKTspZT11LmRpdmlkZShwKSxyPW4sbz11LG49aSx1PXAsaT1yLnN1YnRyYWN0KGUubXVsdGlwbHkoaSkpLHA9by5zdWJ0cmFjdChlLm11bHRpcGx5KHApKTtpZighdS5pc1VuaXQoKSl0aHJvdyBuZXcgRXJyb3IodGhpcy50b1N0cmluZygpKyIgYW5kICIrdC50b1N0cmluZygpKyIgYXJlIG5vdCBjby1wcmltZSIpO3JldHVybi0xPT09bi5jb21wYXJlKDApJiYobj1uLmFkZCh0KSksdGhpcy5pc05lZ2F0aXZlKCk/bi5uZWdhdGUoKTpufSxzLnByb3RvdHlwZS5tb2RJbnY9YS5wcm90b3R5cGUubW9kSW52PXAucHJvdG90eXBlLm1vZEludixwLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy52YWx1ZTtyZXR1cm4gdGhpcy5zaWduP3codCwxLHRoaXMuc2lnbik6bmV3IHAoZCh0LDEpLHRoaXMuc2lnbil9LGEucHJvdG90eXBlLm5leHQ9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnZhbHVlO3JldHVybiB0KzE8cj9uZXcgYSh0KzEpOm5ldyBwKG8sITEpfSxzLnByb3RvdHlwZS5uZXh0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBzKHRoaXMudmFsdWUrQmlnSW50KDEpKX0scC5wcm90b3R5cGUucHJldj1mdW5jdGlvbigpe3ZhciB0PXRoaXMudmFsdWU7cmV0dXJuIHRoaXMuc2lnbj9uZXcgcChkKHQsMSksITApOncodCwxLHRoaXMuc2lnbil9LGEucHJvdG90eXBlLnByZXY9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnZhbHVlO3JldHVybiB0LTE+LXI/bmV3IGEodC0xKTpuZXcgcChvLCEwKX0scy5wcm90b3R5cGUucHJldj1mdW5jdGlvbigpe3JldHVybiBuZXcgcyh0aGlzLnZhbHVlLUJpZ0ludCgxKSl9O2Zvcih2YXIgeD1bMV07Mip4W3gubGVuZ3RoLTFdPD1lOyl4LnB1c2goMip4W3gubGVuZ3RoLTFdKTt2YXIgSj14Lmxlbmd0aCxMPXhbSi0xXTtmdW5jdGlvbiBVKHQpe3JldHVybiBNYXRoLmFicyh0KTw9ZX1mdW5jdGlvbiBUKHQsZSxyKXtlPUsoZSk7Zm9yKHZhciBvPXQuaXNOZWdhdGl2ZSgpLG49ZS5pc05lZ2F0aXZlKCksaT1vP3Qubm90KCk6dCx1PW4/ZS5ub3QoKTplLHA9MCxhPTAscz1udWxsLGw9bnVsbCxmPVtdOyFpLmlzWmVybygpfHwhdS5pc1plcm8oKTspcD0ocz1CKGksTCkpWzFdLnRvSlNOdW1iZXIoKSxvJiYocD1MLTEtcCksYT0obD1CKHUsTCkpWzFdLnRvSlNOdW1iZXIoKSxuJiYoYT1MLTEtYSksaT1zWzBdLHU9bFswXSxmLnB1c2gocihwLGEpKTtmb3IodmFyIHY9MCE9PXIobz8xOjAsbj8xOjApP2JpZ0ludCgtMSk6YmlnSW50KDApLGg9Zi5sZW5ndGgtMTtoPj0wO2gtPTEpdj12Lm11bHRpcGx5KEwpLmFkZChiaWdJbnQoZltoXSkpO3JldHVybiB2fXAucHJvdG90eXBlLnNoaWZ0TGVmdD1mdW5jdGlvbih0KXt2YXIgZT1LKHQpLnRvSlNOdW1iZXIoKTtpZighVShlKSl0aHJvdyBuZXcgRXJyb3IoU3RyaW5nKGUpKyIgaXMgdG9vIGxhcmdlIGZvciBzaGlmdGluZy4iKTtpZihlPDApcmV0dXJuIHRoaXMuc2hpZnRSaWdodCgtZSk7dmFyIHI9dGhpcztpZihyLmlzWmVybygpKXJldHVybiByO2Zvcig7ZT49Sjspcj1yLm11bHRpcGx5KEwpLGUtPUotMTtyZXR1cm4gci5tdWx0aXBseSh4W2VdKX0scy5wcm90b3R5cGUuc2hpZnRMZWZ0PWEucHJvdG90eXBlLnNoaWZ0TGVmdD1wLnByb3RvdHlwZS5zaGlmdExlZnQscC5wcm90b3R5cGUuc2hpZnRSaWdodD1mdW5jdGlvbih0KXt2YXIgZSxyPUsodCkudG9KU051bWJlcigpO2lmKCFVKHIpKXRocm93IG5ldyBFcnJvcihTdHJpbmcocikrIiBpcyB0b28gbGFyZ2UgZm9yIHNoaWZ0aW5nLiIpO2lmKHI8MClyZXR1cm4gdGhpcy5zaGlmdExlZnQoLXIpO2Zvcih2YXIgbz10aGlzO3I+PUo7KXtpZihvLmlzWmVybygpfHxvLmlzTmVnYXRpdmUoKSYmby5pc1VuaXQoKSlyZXR1cm4gbztvPShlPUIobyxMKSlbMV0uaXNOZWdhdGl2ZSgpP2VbMF0ucHJldigpOmVbMF0sci09Si0xfXJldHVybihlPUIobyx4W3JdKSlbMV0uaXNOZWdhdGl2ZSgpP2VbMF0ucHJldigpOmVbMF19LHMucHJvdG90eXBlLnNoaWZ0UmlnaHQ9YS5wcm90b3R5cGUuc2hpZnRSaWdodD1wLnByb3RvdHlwZS5zaGlmdFJpZ2h0LHAucHJvdG90eXBlLm5vdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLm5lZ2F0ZSgpLnByZXYoKX0scy5wcm90b3R5cGUubm90PWEucHJvdG90eXBlLm5vdD1wLnByb3RvdHlwZS5ub3QscC5wcm90b3R5cGUuYW5kPWZ1bmN0aW9uKHQpe3JldHVybiBUKHRoaXMsdCwoZnVuY3Rpb24odCxlKXtyZXR1cm4gdCZlfSkpfSxzLnByb3RvdHlwZS5hbmQ9YS5wcm90b3R5cGUuYW5kPXAucHJvdG90eXBlLmFuZCxwLnByb3RvdHlwZS5vcj1mdW5jdGlvbih0KXtyZXR1cm4gVCh0aGlzLHQsKGZ1bmN0aW9uKHQsZSl7cmV0dXJuIHR8ZX0pKX0scy5wcm90b3R5cGUub3I9YS5wcm90b3R5cGUub3I9cC5wcm90b3R5cGUub3IscC5wcm90b3R5cGUueG9yPWZ1bmN0aW9uKHQpe3JldHVybiBUKHRoaXMsdCwoZnVuY3Rpb24odCxlKXtyZXR1cm4gdF5lfSkpfSxzLnByb3RvdHlwZS54b3I9YS5wcm90b3R5cGUueG9yPXAucHJvdG90eXBlLnhvcjt2YXIgaj0xPDwzMDtmdW5jdGlvbiBDKHQpe3ZhciByPXQudmFsdWUsbz0ibnVtYmVyIj09dHlwZW9mIHI/cnxqOiJiaWdpbnQiPT10eXBlb2Ygcj9yfEJpZ0ludChqKTpyWzBdK3JbMV0qZXwxMDczNzU4MjA4O3JldHVybiBvJi1vfWZ1bmN0aW9uIEQodCxlKXtpZihlLmNvbXBhcmVUbyh0KTw9MCl7dmFyIHI9RCh0LGUuc3F1YXJlKGUpKSxvPXIucCxuPXIuZSxpPW8ubXVsdGlwbHkoZSk7cmV0dXJuIGkuY29tcGFyZVRvKHQpPD0wP3twOmksZToyKm4rMX06e3A6byxlOjIqbn19cmV0dXJue3A6YmlnSW50KDEpLGU6MH19ZnVuY3Rpb24geih0LGUpe3JldHVybiB0PUsodCksZT1LKGUpLHQuZ3JlYXRlcihlKT90OmV9ZnVuY3Rpb24gUih0LGUpe3JldHVybiB0PUsodCksZT1LKGUpLHQubGVzc2VyKGUpP3Q6ZX1mdW5jdGlvbiBrKHQsZSl7aWYodD1LKHQpLmFicygpLGU9SyhlKS5hYnMoKSx0LmVxdWFscyhlKSlyZXR1cm4gdDtpZih0LmlzWmVybygpKXJldHVybiBlO2lmKGUuaXNaZXJvKCkpcmV0dXJuIHQ7Zm9yKHZhciByLG8sbj11WzFdO3QuaXNFdmVuKCkmJmUuaXNFdmVuKCk7KXI9UihDKHQpLEMoZSkpLHQ9dC5kaXZpZGUociksZT1lLmRpdmlkZShyKSxuPW4ubXVsdGlwbHkocik7Zm9yKDt0LmlzRXZlbigpOyl0PXQuZGl2aWRlKEModCkpO2Rve2Zvcig7ZS5pc0V2ZW4oKTspZT1lLmRpdmlkZShDKGUpKTt0LmdyZWF0ZXIoZSkmJihvPWUsZT10LHQ9byksZT1lLnN1YnRyYWN0KHQpfXdoaWxlKCFlLmlzWmVybygpKTtyZXR1cm4gbi5pc1VuaXQoKT90OnQubXVsdGlwbHkobil9cC5wcm90b3R5cGUuYml0TGVuZ3RoPWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcztyZXR1cm4gdC5jb21wYXJlVG8oYmlnSW50KDApKTwwJiYodD10Lm5lZ2F0ZSgpLnN1YnRyYWN0KGJpZ0ludCgxKSkpLDA9PT10LmNvbXBhcmVUbyhiaWdJbnQoMCkpP2JpZ0ludCgwKTpiaWdJbnQoRCh0LGJpZ0ludCgyKSkuZSkuYWRkKGJpZ0ludCgxKSl9LHMucHJvdG90eXBlLmJpdExlbmd0aD1hLnByb3RvdHlwZS5iaXRMZW5ndGg9cC5wcm90b3R5cGUuYml0TGVuZ3RoO3ZhciBfPWZ1bmN0aW9uKHQsZSxyLG8pe3I9cnx8bix0PVN0cmluZyh0KSxvfHwodD10LnRvTG93ZXJDYXNlKCkscj1yLnRvTG93ZXJDYXNlKCkpO3ZhciBpLHU9dC5sZW5ndGgscD1NYXRoLmFicyhlKSxhPXt9O2ZvcihpPTA7aTxyLmxlbmd0aDtpKyspYVtyW2ldXT1pO2ZvcihpPTA7aTx1O2krKyl7aWYoIi0iIT09KGY9dFtpXSkmJihmIGluIGEmJmFbZl0+PXApKXtpZigiMSI9PT1mJiYxPT09cCljb250aW51ZTt0aHJvdyBuZXcgRXJyb3IoZisiIGlzIG5vdCBhIHZhbGlkIGRpZ2l0IGluIGJhc2UgIitlKyIuIil9fWU9SyhlKTt2YXIgcz1bXSxsPSItIj09PXRbMF07Zm9yKGk9bD8xOjA7aTx0Lmxlbmd0aDtpKyspe3ZhciBmO2lmKChmPXRbaV0paW4gYSlzLnB1c2goSyhhW2ZdKSk7ZWxzZXtpZigiPCIhPT1mKXRocm93IG5ldyBFcnJvcihmKyIgaXMgbm90IGEgdmFsaWQgY2hhcmFjdGVyIik7dmFyIHY9aTtkb3tpKyt9d2hpbGUoIj4iIT09dFtpXSYmaTx0Lmxlbmd0aCk7cy5wdXNoKEsodC5zbGljZSh2KzEsaSkpKX19cmV0dXJuICQocyxlLGwpfTtmdW5jdGlvbiAkKHQsZSxyKXt2YXIgbyxuPXVbMF0saT11WzFdO2ZvcihvPXQubGVuZ3RoLTE7bz49MDtvLS0pbj1uLmFkZCh0W29dLnRpbWVzKGkpKSxpPWkudGltZXMoZSk7cmV0dXJuIHI/bi5uZWdhdGUoKTpufWZ1bmN0aW9uIEYodCxlKXtpZigoZT1iaWdJbnQoZSkpLmlzWmVybygpKXtpZih0LmlzWmVybygpKXJldHVybnt2YWx1ZTpbMF0saXNOZWdhdGl2ZTohMX07dGhyb3cgbmV3IEVycm9yKCJDYW5ub3QgY29udmVydCBub256ZXJvIG51bWJlcnMgdG8gYmFzZSAwLiIpfWlmKGUuZXF1YWxzKC0xKSl7aWYodC5pc1plcm8oKSlyZXR1cm57dmFsdWU6WzBdLGlzTmVnYXRpdmU6ITF9O2lmKHQuaXNOZWdhdGl2ZSgpKXJldHVybnt2YWx1ZTpbXS5jb25jYXQuYXBwbHkoW10sQXJyYXkuYXBwbHkobnVsbCxBcnJheSgtdC50b0pTTnVtYmVyKCkpKS5tYXAoQXJyYXkucHJvdG90eXBlLnZhbHVlT2YsWzEsMF0pKSxpc05lZ2F0aXZlOiExfTt2YXIgcj1BcnJheS5hcHBseShudWxsLEFycmF5KHQudG9KU051bWJlcigpLTEpKS5tYXAoQXJyYXkucHJvdG90eXBlLnZhbHVlT2YsWzAsMV0pO3JldHVybiByLnVuc2hpZnQoWzFdKSx7dmFsdWU6W10uY29uY2F0LmFwcGx5KFtdLHIpLGlzTmVnYXRpdmU6ITF9fXZhciBvPSExO2lmKHQuaXNOZWdhdGl2ZSgpJiZlLmlzUG9zaXRpdmUoKSYmKG89ITAsdD10LmFicygpKSxlLmlzVW5pdCgpKXJldHVybiB0LmlzWmVybygpP3t2YWx1ZTpbMF0saXNOZWdhdGl2ZTohMX06e3ZhbHVlOkFycmF5LmFwcGx5KG51bGwsQXJyYXkodC50b0pTTnVtYmVyKCkpKS5tYXAoTnVtYmVyLnByb3RvdHlwZS52YWx1ZU9mLDEpLGlzTmVnYXRpdmU6b307Zm9yKHZhciBuLGk9W10sdT10O3UuaXNOZWdhdGl2ZSgpfHx1LmNvbXBhcmVBYnMoZSk+PTA7KXtuPXUuZGl2bW9kKGUpLHU9bi5xdW90aWVudDt2YXIgcD1uLnJlbWFpbmRlcjtwLmlzTmVnYXRpdmUoKSYmKHA9ZS5taW51cyhwKS5hYnMoKSx1PXUubmV4dCgpKSxpLnB1c2gocC50b0pTTnVtYmVyKCkpfXJldHVybiBpLnB1c2godS50b0pTTnVtYmVyKCkpLHt2YWx1ZTppLnJldmVyc2UoKSxpc05lZ2F0aXZlOm99fWZ1bmN0aW9uIEcodCxlLHIpe3ZhciBvPUYodCxlKTtyZXR1cm4oby5pc05lZ2F0aXZlPyItIjoiIikrby52YWx1ZS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVybiBmdW5jdGlvbih0LGUpe3JldHVybiB0PChlPWV8fG4pLmxlbmd0aD9lW3RdOiI8Iit0KyI+In0odCxyKX0pKS5qb2luKCIiKX1mdW5jdGlvbiBIKHQpe2lmKGwoK3QpKXt2YXIgZT0rdDtpZihlPT09ZyhlKSlyZXR1cm4gaT9uZXcgcyhCaWdJbnQoZSkpOm5ldyBhKGUpO3Rocm93IG5ldyBFcnJvcigiSW52YWxpZCBpbnRlZ2VyOiAiK3QpfXZhciByPSItIj09PXRbMF07ciYmKHQ9dC5zbGljZSgxKSk7dmFyIG89dC5zcGxpdCgvZS9pKTtpZihvLmxlbmd0aD4yKXRocm93IG5ldyBFcnJvcigiSW52YWxpZCBpbnRlZ2VyOiAiK28uam9pbigiZSIpKTtpZigyPT09by5sZW5ndGgpe3ZhciBuPW9bMV07aWYoIisiPT09blswXSYmKG49bi5zbGljZSgxKSksKG49K24pIT09ZyhuKXx8IWwobikpdGhyb3cgbmV3IEVycm9yKCJJbnZhbGlkIGludGVnZXI6ICIrbisiIGlzIG5vdCBhIHZhbGlkIGV4cG9uZW50LiIpO3ZhciB1PW9bMF0sZj11LmluZGV4T2YoIi4iKTtpZihmPj0wJiYobi09dS5sZW5ndGgtZi0xLHU9dS5zbGljZSgwLGYpK3Uuc2xpY2UoZisxKSksbjwwKXRocm93IG5ldyBFcnJvcigiQ2Fubm90IGluY2x1ZGUgbmVnYXRpdmUgZXhwb25lbnQgcGFydCBmb3IgaW50ZWdlcnMiKTt0PXUrPW5ldyBBcnJheShuKzEpLmpvaW4oIjAiKX1pZighL14oWzAtOV1bMC05XSopJC8udGVzdCh0KSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgaW50ZWdlcjogIit0KTtpZihpKXJldHVybiBuZXcgcyhCaWdJbnQocj8iLSIrdDp0KSk7Zm9yKHZhciB2PVtdLHk9dC5sZW5ndGgsYz15LTc7eT4wOyl2LnB1c2goK3Quc2xpY2UoYyx5KSksKGMtPTcpPDAmJihjPTApLHktPTc7cmV0dXJuIGgodiksbmV3IHAodixyKX1mdW5jdGlvbiBLKHQpe3JldHVybiJudW1iZXIiPT10eXBlb2YgdD9mdW5jdGlvbih0KXtpZihpKXJldHVybiBuZXcgcyhCaWdJbnQodCkpO2lmKGwodCkpe2lmKHQhPT1nKHQpKXRocm93IG5ldyBFcnJvcih0KyIgaXMgbm90IGFuIGludGVnZXIuIik7cmV0dXJuIG5ldyBhKHQpfXJldHVybiBIKHQudG9TdHJpbmcoKSl9KHQpOiJzdHJpbmciPT10eXBlb2YgdD9IKHQpOiJiaWdpbnQiPT10eXBlb2YgdD9uZXcgcyh0KTp0fXAucHJvdG90eXBlLnRvQXJyYXk9ZnVuY3Rpb24odCl7cmV0dXJuIEYodGhpcyx0KX0sYS5wcm90b3R5cGUudG9BcnJheT1mdW5jdGlvbih0KXtyZXR1cm4gRih0aGlzLHQpfSxzLnByb3RvdHlwZS50b0FycmF5PWZ1bmN0aW9uKHQpe3JldHVybiBGKHRoaXMsdCl9LHAucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKGUscil7aWYoZT09PXQmJihlPTEwKSwxMCE9PWUpcmV0dXJuIEcodGhpcyxlLHIpO2Zvcih2YXIgbyxuPXRoaXMudmFsdWUsaT1uLmxlbmd0aCx1PVN0cmluZyhuWy0taV0pOy0taT49MDspbz1TdHJpbmcobltpXSksdSs9IjAwMDAwMDAiLnNsaWNlKG8ubGVuZ3RoKStvO3JldHVybih0aGlzLnNpZ24/Ii0iOiIiKSt1fSxhLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbihlLHIpe3JldHVybiBlPT09dCYmKGU9MTApLDEwIT1lP0codGhpcyxlLHIpOlN0cmluZyh0aGlzLnZhbHVlKX0scy5wcm90b3R5cGUudG9TdHJpbmc9YS5wcm90b3R5cGUudG9TdHJpbmcscy5wcm90b3R5cGUudG9KU09OPXAucHJvdG90eXBlLnRvSlNPTj1hLnByb3RvdHlwZS50b0pTT049ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50b1N0cmluZygpfSxwLnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHBhcnNlSW50KHRoaXMudG9TdHJpbmcoKSwxMCl9LHAucHJvdG90eXBlLnRvSlNOdW1iZXI9cC5wcm90b3R5cGUudmFsdWVPZixhLnByb3RvdHlwZS52YWx1ZU9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWV9LGEucHJvdG90eXBlLnRvSlNOdW1iZXI9YS5wcm90b3R5cGUudmFsdWVPZixzLnByb3RvdHlwZS52YWx1ZU9mPXMucHJvdG90eXBlLnRvSlNOdW1iZXI9ZnVuY3Rpb24oKXtyZXR1cm4gcGFyc2VJbnQodGhpcy50b1N0cmluZygpLDEwKX07Zm9yKHZhciBRPTA7UTwxZTM7USsrKXVbUV09SyhRKSxRPjAmJih1Wy1RXT1LKC1RKSk7cmV0dXJuIHUub25lPXVbMV0sdS56ZXJvPXVbMF0sdS5taW51c09uZT11Wy0xXSx1Lm1heD16LHUubWluPVIsdS5nY2Q9ayx1LmxjbT1mdW5jdGlvbih0LGUpe3JldHVybiB0PUsodCkuYWJzKCksZT1LKGUpLmFicygpLHQuZGl2aWRlKGsodCxlKSkubXVsdGlwbHkoZSl9LHUuaXNJbnN0YW5jZT1mdW5jdGlvbih0KXtyZXR1cm4gdCBpbnN0YW5jZW9mIHB8fHQgaW5zdGFuY2VvZiBhfHx0IGluc3RhbmNlb2Ygc30sdS5yYW5kQmV0d2Vlbj1mdW5jdGlvbih0LHIsbyl7dD1LKHQpLHI9SyhyKTt2YXIgbj1vfHxNYXRoLnJhbmRvbSxpPVIodCxyKSxwPXoodCxyKS5zdWJ0cmFjdChpKS5hZGQoMSk7aWYocC5pc1NtYWxsKXJldHVybiBpLmFkZChNYXRoLmZsb29yKG4oKSpwKSk7Zm9yKHZhciBhPUYocCxlKS52YWx1ZSxzPVtdLGw9ITAsZj0wO2Y8YS5sZW5ndGg7ZisrKXt2YXIgdj1sP2FbZl0rKGYrMTxhLmxlbmd0aD9hW2YrMV0vZTowKTplLGg9ZyhuKCkqdik7cy5wdXNoKGgpLGg8YVtmXSYmKGw9ITEpfXJldHVybiBpLmFkZCh1LmZyb21BcnJheShzLGUsITEpKX0sdS5mcm9tQXJyYXk9ZnVuY3Rpb24odCxlLHIpe3JldHVybiAkKHQubWFwKEspLEsoZXx8MTApLHIpfSx1fSgpOyJ1bmRlZmluZWQiIT10eXBlb2YgbW9kdWxlJiZtb2R1bGUuaGFzT3duUHJvcGVydHkoImV4cG9ydHMiKSYmKG1vZHVsZS5leHBvcnRzPWJpZ0ludCksImZ1bmN0aW9uIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZCYmZGVmaW5lKChmdW5jdGlvbigpe3JldHVybiBiaWdJbnR9KSk7Cg=="},{"meta":{"name":"md5.min.js","url":"https://cdn.bootcdn.net/ajax/libs/blueimp-md5/2.18.0/js/md5.min.js","ts":1670371893075,"mimetype":"text/javascript"},"source":"IWZ1bmN0aW9uKG4peyJ1c2Ugc3RyaWN0IjtmdW5jdGlvbiBkKG4sdCl7dmFyIHI9KDY1NTM1Jm4pKyg2NTUzNSZ0KTtyZXR1cm4obj4+MTYpKyh0Pj4xNikrKHI+PjE2KTw8MTZ8NjU1MzUmcn1mdW5jdGlvbiBmKG4sdCxyLGUsbyx1KXtyZXR1cm4gZCgoYz1kKGQodCxuKSxkKGUsdSkpKTw8KGY9byl8Yz4+PjMyLWYscik7dmFyIGMsZn1mdW5jdGlvbiBsKG4sdCxyLGUsbyx1LGMpe3JldHVybiBmKHQmcnx+dCZlLG4sdCxvLHUsYyl9ZnVuY3Rpb24gdihuLHQscixlLG8sdSxjKXtyZXR1cm4gZih0JmV8ciZ+ZSxuLHQsbyx1LGMpfWZ1bmN0aW9uIGcobix0LHIsZSxvLHUsYyl7cmV0dXJuIGYodF5yXmUsbix0LG8sdSxjKX1mdW5jdGlvbiBtKG4sdCxyLGUsbyx1LGMpe3JldHVybiBmKHJeKHR8fmUpLG4sdCxvLHUsYyl9ZnVuY3Rpb24gaShuLHQpe3ZhciByLGUsbyx1O25bdD4+NV18PTEyODw8dCUzMixuWzE0Kyh0KzY0Pj4+OTw8NCldPXQ7Zm9yKHZhciBjPTE3MzI1ODQxOTMsZj0tMjcxNzMzODc5LGk9LTE3MzI1ODQxOTQsYT0yNzE3MzM4NzgsaD0wO2g8bi5sZW5ndGg7aCs9MTYpYz1sKHI9YyxlPWYsbz1pLHU9YSxuW2hdLDcsLTY4MDg3NjkzNiksYT1sKGEsYyxmLGksbltoKzFdLDEyLC0zODk1NjQ1ODYpLGk9bChpLGEsYyxmLG5baCsyXSwxNyw2MDYxMDU4MTkpLGY9bChmLGksYSxjLG5baCszXSwyMiwtMTA0NDUyNTMzMCksYz1sKGMsZixpLGEsbltoKzRdLDcsLTE3NjQxODg5NyksYT1sKGEsYyxmLGksbltoKzVdLDEyLDEyMDAwODA0MjYpLGk9bChpLGEsYyxmLG5baCs2XSwxNywtMTQ3MzIzMTM0MSksZj1sKGYsaSxhLGMsbltoKzddLDIyLC00NTcwNTk4MyksYz1sKGMsZixpLGEsbltoKzhdLDcsMTc3MDAzNTQxNiksYT1sKGEsYyxmLGksbltoKzldLDEyLC0xOTU4NDE0NDE3KSxpPWwoaSxhLGMsZixuW2grMTBdLDE3LC00MjA2MyksZj1sKGYsaSxhLGMsbltoKzExXSwyMiwtMTk5MDQwNDE2MiksYz1sKGMsZixpLGEsbltoKzEyXSw3LDE4MDQ2MDM2ODIpLGE9bChhLGMsZixpLG5baCsxM10sMTIsLTQwMzQxMTAxKSxpPWwoaSxhLGMsZixuW2grMTRdLDE3LC0xNTAyMDAyMjkwKSxjPXYoYyxmPWwoZixpLGEsYyxuW2grMTVdLDIyLDEyMzY1MzUzMjkpLGksYSxuW2grMV0sNSwtMTY1Nzk2NTEwKSxhPXYoYSxjLGYsaSxuW2grNl0sOSwtMTA2OTUwMTYzMiksaT12KGksYSxjLGYsbltoKzExXSwxNCw2NDM3MTc3MTMpLGY9dihmLGksYSxjLG5baF0sMjAsLTM3Mzg5NzMwMiksYz12KGMsZixpLGEsbltoKzVdLDUsLTcwMTU1ODY5MSksYT12KGEsYyxmLGksbltoKzEwXSw5LDM4MDE2MDgzKSxpPXYoaSxhLGMsZixuW2grMTVdLDE0LC02NjA0NzgzMzUpLGY9dihmLGksYSxjLG5baCs0XSwyMCwtNDA1NTM3ODQ4KSxjPXYoYyxmLGksYSxuW2grOV0sNSw1Njg0NDY0MzgpLGE9dihhLGMsZixpLG5baCsxNF0sOSwtMTAxOTgwMzY5MCksaT12KGksYSxjLGYsbltoKzNdLDE0LC0xODczNjM5NjEpLGY9dihmLGksYSxjLG5baCs4XSwyMCwxMTYzNTMxNTAxKSxjPXYoYyxmLGksYSxuW2grMTNdLDUsLTE0NDQ2ODE0NjcpLGE9dihhLGMsZixpLG5baCsyXSw5LC01MTQwMzc4NCksaT12KGksYSxjLGYsbltoKzddLDE0LDE3MzUzMjg0NzMpLGM9ZyhjLGY9dihmLGksYSxjLG5baCsxMl0sMjAsLTE5MjY2MDc3MzQpLGksYSxuW2grNV0sNCwtMzc4NTU4KSxhPWcoYSxjLGYsaSxuW2grOF0sMTEsLTIwMjI1NzQ0NjMpLGk9ZyhpLGEsYyxmLG5baCsxMV0sMTYsMTgzOTAzMDU2MiksZj1nKGYsaSxhLGMsbltoKzE0XSwyMywtMzUzMDk1NTYpLGM9ZyhjLGYsaSxhLG5baCsxXSw0LC0xNTMwOTkyMDYwKSxhPWcoYSxjLGYsaSxuW2grNF0sMTEsMTI3Mjg5MzM1MyksaT1nKGksYSxjLGYsbltoKzddLDE2LC0xNTU0OTc2MzIpLGY9ZyhmLGksYSxjLG5baCsxMF0sMjMsLTEwOTQ3MzA2NDApLGM9ZyhjLGYsaSxhLG5baCsxM10sNCw2ODEyNzkxNzQpLGE9ZyhhLGMsZixpLG5baF0sMTEsLTM1ODUzNzIyMiksaT1nKGksYSxjLGYsbltoKzNdLDE2LC03MjI1MjE5NzkpLGY9ZyhmLGksYSxjLG5baCs2XSwyMyw3NjAyOTE4OSksYz1nKGMsZixpLGEsbltoKzldLDQsLTY0MDM2NDQ4NyksYT1nKGEsYyxmLGksbltoKzEyXSwxMSwtNDIxODE1ODM1KSxpPWcoaSxhLGMsZixuW2grMTVdLDE2LDUzMDc0MjUyMCksYz1tKGMsZj1nKGYsaSxhLGMsbltoKzJdLDIzLC05OTUzMzg2NTEpLGksYSxuW2hdLDYsLTE5ODYzMDg0NCksYT1tKGEsYyxmLGksbltoKzddLDEwLDExMjY4OTE0MTUpLGk9bShpLGEsYyxmLG5baCsxNF0sMTUsLTE0MTYzNTQ5MDUpLGY9bShmLGksYSxjLG5baCs1XSwyMSwtNTc0MzQwNTUpLGM9bShjLGYsaSxhLG5baCsxMl0sNiwxNzAwNDg1NTcxKSxhPW0oYSxjLGYsaSxuW2grM10sMTAsLTE4OTQ5ODY2MDYpLGk9bShpLGEsYyxmLG5baCsxMF0sMTUsLTEwNTE1MjMpLGY9bShmLGksYSxjLG5baCsxXSwyMSwtMjA1NDkyMjc5OSksYz1tKGMsZixpLGEsbltoKzhdLDYsMTg3MzMxMzM1OSksYT1tKGEsYyxmLGksbltoKzE1XSwxMCwtMzA2MTE3NDQpLGk9bShpLGEsYyxmLG5baCs2XSwxNSwtMTU2MDE5ODM4MCksZj1tKGYsaSxhLGMsbltoKzEzXSwyMSwxMzA5MTUxNjQ5KSxjPW0oYyxmLGksYSxuW2grNF0sNiwtMTQ1NTIzMDcwKSxhPW0oYSxjLGYsaSxuW2grMTFdLDEwLC0xMTIwMjEwMzc5KSxpPW0oaSxhLGMsZixuW2grMl0sMTUsNzE4Nzg3MjU5KSxmPW0oZixpLGEsYyxuW2grOV0sMjEsLTM0MzQ4NTU1MSksYz1kKGMsciksZj1kKGYsZSksaT1kKGksbyksYT1kKGEsdSk7cmV0dXJuW2MsZixpLGFdfWZ1bmN0aW9uIGEobil7Zm9yKHZhciB0PSIiLHI9MzIqbi5sZW5ndGgsZT0wO2U8cjtlKz04KXQrPVN0cmluZy5mcm9tQ2hhckNvZGUobltlPj41XT4+PmUlMzImMjU1KTtyZXR1cm4gdH1mdW5jdGlvbiBoKG4pe3ZhciB0PVtdO2Zvcih0WyhuLmxlbmd0aD4+MiktMV09dm9pZCAwLGU9MDtlPHQubGVuZ3RoO2UrPTEpdFtlXT0wO2Zvcih2YXIgcj04Km4ubGVuZ3RoLGU9MDtlPHI7ZSs9OCl0W2U+PjVdfD0oMjU1Jm4uY2hhckNvZGVBdChlLzgpKTw8ZSUzMjtyZXR1cm4gdH1mdW5jdGlvbiBlKG4pe2Zvcih2YXIgdCxyPSIwMTIzNDU2Nzg5YWJjZGVmIixlPSIiLG89MDtvPG4ubGVuZ3RoO28rPTEpdD1uLmNoYXJDb2RlQXQobyksZSs9ci5jaGFyQXQodD4+PjQmMTUpK3IuY2hhckF0KDE1JnQpO3JldHVybiBlfWZ1bmN0aW9uIHIobil7cmV0dXJuIHVuZXNjYXBlKGVuY29kZVVSSUNvbXBvbmVudChuKSl9ZnVuY3Rpb24gbyhuKXtyZXR1cm4gYShpKGgodD1yKG4pKSw4KnQubGVuZ3RoKSk7dmFyIHR9ZnVuY3Rpb24gdShuLHQpe3JldHVybiBmdW5jdGlvbihuLHQpe3ZhciByLGUsbz1oKG4pLHU9W10sYz1bXTtmb3IodVsxNV09Y1sxNV09dm9pZCAwLDE2PG8ubGVuZ3RoJiYobz1pKG8sOCpuLmxlbmd0aCkpLHI9MDtyPDE2O3IrPTEpdVtyXT05MDk1MjI0ODZeb1tyXSxjW3JdPTE1NDk1NTY4Mjheb1tyXTtyZXR1cm4gZT1pKHUuY29uY2F0KGgodCkpLDUxMis4KnQubGVuZ3RoKSxhKGkoYy5jb25jYXQoZSksNjQwKSl9KHIobikscih0KSl9ZnVuY3Rpb24gdChuLHQscil7cmV0dXJuIHQ/cj91KHQsbik6ZSh1KHQsbikpOnI/byhuKTplKG8obikpfSJmdW5jdGlvbiI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKGZ1bmN0aW9uKCl7cmV0dXJuIHR9KToib2JqZWN0Ij09dHlwZW9mIG1vZHVsZSYmbW9kdWxlLmV4cG9ydHM/bW9kdWxlLmV4cG9ydHM9dDpuLm1kNT10fSh0aGlzKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWQ1Lm1pbi5qcy5tYXA="}]}],"settings":{"script_blacklist_server":[{"rules":["/https?:\\/\\/userscripts\\.org\\/scripts\\/(source|version)/(102614).*\\.user\\.js/"],"severity":"2"},{"name":"SaveFrom.net helper","reason":"Shows advertisements","rules":["/https?:\\/\\/sf-addon\\.com\\/.*\\/.*\\.user\\.js/","/https?:\\/\\/.*\\.sf-helper\\.com\\/.*\\.user\\.js/"],"severity":"3"},{"reasons":{"en":"Used for a phishing compain to compromise users of baon-nutrition.com"},"rules":["/https?:\\/\\/files\\.ulysse\\.travel\\/.*\\.user\\.js/"],"severity":"8"}]}}